//===== rAthena Script =======================================
//= Sage's Legacy
//===== Description: =========================================
//= [Walkthrough Conversion]
//--- NPC quests for Episode 17.2
//===== Changelog: ===========================================
//= 1.0 Initial release [crazyarashi]
//= 1.1 Optimizations and cleanup [Everade]
//= 1.2 Cleanup [Capuche]
//============================================================

// Main quest
ba_pw02,90,93,0	script	???????????????#ep172_bapw2-00	4_ENERGY_BLUE,{
	if (ep17_2_main == 2) {
		cutin "bu_du5",2;
		mes "[???????????????]";
		mes "呃呃呃呃呃！！！";
		mes "格鲁埃克...!!!";
		next;
		cutin "",255;
		mes "——当我看着奇怪的声音时，我看到一个人似乎正在溺水。 -";
		next;
		if (select( "帮助他。", "忽略它。" ) == 2) {
			cutin "bu_du5",2;
			mes "[???????????????]";
			mes "哎呀哎呀...";
			close2;
			cutin "",255;
			cloakonnpcself( "Dew#ep172_bapw2-00" );
			end;
		}
		mes "——看来他已经无法做出任何动作了。我们去给他拿一片世界之叶吧。 -";
		ep17_2_main = 3;
		erasequest 18001;
		setquest 11615;
		close2;
		cloakonnpcself( "Dew#ep172_bapw2-00" );
		end;
	}
	if (ep17_2_main == 3) {
		if (countitem(610) < 1) {
			mes "——看来他已经无法做出任何动作了。我们去给他拿一片世界之叶吧。 -";
			close;
		}
		cloakoffnpcself( "Dew#ep172_bapw2-01" );
		mes "[露水]";
		mes "咳咳！！！";
		mes "哎呀呀。";
		delitem 610,1;
		ep17_2_main = 4;
		erasequest 11615;
		setquest 11616;
		next;
		mes "[露水]";
		mes "呜呜！！！";
		next;
		cutin "bu_du4",2;
		mes "[露水]";
		mes "咳咳……";
		mes "我以为我要死了！";
		next;
		mes "[露水]";
		mes "谢谢你！！";
		mes "你救了我的命！";
		mes "我永远不会忘记你的恩情...";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "...啊！！";
		mes "啊啊啊啊！！";
		next;
		cutin "bu_du2",2;
		mes "[露水]";
		mes "看看谁来了！！！";
		mes "" + strcharinfo(0) + "！！！";
		next;
		mes "[露水]";
		mes "在这样的地方再次遇见你真是缘分啊！！！";
		next;
		cutin "bu_du3",2;
		mes "[露水]";
		mes "如果没有你，我就会在普隆德拉教堂醒来！";
		mes "有那么一瞬间，我看到马克背着一个捐款袋，笑容灿烂……";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "太可怕了……我不想再想了……";
		next;
		cutin "bu_du4",2;
		mes "[露水]";
		mes "无论如何，除了那个可怕的故事之外……你在这里救了我……";
		mes "你是来调查这座宅邸的吗？";
		next;
		cutin "bu_du2",2;
		mes "[露水]";
		mes "不愧是我认作对手的人啊！";
		mes "这个地方不是很棒吗？？？";
		mes "我不敢相信这个地方竟然被隐藏了这么久......";
		next;
	}
	if (ep17_2_main == 4) {
		cloakoffnpcself( "Dew#ep172_bapw2-01" );
		cutin "bu_du1",2;
		mes "[露水]";
		mes "现在不是说这些的时候！";
		mes "我们上去吧！！！";
		mes "现在！！";
		next;
		mes "[露水]";
		mes "我相信其他人会为自己带来所有的乐趣！";
		next;
		cutin "bu_du3",2;
		mes "[露水]";
		mes "好吧，我们该去见马克和其他人了。";
		mes "唔...";
		mes "啊啊啊啊啊！！";
		next;
		cutin "bu_du1",2;
		mes "[露水]";
		mes "好吧，那边！";
		mes "我想我能听到那边魔法师的声音！！！";
		close2;
		cutin "",255;
		navigateto("ba_pw01",14,115);
		cloakonnpcself( "Dew#ep172_bapw2-01" );
		end;
	}
	mes "- 这似乎是一个脏水净化装置。 -";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18001) == 1 && BaseLevel > 130" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11615) == 1 && countitem(610) > 0" );
	end;
}

ba_pw02,90,93,5	duplicate(dummy_cloaked_npc)	Dew#ep172_bapw2-00	4_M_REDMAN
ba_pw02,93,93,3	duplicate(dummy_cloaked_npc)	Dew#ep172_bapw2-01	4_M_REDMAN

ba_pw01,14,115,0	script	#ep172_ev_00	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep17_2_main == 4) {
		cloakoffnpcself( "Magi#ep172_bapw1-00" );
		cutin "bu_maggi4",2;
		mes "[魔法]";
		mes "啊啊啊！！！";
		mes "别……别靠近我！！";
		mes "你再靠近我就攻击你！！！";
		next;
		cloakoffnpcself( "Dew#ep172_bapw1-00" );
		cutin "bu_du5",2;
		mes "[露水]";
		mes "啊啊啊！！！";
		mes "魔法师！！！";
		next;
		mes "[露水]";
		mes "这些人~~~";
		mes "你怎么敢，魔法师！";
		next;
		mes "[露水]";
		mes "点火中断...!!!";
		next;
		cutin "",255;
		cloakoffnpcself( "Lasis#ep172_bapw1-00" );
		specialeffect EF_DESPERADO, AREA, "Lasis#ep172_bapw1-00";
		mes "[左]";
		mes "魔法师，你还好吗？";
		mes "你有什么地方受伤了吗？";
		mes "呼……我还以为是猎心者……在这种地方再遭到伏击就危险了。";
		next;
		mes "[左]";
		mes "啊...";
		mes "我用了大招，伤口好痛……";
		next;
		cutin "bu_maggi4",2;
		mes "[魔法]";
		mes "拉西斯，你的伤口刚刚愈合，别拉伤了。别给自己太大压力！！！";
		mes "来。这边走...";
		next;
		cutin "",255;
		mes "[左]";
		mes "没关系，马克的治疗技能已经快把我彻底治愈了。";
		next;
		cutin "bu_du1",2;
		mes "[露水]";
		mes "魔法师，你还好吗？";
		mes "其他人在哪里？";
		mes "这家伙是谁？";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "露？！";
		mes "你去哪儿了！！";
		mes "你知道你突然消失的时候我有多担心吗？";
		mes "我们等了很久你都没有出现，所以马克才去找你！";
		next;
		cutin "",255;
		mes "[左]";
		mes "哦！";
		mes "这就是马克要找的人吗？";
		next;
		mes "[左]";
		mes "很高兴认识你。";
		mes "我是叛乱者莱西斯。";
		mes "你是露珠，你是……我之前在基地见过你……";
		next;
		cutin "bu_maggi1",2;
		mes "[魔法]";
		mes "我早些时候在来这里的路上遇到了拉西斯。";
		mes "当马克和我单独在一起时，突然不知从哪里冒出大批敌人。";
		next;
		cutin "bu_du3",2;
		mes "[露水]";
		mes "没有我也...";
		next;
		cutin "",255;
		mes "砰！！！";
		next;
		cutin "bu_du4",2;
		mes "[露水]";
		mes "哎哟！！！";
		next;
		cloakoffnpcself( "Mark#ep172_bapw1-00" );
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "你在做什么！！！";
		mes "你认为我在说什么？";
		mes "我告诉过你哪儿都别去！！！！";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "好痛！！！";
		next;
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "我的天啊。这家伙真是……";
		mes "叹...";
		next;
		cutin "",255;
		mes "[左]";
		mes "马克，看看这个地方。";
		next;
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "你确定吗？";
		next;
		cutin "",255;
		mes "[左]";
		mes "是的，这就是我们从你之前击倒的猎心者那里得到的宝石。";
		mes "我想知道它是否真的只是一颗宝石。";
		next;
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "既然猎心者队拥有这样的东西，我确信它是很重要的东西。";
		mes "我们暂时保留它吧。";
		mes "稍后我会想办法的。";
		next;
		mes "[标记]";
		mes "我收到了阿尔普的通知……他们在回来的路上找到了那扇门，所以我们在变得更加危险之前就到那里去吧。";
		ep17_2_main = 5;
		erasequest 11616;
		setquest 11617;
		close2;
		cutin "",255;
		cloakonnpcself( "Dew#ep172_bapw1-00" );
		cloakonnpcself( "Mark#ep172_bapw1-00" );
		cloakonnpcself( "Magi#ep172_bapw1-00" );
		cloakonnpcself( "Lasis#ep172_bapw1-00" );
		navigateto("ba_pw01",87,290);
		end;
	}
	if (ep17_2_main == 5) {
		cloakoffnpcself( "Mark#ep172_bapw1-00" );
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "我收到了阿尔普的通知……他们在回来的路上找到了那扇门，所以我们在变得更加危险之前就到那里去吧。";
		close2;
		cutin "",255;
		navigateto("ba_pw01",87,290);
		cloakonnpcself( "Mark#ep172_bapw1-00" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11616) == 1" );
	end;
}

ba_pw01,17,115,3	duplicate(dummy_cloaked_npc)	Dew#ep172_bapw1-00	4_M_REDMAN
ba_pw01,16,115,3	duplicate(dummy_cloaked_npc)	Mark#ep172_bapw1-00	4_M_BLUEMAN
ba_pw01,20,119,5	duplicate(dummy_cloaked_npc)	Magi#ep172_bapw1-00	4_F_PINKWOMAN
ba_pw01,19,119,3	duplicate(dummy_cloaked_npc)	Lasis#ep172_bapw1-00	4_M_REBELLION

ba_pw01,87,290,3	script	Alp#ep172_bapw1-00	4_M_BLACKMAN,{
	if (ep17_2_main < 5) {
		cutin "bu_alp3",2;
		mes "[阿尔普]";
		mes "这些设备可以为一个城市提供能源……不，它可以在国家范围内提供能源。";
		mes "这个装置到底是用来做什么的？";
		close3;
	}
	if (ep17_2_main == 5 || ep17_2_main == 6) {
		if (ep17_2_main == 5) {
			ep17_2_main = 6;
			erasequest 11617;
			setquest 11618;
		}
		cutin "bu_alp3",2;
		mes "[阿尔普]";
		mes "你在这里...";
		mes "这边走...";
		close2;
		cutin "",255;
		navigateto("ba_in01",20,319);
		warp "ba_in01",23,315;
		end;
	}
	mes "[����]";
	mes "��û�� ��ġ�顦";
	mes "�����������������������������������������������������������������������������������������������������������������������������������������������������������";
	mes "��ü �� ���� �̷��� ������";
	cutin "bu_alp1.bmp",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11617) == 1" );
	end;
}

ba_in01,20,319,3	script	Lasis#ep172_bain1-00	4_M_REBELLION,{
	if (ep17_2_main == 6 || ep17_2_main == 7) {
		mes "[左]";
		mes "我们终于来了。";
		mes "我有人在等你，我们就在这里分头吧。";
		next;
		mes "[左]";
		mes "即使我们在这里分开，我想我也会在这个地区呆上一段时间，所以如果有什么情况请告诉我。";
		next;
		cloakoffnpcself( "Dew#ep172_bain01-00" );
		cloakoffnpcself( "Mark#ep172_bain01-00" );
		cloakoffnpcself( "Magi#ep172_bain01-00" );
		npctalk "Dew：噢，这又是一个奇怪的房间吗？！我们不应该出去吗？哦！！！看看那边的窗户。有这么多神奇的机器！！！", "露#ep172_bain01-00", bc_self;
		cutin "bu_mark2",2;
		mes "[标记]";
		mes "我们先走吧。";
		mes "谢谢你，拉西斯。";
		next;
		cutin "bu_maggi2",2;
		mes "[魔法]";
		mes "稍后见~";
		next;
		cutin "bu_mark2",2;
		mes "[标记]";
		mes "里面的门锁着，我们出去吧。";
		if (ep17_2_main == 6) {
			ep17_2_main = 7;
			erasequest 11618;
			setquest 11620;
		}
		close2;
		cutin "",255;
		cloakonnpcself( "Dew#ep172_bain01-00" );
		cloakonnpcself( "Mark#ep172_bain01-00" );
		cloakonnpcself( "Magi#ep172_bain01-00" );
		navigateto("ba_maison",70,145);
		end;
	}
	mes "[左]";
	mes "顺便问一下，你为什么迟到？";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11618) == 1" );
	end;
}

ba_in01,31,321,5	duplicate(dummy_cloaked_npc)	Dew#ep172_bain01-00	4_M_REDMAN
ba_in01,19,322,5	duplicate(dummy_cloaked_npc)	Mark#ep172_bain01-00	4_M_BLUEMAN
ba_in01,18,323,5	duplicate(dummy_cloaked_npc)	Magi#ep172_bain01-00	4_F_PINKWOMAN


ba_maison,70,145,3	script	Tamarin#ep172_bamaison-00	4_EP17_TAMARIN,{
	if (checkweight(1000103,5) == 0) {
		mes "- 你的物品太多了。";
		mes "请清理您的库存并重试。 -";
		close;
	}
	if (ep17_2_main == 7 || ep17_2_main == 8) {
		if (ep17_2_main == 7) {
			cutin "ep172_tamarin02",2;
			mes "[狨猴]";
			mes "你来了？";
			mes "你怎么这么晚？";
			next;
			cloakoffnpcself( "Dew#ep172_bamaison-00" );
			cloakoffnpcself( "Mark#ep172_bamaison-00" );
			cloakoffnpcself( "Magi#ep172_bamaison-00" );
			cutin "bu_mark1",2;
			mes "[标记]";
			mes "抱歉~露水又突然消失了。";
			next;
			cutin "bu_du5",2;
			mes "[露水]";
			mes "哈哈哈哈哈哈哈！！！";
			mes "你的衣服怎么了！！";
			next;
		}
		else {
			cloakoffnpcself( "Dew#ep172_bamaison-00" );
			cloakoffnpcself( "Mark#ep172_bamaison-00" );
			cloakoffnpcself( "Magi#ep172_bamaison-00" );
		}
		cutin "ep172_tamarin03",2;
		mes "[狨猴]";
		mes "他们告诉我，你需要注册才能进入豪宅，所以我注册了，他们突然把我的衣服换成了这个！";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "哈哈哈哈哈哈！！！";
		mes "我笑得太厉害了，笑得我肚子疼！！！";
		next;
		cutin "ep172_tamarin03",2;
		mes "[狨猴]";
		mes "别笑了！";
		next;
		mes "[狨猴]";
		mes "别笑了，赶紧报名吧。";
		mes "与门附近的阿尔法交谈，她会将您登记为客人。";
		if (ep17_2_main == 7) {
			ep17_2_main = 8;
			completequest 11620;
			getitem 1000103,5;
			getexp 401075,0;
		}
		close2;
		cutin "",255;
		cloakonnpcself( "Dew#ep172_bamaison-00" );
		cloakonnpcself( "Mark#ep172_bamaison-00" );
		cloakonnpcself( "Magi#ep172_bamaison-00" );
		end;
	}
	if (ep17_2_main < 10) {
		mes "[狨猴]";
		mes "听说瓦蒙特的宅邸在雇佣兵起义时被烧毁了……我觉得和书上写的有很大出入。";
		cutin "ep172_tamarin01.bmp",2;
		close3;
	}

	// Start Library Quest
	if (ep17_2_library == 0) {
		cloakoffnpcself( "Dew#ep172_bamaison-00" );
		cloakoffnpcself( "Mark#ep172_bamaison-00" );
		cloakoffnpcself( "Magi#ep172_bamaison-00" );
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "为什么大家都这样...";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "昨天！假期 ！！！！";
		next;
		cutin "ep172_tamarin03",2;
		mes "[狨猴]";
		mes "别笑了！！！";
		mes "你应该换衣服了...";
		next;
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "哇！！！！！！";
		mes "这味道！！！！！！！！！";
		mes "味道太难闻了！！！！";
		next;
		cutin "bu_mark4",2;
		mes "[标记]";
		mes "想想看，如果你在明亮的地方看起来很脏。";
		mes "呃……你闻起来很难闻！！";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "露。";
		mes "你身上有股腐烂的气味……";
		next;
		cutin "bu_du1",2;
		mes "[露水]";
		mes "啊？";
		mes "是因为我感觉进了下水道吗？";
		next;
		cutin "bu_du2",2;
		mes "[露水]";
		mes "是的！！";
		mes "听着，我刚才掉进下水道了，真是危险啊！";
		mes "我的救星是...";
		next;
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "你这个臭东西，别靠近我啊你这个白痴！！！";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "呃呃呃呃……";
		mes "我臭了！！！！";
		mes "这不是玩笑！！！";
		next;
		mes "[露水]";
		mes "水！！！";
		mes "我需要干净的水！！！！";
		next;
		mes "[露水]";
		mes "哦，那边有什么东西？！";
		next;
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "你要去哪里！！！";
		ep17_2_library = 1;
		setquest 11621;
		close2;
		cutin "",255;
		cloakonnpcself( "Dew#ep172_bamaison-00" );
		cloakonnpcself( "Mark#ep172_bamaison-00" );
		cloakonnpcself( "Magi#ep172_bamaison-00" );
		navigateto("ba_maison",85,111);
		end;
	}
	if (ep17_2_library == 1) {
		cloakoffnpcself( "Dew#ep172_bamaison-00" );
		cloakoffnpcself( "Mark#ep172_bamaison-00" );
		cloakoffnpcself( "Magi#ep172_bamaison-00" );
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "哇！！！！！！";
		mes "这味道！！！！！！！！！";
		mes "味道太难闻了！！！！";
		next;
		cutin "bu_mark4",2;
		mes "[标记]";
		mes "想想看，如果你在明亮的地方看起来很脏。";
		mes "呃……你闻起来很难闻！！";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "露。";
		mes "你身上有股腐烂的气味……";
		next;
		cutin "bu_du1",2;
		mes "[露水]";
		mes "啊？";
		mes "是因为我感觉进了下水道吗？";
		next;
		cutin "bu_du2",2;
		mes "[露水]";
		mes "是的！！";
		mes "听着，我刚才掉进下水道了，真是危险啊！";
		mes "我的救星是...";
		next;
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "你这个臭东西，别靠近我啊你这个白痴！！！";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "呃呃呃呃……";
		mes "我臭了！！！！";
		mes "这不是玩笑！！！";
		next;
		mes "[露水]";
		mes "水！！！";
		mes "我需要干净的水！！！！";
		next;
		mes "[露水]";
		mes "哦，那边有什么东西？！";
		next;
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "你要去哪里！！！";
		close2;
		cutin "",255;
		navigateto("ba_maison",85,111);
		end;
	}
	if (ep17_2_library < 5) {
		mes "[狨猴]";
		mes "听说瓦蒙特的宅邸在雇佣兵起义时被烧毁了……我觉得和书上写的有很大出入。";
		cutin "ep172_tamarin01.bmp",2;
		close3;
	}
	cutin "ep172_tamarin01",2;
	mes "[狨猴]";
	mes "你好，" + strcharinfo(0) + ".";
	mes "我接到了阿尔法的临时任务，并请求其他冒险家的帮助。";
	next;
	switch( checkquest(11639,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		cutin "ep172_tamarin04",2;
		mes "[狨猴]";
		mes "今天的工作已经完成了。感谢您伸出援手。";
		close3;
	case 2:
		erasequest 11639;
		break;
	}
	switch( checkquest(11638,HUNTING) ) {
	case -1:
		mes "[狨猴]";
		mes "我们要求收集宅邸周围残留的守护者零件，最近似乎遭到袭击，正在损害宅邸的居住环境。";
		mes "请收集20个守护者零件来改善宅邸的环境形象。";
		next;
		if (select( "接受。", "拒绝。" ) == 2) {
			cutin "ep172_tamarin04",2;
			mes "[狨猴]";
			mes "我希望您在这里度过安全舒适的时光。";
			close3;
		}
		cutin "ep172_tamarin04",2;
		mes "[狨猴]";
		mes "非常感谢。";
		setquest 11638;
		close3;
	case 0:
	case 1:
		mes "[狨猴]";
		mes "嗯... " + strcharinfo(0) + "，您已经接受了此请求。";
		close3;
	case 2:
		cutin "ep172_tamarin04",2;
		mes "[狨猴]";
		mes "我已确认您已完成此请求。非常感谢。";
		erasequest 11638;
		setquest 11639;
		getitem 1000103,2;
		getexp 500000,300000;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11620) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 10 && isbegin_quest(11621) == 0 && ep17_2_library == 0" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep17_2_library == 5 && checkquest(11639,PLAYTIME) == -1 && checkquest(11638,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(11639,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(11638,HUNTING) == 2" );
	end;
}

ba_maison,69,146,5	duplicate(dummy_cloaked_npc)	Dew#ep172_bamaison-00	4_M_REDMAN
ba_maison,66,145,5	duplicate(dummy_cloaked_npc)	Mark#ep172_bamaison-00	4_M_BLUEMAN
ba_maison,68,146,5	duplicate(dummy_cloaked_npc)	Magi#ep172_bamaison-00	4_F_PINKWOMAN

// Daily quest : Supply the spare parts
ba_maison,74,150,3	script	Mansion Manager ��#172nw01	4_EP17_MASTER_A,{
	if (checkweight(1000103,15) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main < 8) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "如果您是别墅的客人，请先完成客人登记。请理解，对于因误认为入侵者而造成的任何事故，我们不承担任何责任。";
		close3;
	}
	if (ep17_2_main == 8) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "欢迎。很高兴认识你。我担心你在宅邸里迷路了。";
		next;
		mes "[宅邸经理��]";
		mes "我们已向您颁发了访客许可证。与瓦蒙特的正式邀请不同，这张卡只是暂时的。";
		next;
		mes "[宅邸经理��]";
		mes "因为与其他入侵者不同，您没有对财产造成任何损害，例如故意破坏或盗窃。您获得了调查的临时许可证。";
		next;
		mes "[宅邸经理��]";
		mes "这是为了防止调查前在宅邸内闲逛时发生不愉快事件而采取的措施。";
		next;
		mes "[宅邸经理��]";
		mes "我们恳请您的理解。在确认目的、方式和你的身份后，我们将允许你在宅邸内进行调查。";
		next;
		mes "[宅邸经理��]";
		mes "首先，请告诉我你的名字。";
		next;
		cutin "",255;
		select( "我是" + strcharinfo(0) + "." );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "" + strcharinfo(0) + "。您来宅邸的目的是什么？";
		next;
		cutin "",255;
		select( "我是..." );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes ".....";
		mes "请稍等..";
		npctalk "目的……是……为了……", "", bc_self;
		next;
		mes ".....";
		next;
		mes ".....";
		mes ".............";
		next;
		mes ".....";
		mes ".............";
		mes "...................";
		next;
		mes "[宅邸经理��]";
		mes "...你碰巧和你一起参加聚会吗？";
		next;
		cutin "",255;
		select( "我和叛乱分子以及一些政府官员一起来了。" );
		mes ".....";
		next;
		mes ".....";
		mes ".............";
		next;
		mes ".....";
		mes ".............";
		mes "...................";
		next;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "打扰一下。 " + strcharinfo(0) + "，我会立即向您颁发正式的访客许可证。";
		next;
		cutin "",255;
		select( "什么？突然？" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "我在确认了宅邸内其他地方聚集的其他党员的身份和来访目的后进行了登记。";
		next;
		mes "[宅邸经理��]";
		mes "你的^0000CD队伍^000000已自动获得正式身份，因为他们来自前几天访问这座宅邸的^0000CD同一队伍^000000。";
		next;
		mes "[宅邸经理��]";
		mes "另外，他们还表示，你们来这里是为了《<<CLR0>>>抓捕在宅邸内闹事的入侵者^000000。";
		next;
		mes "[宅邸经理��]";
		mes "因此，我们还将向贵方颁发正式的宅邸宾客许可证，" + strcharinfo(0);
		next;
		mes "[宅邸经理��]";
		mes "请稍等。";
		next;
		cutin "",255;
		progressbar_npc "00FF00",2;
		specialeffect EF_VALLENTINE;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "" + strcharinfo(0) + "。欢迎来到瓦蒙特宅邸。很高兴见到你。我是这座豪宅的管理者。";
		next;
		mes "[宅邸经理��]";
		mes "今后。 " + strcharinfo(0) + "，作为贵宾，您可以免费使用这座宅邸的设施。如果您有任何疑问，请随时联系最近的自动娃娃。";
		next;
		mes "[宅邸经理��]";
		mes "另外，如果您需要清理工作的帮助以及有关宅邸入侵者的信息，我们将全力配合。";
		mes "为此，我们向公众开放了宅邸的外部。";
		next;
		cutin "",255;
		select( "谢谢。" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "我会将" + strcharinfo(0) + "的新登记嘉宾名单分享给其他自动人形。";
		next;
		progressbar_npc "00FF00",2;
		mes "[宅邸经理��]";
		mes "" + strcharinfo(0) + "，宅子里所有的自动人偶都是……亲爱的……哦……";
		next;
		mes ".....";
		next;
		mes ".....";
		mes ".............";
		next;
		mes ".....";
		mes ".............";
		mes "...................";
		next;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "抱歉，请稍等。";
		ep17_2_main = 9;
		setquest 17333;
		close3;
	}
	if (ep17_2_main == 9) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "又……麻烦了……";
		next;
		cutin "",255;
		select( "有问题吗？" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "在某些区域，^0000CD中继器^000000存在问题。信号未发送或未接收。";
		next;
		close2;
		select( "复读机？" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "豪宅里的所有自动娃娃都连接着无线网络。";
		mes "我们利用这个网络，瞬间将信息分享给宅邸中的每一个自动人偶。";
		next;
		mes "[宅邸经理��]";
		mes "这对于宾客登记和日程共享等事情非常重要。";
		next;
		mes "[宅邸经理��]";
		mes "如果你想将信息传递到宅邸中的任何地方。使用转发器将信息转发给所有自动人偶。";
		next;
		mes "[宅邸经理��]";
		mes "我已经发送了更新的宾客名单信息。但是，我还没有收到一些自动人偶的确认。";
		next;
		mes "[宅邸经理��]";
		mes "信号不传输区域的中继器出现故障。";
		next;
		close2;
		select( "是不是经常坏掉？" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "故障并不常见，因为我们精心维护。";
		mes "然而，前几天《CLR0》入侵者《CLR1》进入宅邸时，他们对宅邸内的设施进行了拆卸和勒索。";
		next;
		mes "[宅邸经理��]";
		mes "一些自动人偶被入侵者毁坏了。";
		next;
		mes "[宅邸经理��]";
		mes "我得检查一下哪个区域的中继器不能正常工作。";
		next;
		mes "[宅邸经理��]";
		mes "我很抱歉，但是你能再等一下吗？我必须检查哪个区域出现问题并手动转发更新的宾客名单。";
		next;
		cutin "",255;
		progressbar_npc "00FF00",2;
		npctalk "住宿...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "实验室...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "礼堂...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "餐厅...信号失败...", "", bc_self;
		sleep2 2000;
		npctalk "哨所...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "展馆...信号失败...", "", bc_self;
		sleep2 2000;
		npctalk "仓库...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "花园...信号失败...", "", bc_self;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "我们的 20 名中继者中，只有 3 人没有做出回应。我很高兴这个数字很小。我们会去信号无法到达的地方手动通过更新后的宾客名单。我们还需要检查中继器。";
		next;
		cutin "",255;
		sleep2 700;
		cloakoffnpcself( "Tommy#172nw01" );
		cloakoffnpcself( "Meimei#172nw01" );
		mes "[汤米]";
		mes "是这里吗？？";
		npctalk "是这里吗？？", "汤米#172nw01", bc_self;
		next;
		mes "[Meimei]";
		mes "哦，冒险家，你来了。";
		npctalk "哦，冒险家，你来了。", "或许#172nw01", bc_self;
		next;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "另一个人。他们是你的聚会的一部分吗？";
		next;
		cutin "",255;
		select( "是的，我和他们在一起。" );
		mes "[Meimei]";
		mes "哇，这就是豪宅啊。瓦蒙特宅邸！";
		npctalk "哇，这就是豪宅啊。瓦蒙特宅邸！", "或许#172nw01", bc_self;
		next;
		mes "[汤米]";
		mes "冒险家！宅邸内已经确认了幻象的动向。很快我们就要组建团队，弄清楚宅邸的结构，然后开始运营。";
		next;
		select( "我会等待。" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "如果你是新人，请往这边走。我会正式登记你成为宅邸的客人。";
		next;
		mes "[宅邸经理��]";
		mes "哦，在那之前……" + strcharinfo(0) + "，你参观过宅邸吗？";
		next;
		cutin "",255;
		select( "还没有。" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "那么，我可以冒昧地请你帮个忙吗？我不是故意偷听的，但你说你需要弄清楚这座宅邸的结构。";
		next;
		mes "[宅邸经理��]";
		mes "你能告诉坏掉的中继器附近的自动人偶去检查坏掉的中继器吗？";
		next;
		mes "[宅邸经理��]";
		mes "参观宅邸周围是一个不错的路线。";
		next;
		mes "[宅邸经理��]";
		mes "这是我的工作，但我没有足够的时间手动注册、更新和共享信息，因为客人仍然进来。";
		next;
		cutin "",255;
		if (select( "我会这么做的。", "我需要先做点什么。" ) == 2) {
			mes "[宅邸经理��]";
			mes "是这样吗，很抱歉在您百忙之中问得太多了。";
			mes "随意参观一下宅邸的周围。";
			close3;
		}
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "感谢您接受我的麻烦请求。";
		mes "有些自动人偶还没有收到更新的嘉宾名单，但我们已经正式授予" + strcharinfo(0) + "为嘉宾。当您靠近娃娃时，它们会认出您。";
		next;
		mes "[宅邸经理��]";
		mes "其他人都收到了名单，所以使用府邸不会有那么不方便。如果您需要任何帮助，请随时联系最近的自动娃娃。";
		next;
		mes "[宅邸经理��]";
		mes "首先，最近的是<NAVI>[餐厅]<INFO>ba_maison,146,109,0,101,0</INFO></NAVI>。你应该去那里。如果您将问题告诉复读机附近最近的自动娃娃，他们会为您解决。";
		next;
		mes "[宅邸经理��]";
		mes "那么，请。";
		ep17_2_main = 10;
		erasequest 17333;
		setquest 17334;
		close2;
		cutin "",255;
		navigateto("ba_maison",146,109);
		end;
	}
	if (ep17_2_main == 10 || ep17_2_main == 11) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "首先，最近的是<NAVI>[餐厅]<INFO>ba_maison,146,109,0,101,0</INFO></NAVI>。你应该去那里。如果您将问题告诉复读机附近最近的自动娃娃，他们会为您解决。";
		close3;
	}
	if (ep17_2_main == 12) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "<NAVI>[展馆]<INFO>ba_maison,334,143,0,101,0</INFO></NAVI>就是这里。如果你送来的话，那边的自动娃娃会照顾坏掉的中继器。";
		close3;
	}
	if (ep17_2_main == 13) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "将问题告诉<NAVI>[中央花园]<INFO>ba_maison,245,206,0,0,0</INFO></NAVI>区域中损坏的中继器附近的自动娃娃，它会处理它。";
		close3;
	}
	if (ep17_2_main == 14) {
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "" + strcharinfo(0) + "， 欢迎回来。你参观过这座豪宅吗？还有，你把消息传递给了中继器坏掉区域附近的自动人偶了吗？";
		next;
		cutin "",255;
		select( "我把它们都交付了。" );
		mes "[宅邸经理��]";
		mes "非常感谢您的辛勤工作。让我检查一下网络状态。";
		progressbar_npc "00FF00",2;
		next;
		cutin "",255;
		npctalk "住宿...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "实验室...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "礼堂...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "餐厅...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "哨所...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "展馆...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "仓库...收到信号...", "", bc_self;
		sleep2 2000;
		npctalk "花园...收到信号...", "", bc_self;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "宅邸网络已经恢复，各个区域信号收发清晰。";
		mes "现在，您可以作为正式客人使用宅邸的所有设施。";
		next;
		mes "[宅邸经理��]";
		mes "" + strcharinfo(0) + "， 非常感谢。";
		mes "你很好地处理了这个麻烦的入侵者。给我的印象是，你是一个非常熟练的冒险家，能够出色地处理这种情况。";
		next;
		mes "[宅邸经理��]";
		mes "You quickly learned the geography of the mansion, and you quickly become accustomed with the automatic dolls.这令人印象深刻。";
		next;
		mes "[宅邸经理��]";
		mes "请您巡视一下宅子周围，如果您发现任何问题，我想请求您的帮助。";
		next;
		mes "[宅邸经理��]";
		mes "我们自动人偶为人类客人服务就像我们为宅邸主人服务一样，我们已经很熟悉了。但我们对不熟悉的问题缺乏足够的信息和应对能力。";
		next;
		mes "[宅邸经理��]";
		mes "我们还没有解决入侵者的问题。从非人类的角度来看，似乎很难解决它，因为有很多部分没有足够的信息。";
		next;
		mes "[宅邸经理��]";
		mes "我们希望通过" + strcharinfo(0) + "收集解决入侵者问题的相关数据，这将对以后的案例有很大的帮助。";
		next;
		cutin "",255;
		select( "好的。" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "虽然不多，但作为谢意，我送你这个。";
		mes "这是^0000CD酒吧餐券^000000，可以在宅邸的餐厅使用。";
		mes "你可以随意吃任何东西，随时使用它。";
		next;
		mes "[宅邸经理��]";
		mes "宅邸的<NAVI>[餐厅]<INFO>ba_maison,146,109,0,101,0</INFO></NAVI>位于底部，正如我之前展示的那样。";
		next;
		cutin "",255;
		select( "你看过我的派对吗？" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "在你们之前来的人现在住在<NAVI>[茶馆]<INFO>ba_in01,206,106,0,101,0</INFO></NAVI>，请四处看看并与他们交谈。";
		next;
		mes "[宅邸经理��]";
		mes "如果您在宅邸内有任何不便，请随时告诉自动人偶。请收下这张 Barmeal 门票，作为对您辛勤工作的感谢。";
		ep17_2_main = 15;
		erasequest 17338;
		setquest 17381;
		getitem 1000103,15;
		getexp 900000,0;	// note: ~exp. getbaseexp_ratio?
		close3;
	}
	cutin "ep172_alpha",2;
	mes "[宅邸经理��]";
	mes "欢迎，" + strcharinfo(0) + ".";
	next;
	if (ep17_2_main == 15) {
		mes "[宅邸经理��]";
		mes "在你们之前来的人现在住在<NAVI>[茶馆]<INFO>ba_in01,206,106,0,101,0</INFO></NAVI>，请四处看看并与他们交谈。";
		next;
	}
	switch( checkquest(17341,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[宅邸经理��]";
		mes "您有需要的东西吗？或者您有什么不舒服的地方吗？";
		mes "哦，你是不是来给我带中继器备用通讯芯片的？";
		next;
		mes "[宅邸经理��]";
		mes "直放站通讯芯片供应充足。";
		mes "不用担心中继器。今天请休息一下，^0000CD天亮后回来^000000。";
		close3;
	case 2:
		mes "[宅邸经理��]";
		mes "您今天来这里是为了帮我获取中继器的备用通信芯片吗？";
		next;
		if (select( "是的。", "不。" ) == 2) {
			mes "[宅邸经理��]";
			mes "那么，您是因为使用宅邸设施时有什么不便才来到这里的吗？";
			mes "如果您告诉最近的自动娃娃，我们会立即处理。";
			close3;
		}
		mes "[宅邸经理��]";
		mes "非常感谢您今天的帮助。";
		next;
		mes "[宅邸经理��]";
		mes "请给我带来^0000CD10个自动人偶通信芯片^000000用于中继器。我认为这足以满足一天的供应。";
		next;
		mes "[宅邸经理��]";
		mes "它还帮助我们处理在宅邸里闲逛的坏掉的自动玩偶。请照顾在宅邸周围漫游的任何破碎贝塔，并随身携带其通讯芯片。";
		next;
		mes "[宅邸经理��]";
		mes "那么，就请冒险者吧。";
		erasequest 17341;
		setquest 17340;
		close3;
	}
	switch( isbegin_quest(17340) ) {
	case 0:
		mes "[宅邸经理��]";
		mes "您有需要的东西吗？或者您有什么不舒服的地方吗？";
		next;
		cutin "",255;
		select( "网络工作正常吗？" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "你来这里就是为了这件事吗？非常感谢您的关心。";
		next;
		mes "[宅邸经理��]";
		mes "和之前的情况一样，宅邸的某些区域的网络状态正在失去连接。";
		next;
		mes "[宅邸经理��]";
		mes "虽然发现后就修复了，但这个问题仍然持续出现。必要的通信芯片需求难以供应。";
		next;
		mes "[宅邸经理��]";
		mes "此外，破损的自动人偶四处游荡，不断破坏中继器，使所需的供应量增加了一倍。";
		next;
		cutin "",255;
		if (select( "我可以帮忙吗？", "哦，那一定很困难。" ) == 2) {
			mes "[宅邸经理��]";
			mes "感谢您考虑困难。我们会尽快处理好中继器，以免使用时造成不便。";
			close;
		}
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "非常感谢。但我担心我会占用您太多的时间" + strcharinfo(0) + "...如果您完全不介意的话，我想请您帮个忙。";
		next;
		mes "[宅邸经理��]";
		mes "请给我带来^0000CD10个自动人偶通信芯片^000000用于中继器。我认为这足以满足一天的供应。";
		next;
		mes "[宅邸经理��]";
		mes "它还帮助我们处理在宅邸里闲逛的坏掉的自动玩偶。请照顾在宅邸周围漫游的任何破碎贝塔，并随身携带其通讯芯片。";
		next;
		mes "[宅邸经理��]";
		mes "那么，就请冒险者吧。";
		setquest 17340;
		close3;
	case 1:
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "我要的自动人偶通讯芯片你带了吗？";
		next;
		if (countitem(1000232) < 10) {
			mes "[宅邸经理��]";
			mes "请给我带来^0000CD10个自动人偶通信芯片^000000用于中继器。我认为这足以满足一天的供应。";
			next;
			mes "[宅邸经理��]";
			mes "它还帮助我们处理在宅邸里闲逛的坏掉的自动玩偶。请照顾在宅邸周围漫游的任何损坏的 Beta，并随身携带其通信芯片。";
			close3;
		}
		mes "[宅邸经理��]";
		mes "这一天就够了。感谢您的辛勤工作。";
		mes "如果您有时间，我想在天亮后再次请求您的帮助^000000，如果您不介意请明天再来。";
		next;
		mes "[宅邸经理��]";
		mes "非常感谢。请随身携带这个。";
		erasequest 17340;
		setquest 17341;
		delitem 1000232,10;
		getitem 1000103,2;
		getexp 949720,664800;
		close3;
	}
	end;

OnInit:
	// main quest
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "ep17_2_main == 8" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17333) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17338) == 1" );

	// daily quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 15 && checkquest(17341,PLAYTIME) == -1 && isbegin_quest(17340) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(17341,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17340) == 1 && countitem(1000232) >= 10" );
	end;
}

ba_maison,72,151,5	script(CLOAKED)	Tommy#172nw01	4_M_GUNSLINGER2,{
	mes "[汤米]";
	mes "这座豪宅很大。我其实很喜欢这个地方。";
	mes "我什至不知道有这样的事情。";
	close;
}

ba_maison,70,150,5	script(CLOAKED)	Meimei#172nw01	4_F_REBELLION3,{
	mes "[Meimei]";
	mes "所以，这就是你所在的地方。雇佣兵们...";
	close;
}

ba_maison,146,109,5	script	Tasty#172nw01	4_EP17_BASIC_B,{
	if (checkweight(1000103,5) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main == 10) {
		mes "[美味]";
		mes "啊!现在，等等。那是什么？切，入侵者？";
		emotion ET_HUK;
		next;
		mes "[美味]";
		mes "这是正确的！这是正确的！哦，我该怎么办？我该怎么办，我该怎么办？安全？哦，是的。我被告知要打电话给保安。";
		npctalk "过来，保安，保安……", "", bc_self;
		progressbar_npc "00FF00",2;
		next;
		sleep2 1150;
		mes "[美味]";
		mes "什么？这不工作！什么时候坏掉的？哦，我该怎么办？";
		emotion ET_HUK;
		next;
		mes "[美味]";
		mes "是的！麻糬！我给你一块麻糬，我们为什么不去别的地方呢？你喜欢麻糬，不是吗？";
		next;
		emotion ET_QUESTION, getcharid(3);
		select( "..." );
		mes "[美味]";
		mes "哦，这不是麻糬吗？你不是我之前认识的那个人吗？那么，肉呢？你喜欢吃肉吗？你喜欢吃肉，不是吗？我从未见过不喜欢肉的人。我会把我所有的肉都给你。";
		next;
		emotion ET_SWEAT, getcharid(3);
		select( "......" );
		mes "[美味]";
		mes "奇怪的？这不是肉吗？那我能给你什么？你想回去吗？";
		emotion ET_QUESTION;
		next;
		mes "[美味]";
		mes "哦，我该怎么办？我被告知不要跑向入侵者。你是来^0000CD拿走我的零件^000000吗？这就是我的结局吗？";
		next;
		emotion ET_SWEAT, getcharid(3);
		select( "我不是那样的人。" );
		mes "[美味]";
		mes "你不是那样的人吗……？那么，你是一个什么样的人呢？";
		next;
		mes "[美味]";
		mes "坚持，稍等...？你说得对？你没有流口水，你的眼睛也正常。你不是^0000CD入侵者^000000吗？";
		emotion ET_QUESTION;
		next;
		select( "我是宅邸的客人，但是……" );
		mes "[美味]";
		mes "什么？客人？哦等等。我会检查...";
		emotion ET_HUK;
		progressbar_npc "00FF00",2;
		next;
		mes "[美味]";
		mes "是真的吗？但是……你是第一次来吗？新客人？最后？哦，很抱歉把你误认为是入侵者。";
		emotion ET_SURPRISE;
		next;
		mes "[美味]";
		mes "我以为你是入侵者之一";
		mes "不知怎的，大家都说要逃跑，是因为你们这些新客人吧？";
		next;
		mes "[美味]";
		mes "你和入侵者是什么关系？我们是天敌吗？金字塔上方是哪条路？入侵者逃跑了，所以这是你的错？";
		next;
		select( "事情不是那样的。" );
		mes "[美味]";
		mes "哦真的吗？我不知道，因为我已经很久没有见到人类了。";
		mes "那为什么我没认出客人呢？所有新客人都会分享给我们。";
		next;
		select( "中继器坏了，所以..." );
		mes "[美味]";
		mes "哦，难怪！网络突然停止工作。中继器不工作！那Alpha怎么还不来呢？";
		next;
		select( "阿尔法现在很忙。" );
		mes "[美味]";
		mes "Alpha 太忙没来吗？决不。哦，你是自愿帮助我的吗？多么不寻常的客人啊。想想看，之前也有过一个^0000CD这样的客户^000000。";
		next;
		mes "[美味]";
		mes "对不起。";
		mes "参观宅邸的客人对宅邸和我们的自动人偶表现出了兴趣，但没有任何客人在宅邸周围帮助我们。";
		next;
		mes "[美味]";
		mes "不管怎样，如果我们有很多客人，他们很快就会来吃饭的。我得做好准备。已经很久没有接待客人了。";
		next;
		mes "[美味]";
		mes "我的餐厅已经很久没有客人了。我做饭的时候没有顾客。入侵者……当他们到达这里时。我的眼睛变了，我把它们拿走了。他们不是客人。";
		next;
		mes "[美味]";
		mes "入侵者并没有持续多久，但他们却在这短暂的瞬间让这座宅邸陷入了混乱。他们拿走了宅邸里的机器，自动门，所有对他们来说有用的东西都被移走了。";
		next;
		mes "[美味]";
		mes "那边的中继器一定有一个^0000CD通信芯片也坏了^000000？";
		next;
		mes "[美味]";
		mes "该死的人类。现在他们中的大多数人似乎已经逃跑了，但仍然有一些人留下来。我在这里见过他们几次。他们在追求食物。";
		next;
		mes "[美味]";
		mes "再次抱歉。";
		mes "现在一看，我不知道为什么会误认为你是入侵者。你不一样。";
		next;
		mes "[美味]";
		mes "无论如何，我必须修好中继器。让我看看...";
		next;
		mes "[美味]";
		mes "呃……通讯芯片被扯掉了！我得把它放进去。我们现在应该去哪里拿它？我要招呼客人吗？";
		next;
		cloakoffnpcself( "Strange Automatic Doll#172nw01" );
		npctalk "让我们把它们全部烧掉吧！！！呵呵呵呵！", "奇怪的自动娃娃#172nw01", bc_self;
		specialeffect EF_FIREWALL, AREA, "Strange Automatic Doll#172nw01";
		sleep2 1100;
		mes "[美味]";
		mes "呃——那边还有一个坏了。";
		next;
		mes "[美味]";
		mes "......";
		mes "...... 等待？";
		next;
		mes "[美味]";
		mes "" + strcharinfo(0) + "。你能抓住吗？你能做到吗？";
		next;
		select( "自动人偶坏了？" );
		mes "[美味]";
		mes "呃。所有通讯芯片都是标准的，所以如果更换新的。我认为它会恢复正常。";
		next;
		select( "呃..." );
		mes "[美味]";
		mes "你为什么看起来那样？是因为你不愿意在一个自动人偶面前伤害另一个人偶吗？不用担心这个。";
		next;
		mes "[美味]";
		mes "无论如何我们都需要修复它，但我们需要先捕获它。";
		mes "你可以认为这是为我们自动娃娃省去了麻烦。";
		next;
		mes "[美味]";
		mes "如果你不管它，它会在宅邸周围徘徊并摧毁它，所以你必须尽快处理它。";
		mes "最好捕获它，然后取出芯片并用它来修复中继器。";
		next;
		mes "[美味]";
		mes "自从入侵者出现以来，每个人都在这样做。即使" + strcharinfo(0) + "不做，全靠我们自动娃娃了。";
		mes "做一点工作真好。";
		next;
		ep17_2_main = 11;
		erasequest 17334;
		setquest 17335;
		mes "[美味]";
		mes "请照顾好已损坏的 Beta，并携带^0000CD1 个自动人偶通讯芯片^000000。";
		npctalk "花园！我们去花园吧！！", "奇怪的自动娃娃#172nw01", bc_self;
		sleep2 300;
		cloakonnpcself( "Strange Automatic Doll#172nw01" );
		npctalk "哦，它跑了！只要再抓起一个破损的，然后把它带给我就可以了。", "", bc_self;
		close;
	}
	if (ep17_2_main == 11) {
		mes "[美味]";
		mes "通讯芯片呢？";
		next;
		if (countitem(1000232) < 1) {
			mes "[美味]";
			mes "你还没有吗？你不愿意伤害自动娃娃吗？别担心。无论如何我稍后都会做。";
			next;
			mes "[美味]";
			mes "坏了的自动人偶我来处理，带上^0000CD1个自动人偶通讯芯片^000000就可以了。";
			close;
		}
		mes "[美味]";
		mes "你带来了吗？把它给我。我会解决它。非常感谢你带来它。";
		next;
		mes "[美味]";
		mes "顺便问一下，这是唯一坏掉的中继器吗？";
		next;
		select( "亭子和花园......" );
		mes "[美味]";
		mes "哦真的吗？然后先前往<NAVI>[展馆]<INFO>ba_maison,334,143,0,0,0</INFO></NAVI>。这是这里最近的一个。沿着这条路走到这里就可以了。";
		next;
		mes "[美味]";
		mes "不要不小心触摸损坏的中继器。告诉附近的自动人偶，他们会处理的。";
		next;
		mes "[美味]";
		mes "你有 Barmeal 票吗？去餐厅吃饭是用的。我给你这个，你一会儿过来吃吧！我给你准备好吃的！作为感谢！";
		delitem 1000232,countitem(1000232);
		ep17_2_main = 12;
		erasequest 17335;
		setquest 17336;
		getitem 1000103,5;
		getexp 300000,0;	// note: ~exp. getbaseexp_ratio?
		close2;
		navigateto("ba_maison",334,143);
		end;
	}
	if (ep17_2_main == 12) {
		mes "[美味]";
		mes "首先前往<NAVI>[展馆]<INFO>ba_maison,334,143,0,0,0</INFO></NAVI>。这是这里最近的一个。沿着这条路走到这里就可以了。";
		next;
		mes "[美味]";
		mes "不要不小心触摸损坏的中继器。告诉附近的自动人偶，他们会处理的。";
		close;
	}
	mes "[美味]";
	mes "今天我应该做什么……我应该怎么做才能让它好吃？";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17334) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17335) == 1 && countitem(1000232) > 0" );
	end;
}

ba_maison,148,107,3	duplicate(dummy_cloaked_npc)	Strange Automatic Doll#172nw01	4_EP17_BASIC_B_NG

ba_maison,334,143,3	script	Repeater#172nw02	2_POSTBOX,{
	if (checkweight(1000103,5) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep17_2_main == 12) {
		mes "[" + strcharinfo(0) + "]";
		mes "这里没有人吗...？我该怎么办？难道自动人偶通讯芯片又坏了……？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "如果我打开这个怎么办...？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "啊啊！！！我的手！！";
		specialeffect2 EF_THUNDERSTORM2;
		specialeffect2 EF_STASIS;
		next;
		cloakoffnpcself( "Worry#172nw01" );
		sleep2 1000;
		specialeffect EF_FIREHIT;
		sleep2 1000;
		specialeffect EF_FIREHIT;
		mes "[担心]";
		mes "这...！真是一团糟！又来了！它想要战斗。";
		npctalk "这...！真是一团糟！又来了！它想要战斗。", "担心#172nw01", bc_self;
		next;
		mes "[担心]";
		mes "立即滚出我的脑海！";
		next;
		select( "在那边..." );
		mes "[担心]";
		mes "你想控制我吗？";
		npctalk "事情不是这样的。", "担心#172nw01", bc_self;
		next;
		mes "[担心]";
		mes "这个小东西！我会把它处理掉的！";
		npctalk "照这样下去，我们都会遭殃的！", "担心#172nw01", bc_self;
		specialeffect EF_FIREHIT;
		next;
		mes "[担心]";
		mes "你想霸占我吗？？试试吧！";
		specialeffect EF_FIREHIT;
		next;
		select( "我应该怎么办？我应该走吗？" );
		cloakoffnpcself( "Kimchi#172nw01" );
		mes "[泡菜]";
		mes "唷-给你。你为何不断逃避？冷静一下。";
		npctalk "好的。", "担心#172nw01", bc_self;
		next;
		mes "[泡菜]";
		mes "无论如何，谁……？入侵者？ ……不是吗？";
		next;
		mes "[泡菜]";
		mes "哦，你是客人，不是吗？亭前来往者，亦是宾客。";
		next;
		mes "[泡菜]";
		mes "但这很奇怪。如果你是客人，我立刻就能认出你。";
		mes "您不是未登记的客人，您是这里的常客。";
		next;
		select( "由于中继器的原因，他们无法共享它。" );
		mes "[泡菜]";
		mes "哦，原来是因为这个啊！每次我发现东西坏了，我都会修理它，但正如你所看到的，即使我把眼睛移开一会儿，瓦里也会出来把它弄碎。";
		next;
		mes "[泡菜]";
		mes "哦，我们的鹰咬你了吗？自从他被^0000CD入侵者^000000袭击以来，这种情况就一直在发生。我之前已经修好了，但是 Wary 总是出来做这个......";
		next;
		mes "[泡菜]";
		mes "变成这样的娃娃还有很多。";
		mes "如果你修复它们，它们就会恢复正常，但是娃娃太多了，我们很难修复所有它们。";
		next;
		mes "[泡菜]";
		mes "我听到老鹰在宅邸周围徘徊并毁掉了它。";
		next;
		mes "[泡菜]";
		mes "很抱歉在您休息时打扰您。请尽情享受瓦蒙特宅邸的这一区域。";
		next;
		mes "[担心]";
		mes "这件事怎么可以这么热闹。";
		npctalk "你最好开始说话！", "担心#172nw01", bc_self;
		specialeffect EF_FIREHIT;
		next;
		mes "[担心]";
		mes "你，你到底要不要离开我的脑海？如果你不肯的话我就出去了！";
		next;
		mes "[泡菜]";
		mes "嘿，嘿。为什么要打开中继器？";
		specialeffect EF_FIREHIT, AREA, "Worry#172nw01";
		next;
		select( "哦，你需要尽快修复它。" );
		mes "[担心]";
		mes "你到底是什么？你是在可怜我吗？";
		npctalk "你是其中之一吗？", "担心#172nw01", bc_self;
		next;
		mes "[泡菜]";
		mes "嘿，这个人不是入侵者。这是我们的客人。让他们在府邸里尽情享受吧。";
		next;
		mes "[泡菜]";
		mes "我会尽快修好中继器。沃里肯定会出来摧毁它，但别担心我们可以再次修复它。";
		next;
		mes "[泡菜]";
		mes "谢谢你亲自让我知道。在这里，至少，拿着这个。还有其他地方不起作用吗？我不认为只有一两个地方。";
		emotion ET_OHNO, getnpcid(0,"Kimchi#172nw01");
		next;
		select( "宅邸前的花园。" );
		mes "[泡菜]";
		mes "哦，它在那里也不起作用。";
		mes "从这条路向上走，左转即可到达<NAVI>[中央花园]<INFO>ba_maison,245,206,0,0,0</INFO></NAVI>。";
		next;
		mes "[泡菜]";
		mes "来吧，沃里。我们回去吧。";
		npctalk "是的！", "担心#172nw01", bc_self;
		sleep2 1000;
		cloakonnpcself( "Worry#172nw01" );
		cloakonnpcself( "Kimchi#172nw01" );
		ep17_2_main = 13;
		erasequest 17336;
		setquest 17337;
		getitem 1000103,5;
		getexp 300000,0;	// note: ~exp. getbaseexp_ratio?
		close;
	}
	if (ep17_2_main == 13) {
		mes "[" + strcharinfo(0) + "]";
		mes "娃娃告诉我从这条路上去，左转去<NAVI>[中央花园]<INFO>ba_maison,245,206,0,0,0</INFO></NAVI>。";
		close;
	}
	npctalk "正常运行时。信号强度高。", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17336) == 1" );
	end;
}

ba_maison,333,144,5	duplicate(dummy_cloaked_npc)	Worry#172nw01	4_EP17_SCISSORE
ba_maison,331,145,5	duplicate(dummy_cloaked_npc)	Kimchi#172nw01	4_EP17_TABLET

ba_maison,245,206,5	script	Gabriel#172nw01	4_EP17_GUARD_B,5,5,{
	if (ep17_2_main < 10) {
		npctalk "只有授权人员才可以进入该区域。", "", bc_self;
		end;
	}
	if (ep17_2_main == 14) {
		mes "[加百列]";
		mes "如果这是最后一次，请向 <NAVI>[Alpha]<INFO>ba_maison,74,150,0,0,0</INFO></NAVI> 报告。";
		close;
	}
	mes "[加百列]";
	mes "我可以帮你吗？";
	mes "该场所仅允许授权人员进入。";
	mes "请返回入口处。";
	close;

OnTouch:
	if (checkweight(1000103,5) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main < 10) {
		npctalk "只有授权人员才可以进入该区域。", "", bc_self;
		end;
	}
	if (ep17_2_main < 13) {
		mes "[加百列]";
		mes "你好，冒险家。";
		close;
	}
	if (ep17_2_main == 13) {
		mes "[加百列]";
		mes "别再靠近了。";
		mes "该场所仅允许授权人员进入。";
		next;
		select( "哦，我是..." );
		mes "[加百列]";
		mes "我对此并不担心。我不需要了解你的任何事情。这个地方受到限制。把手举起来，不要靠得太近。";
		next;
		mes "[加百列]";
		mes "别想使用武器，我比你快得多。你从哪里来？";
		next;
		select( "下水道，但我..." );
		mes "[加百列]";
		mes "原来你是从下水道里出来的啊。然后站着别动，直到我把你交给保安。";
		next;
		sleep2 1500;
		npctalk "打电话。 4 区。4 区。", "", bc_self;
		sleep2 2000;
		npctalk "保安办公室：这里是 4 区，结束了。", "", bc_self;
		sleep2 2000;
		npctalk "我需要支持。 7 区有入侵者，结束。", "", bc_self;
		sleep2 2000;
		npctalk "保卫处：目前，所有入侵者均已被击退。不再需要巡逻了，结束了。", "", bc_self;
		sleep2 2000;
		npctalk "当我面前有一个人时，你在说什么？ 4区！ 4区??", "", bc_self;
		sleep2 2000;
		npctalk "保卫处：...", "", bc_self;
		select( "我是豪宅的客人。" );
		mes "[加百列]";
		mes "客人？如果你是其中之一，我就会知道。";
		unittalk getcharid(3), "" + strcharinfo(0) + " : I'm saying the truth...";
		next;
		mes "[加百列]";
		mes "我会检查一下。不要离开你的位置。";
		progressbar_npc "00FF00",2;
		next;
		mes "[加百列]";
		mes "哦，你是真正的客人，不是吗？您是一位特殊的客人，有权访问所有区域...对于我的错误，我深表歉意。请原谅。";
		next;
		select( "我简直不敢相信。你突然袭击了我。" );
		mes "[加百列]";
		mes "攻击？我攻击了吗？我只是按照入侵者响应手册进行响应。 Oh, did you felt like you were attacked?";
		next;
		select( "不..." );
		mes "[加百列]";
		mes "我再次为我的错误道歉。";
		mes "Recently, we guards are more suspicious and sharper because of the intruders.而且，其中还有一名身份低调的男子出现，并进行了强烈的反抗。";
		next;
		mes "[加百列]";
		mes "顺便问一下，你是如何获得访问所有区域的许可的？一般情况下，普通客人只能使用非限制区域。";
		next;
		mes "[加百列]";
		mes "如果您是一位如此尊贵的客人，我应该早点收到您的信息。";
		next;
		select( "这是因为中继器。" );
		mes "[加百列]";
		mes "复读机？这里的中继器工作正常...";
		next;
		mes "[加百列]";
		mes "等等，这不是信号问题，突然有一个^0000CD黑客通道^000000干扰了它......对吧？";
		next;
		select( "黑客攻击？" );
		mes "[加百列]";
		mes "知道豪宅里的自动娃娃是通过中继器发送和接收信号的。有时，人们^0000CD破解中继器^000000来尝试控制自动娃娃或跟踪宅邸内发生的事情。";
		next;
		mes "[加百列]";
		mes "宅邸内仍有入侵者。";
		mes "我必须彻底寻找。";
		next;
		mes "[加百列]";
		mes "此前，入侵者收到警报是因为有一位客人在宅邸周围徘徊，以为宅邸内没有这样的客人。";
		next;
		mes "[加百列]";
		mes "但这并不能改变他们是入侵者的事实。与之前的客人只是好奇不同，他们潜入了宅邸，在宅邸内实施了各种暴力行为。你不觉得他们像小偷吗？";
		next;
		mes "[加百列]";
		mes "" + strcharinfo(0) + "，如果不想被宅邸内的其他自动人偶误会，尤其是在禁区附近，就应该提前表明身份。";
		next;
		select( "这是最后一次。" );
		mes "[加百列]";
		mes "是这样吗？那我就得快点了，复读机，请原谅。";
		mes "另外，虽然不多，但请接受这个道歉。";
		next;
		mes "[加百列]";
		mes "如果这是最后一次，请向 <NAVI>[Alpha]<INFO>ba_maison,74,150,0,0,0</INFO></NAVI> 报告。另外...欢迎来到瓦蒙特宅邸。如果您需要帮助，请随时询问任何自动娃娃。";
		ep17_2_main = 14;
		erasequest 17337;
		setquest 17338;
		getitem 1000103,5;
		getexp 300000,0;	// note: ~exp. getbaseexp_ratio?
		close;
	}
	if (ep17_2_main == 14) {
		mes "[加百列]";
		mes "如果这是最后一次，请向 <NAVI>[Alpha]<INFO>ba_maison,74,150,0,0,0</INFO></NAVI> 报告。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17337) == 1" );
	end;
}

ba_in01,221,116,0	script	#jh5_1hw	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep17_2_main == 17 && (isbegin_quest(16442) == 1 || isbegin_quest(16443) == 1 || isbegin_quest(16444) == 1 || isbegin_quest(16445) == 1 || isbegin_quest(16453) == 1))
		cloakonnpcself( "Kaya Toss#jh5_1" );
	if (ep17_2_main >= 20 && ep17_2_main < 24)
		cloakonnpcself( "Kaya Toss#jh5_1" );
	if (ep17_2_main >= 24)
		cloakoffnpcself( "Tatio#jh5_1" );
	if (ep17_2_main == 25)
		cloakonnpcself( "Rookie#jh5" );
	end;
}

ba_in01,206,106,3	script	Philofontes#jh5_1	4_M_PHILOFONTES,{
	if (ep17_2_main < 15) {
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "你能先去见阿尔法，然后再回到茶馆吗？";
		mes "看来您在这里要做的第一件事就是注册为访客。";
		mes "- 之前的任务仍然存在。 -";
		close3;
	}
	if (ep17_2_main == 15) {
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "迪恩，请再确认一下真伪。";
		mes "这是雇佣兵们在瓦蒙特宅邸逗留时政府检查过的文件。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "嗯……即使多次尝试检查真伪。";
		mes "我不确定我们的合作会进行到什么程度。";
		next;
		mes "[发球]";
		mes "我有点厌倦了一遍又一遍地说同样的话。";
		next;
		cutin "",255;
		mes "（心情看起来不太好，暂时观察一下。）";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "如果你看一下，你就会理解这个证据。";
		mes "这证明政府曾试图与雇佣军对话，但他们没有回应。";
		next;
		cutin "ep162_rds01",2;
		mes "[里德什]";
		mes "这种谈话从来没有发生过！政府里没有一个人来说话，你知道吗？";
		mes "我已经说了不，你还要像鹦鹉学舌一样让我查明真相到什么时候？";
		next;
		cutin "ep162_rds02",2;
		mes "[里德什]";
		mes "当你给我们带来新文件时也是如此，你在撒谎！";
		mes "你已经骗我们好几次了！";
		next;
		cutin "ep16_tes03",2;
		mes "[苔丝]";
		mes "为什么你会认为我们会故意使用虚假文件……！";
		mes "啊，" + strcharinfo(0) + "，你什么时候来这里的？我已经向你展示了我可耻的一面。";
		next;
		mes "[苔丝]";
		mes "我正在与叛乱<NAVI>[长老]<INFO>ba_in01,203,103,0,0,0</INFO></NAVI>交谈，但很难验证过去发生的事件......";
		ep17_2_main = 16;
		erasequest 17381;
		setquest 16440;
		close3;
	}
	if (ep17_2_main == 16) {
		cutin "ep16_tes03",2;
		mes "[苔丝]";
		mes "我正在与叛军<NAVI>[长老]<INFO>ba_in01,203,103,0,0,0</INFO></NAVI>交谈，但他们很顽固，也许是因为他们已经是前辈了。";
		next;
		cutin "ep162_rds02",2;
		mes "[里德什]";
		mes "嘿！你说谁是前辈？";
		close3;
	}
	if (ep17_2_main == 17) {
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "冒险家，请前往宅邸的管理者那里，了解一下佣兵们在瓦蒙特宅邸停留期间发生了什么事情。";
		close3;
	}
	if (ep17_2_main == 18) {
		npctalk "苔丝：请注意里德什。", "", bc_self;
		end;
	}
	if (ep17_2_main == 19) {
		npctalk "苔丝：我认为卡亚托斯有话要说。", "", bc_self;
		end;
	}
	if (ep17_2_main < 25) {
		npctalk "苔丝：我们所有人都在公司的掌控之中。", "", bc_self;
		end;
	}
	npctalk "苔丝：谢谢你的帮助，冒险家。", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17381) == 1" );
	end;
}

ba_in01,203,103,5	script	Dien#jh5_1	4_F_DIENE,{
	if (ep17_2_main < 16) {
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "如果您正在寻找高品质的茶叶，这座豪宅就是您要找的地方。";
		mes "我在Einbech喝的茶还不错，但是和这里的茶没法比。";
		close3;
	}
	if (ep17_2_main == 16) {
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "嗯...嘿，政府的先生。 Why do you keep asking for evidence when you don't believe what we're saying?";
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "让我们带一份假文件给雇佣兵，并要求他们证明每一个错误。对此我们无话可说。";
		next;
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "这是浪费时间。";
		mes "我宁愿另辟蹊径，也不愿浪费时间做一些自相矛盾的事情。";
		next;
		cutin "ep16_tes02",2;
		mes "[苔丝]";
		mes "……除了检查记录、写报告之外，还能有什么办法呢？";
		mes "你是说不能无条件相信政府的报告吗？";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "等一下，你能听我说吗？";
		next;
		mes "[新秀]";
		mes "问题是，这难道不是记录本身的可信度吗？";
		mes "无论我们如何使用意见不一的记录，我们都无法达成一致。";
		next;
		cutin "ep16_tes02",2;
		mes "[苔丝]";
		mes "……结果，就发生了这样的事情。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "因此，与其依赖政府记录，我们为什么不调查这里真正发生的事件呢？";
		next;
		mes "[新秀]";
		mes "这里是佣兵战争的基地，如果你亲眼去探查的话，说不定会看到一些你从未见过的东西。";
		next;
		cutin "",255;
		select( "这是个好主意。" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "那么，谁能准确而生动地记得这里发生的事情呢？";
		next;
		cutin "",255;
		if (select( "豪宅经理。", "清洁机器人。" ) == 2) {
			cutin "16loo_03",2;
			mes "[新秀]";
			mes "冒险家，清洁机器人只会回应人们的呼声。";
			mes "啊，是的。豪宅的管理者们一定会记住的！";
			next;
		}
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "是的，瓦蒙特宅邸经理们！它不是人类，但它可能是一个更中立的数据源。";
		next;
		cutin "ep162_rds02",2;
		mes "[里德什]";
		mes "幸运的是，你为什么不听我们的意见并站在政府一边呢？";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "这是一个合理的方式。但谁来见证呢？";
		mes "如果我说我会，你不会相信我。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "如果政府要求我相信他们迄今为止一直在编造的谎言，那么我就不能与你合作。";
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "你怎么知道政府是否真的试图与雇佣兵交谈，你又怎么知道雇佣兵拒绝了。你只是给我们带来了我们都不知道的证据。";
		next;
		cutin "ep16_tes03",2;
		mes "[苔丝]";
		mes "长老们根本就不会出去查探……，";
		mes "冒险者，长老们只会相信你。";
		next;
		cutin "",255;
		select( "我会得到他们的许可。" );
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "我可以相信冒险者到目前为止所做的一切。";
		mes "冒险者，你愿意听我们管理者的话吗？";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "冒险者的存在对于双方来说都是非常重要的，在这个敌军混战的地方，其价值是无价的。";
		next;
		cutin "ep16_tes03",2;
		mes "[苔丝]";
		mes "冒险家，请前往宅邸的管理者那里，了解一下佣兵们在瓦蒙特宅邸停留期间发生了什么事情。";
		next;
		if (select( "接受。", "拒绝。" ) == 2) {
			cutin "ep16_tes02",2;
			mes "[苔丝]";
			mes "你很忙还是只是时间不好？";
			mes "你不喜欢我让你做的事吗？";
			mes "我不能强迫你这么做。";
			close3;
		}
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "谢谢你，冒险家。看来你又得做那些麻烦的工作了。";
		mes "我期待中立方给出真相。";
		close2;
		cutin "",255;
		ep17_2_main = 17;
		erasequest 16440;
		setquest 16441;
		setquest 16442;
		setquest 16443;
		setquest 16444;
		setquest 16445;
		end;
	}
	if (ep17_2_main == 17) {
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "谢谢你，冒险家。看来你又得做那些麻烦的工作了。";
		mes "我期待中立方给出真相。";
		close3;
	}
	if (ep17_2_main == 18) {
		npctalk "Dien：你介意听听 Ridsh 的故事吗？", "", bc_self;
		end;
	}
	if (ep17_2_main == 19) {
		npctalk "Dien：让我们听听公司怎么说。", "", bc_self;
		end;
	}
	if (ep17_2_main < 25) {
		npctalk "Dien：我现在没什么可说的，请原谅。", "", bc_self;
		end;
	}
	npctalk "Dien：茶的香味很好闻。你想喝点什么吗？", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16440) == 1" );
	end;
}

ba_in01,202,108,5	script	Rookie#jh5	4_M_ROOKIE,{
	if (ep17_2_main < 17) {
		npctalk "Rookie：嗯，我们取得了很大的进步。这一切都多亏了冒险家你的帮助。", "", bc_self;
		end;
	}
	if (ep17_2_main == 17) {
		if (isbegin_quest(16442) == 1 || isbegin_quest(16443) == 1 || isbegin_quest(16444) == 1 || isbegin_quest(16445) == 1 || isbegin_quest(16453) == 1) {
			cutin "16loo_01",2;
			mes "[新秀]";
			mes "管理者们知道雇佣军战争的真相。";
			mes "她们都是自动娃娃，记忆力鲜明，不会说谎。";
			next;
			mes "[新秀]";
			mes "请听听当年的故事吧，冒险者。";
			close3;
		}
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "经理们的意见你听够了吗？";
		mes "现在，请告诉我们您所听到的事实。";
		next;
		cutin "",255;
		select( "讲述神秘尸体的故事。" );
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "突然有一具尸体，什么意思？";
		emotion ET_SWEAT;
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "据说，发现的尸体不是雇佣兵、公馆职员、企业人员……你有具体消息吗？";
		next;
		cutin "",255;
		select( "交出具体数据。" );
		cutin "ep162_rds03",2;
		mes "[里德什]";
		mes "这个人看上去根本不像雇佣兵。为什么这样的人会在瓦蒙特宅邸附近被杀？";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "等等...也给我看看数据。";
		next;
		mes "[苔丝]";
		mes "..................";
		mes "..................";
		emotion ET_SURPRISE, getnpcid(0,"Philofontes#jh5_1");
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "这个数据有什么让你困扰的吗？";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "我们知道这个人是谁。";
		mes "此人是政府派去雇佣军进行谈判的专员之一。";
		next;
		mes "[苔丝]";
		mes "据说，特派员被派去后就没有回来，后来推测特派员失踪了。";
		mes "但是，后来被发现死在瓦蒙特宅邸中。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "所以，你是说……一个去见雇佣兵的政府官员，还没见到雇佣兵就被杀了……";
		next;
		mes "[新秀]";
		mes "这、谁干了这种事。";
		next;
		cutin "",255;
		switch( select( "企业。", "政府。", "雇佣兵。" ) ) {
		case 1:
			cutin "16loo_03",2;
			mes "[新秀]";
			mes "……没有证据，冒险者。";
			mes "你的话让我心痛。";
			emotion ET_SWEAT;
			next;
			mes "[新秀]";
			mes "我们应该更仔细地谈谈。";
			break;
		case 2:
			cutin "ep16_tes02",2;
			mes "[苔丝]";
			mes "政府的人为什么要杀掉他们派来的人？";
			emotion ET_QUESTION, getnpcid(0,"Philofontes#jh5_1");
			next;
			cutin "ep16_tes03",2;
			mes "[苔丝]";
			mes "就算是政府反对，想要杀人也很难逃过瓦蒙宅邸内的雇佣兵和工作人员的眼睛。";
			break;
		case 3:
			cutin "ep162_dn03",2;
			mes "[发球]";
			mes "不，佣兵们根本不知道这是政府的人。就连尸体也被发现得很晚。";
			emotion ET_SURPRISE, getnpcid(0,"Dien#jh5_1");
			next;
			mes "[发球]";
			mes "不是雇佣兵。";
			break;
		}
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "想要避开瓦蒙特宅邸里的佣兵和工作人员的目光是很难的。";
		mes "但是，罪魁祸首并不是雇佣兵。";
		next;
		cutin "",255;
		emotion ET_SURPRISE, getnpcid(0,"Dien#jh5_1");
		select( "应该是雇佣兵吧" );
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "你是说我们在撒谎吗？即使听了经理的话？！";
		next;
		cutin "",255;
		select( "雇佣兵中肯定有叛徒。" );
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "我确信有足够的证据让你这么说。";
		mes "现在，向我们展示证据。";
		next;
		cutin "",255;
		if (select( "H的可疑行为。", "与企业内部沟通的证据。" ) == 1) {
			cutin "16loo_01",2;
			mes "[新秀]";
			mes "……但是没有证据。";
			mes "现在，我们不能依赖怀疑。我们需要证据，冒险家。";
			close3;
		}
		cutin "ep171_kaya03",2;
		mes "[所以扔]";
		mes "那是……不，这是一个盖有公司印章的信封。已经皱得很厉害了你从哪里得到这个信封？这是严禁泄露到雷肯贝尔之外的物品。";
		emotion ET_SURPRISE, getnpcid(0,"Kaya Toss#jh5_1");
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "查看信封的内容。这才是重要的。";
		mes "距离上次阅读已有很长时间了，但我可以完美地阅读它，就像它是一本命令书一样。";
		emotion ET_SURPRISE, getnpcid(0,"Dien#jh5_1");
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "我已经让人“处置”了政府人员，以防止与雇佣兵接触……我还告诉他闯入瓦蒙特宅邸并窃取瓦蒙特的研究数据……";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "它由收件人签名，“H.卢肯贝格";
		mes "这是你所说的叛徒身份的证明。";
		next;
		cutin "ep171_kaya02",2;
		mes "[所以扔]";
		mes "..........";
		emotion ET_THINK, getnpcid(0,"Kaya Toss#jh5_1");
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "公司代表，你看起来不太好。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "……我需要一些时间，我有件事想确认一下。";
		mes "我会联系我的秘书，请继续，我不在。";
		emotion ET_THINK, getnpcid(0,"Kaya Toss#jh5_1");
		cloakonnpcself( "Kaya Toss#jh5_1" );
		close2;
		cutin "",255;
		ep17_2_main = 18;
		erasequest 16441;
		setquest 16446;
		end;
	}
	if (ep17_2_main == 18) {
		npctalk "Rookie：让我们听听 Ridsh 的声音。", "", bc_self;
		end;
	}
	if (ep17_2_main == 19) {
		npctalk "Rookie：我们来听听企业代表的发言。", "", bc_self;
		end;
	}
	if (ep17_2_main == 20) {
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "冒险家，嘿嘿。卡亚先生非常沮丧。你介意看看卡亚先生吗？";
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "这种时候，总会有不好的事情发生……";
		mes "如果能看看<NAVI>[花园]<INFO>ba_maison,103,92,0,101,0</INFO></NAVI>我就放心了。";
		close2;
		cutin "",255;
		ep17_2_main = 21;
		erasequest 16448;
		setquest 16449;
		end;
	}
	if (ep17_2_main < 25) {
		npctalk "Rookie：嗯，在这一点上，我宁愿不说话，对吧？", "", bc_self;
		end;
	}
	npctalk "Rookie：嗯，我们取得了很大的进步。这一切都多亏了冒险家你的帮助。", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main == 17 && isbegin_quest(16442) == 0 && isbegin_quest(16443) == 0 && isbegin_quest(16444) == 0 && isbegin_quest(16445) == 0 && isbegin_quest(16453) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16448) == 1" );
	end;
}

ba_in01,208,110,3	script	Ridsh#jh5_1	4_F_LEEDSH,{
	if (ep17_2_main == 17) {
		cutin "ep162_rds02",2;
		mes "[里德什]";
		mes "我希望你没有认为我们被困住了。";
		close3;
	}
	if (ep17_2_main == 18) {
		cutin "ep162_rds01",2;
		mes "[里德什]";
		mes "这名雇佣兵还有什么可疑之处吗？";
		next;
		cutin "",255;
		select( "讲述各种可疑活动。" );
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "从佣兵的角度来看，他很可疑。";
		mes "不过，似乎只有少数人知道，而且彼此都相信，所以整个事情并没有被透露出来。";
		next;
		cutin "ep162_rds01",2;
		mes "[里德什]";
		mes "这完全是雇佣兵的错误。";
		mes "如果我有疑问并进一步探究的话，我就会知道。";
		emotion ET_SWEAT;
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "如果我们了解更多关于“H.那时的卢肯伯格……";
		mes "雇佣兵战争的结局或许会有所不同。";
		next;
		cutin "ep16_tes02",2;
		mes "[苔丝]";
		mes "我很高兴知道真相。";
		mes "政府提供了援助，但被公司阻止了……";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "我很抱歉没有听你的恳求。";
		mes "你没有提供虚假证据。你只是不知道真相。";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "我还想道歉，因为我不相信你的说法并强迫我们提供证据。";
		next;
		cloakoffnpcself( "Kaya Toss#jh5_1" );
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "..........";
		mes "我很抱歉突然离开。";
		next;
		mes "[所以扔]";
		mes "我的脑海里浮现出一些东西，我检查了一下。";
		mes "我想告诉你一些我自己发现的事情。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "它是什么？";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "在公司的员工名录上……有一个人与 H. Luckenberg 在那段时间的活动完全匹配。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "我懂了。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "他被记录为雇佣兵战争期间长途出差归来的员工。";
		mes "但他去过的地方却没有记载。";
		next;
		mes "[所以扔]";
		mes "我的秘书格雷翻阅了一份不完整的记录，在剩余的工作日志备忘录中发现了这张便条。";
		mes "“尽快（擦除备忘录的痕迹）引导他们到达豪宅”";
		next;
		mes "[所以扔]";
		mes "备忘录的主题写得比较模糊，但是可以清楚地理解。";
		mes "那个，他在瓦蒙特宅邸里……";
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "这就是发生的事情。";
		mes "政府和雇佣兵又被公司玩弄了。";
		next;
		cutin "ep171_kaya02",2;
		mes "[所以扔]";
		mes "这是一个耻辱...";
		close2;
		cutin "",255;
		ep17_2_main = 19;
		erasequest 16446;
		setquest 16447;
		end;
	}
	if (ep17_2_main == 19) {
		npctalk "Ridsh：公司的人想说点什么。", "", bc_self;
		end;
	}
	if (ep17_2_main < 25) {
		npctalk "Ridsh：我现在没什么可说的。", "", bc_self;
		end;
	}
	npctalk "里德什：你想喝点茶吗？如果你想的话这里有小吃。", "", bc_self;
	end;


OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16446) == 1" );
	end;
}

ba_in01,207,102,3	script	Kaya Toss#jh5_1	4_EP17_KAYA,{
	if (ep17_2_main == 16) {
		npctalk "卡亚托斯：请听长辈的话。", "", bc_self;
		end;
	}
	if (ep17_2_main == 19) {
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "所有上下文和物质证据都指向公司。";
		mes "这确实是一种耻辱。";
		next;
		cutin "ep171_kaya02",2;
		mes "[所以扔]";
		mes "对不起。";
		mes "作为副总统，我感到自己对这一切负有责任。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "嗯...公司代表先生，此时您感到有责任感有什么区别？";
		mes "如果你道歉了，死人就能复活吗？";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "我将对一切负全部责任，从不忘记过去开始。";
		next;
		cutin "ep162_rds03",2;
		mes "[里德什]";
		mes "过去？不，这是关于现在正在发生的事情。那些叛乱的孩子和那些在科尔仍然生病的孩子现在正在发生。";
		mes "你过去所说的一切一直延续到今天。";
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "现在要做什么？你可以随意道歉。但很难改变人们的想法。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "我们现在就别谈这个了。如果你继续重复“承担责任”的话，甚至不说你打算做什么，我就不想再和你说话了。";
		next;
		cutin "ep171_kaya03",2;
		mes "[所以扔]";
		mes "不过，前辈……";
		next;
		cutin "ep162_ctn01",2;
		mes "[科特尼斯]";
		mes "当你这样骄傲地说话时，最好不要做出可怜的事。";
		mes "呵呵，那我也走了。";
		close2;
		cutin "",255;
		ep17_2_main = 20;
		erasequest 16447;
		setquest 16448;
		npctalk "Kaya Toss：我整理一下思路再回来。", "", bc_self;
		cloakonnpcself( "Kaya Toss#jh5_1" );
		end;
	}
	cutin "ep171_kaya01",2;
	mes "[所以扔]";
	mes "最近，我想了很多事情。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16447) == 1" );
	end;
}

ba_in01,205,109,3	script(CLOAKED)	Tatio#jh5_1	4_M_TATIO,{
	if (checkweight(1000103,15) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep17_2_main == 24) {
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "散步后我们迎来了一位新访客。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "不，塔蒂奥！我已经通过格雷给你打了电话，没想到你这么快就到了！";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "从我从格雷那里听到的情况来看，这似乎是一件紧急的事情。";
		mes "我决定最好尽快亲自拜访。";
		next;
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "对您来说，向我们展示您要做什么非常重要。";
		mes "这是很好的第一步。";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "如您所知，雷肯伯已经向前迈出了一步。";
		mes "你们国家对传送魔法的使用限制不是已经解除了吗？";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "是的，公司也有这样的考虑。";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "除此之外，我想做一个企业必须做的事情。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "我已经告诉过你了，但现在不是做出模糊承诺的好时机。";
		mes "我很好奇你能做什么具体的事情。";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "我一接到副总统卡亚·托斯的联系就离开了，然后才到达。";
		mes "我知道你想听什么，但我不能简单地决定这里的一切。";
		next;
		mes "[塔蒂奥]";
		mes "然而，我将告诉你我以我的权威所​​能做出的所有承诺。";
		next;
		mes "[塔蒂奥]";
		mes "托斯副会长，我看到了你与政府特工和冒险家合作的报道。";
		mes "感谢您的辛勤工作。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "谢谢你，塔蒂奥。";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "我已经看到了所发生的一切。";
		mes "现在，我必须采取自己的行动。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "啊……你是说秘书吗？";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "以求企业诚信经营。我们将严格执行规则，防止此类事情再次发生。";
		next;
		mes "[塔蒂奥]";
		mes "现在很难说出一切，但我承诺与政府和私营部门合作，而不是与公司本身合作。";
		next;
		cutin "ep16_tes02",2;
		mes "[苔丝]";
		mes "这么说，你打算把你秘书的意见转达给总统吧？";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "我们也将接受副总统卡亚托斯的意见，并深入分析他迄今为止所调查的情况，并相应地分配赔偿和惩罚。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "这是总统的意愿，对吗？";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "是的当然。";
		next;
		mes "[塔蒂奥]";
		mes "为此，该公司希望与政府和叛军进行更多对话。";
		next;
		cutin "ep16_tes01",2;
		mes "[苔丝]";
		mes "这也是政府所希望的。";
		mes "未来我还有很多话要说。";
		next;
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "既然来了，又有美味的茶和小吃，为什么不给我们讲故事呢？";
		mes "你千里迢迢来到这里，不会是空手而归吧？";
		next;
		cutin "ep15_tatio01",2;
		mes "[塔蒂奥]";
		mes "让我们立即开始吧。";
		mes "这个地方适合长时间交谈。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "故事越高级，就越受欢迎。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "嗯，那个……冒险家，我相信这里的代表们一定会进行一场长时间的交谈。";
		mes "我们要出去吗？";
		next;
		select( "我会多听听。", "我会出去。" );
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "既然你喜欢冒险家，那我就在外面等着吧。";
		mes "你在宅邸里闲逛做得很好。";
		next;
		mes "[新秀]";
		mes "另外，虽然金额虽小，但我会给你一些酒吧餐券。我从这里的自动娃娃那里得到的。";
		mes "正是感谢你们的辛勤付出！";
		close2;
		cutin "",255;
		cloakonnpcself( "Rookie#jh5" );
		ep17_2_main = 25;
		completequest 16452;
		getitem 1000103,20;
		getexp 900000,0;	// note: ~exp. getbaseexp_ratio?
		end;
	}
	npctalk "塔蒂奥：我会虚心聆听任何事情。", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16452) == 1" );
	end;
}

ba_in01,204,113,5	script	Cotnes#jh5_1	4_F_COATNEIS,{
	if (ep17_2_main == 17) {
		cutin "ep162_ctn01",2;
		mes "[科特尼斯]";
		mes "我没有那个奢侈，听你的故事。";
		close3;
	}
	if (ep17_2_main == 18) {
		npctalk "Cotnes：看来 Ridsh 有话要说。", "", bc_self;
		end;
	}
	if (ep17_2_main == 19) {
		npctalk "Cotnes：呵呵呵呵，我觉得法人代表有话要说。", "", bc_self;
		end;
	}
	if (ep17_2_main < 25) {
		npctalk "Cotnes：好吧，我现在没什么可说的。", "", bc_self;
		end;
	}
	npctalk "Cotnes：这里的每个人都精神抖擞。呼呼呼。", "", bc_self;
	end;
}

ba_maison,103,92,3	script	Kaya Toss#jh5_2	4_EP17_KAYA,{
	if (checkweight(1000103,15) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep17_2_main == 21) {
		cloakoffnpcself( "Assassin#jh5_1" );
		mes "[???]";
		mes "真想把大家的肝胆都掏出来。";
		mes "公司为你感到羞耻。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "？！？";
		next;
		cutin "ep171_kaya03",2;
		mes "[所以扔]";
		mes "你是谁。你为什么躲在这种地方？";
		next;
		cutin "",255;
		mes "[???]";
		mes "副总裁，我是雷肯伯董事会的成员。 ……你不需要知道我的身份。";
		next;
		cutin "ep171_kaya03",2;
		mes "[所以扔]";
		mes "你无礼...！这里不是任何人可以进出的地方。你为什么偷偷地来找我？";
		next;
		cutin "",255;
		mes "[???]";
		mes "公司对副总裁的行为感到担忧。你还要被他们的雄辩所左右多久？如果公司代表屡次做出损害公司利益的行为，你会怎么做？";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "违背公司利益，我始终是为公司利益而努力。";
		next;
		cutin "",255;
		mes "[???]";
		mes "我们选一个吧。过多承诺事故赔偿，高估企业责任。";
		mes "你不仅会损害公司的财务，还会损害其声誉。";
		next;
		mes "[???]";
		mes "为什么公司要对幻象造成的事故进行赔偿？";
		mes "相反，应该由企业获得赔偿。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "我向我们雇用并以公司名义工作的人承诺公司的福利待遇有问题吗？";
		next;
		cutin "",255;
		mes "[???]";
		mes "你给的好处太多了。";
		mes "照此下去，越来越多的人会以各种理由向公司勒索钱财。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "我认为这一切并不过分。";
		mes "我只是在做我们必须做的事。";
		next;
		cutin "",255;
		mes "[???]";
		mes "呼……如果我跟你结束了，我就不会来了。就是这样。反正我来这里也不是为了聊天的。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "你是什​​么意思？";
		next;
		cutin "",255;
		mes "[???]";
		mes "谈话是没有意义的。你是时候从这个地方消失了！";
		next;
		select( "很危险！" );
		cloakoffnpcself( "Dien#jh5_2" );
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "很危险！";
		emotion ET_SURPRISE, getnpcid(0,"Dien#jh5_2");
		next;
		cloakoffnpcself( "Ridsh#jh5_2" );
		cutin "ep162_rds02",2;
		mes "[里德什]";
		mes "我过来看看怎么了，好像有老鼠出现了。";
		emotion ET_SURPRISE, getnpcid(0,"Ridsh#jh5_2");
		next;
		cloakoffnpcself( "Cotnes#jh5_2" );
		cutin "ep162_ctn02",2;
		mes "[科特尼斯]";
		mes "你是谁！我不会让你走的！";
		emotion ET_SURPRISE, getnpcid(0,"Cotnes#jh5_2");
		next;
		cutin "",255;
		mes "[???]";
		mes "妈的，你被抓到了吗？！这些无用的敏锐老人！";
		next;
		cloakonnpcself( "Assassin#jh5_1" );
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "嗯，谢谢各位前辈的帮助。这是……这是我毕生致力于的工作。公司派了一名刺客来杀我。";
		next;
		mes "[所以扔]";
		mes "但我不会输。";
		mes "企业唯一的出路就是清理过去、改善现在。";
		close2;
		cutin "",255;
		ep17_2_main = 22;
		erasequest 16449;
		setquest 16450;
		end;
	}
	if (ep17_2_main == 22) {
		cloakoffnpcself( "Dien#jh5_2" );
		cloakoffnpcself( "Ridsh#jh5_2" );
		cloakoffnpcself( "Cotnes#jh5_2" );
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "但我不会输。";
		mes "企业唯一的出路就是清理过去、改善现在。";
		close3;
	}
	if (ep17_2_main == 23) {
		cloakoffnpcself( "Dien#jh5_2" );
		cloakoffnpcself( "Ridsh#jh5_2" );
		cloakoffnpcself( "Cotnes#jh5_2" );
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "明白了。我将联系公司并请一位重要人士与政府和叛军进行更深入的交谈。";
		next;
		mes "[所以扔]";
		mes "我们应该好好调查这起事件，抓住罪魁祸首。";
		mes "再次感谢您的合作。";
		next;
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "您一定感到非常惊讶，但我对您的快速行动表示感谢。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "那我们就回茶馆吧。我也想冷静一点。";
		mes "长辈们，你们愿意跟我一起去吗？";
		next;
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "我很乐意护送你。";
		next;
		cutin "ep171_kaya01",2;
		mes "[所以扔]";
		mes "冒险者，如果你也能跟我们一起去的话，我将不胜感激。";
		mes "我们一起喝茶，等待重要的人到来。";
		close2;
		cutin "",255;
		cloakonnpcself( "Dien#jh5_2" );
		cloakonnpcself( "Ridsh#jh5_2" );
		cloakonnpcself( "Cotnes#jh5_2" );
		ep17_2_main = 24;
		erasequest 16451;
		setquest 16452;
		getitem 1000103,15;
		getexp 900000,0;	// note: ~exp. getbaseexp_ratio?
		end;
	}
	cutin "ep171_kaya01",2;
	mes "[所以扔]";
	mes "我来这里是想思考一下。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16449) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16451) == 1" );
	end;
}

ba_maison,100,90,7	script(CLOAKED)	Dien#jh5_2	4_F_DIENE,{
	if (ep17_2_main == 22) {
		cutin "ep162_dn01",2;
		mes "[发球]";
		mes "我听过你的意见。";
		mes "嗯……我现在明白了，你所说的承担责任这个词在我们面前并不是镀金的。";
		next;
		mes "[发球]";
		mes "然而，没有理由相信你可以为公司所做的一切道歉。";
		mes "多相信自己一点吧，我只是想看看你从现在开始会做什么。";
		next;
		cutin "ep162_dn03",2;
		mes "[发球]";
		mes "不要忘记。即使有一天我们消失了，年轻一代、新的叛乱、无数受到企业错误行为影响的无辜者和那些没有受到影响的人，都在注视着企业的行为。";
		next;
		mes "[发球]";
		mes "如果你已经决定了，我想和代表更清楚地谈谈。";
		mes "另外，为了正确地完成工作，最好不仅是我们，还有总统的人。";
		next;
		cutin "ep162_dn02",2;
		mes "[发球]";
		mes "首先，请向我们展示您的第一步可以做什么。";
		close2;
		cutin "",255;
		ep17_2_main = 23;
		erasequest 16450;
		setquest 16451;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16450) == 1" );
	end;
}

ba_maison,105,95,3	script(CLOAKED)	Ridsh#jh5_2	4_F_LEEDSH,{
	npctalk "里什：告诉总统出来！", "", bc_self;
	end;
}

ba_maison,105,90,1	script(CLOAKED)	Cotnes#jh5_2	4_F_COATNEIS,{
	npctalk "Ridsh：苏先生，你还好吗？", "", bc_self;
	end;
}

ba_maison,100,95,5	duplicate(dummy_cloaked_npc)	Assassin#jh5_1	4_M_MASKMAN


//= Managers
ba_maison,189,56,3	script	Yunas#jh5	4_EP17_BASIC_B,{
	if (ep17_2_main == 17) {
		cutin "ep172_beta",2;
		mes "[尤纳斯]";
		mes "欢迎，尊贵的客人，我是一个自动人偶，标识符叫尤纳斯。";
		mes "当然，我站在这里是为了帮助任何需要帮助的客人。";
		next;
		cutin "",255;
		select( "我想问一下过去的记录。" );
		cutin "ep172_beta",2;
		mes "[尤纳斯]";
		mes "您要我检查什么记录？";
		next;
		cutin "",255;
		select( "任何关于雇佣兵的记录都是一个钟声。" );
		cutin "ep172_beta",2;
		mes "[尤纳斯]";
		mes "我来准备一下记录。请稍等。";
		next;
		mes "[尤纳斯]";
		mes "正如客人所要求的。我将随机选择数据库中有关雇佣兵的记录。";
		next;
		cutin "",255;
		cloakoffnpcself( "Mercenary#jh5_1" );
		cloakoffnpcself( "Mercenary#jh5_2" );
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_1";
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_2";
		mes "..................";
		mes "..................";
		next;
		mes "[雇佣兵]";
		mes "我们是怎么到这里的？";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_1");
		next;
		mes "[雇佣兵]";
		mes "一座你从未认识的人的豪宅。";
		mes "我以前从未住过这样的豪宅。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_2");
		next;
		mes "[雇佣兵]";
		mes "瓦蒙特是一个什么样的人，竟然愿意接受我们？";
		emotion ET_QUESTION, getnpcid(0,"Mercenary#jh5_1");
		next;
		mes "[雇佣兵]";
		mes "噢，你应该问一下这是谁。";
		mes "当我们以为我们都快要死的时候，你不是拯救了我们的人吗？";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_2");
		next;
		mes "[雇佣兵]";
		mes "是的，感谢 Varmundt 先生和 H 先生，我们还活着";
		mes "如果不是H先生让我们来这里的话，我们现在都已经死了。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_1");
		next;
		mes "[雇佣兵]";
		mes "让我们在这里恢复体力，准备战斗吧。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_2");
		next;
		mes "..................";
		mes "..................";
		cloakonnpcself( "Mercenary#jh5_1" );
		cloakonnpcself( "Mercenary#jh5_2" );
		next;
		cutin "ep172_beta",2;
		mes "[尤纳斯]";
		mes "您还有其他想要查看的记录吗？";
		next;
		cutin "",255;
		if (select( "我对那个叫 H 先生的人很好奇。", "没有了。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[尤纳斯]";
			mes "感谢您阅读记录！";
			mes "如果您需要更多记录，请随时询问。";
			close3;
		}
		cutin "",255;
		cloakoffnpcself( "Mercenary#jh5_11" );
		cloakoffnpcself( "Mercenary#jh5_21" );
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_11";
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_21";
		mes "..................";
		mes "..................";
		next;
		mes "[雇佣兵]";
		mes "……我想我终于平静下来了。";
		mes "大家都很愤怒。";
		emotion ET_SWEAT, getnpcid(0,"Mercenary#jh5_11");
		next;
		mes "[雇佣兵]";
		mes "但这是必须要做的事情。";
		mes "人就这样死了，人……到处都是血，眼睛都翻了。";
		mes "现在想起来，我感到深深的后悔。";
		emotion ET_KEK, getnpcid(0,"Mercenary#jh5_21");
		next;
		mes "[雇佣兵]";
		mes "我们使用了替代计划，但造成的伤亡比应有的要多。";
		mes "我应该阻止H先生的。";
		mes "每个人都开始大喊大叫，惊慌失措，说我们必须先除掉他们……";
		emotion ET_SCRATCH, getnpcid(0,"Mercenary#jh5_11");
		next;
		mes "[雇佣兵]";
		mes "那时H先生和我们都没有那么流血。";
		mes "别太责怪H先生了。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_21");
		next;
		mes "[雇佣兵]";
		mes "嗯，确实如此……我们别再谈论了，纠缠它只会让我们很难过。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_11");
		next;
		mes "..................";
		mes "..................";
		cloakonnpcself( "Mercenary#jh5_11" );
		cloakonnpcself( "Mercenary#jh5_21" );
		next;
		cutin "ep172_beta",2;
		mes "[尤纳斯]";
		mes "您还有其他想要查看的记录吗？";
		next;
		cutin "",255;
		select( "我受够了。" );
		cutin "ep172_beta",2;
		mes "[尤纳斯]";
		mes "感谢您阅读记录！";
		mes "如果您需要更多记录，请随时询问。";
		next;
		mes "- 我需要仔细记住我听到的内容。 -";
		close2;
		cutin "",255;
		if (isbegin_quest(16442) == 1)
			erasequest 16442;
		if (isbegin_quest(16442) == 0 && isbegin_quest(16443) == 0 && isbegin_quest(16444) == 0 && isbegin_quest(16445) == 0 && isbegin_quest(16453) == 0)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I think I've heard enough stories. Should I go back to the teahouse now?", bc_self;
		end;
	}
	cutin "ep172_beta",2;
	mes "[尤纳斯]";
	mes "欢迎来到瓦蒙特宅邸。 Varmundt Mansion提供各种福利，如医疗服务、购物娱乐、休闲活动......";
	next;
	mes "[尤纳斯]";
	mes "呃。哎呀。不是这样的。我错误地告诉了你错误的事情。";
	mes "请无视它...";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16442) == 1" );
	end;
}

ba_maison,187,54,5	duplicate(dummy_cloaked_npc)	Mercenary#jh5_1	1_ETC_01
ba_maison,190,54,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_2	1_F_MERCHANT_02
ba_maison,187,54,5	duplicate(dummy_cloaked_npc)	Mercenary#jh5_11	1_M_JOBGUIDER
ba_maison,190,54,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_21	1_M_SMITH

ba_maison,318,169,5	script	Skippy#jh5	4_EP17_BASIC_B,{
	if (ep17_2_main == 17) {
		cutin "ep172_beta",2;
		mes "[斯基皮]";
		mes "您想要过去的客人的记录吗？";
		mes "您心中有特定的记录吗？";
		next;
		cutin "",255;
		select( "事件和事故的任何记录。" );
		cutin "ep172_beta",2;
		mes "[斯基皮]";
		mes "让我检查一下...";
		mes "记录是从事件和事故类别中随机选择的。";
		next;
		mes "[斯基皮]";
		mes "事件，记录 5872，已确认。";
		mes "我会回放当时的记录。";
		next;
		cutin "",255;
		cloakoffnpcself( "Mercenary#jh5_51" );
		cloakoffnpcself( "Mercenary#jh5_61" );
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_51";
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_61";
		mes "..................";
		mes "..................";
		next;
		mes "[雇佣兵]";
		mes "在豪宅的墙壁附近发现了一具尸体。";
		emotion ET_SURPRISE, getnpcid(0,"Mercenary#jh5_51");
		next;
		mes "[雇佣兵]";
		mes "那个可怕的故事是什么？";
		mes "它是谁的身体？";
		emotion ET_SURPRISE, getnpcid(0,"Mercenary#jh5_61");
		next;
		mes "[雇佣兵]";
		mes "好吧，没有人知道。就连管理人员也不知道。";
		mes "身上衣着整齐，一点也不像雇佣兵。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_51");
		next;
		mes "[雇佣兵]";
		mes "你认为他们已经来了吗？";
		mes "但企业人士不会盛装来拜访我们。";
		emotion ET_QUESTION, getnpcid(0,"Mercenary#jh5_61");
		next;
		mes "[雇佣兵]";
		mes "我知道，这只是一个抱怨的幽灵，";
		mes "我希望这没什么大不了的...";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_51");
		next;
		mes "..................";
		mes "..................";
		cloakonnpcself( "Mercenary#jh5_51" );
		cloakonnpcself( "Mercenary#jh5_61" );
		next;
		cutin "ep172_beta",2;
		mes "[斯基皮]";
		mes "录音播放结束。";
		mes "您需要有关其他记录的任何信息吗？";
		next;
		cutin "",255;
		select( "我需要更多关于身体的信息。" );
		cutin "ep172_beta",2;
		mes "[斯基皮]";
		mes "请稍等，性别为女，姓名不详，身穿灰色套装，但衣衫褴褛，满是血迹。";
		mes "死因是来自背后的袭击……然后……";
		next;
		mes "- 我收到了一份不明尸体的记录。 -";
		close2;
		cutin "",255;
		if (isbegin_quest(16443) == 1)
			erasequest 16443;
		if (isbegin_quest(16442) == 0 && isbegin_quest(16443) == 0 && isbegin_quest(16444) == 0 && isbegin_quest(16445) == 0 && isbegin_quest(16453) == 0)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I think I've heard enough stories. Should I go back to the teahouse now?", bc_self;
		end;
	}
	cutin "ep172_beta",2;
	mes "[斯基皮]";
	mes "你好呀。您需要过去客人的记录吗？";
	mes "宾客名单记录在一个巨大的数据库中。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16443) == 1" );
	end;
}

ba_maison,321,168,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_51	1_M_02
ba_maison,322,165,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_61	1_F_04

ba_maison,249,161,3	script	Adore#jh5	4_EP17_BASIC_B,{
	if (ep17_2_main == 17) {
		cutin "ep172_beta",2;
		mes "[喜欢]";
		mes "你好，客人。我可以帮你吗？";
		next;
		cutin "",255;
		select( "关于过去雇佣兵的记录。" );
		cutin "ep172_beta",2;
		mes "[喜欢]";
		mes "过去的客人有很多记录，您需要什么样的记录？";
		next;
		cutin "",255;
		select( "关于一个名叫H.的雇佣兵" );
		cutin "ep172_beta",2;
		mes "[喜欢]";
		mes "搜索，搜索……搜索完成。关于H先生的记录很少……";
		mes "然而，有很多关于其他人对H先生的评价的记录。";
		next;
		mes "[喜欢]";
		mes "如果你想看这个记录，我会帮你准备的。";
		next;
		cutin "",255;
		cloakoffnpcself( "Mercenary#jh5_5" );
		cloakoffnpcself( "Mercenary#jh5_6" );
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_5";
		specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_6";
		mes "..................";
		mes "..................";
		next;
		mes "[雇佣兵]";
		mes "顺便问一下，H 先生在哪里？";
		mes "我已经找他有一段时间了，但是...";
		emotion ET_QUESTION, getnpcid(0,"Mercenary#jh5_5");
		next;
		mes "[雇佣兵]";
		mes "看来他经常不在。";
		mes "有一天我必须和他谈谈。如果企业突然介入怎么办？";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_6");
		next;
		mes "[雇佣兵]";
		mes "不久前，我看到H先生正在和一个不认识的人说话。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_5");
		next;
		mes "[雇佣兵]";
		mes "一个你不认识的人，你到哪里去找一个人？";
		emotion ET_QUESTION, getnpcid(0,"Mercenary#jh5_6");
		next;
		mes "[雇佣兵]";
		mes "这就是为什么它很奇怪。他也彻底检查了周边，但我擅长隐藏。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_5");
		next;
		mes "[雇佣兵]";
		mes "他们聊了什么？";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_6");
		next;
		mes "[雇佣兵]";
		mes "我没有听到，因为太远了。";
		emotion ET_THINK, getnpcid(0,"Mercenary#jh5_5");
		next;
		mes "[雇佣兵]";
		mes "你没躲得好，只是躲得远而已！";
		mes "无论如何，这确实很可疑。到底是怎么回事？";
		mes "..................";
		mes "..................";
		emotion ET_SWEAT, getnpcid(0,"Mercenary#jh5_6");
		next;
		cloakonnpcself( "Mercenary#jh5_5" );
		cloakonnpcself( "Mercenary#jh5_6" );
		cutin "ep172_beta",2;
		mes "[喜欢]";
		mes "录制完成。";
		mes "您需要有关 H. 的更多信息吗？";
		next;
		cutin "",255;
		select( "H与陌生人的对话。" );
		cutin "ep172_beta",2;
		mes "[喜欢]";
		mes "正在搜索...未找到结果。我们没有该信息的任何记录。";
		mes "这个记录是由清洁机器人和没有耳朵的经理记录的。";
		next;
		cutin "",255;
		select( "记录对话的地方。" );
		cutin "ep172_beta",2;
		mes "[喜欢]";
		mes "正在搜索...通过扫地机器人的记录，我可以引导您到该记录中最后识别的位置。";
		mes "我给你坐标。请遵循此<NAVI>[指南]<INFO>ba_maison,357,291,0,101,0</INFO></NAVI>。";
		close2;
		cutin "",255;
		if (isbegin_quest(16444) == 1) {
			erasequest 16444;
			setquest 16453;
		}
		if (isbegin_quest(16442) == 0 && isbegin_quest(16443) == 0 && isbegin_quest(16444) == 0 && isbegin_quest(16445) == 0 && isbegin_quest(16453) == 0)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I think I've heard enough stories. Should I go back to the teahouse now?", bc_self;
		end;
	}
	cutin "ep172_beta",2;
	mes "[喜欢]";
	mes "你好呀。我怎么帮你？";
	mes "我真的很高兴为任何客人提供帮助。";
	next;
	mes "[喜欢]";
	mes "你应该做任何事来取悦我！";
	mes "是的，我就是这样被创造出来的。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16444) == 1" );
	end;
}

ba_maison,246,158,5	duplicate(dummy_cloaked_npc)	Mercenary#jh5_5	1_M_02
ba_maison,249,158,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_6	1_M_ORIENT01

ba_maison,232,310,5	script	Nono#jh5	4_EP17_BASIC_B,{
	if (ep17_2_main == 17) {
		mes "- 你还记得客人的谈话吗？ -";
		next;
		cutin "ep172_beta",2;
		mes "[第九]";
		mes "你是说老客人吗？";
		mes "我当然记得一切！";
		mes "你想听什么故事？我会告诉你一切！";
		next;
		mes "[第九]";
		mes "我已经在数据库中搜索了过去客人的对话，记录是随机选择的！";
		mes "以下是结果！";
		cutin "",255;
		next;
		.@s = select( "某人的旅行。", "发现的痕迹。", "政府的批评。" );
		cutin "ep172_beta",2;
		mes "[第九]";
		mes "我来放唱片！";
		next;
		cutin "",255;
		mes "..................";
		mes "..................";
		switch( .@s ) {
		case 1:
			cloakoffnpcself( "Mercenary#jh5_7" );
			cloakoffnpcself( "Mercenary#jh5_8" );
			specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_7";
			specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_8";
			next;
			mes "[雇佣兵]";
			mes "有一名雇佣兵在试图深入宅邸时差点被赶出去。是谁？";
			emotion ET_QUESTION, getnpcid(0,"Mercenary#jh5_7");
			next;
			mes "[雇佣兵]";
			mes "我想是H先生。他为什么要做这样的事。";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_8");
			next;
			mes "[雇佣兵]";
			mes "是的。提供给我们的供应已经足够我们度过了。";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_7");
			next;
			mes "[雇佣兵]";
			mes "H. 需要更多 Barmeal 门票吗？";
			mes "即使他不需要，如果他问我也会分享给他。";
			emotion ET_QUESTION, getnpcid(0,"Mercenary#jh5_8");
			next;
			mes "[雇佣兵]";
			mes "我对H先生持怀疑态度。你不认为他只是做了这件事才引人注目吗？";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_7");
			next;
			mes "[雇佣兵]";
			mes "来吧，别这么说。我们应该互相信任。";
			emotion ET_BLABLA, getnpcid(0,"Mercenary#jh5_8");
			close2;
			cloakonnpcself( "Mercenary#jh5_7" );
			cloakonnpcself( "Mercenary#jh5_8" );
			break;
		case 2:
			cloakoffnpcself( "Mercenary#jh5_71" );
			cloakoffnpcself( "Mercenary#jh5_81" );
			specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_71";
			specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_81";
			next;
			mes "[雇佣兵]";
			mes "在豪宅附近又发现了可疑痕迹。";
			mes "这次，有人说是激战的痕迹，但我们没有受伤，也没有失踪。";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_71");
			next;
			mes "[雇佣兵]";
			mes "我也听说过。肯定是那些公司的家伙干的！我们不能呆在这里并清理那里。";
			emotion ET_ANGER, getnpcid(0,"Mercenary#jh5_81");
			next;
			mes "[雇佣兵]";
			mes "冷静下来。你根本不知道发生了什么，是吗？";
			mes "没有人受伤，但他们发现了很多血迹。领导还在调查中。";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_71");
			next;
			mes "[雇佣兵]";
			mes "当外面发生很多混乱的时候，我们怎么可能什么都不知道呢？我好郁闷，好郁闷！！";
			emotion ET_STARE, getnpcid(0,"Mercenary#jh5_81");
			close2;
			cloakonnpcself( "Mercenary#jh5_71" );
			cloakonnpcself( "Mercenary#jh5_81" );
			break;
		case 3:
			cloakoffnpcself( "Mercenary#jh5_72" );
			cloakoffnpcself( "Mercenary#jh5_82" );
			specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_72";
			specialeffect EF_DA_SPACE, AREA, "Mercenary#jh5_82";
			next;
			mes "[雇佣兵]";
			mes "我以为出了事政府会出面调解，但在政府眼里我们就像不存在一样。";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_72");
			next;
			mes "[雇佣兵]";
			mes "根本没有任何动静，更不用说调解了。";
			mes "我们不是公民吗？他们怎么可以这样做！";
			emotion ET_ANGER, getnpcid(0,"Mercenary#jh5_82");
			next;
			mes "[雇佣兵]";
			mes "发生了很多流血事件，发生了如此大的骚乱。";
			mes "如果政府在这种时候不挺身而出，就必须有人挺身而出，推动政府前进。";
			emotion ET_SURPRISE, getnpcid(0,"Mercenary#jh5_72");
			next;
			mes "[雇佣兵]";
			mes "但没有人站出来。这个政府不像一个真正的政府，根本没有前进。";
			emotion ET_THINK, getnpcid(0,"Mercenary#jh5_82");
			close2;
			cloakonnpcself( "Mercenary#jh5_72" );
			cloakonnpcself( "Mercenary#jh5_82" );
			break;
		}
		if (isbegin_quest(16445) == 1)
			erasequest 16445;
		if (isbegin_quest(16442) == 0 && isbegin_quest(16443) == 0 && isbegin_quest(16444) == 0 && isbegin_quest(16445) == 0 && isbegin_quest(16453) == 0)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I think I've heard enough stories. Should I go back to the teahouse now?", bc_self;
		end;
	}
	cutin "ep172_beta",2;
	mes "[第九]";
	mes "我叫诺诺，我想飞到高高的天空。";
	mes "我被命名为诺诺，因为我想被这样称呼。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16445) == 1" );
	end;
}

ba_maison,234,307,5	duplicate(dummy_cloaked_npc)	Mercenary#jh5_7	4_M_ORIENT02
ba_maison,237,307,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_8	4_F_01
ba_maison,234,307,5	duplicate(dummy_cloaked_npc)	Mercenary#jh5_71	1_F_MERCHANT_02
ba_maison,237,307,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_81	1_M_02
ba_maison,234,307,5	duplicate(dummy_cloaked_npc)	Mercenary#jh5_72	1_M_INNKEEPER
ba_maison,237,307,3	duplicate(dummy_cloaked_npc)	Mercenary#jh5_82	2_F_MAGICMASTER

ba_maison,357,291,3	script	Cleaning Robot#jh5_1	4_EP17_CLEANER_W,{
	if (isbegin_quest(16453) == 1) {
		cutin "ep172_omega",2;
		mes "- 距离接待区不远的地方，一台清洁机器人躺在阴影中。看起来好像已经在这里很久了。 -";
		next;
		mes "- 我把它翻过来，它就停了下来，因为里面粘了一个小纸信封。 -";
		next;
		mes "- 这是信封上雷肯伯的图案吗？为什么这些东西会在这里？";
		next;
		mes "- 我小心翼翼地拿出信封，以免撕破。 -";
		close2;
		cutin "",255;
		erasequest 16453;
		end;
	}
	cutin "ep172_omega",2;
	mes "- ……？ -";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16453) == 1" );
	end;
}

ba_maison,106,65,0	script	#ep172_main_evt01	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_main == 25) {
		cloakoffnpcself( "Rookie#ep172_m_rk01" );
		cloakoffnpcself( "Manager#ep172_m_ap0" );
		end;
	}
	end;
}

ba_maison,116,67,5	script(CLOAKED)	Rookie#ep172_m_rk01	4_M_ROOKIE,{
	if (ep17_2_main == 25) {
		setpcblock PCBLOCK_NPC, true;
		sleep2 2000;
		npctalk "我期待与您的友好合作。", "经理#ep172_m_ap0", bc_self;
		sleep2 2000;
		cloakonnpcself( "Manager#ep172_m_ap0" );
		setpcblock PCBLOCK_NPC, false;
		select( "怎么了？" );
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "是关于闯入宅邸的人的事。";
		mes "还有另一位豪宅经理被猎心者伤害了。";
		next;
		mes "[新秀]";
		mes "这一次，通讯又先被中断，肯定是在保安人员发现之前，经理们就已经遭到袭击了。";
		next;
		cutin "16loo_03",0;
		mes "[新秀]";
		mes "Alpha 说我们可以修复任何损坏的东西，但还有一个更大的问题......";
		next;
		mes "[新秀]";
		mes "假设阿尔法有很强的信号，被黑的自动娃娃会立即切断网络以防止污染。";
		next;
		mes "[新秀]";
		mes "连识别码都被破解了。";
		mes "Alpha说我们必须对这样的自动娃娃使用武力。";
		next;
		mes "[新秀]";
		mes "如果有自动人偶攻击我们，我们当然会把它干掉。";
		mes "阿尔法让我把它的“核心”带来。";
		next;
		select( "核？" );
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "就是他们胸前的那个。我想这是修复自动娃娃的唯一方法。";
		mes "如果能恢复核心我会很高兴...";
		next;
		mes "[新秀]";
		mes "那些人到底什么时候才能到达？";
		mes "我有点沮丧，因为我找不到一个幻象的成员。";
		next;
		mes "[新秀]";
		mes "我找不到他们白天躲在哪里……，";
		mes "我认为他们在太阳下山后仍在工作，但他们在很多方面都遇到了麻烦。";
		next;
		mes "[新秀]";
		mes "不管怎样，阿尔法说，我们必须对付那些无法识别识别码并回收核心的自动机器人。";
		mes "你愿意跟我一起去吗？";
		next;
		cloakoffnpcself( "Elyumina#ep172_m_el01" );
		cloakoffnpcself( "Rebellion#ep172_m_rb01" );
		sleep2 200;
		npctalk "新人，你在哪里！！你来了！！", "埃柳米娜#ep172_m_el01", bc_self;
		sleep2 1500;
		npctalk "惊喜！", "", bc_self;
		cutin "ep171_elyumina02",2;
		mes "[艾柳米娜]";
		mes "这些家伙实在是太疯狂了！你到底为什么要这样对我？叛徒？你这个叛徒？";
		mes "你认为敌人称你为叛徒合适吗？";
		next;
		cutin "16loo_03",0;
		mes "[新秀]";
		mes "嗯……米娜？你能在不咬人的情况下与人交谈吗？";
		mes "我不明白你在说什么？你刚才说的是人类语言吗？";
		next;
		cutin "ep171_elyumina02",2;
		mes "[艾柳米娜]";
		mes "哈-！是这样吗？";
		mes "嘿，你为什么总是丢下我一个人？";
		mes "不要丢下我一个人，即使我很刻薄、很讽刺！请问你明白吗？";
		next;
		cutin "",255;
		select( "发生了什么？" );
		mes "[叛乱]";
		mes "送饭的经理突然变脸，攻击了艾柳米娜。";
		mes "幸好我在客人名单上，经理马上就恢复正常了，";
		next;
		mes "[叛乱]";
		mes "经理用它携带的托盘猛击艾柳米娜的头部，力道大到发出很大的声音。";
		npctalk "我以为你看到生菜飞向你。", "叛乱#ep172_m_rb01", bc_self;
		next;
		cutin "16loo_02",0;
		mes "[新秀]";
		mes "我从 Alpha 那里听过类似的故事，但我没想到是你。";
		mes "如果你在事情发生后第一时间告诉我，那就太好了。";
		mes "嗯，你还好吗？";
		next;
		cutin "ep171_elyumina02",2;
		mes "[艾柳米娜]";
		mes "伟大的？你经历过吗？那还没有结束！你这个没心没肺的混蛋！";
		mes "还有正在打扫花园的经理，突然袭击了我！";
		mes "一直说‘杀了叛徒’！";
		npctalk "你这个混蛋，还关我的安危！", "埃柳米娜#ep172_m_el01", bc_self;
		next;
		cutin "16loo_02",0;
		mes "[新秀]";
		mes "啊哈哈哈……反正也别太激动。";
		mes "我正想查看一下，看这里，这里的冒险者正跟我一起去呢。";
		next;
		mes "[新秀]";
		mes "我们将取回阿尔法谈到的被黑管理器的核心。";
		mes "你为什么不回去和其他叛军待在一起呢？";
		npctalk "我总有事可做！", "叛乱#ep172_m_rb01", bc_self;
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "你，我现在就回来。";
		mes "听说，永远不要空手而来！";
		mes "我需要找一个安全的地方！";
		next;
		cloakonnpcself( "Elyumina#ep172_m_el01" );
		cloakonnpcself( "Rebellion#ep172_m_rb01" );
		cutin "16loo_02",0;
		mes "[新秀]";
		mes "我无能为力。我担心埃柳米娜的安全。";
		mes "我还担心阿尔法提到的那些丢失了识别码的经理。";
		next;
		mes "[新秀]";
		mes "我们要先取回核心吗？如果您发现“损坏的管理器”，请取回其核心。";
		next;
		mes "[新秀]";
		mes "我要去看看北部地区，你可以看看南部地区。";
		next;
		mes "[新秀]";
		mes "我们在路东端的湖边见面吧，结束吧。";
		mes "那我就先走了。";
		ep17_2_main = 26;
		setquest 18002;
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main == 25" );
	end;
}

ba_maison,118,68,3	duplicate(dummy_cloaked_npc)	Manager#ep172_m_ap0	4_EP17_MASTER_A
ba_maison,120,67,3	duplicate(dummy_cloaked_npc)	Elyumina#ep172_m_el01	4_EP17_ELYUMINA
ba_maison,122,66,1	duplicate(dummy_cloaked_npc)	Rebellion#ep172_m_rb01	4_M_REBELLION3

ba_maison,150,47,0	script	#ep172_body-0	CLEAR_NPC,{
	.@id = atoi(replacestr(strnpcinfo(2), "ep172_body-", ""));
	.@quest = 18003 + .@id;
	if (ep17_2_main == 26 && isbegin_quest(.@quest) == 0 && countitem(1000226) < 5) {
		if (checkweight(1000226,1) == 0) {	// (custom)
			mes "^008800等一下！！";
			mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
			close;
		}
		cloakonnpcself();
		cloakoffnpcself( "#ep172_beta-" + .@id );
		mes "贝塔经理的尸体隐藏在风景之下。";
		next;
		mes "我已经恢复了核心。";
		mes "我稍后会让阿尔法知道，这样她就可以取回娃娃的尸体。";
		setquest .@quest;
		completequest .@quest;
		getitem 1000226,1;
		if (countitem(1000226) < 5)
			mes "让我们寻找更多。";
		else {
			mes "我已经恢复了足够的核心。";
			ep17_2_main = 27;
			erasequest 18002;
			setquest 18013;
		}
		close;
	}
	end;

OnInit:
	.@id = atoi(replacestr(strnpcinfo(2),"ep172_body-",""));
	.@quest = 18003 + .@id;
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(18002) == 1 && isbegin_quest(" + .@quest + ") == 0 && countitem(1000226) < 5" );
	end;
}

ba_maison,208,87,0	duplicate(#ep172_body-0)	#ep172_body-1	CLEAR_NPC
ba_maison,221,193,0	duplicate(#ep172_body-0)	#ep172_body-2	CLEAR_NPC
ba_maison,314,146,0	duplicate(#ep172_body-0)	#ep172_body-3	CLEAR_NPC
ba_maison,338,267,0	duplicate(#ep172_body-0)	#ep172_body-4	CLEAR_NPC
ba_maison,275,313,0	duplicate(#ep172_body-0)	#ep172_body-5	CLEAR_NPC
ba_maison,207,276,0	duplicate(#ep172_body-0)	#ep172_body-6	CLEAR_NPC
ba_maison,131,197,0	duplicate(#ep172_body-0)	#ep172_body-7	CLEAR_NPC
ba_maison,64,187,0	duplicate(#ep172_body-0)	#ep172_body-8	CLEAR_NPC
ba_maison,70,256,0	duplicate(#ep172_body-0)	#ep172_body-9	CLEAR_NPC

ba_maison,150,47,3	duplicate(dummy_cloaked_npc)	#ep172_beta-0	4_EP17_BROKENBETA
ba_maison,208,87,3	duplicate(dummy_cloaked_npc)	#ep172_beta-1	4_EP17_BROKENBETA
ba_maison,221,193,3	duplicate(dummy_cloaked_npc)	#ep172_beta-2	4_EP17_BROKENBETA
ba_maison,314,146,3	duplicate(dummy_cloaked_npc)	#ep172_beta-3	4_EP17_BROKENBETA
ba_maison,338,267,3	duplicate(dummy_cloaked_npc)	#ep172_beta-4	4_EP17_BROKENBETA
ba_maison,275,313,3	duplicate(dummy_cloaked_npc)	#ep172_beta-5	4_EP17_BROKENBETA
ba_maison,207,276,3	duplicate(dummy_cloaked_npc)	#ep172_beta-6	4_EP17_BROKENBETA
ba_maison,131,197,3	duplicate(dummy_cloaked_npc)	#ep172_beta-7	4_EP17_BROKENBETA
ba_maison,64,187,3	duplicate(dummy_cloaked_npc)	#ep172_beta-8	4_EP17_BROKENBETA
ba_maison,70,256,3	duplicate(dummy_cloaked_npc)	#ep172_beta-9	4_EP17_BROKENBETA

ba_maison,303,141,3	script	Elena Bolkova#ep172_eln	4_F_ELENA,{
	if (checkweight(1000103,10) == 0) {
		mes "你无法继续任务，因为你拥有太多物品。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main == 27) {
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "嘿，冒险家，这边走。你得到结果了吗？";
		next;
		select( "为什么，埃琳娜？" );
		cutin "162elena_02",2;
		mes "[埃琳娜·博尔科娃]";
		mes "幸运儿请我帮忙。";
		mes "艾柳米娜似乎再次遭到袭击。";
		mes "我当时恰好在附近，以某种方式将她从困境中拉了出来。";
		next;
		select( "向她展示核心。" );
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "你有发现什么异常吗？";
		mes "我已经找遍了府邸里的很多地方，都空无一人。";
		next;
		mes "[埃琳娜·博尔科娃]";
		mes "什么，你也是吗？";
		mes "这些家伙怎么躲着我们的眼睛，不断地制造麻烦呢？";
		mes "这很烦人。";
		close2;
		sleep2 1000;
		cutin "",255;
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Eisen Werner#ep172_eiz" );
		specialeffect EF_BEGINSPELL, AREA, "Eisen Werner#ep172_eiz";
		sleep2 500;
		npctalk "……哪里……坐标设置错误了？这是什么地方？", "艾恩·维尔纳#ep172_eiz", bc_self;
		sleep2 1500;
		npctalk "哦？这是谁？！", "", bc_self;
		specialeffect EF_CONCENTRATION;
		sleep2 500;
		specialeffect EF_PIERCE, AREA, "Eisen Werner#ep172_eiz";
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;
		cutin "ep16_eisen03",0;
		mes "[铁]";
		mes "这是什么啊！！！！";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "嘿，可疑的家伙，你就是那个人，对吧？";
		mes "你看起来和我上次在实验室错过的那个人一模一样。";
		specialeffect EF_TRACKCASTING, AREA, "Eisen Werner#ep172_eiz";
		next;
		mes "[埃琳娜·博尔科娃]";
		mes "我很幸运。像你这样的大鱼怎么到这里来了？";
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "什么，雇佣兵真的成了共和国的走狗不是吗？";
		mes "你已经摧毁了我的实验室。我还需要做什么？";
		next;
		mes "[铁]";
		mes "我没什么可对你说的，所以就让我走吧。";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "别再张开你的脏嘴了。";
		mes "哈，我的人格早就死了。";
		mes "呃，把这个家伙当作俘虏，呃，让他活下去。";
		specialeffect EF_MAGICALBULLET, AREA, "Eisen Werner#ep172_eiz";
		npctalk "啊...","","Eisen Werner#ep172_eiz";
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "你想从我处得到些什么？";
		mes "塞连因为那个冒险者而失败了。";
		mes "难道他也是一个无可救药的失败者吗？";
		next;
		select( "在这种情况下谈论实验合适吗？" );
		mes "[铁]";
		mes "如果你把我的研究和实验拿走，还剩下什么？";
		mes "别再问显而易见的事情了。";
		mes "好的。我不会屈服于你的挑衅。相反，我会问你一件事。";
		mes "如果您回答我，我愿意配合您回复。";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "你没有资格谈判，是吗？";
		specialeffect EF_MAGICALBULLET, AREA, "Eisen Werner#ep172_eiz";
		npctalk "该死的！", "艾恩·维尔纳#ep172_eiz", bc_self;
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "该死的！我不会逃跑，所以停下来！";
		mes "科尔的人去哪儿了？";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "（这家伙，怎么会好奇这个？看来是来晚了才和同事们汇合的……说成功了不就知道其他人在哪儿了吗？）";
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "你为什么这么安静？你已经把它们处理掉了吗？";
		next;
		select( "她目前被俘虏。" );
		mes "[铁]";
		mes "真的吗？然后带我去那里。";
		mes "我不想再在这个破烂的花园里闲逛了。";
		npctalk "（呵呵，我和同事们在一起的时候会一直照顾你的。）";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "你看起来很傲慢，不是吗？";
		mes "我不知道你在计划什么，但我埃琳娜博尔科娃会带你去。";
		next;
		cutin "ep16_eisen02",0;
		mes "[铁]";
		mes "我愿意和你一起去。";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "真是个奇怪的人啊。我会带着这个家伙一起去。 Rookie可能也在。";
		next;
		cutin "162elena_02",2;
		mes "[埃琳娜·博尔科娃]";
		mes "啊？我要把这个人带到哪里去？";
		mes "啊，宾馆。我们目前将其用作监狱。";
		mes "跟我来。另外，我会带走所有的核心。";
		ep17_2_main = 28;
		erasequest 18013;
		setquest 18014;
		delitem 1000226,countitem(1000226);
		getitem 1000103,10;
		getexp 515668,0;	// getbaseexp_ratio?
		close2;
		cutin "",255;
		cloakonnpcself();
		cloakonnpcself( "Eisen Werner#ep172_eiz" );
		end;
	}
	if (ep17_2_main == 28) {
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "我们宾馆见。";
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	cutin "162elena_01",2;
	mes "[埃琳娜·博尔科娃]";
	mes "我正在监视该地区，看看周围是否潜伏着隐藏的敌人。";
	mes "这个地方有很多盲点。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18013) == 1" );
	end;
}

ba_maison,301,148,5	duplicate(dummy_cloaked_npc)	Eisen Werner#ep172_eiz	4_M_EISEN


ba_in01,35,142,5	script	Rebellion#ep172_rb02	4_M_REBELLION3,{
	if (ep17_2_main < 28) {
		mes "[叛乱]";
		mes "这里没有什么特别的。";
		close;
	}
	mes "[叛乱]";
	mes "你要进去吗？";
	next;
	if (select( "是的。", "不。" ) == 2) {
		mes "[叛乱]";
		mes "我会留在这里并保证这个地方的安全。";
		close;
	}
	if (ep17_2_main < 33)
		cloakoffnpcself( "Eisen Werner#ep172_eiz2" );
	warp "ba_in01",28,144;
	end;
}

ba_in01,20,145,3	script	Elena Bolkova#ep172_eln_	4_F_ELENA,{
	if (ep17_2_main == 28) {
		cutin "162elena_02",2;
		mes "[埃琳娜·博尔科娃]";
		mes "哦，你来了，这边，Lucky还没来吗？";
		next;
		cloakoffnpcself( "Rookie#ep172_rk02" );
		cutin "16loo_01",1;
		mes "[新秀]";
		mes "不不不，我也在这里。是不是有点晚了？";
		mes "我和阿尔法聊了一会儿。";
		next;
		mes "[新秀]";
		mes "那是谁？";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "一个大收获？";
		mes "就看吧。两人打球真是一道风景。";
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "嘿嘿，这和我们说的不一样。";
		mes "这是谁？";
		next;
		select( "这就是你提到的科尔的那个人。" );
		cutin "ep16_eisen02",0;
		mes "[铁]";
		mes "这小子？我记不清了……？";
		mes "你在骗我吗？";
		next;
		cutin "ep171_elyumina02",2;
		mes "[艾柳米娜]";
		mes "你是谁，竟敢这样对待我？！";
		mes "你是那些流氓的狗吗？";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "他们首先背叛了我，他们还称我为叛徒。";
		mes "你和那些小混混在一起吗？";
		next;
		cutin "ep16_eisen03",0;
		mes "[铁]";
		mes "我不敢相信，这真的是幻觉吗？";
		mes "不，你真的是幻界的一员吗？";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "你到底在说什么？我连幻境一员都不是，为什么会被关在这里！";
		mes "我该怎么办，你不认识伟大的埃柳米娜。你想让我敲你的头吗？";
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "嘿，叛逆，我需要你把这个改成能正常说话的东西。";
		mes "如果你想从我这里得到任何信息，请给我带来一个像样的幻象成员。";
		next;
		cutin "ep171_elyumina02",2;
		mes "[艾柳米娜]";
		mes "不对，你刚才是不是吵架了？";
		mes "嘿，我已经告诉你我是幻象的一员有一段时间了。你知道我这样做了多少年吗？";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "（看，这不是很有趣吗？看着他们这样打架。）";
		next;
		cutin "16loo_01",1;
		mes "[新秀]";
		mes "（你以为是内部部门？你想想，你说他是上次行动的研究所所长吧？他是怎么被我们抓到的？）";
		next;
		cutin "ep16_eisen01",0;
		mes "[铁]";
		mes "你缺少一些重要的东西，你没有‘筹码’！";
		mes "如果只是检测到“芯片”，我就不会来这里，我也不会遇到像你这样的骗子。";
		next;
		mes "[铁]";
		mes "幻象是一个联盟，但它就像一个思想结构。正式成员的身上都植入了‘芯片’，用来识别像你这样的叛徒。";
		next;
		mes "[铁]";
		mes "除非你体内存在那个“芯片”，否则你就不是幻象中的一员。你现在明白了吗？你这孩子。";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "何？你听到了吗，菜鸟？它被称为“芯片”。";
		mes "这个愚蠢的东西把所有的话都从他嘴里说出来了。";
		mes "该死的混蛋，他们丢下我一个人了。";
		mes "你的意思是说，身处这一切之中的我只是一颗棋子，对吗？";
		next;
		cutin "ep16_eisen03",0;
		mes "[铁]";
		mes "哇……等等……！";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "现在做出愚蠢的表情是不是太晚了？";
		mes "你是自称的幻象精英成员吗？";
		mes "菜鸟！我要把这个从他脖子上扯下来，做一个追踪器来追踪那些“芯片”！";
		next;
		mes "[艾柳米娜]";
		mes "是的！我们开始做吧！向叛徒报仇！混乱！毁灭！复仇！落下！";
		close2;
		setpcblock PCBLOCK_NPC, true;
		npctalk "菜鸟！用那边那个东西！", "埃柳米娜#ep172_elmn02", bc_self;
		sleep2 1500;
		npctalk "什么？现在？", "新秀#ep172_rk02", bc_self;
		specialeffect EF_GRIMTOOTH, AREA, "Rookie#ep172_rk02";
		specialeffect EF_NPC_STOP, AREA, "Eisen Werner#ep172_eiz2";
		npctalk "这是什么……！啊...，", "艾恩·维尔纳#ep172_eiz2", bc_self;
		sleep2 1000;
		npctalk "被淘汰吧，混蛋！", "埃柳米娜#ep172_elmn02", bc_self;
		sleep2 1000;
		specialeffect EF_HIT4, AREA, "Eisen Werner#ep172_eiz2";
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "你怎么敢跟我玩？";
		mes "你怎么敢忽视伟大的Elyumina，队伍很短，不是吗？";
		next;
		cutin "162elena_02",2;
		mes "[埃琳娜·博尔科娃]";
		mes "噗哈哈哈哈哈！！！";
		mes "不，我看到了什么？！！！";
		mes "我以为我们的团队合作很好，但是我们不如我们的敌人？";
		next;
		cutin "16loo_02",1;
		mes "[新秀]";
		mes "我知道。";
		mes "米娜，你现在打算做什么？";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "为了保证我的研究权利，我会给你做一些你想要的东西。";
		mes "不，我只是不能忍受因为我是叛徒而受到这样的骚扰，对吧？";
		next;
		mes "[艾柳米娜]";
		mes "我将调查植入在这家伙体内的“芯片”，并创建一个响应该“芯片”的跟踪器。";
		mes "我之前一直在构建一些东西来保护自己免受那些猎心者的伤害。";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "如果不是我保护自己的生命，我也不会走到这一步。";
		mes "不管怎样，请给我一些我需要的材料，当我试图敲诈这个家伙时。这家伙又叫什么来着，艾森？";
		next;
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "你需要什么材料？";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "荧光液体10个，断剑10个，还有一些模块……";
		next;
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "你需要那么多吗？我希望你没有在想一些愚蠢的事情。我将从 Cor 那里获取模块。";
		mes "冒险家，你能帮我们拿下荧光液体和断剑吗？";
		next;
		mes "[新秀]";
		mes "我好像在污水处理厂里看到过荧光液体，如果你抓住黑色的心脏猎人侦察兵就可以得到它。";
		next;
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "那我就留在这里保护这里，等他醒来的时候，是不是应该有人留在这里再把他打晕？";
		mes "你们两个，就交给我吧。别担心这个地方。";
		ep17_2_main = 29;
		erasequest 18014;
		setquest 18015;
		close2;
		cutin "",255;
		npctalk "新人：那我就回来了！", "新秀#ep172_rk02", bc_self;
		sleep2 2000;
		removespecialeffect EF_NPC_STOP, SELF, "Eisen Werner#ep172_eiz2";
		cloakonnpcself( "Rookie#ep172_rk02" );
		end;
	}
	if (ep17_2_main == 30) {
		cutin "162elena_01",2;
		mes "[埃琳娜·博尔科娃]";
		mes "艾斯特可能就在前厅。";
		mes "你先去见艾斯特，我稍后再加入。";
		close3;
	}
	if (isbegin_quest(18019) > 0) {
		cutin "162elena_01",2;
		mes "[埃琳娜]";
		mes "哦，艾森·维尔纳在哪里？";
		mes "他被苔丝带走了。看来他们要亲自审问他了。";
		next;
		mes "[埃琳娜]";
		mes "他的余生将被关在某个地方。";
		mes "埃柳米娜也会是这样的。 Elyumina 很幸运，对吧？";
		next;
		mes "[埃琳娜]";
		mes "别担心这个地方。我会保证它的安全。";
		close3;
	}
	cutin "162elena_01",2;
	mes "[埃琳娜·博尔科娃]";
	mes "别担心这个地方。我好好地守护着它。";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18014) == 1" );
	end;
}

ba_in01,14,145,1	duplicate(dummy_cloaked_npc)	Rookie#ep172_rk02	4_M_ROOKIE

ba_in01,13,149,5	script(CLOAKED)	Eisen Werner#ep172_eiz2	4_M_EISEN,{
	if (ep17_2_main < 30)
		end;
	mes "他的所作所为受到了彻底的约束。";
	close;
}

ba_in01,15,147,3	script	Elyumina#ep172_elmn02	4_EP17_ELYUMINA,{
	if (checkweight(1201,3) == 0) {
		mes "你无法继续任务，因为你拥有太多物品。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main == 28) {
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "现在你安全了，你要做的就是将那些叛徒追到底。";
		mes "哈哈哈哈！！我将成为活到最后的胜利者。";
		close3;
	}
	if (ep17_2_main == 29) {
		if (countitem(7110) < 10 || countitem(7326) < 10) {
			cutin "ep171_elyumina04",2;
			mes "[艾柳米娜]";
			mes "嗯~模块模块~嗯~";
			mes "核心核心~嗯~";
			mes "你在干什么？为什么没有把我跟你说的材料带来？";
			close3;
		}
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "不错不错~嗯";
		mes "如果你在这里这样做...";
		next;
		mes "[艾柳米娜]";
		mes "杰作诞生！";
		mes "只要你发出信号，接收者就会~";
		next;
		specialeffect EF_GUIDEDATTACK, AREA, "Eisen Werner#ep172_eiz2";
		mes "[艾柳米娜]";
		mes "这是一个很好的收获！";
		mes "现在就带着这个去追捕猎心者的残余和叛徒吧。";
		next;
		select( "靠我自己吗？" );
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "当我拿着追踪器的时候你能一个人做吗？";
		mes "我简直不敢相信我被这个家伙抓住了。";
		mes "这对我伟大的埃柳米娜来说是一种耻辱。";
		next;
		cutin "162elena_01",0;
		mes "[埃琳娜·博尔科娃]";
		mes "呃，如果没有人可以一起去的话，那我呢？";
		mes "或埃斯特。";
		mes "上次行动你没有和埃斯特一起吗？";
		next;
		select( "埃斯特在哪里？" );
		mes "[埃琳娜·博尔科娃]";
		mes "她可能就在前厅。";
		mes "你来的时候没看到她吗？";
		mes "我也趁机把它们翻过来，稍后再加入你们。";
		next;
		mes "[埃琳娜·博尔科娃]";
		mes "首先，善于头脑风暴。哈哈哈哈。";
		mes "去见埃斯特吧。";
		delitem 7110,10;
		delitem 7326,10;
		ep17_2_main = 30;
		erasequest 18015;
		setquest 18016;
		getitem 1000092,1; //Elyumina Tracker
		getitem 1000103,10;
		getexp 1031336,0;	// getbaseexp_ratio?
		close3;
	}
	if (ep17_2_main == 32) {
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "我听说过这个消息。那些混蛋。";
		mes "不过，我们真的能把幻境的重要成员全部跑掉吗？";
		next;
		mes "[艾柳米娜]";
		mes "你像老鼠一样躲起来，晚上秘密行动，对吗？";
		mes "让我们看看他们能逃多远。";
		close3;
	}
	cutin "ep171_elyumina04",2;
	mes "[艾柳米娜]";
	mes "*咯咯笑*，我会去找那些叛徒。";
	mes "冒险家，*咯咯笑*";
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18015) == 1 && countitem(7110) >= 10 && countitem(7326) >= 10" );
	end;
}

ba_in01,51,157,3	script	Est#ep172_est01	4_F_ESTLOVELOY,{
	if (ep17_2_main == 30) {
		cutin "ep162_est01",2;
		mes "[是]";
		mes "冒险家，那是什么？";
		next;
		cutin "ep162_est02",2;
		mes "[是]";
		mes "嗬...，一个追踪器可以告诉你幻象猎手和猎心猎手在哪里？";
		mes "这有点诱人。";
		next;
		mes "[是]";
		mes "根据他们迄今为止的行为，他们似乎在日落时在黑暗中工作。";
		mes "等太阳落山了，再静静地进行手术吧。";
		next;
		cutin "ep162_est01",2;
		mes "[是]";
		mes "今天我要大幅减少夜间巡逻，这样他们就可以从洞穴里爬出来了。";
		mes "我要让宅邸的外部看起来空荡荡的。";
		next;
		mes "[是]";
		mes "我会把操作情况告诉经理。";
		mes "晚上不要在花园里闲逛，否则很危险。";
		next;
		mes "[是]";
		mes "这是一个明显的陷阱，但我认为他们不会放过这个机会。";
		next;
		mes "[是]";
		mes "如果您没有异议，我们就按原样进行。";
		mes "您应该为手术做好准备。";
		mes "等你准备好了就跟我说话。";
		ep17_2_main = 31;
		erasequest 18016;
		setquest 18017;
		close3;
	}
	if (ep17_2_main == 31) {
		switch( checkquest(18017,HUNTING) ) {
		case -1:
			end;	// shouldn't happen
		case 0:
		case 1:
			if (getcharid(1) < 1) {
				mes "^0000CD这是一个纪念地下城。^000000";
				mes "请创建一个聚会并重试。";
				mes "^0000CD可以使用 /organize partyname 命令创建队伍。^000000";
				close;
			}
			cutin "ep162_est01",2;
			mes "[是]";
			mes "我们走吧？";
			next;
			.@md_name$ = "Twilight Garden";
			if (select( "创建“" + .@md_name$ + "'.", "输入”" + .@md_name$ + "'.'" ) == 1) {
				if (!is_party_leader()) {
					mes "^4D4DFF这里是纪念地下城。";
					mes "你必须成为队伍领袖才能创建纪念地下城。^000000";
					close3;
				}
				if (instance_create(.@md_name$) == -3)
					dispbottom "The reservation of the instance '" + .@md_name$ + "' has failed due to an active instance.";
				cutin "ep162_est01",2;
				mes "[是]";
				mes "那么，我们就静静地进行吧。";
				close3;
			}
			if (instance_enter(.@md_name$) == IE_OK) {
				mapannounce "ba_in01", "" + strcharinfo(0) + " of the party, " + getpartyname( getcharid(1) ) + ", is entering the " + .@md_name$ + ".", bc_map, "0x00FF99";
				end;
			}
			cutin "ep162_est01",2;
			mes "[是]";
			mes "我们再等一会儿再出去吧……不能大意。";
			close3;
		case 2:
			cutin "ep162_est03",2;
			mes "[是]";
			mes "我们把囚犯交给阿尔法。";
			mes "顺便说一下，我准备了一个陷阱，用来引起骚动，用来捕捉非军官成员。";
			next;
			cutin "ep162_est01",2;
			mes "[是]";
			mes "他们不容易被抓到...";
			mes "Alpha还要对飞艇机库做更多的研究，你去看看吧。";
			next;
			mes "[是]";
			mes "我们暂时休息一下吧。";
			mes "叹息......你做得很好。";
			ep17_2_main = 32;
			erasequest 18017;
			setquest 18018;
			delitem 1000092,1;
			next;
			mes "[是]";
			mes "哦，我也选雷达。";
			mes "这对于寻找其他成员会有帮助。";
			close3;
		}
		end;
	}
	if (ep17_2_main == 32) {
		cutin "ep162_est01",2;
		mes "[是]";
		mes "我们要去调查飞艇机库。";
		mes "我要先向叛军的其他人解释一下，所以你们先去处理吧。";
		close3;
	}
	mes "[是]";
	mes "你能看到这里所有的酒吗？";
	mes "这里有很多奢华的葡萄酒可供选择。圣人喜欢酒吗？";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18016) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(18017,HUNTING) == 0 || checkquest(18017,HUNTING) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(18017,HUNTING) == 2" );
	end;
}


// ba_in01,26,266,3	script	Smart Elly#ep18ely01	4_EP17_TABLET,{
ba_in01,26,266,3	script	Smart Elly#ep172_ely01	4_EP17_TABLET,{
	if (checkweight(1000103,15) == 0) {
		mes "你无法继续任务，因为你拥有太多物品。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main < 32) {
		cutin "ep172_beta.bmp", 2;
		mes "[艾莉]";
		mes "你好，客人。";
		mes "我负责飞艇机库的信息。";
		mes "请叫我艾莉。";
		close3;
	}
	if (ep17_2_main == 32) {
		cutin "ep172_beta",2;
		mes "[艾莉]";
		mes "你好，客人。";
		mes "我负责飞艇机库的信息。";
		mes "请叫我艾莉。";
		next;
		mes "[艾莉]";
		mes "主人毁掉了这个地方之后，有一段时间我一直在做别的事情，但是……";
		next;
		mes "[艾莉]";
		mes "现在我应阿尔法的要求回来了。";
		mes "机库的事情请交给我吧，艾莉。";
		next;
		mes "[艾莉]";
		mes "“入侵者”的首领可以自由进入大师的收藏区域3……";
		mes "我回到这里来管理它。";
		npctalk "听起来很麻烦。", "", bc_self;
		next;
		mes "[艾莉]";
		mes "目前，我们正在跟踪收到事件报告后的预期路径。";
		mes "然而，追踪它并不容易，因为3号主系统完全断开。";
		next;
		mes "[艾莉]";
		mes "被“客人”称为“幻觉”的“入侵者”有 99.9% 的机会对系统进行了修改。";
		next;
		mes "[艾莉]";
		mes "亲爱的“客人”，你们在吗？";
		cloakoffnpcself( "Est#ep172_est02" );
		cloakoffnpcself( "Rookie#ep172_rk03" );
		next;
		cutin "ep162_est01",1;
		mes "[第一]";
		mes "嗯，是的。有什么大不了的？";
		mes "从昨晚开始你就过得很艰难。";
		next;
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "我告诉Alpha，目前状态下的可分析数据已经结束了。";
		next;
		cutin "ep172_beta",2;
		mes "[艾莉]";
		mes "是的。我已经发送数据了。";
		mes "目前，主人的收藏3没有收到任何信号，但我们捕捉到了一些异常信号。";
		next;
		mes "[艾莉]";
		mes "这个设施已经很久没有被使用了，但却被‘入侵者’秘密使用并且……";
		npctalk "信号异常？", "新秀#ep172_rk03", bc_self;
		next;
		mes "[艾莉]";
		mes "与宅邸外的某些地方有魔法交流的痕迹。";
		mes "这是一个间歇性信号。";
		next;
		cutin "ep162_est01",0;
		mes "[第一]";
		mes "什么，他们定期与外界保持联系吗？";
		mes "在哪里？企业？";
		next;
		cutin "ep172_beta",2;
		mes "[艾莉]";
		mes "据分析，这是一种单向接收。";
		mes "看来是在收集外界的报告……";
		next;
		mes "[艾莉]";
		mes "完整分析该代码需要一些时间，因为它被“入侵者”用于单向接收。";
		next;
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "那么，艾莉，我要请求一件事。";
		mes "继续接收信号，就好像“入侵者”头目还在这里一样。";
		next;
		cutin "ep162_est01",1;
		mes "[第一]";
		mes "这是一个聪明的举动，菜鸟。";
		mes "这样，我们就能够追踪到其他合作者。";
		next;
		cutin "ep172_beta",2;
		mes "[艾莉]";
		mes "我会照你说的去做。";
		mes "我们将维护“入侵者”的信息模式，并从宅邸外收集从他们的同伙那里收到的信息。";
		next;
		cutin "16loo_03",0;
		mes "[新秀]";
		mes "运气好的话，说不定能找到‘幻象’逃跑时的飞艇路线。";
		next;
		cutin "ep162_est01",1;
		mes "[第一]";
		mes "所以我们真的没有在这里捕捉到“幻觉”。";
		mes "除了那个孩子。";
		next;
		cutin "16loo_01",0;
		mes "[新秀]";
		mes "我们保护了宅子……难道就不能稍微满足一点吗？";
		mes "苔丝似乎正在努力与公司协调，所以这就是我们的全部了。";
		next;
		cutin "16loo_03",0;
		mes "[新秀]";
		mes "一如既往，你做得很好。";
		mes "我们已经很接近了，但下次我们会抓住剩下的人。";
		mes "我一直在收集这些，我会给你的，冒险家。";
		ep17_2_main = 33;
		completequest 18018;
		// note: unlock episode 18 main quest
		getitem 1000103,15;
		getexp 1547004,0;	// getbaseexp_ratio?
		next;
		cutin "ep162_est01",1;
		mes "[第一]";
		mes "我就住在宾馆，有什么需要就过来吧。";
		next;
		cutin "16loo_03",0;
		mes "[新秀]";
		mes "那我就让大家一起帮助Alpha吧。";
		mes "好好照顾艾莉！";
		next;
		cutin "ep172_beta",2;
		mes "[艾莉]";
		mes "不用担心这个地方。";
		mes "我和阿尔蒙德会处理好这件事。";
		mes "您可以放心。";
		close2;
		cutin "",255;
		cloakonnpcself( "Est#ep172_est02" );
		cloakonnpcself( "Rookie#ep172_rk03" );
		end;
	}
	if (ep18_main == 0 && BaseLevel >= 170) {
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "尚未收到常规信号。";
		mes "我们还在追踪您的收藏#3 的下落。";
		next;
		mes "[艾莉]";
		mes "不用担心。";
		mes "时间站在我们这边。";
		next;
		mes "[艾莉]";
		mes "我们会妥善分析这些信息，所以如果客人能清理掉留下的残留物就太好了……哦！";
		next;
		mes "[艾莉]";
		mes "请稍等一下，请留在这里。";
		mes "很快就会结束的。";
		mes "时间站在我们这边，对吗？";
		next;
		mes "[艾莉]";
		mes "等一下...";
		mes "...";
		mes "...";
		// note: progressbar_npc must be after "next" otherwise the client may crash
		// progressbar_npc "FFFF00",4;
		next;
		progressbar_npc "FFFF00",4;
		mes "[艾莉]";
		mes "一旦我们解密了代码，就会很快。";
		mes "最长的部分已经结束了，感觉一晃就过去了。";
		next;
		mes "[艾莉]";
		mes "^0000FF瑞秋^000000里有东西。";
		mes "当然，我只听说过雷切尔，但从未去过那里。";
		mes "那个地点的“合作者”似乎还没有意识到他们的领导人的动向。";
		next;
		mes "[艾莉]";
		mes "虽然我们还不知道师父宝藏3号的下落，但我们还需要继续收集从这里传来的信息……";
		mes "我们应该做什么？";
		next;
		select( "什么？" );
		mes "[" + strcharinfo(0) + "]";
		mes "我应该怎么办？";
		next;
		mes "[艾莉]";
		mes "合作者的位置已经大致确定。据报道，他们正在等待进一步指示，所以……";
		mes "既然如此，我们就应该在下一个指示之前彻底调查该区域……";
		cloakoffnpcself( "Rookie#ep181_rk01" );
		cloakoffnpcself( "Est#ep181_est01" );
		npctalk "菜鸟：你给我打电话了？", "新秀#ep181_rk01", bc_self;
		npctalk "Est：这比我想象的要快。", "东方#ep181_est01", bc_self;
		next;
		cutin "ep162_est01.bmp",1;
		mes "[是]";
		mes "好吧，所以雷切尔...";
		next;
		cutin "16loo_01.bmp",0;
		mes "[新秀]";
		mes "雷切尔...谁去？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "我们的意见有分歧吗？";
		next;
		cutin "16loo_03.bmp",0;
		mes "[新秀]";
		mes "并不真地...";
		mes "我想如果我们都去的话会有点尴尬。";
		next;
		cutin "ep162_est01.bmp",1;
		mes "[是]";
		mes "啊，我明白了。";
		mes "是的。如果叛军行动，可能会成为一个外交问题。";
		next;
		cutin "16loo_03.bmp",0;
		mes "[新秀]";
		mes "是的，如果是雷切尔就更是如此。";
		mes "……而豪宅和公司之间的问题还没有全部解决。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "我懂了。";
		next;
		mes "[艾莉]";
		mes "如果是这样，那么……";
		next;
		select( "他们为什么看着我？" );
		cutin "",255;
		mes "[" + strcharinfo(0) + "]";
		mes "我该怎么办？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "我们走吧，雷切尔。";
		npctalk "Rookie：所以这是一个地名，是吧？", "新秀#ep181_rk01", bc_self;
		npctalk "是：地名。", "东方#ep181_est01", bc_self;
		next;
		mes "[艾莉]";
		mes "但其他客人也有关系，不是吗？";
		mes "如果因管辖权发生冲突，处理起来就会很困难。";
		mes "你不知道要花多久，所以陪伴他们并不是一个好主意。";
		next;
		cutin "ep162_est01.bmp",1;
		mes "[是]";
		mes "听起来你是说你肯定会亲自去。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "是的。";
		mes "请稍等。";
		next;
		progressbar_npc "CCFF",7;
		mes "[艾莉]";
		mes "...";
		next;
		mes "[艾莉]";
		mes "你已获得授权。";
		npctalk "会议结束了。", "聪明的艾莉#ep18ely01", bc_self;
		next;
		mes "[艾莉]";
		mes "目的不是阻碍而是支持。";
		mes "我们会跟着，没有压力。";
		mes "我会把这个给你。";
		next;
		cutin "",255;
		mes "艾莉送的，是一个长得一模一样的娃娃，感觉有点被拉伸了。";
		mes "也许不是艾莉，但是……";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "我们还拥有能够进行远距离数据传输和接收的设备。";
		mes "因为我们就是这样的人。";
		next;
		mes "[艾莉]";
		mes "但现在情况有点不同了，所以我会给你一个测试版。";
		npctalk "别忘了随身携带。", "聪明的艾莉#ep18ely01", bc_self;
		next;
		cutin "16loo_02.bmp",0;
		mes "[新秀]";
		mes "呃……迷你艾莉？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "太好了，我就采用这个名字。";
		mes "我可以收集视觉和听觉等信息，并使用自己的资源像化身一样进行交流。";
		next;
		mes "[艾莉]";
		mes "没有单独的核心，因此我获得的信息不会在测试版之间共享，除非我更新它，";
		mes "如果失去了沟通，它就只是一个傀儡。";
		next;
		cutin "16loo_01.bmp",0;
		mes "[新秀]";
		mes "如果您需要我们的支持，请致电我们。";
		mes "我会像艾莉一样毫无保留地支持你，除了人力。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "是的，我会这么做。";
		mes "请照顾好自己。";
		npctalk "我们一起去的时候互相打招呼很奇怪。", "聪明的艾莉#ep18ely01", bc_self;
		next;
		mes "[艾莉]";
		mes "信号原点的近乎精确的坐标是......";
		mes "大约<NAVI>[这里]<INFO>rachel,182,176,0,101,0</INFO></NAVI>左右。";
		ep18_main = 1;
		setquest 8681;
		getitem 400127,1;	// Ep18_Mini_Elly
		close3;
	}
	if (ep18_main == 1) {
		mes "[艾莉]";
		mes "安全前往雷切尔。";
		close;

	}
	cutin "ep172_beta",2;
	mes "[艾莉]";
	mes "尚未收到间歇信号。";
	mes "主人的藏品3的下落也在同时追踪。";
	next;
	mes "[艾莉]";
	mes "不用担心。";
	mes "时间站在我们这边。";
	next;
	mes "[艾莉]";
	mes "我和阿尔法会好好分析这些信息，所以我希望你们能清理掉入侵者的残余。";
	close3;

OnInit:
	// note: commented (no questinfo at this point)
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18018) == 1" );

	// check for episode 17.2 completion
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8681) == 0 && isbegin_quest(18018) == 2 && BaseLevel >= 170" );
	end;
}

ba_in01,22,262,5	duplicate(dummy_cloaked_npc)	Est#ep172_est02	4_F_ESTLOVELOY
ba_in01,24,262,7	duplicate(dummy_cloaked_npc)	Rookie#ep172_rk03	4_M_ROOKIE

ba_maison,33,220,0	script	#ep172_main_evt02	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_main == 33) {
		cloakoffnpcself( "Philofontes#ep172_tes02" );
		cloakoffnpcself( "Crux#ep172_clx02" );
		end;
	}
	end;
}

ba_maison,36,221,3	script(CLOAKED)	Philofontes#ep172_tes02	4_M_PHILOFONTES,{
	mes "[菲洛芬]";
	mes "很高兴再次见到你。";
	mes "这里的克鲁克斯先生来自符文米德加特。";
	mes "我认为他来这里是为了传达一些重要消息。";
	close;
}

ba_maison,38,219,5	script(CLOAKED)	Crux#ep172_clx02	4_EP16_CRUX,{
	if (ep17_2_main == 33) {
		cutin "ep16_crux_findel02",2;
		mes "[症结]";
		mes "冒险家！好久不见！";
		mes "我偶尔会通过宫廷巫师听到消息……";
		next;
		mes "[症结]";
		mes "如果你的行程有空，你愿意跟我一起去普隆德拉宫吗？";
		next;
		select( "发生了什么？" );
		mes "[症结]";
		mes "我们不能让王位空置太久。";
		mes "感谢您上次访问泰拉荣耀，加冕仪式即将举行。";
		next;
		mes "[症结]";
		mes "王室里的所有人都想向冒险家的你表示感谢。";
		mes "当然，连我家的女士们也是如此。";
		mes "如果我们现在离开...";
		next;
		mes "[症结]";
		mes "我们将准时抵达参加加冕典礼。";
		mes "我是来接你的。";
		next;
		mes "[症结]";
		mes "我们走吧？";
		ep17_2_main = 34;
		setquest 18021;
		next;
		if (select( "我们现在就出发吧。", "我们稍后再出发吧。" ) == 2) {
			mes "[症结]";
			mes "我懂了。好吧，毕竟你的日程很忙。";
			mes "有地方可以让我等吗？";
			next;
			cutin "ep16_tes01",0;
			mes "[菲洛芬]";
			mes "宅邸北侧设有迎宾馆。";
			mes "叛军目前正在使用它作为休息室，你可以在那里等吗？";
			next;
			cutin "ep16_crux_findel02",2;
			mes "[症结]";
			mes "是这样吗？";
			mes "那我就在宾馆等着。";
			mes "稍后见，" + strcharinfo(0) + ".";
			npctalk "我要走了。";
			close2;
			cutin "",255;
			cloakonnpcself( "Philofontes#ep172_tes02" );
			cloakonnpcself( "Crux#ep172_clx02" );
			end;
		}
		cutin "ep16_tes01",0;
		mes "[菲洛芬]";
		mes "我会告诉其他人这件事。";
		mes "稍后见。";
		next;
		cutin "ep16_crux_findel02",2;
		mes "[症结]";
		mes "那么，我们走吧。";
		close2;
		cutin "",255;
		cloakonnpcself( "Philofontes#ep172_tes02" );
		cloakonnpcself( "Crux#ep172_clx02" );
		warp "prt_cas",138,342;
		end;
	}
	end;
}

ba_in01,37,138,0	script	#ep172_main_evt03	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (ep17_2_main == 34)
		cloakoffnpcself( "Crux#ep172_clx01" );
	end;
}

ba_in01,48,146,3	script(CLOAKED)	Crux#ep172_clx01	4_EP16_CRUX,{
	if (ep17_2_main == 34) {
		cutin "ep16_crux_findel02",2;
		mes "[症结]";
		mes "这里既舒适又美好。";
		mes "Nerius 家族的主屋里还有一个美丽的休息区。";
		mes "当我们下班的时候，我们通常一起玩骰子。";
		next;
		mes "[症结]";
		mes "好吧，我们现在就走吗？";
		next;
		if (select( "我们现在就出发吧。", "我们稍后再出发吧。" ) == 2) {
			mes "[症结]";
			mes "我会等你。";
			close3;
		}
		mes "[症结]";
		mes "那么，我们走吧。";
		close2;
		cutin "",255;
		cloakonnpcself();
		warp "prt_cas",138,342;
		end;
	}
	end;
}

prt_cas,138,342,0	script	#ep172_main_evt04	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_main == 34) {
		setpcblock PCBLOCK_NPC, true;
		sleep2 2000;
		specialeffect2 EF_DEVIL10;
		setpcblock PCBLOCK_NPC, false;
		mes "我和克鲁克斯一起来到了普隆德拉宫，宫殿里充满了一种奇异的兴奋。";
		next;
		mes "大厅里的人，都是我们之前见到的皇室成员和皇室贵族。";
		next;
		cutin "ep171_coronation",4;
		mes "在红地毯的尽头，有一个年轻男子跪在地上，头上戴着王冠。";
		next;
		mes "他恢复了失去的荣耀，恢复了名誉。";
		next;
		mes "他曾经以痛苦为名，一无所有。";
		next;
		mes "上次和我在一起的时候，他只见过这个世界。";
		next;
		mes "头戴一顶名为荣耀的王冠，头朝向大地。";
		next;
		mes "一旦宣布，新的时间就开始了。";
		next;
		mes "当我站在时间流逝的中间时，我的心开始剧烈跳动。";
		next;
		mes "这证明了我一直走的路没有错。";
		next;
		mes "在漫长的冒险结束时，站在王座前的那个年轻人，是由我的手引导的。";
		next;
		mes "知道未选择的悲伤，知道无法逆转的过去的痛苦。";
		next;
		mes "我知道你会阻碍未来，你不自信并且知道如何寻求帮助。";
		next;
		mes "你会成为一个伟大的国王。";
		ep17_2_main = 35;
		completequest 18021;
		close2;
		cutin "",255;
		removespecialeffect2 EF_DEVIL10;
		end;
	}
	end;
}

prt_cas,140,344,3	script	Chamberlain Bell#ep172	4_M_RUSMAN1,{
	if (ep17_2_main < 35)
		end;
	mes "[铃]";
	mes "我一直在等你回来。";
	mes "我该带你去哪里？";
	next;
	if (select( "出去吧。", " 谈谈。" ) == 2) {
		mes "[铃]";
		mes "我完全没想到事情会变成这样。";
		close;
	}
	mes "[铃]";
	mes "那么，我们走吧。";
	close2;
	warp "prt_cas",215,160;
	end;
}

prt_cas,325,263,3	script	Nyhill M. Heine#ep172	4_EP17_NIHIL_K,{
	if (ep17_2_main < 35)
		end;
	if (ep17_2_main == 35) {
		cutin "ep171_nihil01",2;
		mes "[尼希尔]";
		mes "多么令人惊喜的客人啊！";
		mes "没想到我们会以这样的方式相遇。";
		mes "感谢您在百忙之中赶来。";
		next;
		select( "你看起来不错。" );
		mes "[尼希尔]";
		mes "感觉自己穿了别人的衣服";
		mes "我还在想我是否真的能做到这一点。";
		mes "我的意思是，这样真的好吗？";
		next;
		select( "你会做得很好。" );
		cutin "ep171_nihil02",2;
		mes "[尼希尔]";
		mes "如果你这么说，那我就相信你。";
		mes "如果有一天我误入歧途，你会阻止我的，对吗？";
		next;
		mes "[尼希尔]";
		mes "我相信你会的。";
		mes "因为你是一个正直的人。";
		mes "还...";
		next;
		mes "[尼希尔]";
		mes "您可以随时自由休息。";
		mes "毕竟，你并不孤单。";
		ep17_2_main = 36;
		setquest 18020;
		completequest 18020;
		close3;
	}
	cutin "ep171_nihil01",2;
	mes "[尼希尔]";
	mes "我现在只能见到你一会儿。";
	mes "我很快就要接手国王的职责了。";
	next;
	cutin "ep171_nihil02",2;
	mes "[尼希尔]";
	mes "所以，保持健康，如果有一天你需要帮助，我会竭尽全力帮助你。";
	close3;
}

// End of main quest


ba_in01,14,257,5	script	Automatic Doll Guard Beta#172_hangar_0	4_EP17_GUARD_B,{
	npctalk "你不必担心。这个地方守卫得很严密。";
	end;
}

ba_in01,30,252,5	script	Automatic Doll Guard Beta#ep172_hangar_1	4_EP17_GUARD_B,{
	npctalk "我们有24小时监控。";
	end;
}

ba_in01,30,248,3	script	Automatic Doll Guard Beta#ep172_hangar_2	4_EP17_GUARD_B,{
	npctalk "放心。娃娃们甚至不用眨眼睛就能进行监控。", "自动娃娃守卫 Beta#ep172_hangar_1";
	end;
}



// Sidequest quest : Exploring bathhouse - Step 1
ba_in01,384,38,3	script	Shrine#172ba01	4_EP17_BUCKETS,5,5,{
	if (ep17_2_main < 10) {
		mes "[神殿]";
		mes "抱歉，由于内部原因，浴室目前已关闭，我们无法保证重新开放的时间。请稍后再回来。如果您想享受安静的沐浴，请使用客房附带的私人浴室。";
		close;
	}
	if (ep17_2_bath == 0) {
		cloakoffnpcself( "Rookie#172ba01" );
		cloakoffnpcself( "Denny#172ba01" );
		cloakoffnpcself( "Molar#172ba01" );
		cloakoffnpcself( "Canine#172ba01" );
		cloakoffnpcself( "Danae#172ba01" );
		cloakoffnpcself( "Magenta#172ba01" );
		cloakoffnpcself( "Cyan#172ba01" );
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "我道歉。 Varmundt Mansion 的政策是防止客人陷入^0000CD危险情况^000000。请再等一下。";
		npctalk "为什么要花这么长时间去寻找？让我们进去吧。我可以更快找到它。", "丹尼#172ba01", bc_self;
		npctalk "我们是这个领域的专家。", "磨牙#172ba01", bc_self;
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "我们不要只顾自己的危险，请让我们知道。";
		npctalk "当我们站在这里时，时间就在流逝。", "犬类#172ba01", bc_self;
		next;
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "抱歉，我们还没有弄清楚。此次搜寻的目的是调查是否存在风险因素。请再等一下。请理解这是一个程序。";
		npctalk "如果出了问题，我会追究你的责任！", "青色#172ba01", bc_self;
		npctalk "我们也有这个程序！你正在中断操作！", "丹尼#172ba01", bc_self;
		next;
		mes "[神殿]";
		mes "我再说一遍，除非确认你的安全，否则你不能进去。一旦收到同事的来信，我就会满足你的要求。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我们被告知要尽可能配合宅邸的自动人偶。但如果最后你不采取行动，我们就只能使用武力了，不是吗？";
		next;
		if (select( "新秀？这是怎么回事？", "看起来很复杂，我就略过了。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[神殿]";
			mes "然后，我们别无选择，只能叫警卫。";
			next;
			cutin "16loo_03",2;
			mes "[新秀]";
			mes "嗯...我该怎么办？";
			close3;
		}
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "哦，冒险者也来了。如果你是来洗澡的，恐怕一时半会儿就用不了了。看看那个。自动人偶挡住了入口。";
		next;
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "有鬼从这里出来。你也应该注意一下自己。";
		next;
		select( "鬼？？" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我还不知道它是什么。如你所知，我们一进入宅邸，大家就分散开来，检查设施。";
		mes "侦察队去澡堂检查是否有幻象残留，回来时已经死了。澡堂内有^0000CD有东西^000000。";
		npctalk "不是鬼魂，只是府邸周围的阴谋！", "丹尼#172ba01", bc_self;
		npctalk "这是一个鬼魂。一定是鬼！", "品红#172ba01", bc_self;
		npctalk "有东西。太可怕了。我很兴奋！", "青色#172ba01", bc_self;
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "必须弄清楚里面到底是什么，是不是幻象的诡异恶作剧，所以这次^0000CD戈妮^000000进去了。一个人静静地移动就完美了。";
		next;
		select( "那你为什么在这里……？" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "嗯……高妮进去已经有一段时间了，却还没有出来。如果像戈涅这样的实力的人超过期限还没有出来，那就说明有问题了。";
		next;
		mes "[新秀]";
		mes "我来这里是为了按照程序找出危险的东西，因为我确信存在未知的风险。我们不应该让未知的风险干扰我们在这座宅邸中的使命。";
		npctalk "有什么东西吗？", "达娜厄#172ba01", bc_self;
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "我们派进来的部队失去了……我们应该更加小心。正如你所看到的，他们正在阻止我们。";
		npctalk "Gonie只是一种简单的力量吗？在这之中损失太冷了。", "磨牙#172ba01", bc_self;
		npctalk "他还活着。这就是我的直觉告诉我的！", "丹尼#172ba01", bc_self;
		npctalk "我们快点进去找他吧。冒险家也来了，我们可以更快找到他！", "品红#172ba01", bc_self;
		next;
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "抱歉，但我们现在仍在寻找。结束后，请听听结果并据此做出决定。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "现在这座府邸里，存在着一定的危险。多还是少，对我们来说是非常重要的事情。";
		next;
		mes "[新秀]";
		mes "我们需要首先检查风险是否是超自然的，或者是^0000CD幻象^000000。你能告诉我更多吗？也许这就是幻象来到这座宅邸的原因。";
		mes "否则的话，很可能会落入他们的手中。";
		next;
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "我完全明白你想说的。但程序...";
		mes "哦！那个去寻找的人要回来了。与他们交谈。";
		next;
		cloakoffnpcself( "Boiler#172ba01" );
		cloakoffnpcself( "Sweep#172ba01" );
		cutin "ep172_beta",0;
		mes "[锅炉]";
		mes "错了，你们都错了。没有危险。";
		next;
		cutin "ep172_beta",1;
		mes "[扫]";
		mes "据说没有客人死亡。他们真的进去了吗？";
		npctalk "不！如何！你可能根本不知道他们的管理中潜藏着哪些危险！", "丹尼#172ba01", bc_self;
		npctalk "很多人都看到了。", "青色#172ba01", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "里面真的没有失踪人员吗？";
		next;
		cutin "ep172_beta",1;
		mes "[扫]";
		mes "也许他逃跑了。";
		npctalk "你只是被愚弄了。", "锅炉#172ba01", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "如果是的话，我会早点回来。即使不是，我也确信我会从分散在宅邸周围的工作人员那里得到联系信息。";
		next;
		select( "有什么猜测吗？" );
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "在你所说的情况中，最可疑的是入侵者的行为。";
		next;
		cutin "ep172_beta",0;
		mes "[锅炉]";
		mes "神社，不是吗？深绿色的长发^0000CD头发^000000。它很久以前就出现了。";
		npctalk "头发……有这个可能。和澡堂里的东西一点都不搭。", "", bc_self;
		next;
		select( "头发？" );
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "正如锅炉所说。从很久以前开始，就经常发现不知名的毛发。也许头发和洗澡的未知危险是一样的。";
		npctalk "你现在在说什么？", "丹尼#172ba01", bc_self;
		next;
		cutin "ep172_beta",1;
		mes "[扫]";
		mes "我觉得还是让人类客人进来自己搜查比较好。";
		mes "我们没有感觉到未知的危险，也未能找到人类客人。也许是因为我们无法像人类那样感觉。";
		next;
		cutin "ep172_beta",0;
		mes "[锅炉]";
		mes "你说得对。人类有感官。也许我们会发现我们错过了作为自动娃娃的机会。也许这次我们就能认出那是谁的头发了。";
		next;
		cutin "ep172_beta",1;
		mes "[扫]";
		mes "我们已经听说过失踪人员的特征，但我相信人类客人可能会更好地认出他们。";
		npctalk "这里有一个会思考的自动娃娃。", "青色#172ba01", bc_self;
		next;
		cutin "ep172_beta",2;
		mes "[神殿]";
		mes "……说得有道理。好的。";
		mes "从现在开始，我们将向客人开放浴室。请在搜寻时特别注意，因为有情况和证词怀疑存在不明生物。";
		next;
		mes "[神殿]";
		mes "如果您在浴池内看到怪物，请不要急于接触它并告诉周围的人偶。如果您需要任何帮助寻找失踪人员，请告诉我。";
		next;
		mes "[神殿]";
		mes "那么，我带你进去。";
		npctalk "他们互相争斗，然后突然爆发。", "丹尼#172ba01", bc_self;
		next;
		mes "[神殿]";
		mes "好吧，在我们进去之前，我想问你一件事。";
		mes "大浴场Meditatio禁止使用《水球术》和《Aqua Benedicta》《CLR1》等技能。";
		mes "我请求您的理解。";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "有……你知道的，幸运儿。嗯……嗯……别误会我的意思。如果Lucky留在这里不是更好吗？";
		npctalk "是的，没错。我们会去找戈妮。你最好留在这里。", "青色#172ba01", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你在说什么？我擅长寻找丢失的物品。我可能不足以胜任外勤任务，但至少我可以保护自己。你就这么不信任我吗？";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "不！！幸运的是你是最棒的！最好的！！你知道我们真的不能没有Lucky！但...";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "好的。我会留下来。然后我会环视入口区域。无论如何，我必须检查谁进出。浴室只有一个入口。";
		next;
		select( "我跟你一起去。" );
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "当冒险家和我们在一起时，我们会感到安心。";
		mes "然后，来<NAVI>[里面]<INFO>ba_bath,165,43,0,101,0</INFO></NAVI>。如果我们发现任何东西，我们就会发出信号。";
		ep17_2_bath = 1;
		setquest 17363;
		close2;
		cutin "",255;
		cloakonnpcself( "Rookie#172ba01" );
		cloakonnpcself( "Denny#172ba01" );
		cloakonnpcself( "Molar#172ba01" );
		cloakonnpcself( "Canine#172ba01" );
		cloakonnpcself( "Danae#172ba01" );
		cloakonnpcself( "Magenta#172ba01" );
		cloakonnpcself( "Cyan#172ba01" );
		cloakonnpcself( "Boiler#172ba01" );
		cloakonnpcself( "Sweep#172ba01" );
		end;
	}
	if (ep17_2_bath < 13) {
		mes "[神殿]";
		mes "继续<NAVI>[里面]<INFO>ba_bath,165,43,0,101,0</INFO></NAVI>。如果您在浴池内看到怪物，请不要急于接触它并告诉周围的人偶。";
		navigateto("ba_bath",165,43);
		next;
		mes "^EE0000[ ��注意�� ]^000000";
		mes "为了保护和管理设施，大浴场Meditatio禁止使用《水球》和《Aqua Benedicta》等技能。";
		close;
	}
	mes "[神殿]";
	mes "你好。请尽情使用澡堂，舒适地缓解疲劳。";
	next;
	mes "^EE0000[ ��注意�� ]^000000";
	mes "为了保护和管理设施，大浴场Meditatio禁止使用《水球》和《Aqua Benedicta》等技能。";
	close;

OnTouch:
	if (ep17_2_main >= 9 && ep17_2_bath == 0) {
		cloakoffnpcself( "Rookie#172ba01" );
		cloakoffnpcself( "Denny#172ba01" );
		cloakoffnpcself( "Molar#172ba01" );
		cloakoffnpcself( "Canine#172ba01" );
		cloakoffnpcself( "Danae#172ba01" );
		cloakoffnpcself( "Magenta#172ba01" );
		cloakoffnpcself( "Cyan#172ba01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 9 && ep17_2_bath == 0" );
	end;
}

ba_in01,381,39,5	duplicate(dummy_cloaked_npc)	Rookie#172ba01	4_M_ROOKIE
ba_in01,379,36,7	duplicate(dummy_cloaked_npc)	Danae#172ba01	4_F_REBELLION2
ba_in01,385,41,3	duplicate(dummy_cloaked_npc)	Canine#172ba01	4_F_REBELLION3
ba_in01,383,41,5	duplicate(dummy_cloaked_npc)	Denny#172ba01	4_M_REBELLION3
ba_in01,379,42,5	duplicate(dummy_cloaked_npc)	Magenta#172ba01	4_M_GUNSLINGER2
ba_in01,379,38,5	duplicate(dummy_cloaked_npc)	Molar#172ba01	4_M_REBELLION
ba_in01,383,36,7	duplicate(dummy_cloaked_npc)	Cyan#172ba01	4_F_REBELLION3
ba_in01,384,40,3	duplicate(dummy_cloaked_npc)	Boiler#172ba01	4_EP17_BASIC_B
ba_in01,385,37,3	duplicate(dummy_cloaked_npc)	Sweep#172ba01	4_EP17_CLEANER

// Sidequest quest : Exploring bathhouse - Step 2, 5
ba_bath,165,43,3	script	Shrine#172ba02	4_EP17_BUCKETS,5,5,{
	if (checkweight(1201,3) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_bath == 0) {
		cutin "ep172_beta",0;
		mes "[神殿]";
		mes "Varmundt Mansion 的浴室久负盛名。瓦蒙特是一个重视在疲惫的一天结束后休息的人。";
		next;
		mes "[神殿]";
		mes "他喜欢洗澡，因为洗澡可以缓解疲劳，为明天补充能量，整理思绪，改善血液流动，补充皮肤水分。";
		next;
		mes "[神殿]";
		mes "由于他对各种沐浴方法的兴趣，扩大了澡堂，澡堂扩大到了今天的规模。豪宅的客人使用过澡堂，并对澡堂的设施赞不绝口。";
		next;
		mes "[神殿]";
		mes "因此，宅邸的澡堂名声大噪。希望您能在这座历史悠久的澡堂里得到补充。";
		close3;
	}
	if (ep17_2_bath == 1) {
		cloakoffnpcself( "Rookie#172ba02" );
		cloakoffnpcself( "Denny#172ba02" );
		cloakoffnpcself( "Molar#172ba02" );
		cloakoffnpcself( "Canine#172ba02" );
		cloakoffnpcself( "Danae#172ba02" );
		cloakoffnpcself( "Magenta#172ba02" );
		cloakoffnpcself( "Cyan#172ba02" );
		cutin "ep172_beta",0;
		mes "[神殿]";
		mes "请来吧，你的聚会已经到了。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "大家都聚集了吗？两人一组，遵循搜查危险物品和搜查失踪人员的程序。发现任何东西就发送信号，集合区在休息室。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "我们应该把重点放在寻找危险物品而不是失踪人员上。这个危险生物的身份尚未被揭露，各种证词和情况推测它是人类、怪物、自动人偶和超自然生物。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "丹尼和卡尼恩。这些人类很可能是幻象残骸的个体或群体，或者是第三方。他们也有可能使用已知出口之外的其他出口，因此请仔细检查设施。";
		npctalk "好的。", "丹尼#172ba02", bc_self;
		npctalk "我们走吧。", "犬类#172ba02", bc_self;
		next;
		cloakonnpcself( "Denny#172ba02" );
		cloakonnpcself( "Canine#172ba02" );
		mes "[新秀]";
		mes "青色和达那厄。接下来是怪物。因为是澡堂，所以推测里面有水生魔物之类的东西。所以重点关注浴缸和管道。";
		npctalk "交给我吧。", "青色#172ba02", bc_self;
		npctalk "罗杰！", "达娜厄#172ba02", bc_self;
		next;
		cloakonnpcself( "Cyan#172ba02" );
		cloakonnpcself( "Danae#172ba02" );
		mes "[新秀]";
		mes "如果是坏掉的自动人偶，说明你对这座宅子很熟悉，所以你得先听浴室经理的。我会做这个。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "最后但并非最不重要的一点是，如果是鬼的话……";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "我知道！！我去看看！在天花板上！和排水沟！";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "... 好的。品红。和莫拉一起去吧。";
		npctalk "知道了！", "品红#172ba02", bc_self;
		next;
		cloakonnpcself( "Magenta#172ba02" );
		cloakonnpcself( "Molar#172ba02" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "冒险家和我一样的其他管理者会面，检查其他自动人偶是否有可疑之处。我得先拿到图纸。";
		next;
		cutin "",255;
		specialeffect EF_DRAGONSMOKE, AREA, "Rookie#172ba02";
		specialeffect EF_PEONG, AREA, "Rookie#172ba02";
		mes "清";
		next;
		specialeffect EF_DRAGONSMOKE, AREA, "Rookie#172ba02";
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "我想我应该从这个^0000CD蒸汽^000000开始。";
		mes "太模糊了，我几乎看不清东西。";
		next;
		select( "我要去锅炉房。" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你会？我会从这里的神殿拿走蓝图。冒险者，请前往<NAVI>[锅炉房]<INFO>ba_bath,286,68,0,101,0</INFO></NAVI>并要求他们关闭。我很快就能追上你。";
		ep17_2_bath = 2;
		erasequest 17363;
		setquest 17364;
		close3;
	}
	if (ep17_2_bath < 4) {
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你会？我会从这里的神殿拿走蓝图。冒险者，请前往<NAVI>[锅炉房]<INFO>ba_bath,286,68,0,101,0</INFO></NAVI>并要求他们关闭。我很快就能追上你。";
		close3;
	}
	if (ep17_2_bath == 4) {
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我通常都是一个人去执行任务，但这么长时间没有他的消息还是第一次。所以大家都在焦急地寻找他。发生了一些事情。赶紧想一想。";
		next;
		cutin "ep172_beta",0;
		mes "[神殿]";
		mes "就算你这么说，我也无话可说。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "嗯？冒险家？锅炉好像停了，你打算去哪里？";
		next;
		select( "你不是说我们应该去湖边吗？" );
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "WHO？ ... 我？冒险家，你真的^0000CD看到我^000000了吗？";
		next;
		select( "想想看..." );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "语气显得僵硬而困惑……那绝对不是我。我猜这是出现在这个澡堂里的未知实体。";
		mes "这可真是让人头疼啊。我不敢相信它可以模仿别人的外表。不，在某种程度上，它比那更好。";
		next;
		mes "[新秀]";
		mes "看我叫你去湖边，我想它是想把你从澡堂里弄出来吧。所以它不是一个超自然的存在。";
		next;
		mes "[新秀]";
		mes "不管是什么，我们都必须在事情陷入混乱之前解决它。";
		next;
		cutin "",255;
		mes "窥视-";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "冒险家，我们去<NAVI>[休息室]<INFO>ba_bath,203,58,0,101,0</INFO></NAVI>吧。";
		ep17_2_bath = 5;
		erasequest 17366;
		setquest 17367;
		close2;
		cutin "",255;
		cloakonnpcself( "Rookie#172ba02" );
		end;
	}
	if (ep17_2_bath == 5) {
		cutin "ep172_beta",0;
		mes "[神殿]";
		mes "你们的队伍去了<NAVI>[休息室]<INFO>ba_bath,203,58,0,101,0</INFO></NAVI>。";
		close2;
		cutin "",255;
		cloakonnpcself( "Rookie#172ba02" );
		end;
	}
	if (ep17_2_bath == 6) {
		cutin "ep172_beta",0;
		mes "[神殿]";
		mes "对该生物的搜寻进展如何？";
		close3;
	}
	if (ep17_2_bath < 12) {
		cutin "ep172_beta",0;
		mes "[神殿]";
		mes "你不是在做手术吗？";
		close3;
	}
	cutin "ep172_beta",0;
	mes "[神殿]";
	mes "使用澡堂有什么不方便吗？";
	close3;

OnTouch:
	if (ep17_2_bath == 1) {
		cloakoffnpcself( "Rookie#172ba02" );
		cloakoffnpcself( "Denny#172ba02" );
		cloakoffnpcself( "Molar#172ba02" );
		cloakoffnpcself( "Canine#172ba02" );
		cloakoffnpcself( "Danae#172ba02" );
		cloakoffnpcself( "Magenta#172ba02" );
		cloakoffnpcself( "Cyan#172ba02" );
		end;
	}
	if (ep17_2_bath == 4) {
		cloakoffnpcself( "Rookie#172ba02" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17363) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17366) == 1" );
	end;
}

ba_bath,162,43,5	duplicate(dummy_cloaked_npc)	Danae#172ba02	4_F_REBELLION2
ba_bath,163,39,7	duplicate(dummy_cloaked_npc)	Canine#172ba02	4_F_REBELLION3
ba_bath,163,43,5	duplicate(dummy_cloaked_npc)	Denny#172ba02	4_M_REBELLION3
ba_bath,167,40,1	duplicate(dummy_cloaked_npc)	Magenta#172ba02	4_M_GUNSLINGER2
ba_bath,165,40,7	duplicate(dummy_cloaked_npc)	Molar#172ba02	4_M_REBELLION
ba_bath,163,41,7	duplicate(dummy_cloaked_npc)	Cyan#172ba02	4_F_REBELLION3

ba_bath,166,42,3	script(CLOAKED)	Rookie#172ba02	4_M_ROOKIE,{
	if (ep17_2_bath < 4) {
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你会？我会从这里的神殿拿走蓝图。冒险者，请前往<NAVI>[锅炉房]<INFO>ba_bath,286,68,0,101,0</INFO></NAVI>并要求他们关闭。我很快就能追上你。";
		close3;
	}
	end;
}

// Sidequest quest : Exploring bathhouse - Step 3
// Daily : Boiler's request
ba_bath,286,68,5	script	Boiler#172ba02	4_EP17_BASIC_B,{
	if (checkweight(1201,3) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_bath == 2) {
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "呃，人类客人不应该随便进来。这个地方不太耐用。";
		next;
		cutin "",255;
		select( "我有事要检查。" );
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "嗯...我无法阻止你。但要小心管道。当你触摸错误的地方时，它会融化你的皮肤。";
		mes "但有什么意义呢？我们没有太多时间。";
		next;
		cutin "",255;
		select( "请关闭锅炉。" );
		mes "[锅炉]";
		mes "锅炉？ ^0000CD已经停止了^000000，对吗？这很奇怪。蒸汽还在冒出来吗？锅炉不工作吗？看看这个。我在停车时检查了一下。";
		mes "是因为水还没有凉吗？无论如何，我已经把锅炉关掉了。";
		next;
		cloakonnpcself();
		cloakoffnpcself( "Boiler#172ba03" );
		cutin "",255;
		mes "[锅炉]";
		mes "我认为这将是完美的。哦...它并不完美，但是很有用。";
		next;
		cloakonnpcself( "Boiler#172ba03" );
		cloakoffnpcself();
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "你来这里的路上经常看到这样的情况吗？";
		next;
		cutin "",255;
		select( "不，我以前从未见过。" );
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "嗯……我在来的路上捡到的，看起来像是一个自动娃娃配件。那里有很多人，我以为他们遍布各处。我本来打算把它捡起来修理一下。";
		next;
		mes "[锅炉]";
		mes "顺便说一句，破损的娃娃仍然出现故障。为什么即使我们修复了坏掉的自动娃娃，坏掉的娃娃仍然出现？错误会自我复制吗？";
		mes "我什至无法好好清理。但无论如何我都必须这样做。我得谢谢你。";
		npctalk "我经常打扫，但数量很多。", "扫#172ba02", bc_self;
		next;
		mes "[锅炉]";
		mes "……你不去吗？我已经关掉锅炉了。这不是你来这里的原因吗？";
		next;
		cutin "",255;
		select( "是自动娃娃吗？" );
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "什么？怪物？";
		next;
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "我不这么认为。你有没有想过我们会首先注意到它（如果是的话）？";
		next;
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "那些东西是入侵者的杰作……他们希望事情是这样的。";
		npctalk "邪恶的入侵者。入侵者摧毁了许多设施，甚至我们中的一些人也被毁了。我们正在恢复一切。", "", bc_self;
		next;
		cutin "",255;
		select( "对于怪物你有什么看法呢？" );
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "也许是锅炉^000000中的^0000CD幽灵。";
		next;
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "你在说什么？";
		next;
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "鬼魂。你不知道什么是鬼吗？你知道" + strcharinfo(0) + "吗？它是一种已经死亡的东西，没有任何物理形态而漂浮着。";
		mes "这里发生的事情和幽灵人类所说的非常相似。";
		next;
		cutin "",255;
		select( "那么，鬼魂的身份……" );
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "嗯...我不知道你是这么想的。啊~我还以为是人鬼呢。但不，我想是在我来之前管理这个地方的自动人偶。";
		mes "当时那只是一个小型的洗澡锅炉，这么多洗澡的水经常会超载。它无法承受高压。";
		next;
		mes "[锅炉]";
		mes "无论如何，当我正在做的时候它爆炸了，另一个自动人偶也被烧毁了。也许就是那个自动娃娃。";
		mes "不知道那个人偶的数据是否被以某种未知的方式刻印了。在这个锅炉里。";
		next;
		mes "[锅炉]";
		mes "这个锅炉有时会在没有人使用的情况下自行移动，但我认为过去自动娃娃的数据仍然存在并继续执行命令。";
		mes "那么听到无形的声音并发出噪音就有意义了。由于冒出的蒸汽，您还可以看到奇怪的形状。";
		next;
		cutin "",255;
		select( "那是相当可怕的。" );
		cutin "ep172_beta",1;
		mes "[锅炉]";
		mes "太可怕了。这里的阀门认为它只是一个锅炉。可怕吗？阀门，看这里。";
		next;
		cutin "ep172_omega",4;
		mes "[阀门]";
		mes "嘟-";
		next;
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "锅炉的幽灵，你觉得有道理吗？可能是因为我们还没有发现问题。但也许是因为我们是自动娃娃。";
		next;
		mes "[扫]";
		mes "我们认为一定是缺少了一些东西，因为我们无法像人类客人一样听到声音或感受到信号。";
		next;
		mes "[扫]";
		mes "但最终我们甚至没有注意到问题的存在。由于我们作为洋娃娃的局限性，我们可能不会发现这些问题。";
		mes "这就是为什么我建议向客人寻找问题所在。";
		next;
		mes "[扫]";
		mes "老实说，我们不知道有什么奇怪的，因为很长一段时间都没有顾客了。直到人类客人进来，才注意到人类和自动人偶的区别不是很合理吗？";
		next;
		mes "[扫]";
		mes "我听说人类已经发展出感官和情感。以及将所有这些整合在一起的思维能力。";
		mes "我们只是收集信息并得出结论，但人类不同。我听说你收集了所有个人经历、想法和想象力来得出结论。";
		next;
		mes "[扫]";
		mes "我希望我们能解决这个问题。";
		next;
		cutin "ep172_beta",0;
		mes "[锅炉]";
		mes "由于锅炉已经关闭。请告诉<NAVI>[其他客人]<INFO>ba_bath,270,94,0,101,0</INFO></NAVI>自由搜索。";
		ep17_2_bath = 3;
		erasequest 17364;
		setquest 17365;
		getitem 1000103,7;
		getexp2 260267,0;
		close3;
	}
	if (ep17_2_bath == 3) {
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "扫一扫，去见见<NAVI>[其他嘉宾]<INFO>ba_bath,270,94,0,101,0</INFO></NAVI>。我必须盯着锅炉。如果你发现了什么，请来这里告诉我。因为我很好奇。";
		close3;
	}
	if (ep17_2_bath < 13) {
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "最好还是去别的地方看看，而不是这个地方。";
		close3;
	}

	// Daily : Boiler's request
	if (isbegin_quest(17375) == 0) {
		npctalk "也许已经完成了！", "阀门#172ba01", bc_self;
		cloakonnpcself( "Valve#172ba01" );
		sleep2 1000;
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "你好奇什么？您有什么问题要问我们吗？";
		next;
		cutin "",255;
		if (select( "锅炉...", "关于药材..." ) == 2) {
			cutin "ep172_beta",2;
			mes "[锅炉]";
			mes "草药？您对沐浴中使用的草药感到好奇吗？为什么？洗澡水不合你的胃口吗？";
			next;
			cutin "",255;
			select( "我真的很喜欢它。" );
			cutin "ep172_beta",2;
			mes "[锅炉]";
			mes "这就是你来这里的原因？";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "锅炉？您对锅炉感到好奇吗？为什么？你打算偷锅炉吗？";
		next;
		cutin "",255;
		select( "偷锅炉？" );
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "哦，我错了吗？入侵者对锅炉和供应系统非常感兴趣。他们在我不知情的情况下偷走了另一个锅炉。";
		mes "但。 " + strcharinfo(0) + "似乎对此不感兴趣。我只是想知道你是否想要拿走锅炉。如果我错了那就没关系。";
		next;
		mes "[锅炉]";
		mes "但入侵者会用它做什么呢？你认为他们打算建造一个露天浴池吗？";
		mes "嗯..我真的不知道他们能用锅炉做什么。你们人类能用它制造出任何东西吗？你有什么想法吗，" + strcharinfo(0) + "？";
		next;
		cutin "",255;
		select( "他们还做了什么？" );
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "嗯……我喜欢泡自己，但我更迷恋锅炉。他们似乎对净化设施很感兴趣。";
		next;
		mes "[锅炉]";
		mes "我很高兴能解释锅炉。但我不知道他们会偷它。我~真的不知道。人类是否因一时兴起而闻名？";
		next;
		mes "[锅炉]";
		mes "" + strcharinfo(0) + "，你也是一时兴起吗？我对人类还不太了解。有很多事情需要了解。我就是这样准备的。我不会再让他们偷了。";
		next;
		mes "[锅炉]";
		mes "例如。我师傅说他泡澡的时候很凉，但是我自己泡的时候。天气非常热。是不是我温度设置错了？我做到了，但不是为了他。";
		next;
		mes "[锅炉]";
		mes "但这很酷。这意味着什么？我错了吗？";
		next;
		mes "[锅炉]";
		mes "进而。如果将这些干叶子浸泡在热水中，叶子中的内容物就会出来。但仅此而已。";
		mes "但不知何故，它对您的健康有益，这就是为什么我们在每个浴缸中都充满草药叶子。人类用皮肤呼吸吗？或者你喝的是皮肤里的水吗？";
		next;
		mes "[锅炉]";
		mes "人类很乐意沉浸在浴缸中。这是为什么？";
		next;
		mes "[锅炉]";
		mes "哦，还有一个！为什么洗澡时要放入磨碎的海藻，然后将水涂在脸上？";
		next;
		mes "[锅炉]";
		mes "我很好奇，就自己尝试了一下，但不知道有什么用。也许是因为我是自动人偶？";
		next;
		mes "[锅炉]";
		mes "如果我有像人类一样的五种感官，我就能更好地理解人类。为什么师父不给我们这个？";
		next;
		cloakoffnpcself( "Valve#172ba01" );
		cutin "ep172_omega",4;
		mes "[阀门]";
		mes "一切都完成了。你现在必须喝酒。";
		next;
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "我不会喝酒。没人喝酒。";
		next;
		cutin "ep172_omega",4;
		mes "[阀门]";
		mes "还没有准备好吗？你就不能喝一点吗？挤出来，会得到很多精华液。";
		next;
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "阀门。人类不是茶包。请记住，我已经说过很多次了。";
		next;
		cloakonnpcself( "Valve#172ba01" );
		cloakoffnpcself( "Valve#172ba02" );
		cutin "ep172_omega",4;
		mes "[阀门]";
		mes "你所要做的就是把水烧好。";
		next;
		mes "[阀门]";
		mes "需要提高温度才能使其更好。";
		cloakonnpcself();
		cloakoffnpcself( "Boiler#172ba03" );
		next;
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "我告诉过你不要碰锅炉。";
		next;
		specialeffect EF_PIERCE, AREA, "Valve#172ba02";
		mes "- 嗯！ -";
		next;
		mes "[锅炉]";
		mes "停下来，到这里来。";
		next;
		cloakonnpcself( "Valve#172ba02" );
		cloakoffnpcself( "Valve#172ba01" );
		cloakonnpcself( "Boiler#172ba03" );
		cloakoffnpcself();
		mes "[锅炉]";
		mes "没关系，因为暂时安静了。";
		next;
		cutin "",255;
		select( "看起来很危险，但是处理..." );
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "何必浪费呢！如果我们修复它，它仍然会有用。如果你废弃 Valve，我应该和谁一起工作？我不喜欢陌生人。";
		next;
		cutin "",255;
		select( "你为什么不修复它？" );
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "因为我的手不能离开锅炉？入侵者破坏了锅炉和阀门，而且没有时间修理它们。";
		next;
		mes "[锅炉]";
		mes "就我一个人，锅炉房得由两个人来管理，但只剩下我一个人了。没有时间修复它。我可以将其发送到其他地方，我担心他们会重新格式化数据。";
		mes "没那么严重，我可以慢慢解决。阀门并没有那么糟糕，只是有时会接触到锅炉。我对人类了解不多，但对草药和锅炉却了解很多。";
		next;
		mes "[锅炉]";
		mes "但我还是得修复它。";
		mes "唔..." + strcharinfo(0) + "？你有空吗？";
		next;
		cutin "",255;
		select( "为什么？" );
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "如果你有空的话，请帮帮我。我手不够。阀门和锅炉需要固定。但只有我一个人，其他娃娃都很忙。";
		mes "我希望我是两个人。哇……这不是很好吗？如果我有两个人，这将是最好的锅炉房。";
		next;
		mes "[锅炉]";
		mes "我会要求阿尔法克隆我。我不知道是否可行，但从逻辑上讲，如果我两个人的话效率会更高。";
		mes "但是，我现在能做什么呢？没有另一个我了。我应该寻求帮助。所以如果你有空的话请帮帮我。";
		next;
		cutin "",255;
		if (select( "我来帮你。", "我要去洗澡了。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[锅炉]";
			mes "真的吗？那我就无能为力了。你看起来也很累，我就给你送一些恢复的草药吧。再见。";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "谢谢。那么，你能处理20个^0000CD破损的自动人偶^000000吗？我还需要 5 个^0000CD损坏的自动娃娃零件^000000。";
		next;
		cutin "",255;
		select( "当然。" );
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "是的，那么请。";
		setquest 17375;
		completequest 17375;
		setquest 17376;
		close3;
	}
	cutin "ep172_beta",2;
	mes "[锅炉]";
	mes "今天是什么风把你吹到这里来的？哦，是为了工作吗？";
	next;
	.@playtime = checkquest(17377,PLAYTIME);
	.@hunting = checkquest(17376,HUNTING);

	if (.@playtime == 0 || .@playtime == 1)
		.@menu$ = "^C0C0C0Help on work - Cooldown^000000";
	else if (.@hunting == 0 || .@hunting == 1)
		.@menu$ = "^C0C0C0Help on work - On Progress^000000";
	else
		.@menu$ = "Help on work";

	if (select( .@menu$, "我过来打个招呼。" ) == 2) {
		mes "[锅炉]";
		mes "是的，我不知道你为什么在这里。这里什么都没有改变。我们仍在研究锅炉。";
		close3;
	}
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[锅炉]";
		mes "嗯...我听说人类如果工作太多就很容易崩溃。请先去休息一下，天亮后再回来。";
		close3;
	}
	switch( .@hunting ) {
	case -1:
		if (select( "让我来处理。", "我今天想休息一下。" ) == 2) {
			mes "[锅炉]";
			mes "这很奇怪。我以为你来见我是因为你想找工作，对吧？嗯，我明白了。";
			close3;
		}
		mes "[锅炉]";
		mes "怎么会有这么真诚的人呢？那么，今天也请处理20个《<<CLR0>>>破损的自动人偶^000000，并带来5个^0000CD破损的自动人偶零件^000000。";
		setquest 17376;
		if (isbegin_quest(17377) == 1)
			erasequest 17377;
		close3;
	case 0:
	case 1:
		mes "[锅炉]";
		mes "你的工作完成了吗？";
		next;
		mes "[锅炉]";
		if (countitem(1000231) < 5) {
			mes "它在哪里？我们需要 5 个破损的自动娃娃零件。我认为你的包里有一个洞。你应该检查一下。";
			close3;
		}
		mes "20个破损的自动人偶你处理了吗？你有什么地方受伤了吗？";
		close3;
	case 2:
		if (countitem(1000231) < 5) {
			mes "[锅炉]";
			mes "它在哪里？我们需要 5 个破损的自动娃娃零件。我认为你的包里有一个洞。你应该检查一下。";
			close3;
		}
		mes "[锅炉]";
		mes "你的工作完成了吗？";
		next;
		mes "[锅炉]";
		mes "你带来了很多。好吧，我用它换这张酒吧餐券。谢谢。";
		erasequest 17376;
		setquest 17377;
		delitem 1000231,5;
		getitem rand(100147,100149),1;
		getitem 1000103,2;
		getexp 834974,584500;
		close3;
	}
	end;

OnInit:
	// Sidequest quest : Exploring bathhouse
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17364) == 1" );

	// Daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17374) == 2 && checkquest(17376,HUNTING) == -1 && checkquest(17377,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(17377,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17376,HUNTING) == 2 && countitem(1000231) >= 5" );
	end;
}

// Sidequest quest : Exploring bathhouse - Step 4
ba_bath,270,94,0	script	#172bav01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep17_2_bath == 3)
		cloakoffnpcself( "Rookie#172ba03" );
	end;
}

ba_bath,270,94,5	script(CLOAKED)	Rookie#172ba03	4_M_ROOKIE,{
	if (ep17_2_bath == 3) {
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "……这个、那个……";
		next;
		select( "幸运的？" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "什么？是的。这里……什么都没有。我宁愿去^0000CD湖^000000。";
		next;
		mes "[新秀]";
		mes "那里可能有<NAVI>[]<INFO>ba_bath,165,43,0,101,0</INFO></NAVI>。我们来看一下。";
		ep17_2_bath = 4;
		erasequest 17365;
		setquest 17366;
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17365) == 1" );
	end;
}

// Sidequest quest : Exploring bathhouse - Step 5
// ba_bath,165,43,3	script	Shrine#172ba02	4_EP17_BUCKETS,5,5,{

// Sidequest quest : Exploring bathhouse - Step 6
ba_bath,203,58,0	script	#172bar01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep17_2_bath == 5)
		cloakoffnpcself( "Rookie#172ba04" );
	end;
}

ba_bath,203,58,3	script(CLOAKED)	Rookie#172ba04	4_M_ROOKIE,{
	if (checkweight(1201,2) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep17_2_bath == 5) {
		cloakoffnpcself( "Molar#172ba03" );
		cloakoffnpcself( "Magenta#172ba03" );
		mes "[洋红色]";
		mes "幸运的！你安全了！我以为你出了什么事，因为你孤身一人！";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你也看到我了吗？";
		next;
		cloakoffnpcself( "Canine#172ba03" );
		cloakoffnpcself( "Denny#172ba03" );
		cutin "",255;
		mes "[丹尼]";
		mes "幸运的？你是发出信号的人吗？你为什么打电话给我们，不是叫我们去湖边吗？";
		next;
		cloakoffnpcself( "Danae#172ba03" );
		cloakoffnpcself( "Cyan#172ba03" );
		mes "[青色]";
		mes "你怎么比我来得快？";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "坚持住，冷静一下。你们都看到我在外面了吗？";
		next;
		cutin "",255;
		mes "[丹尼]";
		mes "当然！如果Lucky不是Lucky，那是谁呢？";
		npctalk "我不会对你撒谎。", "青色#172ba03", bc_self;
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "那么它似乎不是其中之一。";
		mes "听。我们还不知道这里未知实体的身份。但它既不是自动玩偶，也不是幽灵。它不是怪物。连超自然的存在都算不上。";
		npctalk "那么它是什么？", "青色#172ba03", bc_self;
		next;
		cutin "",255;
		mes "[丹尼]";
		mes "你是怎么想出来的？";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "每个人我都见过一次。你在外面看到我了，不是吗？我什至告诉过你要去哪里。你没觉得有什么不对劲吗？这是模仿我的假货。";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "什么？？真的不是你吗？";
		npctalk "它看起来和你一模一样。", "青色#172ba03", bc_self;
		npctalk "哦，原来如此！他还叫我也去湖边吧！", "丹尼#172ba03", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我一直和Shrine在一起。冒险家遇到了假货，差点就到了湖边。";
		mes "考虑到这种情况，这是一种聪明的生活，它并不意味着要伤害我们。它只是想带我们离开这个地方。戈妮很可能是安全的。";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "你的意思是我被假货骗了？不管是谁，我都会查出来。";
		npctalk "你骗了我...", "青色#172ba03", bc_self;
		npctalk "哈。是的。我太棒了。", "丹尼#172ba03", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我们的对手很了解这个澡堂。鉴于它知道有一个间歇性排水的湖泊的存在，它也可能知道一条秘密通道。";
		next;
		mes "[新秀]";
		mes "你会习惯水的。还有……蒸汽。是的，它必须知道如何使用蒸汽。我不知道它和蒸汽有什么关系。但除了挡住视线之外，肯定还有别的东西。所以，要小心。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "对手在水面上的速度会非常快。就像水生生物一样。";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "好吧，那么我们应该让它远离水。";
		npctalk "也许这是一只浣熊。", "青色#172ba03", bc_self;
		npctalk "是啊，我们把它赶走吧！", "丹尼#172ba03", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "丹尼，准备设下陷阱。一个紧的。";
		npctalk "我从没想过我会在这里使用陷阱。我很高兴我带来了它。", "丹尼#172ba03", bc_self;
		next;
		mes "[新秀]";
		mes "洋红色，堵塞排水沟和可能的撤退地点。";
		npctalk "我以前见过这一切。", "品红#172ba03", bc_self;
		next;
		mes "[新秀]";
		mes "接下来，从一侧移动到另一侧时使用烟雾弹和空弹。小心不要弄湿弹药，这里有很多水和蒸汽。最后不要损坏这里的设施。";
		npctalk "好的。", "青色#172ba03", bc_self;
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "嗯……这里的水很多，如果能利用一下就好了。如果我们用冰抓住它的脚...我们可以使用冰冻陷阱吗？";
		next;
		cutin "",255;
		mes "[丹尼]";
		mes "我把这一切都带到了这里。让我看看……就在这里。";
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "冒险家，拿走这些^0000CD冰冻陷阱^000000。请把它种植在每个标记的地方？ <NAVI>[地点]<INFO>ba_bath,55,55,0,101,0</INFO></NAVI>。您只需将其种植到位并保持稳定即可。请快点。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "那么，搬出去吧！";
		ep17_2_bath = 6;
		erasequest 17367;
		setquest 17368;
		getitem 1000103,7;
		getitem 1000100,4;
		getexp 309400,0;
		close2;
		cutin "",255;
		cloakonnpcself();
		cloakonnpcself( "Denny#172ba03" );
		cloakonnpcself( "Molar#172ba03" );
		cloakonnpcself( "Canine#172ba03" );
		cloakonnpcself( "Danae#172ba03" );
		cloakonnpcself( "Magenta#172ba03" );
		cloakonnpcself( "Cyan#172ba03" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17367) == 1" );
	end;
}

ba_bath,202,54,7	duplicate(dummy_cloaked_npc)	Danae#172ba03	4_F_REBELLION2
ba_bath,204,54,1	duplicate(dummy_cloaked_npc)	Canine#172ba03	4_F_REBELLION3
ba_bath,201,58,5	duplicate(dummy_cloaked_npc)	Denny#172ba03	4_M_REBELLION3
ba_bath,204,56,1	duplicate(dummy_cloaked_npc)	Magenta#172ba03	4_M_GUNSLINGER2
ba_bath,200,57,7	duplicate(dummy_cloaked_npc)	Molar#172ba03	4_M_REBELLION
ba_bath,201,55,7	duplicate(dummy_cloaked_npc)	Cyan#172ba03	4_F_REBELLION3

// Sidequest quest : Exploring bathhouse - Step 7
ba_bath,55,55,0	script	#172bat01	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_bath == 6) {
		cloakoffnpcself( "Marked Position#172ba01" );
		end;
	}
	end;
}

ba_bath,55,55,5	script(CLOAKED)	Marked Position#172ba01	4_ENERGY_BLUE,{
	if (ep17_2_bath == 6) {
		specialeffect EF_ICEMINE_1;
		specialeffect EF_ICECRASH;
		unittalk getcharid(3), "" + strcharinfo(0) + " : This must be the place. The cold air started to flow when the trap was set. Let's move to the next location.", bc_self;
		cloakonnpcself();
		ep17_2_bath = 7;
		erasequest 17368;
		setquest 17369;
		if (countitem(1000100) > 0)
			delitem 1000100,1;
		navigateto("ba_bath",306,121);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17368) == 1" );
	end;
}

// Sidequest quest : Exploring bathhouse - Step 8
ba_bath,306,121,0	script	#172bat02	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_bath == 7) {
		cloakoffnpcself( "Marked Position#172ba02" );
		end;
	}
	end;
}

ba_bath,306,121,0	script(CLOAKED)	Marked Position#172ba02	4_ENERGY_BLUE,{
	if (ep17_2_bath == 7) {
		specialeffect EF_ICEMINE_1;
		specialeffect EF_ICECRASH;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I set the trap where Lucky asked me too. Let's move to the next location.", bc_self;
		cloakonnpcself();
		ep17_2_bath = 8;
		erasequest 17369;
		setquest 17370;
		if (countitem(1000100) > 0)
			delitem 1000100,1;
		navigateto("ba_bath",21,276);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17369) == 1" );
	end;
}

// Sidequest quest : Exploring bathhouse - Step 9
ba_bath,21,276,0	script	#172bat03	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_bath == 8) {
		cloakoffnpcself( "Marked Position#172ba03" );
		end;
	}
	end;
}

ba_bath,21,276,0	script(CLOAKED)	Marked Position#172ba03	4_ENERGY_BLUE,{
	if (ep17_2_bath == 8) {
		specialeffect EF_ICEMINE_1;
		specialeffect EF_ICECRASH;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I set the trap securely in the marked position. Let's move to the next location.", bc_self;
		cloakonnpcself();
		ep17_2_bath = 9;
		erasequest 17370;
		setquest 17371;
		if (countitem(1000100) > 0)
			delitem 1000100,1;
		navigateto("ba_bath",155,305);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17370) == 1" );
	end;
}

// Sidequest quest : Exploring bathhouse - Step 10
ba_bath,155,305,0	script	#172bat04	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_bath == 9) {
		cloakoffnpcself( "Marked Position#172ba04" );
		end;
	}
	end;
}

ba_bath,155,305,0	script(CLOAKED)	Marked Position#172ba04	4_ENERGY_BLUE,{
	if (ep17_2_bath == 9) {
		specialeffect EF_ICEMINE_1;
		specialeffect EF_ICECRASH;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I've finally set all the traps securely. Where should I go now?", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 500;
		cloakoffnpcself( "Magenta#172ba04" );
		npctalk "冒险家，所有的陷阱都设置好了吗？那里已经开始了。快点走吧。", "品红#ep172_bath_trap", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Magenta#172ba04" );
		cloakonnpcself();
		ep17_2_bath = 10;
		erasequest 17371;
		setquest 17372;
		if (countitem(1000100) > 0)
			delitem 1000100,1;
		navigateto("ba_bath",286,298);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17371) == 1" );
	end;
}

ba_bath,154,303,5	duplicate(dummy_cloaked_npc)	Magenta#172ba04	4_M_GUNSLINGER2

// Sidequest quest : Exploring bathhouse - Step 11, 12, 13
ba_bath,286,298,0	script	#172bas02	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep17_2_bath == 10) {
		setnpcdisplay( "Unknown Creature#172ba01", 4_CENERE );
		cloakoffnpcself( "Unknown Creature#172ba01" );
		end;
	}
	if (ep17_2_bath == 11) {
		setnpcdisplay( "Unknown Creature#172ba01", 4_M_GONY );
		cloakoffnpcself( "Unknown Creature#172ba01" );
		end;
	}
	if (ep17_2_bath == 12) {
		setnpcdisplay( "Unknown Creature#172ba01", 4_EP17_MERMAID );
		cloakoffnpcself( "Unknown Creature#172ba01" );
		end;
	}
	end;
}

ba_bath,286,298,3	script(CLOAKED)	Unknown Creature#172ba01	4_EP17_MERMAID,{
	if (checkweight(1000103,16) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep17_2_bath == 10) {
		cloakoffnpcself( "Rookie#172ba05" );
		cloakoffnpcself( "Denny#172ba04" );
		cloakoffnpcself( "Magenta#172ba05" );
		cloakoffnpcself( "Cyan#172ba04" );
		cloakoffnpcself( "Molar#172ba04" );
		cloakoffnpcself( "Canine#172ba04" );
		cloakoffnpcself( "Danae#172ba04" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "冒险家，你来得正是时候。";
		mes "在这里，就是我们面前的那个。大家小心点。";
		next;
		cutin "",255;
		mes "清-";
		specialeffect EF_SMOKE;
		specialeffect EF_PEONG;
		next;
		select( "这股蒸汽一定是..." );
		setnpcdisplay( "Unknown Creature#172ba01", 4_CENERE );
		cloakoffnpcself( "Unknown Creature#172ba01" );
		cloakoffnpcself( "Gonie#172ba01" );
		mes "[丹尼]";
		mes "这不是高尼吗？而且还有……两个Lucky？";
		npctalk "幸运的...？", "丹尼#172ba04", bc_self;
		npctalk "谁是真实的？", "品红#172ba05", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "当然是我啦！你们是和谁一起来到这里的？我们来这里是为了抓住那个假货。";
		npctalk "这就是幸运。正确的。", "磨牙#172ba04", bc_self;
		npctalk "当然是我啦！", "新秀#172ba05", bc_self;
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "我不知道你是谁，但既然你已经无处可逃，那你还是别想了。这个地方被三方包围。丹尼，洋红。检查戈尼。";
		next;
		cutin "16loo_01",0;
		mes "[??????]";
		mes "......";
		npctalk "......", "", bc_self;
		next;
		cutin "",255;
		cloakonnpcself( "Denny#172ba04" );
		cloakonnpcself( "Magenta#172ba05" );
		sleep2 1000;
		cloakoffnpcself( "Denny#172ba05" );
		cloakoffnpcself( "Magenta#172ba06" );
		mes "[丹尼]";
		mes "Gonie，隐藏起来并陷入困境。看起来没有任何外伤。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "拿出你所有的药水。";
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "有必要吗？很快就会好，我只要在这里喷点水，在脸颊上拍几下就可以了。";
		npctalk "你，我叫你别再写谍战小说了是吧？", "青色#172ba04", bc_self;
		next;
		cloakonnpcself( "Rookie#172ba05" );
		sleep2 1000;
		cloakoffnpcself( "Rookie#172ba06" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "高尼，高尼？喝这个。你能喝吗？";
		npctalk "幸运的是，你最好退后一点。我想当你离它太近时我会感到困惑。", "犬类#172ba04", bc_self;
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "幸运的是，退后一点。这真的是高尼吗？不是假的吗？我们来看看吧。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "怎么可能不是Gonie，那里确实有一个假我。";
		next;
		cutin "16go_03.bmp",2;
		mes "[戈尼]";
		mes "……！！";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "戈尼？你现在醒了吗？你还好吗？";
		next;
		mes "[新秀]";
		mes "大家都躲起来！你也是冒险家！";
		specialeffect EF_SUI_EXPLOSION, AREA, "Gonie#172ba01";
		next;
		cutin "",255;
		select( "是的！" );
		cloakonnpcself( "Rookie#172ba06" );
		sleep2 1500;
		cloakoffnpcself( "Rookie#172ba05" );
		mes "[丹尼]";
		mes "不，即使你告诉我们要掩护...";
		next;
		mes "清-";
		specialeffect EF_SMOKE;
		specialeffect EF_PEONG;
		next;
		setnpcdisplay( "Unknown Creature#172ba01", 4_M_GONY );
		cloakoffnpcself( "Unknown Creature#172ba01" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "啊!又是一团蒸汽！！！";
		next;
		cutin "",255;
		mes "[丹尼]";
		mes "现在，戈妮……有两个人。";
		npctalk "嘿，幸运儿。 Gonie 甚至不知道密码。我们应该做什么？", "丹尼#172ba05", bc_self;
		npctalk "左边那张是不是很像高妮？他看起来好像很难受？", "品红#172ba06", bc_self;
		npctalk "戈尼显然是右边的那个。看看那些眼睛。", "犬类#172ba04", bc_self;
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "大家安静点。我们有一种简单而可靠的方法来识别真正的戈尼。";
		mes "戈尼？哪一个才是真正的高尼？";
		next;
		cutin "16go_03",2;
		mes "[戈尼]";
		mes "......";
		npctalk "......", "冈尼#172ba01", bc_self;
		next;
		cutin "16go_03",0;
		mes "[戈尼]";
		mes "当然是我。";
		npctalk "当然是我。", "", bc_self;
		next;
		cutin "",255;
		mes "[青色]";
		mes "呃……真的。这太容易了。即使是刚出生的婴儿也一定能回答这个问题。";
		npctalk "丹尼，洋红。牢牢握住假货。", "新秀#172ba05", bc_self;
		next;
		cutin "16go_03",0;
		mes "[戈尼]";
		mes "你这人怎么回事？放开我！那就是假货！";
		npctalk "你这人怎么回事？放开我！那就是假货！", "", bc_self;
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "冒险家，你知道哪一个才是真正的吗？";
		next;
		cutin "",255;
		if (select( "沉默的人。", "自称是真人的人。" ) == 2) {
			mes "[青色]";
			mes "我们对你很失望！和我们在一起一段时间后，你仍然不知道如何。";
		}
		else {
			mes "[青色]";
			mes "你的眼睛很好看，冒险家。";
		}
		next;
		mes "[青色]";
		mes "高尼，过来一下。";
		next;
		cutin "16go_03",2;
		mes "[戈尼]";
		mes "......";
		npctalk "......", "冈尼#172ba01", bc_self;
		next;
		cutin "",255;
		cloakonnpcself( "Gonie#172ba01" );
		sleep2 1500;
		cloakoffnpcself( "Gonie#172ba02" );
		mes "[洋红色]";
		mes "哈哈哈！我们的Gonie是一个非常沉默的人！";
		npctalk "暴露你是谁！你这个恶棍！！！", "青色#172ba04", bc_self;
		npctalk "你更像是一个恶棍，青色……", "达娜厄#172ba04", bc_self;
		next;
		cutin "16go_03",0;
		mes "[??????]";
		mes "唉……我想我已经耽搁得太久了。我要立即摆脱这种形式。";
		mes "我，把他的伤治好了……好吧，既然我们没有对彼此做什么，那我们就这样吧？";
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "你不能那样做。他是这里的受害者。是吗，戈妮？";
		next;
		cutin "16go_03",2;
		mes "[戈尼]";
		mes "......";
		npctalk "......", "冈尼#172ba02", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "好的。我们现在谈谈吧？你到底是谁？";
		next;
		cutin "16go_03",0;
		mes "[??????]";
		mes "在那之前...";
		ep17_2_bath = 11;
		erasequest 17372;
		setquest 17373;
		close3;
	}
	if (ep17_2_bath == 11) {
		cloakoffnpcself( "Rookie#172ba05" );
		cloakoffnpcself( "Denny#172ba05" );
		cloakoffnpcself( "Magenta#172ba06" );
		cloakoffnpcself( "Cyan#172ba04" );
		cloakoffnpcself( "Molar#172ba04" );
		cloakoffnpcself( "Canine#172ba04" );
		cloakoffnpcself( "Danae#172ba04" );
		cloakoffnpcself( "Gonie#172ba02" );
		cutin "16go_03",0;
		mes "[??????]";
		mes "在那之前，别碰我。我不会攻击你。但让我就这样吧。那我就不会伤害你了。";
		mes "我还给了他。这不是你的目的吗？如果你放过我，你的未来将会得到祝福。";
		npctalk "谁在伤害谁？我不知道你不知道你现在的处境。", "丹尼#172ba05", bc_self;
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我一直在寻找 Gonie，但这并不是我所寻找的全部。我一直在寻找那个让戈妮陷入危险的人。这也可能会伤害其他人。";
		mes "我们不能冒着这样的风险回来。我们必须做一些研究...";
		npctalk "但怎样才能做得好呢！", "丹尼#172ba05", bc_self;
		next;
		cutin "16go_03",0;
		mes "[??????]";
		mes "好吧，我不会再做任何事了，所以就咬这个吧。我不是恶人。";
		npctalk "唉~我一点也不好奇~", "品红#172ba06", bc_self;
		npctalk "我想每个人都从某个地方学到了这样的陈词滥调。都是一样的。", "犬类#172ba04", bc_self;
		npctalk "我想知道那个地方在哪里。这样我就可以把它化为灰烬。", "磨牙#172ba04", bc_self;
		next;
		cloakoffnpcself( "Shrine#172ba03" );
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "有什么大惊小怪的？如果发生意外的话...";
		mes "有两个人……？这就是你所说的" + strcharinfo(0) + "吗？";
		npctalk "哦不……连自动人偶也……", "", bc_self;
		next;
		cutin "",255;
		select( "是的。另一件是假的。" );
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "请稍等。我会处理的。";
		mes "你是谁？请表明身份。为什么要打扰这里的客人？";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "等等，你还要继续这样说话吗？令人困惑的是，你为什么不以原来的形式与他交谈呢？";
		next;
		cutin "16go_03",0;
		mes "[??????]";
		mes "嗯……我明白了。我需要你把枪收起来。我不会逃跑，也不会伤害你。";
		next;
		cutin "",255;
		specialeffect EF_SMOKE;
		specialeffect EF_PEONG;
		setnpcdisplay( "Unknown Creature#172ba01", 4_EP17_MERMAID );
		cloakoffnpcself( "Unknown Creature#172ba01" );
		mes "[??????]";
		mes "这就是我。";
		next;
		select( "美人鱼？" );
		emotion ET_HUK;
		mes "[??????]";
		mes "这是半人半人、鱼人的称呼吗？";
		mes "我和这里的美人鱼不完全是同一物种。";
		next;
		mes "[??????]";
		mes "但描述我们这种人很复杂，所以你可以随意称呼我。";
		mes "即使你这么称呼我，这里也没有人会对此提出异议。最重要的是，我们不是瓦蒙特的同一位客人。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "你真认识主人，那你是客人吗？那么，请告诉我你的名字。";
		next;
		cutin "",255;
		mes "[??????]";
		mes "现在是自我介绍时间吗？我听说这里的人在社交之前都会自我介绍。我是一位公主。我来自东海。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "请稍等。我会检查一下。";
		npctalk "顺便问一下，东海在哪里？我从来没有听说过。", "丹尼#172ba05", bc_self;
		next;
		cutin "",255;
		mes "[洋红色]";
		mes "你既然是公主，为什么会在这里？";
		next;
		mes "[公主]";
		mes "这……这……不是我的意思……并不是我不想出现在我的人民面前。";
		mes "别这样看着我。我在人类中听说过我的名字，但我出生和长大的地方却完全不同。";
		npctalk "哦，她不是公主。她的名字叫公主", "青色#172ba04", bc_self;
		npctalk "你说得对。神社应该能找到。", "丹尼#172ba05", bc_self;
		npctalk "这个名字很适合你。", "品红#172ba06", bc_self;
		npctalk "真的吗？我真的像一个可以支撑一切的强者吗？", "", bc_self;
		sleep2 1500;
		npctalk "……你是这个意思？", "品红#172ba06", bc_self;
		sleep2 1000;
		npctalk "……就是这个意思。", "", bc_self;
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "抱歉，我仔细检查了名单，但找不到你的名字。我可以再说一遍你的名字吗？";
		next;
		cutin "",255;
		mes "[公主]";
		mes "我可能不在名单中。这就是我所要求的。";
		mes "我一直在离家出走。这就是为什么瓦蒙特能够让我使用宅邸的浴室，而没有任何人联系他关于我的事情。";
		next;
		mes "[公主]";
		mes "我不记得确切的时间了，因为已经是很久以前的事了……而瓦蒙特也已经很久没有出现了。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "原来你已经有一段时间没有进出这个澡堂了。但正如公主所说，我们需要确保你是澡堂的客人。";
		next;
		mes "[神殿]";
		mes "请您理解，这是必要的确认程序，无需船长另行指示。您有什么纪念品或大师的讯息吗？";
		next;
		cutin "",255;
		mes "[公主]";
		mes "恐怕我没有。我一开始就应该保持安静。";
		next;
		mes "[公主]";
		mes "我一直呆在这附近的水里。然后我遇到了正在宅邸外散步的瓦蒙特。";
		mes "瓦蒙特了解我的情况，非常好心地邀请我去他的豪宅，并随时为我提供浴室。";
		next;
		mes "[公主]";
		mes "我悄悄地使用它，不让任何人知道我的处境，这就是我对别人保持警惕的原因。尤其是避免接触那些与生物不同的自动人偶。";
		mes "瓦蒙特还给了我进入浴室的特殊权限。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "当外人以不寻常的方式进入宅邸时，安全措施肯定会被触发。好的。打扰一下。我将确保您作为正式客人登记和使用浴室时不会遇到任何不便。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "嗯，我必须这样做吗？";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "如果您没有注册就使用，可能会给其他客人造成不必要的误解，所以您至少应该注册。师傅也不来咨询。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "那么……我明白了。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "我会处理的。我可以再次知道你的名字吗？";
		next;
		cutin "",255;
		mes "[公主]";
		mes "公主，来自东海。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "现在轮到我们了吗？为什么不在你注册的时候我们谈谈呢？";
		ep17_2_bath = 12;
		erasequest 17373;
		setquest 17374;
		close3;
	}
	if (ep17_2_bath == 12) {
		cloakoffnpcself( "Rookie#172ba05" );
		cloakoffnpcself( "Denny#172ba05" );
		cloakoffnpcself( "Magenta#172ba06" );
		cloakoffnpcself( "Cyan#172ba04" );
		cloakoffnpcself( "Molar#172ba04" );
		cloakoffnpcself( "Canine#172ba04" );
		cloakoffnpcself( "Danae#172ba04" );
		cloakoffnpcself( "Gonie#172ba02" );
		mes "[公主]";
		mes "你想知道什么？";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我知道你为什么在这里。但你为什么攻击人呢？你应该知道他并不是故意要伤害你的。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "首先我没有攻击他。他已经跟踪我很久了。然后我不小心...";
		mes "我本来打算治疗那个晕倒的人并把他放出去，但后来你们进来了……";
		next;
		mes "[公主]";
		mes "我一直试图让人们离开这里，但没有成功。我无意伤害你。我一开始就不愿意联系。";
		mes "这就是为什么瓦蒙特会考虑我，因为我被追了很长时间，我已经条件反射地停下来了……这就是我的焦虑所在。";
		next;
		select( "你为什么这么不情愿？" );
		mes "[公主]";
		mes "这是因为我的性取向。受到欺凌后，我被迫离开家乡。这就是为什么当我与别人接触时，我会不知不觉地变得警惕。";
		mes "如果我伤害了你，我很抱歉。请原谅我为了保护自己而无意中做出的事情。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我不知道……他说他受伤了，但他不是故意的，而且他是这座宅邸的客人。";
		next;
		mes "[新秀]";
		mes "只要你保证不打扰或伤害其他人，我们就在这个时候下台。你怎么说？";
		next;
		cutin "",255;
		mes "[公主]";
		mes "当然，我会以我的名誉保证。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "然后我们就会相信你的名誉，我们就会结束并下台。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "谢谢您的等待。东海公主，我已将您注册为瓦蒙特府的正式客人。由于通讯不稳定，如果需要一些时间，我深表歉意。";
		mes "公主现在可以作为瓦蒙特的客人入住这座宅邸。请放心使用。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "我对某件事很好奇。 Varmunt 这些天很忙吗？我一直在找他，但他已经有一段时间没有出现了。";
		mes "我是否应该认为 Varmundt 将来不会出现？";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "主人明天可能会回来。但他的回归预计暂时不会到来。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "那我能不能以这个澡堂为基地，打造我的生力军呢？";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "对不起，但你是什么意思？";
		next;
		cutin "",255;
		mes "[公主]";
		mes "我正在努力通过创造一股新的力量来回到我的家乡。你不需要一个基础来实现这一点吗？";
		mes "我已经进出这个地方很长时间了，但继续这样做对我来说很麻烦。所以让我拥有这个地方。";
		npctalk "那是什么意思？", "丹尼#172ba05", bc_self;
		npctalk "这有什么意义吗？", "磨牙#172ba04", bc_self;
		npctalk "嗯，我以前从未听说过这种逻辑。", "犬类#172ba04", bc_self;
		next;
		cloakoffnpcself( "Boiler#172ba04" );
		cloakoffnpcself( "Sweep#172ba03" );
		cutin "ep172_beta",1;
		mes "[扫]";
		mes "我们一到就听到的谈话内容是什么？";
		next;
		cutin "ep172_beta",2;
		mes "[锅炉]";
		mes "你在说什么？这是瓦蒙特宅邸的浴室。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "瓦蒙特会明白的。他的见识很广，所以他会允许我从他家流浪出来，就像他帮我躲进这个澡堂一样。乐意。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "虽然主人让你进澡堂，而且如你所说，很慷慨，但你还是应该表现出一些诚意。";
		mes "请不要忽视Varmundt大师的善意并表现出礼貌。";
		npctalk "获取无法表达意图的物品的房地产属于非法敲诈勒索行为。", "扫#172ba03", bc_self;
		next;
		cutin "",255;
		mes "[公主]";
		mes "我不同意。如果您在某个地方居住了很长时间，那么该财产就应该属于您。每个人都是这样生活的。";
		mes "或者这个怎​​么样？你为什么不承认我是瓦蒙特遗产的正式继承人呢？业主不在期间您不能主张合法所有权吗？";
		npctalk "等等，我的常识很奇怪吗？这正常吗？", "丹尼#172ba05", bc_self;
		npctalk "听起来似乎有道理，但仔细听却觉得很奇怪。你强迫瓦蒙特收养你了吗？", "品红#172ba06", bc_self;
		npctalk "我想……是吗？", "磨牙#172ba04", bc_self;
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "这座豪宅的合法主人是瓦蒙特，即使是长期居民也不能声称拥有所有权。";
		mes "等瓦蒙特大师回来后，我们再自己讨论。这不是我们作为客人可以告诉你的事情。";
		npctalk "真实的状态是可怕的。", "达娜厄#172ba04", bc_self;
		npctalk "像我们这样的人就应该遵守法律。", "丹尼#172ba05", bc_self;
		npctalk "为什么老是拿主人的财产。", "锅炉#172ba04", bc_self;
		npctalk "你的论点没有逻辑，也没有任何论据可言。", "扫#172ba03", bc_self;
		next;
		cutin "",255;
		mes "[公主]";
		mes "这座宅邸里到处都有一个秘密。这家澡堂也是如此。乍一看，它似乎是随着利益的流动而无序建造的，但它却有它自己的规则。";
		mes "看起来流线是根据沐浴顺序和水温制作的，但即使是线条也非常有意义，正如这座宅邸中的一切一样。";
		next;
		mes "[公主]";
		mes "哪里可以获得阳光和月光，天花板上的光在水中发出咕噜声。除了那些排水管……他做这些是为了一项你无法理解的伟大研究。这不仅仅是一个澡堂。";
		next;
		mes "[公主]";
		mes "有谁能理解其中的一件事吗？ Varmundt 也不希望澡堂被长期废弃和遗忘。";
		mes "我这里拥有我所需要的一切，可以为我一生的耻辱报仇。为什么我不能使用它？";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "我再说一遍，我告诉你。你无法自己做出所有决定。我们和公主都只是客人。";
		next;
		cutin "",255;
		select( "你打算如何聚集力量？" );
		mes "[公主]";
		mes "难道你不应该去问一下来这里的那个人吗？就在我面前的那个。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你认为你会怎么做？我觉得你还是先增强一下自己的实力吧。";
		mes "如果你在真正拥有权力之前就拥有了权力，你就会崩溃并失去它。";
		next;
		cutin "",255;
		mes "[公主]";
		mes "……就算你不说，我也知道我很弱。但我不知道该怎么办。";
		npctalk "哇……这气氛……", "品红#172ba06", bc_self;
		next;
		select( "你可以开始训练了。" );
		mes "[公主]";
		mes "训练...？但和谁……啊……！";
		npctalk "我突然感到紧张。", "丹尼#172ba05", bc_self;
		npctalk "你为什么这样看着我们？", "青色#172ba04", bc_self;
		next;
		mes "[公主]";
		mes "你们看起来很坚强。你为什么不战斗并训练我？我没有办法保护自己，这是我幸存的唯一原因，因为我很弱并且躲藏起来。";
		mes "所以我希望你能教我如何正确地生存和战斗。";
		npctalk "正如预期的那样...", "达娜厄#172ba04", bc_self;
		next;
		mes "[洋红色]";
		mes "听起来很有趣。我们要开枪打死你吗？我们只知道如何射击，可以吗？我对左轮手枪到加特林枪都很满意，你可以为我选择你想要的任何东西。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "弹药战斗不适合那些经常呆在水下的人。所以你宁愿向这里的冒险家寻求帮助而不是向我们寻求帮助。";
		next;
		mes "[公主]";
		mes "是这样吗...？如果你不介意冒险者的话，我想经常和你战斗。";
		next;
		select( "当然，这并不难。" );
		mes "[公主]";
		mes "非常感谢。我期待着与您见面接受培训。";
		mes "对于给您带来的麻烦，我深表歉意。对不起。但你知道吵架后友谊会变得更牢固吗？我们不是瓦蒙特的同一位客人。";
		next;
		cutin "ep172_beta",1;
		mes "[神殿]";
		mes "你说完了吗？ " + strcharinfo(0) + "，非常感谢您在很多方面的帮助。虽然金额虽小，但请接受。";
		npctalk "为什么我们没有收到任何信息？", "品红#172ba06", bc_self;
		next;
		cutin "ep172_beta",0;
		mes "[锅炉]";
		mes "冒险家，有空的话就来锅炉房吧。我会帮你一件事。";
		mes "好吧，我们现在就走。";
		next;
		mes "[神殿]";
		mes "如果您有任何需要，请随时访问我们。这也是无意识地对你无礼的。";
		next;
		cloakonnpcself( "Shrine#172ba03" );
		cloakonnpcself( "Boiler#172ba04" );
		cloakonnpcself( "Sweep#172ba03" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "我们找到了高妮，也确认了澡堂里没有危险，所以我们走吧。";
		npctalk "感谢你帮助我们找到冒险家戈妮。", "青色#172ba04", bc_self;
		next;
		cutin "",255;
		cloakonnpcself( "Rookie#172ba05" );
		cloakonnpcself( "Denny#172ba05" );
		cloakonnpcself( "Magenta#172ba06" );
		cloakonnpcself( "Cyan#172ba04" );
		cloakonnpcself( "Molar#172ba04" );
		cloakonnpcself( "Canine#172ba04" );
		cloakonnpcself( "Danae#172ba04" );
		cloakonnpcself( "Gonie#172ba02" );
		mes "[公主]";
		mes "你最好现在就走。下次见。";
		ep17_2_bath = 13;
		completequest 17374;
		getitem 1000103,16;
		getexp 515668,0;
		close2;
		cloakonnpcself();
		end;
	}
	mes "[公主]";
	mes "即使你现在来找我，我也无能为力。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17372) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17373) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17374) == 1" );
	end;
}

ba_bath,285,297,7	duplicate(dummy_cloaked_npc)	Gonie#172ba01	4_M_GONY
ba_bath,282,296,7	duplicate(dummy_cloaked_npc)	Gonie#172ba02	4_M_GONY
ba_bath,283,295,7	duplicate(dummy_cloaked_npc)	Rookie#172ba05	4_M_ROOKIE
ba_bath,283,298,5	duplicate(dummy_cloaked_npc)	Rookie#172ba06	4_M_ROOKIE
ba_bath,281,298,7	duplicate(dummy_cloaked_npc)	Denny#172ba04	4_M_REBELLION3
ba_bath,285,294,1	duplicate(dummy_cloaked_npc)	Magenta#172ba05	4_M_GUNSLINGER2
ba_bath,285,299,5	duplicate(dummy_cloaked_npc)	Denny#172ba05	4_M_REBELLION3
ba_bath,287,298,3	duplicate(dummy_cloaked_npc)	Magenta#172ba06	4_M_GUNSLINGER2
ba_bath,287,295,7	duplicate(dummy_cloaked_npc)	Cyan#172ba04	4_F_REBELLION3
ba_bath,283,300,5	duplicate(dummy_cloaked_npc)	Molar#172ba04	4_M_REBELLION
ba_bath,281,295,7	duplicate(dummy_cloaked_npc)	Canine#172ba04	4_F_REBELLION3
ba_bath,283,293,7	duplicate(dummy_cloaked_npc)	Danae#172ba04	4_F_REBELLION2
ba_bath,284,297,7	duplicate(dummy_cloaked_npc)	Shrine#172ba03	4_EP17_BUCKETS
ba_bath,282,297,5	duplicate(dummy_cloaked_npc)	Boiler#172ba04	4_EP17_BASIC_B
ba_bath,280,297,5	duplicate(dummy_cloaked_npc)	Sweep#172ba03	4_EP17_CLEANER
//


// Daily : Sweepy's request
ba_bath,288,68,3	script	Sweep#172ba02	4_EP17_CLEANER,{
	if (checkweight(1000103,2) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_bath == 2) {
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "这是怎么回事？看你大老远跑来了，是来看锅炉的吗？";
		close3;
	}
	if (ep17_2_bath == 3) {
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "锅炉已经停了。这不是你来这里的原因吗？你不应该去报告吗？";
		close3;
	}
	if (ep17_2_bath < 13) {
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "这里还有什么可看的吗？你没有事情要做吗？";
		close3;
	}

	// Daily : Sweepy's request
	if (isbegin_quest(17378) == 0) {
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "这是怎么回事？我们还有故事可听吗？你还没有找到怪物的全部答案吗？";
		next;
		cutin "",255;
		select( "我想和你谈谈。" );
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "你想谈什么？我唯一能说的就是清洁。您对清洁感到好奇吗？";
		mes "这里的卫生非常重要，因为这是公共浴室。除了每天定期清洁外，我还会根据需要经常进行清洁。";
		next;
		mes "[扫]";
		mes "自动清洁娃娃可以清除到处都是的异物和污垢。这个基本政策是在打扫卫生时将所有客人都赶出浴室，但如果客人想继续洗澡，我们不应该打扰他们并等待。";
		next;
		mes "[扫]";
		mes "不过，不建议出来清洁的自动娃娃尽量不要靠近，因为它们很危险，而且只能用于清洁目的。";
		mes "其实那时候的清洁娃娃还没有现在这么强大。由于入侵者，该措施不可避免地被采取。";
		next;
		cutin "",255;
		select( "因为入侵者？" );
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "你以前见过入侵者吗？当我在浴室里发现他们时，我的入侵者开关被激活，我没有让他们进来。但他们却蜂拥而至，强行闯了进来。";
		next;
		mes "[扫]";
		mes "他们经过了水管、排水沟等可以贴合身体的地方。湖里的鱼也能通过管道进入。";
		mes "多亏了他们，清洁变得更加困难。入侵者甚至在我打扫卫生时进行干扰。他们甚至懒得帮我打扫卫生。";
		next;
		mes "[扫]";
		mes "这是一个澡堂。卫生应该是重中之重。清洁工自动人偶因此而得到强化。";
		next;
		mes "[扫]";
		mes "入侵者后退了一步，但他们还没有完全消失。所以，清洁工娃娃也只能保持强化形态。因此，清洁时接触时要小心。";
		next;
		cutin "",255;
		select( "你经常被打扰吗？" );
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "我不知道人类想要什么。";
		mes "然而，人类需要洗澡，也需要洗澡的空间。交给我的任务是打扫卫生。这就是我所知道的一切。";
		next;
		mes "[扫]";
		mes "有两批入侵者。一个是沉迷于浴室，另一个是沉迷于它的设施。他们的共同点是都对某件事着迷。";
		next;
		mes "[扫]";
		mes "沉迷于沐浴的人类不配合清扫，沉迷于设施的人类破坏了设施和管理设施的自动人偶。";
		mes "锅炉被撕碎被盗，管道被破坏，自动娃娃被拆除。另一位则表示，他们不知道需要多长时间才能恢复过来。府邸其他地方的情况也相差不大，整个府邸都陷入了这样的困境。";
		next;
		mes "[扫]";
		mes "区分客人和入侵者的最大特征是什么？为什么客人和入侵者有不同的行为模式？人类如何区分两者之间的区别？";
		next;
		mes "[扫]";
		mes "我们这些自动娃娃，认为我们不知道是很自然的，因为我们之前只和客人接触过。";
		mes "我们无法感受到人类能够感受到的东西。我什至感觉不到手末端的触感。";
		next;
		mes "[扫]";
		mes "但即使我不知道这样的事情，也不会对我的工作造成问题。我可以打扫。我可以完成交给我的任务。被指定为垃圾的东西应该被清除。";
		next;
		mes "[扫]";
		mes "人类是人类，自动娃娃是自动娃娃。";
		next;
		mes "[扫]";
		mes "但是...如果你能帮我做一件事，我会很高兴。你有兴趣吗？";
		next;
		cutin "",255;
		if (select( "我很乐意。", "我有点忙。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[扫]";
			mes "我懂了。我明白。我了解到我不应该占用忙碌的客人的时间。";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[扫]";
		mes "那么我可以请你消灭^0000CD15个沸腾食人鱼和15个沸腾马克^000000。他们是澡堂里错过的主要原因之一。";
		next;
		mes "[扫]";
		mes "府邸的其他地方也缺人手，只能自己动手了。我会尽可能地清理，但数量太多了。不能耽误太多，因为事关卫生和安全。那么，请。";
		setquest 17378;
		completequest 17378;
		setquest 17379;
		close3;
	}
	cutin "ep172_beta",2;
	mes "[扫]";
	mes "怎么了？你是来帮助我的吗？";
	next;
	.@playtime = checkquest(17380,PLAYTIME);
	.@hunting = checkquest(17379,HUNTING);

	if (.@playtime == 0 || .@playtime == 1)
		.@menu$ = "^C0C0C0Fish extermination - Cooldown^000000";
	else if (.@hunting == 0 || .@hunting == 1)
		.@menu$ = "^C0C0C0Fish extermination - On Progress^000000";
	else
		.@menu$ = "Fish extermination";

	if (select( .@menu$, "我对清洁很好奇。" ) == 2) {
		mes "[扫]";
		mes "打扫卫生是我经常做的事情。只是目前困难重重，因为有太多的障碍。";
		close3;
	}
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[扫]";
		mes "嗯..我很高兴你能来帮助我。但我听说人类需要大量的休息。请天亮后再回来。";
		close3;
	}
	switch( .@hunting ) {
	case -1:
		mes "[扫]";
		mes "感谢您的帮助。那我可以请你消灭^0000CD15个沸腾食人鱼和15个沸腾马克^000000吗？";
		next;
		if (select( "好吧。", "我今天想休息一下.." ) == 2) {
			mes "[扫]";
			mes "我懂了。我听说人类应该经常休息。";
			close3;
		}
		mes "[扫]";
		mes "那我就让你来处理吧。";
		setquest 17379;
		if (isbegin_quest(17380) > 0)
			erasequest 17380;
		close3;
	case 0:
	case 1:
		mes "[扫]";
		mes "你处理了吗？";
		next;
		mes "[锅炉]";
		mes "你忘记了吗？那么请消灭^0000CD15个沸腾食人鱼和15个沸腾马克^000000。";
		close3;
	case 2:
		mes "[扫]";
		mes "你处理了吗？";
		next;
		mes "[锅炉]";
		mes "完美的。非常感谢。如果你天亮后能回来的话我会更加感激。";
		erasequest 17379;
		setquest 17380;
		getitem 1000103,2;
		getexp 722940,506070;
		close3;
	}
	end;

OnInit:
	// Daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17374) == 2 && checkquest(17379,HUNTING) == -1 && checkquest(17380,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(17380,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17379,HUNTING) == 2" );
	end;
}

ba_bath,289,65,5	duplicate(dummy_cloaked_npc)	Boiler#172ba03	4_EP17_BASIC_B

ba_bath,284,67,5	script	Valve#172ba01	4_EP17_CLEANER_W,{
	npctalk "嘟嘟-你迷路了吗？", "", bc_self;
	end;
}

ba_bath,289,64,5	duplicate(dummy_cloaked_npc)	Valve#172ba02	4_EP17_CLEANER_W

ba_bath,254,270,3	script	Nameless Spring#bathifo	4_BOARD3,{
	mes "^006600“无名泉”^000000";
	mes "^006600这里是你想要忘记一切、沉浸在大自然之中的地方。但是，如果事情太困难了。请向我们寻求帮助。^000000";
	close;
}

ba_bath,259,191,3	script	Footbath#bathifo	4_BOARD3,{
	mes "^006600��足浴��^000000";
	mes "^006600无需宏伟。放心去泡脚吧。^000000";
	close;
}

ba_bath,162,139,3	script	Fountain of Wisdom#bathifo	4_BOARD3,{
	mes "^006600“智慧之泉-公共浴池”^000000";
	mes "^006600瓦蒙特宅邸中最古老、最著名的浴室。把自己泡在这个浴缸里，思考一下内心最深处、最困难的事情。答案一定会出现。^000000";
	close;
}

ba_bath,31,276,5	script	Cold Spring#bathifo	4_BOARD3,{
	mes "^006600“冷泉-冷浴”^000000";
	mes "^0000CD想要冰凉就泡在冷泉里吧。浴缸里的冷气会把你紊乱的精神凝聚起来。^000000";
	close;
}



// Sidequest quest : I don't like it - Step 1
// Daily quest : Warehouse Clearance
// Daily quest : Basement Clearance
ba_2whs01,150,51,5	script	Chirp#172wh01	4_EP17_BASKET,{
	if (checkweight(1000103,3) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (BaseLevel < 160) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "这个地方很危险。";
		mes "当您能够更好地保护自己时，请再次回来。";
		next;
		mes "- 您必须至少达到 160 级才能执行此任务。 -";
		close3;
	}
	if (ep17_2_main < 9) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "由于所有地方都向特殊客人开放，我们无法阻止您来到这里。不过，如果你要环视仓库，就不应该碰这里的任何东西。";
		close3;
	}
	// Sidequest quest
	if (ep17_2_chirp == 0) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "这是什么乱七八糟的事情啊。";
		mes "你怎么进来的？";
		mes "你甚至没有带钥匙。";
		next;
		cutin "",255;
		if (select( "这里是干什么的？", "我不想惹麻烦，我就回去了。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "也许你只是不小心进来了。";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "一个人类。";
		mes "另外……客人？";
		next;
		mes "[叽叽喳喳]";
		mes "你来这里是为了寻找宅邸的设计图吗？";
		mes "如果你能等的话我会把它带给你。";
		mes "我记得有一句话，人缺乏耐心。";
		next;
		mes "[叽叽喳喳]";
		mes "这是瓦蒙特宅邸的第二个仓库。";
		next;
		cutin "",255;
		select( "仓库...？" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "哦，外面没有人类仓库的概念吗？仓库是存放不用的东西的地方。";
		unittalk getcharid(3), "" + strcharinfo(0) + " : I know that!", bc_self;
		next;
		mes "[叽叽喳喳]";
		mes "我来这里是为了获取宅邸的设计图和餐厅的食材。你亲自来这里是因为不信任我吗？如果是这种情况，请不要担心。";
		next;
		mes "[叽叽喳喳]";
		mes "我负责仓库很长时间了，我可以快速存储旧的或很小的物品。";
		mes "不用说，我也记得蓝图在哪里。";
		next;
		mes "[叽叽喳喳]";
		mes "我是自动娃娃。我们不会失去记忆。";
		next;
		cutin "",255;
		if (select( "我不是在寻找蓝图。", "这个地方很复杂。" ) == 1) {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "是这样吗？我误解了情况。";
			mes "我没想到会有人参观仓库。通常千里迢迢来到这里的人都是小偷。";
			next;
			mes "[叽叽喳喳]";
			mes "这并不意味着你是小偷。因为你没有资格成为客人。瓦蒙特宅邸并不邀请所有人作为客人。";
			next;
			mes "[叽叽喳喳]";
			mes "就算你有这个意图，在这里想要找到你想要的东西也不容易。";
			next;
			select( "这个地方非常复杂。" );
		}
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "当然，这是瓦蒙特的一个旧仓库。";
		mes "现在这么大，是因为没有足够的空间来容纳来自整个大陆的所有物品，这就是为什么我们不断扩建和翻新它。";
		next;
		mes "[叽叽喳喳]";
		mes "虽然看起来很复杂，但实际上并没有那么复杂，因为一切都是按照它的分类组织的。";
		next;
		mes "[叽叽喳喳]";
		mes "这是可能的，因为它是一个非常大的空间，与你在外面看到的不同。所以如果你在等的话，请回去等我……我很快就会给你带来。";
		next;
		cutin "",255;
		select( "为什么？" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "我想我会因为清洁机器人坏了而耽误一点。这是一个被入侵者入侵的自动机器人。我正在考虑如何清理它造成的混乱。";
		next;
		mes "[叽叽喳喳]";
		mes "^CC0000点燃它^000000将是最干净的方法，你不觉得吗？";
		next;
		cutin "",255;
		select( "什么？一切都会被烧毁。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "没关系。它们都是防火的。就算烧掉一切，豪宅图纸都在其他仓库里。我们必须走远一点，但没关系。放心。";
		next;
		mes "[叽叽喳喳]";
		mes "一次处理所有事情是最快、最干净的。";
		next;
		cutin "",255;
		select( "那不是问题..." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "那么，问题出在哪里呢？";
		next;
		cutin "",255;
		if (select( "我宁愿给保安打电话。", "我宁愿给上级打电话。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "给上级打电话是什么意思？";
			mes "你是要我让上级来解决这个问题吗？";
		}
		else {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "打电话给保安也可以，但是要花很多时间。";
			mes "你同意吗？安全措施将会到位，至少需要一天的时间才能控制并处理他们。";
		}
		next;
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "当你可以自己解决问题时，没有必要浪费时间来解决问题，不是吗？";
		next;
		mes "[叽叽喳喳]";
		mes "但是，我们被告知要尽可能尊重客人的意见。请稍等。";
		unittalk getcharid(3), "" + strcharinfo(0) + " : I'm so eager to...", bc_self;
		progressbar_npc "00FF00",3;
		next;
		cloakoffnpcself( "Beta#ep172_2whs01-00" );
		cutin "ep172_beta",0;
		mes "[测试版]";
		mes "你打电话来了吗？这是怎么回事？长吗？我现在很忙。";
		next;
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "看看这里。你怎么认为？";
		mes "你想让我怎么处理这里所有坏掉的清洁机器人？";
		mes "你有什么好主意吗？";
		next;
		cutin "ep172_beta",0;
		mes "[测试版]";
		mes "哦。情况很严重。";
		next;
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "正确的？现在告诉我如何快速解决这个问题。";
		mes "供这里的人类客人听到。因为客人想让我打电话给你寻求另一个解决方案。";
		next;
		cutin "ep172_beta",0;
		mes "[测试版]";
		mes "问题不仅仅出在这个地方。我现在无法派保安到这里。";
		next;
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "我现在需要给这里的客人拿点东西。如果我现在进去，我会像他们一样崩溃吗？可以吗？";
		next;
		cutin "ep172_beta",0;
		mes "[测试版]";
		mes "你不能这么做，但我帮不了你。我会尽快向您发送帮助。但要等到明天。";
		next;
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "我可以生火吗？";
		next;
		cutin "ep172_beta",0;
		mes "[测试版]";
		mes "不，不要。坏掉的机器人只会移动到另一个地方。";
		mes "另外，我们不能让我们的客人冒这样的风险。";
		next;
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "我有信心我能阻止火势蔓延。";
		next;
		cutin "ep172_beta",0;
		mes "[测试版]";
		mes "你不能。你越是这样拖延我，事情的进展就越慢。再等一会儿。并请求客人的理解。";
		next;
		cloakonnpcself( "Beta#ep172_2whs01-00" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "你见过吗？即使我打电话给我的上级，现在也没有任何帮助。我什至无法继续执行我的生火解决方案。如果你不跟我说话的话我本来可以开始的。";
		next;
		mes "[叽叽喳喳]";
		mes "我现在该怎么办？我需要从那里得到一些东西，如果我去了那里，我最终会像他们一样崩溃。我毕竟不是战斗型人偶。";
		next;
		mes "[叽叽喳喳]";
		mes "我可以在一定程度上避免它们，但我很担心，因为它们太多了。如果同时攻击的话，就算是最强的人偶也会被瞬间摧毁。";
		next;
		mes "[叽叽喳喳]";
		mes "当然，为了这个要求，我可以牺牲自己。";
		mes "但是，我认为这不是现在的选择。如果我为了更重要的事情而牺牲自己，那会更有价值。";
		next;
		mes "[叽叽喳喳]";
		mes "再说了，仓库还有谁来管理呢？";
		mes "甚至没有人知道什么在哪里。";
		next;
		cutin "",255;
		select( "我应该整理一下吗？" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "" + strcharinfo(0) + "， 你确定吗？";
		mes "你是说要收拾那些清洁机器人吗？";
		next;
		if (select( "我做不到吗？", "你看起来很困扰。" ) == 2) {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "你是在怜悯我在仓库的自动人偶面前无助吗？人类会对自己没有做过的事情负责吗？";
		}
		else {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "一个人的错就是全人类的错吗？";
		}
		next;
		cutin "",255;
		select( "不。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "是这样吗？这就是我们误解的原因。他们都是相互联系的，所以他们共享一切。既是责备，又是责任。";
		next;
		cutin "",255;
		select( "瓦蒙特也是人类。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "他不一样。他是一个聪明人。";
		mes "如果他现在在这里，所有的问题都可以解决。或者也许问题本身并没有发生。";
		next;
		mes "[叽叽喳喳]";
		mes "感谢您的帮助，但有一个通知，要求尽可能配合客人，不要对您造成伤害。我再想想别的办法。任何事情都会做。";
		next;
		cutin "",255;
		select( "我是一名战士。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "... 是这样吗？如果你是一名战士，你的工作就是处理这些事情，不是吗？那不会伤害你吗？";
		next;
		cutin "",255;
		select( "一点也不。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "我明白了，你是一个以这种事情为乐的人。我以前听说过。那我想请你帮个忙。噢，当然，我会奖励你的。";
		emotion ET_SWEAT, getcharid(3);
		next;
		mes "[叽叽喳喳]";
		mes "请收集^0000CD五台清洁机器人^000000。";
		mes "那样我就能渡过这个难关了。";
		mes "我希望你能从中找到乐趣。";
		ep17_2_chirp = 1;
		setquest 17342;
		close3;
	}
	if (ep17_2_chirp == 1) {
		switch( checkquest(17342,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "你完成了吗？他们的数量仍然太多了。我需要你更加努力。";
			mes "请收集^0000CD五台清洁机器人^000000。";
			mes "那样我就能渡过这个难关了。";
			close3;
		case 2:
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "你喜欢吗？我想知道你是否会从破坏它中获得乐趣，还是从保护中获得乐趣，但我不必知道这一点。";
			next;
			mes "[叽叽喳喳]";
			mes "多亏了你，我才能够取回我们需要的东西。";
			mes "在这个水平上，你可以比平常更快地移动你的身体。";
			next;
			mes "- 隆隆声 -";
			next;
			mes "- 嘎嘎作响 -";
			next;
			mes "[叽叽喳喳]";
			mes "你听到了吗？";
			next;
			cutin "",255;
			select( "这是嘎嘎声吗？" );
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "是的，没错。保持静止，保持安静。";
			next;
			mes "- 嘎嘎作响 -";
			next;
			mes "- ...哦...呃...-";
			next;
			mes "[叽叽喳喳]";
			mes "这是自动人偶根据声音模式发出的声音。但这不是附近自动人偶的声音。离这里有点远。";
			next;
			mes "[叽叽喳喳]";
			mes "我认为是从地下室来的。如果真的是从地下室来的，那可就大事了。";
			next;
			cutin "",255;
			select( "为什么？" );
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "与这个仓库不同的是，只有瓦蒙特可以进入地下室。那里有很多秘密和危险的东西。";
			emotion ET_SURPRISE;
			next;
			mes "[叽叽喳喳]";
			mes "如果自动人偶或人类误入并弄乱了危险物体。";
			mes "可预见的破坏肯定会发生。";
			next;
			mes "[叽叽喳喳]";
			mes "如果这真的是来自地下，而且是自动人偶的声音，那么等待我们的只有毁灭。";
			next;
			mes "[叽叽喳喳]";
			mes "这个地方在大规模爆炸中化为灰烬只是时间问题。这和我放火的计划是不同层次的。";
			next;
			mes "[叽叽喳喳]";
			mes "地下潜伏着危险。";
			mes "必须有人检查一下。如果你查一下到底发生了什么，我们或许可以请你的上级尽快过来。那么就没事了。";
			next;
			mes "[叽叽喳喳]";
			mes "我们需要采取一些措施来阻止这种情况。";
			next;
			mes "[叽叽喳喳]";
			mes "我得去拿图纸和材料，同时把破损的自动人偶整理起来。";
			next;
			mes "[叽叽喳喳]";
			mes "" + strcharinfo(0) + " 是一名战斗员。";
			mes "那么剩下的就是...";
			next;
			cutin "",255;
			select( "……去检查一下。" );
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "哦，你会吗？这是出乎意料的。";
			mes "我不敢相信你不做这么多的安全工作。我会记住这一点。照顾客人的娱乐是我们的工作之一。";
			emotion ET_SWEAT, getcharid(3);
			next;
			mes "[叽叽喳喳]";
			mes "^0000CD仓库的最上部^000000有通往地下的楼梯。下楼梯查看下面的情况。不要碰那里的任何东西。";
			next;
			mes "[叽叽喳喳]";
			mes "继续吧，完成后回来。";
			ep17_2_chirp = 2;
			erasequest 17342;
			setquest 17343;
			getitem 1000103,3;
			close3;
		}
	}
	if (ep17_2_chirp == 2) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "^0000CD仓库的最上部^000000有通往地下的楼梯。下楼梯查看下面的情况。不要碰那里的任何东西。";
		close3;
	}
	if (ep17_2_chirp == 3) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "你检查过吗？地下情况如何？";
		next;
		cutin "",255;
		select( "它被锁了。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "被锁了吗？可是自动娃娃是怎么进去的呢？这甚至是一个更大的问题。这证明宅邸的安全措施存在漏洞，入侵者也是从唯一入口以外的通道进入的。";
		next;
		mes "[叽叽喳喳]";
		mes "检查一下是个好主意...你说它被锁了。我不能强迫自己进去，我需要找到应急钥匙。";
		next;
		mes "[叽叽喳喳]";
		mes "仅供主人使用，但下到地下室后，主人留下了一把应急钥匙，只有在主人出了问题或发生危险的紧急情况时才能使用。";
		next;
		mes "[叽叽喳喳]";
		mes "那将是一个危险的紧急情况。";
		next;
		cutin "",255;
		select( "把它给我。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "你喜欢寻宝吗？或者你有非凡的寻宝天赋？如果没有，我希望你从现在开始就拥有它。";
		next;
		mes "[叽叽喳喳]";
		mes "主人在仓库里藏了^0000CD总共三把应急钥匙^000000。而且这里还有很多破损的自动人偶。";
		next;
		cutin "",255;
		select( "这意味着..." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "这是正确的。是时候让你再次享受乐趣了。我很高兴再次帮助您喜欢这个。";
		next;
		mes "[叽叽喳喳]";
		mes "你可以按照我指出的提示找到所有紧急钥匙，进入地下室。用它来解锁通往地下室的门。";
		next;
		mes "[叽叽喳喳]";
		mes "<NAVI>[旋转世界]<INFO>ba_2whs01,110,217,0,101,0</INFO></NAVI>。他说所有的真相都在其之下。尝试找到一个有此类物品的地方。";
		next;
		mes "[叽叽喳喳]";
		mes "他还说，在<NAVI>[地方]<INFO>ba_2whs01,110,217,0,101,0</INFO></NAVI>，你的呼吸会冻结，据说一切都永远保持不变。";
		next;
		mes "[叽叽喳喳]";
		mes "最后，他说所有的空气都必须是空心的。他还说，这会消耗大量能源。我什至猜不到<NAVI>[这样的地方]<INFO>ba_2whs01,110,217,0,101,0</INFO></NAVI>在哪里。";
		next;
		mes "[叽叽喳喳]";
		mes "我不知道所有的提示意味着什么，但你的冒险者和我们的主人一样都是人类。你可能会解释它们。";
		next;
		mes "[叽叽喳喳]";
		mes "我不指望你能解读出哪怕一行伟大导师的遗志，但是……如果你不知道的话，你就到处寻找吧。然后继续前进然后回来。";
		next;
		mes "[叽叽喳喳]";
		mes "哦，我忘了告诉你这一点。";
		mes "仓库非常危险，必须非常小心。好的？";
		ep17_2_chirp = 4;
		erasequest 17344;
		getitem 1000103,3;
		setquest 17345;
		setquest 17346;
		setquest 17347;
		close3;
	}
	if (ep17_2_chirp == 4) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "<NAVI>[旋转世界]<INFO>ba_2whs01,110,217,0,101,0</INFO></NAVI>。他说所有的真相都在其之下。尝试找到一个有此类物品的地方。";
		next;
		mes "[叽叽喳喳]";
		mes "他还说，在<NAVI>[地方]<INFO>ba_2whs01,110,217,0,101,0</INFO></NAVI>，你的呼吸会冻结，据说一切都永远保持不变。";
		next;
		mes "[叽叽喳喳]";
		mes "最后，他说所有的空气都必须是空心的。他还说，这会消耗大量能源。我什至猜不到<NAVI>[这样的地方]<INFO>ba_2whs01,110,217,0,101,0</INFO></NAVI>在哪里。";
		next;
		mes "[叽叽喳喳]";
		mes "我不知道所有的提示意味着什么，但你的冒险者和我们的主人一样都是人类。你可能会解释它们。";
		next;
		mes "[叽叽喳喳]";
		mes "我不指望你能解读出哪怕一行伟大导师的遗志，但是……如果你不知道的话，你就到处寻找吧。然后继续前进然后回来。";
		close3;
	}
	if (ep17_2_chirp < 11) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "你检查过地下的情况吗？";
		mes "你怎么认为？我明白了...你还没有检查过。我会等待。";
		close3;
	}
	if (ep17_2_chirp == 11) {
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "你检查过地下的情况吗？";
		mes "它怎么样？还好你回来了，我已经在想办法告诉Alpha客人" + strcharinfo(0) + "已经去世的消息了。";
		emotion ET_SWEAT, getcharid(3);
		next;
		mes "[叽叽喳喳]";
		mes "这对我来说非常不愉快。但幸运的是，你还活着。你为什么花了这么长时间？你是否遇到过你的能力无法解决的问题？";
		next;
		mes "[叽叽喳喳]";
		mes "我听说，人类有时会鲁莽地挑战超出自己能力范围的事情。";
		next;
		cutin "",255;
		select( "它是..." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "所以，总结一下" + strcharinfo(0) + "的话，如果你没有打开门进入地下的话，就不会有危险，而且在下面也很安全。";
		next;
		cutin "",255;
		select( "是的。" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "还有一个人获得了新的身体。";
		next;
		mes "[叽叽喳喳]";
		mes "尽管我警告过你不要碰任何东西，你还是收集了构成身体的部件。这是正确的吗？";
		next;
		cutin "",255;
		select( "是的..." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "我不知道那是什么样子。在最坏的情况下，它可能会从地下室出现并摧毁我们。这是正确的吗？";
		next;
		cutin "",255;
		select( "但它并没有离开..." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "这样想吧。为什么主人要费尽心思把头放在危险地带呢？一颗头颅独自放置在充满危险品的地方。或许那东西也是危险的。";
		next;
		mes "[叽叽喳喳]";
		mes "即使是最高级的战斗自动人偶也不是在地下室的危险地带制造的。它可能是下一代武器。如果你能够将其区分为盟友，那你就很幸运了。";
		next;
		mes "[叽叽喳喳]";
		mes "如果真是这样的话，自动人偶带来的灾难就不再是问题了。";
		next;
		mes "[叽叽喳喳]";
		mes "现在，您想如何解决这个问题？" + strcharinfo(0) + "，手脚并用地走到地下室，好意地完成了它的身体。";
		next;
		cutin "",255;
		select( "这太过分了..." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "你打算做什么，" + strcharinfo(0) + "。你要回去那里享受更多乐趣吗？但如果您要自己做，则无需每次都要求。";
		next;
		cutin "",255;
		select( "....." );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "幸运的是，你说过它不会离开地下室。那么，就只有一个办法了。";
		next;
		mes "[叽叽喳喳]";
		mes "^0000CD我要悄悄地掩盖这件事^000000。在这座宅子里，世界上没有人知道这件事，只有我和" + strcharinfo(0) + "。";
		next;
		mes "[叽叽喳喳]";
		mes "您还必须分担该角色。我会留在这里阻止任何人进出地下室。我们还将监视那个东西，看看它是否会离开地下室。";
		next;
		mes "[叽叽喳喳]";
		mes "^0000CD" + strcharinfo(0) + "应该每天都来这里^000000，帮忙清理仓库和地下室。";
		next;
		cutin "",255;
		select( "清理？" );
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "这不是像坏掉的清洁机器人那样的问题。在检查仓库时，我们发现里面有一些残留的入侵者。他们说这是猎心者散兵。正如我之前所说，我有很多工作要做。";
		next;
		mes "[叽叽喳喳]";
		mes "为了保护仓库里的货物，我希望你清理掉那些猎心者。并清理掉地下室里坏掉的仓库管理员，这样我们就不会与地下室里的那个东西为敌了。";
		next;
		mes "[叽叽喳喳]";
		mes "没有什么可失去的，您可以将其用于个人娱乐。当然，我会相应地付给你钱。我会登记你的数据，这样你就可以在没有紧急钥匙的情况下进出地下室。";
		next;
		select( "当然。" );
		mes "[叽叽喳喳]";
		mes "谢谢。我会给你这张优惠券作为你的承诺的凭证。那么，我们就保密吧。";
		mes "我也会把应急钥匙拿回来。";
		ep17_2_chirp = 12;
		completequest 17358;
		delitem 1000102,3;
		getitem 1000103,6;
		getexp2 3156050,0;
		close3;
	}

	// Daily quests
	cutin "ep172_beta",2;
	mes "[叽叽喳喳]";
	mes "你是来兑现我们的承诺的吗？";
	mes "您想从事哪项工作？";
	next;
	.@quest_menu$[0] = callsub( S_Menu, 17359,17360, "Warehouse Clearance" );
	.@quest_menu$[1] = callsub( S_Menu, 17361,17362, "Basement Clearance" );

	switch( select( .@quest_menu$[0], .@quest_menu$[1], "有什么问题吗？" ) ) {
	case 1:
		.@lvl = 160;
		.@hunt = 17359;
		.@cooldown = 17360;
		break;
	case 2:
		.@lvl = 170;
		if (BaseLevel < .@lvl) {
			cutin "ep172_beta",2;
			mes "[叽叽喳喳]";
			mes "什么？你是说地下室吗？";
			mes "就像我说的，地下室是非常危险的地方，所以...对你来说看起来很困难。把生命花在更有价值的事情上怎么样？";
			next;
			cutin "",255;
			mes "- 您必须至少达到" + .@lvl + "级别才能执行此任务。 -";
			close;
		}
		.@hunt = 17361;
		.@cooldown = 17362;
		break;
	case 3:
		cutin "ep172_beta",2;
		mes "[叽叽喳喳]";
		mes "还没有什么问题。但没有人知道它会持续多久。不要放松警惕";
		close3;
	}
	switch( checkquest(.@cooldown,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[叽叽喳喳]";
		mes "如果我们发出太大的声音，地下室里的那个东西可能会跑到这里来。请天亮后回来。";
		close3;
	case 2:
		erasequest .@cooldown;
		break;
	}
	switch( checkquest(.@hunt,HUNTING) ) {
	case -1:
		if (.@hunt == 17359) {
			mes "[叽叽喳喳]";
			mes "你还真是喜欢打架啊。那么，我想请你处理一下仓库里的《<<CLR0>>>20号猎心散兵^000000。";
		}
		else {
			mes "[叽叽喳喳]";
			mes "你还真是喜欢打架啊。然后，我想让你去处理地下室的^0000CD20个破损仓库管理员^000000。";
		}
		next;
		if (select( "我明白了。", "我今天想休息" ) == 2) {
			mes "[叽叽喳喳]";
			mes "是这样吗？我以为你会为了个人娱乐而每天都这样做。";
			mes "这是出乎意料的。";
			close3;
		}
		mes "[叽叽喳喳]";
		mes "与此同时，我会在这里尽我所能。";
		setquest .@hunt;
		close3;
	case 0:
	case 1:
		mes "[叽叽喳喳]";
		mes "你照顾好一切了吗？";
		next;
		if (.@hunt == 17359) {
			mes "[叽叽喳喳]";
			mes "你没看到他们就这么跑来跑去吗？";
			mes "那么，我想请你处理一下仓库里的《<<CLR0>>>20号猎心散兵^000000。";
			close3;
		}
		mes "[叽叽喳喳]";
		mes "你没看到他们就这么跑来跑去吗？";
		mes "然后，我想让你去处理地下室的^0000CD20个破损仓库管理员^000000。";
		close3;
	case 2:
		mes "[叽叽喳喳]";
		mes "你照顾好一切了吗？";
		next;
		mes "[叽叽喳喳]";
		mes "我可以确认人口减少了。";
		mes "现在，我可以开始我的工作了。";
		mes "谢谢。请天亮后回来。";
		setquest .@cooldown;
		erasequest .@hunt;
		getitem 1000103,1;
		if (.@hunt == 17359)
			getexp 4431108,3101780;
		else
			getexp 5974540,4182156;
		close3;
	}
	end;

S_Menu:
	.@string$ = getarg(2);

	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( checkquest(getarg(0),HUNTING) ) {
		case -1:
			.@menu$ = .@string$;
			break;
		case 0:
		case 1:
			.@menu$ = "^777777" + .@string$ + " - Ongoing^000000";
			break;
		case 2:
			.@menu$ = "" + .@string$ + " - Completed";
			break;
		}
		break;
	case 0:
	case 1:
		.@menu$ = "^777777" + .@string$ + " - Waiting^000000";
		break;
	case 2:
		.@menu$ = .@string$;
		break;
	}
	return .@menu$;

OnInit:
	// sidequest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 160 && ep17_2_main >= 9 && ep17_2_chirp == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17342,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17344) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17358) == 1" );

	// daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17358) == 2 && checkquest(17359,HUNTING) == -1 && checkquest(17360,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(17360,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17359,HUNTING) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17358) == 2 && BaseLevel >= 170 && checkquest(17361,HUNTING) == -1 && checkquest(17362,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(17362,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(17361,HUNTING) == 2" );
	end;
}

ba_2whs01,153,49,1	duplicate(dummy_cloaked_npc)	Beta#ep172_2whs01-00	4_EP17_BASIC_B

ba_2whs01,110,218,0	script	#ep172_key_ev_0	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep17_2_chirp != 4)
		end;
	.@id = atoi(replacestr(strnpcinfo(2),"ep172_key_ev_",""));
	.@quest_id = (17345 + .@id);
	if (isbegin_quest(.@quest_id) == 1)
		cloakoffnpcself( "Emergency Key#ep172_" + .@id );
	end;
}

ba_2whs01,14,282,0	duplicate(#ep172_key_ev_0)	#ep172_key_ev_1	HIDDEN_WARP_NPC,3,3
ba_2whs01,222,257,0	duplicate(#ep172_key_ev_0)	#ep172_key_ev_2	HIDDEN_WARP_NPC,3,3

ba_2whs01,110,218,0	script(CLOAKED)	Emergency Key#ep172_0	4_ENERGY_WHITE,{
	if (checkweight(1000102,1) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep17_2_chirp != 4)
		end;
	.@id = atoi(replacestr(strnpcinfo(2),"ep172_",""));
	.@quest_id = (17345 + .@id);
	switch( .@id ) {
	case 0:
		.@word$ = "Let's take a closer look under the map...";
		break;
	case 1:
		.@word$ = "Oh, it's cold...";
		break;
	case 2:
		.@word$ = "Let me put my hand in...";
		break;
	}
	if (isbegin_quest(.@quest_id) == 1) {
		setpcblock PCBLOCK_NPC, true;
		unittalk getcharid(3), "" + strcharinfo(0) + " : She said there's an emergency key over here... " + .@word$, bc_self;
		sleep2 2500;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I've found it!!!", bc_self;
		sleep2 2500;
		setpcblock PCBLOCK_NPC, false;
		erasequest .@quest_id;
		getitem 1000102,1;
		if (isbegin_quest(17345) != 0 || isbegin_quest(17346) != 0 || isbegin_quest(17347) != 0)
			unittalk getcharid(3), "" + strcharinfo(0) + " : Let's go find the other emergency key.", bc_self;
		else {
			unittalk getcharid(3), "" + strcharinfo(0) + " : Now that you've found all the emergency keys, let's go open the locked door.", bc_self;
			ep17_2_chirp = 5;
			setquest 17348;
		}
		cloakonnpcself();
		end;
	}
	end;

OnInit:
	.@id = atoi(replacestr(strnpcinfo(2),"ep172_",""));
	.@quest_id = 17345 + .@id;
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(" + .@quest_id + ") == 1" );
	end;
}

ba_2whs01,14,282,0	duplicate(Emergency Key#ep172_0)	Emergency Key#ep172_1	4_ENERGY_WHITE
ba_2whs01,222,257,0	duplicate(Emergency Key#ep172_0)	Emergency Key#ep172_2	4_ENERGY_WHITE

ba_2whs01,276,290,0	script	Lock#ep172_2whs01-00	4_ENERGY_BLUE,{
	if (ep17_2_chirp == 2) {
		mes "- 门锁得很紧。 -";
		next;
		mes "- 嘎嘎作响 -";
		next;
		mes "- W...谁...-";
		next;
		mes "- 我听到比在入口处听到的声音稍微清晰一点的声音。但我不能下去查看，因为我没有钥匙。我们回去问问吧。 -";
		ep17_2_chirp = 3;
		erasequest 17343;
		setquest 17344;
		close;
	}
	if (ep17_2_chirp == 5) {
		setpcblock PCBLOCK_NPC, true;
		unittalk getcharid(3), "I put three emergency keys in the lock and the door opened.", bc_self;
		sleep2 2000;
		npctalk "紧急开门。", "", bc_self;
		sleep2 2000;
		npctalk "紧急1级。", "", bc_self;
		sleep2 2000;
		npctalk "优先考虑的是生命保护。", "", bc_self;
		sleep2 2000;
		npctalk "如发现人员受伤，请检查生命体征并迅速开展救援。", "", bc_self;
		sleep2 2000;
		setpcblock PCBLOCK_NPC, false;
		ep17_2_chirp = 6;
		erasequest 17348;
		setquest 17349;
		warp "ba_2whs02",338,332;
		end;
	}
	if (ep17_2_chirp >= 6) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "欢迎。", "", bc_self;
		sleep2 2000;
		setpcblock PCBLOCK_NPC, false;
		warp "ba_2whs02",338,332;
		end;
	}
	mes "- 门锁得很紧。 -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17343) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17348) == 1" );
	end;
}


ba_2whs02,37,312,3	script	#ep172_ev2whs01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep17_2_chirp >= 6 || ep17_2_chirp <= 10) {
		setnpcdisplay( "Head#ep172_2whs01", 4_GHOSTRING );
		cloakoffnpcself( "Head#ep172_2whs01" );
		end;
	}
	if (ep17_2_chirp > 10) {
		setnpcdisplay( "Head#ep172_2whs01", 4_F_KR_TIGER );
		cloakoffnpcself( "Head#ep172_2whs01" );
		end;
	}
	end;
}

ba_2whs02,37,312,3	script(CLOAKED)	Head#ep172_2whs01	4_GHOSTRING,{
	if (ep17_2_chirp < 6)
		end;
	if (ep17_2_chirp == 6) {
		mes "[头部]";
		mes "嘿~谁在那儿~";
		next;
		select( "我听到这里有声音。" );
		mes "[头部]";
		mes "掌握？你是主人吗？快点！是什么让你花了这么长时间？";
		next;
		mes "[头部]";
		mes "可是……你的脸色却发生了很大的变化。这是怎么回事？你去哪儿了？你这阵子都在干什么？";
		next;
		select( "我不是瓦蒙特。" );
		mes "[头部]";
		mes "那么...你是谁？谁是主人？你是怎么进来的？";
		next;
		select( "我是客人。" );
		mes "[头部]";
		mes "客人？哦，原来你是应主人的邀请而来的？我从来没有见过客人！事实上，我还是第一次见到除了我师父以外的人！很高兴见到你。第二个人！我是 T2WH-0448。";
		next;
		mes "[T2WH-0448]";
		mes "顺便问一下，这几天外面怎么样？";
		mes "我已经睡了很长时间了。最近太吵了，所以我就醒了。";
		next;
		mes "[T2WH-0448]";
		mes "……其实我对外面的事情和过去的事情一无所知。";
		mes "我从出生起就在这里。我唯一知道的就是师父给我讲的故事。";
		next;
		mes "[T2WH-0448]";
		mes "他说等他处理完我后会带我出去。他说他会把我和其他自动玩偶联系起来。所以我才一直在等待师父回来。";
		next;
		mes "[T2WH-0448]";
		mes "主人来已经很久了。我睡了多久了？";
		next;
		mes "[T2WH-0448]";
		mes "你是怎么到这里来的？他们说只有主人才能进来吧？除非有紧急情况……哦！主人死了吗？他受伤了吗？这就是他不能来的原因吗？";
		next;
		select( "不是这个..." );
		mes "[T2WH-0448]";
		mes "真的吗？你是很久以前来过这里的客人的后裔，来这里对付入侵者吗？你是第二人类，很酷，不是吗？";
		next;
		mes "[T2WH-0448]";
		mes "主人不是也来府邸很久了，也来过这里吗？有什么问题吗？";
		next;
		mes "[T2WH-0448]";
		mes "那么，你为什么在这里？用紧急钥匙打开门。你不能简单地拿起这些钥匙。";
		next;
		select( "地下室里传来一阵可疑的声音。" );
		mes "[T2WH-0448]";
		mes "哦。我唱歌的声音？你把我当成坏掉的自动人偶了？但那是什么？你身后那个东西？";
		next;
		mes "[T2WH-0448]";
		mes "你说它坏了，但为什么它们不掉下来并闪烁呢？他们为什么要攻击？自动人偶不应该攻击客人吧？";
		next;
		select( "这些是被入侵者破坏的娃娃。" );
		mes "[T2WH-0448]";
		mes "真的吗？但是，你把它带到这里来了吗？为什么？";
		next;
		select( "这不是原来的吗？" );
		mes "[T2WH-0448]";
		mes "不，这里什么都没有。里面完全是空的。你进来的时候把他也带进来了。";
		next;
		select( "对不起。他们一定是和我一起开门进来的。" );
		mes "[T2WH-0448]";
		mes "如果我不能在那些恶魔中间移动，我该怎么做呢？如果他们伤害了我，我会不会一次都无法防御而消失？";
		next;
		select( "需要我把它拿出来给你吗？" );
		mes "[T2WH-0448]";
		mes "不，你不能。主人把我留在这里了。所以我必须留在这里。直到主人回来。";
		next;
		mes "[T2WH-0448]";
		mes "但这一切又如何呢？我不想出去就消失。";
		next;
		mes "[T2WH-0448]";
		mes "你可以保护我。这样就可以了。另外请给我一些零件，以便我可以塑造我的身体。";
		next;
		select( "什么？" );
		mes "[T2WH-0448]";
		mes "你把他们带到这里来，你就应该负责。";
		mes "我会尽可能地躲起来，这样他们就找不到我，但如果他们攻击我，即使我无法反击，我也能逃跑。";
		next;
		mes "[T2WH-0448]";
		mes "它不会像现在这样工作。你不应该开门的。我太小太脆弱了。";
		next;
		select( "我应该怎么办？" );
		mes "[T2WH-0448]";
		mes "这是主人用他收集的所有东西制作东西的地方。";
		mes "我就是这样出生的。";
		mes "所以请给我带来一些我可以^0000CD使用并让我的身体^000000的东西。";
		next;
		mes "[T2WH-0448]";
		mes "身体……胳膊和腿，对吧？";
		mes "只有腿还好，但好像每个人都有胳膊。";
		next;
		mes "[T2WH-0448]";
		mes "除非主人动了它。";
		mes "我确信下面有一个对身体有好处的房间，有一个对手臂有好处的地方，还有一个对腿有好处的地方。";
		next;
		mes "[T2WH-0448]";
		mes "最近的地方是<NAVI>[body]<INFO>ba_2whs02,31,50,0,101,0</INFO></NAVI>所在的地方，所以先去那里。快给我一份吧。我很害怕。";
		ep17_2_chirp = 7;
		erasequest 17349;
		setquest 17350;
		close;
	}
	if (ep17_2_chirp < 10) {
		mes "[T2WH-0448]";
		mes "最近的地方就是尸体所在的地方，所以先去那里。快给我一份吧。我很害怕。";
		close;
	}
	if (ep17_2_chirp == 10) {
		mes "[T2WH-0448]";
		mes "你带来了？快点。把它放在一起。";
		next;
		progressbar_npc "00FF00",2;
		mes "[T2WH-0448]";
		mes "你完成了吗？它在哪里...";
		next;
		specialeffect EF_GUARD2;
		setnpcdisplay( "Head#ep172_2whs01", 4_F_KR_TIGER );
		cloakoffnpcself( "Head#ep172_2whs01" );
		if (isbegin_quest(17355) == 0) {
			setquest 17355;
			completequest 17355;
		}
		mes "[T2WH-0448]";
		mes "你怎么认为？很奇怪吗？";
		next;
		select( "可爱的。" );
		mes "[T2WH-0448]";
		mes "我真的很喜欢它。谢谢。现在我稍微放心了。";
		next;
		select( "我得回去报告一下情况。" );
		mes "[T2WH-0448]";
		mes "给谁？她叫什么名字？";
		mes "是自动娃娃吗？还是人类？";
		next;
		select( "哦，对娃娃..." );
		mes "[T2WH-0448]";
		mes "真的吗？外面那些老自动娃娃都有名字了？那你也给我起个名字吧。我的主人没有为我起名字。这只是一个序列号。";
		next;
		select( "一下子？" );
		mes "[T2WH-0448]";
		mes "你不能叫我名字吗？难道只有特殊的人才能做到吗？但是，你也是一位特别的客人。";
		next;
		mes "[T2WH-0448]";
		mes "那么，我们就无能为力了。我别无选择，只能思考。嗯……这个怎么样？瓦蒙特。";
		next;
		select( "什么？？" );
		mes "[T2WH-0448]";
		mes "为什么？很奇怪吗？我不知道任何名字。地下看门人怎么样？家……我得再考虑一下这个名字。无论如何我都要在这里等主人回来。";
		next;
		mes "[T2WH-0448]";
		mes "我可以一边思考一边避开它们。或者我可以让他回来后告诉我名字。";
		next;
		mes "[T2WH-0448]";
		mes "你说，你应该上去给另一个自动人偶报到吧？好吧，再见！感谢您的帮助。";
		ep17_2_chirp = 11;
		erasequest 17353;
		setquest 17358;
		getitem 1000103,3;
		close;
	}
	if (ep17_2_chirp == 11) {
		mes "[T2WH-0448]";
		mes "你说，你应该上去给另一个自动人偶报到吧？你认为我能做到吗？";
		close;
	}
	mes "我还没决定给它起什么名字。那些家伙很好，没有碰我，奇怪的是。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17349) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17353) == 1" );
	end;
}

ba_2whs02,31,50,0	script	Junk#ep172_whs2body	4_ENERGY_BLACK,{
	if (checkweight(1000101,1) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_chirp == 7) {
		setpcblock PCBLOCK_NPC, true;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Let's see... What's worth using as the body...", bc_self;
		progressbar_npc "00FF00",2;
		setpcblock PCBLOCK_NPC, false;
		if (rand(1,3) != 1)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I can't see anything suitable. Let's look again.", bc_self;
		else {
			unittalk getcharid(3), "" + strcharinfo(0) + " : Looks like it can be used as a body. I'll take it. Let's look for the arms next.", bc_self;
			ep17_2_chirp = 8;
			erasequest 17350;
			setquest 17351;
			getitem 1000101,1;
		}
		end;
	}
	if (ep17_2_chirp == 8) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : I already found something useful for the body. Now, let's go find an arm.", bc_self;
		end;
	}
	unittalk getcharid(3), "" + strcharinfo(0) + " : I shouldn't touch these kind things.", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17350) == 1" );
	end;
}

ba_2whs02,129,82,0	script	Junk#ep172_whs2arm	4_ENERGY_BLACK,{
	if (checkweight(1000101,1) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_chirp == 8) {
		setpcblock PCBLOCK_NPC, true;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Arm... arm... I wonder which is suitable...", bc_self;
		progressbar_npc "00FF00",2;
		setpcblock PCBLOCK_NPC, false;
		if (rand(1,3) != 1)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I can't see anything suitable. Let's look again.", bc_self;
		else {
			unittalk getcharid(3), "" + strcharinfo(0) + " : Is this good enough for the arm? Will it be okay? Let's just take it for now. Now all we have to do is find a leg.", bc_self;
			ep17_2_chirp = 9;
			erasequest 17351;
			setquest 17352;
			getitem 1000101,1;
		}
		end;
	}
	if (ep17_2_chirp == 9) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : I already found something useful for the arm. Now, let's go find a leg.", bc_self;
		end;
	}
	unittalk getcharid(3), "" + strcharinfo(0) + " : I'll just keep it pile up like this.", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17351) == 1" );
	end;
}

ba_2whs02,239,124,0	script	Junk#ep172_whs2leg	4_ENERGY_BLACK,{
	if (checkweight(1000101,1) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_chirp == 9) {
		setpcblock PCBLOCK_NPC, true;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Arm... arm... I wonder which is suitable...", bc_self;
		progressbar_npc "00FF00",2;
		setpcblock PCBLOCK_NPC, false;
		if (rand(1,3) != 1)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I can't see anything suitable. Let's look again.", bc_self;
		else {
			unittalk getcharid(3), "" + strcharinfo(0) + " : Would he be satisfied with a leg like this? Let's go back.", bc_self;
			ep17_2_chirp = 10;
			erasequest 17352;
			setquest 17353;
			getitem 1000101,1;
		}
		end;
	}
	if (ep17_2_chirp == 10) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : I already found everything. Let's go back.", bc_self;
		end;
	}
	unittalk getcharid(3), "" + strcharinfo(0) + " : Isn't this dangerous?", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17352) == 1" );
	end;
}



// Daily Quest : Cleaning Robot Omega
ba_in01,24,322,3	script	Cleaning Robot ��#ba_pw01_02Q	20640,{
	if (checkweight(1000103,2) == 0) {
		mes "- 您无法继续，因为您的物品太多。 -";
		close;
	}
	setpcblock PCBLOCK_NPC, true;
	npctalk "(��_��?) �� 加载中..", "", bc_self;
	sleep2 1000;
	npctalk "清洁机器人��：正在进行通讯以供用户识别。", "", bc_self;
	sleep2 2000;
	npctalk "(��_��*) �� 连接！！", "", bc_self;
	sleep2 1000;
	if (ep17_2_main < 9) {
		npctalk "清洁机器人��：未经授权的用户。通讯终止。", "", bc_self;
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	npctalk "清洁机器人��：用户授权。很高兴见到你。";
	sleep2 1000;
	setpcblock PCBLOCK_NPC, false;

	if (isbegin_quest(5892) == 0) {
		mes "[清洁机器人��]";
		mes "客人您好！很高兴认识你~我是清洁机器人��~";
		next;
		select( "你好。很高兴见到你。" );
		mes "[清洁机器人��]";
		mes "清洁机器人的任务是清理污水和第一电厂。";
		npctalk "��(^��^)��清洁..", "", bc_self;
		next;
		mes "[清洁机器人��]";
		mes "但是扫地机器人��现在还不能打扫~伤心~";
		npctalk "��(X_X)��", "", bc_self;
		next;
		mes "[清洁机器人��]";
		mes "未经授权的用户阻止我们清洁机器人完成我们的工作~";
		npctalk "（-_-一个）;;;", "", bc_self;
		next;
		mes "[清洁机器人��]";
		mes "清洁机器人��遇到困难。好客人，我需要你的帮助~拜托~";
		npctalk "�������", "", bc_self;
		next;
		if (select( "好的。我会帮你的。", " 我不想！" ) == 2) {
			mes "[清洁机器人��]";
			mes "清洁机器人��~伤心..";
			npctalk "(��_��)��", "", bc_self;
			close;
		}
		mes "[清洁机器人��]";
		mes "客人真是太好了~";
		mes "清洁机器人~~~很开心";
		npctalk "(���)������������", "", bc_self;
		setquest 5892;
		completequest 5892;
		close;
	}
	.@status[0] = F_queststatus(HUNTING,5893,5894,5895);
	.@status[1] = F_queststatus(HUNTING,5897,5898,5899);

	if (.@status[0] == 2 || .@status[1] == 2) {
		mes "[清洁机器人��]";
		mes "非常感谢清洁机器人��很高兴能够去打扫卫生。";
		if (.@status[0] == 2) {
			erasequest 5893;
			erasequest 5894;
			erasequest 5895;
			setquest 5896;
			getitem 1000103,2;
			getexp 5065368,3500000;
		}
		if (.@status[1] == 2) {
			erasequest 5897;
			erasequest 5898;
			erasequest 5899;
			setquest 5900;
			getitem 1000103,2;
			getexp 5197368,3500000;
		}
		close;
	}
	switch( rand(1,4) ) {
	case 1:
		npctalk "(���)/", "", bc_self;
		break;
	case 2:
		npctalk "��(^��^)�� 功率..", "", bc_self;
		break;
	case 3:
		npctalk "(���)~��", "", bc_self;
		break;
	case 4:
		npctalk "��(^��^)�� 清洁..", "", bc_self;
		break;
	}
	.@quest_menu$[0] = callsub( S_Menu, 5893,5894,5895,5896, "Sewage Plant Cleaning" );
	.@quest_menu$[1] = callsub( S_Menu, 5897,5898,5899,5900, "1st Power Plant Cleaning" );

	mes "[清洁机器人��]";
	mes "打扫卫生很有趣~";
	next;
	switch( select( .@quest_menu$[0], .@quest_menu$[1], "祝你好运。" ) ) {
	case 1:
		setarray .@quest[0],5893,5894,5895;
		.@cd = 5896;
		break;
	case 2:
		setarray .@quest[0],5897,5898,5899;
		.@cd = 5900;
		break;
	case 3:
		npctalk "(��_��)。 .(��_��)。 .(zZzZ)", "", bc_self;
		mes "[清洁机器人��]";
		mes "通讯结束。";
		close;
	}
	switch( checkquest(.@cd,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		if (.@quest[0] == 5893) {
			mes "[清洁机器人��]";
			mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
		}
		else {
			mes "[清洁机器人��]";
			mes "谢谢好客~清洁机器人��已经清洁第一电厂了。";
		}
		close;
	case 2:
		erasequest .@cd;
		break;
	}
	switch( checkquest(.@quest[0],HUNTING) ) {
	case -1:
		if (.@quest[0] == 5893) {
			mes "[清洁机器人��]";
			mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
			mes "我们无法清理，因为还有更多，Venenum、瀑布和抽筋~";
		}
		else {
			mes "[清洁机器人��]";
			mes "清洁机器人·无法清洁第一发电厂，因为有很多精英贝拉尔、魔法多洛和释放魔法。";
		}
		npctalk "(��^��) OTL ..", "", bc_self;
		next;
		if (.@quest[0] == 5893) {
			mes "[清洁机器人��]";
			mes "清洁机器人��伤心了~";
			mes "我想如果你能处理好 44 Venenum、Waterfall 和 Cramps，我就能处理污水厂。";
		}
		else {
			mes "[清洁机器人��]";
			mes "清洁机器人��伤心了~";
			mes "我想如果你能处理好44个精英贝拉尔、魔法多洛和释放魔法，我就能处理第一个发电厂。";
		}
		npctalk "(?��?)~��", "", bc_self;
		next;
		if (select( "我会帮忙的。", "拒绝。" ) == 2) {
			npctalk "��(@��@)��", "", bc_self;
			mes "[清洁机器人��]";
			mes "清洁机器人��~伤心..";
			close;
		}
		mes "[清洁机器人��]";
		mes "非常感谢~";
		npctalk "(������)~��", "", bc_self;
		for ( .@i = 0; .@i < 3; ++.@i )
			setquest .@quest[.@i];
		close;
	case 0:
	case 1:
	case 2:
		if (.@quest[0] == 5893) {
			mes "[清洁机器人��]";
			mes "清洁机器人��本来是负责处理污水厂的。";
			mes "打扫不了我很难过~怪物好可怕~";
		}
		else {
			mes "[清洁机器人��]";
			mes "清洁机器人��本来应该是清洁第一座发电厂的机器人。";
			mes "打扫不了我很难过~怪物好可怕~";
		}
		npctalk "��(��_��)��", "", bc_self;
		close;
	}
	end;

S_Menu:
	.@string$ = getarg(4);

	switch( checkquest(getarg(3),PLAYTIME) ) {
	case -1:
		for ( .@i = 0; .@i < 3; ++.@i ) {
			if (checkquest(getarg(.@i),HUNTING) == 0 || checkquest(getarg(.@i),HUNTING) == 1)
				return "^777777[Ongoing]^000000 " + .@string$;
		}
		.@menu$ = "[Daily] " + .@string$;
		break;
	case 0:
	case 1:
		.@menu$ = "^777777[Waiting]^000000 " + .@string$;
		break;
	case 2:
		.@menu$ = "[Daily] " + .@string$;
		break;
	}
	return .@menu$;

OnMove:
	.@gid = getnpcid(0);
	npcspeed rand(50,200);
	do {
		.@x = rand(16,31);
		.@y = rand(311,332);
	}
	while (!checkcell("ba_in01",.@x,.@y,cell_chkpass));

	unitstopwalk .@gid, USW_FORCE_STOP;
	unitwalk .@gid,.@x,.@y;
	switch( rand(1,11) ) {
	case 1:
		npctalk "(����������)";
		break;
	case 2:
		npctalk "��(^��^)�ѥP�=��";
		break;
	case 3:
		npctalk "(���)������������";
		break;
	case 4:
		npctalk "(������)";
		break;
	case 5:
		npctalk "(������)";
		break;
	case 6:
		npctalk "(����)";
		break;
	case 7:
		npctalk "(������)~��";
		break;
	case 8:
		npctalk "(�������)";
		break;
	case 9:
		npctalk "(*'��'*)b";
		break;
	default:
		break;
	}
	sleep rand(1500,5000);
	donpcevent strnpcinfo(0) + "::OnMove";
	end;

OnInit:
	// (commented, no questinfo)
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 9 && isbegin_quest(5892) == 0" );

	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(5893,HUNTING) == 2 && checkquest(5894,HUNTING) == 2 && checkquest(5895,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(5897,HUNTING) == 2 && checkquest(5898,HUNTING) == 2 && checkquest(5899,HUNTING) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(5892) == 2 && checkquest(5896,PLAYTIME) == -1 && checkquest(5893,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(5892) == 2 && checkquest(5900,PLAYTIME) == -1 && checkquest(5897,HUNTING) == -1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(5892) == 2 && checkquest(5896,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(5892) == 2 && checkquest(5900,PLAYTIME) == 2" );
	donpcevent strnpcinfo(0) + "::OnMove";
	end;
}


// Sidequest quest : Be quiet in the Library! - Step 1
// ba_maison,70,145,3	script	Tamarin#ep172_bamaison-00	4_EP17_TAMARIN,{

// Sidequest quest : Be quiet in the Library! - Step 2
ba_maison,85,111,3	script	Fountain#ba	4_ENERGY_BLUE,{
	if (ep17_2_library == 1) {
		cloakoffnpcself( "Dew#ep172_fountain" );
		cutin "bu_du5",2;
		mes "[露水]";
		mes "啊!啊!";
		mes "哈...我想我现在会好起来的。";
		next;
		cloakoffnpcself( "Mark#ep172_fountain" );
		cloakoffnpcself( "Magi#ep172_fountain" );
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "嘿！！！";
		mes "你在喷泉里做什么！！！";
		mes "立即离开那里！";
		next;
		cloakoffnpcself( "Mansion Manager ��#ep172_fountain" );
		cutin "ep172_beta",2;
		mes "[宅邸经理��]";
		mes "警告。";
		mes "该设施不用于清洁。禁止进入其中。";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "哎哟！！！";
		mes "那是谁！！！";
		next;
		cutin "ep172_beta",2;
		mes "[宅邸经理��]";
		mes "我是[大贤者瓦蒙特府]的府邸管理员��。";
		mes "宅邸内的设施是公共的，供每位客人使用。";
		mes "使用设施时请遵守指示。";
		next;
		mes "[宅邸经理��]";
		mes "设施异常使用时会记录警告，如果警告累积，您将被逐出宅邸。";
		next;
		mes "[宅邸经理��]";
		mes "此外，宅邸的地下室还设有沐浴设施。我们鼓励参观豪宅的客人参观 Medatitio，这是一家很棒的浴室。";
		next;
		mes "[宅邸经理��]";
		mes "那么，希望您度过一段舒适的时光。谢谢。";
		next;
		cloakonnpcself( "Mansion Manager ��#ep172_fountain" );
		cutin "bu_du4",2;
		mes "[露水]";
		mes "禁止在喷泉里洗澡是不是太过分了？";
		next;
		cutin "bu_mark3",2;
		mes "[标记]";
		mes "不，这已经足够了，但是……";
		next;
		cutin "bu_maggi4",2;
		mes "[魔法]";
		mes "标记...";
		mes "标记...";
		next;
		cutin "bu_mark2",2;
		mes "[标记]";
		mes "是的？";
		mes "怎么了？";
		next;
		cutin "bu_maggi4",2;
		mes "[魔法]";
		mes "看看那边的守卫。";
		mes "这……一切都破碎了。";
		next;
		cloakoffnpcself( "Alp#ep172_fountain" );
		cutin "bu_alp3",2;
		mes "[阿尔普]";
		mes "来这里的路上我也看到了很多。";
		next;
		cutin "bu_mark4",2;
		mes "[标记]";
		mes "果然不愧是猎心者们的期待啊……";
		mes "现在不是这样做的时候。";
		mes "我们需要抓紧调查。";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "是的！";
		mes "我不会让猎心者毁掉这个美好的地方！";
		next;
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "我们应该先去哪里...";
		next;
		cloakoffnpcself( "Oliver#ep172_fountain" );
		mes "[奥利弗]";
		mes "当然是图书馆啦！";
		next;
		cutin "bu_alp3",2;
		mes "[阿尔普]";
		mes "哦！";
		mes "果然，你知道一些东西！这是伟大的圣人瓦蒙特！！！他是一个传奇，在他的时代和之后没有人能够超越他。";
		next;
		mes "[阿尔普]";
		mes "据说科学技术只是维持他所建立的基础，但无法实施没有他研究留下的数据的东西。";
		mes "这是一个藏有他喜欢的研究成果的图书馆！这是一个私人图书馆，但听说比格芬图书馆还大！！！好久没这么激动了！！！";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "啊...";
		mes "它出来了...";
		mes "书迷...";
		next;
		cutin "bu_maggi1",2;
		mes "[魔法]";
		mes "我也是！！！";
		mes "我想知道到底有多少本魔法书！";
		next;
		cutin "bu_mark2",2;
		mes "[标记]";
		mes "据说大贤者瓦蒙德在魔法和治疗方面都很出色，对吧？";
		mes "快点！我们去图书馆吧。";
		ep17_2_library = 2;
		erasequest 11621;
		setquest 11622;
		close2;
		cutin "",255;
		cloakonnpcself( "Mark#ep172_fountain" );
		cloakonnpcself( "Magi#ep172_fountain" );
		cloakonnpcself( "Dew#ep172_fountain" );
		cloakonnpcself( "Alp#ep172_fountain" );
		cloakonnpcself( "Oliver#ep172_fountain" );
		navigateto("ba_in01",211,83);
		end;
	}
	if (ep17_2_library == 2) {
		cloakoffnpcself( "Mark#ep172_fountain" );
		cloakoffnpcself( "Magi#ep172_fountain" );
		cloakoffnpcself( "Dew#ep172_fountain" );
		cloakoffnpcself( "Alp#ep172_fountain" );
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "我们应该先去哪里...";
		next;
		cloakoffnpcself( "Oliver#ep172_fountain" );
		mes "[奥利弗]";
		mes "当然是图书馆啦！";
		next;
		cutin "bu_alp3",2;
		mes "[阿尔普]";
		mes "哦！";
		mes "果然，你知道一些东西！这是伟大的圣人瓦蒙特！！！他是一个传奇，在他的时代和之后没有人能够超越他。";
		next;
		mes "[阿尔普]";
		mes "据说科学技术只是维持他所建立的基础，但无法实施没有他研究留下的数据的东西。";
		mes "这是一个藏有他喜欢的研究成果的图书馆！这是一个私人图书馆，但听说比格芬图书馆还大！！！好久没这么激动了！！！";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "啊...";
		mes "它出来了...";
		mes "书迷...";
		next;
		cutin "bu_maggi1",2;
		mes "[魔法]";
		mes "我也是！！！";
		mes "我想知道到底有多少本魔法书！";
		next;
		cutin "bu_mark2",2;
		mes "[标记]";
		mes "据说大贤者瓦蒙德在魔法和治疗方面都很出色，对吧？";
		mes "快点！我们去图书馆吧。";
		close2;
		cutin "",255;
		cloakonnpcself( "Mark#ep172_fountain" );
		cloakonnpcself( "Magi#ep172_fountain" );
		cloakonnpcself( "Dew#ep172_fountain" );
		cloakonnpcself( "Alp#ep172_fountain" );
		cloakonnpcself( "Oliver#ep172_fountain" );
		navigateto("ba_in01",211,83);
		end;
	}
	mes "- 这是露水清洗身体的喷泉。";
	mes "幸运的是，似乎已经被清理干净了。 -";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11621) == 1" );
	end;
}

ba_maison,82,110,5	duplicate(dummy_cloaked_npc)	Mansion Manager ��#ep172_fountain	4_EP17_BASIC_B
ba_maison,89,109,3	duplicate(dummy_cloaked_npc)	Dew#ep172_fountain	4_M_REDMAN
ba_maison,88,113,5	duplicate(dummy_cloaked_npc)	Mark#ep172_fountain	4_M_BLUEMAN
ba_maison,87,114,5	duplicate(dummy_cloaked_npc)	Magi#ep172_fountain	4_F_PINKWOMAN
ba_maison,78,112,3	duplicate(dummy_cloaked_npc)	Alp#ep172_fountain	4_M_BLACKMAN
ba_maison,84,109,5	duplicate(dummy_cloaked_npc)	Oliver#ep172_fountain	4_M_OLIVER

// Sidequest quest : Be quiet in the Library! - Step 3
ba_in01,211,183,0	script	#libent_to_library	WARPNPC,2,2,{
	end;
OnTouch:
	if (ep17_2_library < 2) {
		mes "门前的一堆火使我们无法前进。";
		close;
	}
	if (ep17_2_library == 2) {
		cloakoffnpcself( "Mark#ep172_libent" );
		cloakoffnpcself( "Magi#ep172_libent" );
		cloakoffnpcself( "Dew#ep172_libent" );
		cloakoffnpcself( "Oliver#ep172_libent" );
		cutin "bu_du5",2;
		mes "[露水]";
		mes "这是图书馆的入口吗？";
		mes "入口看起来很正常……不，着火了！";
		mes "着火了！！！";
		next;
		specialeffect EF_WATERBALL, AREA, "#fire2";
		cloakonnpcself( "#fire1" );
		cloakonnpcself( "#fire2" );
		cloakonnpcself( "#fire3" );
		cloakonnpcself( "#fire4" );
		cloakoffnpcself( "#fire1_0" );
		cloakoffnpcself( "#fire2_0" );
		cloakoffnpcself( "#fire3_0" );
		cloakoffnpcself( "#fire4_0" );
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "啊啊啊！！！";
		mes "很危险！！";
		mes "哇...水球！！！";
		next;
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "呃...";
		mes "这是怎么回事？";
		next;
		mes "点击";
		cloakoffnpcself( "Mansion Manager ��#ep172_libent" );
		next;
		cloakoffnpcself( "#fire1" );
		cloakoffnpcself( "#fire2" );
		cloakoffnpcself( "#fire3" );
		cloakoffnpcself( "#fire4" );
		cloakonnpcself( "#fire1_0" );
		cloakonnpcself( "#fire2_0" );
		cloakonnpcself( "#fire3_0" );
		cloakonnpcself( "#fire4_0" );
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "此素材是主人自己安装的，未经主人许可不能删除。";
		next;
		mes "[宅邸经理��]";
		mes "因此，我们恳请您不要进入。这可能会对您离开宅邸构成致命风险，如果您不顾警告强行进入，我们对任何伤害或死亡概不负责。";
		next;
		cutin "bu_du5",2;
		mes "[露水]";
		mes "火...？";
		next;
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "无论你的恢复技巧有多好，你都无法恢复头发或衣服……";
		next;
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "我认为我们不能进入...";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "那太糟糕了...";
		next;
		cloakoffnpcself( "Alp#ep172_libent" );
		cutin "bu_alp1",2;
		mes "[阿尔普]";
		mes "......";
		next;
		cutin "ep172_alpha",2;
		mes "[宅邸经理��]";
		mes "我希望您保持安全并度过舒适的时光。";
		next;
		cloakonnpcself( "Mansion Manager ��#ep172_libent" );
		cutin "bu_alp1",2;
		mes "[阿尔普]";
		mes "...";
		next;
		cutin "bu_alp1",2;
		mes "[阿尔普]";
		mes "好的...";
		mes "她走了……";
		mes "我们来突破吧！！";
		next;
		cutin "bu_mark1",2;
		mes "[标记]";
		mes "出色地...";
		mes "没有人警告你灭火，所以没关系，对吧？";
		next;
		cutin "bu_du2",2;
		mes "[露水]";
		mes "再一次。";
		mes "魔法师！！";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "水球！！！";
		ep17_2_library = 3;
		erasequest 11622;
		setquest 11623;
		close2;
		navigateto("ba_lib",157,19);
		warp "ba_lib",159,12;
		cloakonnpcself( "Mark#ep172_libent" );
		cloakonnpcself( "Magi#ep172_libent" );
		cloakonnpcself( "Dew#ep172_libent" );
		cloakonnpcself( "Oliver#ep172_libent" );
		cloakonnpcself( "Alp#ep172_libent" );
		end;
	}
	if (ep17_2_library == 3) {
		cutin "bu_du2",2;
		mes "[露水]";
		mes "再一次。";
		mes "魔法师！！";
		next;
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "水球！！！";
		close2;
		cutin "",255;
		warp "ba_lib",159,12;
		navigateto("ba_lib",157,19);
		end;
	}
	warp "ba_lib",159,12;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11622) == 1" );
	end;
}

ba_in01,213,178,3	duplicate(dummy_cloaked_npc)	Dew#ep172_libent	4_M_REDMAN
ba_in01,209,181,5	duplicate(dummy_cloaked_npc)	Mark#ep172_libent	4_M_BLUEMAN
ba_in01,209,179,5	duplicate(dummy_cloaked_npc)	Magi#ep172_libent	4_F_PINKWOMAN
ba_in01,213,181,3	duplicate(dummy_cloaked_npc)	Oliver#ep172_libent	4_M_OLIVER
ba_in01,210,184,5	duplicate(dummy_cloaked_npc)	Alp#ep172_libent	4_M_BLACKMAN
ba_in01,209,186,5	duplicate(dummy_cloaked_npc)	Mansion Manager ��#ep172_libent	4_EP17_MASTER_A
ba_in01,210,186,3	duplicate(dummy_npc)	#fire1	4_BONFIRE
ba_in01,211,186,3	duplicate(dummy_npc)	#fire2	4_BONFIRE
ba_in01,212,186,3	duplicate(dummy_npc)	#fire3	4_BONFIRE
ba_in01,213,186,3	duplicate(dummy_npc)	#fire4	4_BONFIRE
ba_in01,210,186,3	duplicate(dummy_cloaked_npc)	#fire1_0	4_TRACE
ba_in01,211,186,3	duplicate(dummy_cloaked_npc)	#fire2_0	4_TRACE
ba_in01,212,186,3	duplicate(dummy_cloaked_npc)	#fire3_0	4_TRACE
ba_in01,213,186,3	duplicate(dummy_cloaked_npc)	#fire4_0	4_TRACE

// Sidequest quest : Be quiet in the Library! - Step 4, 6
// Daily quest : Hunting Bookworm
// Daily quest : Hunting Roaming Spellbook
ba_lib,157,19,5	script	Mansion Manager ��#ep172_balib	4_EP17_BASIC_B,{
	if (checkweight(1000103,5) == 0) {
		mes "- 你的物品太多了。";
		mes "请清理您的库存并重试。 -";
		close;
	}
	// Sidequest quest
	if (ep17_2_library < 3)	// no access, shouldn't happen
		end;
	if (ep17_2_library == 3) {
		cutin "ep172_beta",2;
		mes "[宅邸经理��]";
		mes "请图书馆内保持安静。此外，您需要注册才能使用该图书馆。如果您不注册，您将无法阅读图书馆内的任何书籍。";
		next;
		select( "登记。" );
		mes "[宅邸经理��]";
		mes "您已被注册。";
		mes "您想确认您的聚会的注册吗？";
		next;
		cutin "bu_du3",2;
		mes "[露水]";
		mes "啊！";
		mes "我受够了！";
		mes "其他人已经找到了一本书，并且被它迷住了……";
		mes "他们告诉我留在这里等待！";
		next;
		cutin "bu_du1",2;
		mes "[露水]";
		mes "您已经在图书馆注册了，有您要找的书吗？";
		mes "我不关心书...你应该四处看看。";
		next;
		cutin "bu_du2",2;
		mes "[露水]";
		mes "当你四处张望的时候，让其他人知道他们需要注册......稍后见~~~";
		ep17_2_library = 4;
		erasequest 11623;
		setquest 11624;
		setquest 11625;
		setquest 11626;
		setquest 11627;
		setquest 11628;
		close3;
	}
	if (ep17_2_library == 4) {
		if (F_queststatus(HAVEQUEST, 11629,11630,11631,11632,11633) != 1) {
			cutin "ep172_beta",2;
			mes "[宅邸经理��]";
			mes "请图书馆内保持安静。此外，您需要注册才能使用该图书馆。如果您不注册，您将无法阅读图书馆内的任何书籍。";
			next;
			mes "[宅邸经理��]";
			mes "您想确认您的聚会的注册吗？";
			next;
			cutin "bu_du3",2;
			mes "[露水]";
			mes "啊！";
			mes "我受够了！";
			mes "其他人已经找到了一本书，并且被它迷住了……";
			mes "他们告诉我留在这里等待！";
			next;
			cutin "bu_du1",2;
			mes "[露水]";
			mes "您已经在图书馆注册了，有您要找的书吗？";
			mes "我不关心书...你应该四处看看。";
			next;
			cutin "bu_du2",2;
			mes "[露水]";
			mes "当你四处张望的时候，让其他人知道他们需要注册......稍后见~~~";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[宅邸经理��]";
		mes "感谢您对聚会的确认。";
		mes "" + strcharinfo(0) + " 和 4... 5... 4... 6... 7... 4... 3... 人已注册。";
		mes "感谢您的合作。";
		ep17_2_library = 5;
		erasequest 11629;
		erasequest 11630;
		erasequest 11631;
		erasequest 11632;
		erasequest 11633;
		getitem 1000103,5;
		getexp 1031336,0;
		close3;
	}
	// Daily quests
	cutin "ep172_beta",2;
	mes "[宅邸经理��]";
	mes "你好，" + strcharinfo(0) + ".";
	mes "以下请求仅针对图书馆用户，如果您给予我们支持，我们将不胜感激。";
	next;
	.@quest_menu$[0] = callsub( S_Menu, 11634,11635, "Ultimate Bookworm" );
	.@quest_menu$[1] = callsub( S_Menu, 11636,11637, "Ultimate Book" );

	switch( select( .@quest_menu$[0], .@quest_menu$[1], "取消" ) ) {
	case 1:
		.@hunt = 11634;
		.@cooldown = 11635;
		setarray .@exp[0],910040,637040;
		break;
	case 2:
		.@hunt = 11636;
		.@cooldown = 11637;
		setarray .@exp[0],934000,653800;
		break;
	case 3:
		mes "[宅邸经理��]";
		mes "我希望您保持安全并度过舒适的时光。";
		close3;
	}
	switch( checkquest(.@cooldown,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[宅邸经理��]";
		mes "今天的工作已经完成了。";
		mes "谢谢。";
		close3;
	case 2:
		erasequest .@cooldown;
		break;
	}
	switch( checkquest(.@hunt,HUNTING) ) {
	case -1:
		if (.@hunt == 11634) {
			mes "[宅邸经理��]";
			mes "最近，我们接到询问，以魔法书籍为食的书虫数量呈指数级增长，给图书馆的使用带来不便。";
			mes "请照顾20名书虫，改善图书馆的环境。";
		}
		else {
			mes "[宅邸经理��]";
			mes "最近，我们收到一份询问，称图书馆的书架由于魔法书偏离了指定区域而变得混乱。";
			mes "请收集20本漫游魔法书，以改善图书馆的环境。";
		}
		next;
		if (select( "接受", "拒绝" ) == 2) {
			mes "[宅邸经理��]";
			mes "我希望您保持安全并度过舒适的时光。";
			close3;
		}
		mes "[宅邸经理��]";
		mes "非常感谢。";
		setquest .@hunt;
		close3;
	case 0:
	case 1:
		mes "[宅邸经理��]";
		mes "该任务已经启动。";
		close3;
	case 2:
		mes "[宅邸经理��]";
		mes "我已确认请求已完成。";
		mes "谢谢。";
		setquest .@cooldown;
		erasequest .@hunt;
		getitem 1000103,2;
		getexp .@exp[0],.@exp[1];
		close3;
	}
	end;

S_Menu:
	.@string$ = getarg(2);

	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( checkquest(getarg(0),HUNTING) ) {
		case -1:
			.@menu$ = .@string$ + " [130]";
			break;
		case 0:
		case 1:
			.@menu$ = "^777777" + .@string$ + " (Ongoing)^000000";
			break;
		case 2:
			.@menu$ = .@string$ + " [130]";
			break;
		}
		break;
	case 0:
	case 1:
		.@menu$ = "^777777" + .@string$ + " (Waiting)^000000";
		break;
	case 2:
		.@menu$ = .@string$ + " [130]";
		break;
	}
	return .@menu$;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11623) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11629) == 1 && isbegin_quest(11630) == 1 && isbegin_quest(11631) == 1 && isbegin_quest(11632) == 1 && isbegin_quest(11633) == 1" );

	// Daily quests
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(11634,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(11636,HUNTING) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(11635,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(11637,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep17_2_library == 5 && checkquest(11634,HUNTING) == -1 && checkquest(11635,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep17_2_library == 5 && checkquest(11636,HUNTING) == -1 && checkquest(11637,PLAYTIME) == -1" );
	end;
}

// Sidequest quest : Be quiet in the Library! - Step 5
ba_lib,159,19,5	script	Dew#ep172_balib	4_M_REDMAN,{
	cutin "bu_du3",2;
	mes "[露水]";
	mes "也许我会带回家...一些书...";
	close3;
}

ba_lib,84,85,3	script	Mark#ep172_balib	4_M_BLUEMAN,{
	if (ep17_2_library == 4) {
		if (isbegin_quest(11624) == 1) {
			cutin "bu_mark2",2;
			mes "[标记]";
			mes "这太难以置信了！！！！";
			mes "我不敢相信普隆德拉图书馆竟然有这么多书我找不到！";
			next;
			cutin "bu_mark1",2;
			mes "[标记]";
			mes "您需要注册吗？我当时很着急，连看都没有看。";
			mes "我先去注册一下。";
			erasequest 11624;
			setquest 11629;
			close3;
		}
		if (isbegin_quest(11629) == 1) {
			cutin "bu_mark1",2;
			mes "[标记]";
			mes "您需要注册吗？我当时很着急，连看都没有看。";
			mes "我先去注册一下。";
			close3;
		}
	}
	// (no text)
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11624) == 1" );
	end;
}

ba_lib,96,208,5	script	Tamarin#ep172_balib	4_EP17_TAMARIN,{
	if (ep17_2_library == 4) {
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "图书馆登记……刚进图书馆我就兴奋不已，想看的书太多了……我尽快去登记。";
		next;
		cloakoffnpcself( "????????#ep172_balib-0" );
		cutin "ep172_barmund_b03",2;
		mes "[?????????]";
		mes "就到这里啦~";
		mes "如果您看过《仙女之城》[这本书，请告诉我]>~";
		next;
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "啊？仙女之城？";
		mes "我不知道？";
		next;
		cutin "ep172_barmund_b04",2;
		mes "[?????????]";
		mes "呃？你不知道吗？";
		mes "这很奇怪吗？";
		mes "我相信你会知道它在哪里......";
		next;
		cutin "ep172_barmund_b05",2;
		mes "[?????????]";
		mes "哦！";
		mes "仔细一看，你看起来和其他经理很不一样，对吧？";
		next;
		cutin "ep172_tamarin02",2;
		mes "[狨猴]";
		mes "不仔细看还是完全不一样的！！！";
		next;
		cutin "ep172_barmund_b05",2;
		mes "[?????????]";
		mes "是啊是啊~";
		mes "我已经拿到了。";
		mes "我自己去找找吧！";
		if (isbegin_quest(11627) == 1) {
			erasequest 11627;
			setquest 11632;
		}
		close2;
		cutin "",255;
		cloakonnpcself( "????????#ep172_balib-0" );
		end;
	}
	cutin "ep172_tamarin02",2;
	mes "[狨猴]";
	mes "我看起来真的像这里的经理之一吗？";
	mes "什么，毫无疑问？";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11627) == 1" );
	end;
}

ba_lib,99,209,3	duplicate(dummy_cloaked_npc)	????????#ep172_balib-0	4_EP17_BOY_B

ba_lib,199,233,3	script	Oliver#ep172_balib	4_M_OLIVER,{
	if (ep17_2_library == 4) {
		cutin "bu_oliver5",2;
		mes "[奥利弗]";
		mes "唔...";
		mes "这也...";
		mes "那个也...";
		mes "您已全部阅读完毕，不是吗？";
		next;
		mes "[奥利弗]";
		mes "我以为我能找到一本新书...";
		mes "顺便问一下……你从哪里找到这些书的……";
		next;
		cloakoffnpcself( "????????#ep172_balib-1" );
		cutin "ep172_barmund_a03",2;
		mes "[?????????]";
		mes "即使您已经读过一本书，您也可以通过再次阅读来发现新的部分。";
		next;
		cutin "bu_oliver2",2;
		mes "[奥利弗]";
		mes "但一旦我读了一本书，我就会记住里面的每一个字。";
		next;
		cutin "ep172_barmund_a03",2;
		mes "[?????????]";
		mes "但是，根据您所处的情况，您感受到的情绪会有所不同。";
		next;
		cutin "bu_oliver5",2;
		mes "[奥利弗]";
		mes "哦~~对了！";
		next;
		cutin "bu_oliver2",2;
		mes "[奥利弗]";
		mes "顺便问一下……你兄弟是谁？";
		next;
		cloakonnpcself( "????????#ep172_balib-1" );
		cutin "ep172_barmund_a03",2;
		mes "[?????????]";
		mes "出色地？";
		mes "就像你手里的书一样。";
		mes "你现在不知道我是谁，但只要你反复想，你最终就会知道我是谁。";
		next;
		cutin "bu_oliver5",2;
		mes "[奥利弗]";
		mes "这位兄弟真是奇怪啊……";
		mes "那我就按照哥哥说的那样决定看这本书了！！！";
		if (isbegin_quest(11628) == 1) {
			erasequest 11628;
			setquest 11633;
		}
		close3;
	}
	cutin "bu_oliver1",2;
	mes "我希望这本书很有趣。";
	mes "正确的？";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11628) == 1" );
	end;
}

ba_lib,202,232,1	duplicate(dummy_cloaked_npc)	????????#ep172_balib-1	4_EP17_BOY_A

ba_lib,112,266,5	script	Magi#ep172_balib	4_F_PINKWOMAN,{
	if (ep17_2_library == 4) {
		cutin "bu_maggi3",2;
		mes "[魔法]";
		mes "太棒了！";
		mes "好多我没​​见过的魔法！！！！！";
		next;
		mes "[魔法]";
		mes "图书馆注册？";
		mes "有这样的事吗？";
		next;
		cutin "bu_maggi2",2;
		mes "[魔法]";
		mes "等一下...我再看一下然后去注册！";
		if (isbegin_quest(11625) == 1) {
			erasequest 11625;
			setquest 11630;
		}
		close3;
	}
	// (no text)
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11625) == 1" );
	end;
}

ba_lib,293,234,3	script	Alp#ep172_balib	4_M_BLACKMAN,{
	if (ep17_2_library == 4) {
		cutin "bu_alp1",2;
		mes "[阿尔普]";
		mes "哈哈~";
		next;
		cutin "",255;
		mes "- 我现在最好不要和他说话。 -";
		if (isbegin_quest(11626) == 1) {
			erasequest 11626;
			setquest 11631;
		}
		close;
	}
	// (no text)
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11626) == 1" );
	end;
}



//= Lost Farm In Time
// ba_maison,311,206,3	script	Luina#greeen	4_EP17_BASIC_B,{
ba_maison,306,206,5	script	Cotton#greeen	4_EP17_BASIC_B,{
	if (checkweight(1000103,2) == 0) {
		mes "- 你无法继续任务，因为你的物品太多。 -";
		close;
	}
	if (BaseLevel < 150) {
		mes "[棉]";
		mes "好吧，你看起来很弱，不适合工作。我认为你现在做不到。";
		next;
		mes "- 此任务适用于 150 级或更高级别 -";
		close;
	}
	if (isbegin_quest(8586) < 2) {
		mes "——我和繁殖区前面的自动人偶见过面。 -";
		next;
		mes "- 娃娃上下打量了我一下，然后转过头。 -";
		close;
	}
	switch( checkquest(8595,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[棉]";
		mes "今天你已经长满草了……所以明天我再问你，好客！";
		close;
	case 2:
		mes "[棉]";
		mes "看来你已经休息够了，要不要再和火龙果一起玩？";
		erasequest 8595;
		close;
	}
	setarray .@quest_id[0],8590,8591,8592,8593,8594;

	for ( .@i = 0; .@i < 5; ++.@i ) {
		switch( checkquest(.@quest_id[.@i],HUNTING) ) {
		case -1:
			break;
		case 0:
		case 1:
			switch( .@quest_id[.@i] ) {
				case 8590: .@color$ = "^FF45FFRed"; break;
				case 8591: .@color$ = "^FFBF8CYellow"; break;
				case 8592: .@color$ = "^0AFFC8Blue"; break;
				case 8593: .@color$ = "^A679BFViolet"; break;
				case 8594: .@color$ = "^9ABF94Green"; break;
			}
			mes "[棉]";
			mes "请照顾农场里的 20 个" + .@color$ + " 火龙果^000000...不，我的意思是抚摸它们！";
			close;
		case 2:
			switch( .@quest_id[.@i] ) {
				case 8590: .@color$ = "red"; break;
				case 8591: .@color$ = "yellow"; break;
				case 8592: .@color$ = "blue"; break;
				case 8593: .@color$ = "violet"; break;
				case 8594: .@color$ = "green"; break;
			}
			mes "[棉]";
			mes "啊!有很多" + .@color$ + "你……啊，你一直在玩火龙果。";
			mes "谢谢你！";
			mes "这是你辛勤工作的报酬。";
			setquest 8595;
			erasequest .@quest_id[.@i];
			getitem 1000103,2;
			getexp 1800000,1320000;
			next;
			mes "[棉]";
			mes "请明天再次协助我们！";
			close;
		}
	}
	mes "[棉]";
	mes "你是来帮助我们的吗？如果不介意的话，可以去农场里玩一下火龙果吗？当然，我会为此奖励你。";
	next;
	switch( select( "接受请求。", "拒绝请求。", "询问详细信息。" ) ) {
	case 1:
		.@quest = .@quest_id[rand(5)];
		switch( .@quest ) {
			case 8590: .@color$ = "^FF45FFRed"; break;
			case 8591: .@color$ = "^FFBF8CYellow"; break;
			case 8592: .@color$ = "^0AFFC8Blue"; break;
			case 8593: .@color$ = "^A679BFViolet"; break;
			case 8594: .@color$ = "^9ABF94Green"; break;
		}
		mes "[棉]";
		mes "非常感谢！";
		mes "今天。我想请你玩20个" + .@color$ + "火龙果^000000。";
		mes "您可以通过颜色来区分它们。你现在就可以进去了。玩得开心！";
		setquest .@quest;
		break;
	case 2:
		mes "[棉]";
		mes "很抱歉在您百忙之中询问。";
		mes "不管怎样，以后有时间的话，请告诉我。";
		break;
	case 3:
		mes "[棉]";
		mes "你只需要去农场里面和火龙果玩耍就可以了。如果你接受请求，我会选择一种颜色，但你每天只能杀死20只……不，我的意思是抚摸它们。";
		mes "不用担心。火龙果在玩耍时天生就很暴力，通常我们在和它们玩耍时都会被咬伤。";
		next;
		mes "[棉]";
		mes "我花了很长时间才意识到同样暴力的游戏是合适的。";
		mes "不管怎样，如果你有时间的话请告诉我。";
		break;
	}
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8586) == 2 && checkquest(8595,PLAYTIME) == -1 && checkquest(8590,HUNTING) == -1 && checkquest(8591,HUNTING) == -1 && checkquest(8592,HUNTING) == -1 && checkquest(8593,HUNTING) == -1 && checkquest(8594,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(8595,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(8590,HUNTING) == 2 || checkquest(8591,HUNTING) == 2 || checkquest(8592,HUNTING) == 2 || checkquest(8593,HUNTING) == 2 || checkquest(8594,HUNTING) == 2" );
	end;
}

ba_maison,309,206,5	script	Kitty#greeen	EP17_2_PITAYA_G,{
	switch( rand(1,3) ) {
	case 1:
		npctalk "基蒂：……", "", bc_self;
		break;
	case 2:
		npctalk "凯蒂：发推文。", "", bc_self;
		break;
	case 3:
		npctalk "基蒂：咯咯。", "", bc_self;
		break;
	}
	end;
}



// Sidequest quest : Removing Biomagnetic Jamming Chips - Step 1
// Daily quest : Warehouse Clearance
ba_maison,79,278,3	script	Europa#eorpa	4_EP17_BASIC_B,{
	if (checkweight(1000103,1) == 0) {
		mes "你拥有的物品数量太多，所以你无法继续对话。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (BaseLevel < 180) {
		mes "*嗡嗡声*...";
		mes "*嗡嗡声*……";
		mes "...";
		next;
		mes "[欧洲]";
		mes "你还是太缺乏经验了。";
		mes "请稍后再回来...";
		mes "*嗡嗡声*";
		next;
		mes "- 你必须至少达到 180 级才能接受此任务。 -";
		close;
	}
	if (ep17_2_main < 9) {
		cutin "ep172_beta",2;
		mes "[欧洲]";
		mes "反应堆对所有特殊客人开放，但我建议目前不要进去。";
		close3;
	}
	switch( isbegin_quest(3390) ) {
	case 0:
		switch( isbegin_quest(3389) ) {
		case 0:
			mes "[欧洲]";
			mes "你好吗。";
			mes "我是...第二马力厂经理...*嗡嗡声*...";
			next;
			mes "[欧洲]";
			mes "我的名字是欧罗巴...";
			next;
			mes "[欧洲]";
			mes "欢迎来到瓦蒙特宅邸...欢迎...*嗡嗡声*...";
			next;
			select( "你看起来不太好。" );
			mes "[欧洲]";
			mes "你能看一下我面前的...筹码吗...";
			next;
			mes "[欧洲]";
			mes "这是我们收集到的……第二马力工厂的……这是一个……干扰无线电波的芯片……";
			next;
			mes "- 欧罗巴前面有一堆看起来很美味的薯片。 -";
			next;
			select( "怎么看都是薯片..？" );
			mes "[欧洲]";
			mes "这个…生物干扰芯片一直在干扰我的网络…那里…它…它…它是生物芯片的处理…我可以请你帮我一个忙吗…？";
			next;
			select( "我应该如何处理这个问题？" );
			mes "[欧洲]";
			mes "那些拥有……生命的人……我知道他们可以处理生物芯片……*嗡嗡声*";
			next;
			mes "[欧洲]";
			mes "为了高效沟通... *嗡嗡声*...请处理芯片... *嗡嗡声*";
			next;
			mes "- 她一定是在请你吃薯片！ -";
			next;
			mes "- 你想吃欧罗巴前面堆积的薯片吗？ -";
			next;
			if (select( "吃吧。", "不，谢谢。" ) == 2) {
				mes "[欧洲]";
				mes "*嗡嗡声*...";
				mes "...";
				mes "...";
				close;
			}
			mes "[" + strcharinfo(0) + "]";
			mes "Nom nom nom nom...嘎吱嘎吱...摆动摆动........";
			next;
			mes "- 欧罗巴面前的那堆薯片我已经吃完了！！ -";
			next;
			mes "[欧洲]";
			mes "非常感谢。生物干扰芯片的移除已被确认。";
			mes "通讯检查完成。网络连接状况良好。";
			next;
			mes "[欧洲]";
			mes "重新启动系统。请稍后跟我说话。";
			setquest 3389;
			close;
		case 1:
			mes "[欧洲]";
			mes "你好。感谢您处理生物干扰芯片。 Now I can communicate with the network properly.我是欧罗巴，第二发电厂的经理。";
			next;
			mes "[欧洲]";
			mes "让我告诉你关于你刚刚处理的生物芯片的事情。该芯片由名为《CLR0》的幻象安装在第二马力装置中，其唯一目的是干扰无线电波。";
			next;
			mes "[欧洲]";
			mes "这是一个对自动玩偶的通信能力至关重要的芯片，而如今，它对第二马力发电厂的管理造成了重大干扰。";
			next;
			mes "[欧洲]";
			mes "我亲自进入第二发电厂取回了芯片，但我没有办法处理它们，而且由于网络故障，情况变得很困难。";
			next;
			mes "[欧洲]";
			mes "多亏你处理了芯片，问题已经解决了。" + strcharinfo(0) + "， 非常感谢。";
			next;
			mes "[欧洲]";
			mes "我很抱歉在表达谢意后才问，但事情很紧急，所以你能帮我一个忙吗？";
			next;
			select( "它是什么？" );
			mes "[欧洲]";
			mes "正如我提到的，幻象号^0000CD魔法中毒萨纳雷^000000仍在安装我在第二马力装置中提到的干扰芯片。如果我就这样进去的话，恐怕又会出故障了。";
			next;
			mes "[欧洲]";
			mes "冒险家，你能去第二马力厂收集10个^0000CD薯片^000000吗？";
			next;
			if (select( "接受。", "拒绝。" ) == 2) {
				mes "[欧洲]";
				mes "再这样下去，我恐怕又要出故障了。我需要你的帮助。";
				close;
			}
			mes "[欧洲]";
			mes "最好的方法是在安装之前除掉<<<C​​LR0>>>魔法中毒的萨纳雷^000000并收集芯片。";
			next;
			mes "[欧洲]";
			mes "请收集 10 个^0000CD薯片^000000。";
			close2;
			erasequest 3389;
			setquest 3390;
			end;
		case 2:
			end;
		}
		end;
	case 1:
		if (countitem(1000225) < 10) {
			mes "[欧洲]";
			mes "请收集 10 块薯片并带给我。";
			close;
		}
		mes "[欧洲]";
		mes "我查了一下收集的10块薯片。请处理生物芯片。";
		next;
		mes "- 我已经吃完了所有的薯片，没有剩下一点。 -";
		next;
		mes "[欧洲]";
		mes "薯片加工已确定。非常感谢。";
		delitem 1000225,10;
		getitem 1000103,1;
		completequest 3390;
		setquest 3391;
		getexp 11560465,9728632;
		close;
	case 2:
		break;
	}
	switch( checkquest(3391,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[欧洲]";
		mes "你今天已经收集了足够的钱。一天后你能再来见我吗？";
		close;
	case 2:
		erasequest 3391;
		break;
	}
	switch( isbegin_quest(3392) ) {
	case 0:
		mes "[欧洲]";
		mes "冒险家，你又来帮我了吗？";
		mes "那么，你能再从第二马力工厂的《<<CLR2>>>魔法中毒萨纳雷^000000那里收集10个^0000CD薯片^000000吗？";
		next;
		if (select( "接受。", "拒绝。" ) == 2) {
			mes "[欧洲]";
			mes "再这样下去，我恐怕又要出故障了。我需要你的帮助。";
			close;
		}
		mes "[欧洲]";
		mes "然后，请收集10个^0000CD薯片^000000。";
		setquest 3392;
		close;
	case 1:
		if (countitem(1000225) < 10) {
			mes "[欧洲]";
			mes "请收集 10 块薯片并带给我。";
			close;
		}
		mes "[欧洲]";
		mes "我查了一下收集的10块薯片。请处理生物芯片。";
		next;
		mes "- 我已经吃完了所有的薯片，没有剩下一点。 -";
		next;
		mes "[欧洲]";
		mes "薯片加工已确定。非常感谢。";
		delitem 1000225,10;
		getitem 1000103,1;
		erasequest 3392;
		setquest 3391;
		getexp 6236863,4365714;
		close;
	}
	end;

OnInit:
	// Starter
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 9 && BaseLevel >= 180 && isbegin_quest(3389) == 0 && isbegin_quest(3390) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3389) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3390) == 1 && countitem(1000225) >= 10" );

	// Daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(3390) == 2 && isbegin_quest(3392) == 0 && checkquest(3391,PLAYTIME) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3391,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3392) == 1 && countitem(1000225) >= 10" );
	end;
}


		
// Daily quest and instance : Hey! Sweety
ba_in01,28,255,5	script	Manager Beta Almond#ep172_amd01	4_EP17_BASIC_B,{
	if (checkweight(1000103,4) == 0) {
		mes "你无法继续任务，因为你拥有太多物品。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main < 33) {
		cutin "ep172_beta",2;
		mes "[杏仁]";
		mes "你好？很高兴再次见到你~";
		mes "我欠你昨晚对我的照顾。";
		mes "从今天开始你负责这个地方吗？我会好好清理的。";
		next;
		mes "[杏仁]";
		mes "我正在修理甜甜的破损部件，他很擅长破坏它们。";
		mes "他经常要打架，所以你要小心哦~";
		next;
		mes "[杏仁]";
		mes "如果你想进行格斗训练，就告诉我吧。";
		mes "我来帮你清理。";
		close3;
	}
	if (isbegin_quest(18019) == 0) {
		cutin "ep172_beta",2;
		mes "[杏仁]";
		mes "甜甜醒了。他可能知道一些事情。";
		mes "你能和他谈谈吗？";
		setquest 18019;
		close3;
	}
	if (isbegin_quest(18019) == 1) {
		cutin "ep172_beta",2;
		mes "[杏仁]";
		mes "甜甜说的话阿蒙德有一半没听懂。";
		mes "但战斗机器？我记得以前在图书馆见过他打架。";
		close3;
	}
	switch( checkquest(18022,HUNTING) ) {
	case -1:
		break;
	case 0:
	case 1:
		.@md_name$ = "Hey! Sweety";

		.@party_id = getcharid(1);
		.@party_name$ = getpartyname(.@party_id);
		if (.@party_id < 1) {
			mes "^0000CD这是一个纪念地下城。^000000";
			mes "请创建一个聚会并重试。";
			mes "^0000CD可以使用 /organize partyname 命令创建队伍。^000000";
			close;
		}
		if (checkquest(18025,PLAYTIME) == 2) {
			cutin "ep172_beta.bmp",2;
			mes "[杏仁]";
			mes "你又要和甜甜对战吗？";
			mes "那么我想问你一件事...";
			erasequest 18025;
			next;
		}
		mes "[杏仁]";
		mes "甜甜报名参战了？";
		mes "只要阿蒙德留意他就可以了。";
		if (isbegin_quest(18024) == 0 && checkquest(18025,PLAYTIME) == -1) {
			mes "另外，在路上，请到花园里捡起破损的自动人偶的“核心”。";
			setquest 18024;
		}
		next;
		if (select( "创建“" + .@md_name$ + "'.", "输入”" + .@md_name$ + "'.'" ) == 1) {
			if (!is_party_leader()) {
				mes "^4D4DFF这里是纪念地下城。";
				mes "你必须成为队伍领袖才能创建纪念地下城。^000000";
				close;
			}
			if (instance_create(.@md_name$) == -3)
				dispbottom "The reservation of the instance '" + .@md_name$ + "' has failed due to an active instance.";
			mes "[杏仁]";
			mes "来收拾烂摊子吧~";
			close3;
		}
		if (instance_enter(.@md_name$) == IE_OK)
			mapannounce "ba_in01", "" + strcharinfo(0) + " of the party, " + .@party_name$ + ", is entering the " + .@md_name$ + ".", bc_map, "0x00FF99";
		else {
			mes "[杏仁]";
			mes "你能给我时间组织一下吗？";
			close2;
		}
		cutin "",255;
		end;
	case 2:
		break;
	}
	switch( checkquest(18025,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		cutin "ep172_beta.bmp",2;
		mes "[杏仁]";
		mes "客人，到时候请在日落后到宅邸领取破损的人偶核心。";
		mes "仍有许多机器人处于废墟中。";
		close3;
	case 2:
		cutin "ep172_beta.bmp",2;
		mes "[杏仁]";
		mes "稍后你还会再和甜甜对战吗？";
		mes "那么我想问你一件事...";
		erasequest 18025;
		next;
		cutin "ep172_beta.bmp",2;
		mes "[杏仁]";
		mes "甜心应该被修复并且自动机应该被恢复。杏仁忙着呢~";
		close3;
	}
	switch( isbegin_quest(18024) ) {
	case 0:
		cutin "ep172_beta",2;
		mes "[杏仁]";
		mes "正在修复甜甜。自动娃娃阿蒙德正在忙碌。";
		close3;
	case 1:
		if (countitem(1000226) < 10) {
			cutin "ep172_beta.bmp",2;
			mes "[杏仁]";
			mes "我需要你收集超过 10 个破损的娃娃核心......";
			mes "你看起来有点矮？";
			mes "客人，你的努力还不够吗？";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[杏仁]";
		mes "这个核心就够了~我们会用它来修复坏掉的自动人偶……，还有剩余数据的很快就会修复。";
		mes "作为回报，我会给你这张 Barmeal 券。";
		erasequest 18024;
		setquest 18025;
		delitem 1000226,10;
		getitem 1000103,2;
		getexp2 206267,0;
		close3;
	case 2:
		end;
	}
	end;

OnInit:
	// starter
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18018) == 2 && isbegin_quest(18019) == 0" );

	// hunting Sweety
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(18022,HUNTING) == 0 || checkquest(18022,HUNTING) == 1" );

	// item gathering
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18024) == 1 && countitem(1000226) >= 10" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(18025,PLAYTIME) == 2" );
	end;
}

ba_in01,32,250,3	script	Sweety#ep172_swty	4_EP17_SWEETY,{
	if (checkweight(1000103,4) == 0) {
		mes "你无法继续任务，因为你拥有太多物品。";
		mes "请清理您的库存并重试。";
		close;
	}
	if (ep17_2_main < 33) {
		cutin "ep172_beta",2;
		mes "[杏仁]";
		mes "他的身体底座和我们一样，所以修复起来很容易。";
		mes "等他醒了我再告诉你。";
		close3;
	}
	if (isbegin_quest(18019) == 0) {
		cutin "ep172_sweety01",2;
		mes "[甜心]";
		mes "你在看什么？";
		mes "离我远点？！";
		close3;
	}
	if (isbegin_quest(18019) == 1) {
		cutin "ep172_sweety01",2;
		mes "[甜心]";
		mes "啊。我有一个新的身体...";
		next;
		cutin "ep172_beta",0;
		mes "[杏仁]";
		mes "糖果。您错了。";
		mes "这不是新身体，我们只是修复了你的损伤。你明白吗？";
		next;
		mes "[杏仁]";
		mes "令人惊奇的是，您与我们的自动娃娃部件兼容。";
		mes "Alpha说甜甜的身体基础和我们一样。";
		next;
		cutin "ep172_sweety03",2;
		mes "[甜心]";
		mes "呵呵，你知道什么啊。";
		mes "简而言之，我的身体是不朽的。";
		next;
		select( "你以前也是人类，对吧？" );
		cutin "ep172_beta",0;
		mes "[杏仁]";
		mes "如果你跳出框框思考，所有能说话、有理性的生物都是人类。";
		mes "但是，我和甜心不是人类，因为我们没有任何生物学定义，对吗？哈哈。";
		next;
		cutin "ep172_sweety03",2;
		mes "[甜心]";
		mes "胡说八道！我是一个人！我是人类！";
		next;
		mes "[甜心]";
		mes "这群白痴中就只有我一个被认出来了！";
		mes "你知道我是怎么活下来的吗？";
		npctalk "哈哈，过去的事。", "贝塔杏仁经理#ep172_amd01", bc_self;
		next;
		mes "[甜心]";
		mes "如果不是我天才的大脑，我会像其他人一样被抛弃吗？";
		mes "但我能活下来不是很好吗？";
		next;
		select( "这是一个很好的故事..." );
		cutin "ep172_beta",0;
		mes "[杏仁]";
		mes "在我看来……甜甜有一个人的大脑，对吗？";
		mes "他的身体被改造成了自动人偶。";
		mes "这样你是不是也和我们一样成为了自动人偶呢~？";
		next;
		cutin "ep172_sweety03",2;
		mes "[甜心]";
		mes "别把我当成你一样了！";
		mes "我是幻界的一员！";
		mes "我只是在争取时间，我不会轻易倒下的！";
		mes "很快-";
		next;
		select( "很快？" );
		cutin "ep172_beta",0;
		mes "[杏仁]";
		mes "看来你误会了，亲爱的。";
		mes "“入侵者”的首领或者被客人称为“幻象”的人已经逃跑了，对吧？";
		mes "这不是说他们抛弃了你吗？";
		mes "从目前的情况来看，我是这么理解的。";
		next;
		mes "[杏仁]";
		mes "不可能。";
		mes "即使它来了，你也无法收到。";
		mes "我们修理你时，艾莉拿走了你的接收芯片。";
		mes "这不是说艾莉会替你听命吗？";
		npctalk "不！我很快就会收到下一个订单！", "", bc_self;
		next;
		mes "[杏仁]";
		mes "你觉得我该怎么办呢，冒险家？";
		mes "我无法摧毁他，因为这孩子有一颗“人类孩子”的大脑。";
		next;
		cutin "ep172_sweety02",2;
		mes "[甜心]";
		mes "你...？你在说什么？";
		mes "你要对我做什么？";
		mes "我的老师不会抛弃我的！";
		next;
		cutin "ep172_beta",0;
		mes "[杏仁]";
		mes "我可以提个建议吗？";
		mes "甜甜预计会因焦虑而表现出极大的压力。";
		next;
		mes "[杏仁]";
		mes "每当甜甜发脾气的时候你就对付他不是更好吗？";
		mes "然后我会修复他。";
		next;
		mes "[杏仁]";
		mes "我曾经看过一本书，讲的是训练中，每当学员想要站起来时，训练师都会将其击倒，这不是很常见吗？";
		mes "既然这样，我就请你当教练吧。";
		npctalk "嘿！你听不到我说话吗？", "", bc_self;
		completequest 18019;
		next;
		cutin "ep172_sweety04",2;
		mes "[甜心]";
		mes "……所以你根本不听我的意见……？";
		close3;
	}
	switch( checkquest(18023,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		cutin "ep172_sweety04",2;
		mes "[甜心]";
		mes "即使你用那样的眼神看我，我也不会中你的诡计。";
		mes "离开。我需要修理。";
		close3;
	case 2:
		mes "[甜心]";
		mes "我已经完全修复了！";
		mes "你。下次我真的会把你打死的！";
		erasequest 18023;
		close;
	}
	switch( checkquest(18022,HUNTING) ) {
	case -1:
		cutin "ep172_sweety01",2;
		mes "[甜心]";
		mes "它是什么？这是怎么回事？";
		mes "你回来就是为了死在我手里吗？";
		next;
		if (select( "申请战斗。", "进行对话。" ) == 2) {
			cutin "ep172_sweety04",2;
			mes "[甜心]";
			mes "你认为如果你这样做的话我会告诉你什么吗...？";
			mes "你为什么不去死呢？";
			close2;
			cutin "",255;
			npctalk "亲爱的，你总是这样说话~", "贝塔杏仁经理#ep172_amd01", bc_self;
			end;
		}
		cutin "ep172_sweety03",2;
		mes "[甜心]";
		mes "我很高兴听到这个消息。";
		mes "如果你想战斗，随时欢迎！";
		next;
		cutin "ep172_sweety01",2;
		mes "[甜心]";
		mes "但有一个问题。如果你想和我战斗，就得说服阿尔蒙德。";
		mes "你能做到吗？";
		next;
		if (select( "我可以。", "这是不可能的。" ) == 2) {
			cutin "ep172_sweety02",2;
			mes "[甜心]";
			mes "什么，反正你也只是一个无名小卒。";
			close3;
		}
		if (isbegin_quest(18022) == 0)
			setquest 18022;
		mes "[甜心]";
		mes "*轻笑*...这次我不会让你活着...*轻笑*";
		close3;
	case 0:
	case 1:
		cutin "ep172_sweety03",2;
		mes "[甜心]";
		mes "呼呼...来吧，告诉阿尔蒙德！";
		mes "我要去温暖这个身体！";
		mes "今天就是我打倒你的日子！";
		close3;
	case 2:
		cutin "ep172_sweety02",2;
		mes "[甜心]";
		mes "……切，我真的不想见到你。";
		mes "只要拿着这个就走吧！";
		erasequest 18022;
		setquest 18023;
		getitem 1000103,4;
		getexp2 206267,0;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18019) == 1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(18019) == 2 && checkquest(18023,PLAYTIME) == -1 && checkquest(18022,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(18023,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(18022,HUNTING) == 2" );
	end;
}



// Water Garden instance - Step 1
ba_pw02,42,267,5	script	Lensis#jh_ba	20629,{
	if (ep17_2_main < 9) {
		mes "[镜头]";
		mes "未注册为访客的用户被视为敌人。";
		next;
		mes "- 之前的任务仍然存在。 -";
		close;
	}
	if (ep172_watergarden == 0) {
		cloakoffnpcself( "Elyumina#jh_ba1" );
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "我才意识到，我的思维方式是错误的。这个叫瓦蒙特的家伙不是很厉害吗？";
		mes "想想这些美丽的自动娃娃的存在。我应该早点进来的。";
		npctalk "Elyumina：如果我有的话，我就不会被抓住了。", "埃柳米娜#jh_ba1", bc_self;
		emotion ET_SURPRISE, getnpcid(0,"Elyumina#jh_ba1");
		next;
		mes "[艾柳米娜]";
		mes "太美了，这种连接形式，让核心实体可以通过集中的网络控制方式，自由地控制整个宅邸中部署的子对象……";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "然而，它的运作方式使子对象的个性脱颖而出。";
		mes "很有趣。我想知道它与什么样的机器配合使用。";
		emotion ET_BIGTHROB, getnpcid(0,"Elyumina#jh_ba1");
		next;
		cloakoffnpcself( "Rookie#jh_ba1" );
		cloakoffnpcself( "Lazy#jh_ba1" );
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "你看起来很高兴。虽然我不知道什么能让你开心。";
		emotion ET_SWEAT, getnpcid(0,"Rookie#jh_ba1");
		next;
		mes "[新秀]";
		mes "无论如何都要小心。在这薄薄的铁片下面流淌着近乎有毒的污水。";
		next;
		cutin "16lei_02",2;
		mes "[懒惰]";
		mes "我猜你听不到我们的声音是因为你太专注于新机器和自动娃娃了。犯罪科学家女士，你就像一个拥有新玩具的孩子。";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "你是管理这里的自动人偶吗？我可以和你聊一会儿吗？";
		mes "别担心，我不是一个多疑的人。";
		emotion ET_DELIGHT, getnpcid(0,"Elyumina#jh_ba1");
		next;
		cutin "16lei_02",2;
		mes "[懒惰]";
		mes "它更像是一个人而不是一个自动玩偶。";
		mes "什么？等等，自动人偶看起来有点奇怪。刑事科学家女士，小心点……";
		next;
		cutin "ep172_beta",2;
		mes "[镜头]";
		mes "被认可了。识别出入侵者，立即启动排除。";
		next;
		cloakonnpcself( "Elyumina#jh_ba1" );
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "等一下，等一下。我已获得适当许可...啊！";
		specialeffect EF_ICECRASH, AREA, "Elyumina#jh_ba1";
		emotion ET_HUK, getnpcid(0,"Elyumina#jh_ba1");
		next;
		cloakonnpcself( "Rookie#jh_ba1" );
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "哦，这很危险！";
		emotion ET_HUK, getnpcid(0,"Rookie#jh_ba1");
		next;
		cloakoffnpcself( "Elyumina#jh_ba1" );
		cloakoffnpcself( "Rookie#jh_ba1" );
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "啊!咳嗽，咳嗽，咳嗽！";
		mes "啊！这到底是什么？我差点就死了！我不敢相信你以如此可爱的方式做到了这一点。你都湿透了！";
		emotion ET_KEK, getnpcid(0,"Elyumina#jh_ba1");
		next;
		mes "[艾柳米娜]";
		mes "你知道如何因为漂亮而被原谅，不是吗？世界没那么容易！ ……这、这是什么头痛啊？";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "……这可能是一场灾难。";
		mes "这个人就在我们身边。我不是入侵者。 Alpha说你可以和她沟通，但是你为什么要这么做呢？";
		npctalk "Lazy：愤怒的语境有点奇怪。你确定你没事吗？", "懒惰的#jh_ba1", bc_self;
		next;
		cutin "ep172_beta",2;
		mes "[镜头]";
		mes "网络检查，自动纠错。重新确认数据包......";
		mes "啊，我确认了。";
		mes "......但是，超过62%的入侵者有类似的行为模式，所以我认为你是入侵者。";
		next;
		cutin "16loo_03",2;
		mes "[懒惰]";
		mes "那38%去哪儿了？";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "别开这种玩笑了，懒惰！";
		mes "你知道米娜不再是一个幻觉。";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "等等，我有点奇怪……我的头很痛，我开始感到头晕和恶心。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "我们该怎么办。这里的污水是流向实验室的，所以几乎有毒。";
		mes "我不敢相信你掉进了乍一看很糟糕的水中。";
		emotion ET_THINK, getnpcid(0,"Rookie#jh_ba1");
		next;
		cutin "",255;
		select( "不应该去看医生吗？" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "这是个好主意。冒险家，你能进<NAVI>[宅邸]<INFO>ba_maison,169,270,0,101,0</INFO></NAVI>告诉他们准备医疗设施吗？";
		mes "我和懒惰的人会照顾好艾柳米娜，赶紧跟上。";
		next;
		cutin "",255;
		if (select( "交给我吧！", "拒绝。" ) == 2) {
			cutin "16loo_01",2;
			mes "[新秀]";
			mes "冒险者，你不会认为米娜仍然是幻象吧？";
			mes "收到了米娜亲手制作的武器和模块！";
			close3;
		}
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "谢谢你，冒险家！我马上就和你在一起。";
		mes "啊，米娜。她的脸看起来是蓝色的，不是吗？冒险家，请让他们赶紧准备吧！";
		navigateto("ba_maison",169,270);
		close2;
		cutin "",255;
		ep172_watergarden = 1;
		setquest 16427;
		cloakonnpcself( "Elyumina#jh_ba1" );
		cloakonnpcself( "Rookie#jh_ba1" );
		cloakonnpcself( "Lazy#jh_ba1" );
		end;
	}
	cutin "ep172_beta",2;
	mes "[镜头]";
	mes "你好，客人。欢迎来到污水处理厂。";
	next;
	mes "[镜头]";
	mes "该区域是实验室污水排放的地方，皮肤接触或摄入非常危险，可能会导致立即死亡，因此建议大家远离该区域。";
	next;
	mes "[镜头]";
	mes "如果你需要毒药，我可以给你……";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 9 && ep172_watergarden == 0" );
	end;
}

ba_pw02,45,267,3	script(CLOAKED)	Elyumina#jh_ba1	4_EP17_ELYUMINA,{
	emotion ET_DELIGHT;
	npctalk "Elyumina：我刚刚意识到，我的思维方式是错误的。这个叫瓦蒙特的家伙不是很厉害吗？", "", bc_self;
	cloakonnpcself();
	end;
}

ba_pw02,50,264,3	script(CLOAKED)	Rookie#jh_ba1	4_M_ROOKIE,{
	npctalk "Rookie：我不知道我是怎么和这两个人在一起的。", "", bc_self;
	cloakonnpcself();
	end;
}

ba_pw02,48,262,1	script(CLOAKED)	Lazy#jh_ba1	4_M_LAZY,{
	npctalk "Lazy：嗯，这里呼吸有点困难。", "", bc_self;
	cloakonnpcself();
	end;
}


// Water Garden instance - Step 2
ba_maison,169,270,5	script	Need#jh_ba	4_EP17_BASIC_B,{
	if (ep172_watergarden == 1) {
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "哇~你是客人啊！";
		mes "你好。我一直在等待一位客人的到来。";
		emotion ET_SURPRISE;
		next;
		mes "[需要]";
		mes "你要我先做什么？一顿饭？休息？洗澡？";
		mes "我会为你准备一切。告诉我吧。";
		next;
		select( "我需要一个医疗设施。" );
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "啊啊啊啊啊！亲爱的客人，您受伤了吗？在哪里？如何？多少？！";
		mes "我现在就去准备医疗设备和休息的地方！";
		emotion ET_KEK;
		next;
		select( "不、不是……" );
		cloakoffnpcself( "Rookie#jh_ba2" );
		cloakoffnpcself( "Lazy#jh_ba2" );
		cloakoffnpcself( "Elyumina#jh_ba2" );
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你的肤色看起来像泥土。你不能直走……你必须换掉湿衣服。";
		mes "我相信冒险家一定会准备好医疗设施供你立即接受治疗。所以，振作起来。";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "呃……感觉很奇怪。啊，我可以看到机器在流动，螺丝河流……";
		next;
		cutin "16lei_03",2;
		mes "[懒惰]";
		mes "你在看什么。我认为这不正常。犯罪科学家，你还好吗？";
		next;
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "啊？这是入侵者，入侵者！";
		mes "你放心，我不会让他们伤害你的。我会呼叫安全援助！";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "哦...我现在感觉好一点了。入侵者或其他什么。我只要过河就可以了，哈哈哈……";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "等一下，等一下。她和我们在一起。";
		mes "我们需要诊断和治疗。我想请你快点。";
		next;
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "不需要诊断。我被告知发生了什么事。";
		mes "您接触过污水处理厂专门排放的污染污水吗？";
		next;
		mes "[需要]";
		mes "你接触到了来自实验室的危险化学品......";
		mes "基本上，你的生命处于危险之中！";
		npctalk "Elyumina：不，我这样做不是因为我想建立联系。我告诉你那是真的。", "埃柳米娜#jh_ba2", bc_self;
		next;
		mes "[需要]";
		mes "哦，你可以理解你是毒瘾。";
		mes "嗯，这可是大事啊~";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "‘嗯，这可是大事啊~’好吧，这也不是什么大事！";
		mes "我们有什么办法可以破译它吗？";
		npctalk "懒惰：嗯，这是一次愉快的谈话。但是，你根本不处于这样的情况，不是吗？", "懒惰的#jh_ba2", bc_self;
		next;
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "好吧，亲爱的客人。她不是客人。你是入侵者，不是吗？";
		mes "我们不能给入侵者和客人一样的好处。";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "是的，是的。我想是的。好吧，就这样吧……";
		mes "因为如果你离开它，它就会自行死亡。再见，我心爱的机器，我先走了。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "你说话也太难听了来吧，有什么办法吗？";
		mes "仅仅因为你曾经是一个幻象并不意味着你永远是一个幻象。虽然你还是要为你的罪孽付出代价。你也必须忍受这一点。";
		next;
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "如果你知道入侵者毁掉了我们宝贵的工作，你就不会这么说了。";
		npctalk "懒惰：是的，她看起来仍然是幻象，但与幻象略有不同。就一点点。", "懒惰的#jh_ba2", bc_self;
		npctalk "Elyumina：有点……能不能别把我和那些白痴归为一类？", "埃柳米娜#jh_ba2", bc_self;
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "我别无选择，只能使用这个方法。";
		mes "好吧，^0000CD作为一个雇佣兵，作为瓦蒙特的客人来到这里！！！^000000";
		mes "我想拯救这个人。告诉我怎么做！";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "……你为什么要这么做？我在说什么？当然，我是伟大的艾柳米娜，但是你……";
		next;
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "那……如果你这么说的话……";
		mes "你可以使用水花园中的材料^0000CD席尔瓦乳头叶^000000来制作解毒剂。主人就是为了这个目的而养的。";
		next;
		mes "[需要]";
		mes "但是，我不知道园丁是否会让你进去。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "这些信息就足够了。因为这个人有生命危险！你说的是<NAVI>[水上花园]<INFO>ba_maison,239,47,0,101,0</INFO></NAVI>，对吗？";
		mes "走吧，我们自己去检查一下。";
		close2;
		cutin "",255;
		ep172_watergarden = 2;
		erasequest 16427;
		setquest 16428;
		cloakonnpcself( "Rookie#jh_ba2" );
		cloakonnpcself( "Lazy#jh_ba2" );
		cloakonnpcself( "Elyumina#jh_ba2" );
		end;
	}
	if (ep172_watergarden == 2) {
		cutin "ep172_beta",2;
		mes "[需要]";
		mes "你可以使用^0000CD席尔瓦乳头叶^000000制作解毒剂，这是一种来自<NAVI>[水花园]<INFO>ba_maison,239,47,0,101,0</INFO></NAVI>的材料。主人就是为了这个目的而养的。";
		close2;
		cutin "",255;
		navigateto("ba_maison",239,47);
		end;
	}
	cutin "ep172_beta",2;
	mes "[需要]";
	mes "花园里的仓鼠什么都吃。";
	mes "但是，您不应该攻击仓鼠。";
	next;
	mes "[需要]";
	mes "哦，清洁机器人？当然，有些经理这么说，但是……";
	mes "我称它为仓鼠。我在书上读到过。据说凡是勤奋地把东西捡起来放进嘴里的都是仓鼠。而且，仓鼠比清洁机器人更可爱，对吧？";
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ep17_2_main >= 10 && isbegin_quest(16427) == 1" );
	end;
}

ba_maison,177,268,3	script(CLOAKED)	Rookie#jh_ba2	4_M_ROOKIE,{
	npctalk "Rookie：啊，米娜太弱了，我不太习惯~！", "", bc_self;
	cloakonnpcself();
	end;
}
ba_maison,174,266,3	script(CLOAKED)	Elyumina#jh_ba2	4_EP17_ELYUMINA,{
	npctalk "Elyumina：我想我现在好多了。当你被这样讨厌的时候，发生什么事都没关系......", "", bc_self;
	cloakonnpcself();
	end;
}

ba_maison,176,270,3	script(CLOAKED)	Lazy#jh_ba2	4_M_LAZY,{
	npctalk "懒惰：我从来没有见过刑事科学家女士如此沮丧。", "", bc_self;
	cloakonnpcself();
	end;
}


// Water Garden instance - Step 3
ba_maison,234,51,5	script	Elyumina#jh_ba3	4_EP17_ELYUMINA,{
	if (checkweight(1000103,20) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep172_watergarden == 2) {
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "………………、";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "妈的……我就这么怕死吗！";
		mes "切，湿的东西不容易干。";
		close2;
		cutin "",255;
		cloakonnpcself();
		end;
	}
	if (ep172_watergarden == 3) {
		switch( checkquest(16429,HUNTING) ) {
		case -1:
			break;
		case 0:
		case 1:
			cloakoffnpcself( "Elyumina#jh_ba3" );
			cloakoffnpcself( "Rookie#jh_ba3" );
			cloakoffnpcself( "Lazy#jh_ba3" );
			cutin "ep171_elyumina03",2;
			mes "[艾柳米娜]";
			mes "我头晕了，别摇我。";
			mes "我不能去，就算我强迫自己，我也不能去。我走了只会给你带来麻烦。";
			next;
			cutin "16lei_02",2;
			mes "[懒惰]";
			mes "...哇哦，你关心这个吗？刑事科学家女士，这真是一个惊喜。";
			next;
			cutin "ep171_elyumina02",2;
			mes "[艾柳米娜]";
			mes "住口！没必要考虑白痴！";
			mes "反正我就在这里休息了。我一条腿都动不了。";
			next;
			cutin "16loo_01",2;
			mes "[新秀]";
			mes "我需要监视米娜，所以我就留在这里吧，冒险者。";
			next;
			cutin "16lei_01",2;
			mes "[懒惰]";
			mes "我不负责战斗。那么，冒险家，有什么事情想拜托你吗？";
			next;
			select( "一个人去水上花园是命运吗……" );
			cutin "16loo_03",2;
			mes "[新秀]";
			mes "对不起，冒险者。和另一个冒险家一起聚会怎么样？";
			close2;
			cutin "",255;
			cloakonnpcself( "Elyumina#jh_ba3" );
			cloakonnpcself( "Rookie#jh_ba3" );
			cloakonnpcself( "Lazy#jh_ba3" );
			end;
		case 2:
			cutin "ep171_elyumina03",2;
			mes "[艾柳米娜]";
			mes "呃，我想我有一瞬间失去了理智，回来看到了世界末日！";
			mes "啊，这让我发疯。哎，解药什么时候能用完啊？";
			emotion ET_KEK;
			close2;
			cutin "",255;
			cloakonnpcself();
			end;
		}
		// fall through
	}
	else if (ep172_watergarden == 4) {
		cloakoffnpcself( "Elyumina#jh_ba3" );
		cloakoffnpcself( "Rookie#jh_ba3" );
		cloakoffnpcself( "Lazy#jh_ba3" );
		select( "交出解药。" );
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "……这是什么？";
		mes "哦……，是这样吗。解药。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "对不起，让你一个人受苦。我们应该一直在你身边。";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "……你知道的，谢谢。";
		next;
		cutin "16lei_03",2;
		mes "[懒惰]";
		mes "呃，我听不清楚。请说出来。";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "别担心，我没有对你这么说！";
		next;
		cutin "16lei_01",2;
		mes "[懒惰]";
		mes "是啊，对了，你为什么不去尝试一下呢？当你在我身边徘徊时，我很难去审视犯罪科学家。";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "哦，我真是烦透了……";
		mes "无论如何，你，" + strcharinfo(0) + "。谢谢你给我找到解药。";
		next;
		mes "[艾柳米娜]";
		mes "而你……是洛基吗？幸运的？无论如何，Rebellion，谢谢你为我跑来跑去。";
		npctalk "……菜鸟，是菜鸟。", "新秀#jh_ba3", bc_self;
		npctalk "关于我的什么？你不感谢我吗？", "懒惰的#jh_ba3", bc_self;
		next;
		mes "[艾柳米娜]";
		mes "就像你们说的，我已经不是幻象了。";
		mes "无论如何，我不觉得自己属于那里。我留下来只是因为他们支持我的研究。";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "当有人坚持这一点和其他人承认这一点时，情况是不同的。";
		next;
		mes "[艾柳米娜]";
		mes "还被这么可爱、聪明、自动的娃娃讨厌……也不错啊。";
		next;
		cutin "16lei_03",2;
		mes "[懒惰]";
		mes "我想这就是我想说的重点……？";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "无论如何，我不会再和那些白痴扯上关系了。我保证。";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "如果有什么我能做的，我会配合抓捕他们。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "啊，是的。这对话有点尴尬……";
		mes "但谢谢你。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "顺便说一句，冒险家从水上花园回来肯定很辛苦。";
		mes "虽然不多，但我还是给你一些我的饭票吧。你会接受的，对吗？";
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "期待为 Seihyu 的工作提供帮助。当我愿意的时候我会来帮忙的！";
		close2;
		cutin "",255;
		cloakonnpcself( "Elyumina#jh_ba3" );
		cloakonnpcself( "Rookie#jh_ba3" );
		cloakonnpcself( "Lazy#jh_ba3" );
		ep172_watergarden = 5;
		completequest 16430;
		getitem 1000103,20;
		getexp2 3094009,0;	// note: no jexp and ignores the adjustment factors
		end;
	}
	cutin "ep171_elyumina03",2;
	mes "[艾柳米娜]";
	mes "冒险家，安静！我一个人不能被抓到这里！";
	next;
	cutin "ep171_elyumina02",2;
	mes "[艾柳米娜]";
	mes "你，如果你要夺走我和瓦蒙特自动人偶对话的宝贵机会，我就杀了你！";
	close2;
	cutin "",255;
	cloakonnpcself();
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16430) == 1" );
	end;
}

ba_maison,235,45,3	script(CLOAKED)	Rookie#jh_ba3	4_M_ROOKIE,{
	npctalk "Rookie：我是个罪人，让你独自受苦。我们也应该去那里。", "", bc_self;
	cloakonnpcself();
	end;
}

ba_maison,233,48,5	script(CLOAKED)	Lazy#jh_ba3	4_M_LAZY,{
	npctalk "懒惰：我不负责战斗。那么，冒险家，有什么事情想拜托你吗？", "", bc_self;
	cloakonnpcself();
	end;
}

// Daily quests
ba_maison,239,47,3	script	Seihyu#jh_ba	4_EP17_SCISSORE,{
	if (checkweight(1000103,4) == 0) {	// (custom)
		mes "^008800等一下！！";
		mes "您无法接收更多物品，因为您携带的物品太多。请等灯亮后再试。^000000";
		close;
	}
	if (ep172_watergarden < 2) {
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "你好，客人。";
		mes "这里是码头，但目前没有船只在运营。";
		close3;
	}
	if (ep172_watergarden == 2) {
		cloakoffnpcself( "Elyumina#jh_ba3" );
		cloakoffnpcself( "Rookie#jh_ba3" );
		cloakoffnpcself( "Lazy#jh_ba3" );
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "......................";
		next;
		cutin "16lei_02",2;
		mes "[懒惰]";
		mes "你的目光感觉冰冷。";
		next;
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "欢迎您，我……";
		mes "我能为你做什么？";
		next;
		cutin "16loo_02",2;
		mes "[新秀]";
		mes "我想获得许可。";
		mes "我们可以进入水上花园吗？我必须在里面拿到^0000CD银乳头叶^000000。";
		next;
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "啊~她来了！你就是提出这个要求的人！";
		mes "我不想帮助入侵者！";
		next;
		cutin "16lei_03",2;
		mes "[懒惰]";
		mes "我刚才就想知道，我们是同一群人，但是，你如何区分入侵者和客人呢？";
		next;
		mes "[懒惰]";
		mes "这位犯罪科学家的脸上看不出任何入侵者的迹象。";
		next;
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "我们无法区分。这只是数据收集。您所说的每一句话和每一个行动都是我们收集的数据。";
		next;
		mes "[星雨]";
		mes "我们对其进行比较以产生最佳结果。然后我们排除入侵者，这就是Alpha的行动方针。";
		next;
		mes "[星雨]";
		mes "我想问一下。你为什么要试图拯救那个人？";
		mes "她不也是伤害过你的人吗？";
		next;
		mes "[星雨]";
		mes "是因为你还需要它吗？";
		mes "这是人类所做的吗？";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "嗯，那就是……";
		next;
		cutin "",255;
		switch( select( "Elyumina 是我们的同事。", "她的帮助足以回报她所做的一切。", "我不想杀死敌人或同事。") ) {
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "怎么会？我正在了解什么是同事。";
			mes "按照定义，她绝对不是同事。";
			next;
			cutin "ep171_elyumina03",2;
			mes "[艾柳米娜]";
			mes "人类本来就是愚蠢的。这就是为什么我正在做一些与机器的美丽思维不同的事情……这有点悲惨，但这就是我的故事。";
			next;
			cutin "ep171_elyumina04",2;
			mes "[艾柳米娜]";
			mes "不管怎样，有这样好奇心的机器，太有吸引力了。 I want to know more about your way of thinking.";
			next;
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "我把你排除在外了。";
			mes "人类的判断对我来说也太困难了。但谢谢你的意见。";
			break;
		case 2:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "是这样吗？ Did you save her for the reason that she could be helpful in the future?";
			next;
			cutin "ep171_elyumina04",2;
			mes "[艾柳米娜]";
			mes "哈哈哈哈……是不是有点像自动娃娃？";
			mes "你这样工作是为了提供帮助，帮助人们。";
			next;
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "不要把我们和你比较。";
			mes "......但是人类的判断标准，我认为有点不稳定。";
			break;
		case 3:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "我没想到你会这么说。";
			mes "根据长期收集的数据，人类是一个在必要时会互相伤害的物种。";
			next;
			cutin "ep171_elyumina03",2;
			mes "[艾柳米娜]";
			mes "我不想杀任何人。";
			mes "但他们是如此的软弱和愚蠢，以至于他们不断地自行死亡。";
			next;
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "被排除在外的人的意见毫无价值。";
			next;
			mes "[星雨]";
			mes "……人类真是太狡猾了。";
			mes "我不明白你的标准，但我还是理解了。";
			break;
		}
		next;
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "... 好的。如果是这样，请帮我一个忙。";
		mes "我们将为您提供前往水上花园的通道，但请帮助我们的工作。";
		next;
		mes "[星雨]";
		mes "由于入侵者的干扰，水上花园的多项任务都陷入了瘫痪。";
		mes "如果你答应帮我，我就为你打开水上花园。";
		next;
		cutin "",255;
		if (select( "帮助。", "不要帮助。" ) == 2) {
			mes "[星雨]";
			mes "那么就没有交易了。";
			mes "正如我之前所说，我有责任排除入侵者。";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "这是一笔交易。";
		mes "这只是一笔交易。我仍然意识到我有责任排除入侵者。";
		next;
		cutin "ep171_elyumina04",2;
		mes "[艾柳米娜]";
		mes "此时，我开始感到恶心。我一定会让你爱上我。";
		next;
		cutin "16lei_02",2;
		mes "[懒惰]";
		mes "你听起来像言情小说的女主角，但对方却很模糊。";
		next;
		cutin "16loo_03",2;
		mes "[新秀]";
		mes "好吧，好吧。不管是复仇剧还是言情小说，先做解药，等好了再说。";
		mes "米娜，你能动一下吗？据说里面很危险...";
		next;
		cutin "ep171_elyumina03",2;
		mes "[艾柳米娜]";
		mes "……抱歉，我不能做得太过分。";
		mes "现在连走路都困难了。";
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "好吧，那我想我得留下来监视米娜了。";
		mes "冒险家，你能进去拿一下席尔瓦乳头的叶子吗？";
		next;
		cutin "16lei_01",2;
		mes "[懒惰]";
		mes "我是非战斗人员，所以我会呆在外面。我的力量只是为了保护我自己。这是我为了将疼痛降到最低而采取的预防措施。";
		next;
		cutin "",255;
		if (select( "我马上回来。", "我也是一名非战斗人员。" ) == 2) {
			cutin "16lei_01",2;
			mes "[懒惰]";
			mes "啊？冒险家……回顾一下迄今为止你所经历的战斗。";
			mes "然后把手放在胸前再想一想。";
		}
		else {
			cutin "16loo_03",2;
			mes "[新秀]";
			mes "我相信冒险家。";
			mes "请小心。";
		}
		next;
		cutin "16loo_01",2;
		mes "[新秀]";
		mes "那么，我们就在这里等着吧。";
		mes "请再去和Seihyu谈谈吧。";
		next;
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "你可以和我旁边的<NAVI>[哈拉德]<INFO>ba_maison,238,44,0,101,0</INFO></NAVI>说话，然后进入水上花园。";
		mes "进去可能会有危险，但冒险者选择了这里，所以要小心。";
		next;
		cutin "16lei_02",2;
		mes "[懒惰]";
		mes "我想它是在脑子里进进出出的，那个自动人偶……";
		next;
		cutin "ep171_elyumina01",2;
		mes "[艾柳米娜]";
		mes "不过自动娃娃还是可以的。";
		close2;
		cutin "",255;
		ep172_watergarden = 3;
		erasequest 16428;
		setquest 16429;
		end;
	}
	if (ep172_watergarden == 3) {
		switch( checkquest(16429,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "你可以和我旁边的<NAVI>[哈拉德]<INFO>ba_maison,238,44,0,101,0</INFO></NAVI>说话，然后进入水上花园。";
			mes "进去可能会有危险，但冒险者选择了这里，所以要小心。";
			close3;
		case 2:
			cloakoffnpcself( "Elyumina#jh_ba3" );
			cloakoffnpcself( "Rookie#jh_ba3" );
			cloakoffnpcself( "Lazy#jh_ba3" );
			cutin "16loo_02",2;
			mes "[新秀]";
			mes "你已经完整地回来了。";
			mes "干得好，冒险家！";
			next;
			cutin "16lei_01",2;
			mes "[懒惰]";
			mes "我们有席尔瓦乳头叶，所以我要请人制作一种解药。";
			next;
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "我可以配制解药。";
			mes "首先，席尔瓦乳头叶本身就是多种症状的解毒剂，所以只需改变配方，让客人更容易摄入即可。";
			next;
			cutin "16loo_02",2;
			mes "[新秀]";
			mes "那么……你能做到吗？";
			next;
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "好的。把席尔瓦·帕皮拉的叶子给我。";
			next;
			cutin "",255;
			select( "交出席尔瓦·帕皮拉的叶子" );
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes ".....................";
			next;
			mes "[星雨]";
			mes ".....................";
			mes ".....................";
			next;
			mes "[星雨]";
			mes ".....................";
			mes ".....................";
			mes ".....................";
			next;
			cutin "ep171_elyumina01",2;
			mes "[艾柳米娜]";
			mes "很高兴看到别人制作的智能自动娃娃。";
			mes "我想研究分析……要是这种头晕消失就好了……";
			next;
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "你的夸奖我不高兴。";
			mes "……这里，解药。";
			next;
			cutin "",255;
			select( "领取解药。" );
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "好吧，我想请你在完成工作后继续提供帮助。";
			mes "我相信你会信守诺言。";
			next;
			cutin "16loo_01",2;
			mes "[新秀]";
			mes "请把解药交给<NAVI>[米娜]<INFO>ba_maison,234,51,0,101,0</INFO></NAVI>。";
			close2;
			cutin "",255;
			ep172_watergarden = 4;
			erasequest 16429;
			setquest 16430;
			// note: no exp
			end;
		}
	}
	if (ep172_watergarden == 4) {
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "好吧，我想请你在完成工作后继续提供帮助。";
		mes "我相信你会信守诺言。";
		close3;
	}
	cutin "ep172_beta",2;
	mes "[星雨]";
	mes "欢迎回来，亲爱的客人。";
	mes "你来这里是为了兑现你的承诺吗？今天我有几件事要请教。";
	next;
	cutin "",255;
	switch( select( "席尔瓦乳头亨特", "大乳头亨特", "失踪园丁", "别帮忙。" ) ) {
	case 1:
		switch( checkquest(16432,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "你需要休息一下。哦，不只是你，水上花园也需要休息。";
			mes "我们有园丁设定的植物文化，这就是今天的内容。";
			next;
			mes "[星雨]";
			mes "请休息一下，天亮后再回来。";
			mes "我很乐意再次请求您的帮助。";
			close3;
		case 2:
			erasequest 16432;
			break;
		}
		switch( checkquest(16431,HUNTING) ) {
		case -1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "如您所知，一种名为 Silva Papilla 的植物生活在水上花园的最深处。";
			mes "它是一种非常聪明和敏感的植物，可以控制多只蝴蝶。";
			next;
			mes "[星雨]";
			mes "由于最近发生了入侵者事件，玩偶的数量大大减少，我们的园丁目前无法处理这种棘手的植物。";
			next;
			mes "[星雨]";
			mes "你能去水上花园寻找并为我找到一个^0000CDSilva Papilla^000000吗？";
			next;
			cutin "",255;
			if (select( "我会帮助你。", "我现在无法帮助你。" ) == 2)
				break;
			mes "谢谢。当你猎杀其中一个后，其他园丁就会处理剩下的事情。";
			mes "你可以和我旁边的<NAVI>[哈拉德]<INFO>ba_maison,238,44,0,101,0</INFO></NAVI>说话，然后进入水上花园。";
			close2;
			setquest 16431;
			end;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "由于最近发生了入侵者事件，玩偶的数量大大减少，我们的园丁目前无法处理这种棘手的植物。";
			next;
			mes "[星雨]";
			mes "你能去水上花园寻找并为我找到一个^0000CDSilva Papilla^000000吗？";
			close3;
		case 2:
			cutin "ep172_beta",2;
			mes "[哈拉德]";
			mes "你已经获得了席尔瓦乳头。";
			mes "我已经和里面的一位园丁确认过了。";
			next;
			mes "[哈拉德]";
			mes "感谢您对园丁的帮助。";
			mes "如果你有时间的话，下次我会再次请求你的帮助。";
			next;
			mes "[哈拉德]";
			mes "我会给你一些 Barmeal 券作为对你帮助的回报。可以在宅邸的餐厅自由使用。";
			close2;
			cutin "",255;
			setquest 16432;
			erasequest 16431;
			getitem 1000103,4;
			getexp 800000,500000;
			end;
		}
		break;
	case 2:
		if (BaseLevel < 180) {
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "帮我做这个事，我怕会给客人带来危险。";
			next;
			mes "[星雨]";
			mes "由于大乳头在很多方面都很难处理。我想问一下您是否已经更习惯水上花园了。";
			next;
			mes "- 你必须至少达到 180 级才能接受此任务。 -";
			close3;
		}
		switch( checkquest(16434,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "你需要休息一下。哦，不只是你，水上花园也需要休息。";
			mes "我们有园丁设定的植物文化，这就是今天的内容。";
			next;
			mes "[星雨]";
			mes "请休息一下，天亮后再回来。";
			mes "我很乐意再次请求您的帮助。";
			close3;
		case 2:
			erasequest 16434;
			break;
		}
		switch( checkquest(16433,HUNTING) ) {
		case -1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "如您所知，一种名为 Grand Papilla 的植物生活在水花园的最深处。";
			mes "它是一种非常聪明和敏感的植物，可以控制多只蝴蝶。";
			next;
			mes "[星雨]";
			mes "由于最近发生了入侵者事件，玩偶的数量大大减少，我们的园丁目前无法处理这种棘手的植物。";
			next;
			mes "[星雨]";
			mes "你能去水花园寻找并为我找到一个^0000CD大乳头^000000吗？";
			next;
			cutin "",255;
			if (select( "我会帮助你。", "我现在无法帮助你。" ) == 2)
				break;
			mes "[星雨]";
			mes "谢谢。当你猎杀其中一个后，其他园丁就会处理剩下的事情。";
			mes "你可以和我旁边的<NAVI>[哈拉德]<INFO>ba_maison,238,44,0,101,0</INFO></NAVI>说话，然后进入水上花园。";
			close2;
			setquest 16433;
			end;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "由于最近发生了入侵者事件，玩偶的数量大大减少，我们的园丁目前无法处理这种棘手的植物。";
			next;
			mes "[星雨]";
			mes "你能去水花园寻找并为我找到一个^0000CD大乳头^000000吗？";
			close3;
		case 2:
			cutin "ep172_beta",2;
			mes "[哈拉德]";
			mes "你已经获得了大乳头。";
			mes "我已经和里面的一位园丁确认过了。";
			next;
			mes "[哈拉德]";
			mes "感谢您对园丁的帮助。";
			mes "如果你有时间的话，下次我会再次请求你的帮助。";
			next;
			mes "[哈拉德]";
			mes "我会给你一些 Barmeal 券作为对你帮助的回报。可以在宅邸的餐厅自由使用。";
			close2;
			cutin "",255;
			setquest 16434;
			erasequest 16433;
			getitem 1000103,4;
			getexp 8000000,5000000;
			end;
		}
		break;
	case 3:
		switch( checkquest(16436,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "你需要休息一下。哦，不只是你，水上花园也需要休息。";
			mes "我们有园丁设定的植物文化，这就是今天的内容。";
			next;
			mes "[星雨]";
			mes "请休息一下，天亮后再回来。";
			mes "我很乐意再次请求您的帮助。";
			close3;
		case 2:
			erasequest 16436;
			break;
		}
		if (isbegin_quest(16435) == 1) {
			if (countitem(1000099) > 0) {
				cutin "ep172_beta",2;
				mes "[星雨]";
				mes "你检查过吗？园丁们怎么样了？";
				mes "我被告知这些娃娃是安全的。我想它只是忘记了定期联系。";
				next;
				mes "[星雨]";
				mes "园丁总是忘记联系我，所以我想我必须作为这些地区的经理接受全面的检查。";
				mes "或者入侵者可能正在造成某种骚乱。首先，似乎唯一的办法就是每次都检查人数。";
				next;
				cutin "",255;
				select( "交出您收到的 cookie。" );
				cutin "ep172_beta",2;
				mes "[星雨]";
				mes "...... 饼干？";
				mes "你收到这个了吗？当然，这是只有园丁才有的零食，也可以作为他们健康状况的确认。";
				next;
				mes "[星雨]";
				mes "无论如何，谢谢您的检查。吃点饼干吧。他们说很好吃。这是一种滋养花园里动植物的饼干，但当我送给客人时，他们也很喜欢。";
				next;
				mes "[哈拉德]";
				mes "我会给你一些 Barmeal 券作为对你帮助的回报。可以在宅邸的餐厅自由使用。";
				close2;
				cutin "",255;
				setquest 16436;
				erasequest 16435;
				delitem 1000099,countitem(1000099);
				getitem 1000103,4;
				getexp 800000,500000;
				end;
			}
			cutin "ep172_beta",2;
			mes "[星雨]";
			mes "园丁失去连接的常见地方是迷宫花园。";
			mes "请您到水上花园去看看园丁们是否还好吗？";
			close3;
		}
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "由于最近发生了入侵者和植物变化的事件，园丁经常被更换。然而，有园丁进入了水花园并失去了连接。";
		next;
		mes "[星雨]";
		mes "我认为花园有问题，因为与其他园丁的连接经常被切断。";
		next;
		mes "[星雨]";
		mes "你能进去检查一下是否是网络问题、无法通讯，或者检查一下其他园丁是否还好？";
		next;
		cutin "",255;
		if (select( "我去帮你看看。", "拒绝。" ) == 2)
			break;
		cutin "ep172_beta",2;
		mes "[星雨]";
		mes "谢谢。如果您遇到其中一位园丁，请告诉他们与我联系。";
		close2;
		cutin "",255;
		setquest 16435;
		end;
	case 4:
		break;
	}
	cutin "ep172_beta",2;
	mes "[星雨]";
	mes "你有空吗？有帮助总是好的。我会在这里。如果你有时间，请来和我谈谈。";
	close3;

OnInit:
	// Story
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16428) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16429,HUNTING) == 2" );

	// Daily quests
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16431,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(16433,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16435) == 1 && countitem(1000099) > 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep172_watergarden == 5 && checkquest(16432,PLAYTIME) == -1 && checkquest(16431,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep172_watergarden == 5 && BaseLevel >= 180 && checkquest(16434,PLAYTIME) == -1 && checkquest(16433,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep172_watergarden == 5 && checkquest(16436,PLAYTIME) == -1 && isbegin_quest(16435) == 0" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16432,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16434,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(16436,PLAYTIME) == 2" );
	end;
}

// Water Garden - instance creation
// ba_maison,238,44,5	script	Harad#jh_ba1	4_EP17_BASIC_B,{
