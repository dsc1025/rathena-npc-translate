//===== rAthena Script =======================================
//= Terra Gloria - Illusion
//===== Description: =========================================
//= [Walkthrough Conversion]
//= Quest NPCs - Illusion series
//
//- Note: Probably missing some questinfo on Illusion of Vampire.
//===== Changelog: ===========================================
//= 1.0 Illusion of Moonlight initial release [crazyarashi]
//= 1.1 Script & function cleanup [Everade]
//= 1.2 Added Illusion of Vampire [Capuche]
//= 1.3 Added Illusion of Frozen [Capuche]
//= 1.4 Added Illusion of Turtle [Capuche]
//= 1.5 Added Illusion of Luanda [Capuche]
//= 1.6 Added Illusion of Underwater [Capuche]
//= 1.7 Added Illusion of Twins [Capuche]
//= 1.8 Added Illusion of Teddy Bear [Atemo]
//============================================================

//============================================================
//= Illusion of Moonlight
//============================================================
payon,164,229,5	script	Elder Sanyul#illusion_moonlight	1_F_ORIENT_04,{
	if (BaseLevel < 100) {
		mes "[山勇]";
		mes "嗯，我预感有什么可疑的事情要发生。";
		mes "我希望你更坚强。那么，我就可以告诉你这件事了。";
		next;
		mes "^4D4DFF您必须达到 100 级或以上才能执行此任务。^000000";
		close;
	}
	if (illusion_moonlight == 0) {
	OnStart:
		mes "[ 贾吉姆 ]";
		mes "这件事现在已经不在我们手中了。";
		mes "我们不能让它继续这样发生。";
		next;
		mes "[山勇]";
		mes "现在就等待^0000FF无烟^000000吧。";
		mes "她的安全比什么都重要。";
		next;
		select("打扰一下。");
		mes "[山勇]";
		mes "嗯？你是一个冒险家。";
		mes "你碰巧听到我们的谈话了吗？";
		next;
		mes "[山勇]";
		mes "我懂了。";
		mes "也许是你无意中听到了我们的信仰。";
		next;
		mes "[山勇]";
		mes "佩永后面的弓箭手村附近有一个洞穴。";
		mes "这是一个闹鬼的洞穴，所以我们定期在那里进行仪式和驱魔。";
		next;
		mes "[山勇]";
		mes "但九尾狐灵比我们想象的还要愤怒。";
		mes "每当有人试图对狐狸珠进行仪式时，他们都会做噩梦。";
		npctalk "就好像神灵都在与他们对抗一样。","紫金长老#illusion_moonlight",bc_self;
		next;
		mes "[山勇]";
		mes "而这一次，她彻底失去了理智，进入了山洞之中。";
		mes "这就是为什么我们担心她。";
		next;
		select("是关于穆妍的吗？");
		npctalk "也许我们应该派其他人去。","紫金长老#illusion_moonlight",bc_self;
		mes "[山勇]";
		mes "是的。她是定期进行仪式的灵魂链接者。";
		mes "我们已经请一名士兵找到她。";
		mes "他们现在肯定已经到了山洞附近了。";
		next;
		mes "[ 贾吉姆 ]";
		mes "你能帮我们检查一下^0000FFMuyeon^000000吗？";
		next;
		npctalk "是的。您可以...吗？","",bc_self;
		if (select("当然，我会：对不起，我害怕鬼。") == 2) {
			mes "[山勇]";
			mes "啊？我们没有说任何关于鬼的事情。或者我们有吗？";
			close;
		}
		mes "[ 贾吉姆 ]";
		mes "我希望士兵能在她深入破败的村庄之前找到她。";
		next;
		mes "[ 贾吉姆 ]";
		mes "请去山洞看看无烟和士兵是否已经在外面了。";
		mes "一名年轻书生跟着士兵，但她看起来一点也不可靠。";
		next;
		mes "[ 贾吉姆 ]";
		mes "和那位学者谈谈，也许他可以给你提供一些情况。";
		illusion_moonlight = 1;
		setquest 7776;
		close;
	}
	if (illusion_moonlight == 1) {
		mes "[ 贾吉姆 ]";
		mes "我希望士兵能在她深入破败的村庄之前找到她。";
		next;
		mes "[ 贾吉姆 ]";
		mes "请去山洞看看无烟和士兵是否已经在外面了。";
		mes "一名年轻书生跟着士兵，但她看起来一点也不可靠。";
		next;
		mes "[ 贾吉姆 ]";
		mes "和那位学者谈谈，也许他可以给你提供一些情况。";
		close;
	}
	mes "[山勇]";
	mes "我希望一切都会好起来。";
	mes "啊？我说的是后面的洞穴。";
	mes "我很担心那里发生的事情。";
	close;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"BaseLevel >= 100 && illusion_moonlight < 1";
	end;
}

payon,167,229,3	script	Elder Jagyeom#illusion_moonlight	4_M_HUOLDARMY,{
	if (BaseLevel < 100) {
		mes "[ 贾吉姆 ]";
		mes "我希望一切都会好起来。";
		mes "看你是个冒险家，想必你对^0000FF佩永洞穴^000000很熟悉。";
		mes "小心点，里面有不好的事情发生。";
		next;
		mes "^0000FF您必须达到 100 级或以上才能执行此任务。";
		close;
	}
	if (illusion_moonlight == 0) {
		doevent "Elder Sanyul#illusion_moonlight::OnStart";
		end;
	}
	if (illusion_moonlight == 1) {
		mes "[山勇]";
		mes "请前往弓箭手村的洞穴入口。";
		mes "向那里的年轻学者询问无烟的下落。";
		close;
	}
	mes "[ 贾吉姆 ]";
	mes "也许我们是时候把事情留给年轻一代了。";
	mes "我们老人家无能为力。";
	close;
}

pay_arche,48,137,4	script	Young Scholar#ill_moon_arch	4_F_03,{
	if (illusion_moonlight == 0) {
		npctalk "他们怎么还不出来……","",bc_self;
		end;
	}
	if (illusion_moonlight == 1) {
		npctalk "为什么他们还不出来……","",bc_self;
		mes "[青年学者]";
		mes "啊，今天一定是我的幸运日！";
		mes "就在我需要冒险家的时候，一位冒险家出现了！";
		next;
		mes "[青年学者]";
		mes "打扰一下。";
		mes "我听说冒险者为别人做了很多事情。这是真的吗？";
		next;
		select("是的，但我现在很忙。：拒绝。");
		mes "[青年学者]";
		mes "...我懂了。";
		mes "你一定很忙。";
		mes "很抱歉打扰你了。";
		mes "顺便问一下，是什么风把你吹到这里来的？";
		next;
		select("你见过一个叫穆妍的人吗？");
		mes "[青年学者]";
		mes "穆妍？你是说灵魂链接者无烟吗？";
		mes "好吧，从技术上来说，她仍然是一名学徒，但这并不重要。";
		next;
		mes "[青年学者]";
		mes "我现在正在等她。";
		mes "她像是着了什么东西一样，跑进了山洞里。";
		next;
		mes "[青年学者]";
		mes "正熙？我的意思是，一名士兵跟着她进来，但他们都没有出来。";
		mes "我正在考虑是否应该去追他们。";
		next;
		mes "[青年学者]";
		mes "我希望这两个人不会发生什么不好的事情。";
		cloakoffnpcself( "Payon Soldier#ill_moon_arch" );
		cloakoffnpcself( "Muyeon#ill_moon_arch" );
		sleep2 750;
		npctalk "他们在那里！他们看起来很好！","青年学者#ill_moon_arch",bc_self;
		sleep2 1500;
		npctalk "唉，我不想再训练了！","无烟#ill_moon_arch",bc_self;
		npctalk "...","佩扬士兵#ill_moon_arch",bc_self;
		next;
		mes "[ 武妍]";
		mes "钟海，你来这里做什么？";
		npctalk "我很担心你..","",bc_self;
		next;
		mes "[ 武妍]";
		mes "你虽然担心我，但这就是你愿意跟随我的程度吗？";
		mes "忘了它。不管我有多痛苦，我都不需要你的帮助！";
		sleep2 500;
		npctalk "现在，这就足够了。","佩扬士兵#ill_moon_arch",bc_self;
		sleep2 500;
		npctalk "这、这不公平……","",bc_self;
		next;
		npctalk "再见！","无烟#ill_moon_arch",bc_self;
		mes "[ 武妍]";
		mes "啊，我不会再这样做了。快告诉那些老家伙们吧！";
		next;
		npctalk "叹。我会去追她。和长老们谈谈好吗？","佩扬士兵#ill_moon_arch",bc_self;
		sleep2 1500;
		cloakonnpcself( "Payon Soldier#ill_moon_arch" );
		cloakonnpcself( "Muyeon#ill_moon_arch" );
		mes "[青年学者]";
		mes "那是……！";
		mes "她没有告诉我们发生了什么就离开了。";
		next;
		mes "[青年学者]";
		mes "啊，刚刚！";
		mes "话说冒险家，你不是在找无烟吗？";
		next;
		select("我想我现在必须离开了。");
		mes "[青年学者]";
		mes "武妍一定是去了^0000CD独立佩荣宫。^000000";
		mes "我要去那儿，你愿意跟我一起去吗？";
		next;
		illusion_moonlight = 2;
		erasequest 7776;
		setquest 7777;
        if (select("跟他走：分开走。") == 2) {
			mes "[青年学者]";
			mes "武妍一定是去了^0000CD独立佩荣宫。^000000";
			mes "你为什么不去跟她谈谈呢？";
			mes "我会和长老们谈谈。";
			close;
        }
		mes "[青年学者]";
		mes "然后我们就去^0000CD独立佩永宫殿。^000000";
        close2;
        warp "payon",105,320;
        end;
	}
	if (illusion_moonlight == 2) {
		mes "[青年学者]";
		mes "武妍一定是去了^0000CD独立佩荣宫。^000000";
		mes "你为什么不去跟她谈谈呢？";
		mes "我会和长老们谈谈。";
		close;
	}
	if (illusion_moonlight < 6) {
		mes "[青年学者]";
		mes "传说有一只九尾狐得道成仙，月光花就是从她身上流下来的。  我认为这是一个值得研究的故事。";
		close;
	}
	mes "[青年学者]";
	mes "我们去调查一下被毁掉的村庄吧！";
	mes "你愿意跟我一起去吗？";
	next;
	if (select("跟他走：分开走。") == 2) {
		mes "[青年学者]";
		mes "我会打电话给Junghee，我们很快就会跟着你。";
		close;
	}
	mes "[青年学者]";
	mes "我们走吧！";
	close2;
	warp "pay_dun03",145,43;
	end;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 1";
	end;
}

pay_arche,44,133,7	duplicate(dummy_cloaked_npc)	Payon Soldier#ill_moon_arch	4_M_PAY_SOLDIER
pay_arche,46,135,5	duplicate(dummy_cloaked_npc)	Muyeon#ill_moon_arch	4_F_TAEKWON

payon_in03,33,95,3	script	Muyeon#ill_moon_pin	4_F_TAEKWON,{
	if (checkweight(25271,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "- 你携带的物品太多，无法继续执行此任务。 -";
		close;
	}
	if (illusion_moonlight < 2) {
		mes "[ 武妍]";
		mes "如果你要找老师，她就在另一个房间里。";
		close;
	}
	if (illusion_moonlight == 2) {
		.@elder$ = "Jagyeom#ill_moon_pin";
		.@scholar$ = "Young Scholar#ill_moon_pin";
		setpcblock PCBLOCK_ALL,true;
		npctalk "不管你说什么，我都不会再这么做了。","",bc_self;
		sleep2 2500;
		npctalk "这是我第三次做噩梦了。我再也受不了了！","",bc_self;
		sleep2 1000;
		unittalk getcharid(3),"What nightmares?",bc_self;
		npctalk "什么噩梦？",.@scholar$,bc_self;
		sleep2 2000;
		npctalk "关于狐狸的噩梦？九尾和月光花？","",bc_self;
		sleep2 2000;
		npctalk "那些噩梦实在是太可怕了。我不想再经历了。","",bc_self;
		sleep2 2000;
		npctalk "但我们已经没有其他人可以执行这一仪式了。",.@elder$,bc_self;
		sleep2 2000;
		npctalk "每个人在第一次尝试后都放弃了。你已经做了三遍了。",.@elder$,bc_self;
		sleep2 2000;
		npctalk "在谦长老，这次我发生的不仅仅是噩梦。","",bc_self;
		sleep2 2000;
		npctalk "这与我前两次进行的仪式不同。","",bc_self;
		sleep2 2000;
		npctalk "有什么不同？",.@scholar$,bc_self;
		sleep2 2000;
		npctalk "...","",bc_self;
		sleep2 2000;
		npctalk "感觉就像噩梦正在现实中发生一样。","",bc_self;
		sleep2 2000;
		npctalk "你是什​​么意思？你只是想安抚九尾狐愤怒的灵魂。",.@elder$,bc_self;
		sleep2 2000;
		npctalk "你在山洞里看到了什么？",.@elder$,bc_self;
		sleep2 2000;
		npctalk "我无法解释我所看到的。你必须亲眼所见才能相信。","",bc_self;
		sleep2 2000;
		npctalk "我们需要一个强大的人进去，就像那边的冒险家一样，应该去山洞里。","",bc_self;
		illusion_moonlight = 3;
		completequest 7777;
		setquest 7778;
		setpcblock PCBLOCK_ALL,false;
		end;
	}
	if (illusion_moonlight == 3) {
		mes "[ 武妍]";
		mes "好吧，我告诉你这个故事。";
		mes "佩永洞穴曾经是一个村庄的一部分，被山体滑坡掩埋。";
		next;
		mes "[ 武妍]";
		mes "你可以猜到很多人都被埋葬了，他们的灵魂正在寻找这个洞穴。";
		next;
		mes "[ 武妍]";
		mes "其中有一些是九尾狐。狐狸的愤怒超出了正常范围。";
		mes "这就是我们定期举行仪式的原因。";
		next;
		mes "[ 武妍]";
		mes "但现在的问题是，";
		mes "时间一长，狐精们的怨气就越来越大，没人知道其中的原因。";
		mes "也许仪式是他们生气的原因，但它并没有像我们希望的那样发挥作用。";
		next;
		mes "[ 武妍]";
		mes "而且，每次举行仪式时，我都会做噩梦，梦见怨灵和哀嚎的九尾狐。";
		next;
		mes "[ 武妍]";
		mes "通魂者以与神灵沟通为生，做噩梦是正常的事情。";
		next;
		mes "[ 武妍]";
		mes "所以当我的第一个噩梦发生时，我以为它和其他人是同病相怜。";
		mes "但现在我知道了其中的区别，它也与我的健康无关。";
		next;
		mes "[ 武妍]";
		mes "不管是什么原因，都让九尾狐的精神有些激动。";
		mes "它让我失去了理智，让我去了那个破败的村庄。";
		next;
		mes "[ 武妍]";
		mes "而且，我看到了一些东西。";
		mes "这是另一个世界的形象，与我们的世界不同。";
		mes "我们必须关闭那个地方，这样就没有人能够进入它了。";
		next;
		mes "[ 武妍]";
		mes "我有一种不安的预感，可怕的事情即将发生。";
		mes "或者也许它已经发生了..";
		next;
		mes "[ 武妍]";
		mes "我所看到的模糊景象与地狱无异。";
		mes "我在完成最后一次仪式后看到了它。";
		next;
		mes "[ 武妍]";
		mes "我求求你，不要让我再回来做那样的事。";
		mes "我的精神力还不够强大，无法应对这样的噩梦。";
		next;
		mes "[ 武妍]";
		mes "更不用说洞穴内发生的事情了。";
		next;
		mes "[ 武妍]";
		mes "如果你想去，就得一个人去，亲自去看一看。";
		mes "我还带着那颗我试图提纯的狐珠。当您准备好时请告诉我。";
		illusion_moonlight = 4;
		completequest 7778;
		setquest 7779;
		close;
	}
	if (illusion_moonlight == 4) {
		mes "[ 武妍]";
		mes "你准备好了吗？";
		next;
		if (select("是的：还没有。") == 2) {
			mes "[ 武妍]";
			mes "当你准备好时请告诉我。";
			close;
		}
		mes "[ 武妍]";
		mes "好吧，这颗狐珠还没有完全净化。";
		mes "将其放在您的手中。";
		next;
		mes "[ 武妍]";
		mes "放松……并将你的注意力集中在它上面……向它的能量敞开你的思想。";
		close2;
		setpcblock PCBLOCK_ALL,true;
		npctalk "流浪的灵魂，听听看吧！","",bc_self;
		sleep2 250;
		specialeffect EF_PORTAL4;
		specialeffect EF_GROUNDSAMPLE;
		sleep2 1800;
		npctalk "再看看幽冥河的对岸。","",bc_self;
		sleep2 250;
		specialeffect EF_PORTAL5;
		specialeffect EF_QUAKEBODY2;
		for (.@i = 0; .@i < 4; .@i++) {
			cloakoffnpcself( "Nine Tail Spirit#ill_moon_" + .@i );
			specialeffect EF_REDBODY,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 250;
		}
		sleep2 1500;
		npctalk "可怜的灵魂，捂住眼睛，堵住耳朵。","",bc_self;
		sleep2 150;
		specialeffect2 EF_DEVIL1;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		npctalk "死！","九尾灵#ill_moon_0",bc_self;
		sleep2 100;
		specialeffect2 EF_DEVIL6;
		sleep2 100;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		sleep2 150;
		npctalk "死！","九尾灵#ill_moon_1",bc_self;
		sleep2 1000;
		npctalk "离开这个境界。","",bc_self;
		sleep2 150;
		specialeffect2 EF_DEVIL10;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		npctalk "死！","九尾灵#ill_moon_2",bc_self;
		sleep2 150;
		specialeffect EF_BLUELINE;
		sleep2 150;
		npctalk "死！","九尾灵#ill_moon_3",bc_self;
		sleep2 700;
		npctalk "卸下你的负担。","",bc_self;
		sleep2 150;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_MAP_GHOST,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		for (.@i = 0; .@i < 4; .@i++)
			npctalk "死！！！","九尾灵#ill_moon_" + .@i,bc_self;
		sleep2 1200;
		specialeffect EF_BLUELINE;
		sleep2 500;
		specialeffect EF_SCREEN_QUAKE;
		sleep2 1200;
		npctalk "飞到河的对岸。","",bc_self;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_MADNESS_RED,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		for (.@i = 0; .@i < 4; .@i++) {
			npctalk "电子电气工程师学会！", "九尾灵#ill_moon_" + .@i, bc_self;
			sleep2 50;
			specialeffect EF_SCREEN_QUAKE;
			sleep2 300;
		}
		sleep2 1000;
		for (.@i = 0; .@i < 4; .@i++) {
			npctalk "电子电气工程师学会！", "九尾灵#ill_moon_" + .@i, bc_self;
			sleep2 100;
		}
		specialeffect2 EF_JUMPBODY1;
		sleep2 150;
		completequest 7779;
		setquest 7780;
		illusion_moonlight = 5;
		setpcblock PCBLOCK_ALL,false;
		warp "pay_dun03",145,43;
		end;
	}
	if (illusion_moonlight == 5) {
		mes "[ 武妍]";
		mes "现在你知道我经历了什么了。";
		mes "如果你想进一步了解这一点，你就必须参观这座被毁的村庄。";
		next;
		mes "[ 武妍]";
		mes "如果你决定这样做，你就会成为我们中的一员，非常欣喜若狂。大概是因为他是个傻子吧。";
		close;
	}
	if (illusion_moonlight < 8) {
		mes "[ 武妍]";
		mes "如果你要找老师，她就在另一个房间里。";
		close;
	}
	if (illusion_moonlight == 8) {
		mes "[ 武妍]";
		mes "我懂了。";
		mes "所以他们已经实现了。";
		mes "你不知道为什么，是吗？";
		next;
		mes "[ 武妍]";
		mes "也许是因为现实与梦想之间的墙已经倒塌了。";
		mes "不然怎么可能进出别人的梦呢？";
		next;
		mes "[ 武妍]";
		mes "我知道他们是^0000FF月光花的梦想。^000000";
		mes "我不知道它们是如何变成现实的。我怀疑有人知道，真的。";
		next;
		mes "[ 武妍]";
		mes "据我所知，以前从未发生过这样的事情。如果我们想解决这个问题，就得靠我们自己。";
		next;
		mes "[ 武妍]";
		mes "好吧，我会让郑海想办法。";
		mes "好吧，那我还是先去休息一下吧。";
		next;
		mes "[ 武妍]";
		mes "现在知道那些噩梦真的是来自月光花，我心里好受多了。";
		mes "我终于可以睡觉了";
		next;
		mes "[ 武妍]";
		mes "一旦我们处理了噩梦，我们就不需要更多的仪式了。";
		mes "这是否意味着我有空了？终于自由了！";
		mes "我什至不知道该如何感谢你。";
		next;
		mes "[ 武妍]";
		mes "我在那里时发现了这些奇怪的石头。这并不多，";
		mes "但也许你能找到它们的用途？";
		mes "非常感谢冒险家。";
		illusion_moonlight = 9;
		completequest 7788;
		getitem 25271,5;
		getexp 500000,500000;
		close;
	}
	mes "[ 武妍]";
	mes "祝你与 Chunghae 一起调查这一现象好运！";
	mes "一旦噩梦过去，我们就不需要再进行仪式了！";
	next;
	mes "[ 武妍]";
	mes "你问我如何确定？";
	mes "我不知道。呵呵。";
	mes "它们可能不会完全消失。";
	mes "谁知道？";
	close;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 2";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 3";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 4";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 8";
	end;
}

payon_in03,30,96,5	script	Jagyeom#ill_moon_pin	4_M_HUOLDARMY,{
	if (illusion_moonlight == 2) {
		npctalk "武妍……如果你做不到，别人也做不到！","",bc_self;
		end;
	}
	if (illusion_moonlight == 3 || illusion_moonlight == 4) {
		npctalk "我们现在先听听。","",bc_self;
		end;
	}
	if (illusion_moonlight == 5 || illusion_moonlight == 8) {
		mes "[ 贾吉姆 ]";
		mes "我们首先应该掌握情况。";
		mes "如果你能帮助我们的话那就太好了，冒险家。";
		close;
	}
	if (illusion_moonlight == 9) {
		mes "[ 贾吉姆 ]";
		mes "月光花在噩梦中重现着过去。";
		mes "从某种意义上来说，他们也是受害者。";
		next;
		mes "[ 贾吉姆 ]";
		mes "我会确保没有村民能够接近现实和梦想的倒塌之墙。";
		close;
	}
	mes "[ 贾吉姆 ]";
	mes "请遵守宫殿内的礼仪。";
	close;
}

payon_in03,33,93,1	script	Young Scholar#ill_moon_pin	4_F_03,{
	if (illusion_moonlight < 2) {
		mes "[青年学者]";
		mes "佩永自古以来就是神圣生物的家园。";
		mes "一个被群山与世隔绝的小镇，佩永人的思维方式与外界不同。";
		close;
	}
	if (illusion_moonlight == 2) {
		npctalk "穆妍真的很生气。我们应该问问她发生了什么事。","",bc_self;
		end;
	}
	if (illusion_moonlight < 5) {
		npctalk "我们应该问问Muyeon发生了什么事。";
		end;
	}
	if (illusion_moonlight == 5) {
		mes "[青年学者]";
		mes "这太可怕了。";
		mes "我不敢相信 Muyeon 必须独自处理这件事。";
		mes "那些狐狸一定比我想象的还要愤怒。";
		next;
		mes "[青年学者]";
		mes "我们需要进一步研究这一点。我还是去那个破败的村庄吧。";
		close;
	}
	mes "[青年学者]";
	mes "我要留在破败的村子里调查这个现象。";
	mes "但我需要某种形式的保护。我要带正熙一起去";
	next;
	mes "[青年学者]";
	mes "如果你能再次加入我们那就太好了。在破败的村庄见。";
	close;
}

payon_in03,30,96,5	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_0	NINE_TAIL
payon_in03,35,96,3	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_1	NINE_TAIL
payon_in03,30,93,7	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_2	NINE_TAIL
payon_in03,35,93,1	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_3	NINE_TAIL

pay_dun03,140,46,0	script	Shimmering Portal#ill_moon_in	4_ENERGY_BLUE,{
	if (illusion_moonlight < 5) {
		mes "——空气中弥漫着奇异的能量。 -";
		mes "这给我一种焦虑的感觉。";
		close;
	}
	if (illusion_moonlight == 5) {
		mes "空中有一个闪闪发光的传送门。";
		next;
		cloakoffnpcself( "Young Scholar#ill_moon_pdun" );
		cloakoffnpcself( "Junghee#ill_moon_pdun" );
		npctalk "*气喘吁吁*你在这里。","青年学者#ill_moon_pdun",bc_self;
		mes "[青年学者]";
		mes "当你突然消失时我很震惊。";
		mes "你认为这是Muyeon的噩梦之一吗……";
		next;
		select("我得想办法。");
		npctalk "我？如果我不想怎么办？","正熙#ill_moon_pdun",bc_self;
		mes "[青年学者]";
		mes "那么，你介意我跟着一起吗？";
		mes "你不用担心我。正熙可以保护我的安全。";
		next;
		npctalk "D、别碰任何东西！","正熙#ill_moon_pdun",bc_self;
		mes "[青年学者]";
		mes "那……我该碰这个吗？";
		illusion_moonlight = 6;
		completequest 7780;
		setquest 7781;
		close2;
		setpcblock PCBLOCK_NPC, true;
		specialeffect EF_SPINMOVE,AREA,"Young Scholar#ill_moon_pdun";
		specialeffect EF_DQ9_CHARGE,AREA,"Young Scholar#ill_moon_pdun";
		sleep2 350;
		npctalk "啊啊啊——！","",bc_self;
		cloakonnpcself( "Young Scholar#ill_moon_pdun" );
		sleep2 500;
		npctalk "忠海！","正熙#ill_moon_pdun",bc_self;
		sleep2 2000;
		npctalk "那个粗心的笨蛋！","正熙#dun_dummy",bc_self;
		sleep2 500;
		specialeffect EF_SPINMOVE,AREA,"Junghee#ill_moon_pdun";
		specialeffect EF_DQ9_CHARGE,AREA,"Junghee#ill_moon_pdun";
		sleep2 350;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Junghee#ill_moon_pdun" );
		end;
	}
	mes "闪闪发光的传送门的另一边有什么东西。";
	mes "我应该怎么办？";
	next;
	if (select("进入门户。：退出。") == 2) {
		mes "放弃调查吧";
		close;
	}
	warp "pay_d03_i",140,44;
	end;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 5";
	end;
}

pay_dun03,143,45,4	duplicate(dummy_cloaked_npc)	Junghee#ill_moon_pdun	4_M_PAY_SOLDIER
pay_dun03,138,43,7	duplicate(dummy_cloaked_npc)	Young Scholar#ill_moon_pdun	4_F_03

pay_d03_i,140,46,0	script	Shimmering Portal#ill_moon_out	4_ENERGY_BLUE,{
	mes "我可以回到那个被毁掉的村庄了。";
	mes "我应该怎么办？";
	next;
	if (select("退出：不退出。") == 2)
		end;
	warp "pay_dun03",140,44;
	end;
}

pay_d03_i,149,45,4	script	Scholar Chunghae#ill_moon_ind	4_F_03,{
	if (illusion_moonlight < 6)
		end;
	if (illusion_moonlight == 6) {
		mes "[ 忠海 ]";
		mes "看看这个地方！";
		mes "它看起来和我们刚才所在的村庄废墟一模一样，但……又不一样！";
		next;
		mes "[ 忠海 ]";
		mes "另外，这里的人和狐狸都有些不对劲，我在他们中间看到了一位长相奇怪的法师。";
		mes "如果他对这件事负责怎么办？";
		next;
		mes "[ 忠海 ]";
		mes "这些狐狸、村民和愤怒的灵魂……";
		mes "它们让我想起了村庄被山体滑坡掩埋的情景。";
		next;
		mes "[ 忠海 ]";
		mes "我们需要四处寻找更多线索。";
		mes "你会帮忙的，不是吗？";
		next;
		mes "[ 忠海 ]";
		mes "当你准备好时请告诉我。";
		illusion_moonlight = 7;
		completequest 7781;
		close;
	}
	if (checkweight(25271,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "- 你携带的物品太多，无法继续执行此任务。 -";
		close;
	}
	switch (checkquest(7783,PLAYTIME)) {
		case -1:
			break;

		case 0:
		case 1:
			mes "[ 忠海 ]";
			mes "现在我知道这不是破败的村庄。";
			mes "我们真的身处月光花的噩梦之中吗？";
			next;
			mes "[ 忠海 ]";
			mes "慕妍是这么说的。";
			mes "他们的噩梦即将成真。";
			next;
			mes "[ 忠海 ]";
			mes "这个地方值得认真研究。";
			close;

		case 2:
			mes "[ 忠海 ]";
			mes "让我们开始今天的调查吧？";
			mes "也许因为这是一个梦，但一切都没有改变。";
			erasequest 7783;
			next;
			mes "[ 忠海 ]";
			mes "当你准备好时请告诉我。";
			close;
	}
	switch (checkquest(7782,HUNTING)) {
		case -1:
			mes "[ 忠海 ]";
			mes "我和村民们聊过，";
			mes "他们中的许多人告诉我一些奇怪的法师的事。";
			next;
			mes "[ 忠海 ]";
			mes "他们说他所到之处都会施展强大的咒语，正是他的咒语之一震动了地面并导致了致命的山体滑坡。结果，很多村民和狐狸都死了。";
			next;
			mes "[ 忠海 ]";
			mes "我确信法师应对这些猖獗的噩梦负责。";
			mes "如果我们消除了它们的根源，也许噩梦就会停止出现。";
			next;
			mes "[ 忠海 ]";
			mes "当然，我也可能是错的。";
			mes "他可能只是噩梦中的另一个角色。";
			next;
			mes "[ 忠海 ]";
			mes "我最想知道是什么撕裂了现实与梦想之间的墙壁。";
			mes "也许其他地方也发生这种情况？";
			next;
			mes "[ 忠海 ]";
			mes "不管怎样，请照顾这里的^0000FF真理的向导^000000。";
			mes "是时候我们处理这个准现实了。";
			next;
			mes "[ 忠海 ]";
			mes "他非常强大。我不建议^0000FF单独对抗他。^000000";
			next;
			if (select("可以。：不，谢谢。") == 2) {
				mes "[ 忠海 ]";
				mes "呃，那我得调查点别的事情了。";
				mes "但我不会因此而怨恨你。我保证。";
				close;
			}
			mes "[ 忠海 ]";
			mes "祝你好运。";
			mes "看来这个法师的实力还是蛮强的。";
			mes "请小心。";
			setquest 7782;
			close;

		case 0:
		case 1:
			mes "[ 忠海 ]";
			mes "那个^0000CD开悟法师^000000看起来很危险。";
			mes "请阻止他。";
			close;

		case 2:
			mes "[ 忠海 ]";
			mes "你跟我听说的一样有经验。";
			mes "现在，让我们看看这对情况有何影响。";
			next;
			if (illusion_moonlight == 7) {
				mes "[ 忠海 ]";
				mes "还记得穆妍说过的话吗？";
				mes "我是说，关于狐狸的噩梦成真。";
				next;
				mes "[ 忠海 ]";
				mes "我一边思考一边环顾四周。";
				mes "我想我们可能正处于月光花的梦中。";
				next;
				mes "[ 忠海 ]";
				mes "我不知道它是如何与现实联系起来的";
				mes "但我确信一件事：";
				next;
				mes "[ 忠海 ]";
				mes "月光花的灵魂还活在过去。";
				mes "当他们的村庄被埋葬时..";
				next;
				mes "[ 忠海 ]";
				mes "他们死得很惨，无法前往阴间。";
				mes "有件事点燃了他们压抑已久的愤怒。";
				next;
				mes "[ 忠海 ]";
				mes "在这里，有我们在其他地方找不到的真理。";
				mes "我想我会一直留在这里直到找到他们。";
				next;
				mes "[ 忠海 ]";
				mes "请把这个消息传递给别宫的无烟。";
				mes "我和 Junghee 将进一步探索这个地方。";
				illusion_moonlight = 8;
				setquest 7788;
				next;
			}
			mes "[ 忠海 ]";
			mes "我希望我们能够找到这个现象的答案。";
			erasequest 7782;
			setquest 7783;
			getitem 25271,1;
			getexp 300000,300000;
			close;
	}
	end;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 6";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 7 && checkquest(7782,HUNTING) == -1";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 7 && checkquest(7782,HUNTING) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"iillusion_moonlight > 7 && checkquest(7783,PLAYTIME) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"iillusion_moonlight > 7 && checkquest(7782,HUNTING) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"iillusion_moonlight > 7 && checkquest(7783,PLAYTIME) == -1 && checkquest(7782,HUNTING) == -1";
	end;
}

pay_d03_i,152,45,4	script	Soldier Junghee#ill_moon_ind	4_M_PAY_SOLDIER,{
	if (illusion_moonlight < 6)
		end;
	if (illusion_moonlight == 6) {
		mes "[ 正熙 ]";
		mes "我知道进来后我最好靠近忠海。";
		mes "我是对的。";
		next;
		mes "[ 正熙 ]";
		mes "我从这些狐狸和鬼魂身上感受到了非常糟糕的氛围。";
		mes "这不好。";
		close;
	}
	if (checkweight(25271,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "- 你携带的物品太多，无法继续执行此任务。 -";
		close;
	}
	if (checkquest(7784,HUNTING) == 2) {
		mes "[ 正熙 ]";
		mes "它们是否真实并不重要。他们同样具有威胁性。";
		mes "好工作。";
		next;
		mes "[ 正熙 ]";
		mes "忠海已经快完成对这个地方的调查了。我最好准备离开。";
		erasequest 7784;
		setquest 7785;
		getitem 25271,1;
		close;
	}
	if (checkquest(7786,HUNTING)  == 2) {
		mes "[ 正熙 ]";
		mes "它们是否真实并不重要。";
		mes "我可以同情这位士兵。";
		next;
		mes "[ 正熙 ]";
		mes "他一心只想保护别人，却没有实现这个愿望而死。";
		mes "谢谢你帮助他们休息。";
		erasequest 7786;
		setquest 7787;
		getitem 25271,1;
		close;
	}
	mes "[ 正熙 ]";
	mes "还有另一个门户看起来就像我们通过的那个。";
	mes "我触碰了它，它又把我送回了原来的破败村庄。";
	next;
	switch( select( "关于愤怒的九尾。", "关于愤怒的士兵。" ) ) {
	case 1:
		switch( checkquest(7785,PLAYTIME) ) {
		case -1:
			if (checkquest(7784,HUNTING) == -1) {
				mes "[ 正熙 ]";
				mes "由于愤怒的狐狸，忠海在调查这个地方时遇到了问题。";
				mes "如果你能照顾他们，我将不胜感激。";
				break;
			}
			mes "[ 正熙 ]";
			mes "请在此处狩猎^0000FF愤怒的九尾^000000。";
			mes "这将确保忠海在调查期间的安全。";
			close;
		case 0:
		case 1:
			mes "[ 正熙 ]";
			mes "忠海说我们正处于月光花的噩梦之中。";
			mes "它们可能不是真实的，但如果它们对生者构成任何威胁，那么就必须加以照顾。";
			next;
			mes "[ 正熙 ]";
			mes "这与我对他们的同情无关。";
			mes "现在请原谅，我和忠海会去调查其他地方。";
			close;
		case 2:
			erasequest 7785;
			mes "[ 正熙 ]";
			mes "你休息一下了吗？";
			mes "一切都和你离开时一样，但我想清理这个地方，";
			mes "这样Chunghae就可以调查此事。";
			mes "你能猎杀一些^4d4dff愤怒的九尾^000000吗？";
			break;
		}
		next;
		if (select( "接受。", "拒绝。" ) == 2) {
			mes "[ 正熙 ]";
			mes "那么忠海就无法彻底调查这个地方了。";
			close;
		}
		mes "[ 正熙 ]";
		mes "谢谢。";
		mes "我明白为什么那些^0000FF狐狸会生气^000000，但这是必须要做的。";
		setquest 7784;
		close;
	case 2:
		switch( checkquest(7787,PLAYTIME) ) {
		case -1:
			if (checkquest(7786,HUNTING) == -1) {
				mes "[ 正熙 ]";
				mes "这些士兵直到最后一刻都试图保护他们的村民，";
				mes "并与他们一起埋葬。难怪他们如此愤怒。";
				break;
			}
			mes "[ 正熙 ]";
			mes "请照顾这里的^0000FF愤怒的士兵^000000。";
			mes "我的意思是...送他们去天堂。";
			close;
		case 0:
		case 1:
			mes "[ 正熙 ]";
			mes "如果我们真的像忠海想的那样，身处月光花的噩梦之中，";
			mes "那么那边那个愤怒的士兵一定是这个村庄的守卫。";
			next;
			mes "[ 正熙 ]";
			mes "这是否真实并不重要。看着我的祖先受苦是很困难的。";
			mes "我可能最终会浪费我们的时间，但我想尽力帮助他们休息。";
			close;
		case 2:
			erasequest 7787;
			mes "[ 正熙 ]";
			mes "我们能做些什么来摆脱这些噩梦呢？";
			mes "我告诉过你，我很难看着那些士兵而不感到痛苦。";
			break;
		}
		next;
		mes "[ 正熙 ]";
		mes "您能帮我让他们安息吗？";
		next;
		if (select( "接受。", "拒绝。" ) == 2) {
			mes "[ 正熙 ]";
			mes "我真的不想自己去对付他们";
			mes "但我想我必须这样做。";
			close;
		}
		mes "[ 正熙 ]";
		mes "谢谢。";
		mes "我会把^0000FF愤怒的士兵^000000留给你。";
		mes "请送他们去天堂。";
		setquest 7786;
		close;
	}
	end;

OnInit:
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7785,PLAYTIME) == -1 && checkquest(7784,HUNTING) == -1";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7787,PLAYTIME) == -1 && checkquest(7786,HUNTING) == -1";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7785,PLAYTIME) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7787,PLAYTIME) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7784,HUNTING) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7786,HUNTING) == 2";
	end;
}

//= Illusion Moonlight Spawn
pay_d03_i,43,150,5	script	Villager#ill_moon_0	1_F_ORIENT_01,{
	mes "[ 村民]";
	mes "冒险家？";
	mes "你是亡国党的吗？";
	mes "你为什么不能放过我们？";
	next;
	mes "[ 村民]";
	mes "我们不崇拜怪物。";
	mes "我们不会被怪物迷住！";
	next;
	mes "[ 村民]";
	mes "啊...";
	mes "光……魔法……请停止那个魔法……";
	close2;
	initnpctimer;
	disablenpc();
	specialeffect EF_QUAKEBODY2;
	npctalk "啊……啊……啊啊啊……";
	areamonster "pay_d03_i",42,149,44,151,"Resentful Sohee",3762,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,82,237,3	script	Villager#ilp17	1_F_ORIENT_01,5,5,{
	end;

OnTouch:
	specialeffect EF_QUAKEBODY2;
	npctalk "啊啊啊啊啊！！";
	initnpctimer;
	disablenpc();
	areamonster "pay_d03_i",81,236,83,238,"Resentful Sohee",3762,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,254,206,3	script	Villager#ilp18	4_F_01,5,5,{
	end;

OnTouch:
	specialeffect EF_QUAKEBODY2;
	npctalk "有什么不对劲！";
	sleep2 2000;
	npctalk "别了……来了啊啊！！";
	areamonster "pay_d03_i",252,204,255,208,"Resentful Munak",3760,3;
	disablenpc();
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,81,136,3	script	Villager#ill_moon_3	1_M_ORIENT01,{
	mes "[ 村民]";
	mes "你是来征服我们的吗？！";
	mes "我们没有做错什么！";
	mes "难道你就不能和圣物区分开来吗！";
	next;
	mes "[ 村民]";
	mes "啊……狐女……";
	close2;
	initnpctimer;
	disablenpc();
	npctalk "呼、救命！！我不想死！";
	areamonster "pay_d03_i",79,136,81,138,"Resentful Bongun",3761,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,160,260,3	script	Villager#ill_moon_4	1_M_ORIENT01,{
	mes "[ 村民]";
	mes "你...";
	mes "那个奇怪的法师是谁？";
	mes "你为什么……？";
	next;
	mes "[ 村民]";
	mes "你！你并不比他们更好！";
	mes "我们对你做了什么？";
	close2;
	initnpctimer;
	disablenpc();
	npctalk "啊啊——！";
	areamonster "pay_d03_i",158,258,162,262,"Resentful Bongun",3761,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}


//============================================================
//= Illusion of Vampire
//============================================================
gef_dun01,134,224,1	script	Mojo#ilgf	2_F_MAGICMASTER,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[魔力]";
		mes "你确定你能携带所有这些东西吗？你为什么不轻点你的包呢？";
		close;
	}
	if (ill_vampire == 0) {
		mes "[魔力]";
		mes "嗯，你是个冒险家。是什么让你来到我身边？抱歉，我有点忙。你能和那边的牧师谈谈吗？";
		close;
	}
	if (ill_vampire < 16) {
		mes "[魔力]";
		mes "笔记本……我想看看笔记本……如果你想进入笔记本，那么你应该和格林神父交谈。如果你愿意的话，我可以和你一起去。";
		close;
	}
	switch( checkquest(14680,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[魔力]";
		mes "你好，冒险家。";
		next;
		mes "[魔力]";
		mes "哦，抱歉，我现在不能说话。我正忙着检查你带给我的东西。";
		next;
		mes "[魔力]";
		mes "天亮之后你能回来吗？";
		close;
	case 2:
		mes "[魔力]";
		mes "你好，冒险家。你好吗？";
		next;
		mes "[魔力]";
		mes "哇哦，我彻夜未眠地检查干燥的世界树树叶和可疑的星币。如果格林神父不打扰我的话，我就不必这么做了。";
		next;
		mes "[魔力]";
		mes "不管怎样，它们太旧了，保存也很差，很容易碎成灰尘。我无法完成我的研究。";
		next;
		mes "[魔力]";
		mes "所以我在想...今天你能再给我带来一些吗？我需要^0000cd10片干燥的Yggdrasil叶子和10个可疑的星币^000000。";
		next;
		mes "[魔力]";
		mes "另外，请为那个喋喋不休的牧师猎杀每种类型的 5 只僵尸。";
		next;
		mes "[魔力]";
		mes "与此同时，我会抓住一些Z。";
		erasequest 14680;// Time to Research
		setquest 14679;// Send the Dead Back to Earth
		close;
	}
	switch( checkquest(14679,HUNTING) ) {
	case -1:
		mes "[魔力]";
		mes "冒险家，当你触摸笔记本时，你的感觉如何？你认为它如何运作？";
		next;
		mes "[魔力]";
		mes "我有很多问题，但这意味着牧师不让我碰它。";
		next;
		mes "[魔力]";
		mes "冒险家，下次进入笔记本时可以带上我吗？我发誓我不会偷笔记本。我只是真的很好奇。";
		next;
		mes "[格林]";
		mes "我能听到你的声音。放弃你对它的痴迷。那对你来说是最好的。";
		next;
		mes "[魔力]";
		mes "谁说我沉迷于此？";
		next;
		mes "[魔力]";
		mes "冒险家，可以吗？我看起来不可怜吗？";
		next;
		if (select( "你最想知道什么？", "我不想介入你们两个。" ) == 2) {
			mes "[" + strcharinfo(0) + "]";
			mes "抱歉，我不想介入你们两个之间。你们俩都有道理，我不能站在你们任何一个一边。";
			next;
			mes "[魔力]";
			mes "哼，好吧，不过如果你可怜我的话，就回来帮助我吧。承诺？";
			close;
		}
		mes "[魔力]";
		mes "当然是关于那些行尸走肉！";
		next;
		mes "[魔力]";
		mes "我很想知道是什么让他们不断前进，我的前辈们在他们身上做了什么样的实验，他们现在处于什么样的状态。";
		next;
		mes "[魔力]";
		mes "现在此类实验已被禁止，所有旧记录均被销毁。";
		next;
		mes "[格林]";
		mes "它们被摧毁是有充分理由的。所以别再想他们了。";
		next;
		mes "[魔力]";
		mes "哦，原来如此！冒险家，你能帮我捕捉一只僵尸吗？活着，就是这样。";
		npctalk "等等，它不可能活着。它已经死了。", "", bc_self;
		next;
		mes "[格林]";
		mes "不，想都别想。 Mojo，你已经快要突破界限了。";
		next;
		mes "[魔力]";
		mes "我不是在问你！除非你让我碰笔记本，否则就别碰我的头发！";
		next;
		mes "[格林]";
		mes "你刚刚要求这位冒险家活捉一只僵尸。";
		next;
		mes "[格林]";
		mes "你没有考虑它到达这里时会带来什么样的危险。你想要它只是因为你对它感到好奇。";
		next;
		mes "[格林]";
		mes "你忘了为什么乔乔哥哥要你留在这里，远离笔记本吗？";
		next;
		mes "[魔力]";
		mes "所以我才来询问这位冒险家。你一直告诉我不要做这个，不要做那个。有什么我可以做的而不需要你拒绝吗？";
		npctalk "你只是想让我站在这里，呼吸。是这样吗？", "", bc_self;
		sleep2 1000;
		npctalk "当然可以，为什么不呢？", "格林#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "你不能把世界上的任何东西带进书里。如果你这样做，我就除掉他们。";
		next;
		mes "[格林]";
		mes "如果你真想在那些亵渎生物身上做实验，那我建议你先和乔乔兄弟他们谈谈。";
		next;
		mes "[魔力]";
		mes "他们什么时候回来？";
		next;
		mes "[格林]";
		mes "打败了我。";
		npctalk "你应该成为一名政治家。那样的话你会更成功。", "", bc_self;
		sleep2 500;
		npctalk "我会把这当作一种恭维。", "格林#ilgf", bc_self;
		next;
		mes "[魔力]";
		mes "冒险家，我在笔记本上看到主人用了一些材料在丧尸身上做实验。我认为它们是世界树树叶和一些图画。";
		next;
		select("你指的是干燥的世界树叶子和一些星币。");
		mes "[魔力]";
		mes "是的。你至少能帮我采购一下吗？";
		next;
		mes "[魔力]";
		mes "也许我可以用它们来弄清楚她所做的实验以及起死回生的力量。";
		npctalk "当然，是从那位牧师那里秘密得知的。", "", bc_self;
		sleep2 500;
		npctalk "我仍然能听到你的声音。", "格林#ilgf", bc_self;
		sleep2 1000;
		npctalk "别再偷听别人的声音了", "", bc_self;
		next;
		mes "[格林]";
		mes "你为什么沉迷于此？你真的想让这些邪恶的生物在大陆上肆虐吗？你不明白塔为什么禁止实验吗？";
		next;
		mes "[魔力]";
		mes "听着，我不会在僵尸身上做实验。我只是想看看她用的材料。";
		next;
		mes "[魔力]";
		mes "谁知道呢？说不定我就能找到办法，立刻消灭这些丧尸。";
		npctalk "我可能看起来不太像，但我很聪明。", "", bc_self;
		next;
		mes "[魔力]";
		mes "您同意我们对魔术的热情为我们国家的发展做出了贡献。";
		next;
		mes "[格林]";
		mes "...";
		npctalk "我会认为这是肯定的。", "", bc_self;
		next;
		mes "[魔力]";
		mes "我保证我不会做任何危险的事情。我只是看一下材料。";
		next;
		mes "[格林]";
		mes "我会看着你。";
		next;
		mes "[魔力]";
		mes "当然，请做我的客人。";
		npctalk "哦，我要和你一起学习，多兴奋啊！", "", bc_self;
		next;
		mes "[格林]";
		mes "你就不会再向我要这本笔记本了，是吗？";
		next;
		mes "[魔力]";
		mes "啊？但那是……我很想看看。";
		npctalk "你觉得你可以吗？", "格林#ilgf", bc_self;
		sleep2 500;
		npctalk "也许有一天，是的。", "", bc_self;
		sleep2 1000;
		npctalk "我向奥丁发誓那一天永远不会到来。", "格林#ilgf", bc_self;
		sleep2 1000;
		npctalk "呸!", "", bc_self;
		next;
		select("那么你们达成协议了吗？");
		mes "[魔力]";
		mes "是的，我们有。请给我一些干燥的世界树叶子和星币。每个10个听起来不错。";
		next;
		mes "[格林]";
		mes "你确定这足够了吗？";
		next;
		mes "[魔力]";
		mes "嗯，我还不确定。你介意我稍后再问你更多吗？好的，那么请给我带来^0000cd10片干燥的Yggdrasil叶子和10片可疑的星币^000000。";
		next;
		mes "[魔力]";
		mes "哦，当你这样做的时候，你能为那个皱着眉头的牧师猎杀一些僵尸吗？每种只有5个。我不想给你增加负担。";
		npctalk "你已经成为他的负担了。", "格林#ilgf", bc_self;
		sleep2 500;
		npctalk "是的，但是看看你，当我提出要求时，你的脸亮了。", "", bc_self;
		next;
		mes "[魔力]";
		mes "冒险家，谢谢你为我们所做的一切。";
		setquest 14679;// Send the Dead Back to Earth
		close;
	case 0:
	case 1:
		break;
	case 2:
		if (countitem(25266) < 10 || countitem(25267) < 10)
			break;
		mes "[魔力]";
		mes "冒险家，欢迎回来！我等你很久了！我问的东西你带来了吗？来吧，让我看看他们！";
		next;
		mes "[魔力]";
		mes "哇，这些东西又旧又脆弱，我担心它们会在我手里碎掉。";
		next;
		mes "[格林]";
		mes "你现在幸福吗？不过，它们看起来与您正在使用的没有任何不同。";
		next;
		mes "[魔力]";
		mes "你们牧师是我认识的最不好奇的人。我要求这些是因为我想将它们与我拥有的进行比较，并且需要敏锐的眼睛才能发现细微的差异。";
		next;
		mes "[魔力]";
		mes "冒险家，明天你能再给我带来一些吗？我担心我可能会损坏你今天带来的所有这些。即使我不这样做，我也可以使用更多样本。";
		next;
		mes "[魔力]";
		mes "太感谢了。明天见！";
		delitem 25266,10;	// Dried_Yggdrasil_Leaf
		delitem 25267,10;	// SuspiciousMagicCircle
		erasequest 14679;	// Curious by Nature
		setquest 14680;		// Time to Research
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	mes "[魔力]";
	mes "冒险家，欢迎回来！我等你很久了！我问的东西你带来了吗？来吧，让我看看他们！";
	next;
	mes "[魔力]";
	mes "嗯，这还不够。请给我带来^0000cd10片干燥的世界树树叶和10片可疑的星币^000000。";
	next;
	mes "[魔力]";
	mes "另外，你能为那边那个愁眉苦脸的牧师猎杀每种类型的 5 只僵尸吗？谢谢！";
	close;

OnInit:
	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14680,PLAYTIME) == -1 && checkquest(14679,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14679,HUNTING) == 2 && countitem(25266) > 9 && countitem(25267) > 9") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14680,PLAYTIME) == 2") );
	end;
}
gef_dun01,133,221,1	duplicate(dummy_cloaked_npc)	Mojo#ilgf01	2_F_MAGICMASTER
gef_dun01,130,222,5	duplicate(dummy_cloaked_npc)	Mojo#ilgf02	2_F_MAGICMASTER
gef_dun01,130,224,5	duplicate(dummy_cloaked_npc)	Mojo#ilgf03	2_F_MAGICMASTER

gef_dun01,132,223,5	script	Grimm#ilgf	4_M_MINISTER,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[格林]";
		mes "你确定你能携带所有这些东西吗？你为什么不轻点你的包呢？";
		close;
	}
	if (BaseLevel < 130) {
		mes "[格林]";
		mes "这个地方对你来说太危险了。等你更强了，请回来。";
		close;
	}
	if (ill_vampire == 0) {
		mes "[魔力]";
		mes "让我读一下。过后我就去把他们带出来。请？";
		npctalk "请？", "莫乔#ilgf", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf" );
		cloakoffnpcself( "Mojo#ilgf01" );
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf01");
		npctalk "请？", "莫乔#ilgf01", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf01" );
		cloakoffnpcself( "Mojo#ilgf02" );
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf02");
		npctalk "请？", "莫乔#ilgf02", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf02" );
		cloakoffnpcself( "Mojo#ilgf03" );
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf03");
		npctalk "请？", "莫乔#ilgf03", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf03" );
		cloakoffnpcself( "Mojo#ilgf" );
		npctalk "请？", "莫乔#ilgf", bc_self;
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf");
		next;
		mes "[格林]";
		mes "别管我了！我知道如果我把它给你，你就会带着它逃跑。";
		npctalk "呸!", "莫乔#ilgf", bc_self;
		next;
		mes "[魔力]";
		mes "我发誓我会把它还给你。只需一分钟。三十秒怎么样？那么十秒呢？";
		next;
		mes "[格林]";
		mes "不！我什至都不会让你碰它！";
		next;
		mes "[魔力]";
		mes "来吧，是我，莫乔。你不相信我吗？";
		next;
		mes "[格林]";
		mes "不，我不。我可能在信仰上相信我的妹妹莫乔，但不信任法师莫乔。";
		next;
		mes "[魔力]";
		mes "哦，来吧！你是牧师？你应该对每个人都有信心！你为何待我如小偷？";
		emotion ET_CRY, getnpcid(0, "Mojo#ilgf");
		npctalk "号泣！哦，上帝！我竟然受到如此不公平的对待！", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "我只相信他，但他告诉我不要相信你。";
		npctalk "他还在对我低声说这句话。";
		next;
		mes "[魔力]";
		mes "我什么也没听到！";
		next;
		mes "[格林]";
		mes "当然不是。只有他的仆人才能听到他的声音。";
		emotion ET_FRET, getnpcid(0, "Mojo#ilgf");
		npctalk "哇，我闻到了谎言的味道，而且是从你嘴里发出来的。", "莫乔#ilgf", bc_self;
		sleep2 1000;
		npctalk "这是亵渎！";
		next;
		select("你愿意治愈我吗？");
		emotion ET_SMILE;
		mes "[格林]";
		mes "当然可以。任何时候你都可以，" + ( Sex ? "兄弟。" : "姐妹。" );
		specialeffect2 EF_HEAL2;
		npctalk "他真是个伪君子。我再也不能相信牧师了，这是他的错。", "莫乔#ilgf", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "谢谢。抱歉，但我听到了你们的战斗声，即使是在这个地牢的那个遥远的角落。";
		next;
		mes "[格林]";
		mes "你有吗？我们一定非常大声。我想我们这可不太聪明。";
		next;
		mes "[魔力]";
		mes "哦，这太棒了！与其争斗，不如问问这位冒险家到底谁对谁错？";
		next;
		mes "[魔力]";
		mes "冒险家，如果你不忙的话，可以听我们说完吗？";
		npctalk "如果您很忙，我们会理解的。", "莫乔#ilgf", bc_self;
		next;
		if (select( "让我听听。", "我得走了。" ) == 2) {
			mes "[格林]";
			mes "我懂了。可惜这么好的机会你却不能抓住。";
			next;
			mes "[格林]";
			mes "如果您改变主意，请随时回来。";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "让我听听。";
		next;
		mes "[格林]";
		mes "好吧，这将是一个很长的故事。先让我喝点水吧。";
		ill_vampire = 1;	// the variable must be updated here to use setquest to update questinfo
		setquest 14652;// Detailed Account 01
		close;
	}
	if (ill_vampire == 1) {
		mes "[格林]";
		mes "冒险家，你知道格芬地下的这些地下墓穴曾经很安静，充满了特殊的能量而不是怪物吗？";
		next;
		mes "[格林]";
		mes "那时，大约每十年左右才会有几个怪物出现一次。";
		next;
		select("是什么改变了这一点？");
		emotion ET_OHNO;
		mes "[格林]";
		mes "*瞥见Mojo*";
		next;
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "你为什么看着我？";
		npctalk "我与此无关。", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "一些法师决定建造一座自己的象牙塔。他们找遍了大陆各处，最终在这些地下墓穴上方的地面上落脚。";
		next;
		mes "[格林]";
		mes "这就是悲剧的开始。";
		emotion ET_ANGER, getnpcid(0, "Mojo#ilgf");
		npctalk "哦天啊，又来了。", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "据说所有哺乳动物的好奇心都足以与他们的食欲相媲美，但法师……是最糟糕的。";
		npctalk "讲课就够了。已经进入正题了。", "莫乔#ilgf", bc_self;
		sleep2 500;
		npctalk "一切都有因果。在不知道原因的情况下，你怎么能指望冒险家明白这是怎么回事呢？";
		next;
		mes "[格林]";
		mes "不管怎样，这些法师在建造了格芬塔之后，就注意到了地下墓穴中时不时出现的亵渎生物。";
		next;
		mes "[格林]";
		mes "他们进行了各种实验来了解复活死者的特殊能量。";
		npctalk "他们只是在学习。", "莫乔#ilgf", bc_self;
		sleep2 500;
		npctalk "刚刚学习？他们本可以将整个大陆变成邪恶的滋生地！";
		next;
		mes "[格林]";
		mes "似乎这还不够，那些法师们使用他们的魔法，复制了复活的过程。";
		next;
		mes "[格林]";
		mes "那是非常错误的。地下墓穴周围的特殊能量爆炸，将埋在地下墓穴中的所有死者带了回来。";
		next;
		mes "[格林]";
		mes "那些嚣张的法师竟然越界了！他们试图扮演上帝！";
		next;
		emotion ET_ANGER, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "嘿嘿，我也是他们中的一员，我不会让你这样说我前辈的坏话的！";
		next;
		mes "[格林]";
		mes "当我只说实话时，我怎么能诽谤他们呢？";
		npctalk "当你只从自己的角度讲述时，这不是事实！", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "冒险家你怎么看？你会相信一个如此鲁莽的人来完成重要任务吗？";
		next;
		select("...不。");
		mes "[魔力]";
		mes "但是等等，冒险家。你还没有听过我的故事。";
		npctalk "在做出判断之前，你必须听取双方的意见！", "莫乔#ilgf", bc_self;
		next;
		mes "[魔力]";
		mes "我们知道我们想要研究的东西可能是危险的，所以我们尽力小心。";
		npctalk "显然，在这种情况下，尽力而为还不够。";
		sleep2 500;
		npctalk "你为什么这么说？我说的是我的前辈们！", "莫乔#ilgf", bc_self;
		next;
		mes "[魔力]";
		mes "我的前辈们可能太热衷于研究塔下的东西，但正是这种热情使格芬成长为这座魔法之城。";
		next;
		mes "[魔力]";
		mes "符文米德加特的两侧是这片大陆上最强大的两个国家阿鲁纳费尔兹和黑森林，而它的魔法力量正是将它们拒之门外的原因。";
		next;
		mes "[格林]";
		mes "这是阻止教会进一步推动此事的唯一原因，";
		next;
		mes "[格林]";
		mes "即使这并不能改变你唤醒死人的事实。";
		npctalk "格林神父，你能别插话吗？", "莫乔#ilgf", bc_self;
		sleep2 500;
		npctalk "我不能。你歪曲事实，让自己看起来很好。";
		next;
		mes "[魔力]";
		mes "好奇心是我们生活的动力。这是发展的种子。冒险家，你会因为危险而犹豫是否要去新世界吗？";
		next;
		select("如果我这么做的话我就不会成为冒险家了。");
		mes "[魔力]";
		mes "从这个意义上来说，我们魔法师就和你们冒险者一样。我就知道你会理解我的。";
		emotion ET_OK, getnpcid(0, "Mojo#ilgf");
		next;
		mes "[魔力]";
		mes "你听到了，格林神父。现在给我看看笔记本。";
		next;
		mes "[格林]";
		mes "不，冒险家，你同意我的看法，她不值得信任。";
		next;
		mes "[魔力]";
		mes "你也同意我关于好奇心的价值的观点。";
		next;
		select("那么，这是关于什么的呢？");
		mes "[" + strcharinfo(0) + "]";
		mes "我听过你们俩的声音，但你们都没有告诉我你们为什么而战。";
		next;
		mes "[格林]";
		mes "哦，对不起。符文米德加特教会定期派遣其牧师前往这些地下墓穴以维持和平。";
		next;
		mes "[格林]";
		mes "我是其中之一，就在你找到我们之前，我碰巧拿起了一本^0000cd笔记本^000000。";
		next;
		select("笔记本？");
		mes "[格林]";
		mes "是的。看起来它属于格芬塔法师之一。封面上写着<<<C​​LR0>>>波米^000000，我想这是它主人的名字。";
		next;
		mes "[魔力]";
		mes "但我的公会成员中没有一个有这样的名字。我读了这本书，她听起来确实像是我们中的一员。不过，^0000cd不再^000000了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "不再？";
		next;
		emotion ET_OK, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "你真是太敏锐了，冒险家。这是正确的。我查了一下公会，发现有一个叫波密的人。然而，她有一天就失踪了。";
		npctalk "那是很久很久以前的事了。", "莫乔#ilgf", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你认为这本笔记本是她的吗？但为什么会在这里？";
		next;
		mes "[魔力]";
		mes "这与我们一开始问的问​​题是一样的。一旦我们阅读了书中所写的内容，这些就不再重要了。";
		next;
		mes "[格林]";
		mes "里面写的内容令人不安，但更严重的是？你必须自己阅读。只是不要打开^0000cd最后一页^000000。";
		next;
		mes "[魔力]";
		mes "所以你可以接受这个冒险家读它，但我不行。";
		npctalk "你知道那是歧视，对吧？你应该为自己感到羞耻！", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "请看一下。";
		erasequest 14652;// Detailed Account 01
		setquest 14653;// Detailed Account 02
		ill_vampire = 2;
		close;
	}
	if (ill_vampire == 2) {
		mes "我把手放在格林神父拿着的书上。突然，我感到头晕目眩，周围的空气都闪烁起来。我小心翼翼地打开笔记本。";
		next;
		mes "[每日日记]";
		mes "我在学习新咒语的过程中再次晕倒了。";
		mes "我的体力低和法力不足一直是问题所在。我以为我可以用魔法来弥补我虚弱的体质。当然，即便如此也需要一些最低限度的体力，但我连这个都没有。";
		mes "我太累了...";
		next;
		mes "[每日日记]";
		mes "我看到索菲亚正在喝魔法药水。也许魔药是我永无休止地寻求身体支持的答案。";
		mes "我想知道是否有特殊的药水可以改善我的体质。那么，我终于可以变得更强了。";
		next;
		mes "[每日日记]";
		mes "我找到的所有药剂都对改善我虚弱的体质没有帮助。他们所做的只是增强已有的力量。";
		mes "也许我应该尝试自己配制耐力和法力药剂。";
		next;
		mes "[每日日记]";
		mes "当我在图书馆阅读有关塔楼的历史时，我了解了格芬塔下的地下墓穴。";
		mes "死人如何复活？什么样的生命力让他们不断前行？";
		mes "我需要获得许可才能进入地下墓穴。我明天要去检查一下。";
		next;
		mes "[每日日记]";
		mes "死人不会说话。我从他们身上找不到任何信息。";
		mes "我到处都发现了实验的痕迹。我的一些同龄人一定比我先到这里。";
		mes "我今天特别累。今晚我要早点睡觉。";
		next;
		mes "[每日日记]";
		mes "地下墓穴里的蝙蝠喝僵尸的血，可能是因为没有其他东西可以吃。";
		mes "每天，我都会花费大部分精力来驱赶嗜血的蝙蝠。如果我不呆在出口附近，我就会被杀。";
		mes "我累了。";
		next;
		mes "[每日日记]";
		mes "今天，我听到地下墓穴里有一些奇怪的声音。丧尸和蝙蝠安静得出奇。";
		mes "也许明天我应该更深入地探索地下墓穴，而怪物们则躲起来躲避任何噪音。";
		next;
		mes "这是最后一个条目。我把手从笔记本上拿开。格林神父合上笔记本。";
		erasequest 14653;// Detailed Account 02
		setquest 14654;// Detailed Account 03
		ill_vampire = 3;
		close;
	}
	if (ill_vampire == 3) {
		mes "[" + strcharinfo(0) + "]";
		mes "该笔记本既是^0000cd日记，又是研究日志^000000。";
		next;
		mes "[格林]";
		mes "的确。它展示了它的主人如何研究这些亵渎生物来^0000cd创造耐力和法力增强剂^000000。";
		next;
		select("有趣的。");
		emotion ET_OK, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "是的。我的公会很乐意研究这本笔记本。同一时代的大多数记录都已丢失。";
		npctalk "我自己也很想读一下。", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "这本笔记本的内容并不是引起我恐慌的原因。当你触摸它时，你没有感觉到一些^0000cd奇怪的能量^000000吗？";
		next;
		mes "[格林]";
		mes "这本书以主人的灵力为支撑，将凝视它的人带入《<<CLR0>>>里面的世界^000000。";
		next;
		mes "[魔力]";
		mes "这就是为什么我如此渴望看到这台笔记本。我想知道它里面是如何包含一个世界的，以及为什么它现在才被发现。";
		npctalk "所以请让我拥有它。等我弄清楚一切后，我会把它还给你。", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "法师，你别插手此事！这本笔记本正在带人们去一些我们不知道的地方。网关在最后一页。";
		npctalk "哦，你甚至不再费心叫我的名字了。", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "我扫描了它是否有任何恶意，但我没有感觉到任何恶意。我认为它的所有者只是^0000cd需要帮助来完成一些未完成的事情^000000。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那么你们是否正在争论你们中的哪一个应该去那个地方呢？";
		next;
		mes "[格林]";
		mes "不，我们小组的其他成员和两名法师已经在那里了。他们只是还没有回来。";
		npctalk "所以我告诉过你，我会去把他们带回来。我比看起来更坚强。我可以自己做这件事。", "莫乔#ilgf", bc_self;
		sleep2 500;
		npctalk "不，我宁愿等到他们回来。";
		next;
		select("我去怎么样？");
		mes "[格林]";
		mes "你？嗯，你比这位姐姐可靠，但是你确定吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我想报答你治愈了我。另外，听了你们俩的话，我想我还是走吧。要我去把你的同事带回来吗？";
		next;
		mes "[格林]";
		mes "不。我只是想让你^0000cd找到他们^000000并确保他们没事。如果他们需要帮助，请提供给他们。如果他们有消息给我，请告诉我。";
		npctalk "带我一起去吧！", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "我希望我能和你一起去，但我的团队需要我在这里。";
		npctalk "*瞥见Mojo*";
		sleep2 500;
		npctalk "你为什么盯着我？", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "我不能相信她会把笔记本交给她。万一出了什么事，里面的人恐怕就回不来了。";
		next;
		emotion ET_ANGER, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "这样就可以了！格林神父，把那本书放下。我们来战斗吧！";
		sleep2 500;
		npctalk "*哼哼*我为什么要这么做？你只会带着它逃跑。";
		next;
		mes "[魔力]";
		mes "那我就跟冒险家一起去吧！";
		next;
		mes "[格林]";
		mes "不，你要和我住在一起。你不敢碰这本书。";
		next;
		emotion ET_CRY, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "你为什么要这样对我？我对你做了什么？";
		next;
		mes "[格林]";
		mes "乔乔哥哥叫我永远不要让你碰这本书。你不记得了吗？";
		npctalk "他真的很担心你。";
		next;
		mes "[魔力]";
		mes "不，我不记得了。等宝石姐姐回来，我就告发你！";
		npctalk "前进。";
		next;
		mes "[格林]";
		mes "现在，冒险家。当你准备好时请告诉我。";
		erasequest 14654;// Detailed Account 03
		setquest 14655;// I'm Ready
		ill_vampire = 4;
		close;
	}
	if (ill_vampire < 15) {
		mes "[格林]";
		mes "你想进入笔记本吗？你准备好了吗？";
		next;
		if (select( "是的。送我去那里。", "不。" ) == 2) {
			mes "[格林]";
			mes "不是问题。当您准备好时请告诉我。";
			close;
		}
		mes "[格林]";
		mes "那么，让我打开它。";
		next;
		mes "我把手放在笔记本上，格林神父翻到了最后一页。突然，我的视线变得模糊，我感觉自己的身体被传送到了某个地方。";
		if (ill_vampire == 4) {
			erasequest 14655;// I'm Ready
			setquest 14656;// Finding Father Grimm's Colleagues
			ill_vampire = 5;
		}
		close2;
		warp "gef_d01_i",114,216;
		end;
	}
	if (ill_vampire == 15) {
		mes "[格林]";
		mes "听我说，否则你可以随时返回塔楼。";
		next;
		emotion ET_MERONG, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "不！";
		next;
		select("你们两个还在打架吗？");
		mes "[魔力]";
		mes "啊，你来了！那个地方怎么样？";
		next;
		mes "[格林]";
		mes "我很高兴你安全回来了。里面的人都还好吗？";
		npctalk "请已经告诉我们了。我很想知道！", "莫乔#ilgf", bc_self;
		next;
		mes "我把笔记本上发生的事情转述给格林神父和莫乔，并告诉他们其他人决定留下来监视吸血鬼。";
		next;
		emotion ET_SPARK, getnpcid(0, "Mojo#ilgf");
		mes "[魔力]";
		mes "哇，在另一个位面的同一个地方！我以前从未听说过这个！它是如何运作的？这本笔记本肯定和它有关系。";
		next;
		mes "[魔力]";
		mes "还有懂人类的吸血鬼吗？天哪！";
		next;
		mes "[魔力]";
		mes "我不能留在这里。格林神父，我必须进去。请让我走吧！";
		npctalk "把笔记本给我吧。", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "不，从来没有。把手放在自己身上。";
		npctalk "啊！你为什么这么固执？我不值得这样！", "莫乔#ilgf", bc_self;
		next;
		mes "[格林]";
		mes "冒险家，谢谢你为我们冒险进入那个神秘的地方。如果您能偶尔拜访我那里的同事并向我带来他们的消息，我将不胜感激。";
		next;
		mes "[魔力]";
		mes "我也能做到，你知道。你只要给我一个机会就可以了！";
		npctalk "莫乔姐姐，请别插手此事。", "", bc_self;
		next;
		mes "[格林]";
		mes "冒险家，谢谢你。如果您想^0000cd再次进入笔记本^000000，请随时来找我。";
		completequest 14666;// Warden's Role
		getexp 2000000,2000000;
		ill_vampire = 16;
		getitem 25271,5;// Illusion Stone
		close;
	}
	if (ill_vampire == 16) {
		mes "[格林]";
		mes "冒险家，你想进入笔记本吗？";
		next;
		if (select( "是的。", "不。" ) == 2) {
			mes "[格林]";
			mes "不是问题。当您准备好时请告诉我。";
			close;
		}
		mes "[格林]";
		mes "祝你好运。";
		close2;
		warp "gef_d01_i",114,216;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_vampire == 0 && BaseLevel >= 130" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14666) == 1" );
	end;
}

gef_d01_i,94,133,0	script	#illcon01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ill_vampire == 5) {
		if (strnpcinfo(0) == "#ilgf01")
			specialeffect2 EF_BIG_PORTAL;
	}
	else if (ill_vampire == 6) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Priest#ilgf01" );
		for ( .@i = 3; .@i < 10; ++.@i )
			cloakoffnpcself( "Marina#ilgf0" + .@i );
	}
	else if (ill_vampire == 7) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Undead#ilgf06" );
		cloakoffnpcself( "Wizard#ilgf06" );
		cloakoffnpcself( "Wizard#ilgf07" );

		cloakoffnpcself( "Wizard#ilgf08" );
		cloakoffnpcself( "Nameless Catacomb#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf09" );
		cloakoffnpcself( "Wizard#ilgf10" );

		cloakoffnpcself( "Wizard#ilgf11" );

		cloakoffnpcself( "Wizard#ilgf12" );
		cloakoffnpcself( "Wizard#ilgf13" );
		cloakoffnpcself( "Nameless Catacomb#ilgf02" );

		cloakoffnpcself( "Wizard#ilgf14" );
		cloakoffnpcself( "Wizard#ilgf15" );
		cloakoffnpcself( "Nameless Catacomb#ilgf03" );

		cloakoffnpcself( "Wizard#ilgf16" );
		cloakoffnpcself( "Wizard#ilgf17" );

		cloakoffnpcself( "Wizard#ilgf18" );
		cloakoffnpcself( "Someone's Dream#ilgf18" );

		cloakoffnpcself( "Wizard#ilgf19" );
		cloakoffnpcself( "Wizard#ilgf20" );
		cloakoffnpcself( "Undead#ilgf05" );

		cloakoffnpcself( "Undead#ilgf02" );
		cloakoffnpcself( "Undead#ilgf03" );
		cloakoffnpcself( "Undead#ilgf04" );
		cloakoffnpcself( "Wizard#ilgf21" );
		cloakoffnpcself( "Wizard#ilgf22" );

		cloakoffnpcself( "Wizard#ilgf23" );
		cloakoffnpcself( "Fast Undead#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf24" );
		cloakoffnpcself( "Shining Mushroom#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf25" );
		cloakoffnpcself( "Wizard#ilgf26" );
		cloakoffnpcself( "Undead#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf27" );
		cloakoffnpcself( "Wizard#ilgf28" );
	}
	else if (ill_vampire == 10) {
		cloakoffnpcself( "Dracula#ilgf02" );
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
	}
	else if (ill_vampire == 12 || ill_vampire == 13) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Gem#ilgf02" );
		cloakoffnpcself( "Marina#ilgf02" );
		cloakoffnpcself( "Antoine#ilgf02" );
		if (ill_vampire == 13) {
			cloakoffnpcself( "Dracula#ilgf03" );
			cloakoffnpcself( "King#ilgf02" );
			cloakoffnpcself( "Jojo#ilgf01" );
		}
	}
	if (ill_vampire > 13) {
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		cloakoffnpcself( "Dracula#ilgf02" );
	}
	end;
}
gef_d01_i,114,216,0	duplicate(#illcon01)	#ilgf01	HIDDEN_WARP_NPC,3,0

gef_d01_i,81,135,0	duplicate(#illcon01)	#illcon02	HIDDEN_WARP_NPC,5,5
gef_d01_i,86,113,0	duplicate(#illcon01)	#illcon03	HIDDEN_WARP_NPC,5,5
gef_d01_i,95,121,0	duplicate(#illcon01)	#illcon04	HIDDEN_WARP_NPC,5,5
gef_d01_i,148,56,0	duplicate(#illcon01)	#illcon05	HIDDEN_WARP_NPC,5,5
gef_d01_i,188,97,0	duplicate(#illcon01)	#illcon06	HIDDEN_WARP_NPC,5,5
gef_d01_i,209,94,0	duplicate(#illcon01)	#illcon07	HIDDEN_WARP_NPC,5,5
gef_d01_i,205,117,0	duplicate(#illcon01)	#illcon08	HIDDEN_WARP_NPC,5,5
gef_d01_i,183,82,0	duplicate(#illcon01)	#illcon09	HIDDEN_WARP_NPC,5,5
gef_d01_i,197,80,0	duplicate(#illcon01)	#illcon10	HIDDEN_WARP_NPC,5,5
gef_d01_i,172,86,0	duplicate(#illcon01)	#illcon11	HIDDEN_WARP_NPC,5,5

gef_d01_i,112,228,5	script	Marina#ilgf01	4_F_MONK,{
	mes "[海军蓝]";
	mes "你想离开吗？";
	next;
	if (select( "是的。", "不。" ) == 2) {
		mes "[海军蓝]";
		mes "我懂了。当您想离开时请告诉我。";
		close;
	}
	mes "[海军蓝]";
	mes "所以，你急着离开。发生什么事了吗？";
	close2;
	warp "gef_dun01",133,219;
	end;
}

gef_d01_i,116,228,3	script	Antoine#ilgf01	4_GEFFEN_01,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[安托万]";
		mes "你确定你能携带所有这些东西吗？你为什么不轻点你的包呢？";
		close;
	}
	if (ill_vampire < 6) {
		mes "[安托万]";
		mes "宝石姐姐，请听我说！";
		close;
	}
	if (ill_vampire == 6) {
		mes "[安托万]";
		mes "我很担心这两个人。他们应该没问题吧？";
		close;
	}
	if (ill_vampire == 7) {
		mes "[安托万]";
		mes "你找到乔乔了吗？他在哪儿？朱比利离开去治疗伤口。";
		close;
	}
	if (ill_vampire < 16) {
		mes "[安托万]";
		mes "这个地方有太多我想研究的东西，我不知道从哪里开始。天哪，看看那个噩梦！";
		close;
	}
	switch( checkquest(14670,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[安托万]";
		mes "冒险家，我不想让你太劳累。你为什么不去休息一下呢？";
		next;
		mes "[安托万]";
		mes "睡个好觉，天亮后再回来。";
		close;
	case 2:
		mes "[安托万]";
		mes "冒险家。昨晚你做了好梦吗？我做了噩梦，可能是因为整天看着那些鬃毛。";
		next;
		mes "[安托万]";
		mes "但我不打算放弃！";
		mes "请像往常一样给我带来^0000cd20个波浪鬃毛^000000。";
		next;
		mes "[安托万]";
		mes "哦，如果你也能摆脱^0000cd10个甜蜜的噩梦^000000，那就太好了。我想知道这会如何影响梦。谢谢你！";
		erasequest 14670;// Time for Dreaming
		setquest 14669;// Sweet Dreams
		close;
	}
	switch( checkquest(14669,HUNTING) ) {
	case -1:
		mes "[安托万]";
		mes "冒险家，我可以和你聊聊吗？我想听听你对某事的看法。";
		next;
		if (select( "当然可以。", "我有点忙。" ) == 2) {
			mes "[安托万]";
			mes "哦，你是吗？没问题。我可以等到你有时间陪我。";
			close;
		}
		mes "[安托万]";
		mes "你看过《噩梦》和《排水者》，对吧？你有没有注意到它们看起来和外面的种类有什么不同？你认为这是为什么？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我不知道。";
		next;
		mes "[安托万]";
		mes "这个地方的一切都很有趣。尤其是那些甜蜜的噩梦。他们充满了矛盾。";
		next;
		emotion ET_SPARK;
		mes "[安托万]";
		mes "你看过它们波浪状的鬃毛吗？看的时间足够长，你会看到一些图像的闪现，我相信这些图像来自其他人的梦。";
		next;
		mes "[安托万]";
		mes "甜蜜的噩梦......甚至他们的名字也是矛盾的。也许它们的鬃毛是所有噩梦的根源。";
		next;
		mes "[安托万]";
		mes "或者它可能只是反映了死者的梦想。";
		next;
		mes "[安托万]";
		mes "那两位女士可能不同意，但我不必留在这里。我留下来只是因为^0000cd甜蜜的噩梦^000000。";
		next;
		mes "[安托万]";
		mes "我想把它们的鬃毛去掉，看看它是否会影响我们的梦想。";
		next;
		mes "[安托万]";
		mes "我想做到这一点，但又不想让我的同事们自生自灭。你知道我的意思吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你想让我^0000cd给你拿它们的鬃毛^000000吗？";
		next;
		mes "[安托万]";
		mes "是的，请！ ^0000cd20^000000 应该足够了！";
		next;
		mes "[安托万]";
		mes "在此期间，请同时狩猎^0000cd10个甜蜜噩梦^000000。我想知道这对梦有什么影响。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我会这么做的。";
		next;
		emotion ET_THANKS;
		mes "[安托万]";
		mes "谢谢。作为回报，我会给你一些我从这里捡到的石头。";
		next;
		mes "[安托万]";
		mes "我不知道它们是否有什么目的，但它们看起来确实美丽而神秘。也许这个地方之外的人能够认识到它的价值。";
		next;
		mes "[安托万]";
		mes "不管怎样，谢谢你为我做这件事！";
		setquest 14669;// Sweet Dreams
		close;
	case 0:
	case 1:
		break;
	case 2:
		if (countitem(25270) < 20)
			break;
		mes "[安托万]";
		mes "冒险家，我一直在等你！你明白我问的了吗？";
		next;
		mes "[安托万]";
		mes "你把它们都带来了。我希望我能从他们身上找到一些东西。";
		next;
		mes "[安托万]";
		mes "这些只能在这个地方找到。请尽可能将它们带给我。你知道，当你醒来时，梦就会消失。";
		next;
		mes "[安托万]";
		mes "太感谢了。你现在应该休息一下了。";
		delitem 25270,20;// Wavy_Mane
		erasequest 14669;// Sweet Dreams
		setquest 14670;// Time for Dreaming
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	mes "[安托万]";
	mes "冒险家，我一直在等你！你明白我问的了吗？";
	next;
	mes "[安托万]";
	mes "嗯，我明白了，你还没有找到它。";
	next;
	mes "[安托万]";
	mes "请给我带来^0000cd来自^0000cd甜蜜噩梦^000000的20个波浪鬃毛^000000。";
	next;
	mes "[安托万]";
	mes "哦，如果你也能摆脱^0000cd10个甜蜜的噩梦^000000，那就太好了。我想知道这会如何影响梦。谢谢你！";
	close;

OnInit:
	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14670,PLAYTIME) == -1 && checkquest(14669,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14669,HUNTING) == 2 && countitem(25270) > 19") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14670,PLAYTIME) == 2") );
	end;
}

gef_d01_i,113,230,5	script	Gem#ilgf01	1_F_PRIEST,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[宝石]";
		mes "你确定你能携带所有这些东西吗？你为什么不轻点你的包呢？";
		close;
	}
	if (ill_vampire == 5) {
		mes "[宝石]";
		mes "安托万弟兄，你留在这里。我和玛丽娜修女会去。你们有什么问题吗？";
		npctalk "就算你说了，我也不会听。", "", bc_self;
		next;
		mes "[海军蓝]";
		mes "安托万弟兄和我会去。我们受过战斗训练。你不是。";
		npctalk "另外，我的脚步很快。", "码头#ilgf01", bc_self;
		next;
		mes "[安托万]";
		mes "玛丽娜，你为什么不留下来？我和宝石姐姐会去。考虑到我们的能力，我认为这是最好的。";
		npctalk "我们中的一个人可以搜索，而另一个人则可以掩护他们。", "安托万#ilgf01", bc_self;
		next;
		mes "[宝石]";
		mes "不，这个地方充满了邪恶的生物。最好是由两个神的仆人来寻找。";
		next;
		mes "[安托万]";
		mes "那是什么意思？你是说我不能与僵尸战斗是因为我不是上帝的仆人吗？";
		next;
		mes "[海军蓝]";
		mes "我们两个人留下一个人走怎么样？";
		next;
		mes "[宝石]";
		mes "不，必须是两个人，这样他们才能互相照顾。";
		next;
		mes "[安托万]";
		mes "留下来的人怎么办？他们没有人照顾他们。";
		next;
		select("打扰一下。我代表格林神父来到这里。");
		mes "[海军蓝]";
		mes "你是来帮助我们的吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "他担心你还没出来。他让我在你需要的时候帮助你。发生什么事了吗？";
		next;
		mes "[海军蓝]";
		mes "我们需要找到一些人。";
		next;
		mes "[安托万]";
		mes "你不能就这么告诉他。冒险家，你知道这是什么地方吗？我们很着急，所以让我快速向您解释一下情况。";
		next;
		mes "[安托万]";
		mes "这个地方与格芬地下墓穴一模一样，它可能存在于笔记本主人的记忆中。";
		next;
		mes "[安托万]";
		mes "我们来这里是为了了解这个地方是如何以及为何被创建的。";
		next;
		mes "[安托万]";
		mes "我们没有发现这个地方有什么特别的地方。我们想离开，但我们几个人，^0000cd牧师和巫师^000000还没有回来加入我们。";
		next;
		mes "[安托万]";
		mes "我们已经四处搜寻过，但笔记本的主人对这个地方的记忆相当模糊且不一致。不同巫师的幻象不断出现，频繁且大量。";
		next;
		mes "[安托万]";
		mes "我们认为要花很长时间才能找到他们，所以我们决定分手。当你出现时，我们正在讨论如何去做。";
		next;
		mes "[安托万]";
		mes "我无法形容你在这里我有多高兴。现在我们有四个人了，^0000cd我们两个可以留下来，而另外两个则看^000000。";
		next;
		select("失踪的成员长啥样？");
		mes "[宝石]";
		mes "失踪的牧师名为^0000cdJubilee^000000，巫师名为^0000cdJojo^000000。他们是典型的牧师和巫师。你不会错过他们的。";
		next;
		mes "[海军蓝]";
		mes "冒险家，我们走吧！";
		next;
		mes "[宝石]";
		mes "在你离开之前让我为你祈祷。亲爱的神啊，请看顾你的孩子们……";
		erasequest 14656;// Finding Father Grimm's Colleagues
		setquest 14657;// Jojo Is the Mage's Name
		setquest 14658;// Jubilee Is the Priest's Name
		npcskill "AL_INCAGI",10,0,0;
		npcskill "AL_BLESSING",10,0,0;
		ill_vampire = 6;
		.@char_id = getcharid(0);
		cloakoffnpcself( "Priest#ilgf01" );
		for ( .@i = 3; .@i < 10; ++.@i )
			cloakoffnpcself( "Marina#ilgf0" + .@i );
		close;
	}
	if (ill_vampire == 6) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Priest#ilgf01" );
		for ( .@i = 3; .@i < 10; ++.@i )
			cloakoffnpcself( "Marina#ilgf0" + .@i );
		mes "[宝石]";
		mes "希望Jubilee弟兄和Jojo弟兄平安。";
		next;
		mes "[宝石]";
		mes "如果你必须离开，请告诉玛丽娜修女。她会把你送回你来的地方。";
		close;
	}
	if (ill_vampire == 7) {
		mes "[宝石]";
		mes "银禧弟兄已经离开去疗伤，但乔乔弟兄还没有回来。我真的希望他安全。";
		next;
		mes "[宝石]";
		mes "如果你必须离开，请告诉玛丽娜修女。她会把你送回你来的地方。";
		close;
	}
	if (ill_vampire < 14) {
		mes "[宝石]";
		mes "真心希望乔乔哥哥平安。";
		next;
		mes "[宝石]";
		mes "如果你必须离开，请告诉玛丽娜修女。她会把你送回你来的地方。";
		close;
	}
	if (ill_vampire == 14) {
		mes "[宝石]";
		mes "冒险家，你要走了吗？";
		next;
		select("格林神父现在一定很着急吧。");
		mes "[" + strcharinfo(0) + "]";
		mes "是的。现在我知道你安全了，是时候回到格林神父身边了。";
		next;
		mes "[宝石]";
		mes "根据我们的评估，这里发生的事情似乎不会影响^0000cd外界的^000000。";
		next;
		mes "[宝石]";
		mes "这样也好，不过还是得有人留在这里看着他们。你了解我们，对吧？请让格林弟兄知道。";
		next;
		select("我很惊讶。");
		mes "[" + strcharinfo(0) + "]";
		mes "你来自教会。我没想到你会让那些吸血鬼活下去。";
		next;
		mes "[海军蓝]";
		mes "如果我们遵守规则，就不应该让他们活下去。";
		next;
		mes "[宝石]";
		mes "她是对的。我们不应该。但看着他们……我不确定他们是否该死。";
		next;
		mes "[宝石]";
		mes "这是我们需要思考的事情。";
		next;
		emotion ET_STARE, getnpcid(0, "Marina#ilgf01");
		mes "[海军蓝]";
		mes "但如果他们犯了哪怕是最轻微的错误，我们就会除掉他们！";
		next;
		emotion ET_OK, getnpcid(0, "Antoine#ilgf01");
		mes "[安托万]";
		mes "如果真是这样的话，我就让你一个人照顾他们。";
		next;
		mes "[宝石]";
		mes "请告诉格林弟兄，我们决定留下来监视他们。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我会。保持安全。";
		erasequest 14665;// Is the Fight Over?
		setquest 14666;// Warden's Role
		ill_vampire = 15;
		close2;
		warp "gef_dun01",133,219;
		end;
	}
	if (ill_vampire == 15) {
		mes "[宝石]";
		mes "请告诉格林兄弟我们决定留下来";
		next;
		mes "[宝石]";
		mes "如果你想离开，就请玛丽娜修女让你出去。";
		close;
	}
	switch( checkquest(14668,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[宝石]";
		mes "冒险家，距离上次狩猎还没有过去足够的时间。你需要休息。";
		next;
		mes "[宝石]";
		mes "请明天^0000cd黎明后^000000回来。";
		close;
	case 2:
		mes "[宝石]";
		mes "冒险家，欢迎回来。";
		next;
		mes "[宝石]";
		mes "像往常一样，我希望你消灭^0000cd不安的亡灵^000000。有^0000cd三种不同类型：小型、快速和大型。请各消灭10个。^000000。";
		erasequest 14668;// Get Some Rest
		setquest 14667;// Send the Dead Back to Earth
		close;
	}
	switch( checkquest(14667,HUNTING) ) {
	case -1:
		mes "[宝石]";
		mes "冒险家，你忙吗？";
		next;
		mes "[宝石]";
		mes "即使你很忙，也请抽出一点时间给我。";
		next;
		if (select( "当然可以，为什么不呢？", "但是我太忙了。") == 2) {
			mes "[宝石]";
			mes "好吧，那我就等你有时间陪我吧。";
			close;
		}
		mes "[宝石]";
		mes "如您所知，我们来这里是为了密切关注他们。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "是的。";
		next;
		mes "[宝石]";
		mes "现在，这干扰了我们最初的使命，那就是让这个地方远离邪恶。";
		next;
		mes "[宝石]";
		mes "我们一直在努力做到这两点，但仅靠我们三个人很难做到这一点。";
		next;
		mes "[宝石]";
		mes "死者属于地下。我们来这里是为了^0000cd让不死生物重新进入永恒的睡眠^000000。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你的意思是你需要帮助。";
		next;
		mes "[宝石]";
		mes "是的，我们愿意。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你想让我对付什么样的怪物？";
		next;
		mes "[宝石]";
		mes "请消灭^0000cd不安的死者^000000。有^0000cd三种不同类型：小型、快速和大型。请各消灭10个。^000000。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "知道了。我在想，既然我来了，我不妨在力所能及的范围内帮助你。我很高兴我能做到。我会回来的。";
		setquest 14667;// Send the Dead Back to Earth
		close;
	case 0:
	case 1:
		mes "[宝石]";
		mes "冒险家，我问的事你听懂了吗？";
		next;
		mes "[宝石]";
		mes "还是你忘记了我让你做什么？";
		next;
		mes "[宝石]";
		mes "请消灭^0000cd不安的亡者^000000。有^0000cd三种不同类型：小型、快速和大型。请各消灭10个。^000000。";
		next;
		mes "[宝石]";
		mes "所有死去的人都必须回到地球。";
		close;
	case 2:
		mes "[宝石]";
		mes "冒险家，你把他们都照顾好了。谢谢。他们也会从天堂感谢你。";
		next;
		mes "[宝石]";
		mes "你为什么不去休息一下，天亮后再回来呢？";
		erasequest 14667;// Send the Dead Back to Earth
		setquest 14668;// Get Some Rest
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	end;

OnInit:
	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14656) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14665) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14668,PLAYTIME) == -1 && checkquest(14667,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14667,HUNTING) == 2") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14668,PLAYTIME) == 2") );
	end;
}

// Jubilee Is the Priest's Name
gef_d01_i,93,178,5	script(CLOAKED)	Marina#ilgf03	4_F_MONK,5,5,{
	end;
OnTouch:
	if (ill_vampire == 6) {
		setpcblock PCBLOCK_NPC, true;
		.@num = atoi( replacestr( strnpcinfo(2), "ilgf0", "" ) );
		if (.@num == 3)
			npctalk "我感觉到东方有一些微弱的能量。我们走吧。", "", bc_self;
		else if (.@num == 4)
			npctalk "无论是谁在东方，他们的能量都越来越强。我们快点吧！", "", bc_self;
		else if (.@num == 5)
			npctalk "我感觉到南方有微弱的能量。我们快点吧！", "", bc_self;
		else if (.@num == 6)
			npctalk "我感觉到东方有一些微弱的能量。我们走吧。", "", bc_self;
		else if (.@num == 7)
			npctalk "更远的东方！我们快到了！", "", bc_self;
		else if (.@num == 8)
			npctalk "我们去北方吧！", "", bc_self;
		else if (.@num == 9)
			npctalk "我们去南方吧！", "", bc_self;
		sleep2 1500;
		specialeffect EF_TELEPORTATION2;
		cloakonnpcself();
		setpcblock PCBLOCK_NPC, false;
	}
	end;
}
gef_d01_i,127,153,5	duplicate(Marina#ilgf03)	Marina#ilgf04	4_F_MONK,5,5
gef_d01_i,213,237,5	duplicate(Marina#ilgf03)	Marina#ilgf05	4_F_MONK,5,5
gef_d01_i,150,224,5	duplicate(Marina#ilgf03)	Marina#ilgf06	4_F_MONK,5,5
gef_d01_i,208,144,5	duplicate(Marina#ilgf03)	Marina#ilgf07	4_F_MONK,5,5
gef_d01_i,250,130,5	duplicate(Marina#ilgf03)	Marina#ilgf08	4_F_MONK,5,5
gef_d01_i,255,202,5	duplicate(Marina#ilgf03)	Marina#ilgf09	4_F_MONK,5,5



gef_d01_i,250,164,0	script	#ilgf06	HIDDEN_WARP_NPC,3,5,{
	end;
OnTouch:
	if (ill_vampire == 6)
		cloakoffnpcself( "Priest#ilgf01" );
	end;
}

gef_d01_i,254,162,1	duplicate(dummy_cloaked_npc)	Undead#ilgf08	ILL_ZOMBIE
gef_d01_i,252,160,1	duplicate(dummy_cloaked_npc)	Undead#ilgf09	ILL_ZOMBIE
gef_d01_i,253,165,3	duplicate(dummy_cloaked_npc)	Marina#ilgf10	4_F_MONK

gef_d01_i,250,164,5	script(CLOAKED)	Priest#ilgf01	4_M_MINISTER,5,5,{
	if (ill_vampire != 6)
		end;
	.@char_id = .@char_id;
	mes "[牧师]";
	mes "我该怎么办？我因为腿的原因无法走路。我无法传送，因为我没有足够的能量。";
	next;
	emotion ET_CRY;
	mes "[牧师]";
	mes "*喘息*我会死吗？我是吗？我不敢相信我会死在这样的地方！";
	sleep2 500;
	cloakoffnpcself( "Undead#ilgf08" );
	cloakoffnpcself( "Undead#ilgf09" );
	npctalk "呃……", "亡灵#ilgf08", bc_self;
	npctalk "嘎嘎嘎……", "亡灵#ilgf09", bc_self;
	next;
	mes "[牧师]";
	mes "喊叫！不会再有！帮助！";
	next;
	select("典型的牧师……等等，是他吗？");
	mes "[" + strcharinfo(0) + "]";
	mes "他会是朱比利神父吗？";
	mes "玛丽娜，我想我们找到他了！";
	sleep2 500;
	cloakoffnpcself( "Marina#ilgf10" );
	specialeffect EF_TELEPORTATION2, AREA, "Marina#ilgf10";
	npctalk "你在这里做什么？", "码头#ilgf10", bc_self;
	next;
	mes "[海军蓝]";
	mes "朱比利兄弟？";
	next;
	mes "[禧年]";
	mes "啊，玛丽娜修女！帮助！如果你不想以后因为我的死而感到内疚，你就必须帮助我！";
	npctalk "我们先保护这个地方吧。", "码头#ilgf10", bc_self;
	sleep2 500;
	specialeffect EF_GLASSWALL2;
	sleep2 1000;
	npctalk "冒险家？", "码头#ilgf10", bc_self;
	sleep2 1000;
	unittalk getcharid(3), "" + strcharinfo(0) + " : Yes, I'm ready!", bc_self;
	next;
	mes "[海军蓝]";
	mes "死者将重回地球！";
	npctalk "转亡灵！", "码头#ilgf10", bc_self;
	sleep2 1000;
	specialeffect EF_TURNUNDEAD, AREA, "Undead#ilgf08";
	specialeffect EF_TURNUNDEAD, AREA, "Undead#ilgf09";
	npctalk "RAWR！", "亡灵#ilgf08", bc_self;
	npctalk "咕噜！", "亡灵#ilgf09", bc_self;
	sleep2 1000;
	specialeffect EF_DEVIL, AREA, "Undead#ilgf08";
	specialeffect EF_DEVIL, AREA, "Undead#ilgf09";
	cloakonnpcself( "Undead#ilgf08" );
	cloakonnpcself( "Undead#ilgf09" );
	next;
	npctalk "兄弟，你还好吗？", "码头#ilgf10", bc_self;
	sleep2 1000;
	npctalk "哇哦，我现在就是了。谢谢。", "", bc_self;
	next;
	mes "[海军蓝]";
	mes "发生了什么？乔乔哥哥在哪里？";
	next;
	mes "[禧年]";
	mes "当我们发现一些荧光蘑菇时，他和我正在检查这个地方。乔乔哥哥眼睛里闪闪发亮……";
	npctalk "*摇头*巫师。", "码头#ilgf10", bc_self;
	next;
	mes "[禧年]";
	mes "他触碰其中一颗蘑菇，蘑菇爆炸了。";
	npctalk "什么？蘑菇爆炸了？和？", "码头#ilgf10", bc_self;
	next;
	mes "[禧年]";
	mes "当我回过神来时，他已经走了，我的腿也动不了了。";
	next;
	mes "[海军蓝]";
	mes "哦不，你被弹片击中了吗？";
	next;
	mes "[禧年]";
	mes "玛丽娜姐姐，你看到这里的蘑菇了吗？它们不像我们所知道的蘑菇。它们是微型炸弹，一碰就会爆炸。";
	next;
	select("我很高兴它们只在这里生长。");
	mes "[海军蓝]";
	mes "银禧弟兄，你觉得你能动吗？";
	next;
	mes "[禧年]";
	mes "如果可以的话，我早就找到回到你身边的路了。";
	next;
	select("我以为牧师可以治愈自己。");
	mes "[海军蓝]";
	mes "我们接受基本的训练，成为神的仆人，但我们每个人能做什么取决于我们天然的能力。";
	next;
	mes "[禧年]";
	mes "我的专长是唱歌。这是我的人生目标。当我歌颂奥丁时，我感到最大的快乐。";
	next;
	mes "[海军蓝]";
	mes "不要感到惊讶。他的歌声确实能激发勇气，给人力量。他和我们在一起是有原因的。";
	npctalk "自从发现乔乔哥哥失踪后我就一直在唱歌。", "", bc_self;
	sleep2 500;
	npctalk "你不应该把你宝贵的声音浪费在这些邪恶的生物身上。", "码头#ilgf10", bc_self;
	next;
	mes "[海军蓝]";
	mes "冒险家，我要带银禧哥哥去宝石姐姐那里。你能参观一下这个地方吗？我会尽快回来。";
	next;
	mes "[禧年]";
	mes "留意幻觉。笔记本主人的记忆偶尔会出现在这里。";
	next;
	mes "[禧年]";
	mes "而且，我还感觉到了邪恶的存在。请小心。";
	next;
	mes "[海军蓝]";
	mes "我们走吧。";
	unittalk getcharid(3), "" + strcharinfo(0) + " : I'd better look for Jojo.", bc_self;
	specialeffect EF_TELEPORTATION2, AREA, "Marina#ilgf10";
	specialeffect EF_TELEPORTATION2;
	cloakonnpcself( "Marina#ilgf10" );
	cloakonnpcself( "Priest#ilgf01" );
	erasequest 14658;// Jubilee Is the Priest's Name
	ill_vampire = 7;

	for ( .@i = 3; .@i < 10; ++.@i )
		cloakonnpcself( "Marina#ilgf0" + .@i );

	cloakoffnpcself( "Undead#ilgf06" );
	cloakoffnpcself( "Wizard#ilgf06" );
	cloakoffnpcself( "Wizard#ilgf07" );

	cloakoffnpcself( "Wizard#ilgf08" );
	cloakoffnpcself( "Nameless Catacomb#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf09" );
	cloakoffnpcself( "Wizard#ilgf10" );

	cloakoffnpcself( "Wizard#ilgf11" );

	cloakoffnpcself( "Wizard#ilgf12" );
	cloakoffnpcself( "Wizard#ilgf13" );
	cloakoffnpcself( "Nameless Catacomb#ilgf02" );

	cloakoffnpcself( "Wizard#ilgf14" );
	cloakoffnpcself( "Wizard#ilgf15" );
	cloakoffnpcself( "Nameless Catacomb#ilgf03" );

	cloakoffnpcself( "Wizard#ilgf16" );
	cloakoffnpcself( "Wizard#ilgf17" );

	cloakoffnpcself( "Wizard#ilgf18" );
	cloakoffnpcself( "Someone's Dream#ilgf18" );

	cloakoffnpcself( "Wizard#ilgf19" );
	cloakoffnpcself( "Wizard#ilgf20" );
	cloakoffnpcself( "Undead#ilgf05" );

	cloakoffnpcself( "Undead#ilgf02" );
	cloakoffnpcself( "Undead#ilgf03" );
	cloakoffnpcself( "Undead#ilgf04" );
	cloakoffnpcself( "Wizard#ilgf21" );
	cloakoffnpcself( "Wizard#ilgf22" );

	cloakoffnpcself( "Wizard#ilgf23" );
	cloakoffnpcself( "Fast Undead#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf24" );
	cloakoffnpcself( "Shining Mushroom#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf25" );
	cloakoffnpcself( "Wizard#ilgf26" );
	cloakoffnpcself( "Undead#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf27" );
	cloakoffnpcself( "Wizard#ilgf28" );
	close;

OnTouch:
	if (ill_vampire == 6)
		npctalk "这很糟糕，真的很糟糕！", "", bc_self;
	end;
}

/*
// never enabled?
gef_d01_i,131,155,3	duplicate(dummy_npc)	Wizard#ilgf03	4_F_BOMI,5,5
gef_d01_i,129,154,7	duplicate(dummy_npc)	Wizard#ilgf04	4_GEFFEN_05
gef_d01_i,113,97,7	duplicate(dummy_npc)	Wizard#ilgf05	2_M_SAGE_B,5,5
gef_d01_i,116,96,1	duplicate(dummy_npc)	Undead#ilgf07	GHOUL
*/

gef_d01_i,49,113,3	script(CLOAKED)	Wizard#ilgf06	4_GEFFEN_01,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	specialeffect 1033, AREA, "Undead#ilgf06";
	cloakonnpcself( "Undead#ilgf06" );
	sleep2 1000;
	npctalk "啊，死了！", "", bc_self;
	sleep2 1500;
	npctalk "也许世界树的叶子可以杀死不死生物。", "向导#ilgf07", bc_self;
	sleep2 1500;
	npctalk "我想是的。这意味着我们可以用它们来对付不死生物。", "", bc_self;
	sleep2 1500;
	npctalk "你真是个天才！", "向导#ilgf07", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf07";
	// specialeffect EF_GUARD2, AREA, "Undead#ilgf06";	// already hidden
	cloakonnpcself( "Wizard#ilgf06" );
	cloakonnpcself( "Wizard#ilgf07" );
	end;
}
gef_d01_i,46,112,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf07	4_M_ARUNA_NFM1
gef_d01_i,47,110,7	duplicate(dummy_cloaked_npc)	Undead#ilgf06	GHOUL


gef_d01_i,137,60,3	script(CLOAKED)	Wizard#ilgf08	1_M_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	specialeffect EF_TEMP_FAIL, AREA, "Nameless Catacomb#ilgf01";
	sleep2 1500;
	npctalk "嗯，即使这样也不能让死人复活。那么是什么让这些生物起死回生呢？", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf08";
	specialeffect EF_GUARD2, AREA, "Nameless Catacomb#ilgf01";
	cloakonnpcself( "Wizard#ilgf08" );
	cloakonnpcself( "Nameless Catacomb#ilgf01" );
	end;
}
gef_d01_i,136,58,5	duplicate(dummy_cloaked_npc)	Nameless Catacomb#ilgf01	4_SOIL


gef_d01_i,67,85,5	script(CLOAKED)	Wizard#ilgf09	4_M_JOB_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "也许我应该将这些宝石粉碎并混合在一起，看看是否可以利用混合物将不死者的灵魂与他们的身体分离。", "", bc_self;
	sleep2 1500;
	npctalk "我不认为那些僵尸有灵魂。", "向导#ilgf10", bc_self;
	sleep2 1500;
	npctalk "那么什么可以解释他们的流动性呢？每一个会动的生物都有灵魂。", "", bc_self;
	sleep2 1500;
	npctalk "肌肉痉挛？", "向导#ilgf10", bc_self;
	sleep2 1500;
	npctalk "不，很明显他们的灵魂已经回到了他们的尸体上。如果我们能够将灵魂与身体自由地附着和分离，我们就能永远摆脱肉体的痛苦！", "", bc_self;
	sleep2 1500;
	npctalk "但我们的身体不需要灵魂来生存。我还是觉得那些尸体是正义的？", "向导#ilgf10", bc_self;
	sleep2 1500;
	npctalk "别再说了，管好这些吧。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf10";
	cloakonnpcself( "Wizard#ilgf09" );
	cloakonnpcself( "Wizard#ilgf10" );
	end;
}
gef_d01_i,67,83,1	duplicate(dummy_cloaked_npc)	Wizard#ilgf10	4_GEFFEN_05


gef_d01_i,156,234,3	script(CLOAKED)	Wizard#ilgf11	4_M_SIT_NOVICE,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "你好。你是冒险家吗？你今年多大？这是你第一次来这个地方吗？", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This place is too dangerous for Novices like you. You'd better leave as soon as possible.", bc_self;
	sleep2 1500;
	npctalk "我看起来像新手吗？你很可爱。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : What's this?", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	cloakonnpcself( "Wizard#ilgf11" );
	end;
}


gef_d01_i,48,255,5	script(CLOAKED)	Wizard#ilgf12	1_M_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "这是第四十八次尝试。现在，让我洒圣水。", "", bc_self;
	sleep2 1500;
	specialeffect EF_BASH3D5, AREA, "Nameless Catacomb#ilgf02";
	emotion ET_THINK, getnpcid(0, "Nameless Catacomb#ilgf02");
	sleep2 1500;
	npctalk "什么也没发生。第四十九次的时候，我会增加圣水的量。", "", bc_self;
	sleep2 1500;
	npctalk "如果让牧师来处理这件事不是更好吗？", "向导#ilgf13", bc_self;
	sleep2 1500;
	npctalk "不。牧师们会尽力摆脱这些。只专注记录这个过程。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf13";
	specialeffect EF_GUARD2, AREA, "Nameless Catacomb#ilgf02";
	cloakonnpcself();
	cloakonnpcself( "Wizard#ilgf13" );
	cloakonnpcself( "Nameless Catacomb#ilgf02" );
	end;
}
gef_d01_i,50,257,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf13	2_F_MAGICMASTER
gef_d01_i,50,254,5	duplicate(dummy_cloaked_npc)	Nameless Catacomb#ilgf02	4_SOIL


gef_d01_i,112,267,3	script(CLOAKED)	Wizard#ilgf14	4_M_JOB_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "上升！", "", bc_self;
	// specialeffect , AREA, "Nameless Catacomb#ilgf03";	// todo?
	sleep2 1500;
	npctalk "这不起作用。", "", bc_self;
	sleep2 1500;
	npctalk "我告诉过你，我给他们用了457个护身符，没有一个起作用。他们受到其他东西的推动。", "向导#ilgf15", bc_self;
	sleep2 1500;
	npctalk "比如什么？", "", bc_self;
	sleep2 1500;
	npctalk "我不知道。", "向导#ilgf15", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf15";
	specialeffect EF_GUARD2, AREA, "Nameless Catacomb#ilgf03";
	cloakonnpcself( "Wizard#ilgf14" );
	cloakonnpcself( "Wizard#ilgf15" );
	cloakonnpcself( "Nameless Catacomb#ilgf03" );
	end;
}
gef_d01_i,110,266,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf15	4_M_ARUNA_NFM1
gef_d01_i,111,264,5	duplicate(dummy_cloaked_npc)	Nameless Catacomb#ilgf03	4_SOIL


gef_d01_i,55,167,3	script(CLOAKED)	Wizard#ilgf16	4_M_ARUNA_NFM1,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "我想念我的快乐。当我们最终完成这项工作时，我想先把快乐带回来。", "", bc_self;
	sleep2 1500;
	npctalk "不。看看他们。他们不正常。 Happy 可能会咀嚼你而不是他的咀嚼玩具。", "向导#ilgf17", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf16";
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf16";
	cloakonnpcself( "Wizard#ilgf16" );
	cloakonnpcself( "Wizard#ilgf17" );
	end;
}
gef_d01_i,53,166,7	duplicate(dummy_cloaked_npc)	Wizard#ilgf17	2_F_MAGICMASTER


gef_d01_i,236,235,1	script(CLOAKED)	Wizard#ilgf18	1_M_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "*抱怨*", "某人的梦想#ilgf18", bc_self;
	sleep2 1500;
	npctalk "啊，对不起！哇哦，这实在是太令人毛骨悚然了。就杀了我吧。我不能再看你给我看的梦了。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf18";
	specialeffect EF_GUARD2, AREA, "Someone's Dream#ilgf18";
	cloakonnpcself( "Wizard#ilgf18" );
	cloakonnpcself( "Someone's Dream#ilgf18" );
	end;
}
gef_d01_i,233,237,5	duplicate(dummy_cloaked_npc)	Someone's Dream#ilgf18	NIGHTMARE


gef_d01_i,255,201,5	script(CLOAKED)	Wizard#ilgf19	4_GEFFEN_05,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	specialeffect EF_GLASSWALL2;
	specialeffect EF_GLASSWALL2, AREA, "Wizard#ilgf20";
	npctalk "啊，我们该怎么办？他们比我想象的要强。", "", bc_self;
	sleep2 1500;
	npctalk "我们什么时候可以离开？", "向导#ilgf20", bc_self;
	sleep2 1500;
	npctalk "他们走后。如果我们现在行动，他们会杀了我们。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf20";
	specialeffect EF_GUARD2, AREA, "Undead#ilgf05";
	cloakonnpcself( "Wizard#ilgf19" );
	cloakonnpcself( "Wizard#ilgf20" );
	cloakonnpcself( "Undead#ilgf05" );
	end;
}
gef_d01_i,254,200,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf20	2_F_MAGICMASTER
gef_d01_i,256,198,1	duplicate(dummy_cloaked_npc)	Undead#ilgf05	GHOUL


gef_d01_i,204,146,1	script(CLOAKED)	Wizard#ilgf21	4_GEFFEN_05,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	emotion ET_HUK;
	npctalk "嘿，他们太多了！我告诉过你只引诱一个，而不是这么多！", "", bc_self;
	sleep2 1500;
	emotion ET_HELP, getnpcid(0, "Wizard#ilgf22");
	npctalk "我无法阻止他们跟踪我！", "向导#ilgf22", bc_self;
	sleep2 1500;
	npctalk "下来！", "", bc_self;
	sleep2 1500;
	specialeffect EF_FIREPILLARBOMB, AREA, "Undead#ilgf02";
	specialeffect EF_FIREPILLARBOMB, AREA, "Undead#ilgf03";
	specialeffect EF_FIREPILLARBOMB, AREA, "Undead#ilgf04";
	sleep2 1500;
	cloakonnpcself( "Undead#ilgf02" );
	cloakonnpcself( "Undead#ilgf03" );
	cloakonnpcself( "Undead#ilgf04" );
	npctalk "哇，谢谢！", "向导#ilgf22", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf22";
	cloakonnpcself( "Wizard#ilgf21" );
	cloakonnpcself( "Wizard#ilgf22" );
	end;
}
gef_d01_i,202,149,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf22	4_M_ARUNA_NFM1
gef_d01_i,202,152,5	duplicate(dummy_cloaked_npc)	Undead#ilgf02	GHOUL
gef_d01_i,200,151,5	duplicate(dummy_cloaked_npc)	Undead#ilgf03	ZOMBIE
gef_d01_i,204,151,3	duplicate(dummy_cloaked_npc)	Undead#ilgf04	GHOUL


gef_d01_i,257,110,1	script(CLOAKED)	Wizard#ilgf23	4_F_BOMI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "为什么那个人这么快？我可能还没来得及看一眼就死了。", "", bc_self;
	sleep2 1500;
	specialeffect EF_QUAGMIRE, AREA, "Fast Undead#ilgf01";
	sleep2 1500;
	npctalk "我怎样才能抓住它？我希望有办法把它带到我的实验室......", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Fast Undead#ilgf01";
	cloakonnpcself( "Wizard#ilgf23" );
	cloakonnpcself( "Fast Undead#ilgf01" );
	end;
}
gef_d01_i,253,112,5	duplicate(dummy_cloaked_npc)	Fast Undead#ilgf01	GHOUL


gef_d01_i,230,76,3	script(CLOAKED)	Wizard#ilgf24	4_M_BIBI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "我最好小心一点。我不想死，因为我正在收集一些蘑菇孢子。", "", bc_self;
	sleep2 1500;
	specialeffect EF_HATED, AREA, "Shining Mushroom#ilgf01";
	sleep2 1500;
	npctalk "这应该足以照亮一个房间。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Shining Mushroom#ilgf01";
	cloakonnpcself( "Wizard#ilgf24" );
	cloakonnpcself( "Shining Mushroom#ilgf01" );
	end;
}
gef_d01_i,228,75,3	duplicate(dummy_cloaked_npc)	Shining Mushroom#ilgf01	ILL_BLACK_MUSHROOM


gef_d01_i,93,34,1	script(CLOAKED)	Wizard#ilgf25	4_F_BOMI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "这次我们同时使用卷轴和世界之叶吧。我将从这里激活卷轴。你用那里的叶子。", "", bc_self;
	sleep2 1500;
	npctalk "好的。", "向导#ilgf26", bc_self;
	sleep2 1500;
	specialeffect EF_POISONHIT, AREA, "Undead#ilgf01";
	sleep2 1500;
	npctalk "我们又失败了吗？", "", bc_self;
	sleep2 1500;
	npctalk "为什么不变成人呢？如果死人能够复活，那么应该能够变成人。", "向导#ilgf26", bc_self;
	sleep2 1500;
	npctalk "让我们冷静下来，尝试一些别的事情。", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf26";
	specialeffect EF_GUARD2, AREA, "Undead#ilgf01";
	cloakonnpcself( "Wizard#ilgf25" );
	cloakonnpcself( "Wizard#ilgf26" );
	cloakonnpcself( "Undead#ilgf01" );
	end;
}
gef_d01_i,94,37,3	duplicate(dummy_cloaked_npc)	Wizard#ilgf26	1_M_WIZARD
gef_d01_i,91,35,5	duplicate(dummy_cloaked_npc)	Undead#ilgf01	GHOUL

// gef_d01_i,101,124,3	duplicate(dummy_cloaked_npc)	Wizard#ilgf27	4_F_BOMI,5,5	// npc has official range. Effect ?
gef_d01_i,101,124,3	duplicate(dummy_cloaked_npc)	Wizard#ilgf27	4_F_BOMI
gef_d01_i,99,122,7	script(CLOAKED)	Wizard#ilgf28	4_F_BOMI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "我们不能在这样的地方做实验。我们为什么不捕获一个并将其带到我们的实验室呢？", "向导#ilgf27", bc_self;
	sleep2 1500;
	npctalk "难道你没有感受到空气中的能量吗？", "向导#ilgf28", bc_self;
	sleep2 1500;
	npctalk "你在说什么？", "向导#ilgf27", bc_self;
	sleep2 1500;
	npctalk "想象一下我们可以用这种力量做什么。", "向导#ilgf28", bc_self;
	sleep2 1500;
	npctalk "……哦，你说得对。", "向导#ilgf27", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;

	specialeffect EF_GUARD2, AREA, "Wizard#ilgf27";
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf28";
	cloakonnpcself( "Wizard#ilgf27" );
	cloakonnpcself( "Wizard#ilgf28" );
	end;
}
// End of the "Wizard illusions"


gef_d01_i,80,139,5	duplicate(dummy_cloaked_npc)	Gem#ilgf02	1_F_PRIEST,5,5
gef_d01_i,86,133,1	duplicate(dummy_cloaked_npc)	Marina#ilgf02	4_F_MONK,5,5
gef_d01_i,85,139,3	duplicate(dummy_cloaked_npc)	Antoine#ilgf02	4_GEFFEN_01,5,5
gef_d01_i,84,135,3	duplicate(dummy_cloaked_npc)	Dracula#ilgf03	4_DRACULA,5,5
gef_d01_i,87,137,3	duplicate(dummy_cloaked_npc)	King#ilgf02	4_NFBAT,5,5
gef_d01_i,80,132,7	duplicate(dummy_cloaked_npc)	Jojo#ilgf01	4_M_JOB_WIZARD,5,5


gef_d01_i,81,135,5	script	Wizard#ilgf01	4_F_BOMI,5,5,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[波密]";
		mes "你确定你能携带所有这些东西吗？你为什么不轻点你的包呢？";
		close;
	}
	.@player_name$ = strcharinfo(0);
	if (ill_vampire < 7) {
		mes "[向导]";
		mes "这个蘑菇的颜色与霓虹蘑菇不同。是新的一种吗？我最好仔细挑选一下...";
		close;
	}
	if (ill_vampire == 7) {
		mes "[向导]";
		mes "这个蘑菇的颜色与霓虹蘑菇不同。是新的一种吗？我最好仔细挑选一下...";
		next;
		mes "[" + .@player_name$ + "]";
		mes "^0000cd典型的向导^000000...那是^0000cdJojo^000000吗？";
		next;
		select("乔乔？");
		mes "[向导]";
		mes "...？你是人类吗？";
		next;
		mes "[" + .@player_name$ + "]";
		mes "乔乔？你是乔乔，对吧？你的同事很担心你。我们回去吧。你没有受伤吧？";
		next;
		mes "[向导]";
		mes "不，我不是乔乔。";
		next;
		mes "[向导]";
		mes "我看起来像^0000cd人类^000000吗？";
		next;
		mes "[" + .@player_name$ + "]";
		mes "当然。";
		next;
		mes "[向导]";
		mes "...";
		next;
		emotion ET_HUK, playerattached();
		select("……你不是人吗？");
		mes "[向导]";
		mes "我是……我的名字是^0000cd波密^000000。很抱歉我不是您要找的人。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "波密？等等，你就是那个波米吗？";
		next;
		mes "[波密]";
		mes "你知道我吗？";
		next;
		select("我已经拿起你的笔记本了。");
		mes "[" + .@player_name$ + "]";
		mes "我并不是有意多管闲事。我必须知道它属于谁，这样我就能知道吗？";
		next;
		mes "[波密]";
		mes "我把它扔掉了。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "你为什么把它扔掉？你为什么留在这里？";
		next;
		mes "[波密]";
		mes "因为我是一个怪物。我属于这里。";
		next;
		select("为什么你认为自己是怪物？");
		mes "[波密]";
		mes "因为我是吸血鬼。";
		next;
		select("吸血鬼？！");
		mes "[" + .@player_name$ + "]";
		mes "发生了什么？你是一个人。";
		next;
		mes "[波密]";
		mes "我被我最好的朋友背叛了。";
		unittalk getcharid(3), "" + .@player_name$ + " : ...You got betrayed?", bc_self;
		next;
		mes "[波密]";
		mes "大多数人都试图充分利用生活，因为他们知道自己无法永远活着。";
		next;
		mes "[波密]";
		mes "我的寿命比大多数人都短。自从我出生以来，我就被告知我永远不会比父母活得更久。";
		next;
		mes "[波密]";
		mes "人们渴望他们所没有的东西。我渴望^0000cd力量^000000，因为我太小太虚弱，无法像其他同龄人一样生活。";
		next;
		mes "[波密]";
		mes "我成为一名巫师是因为我认为魔法可以弥补我身体上的弱点。";
		next;
		mes "[波密]";
		mes "但我并没有意识到坚强的意志源自坚强的身体……";
		next;
		mes "[波密]";
		mes "魔法让我的精神和身体都疲惫不堪。我比我想象的更快达到了极限。但我并没有不高兴。我以为我可以弥补这一点。";
		unittalk getcharid(3), "" + .@player_name$ + " : Oh. That's why you were studying the zombies in these catacombs.", bc_self;
		next;
		mes "[波密]";
		mes "是的。这样做，我感觉比以往任何时候都更有活力。我对生活的强烈渴望造就了现在的我。";
		next;
		mes "[波密]";
		mes "然后，有一天，当我在这里时，我遇到了一个非人类的^0000cd实体^000000。";
		next;
		mes "波米正在整理思绪。我应该稍后再和她谈谈。";
		erasequest 14657;// Jojo Is the Mage's Name
		setquest 14659;// Lost in Thought
		ill_vampire = 8;
		// note: the "old memories" npcs are not automatically cloakoff
		close;
	}
	if (ill_vampire == 8) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "你知道我在这里发现了什么吗？", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "" + .@player_name$ + " : Nightmares, mushrooms, zombies...", bc_self;
		sleep2 2000;
		npctalk "还有一个。", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "" + .@player_name$ + " : Are you talking about Dracula? I've heard of him.", bc_self;
		sleep2 2500;
		npctalk "当我第一次见到他时，他已经濒临死亡。他的脆弱让我强烈地想起了我自己的脆弱。", "", bc_self;
		sleep2 2000;
		npctalk "这就是为什么我给他喂血并照料他的伤口，尽管我知道我不应该这样做。", "", bc_self;
		sleep2 2000;
		npctalk "后来，我又遇见了他，我们的关系就亲近了。他是我第一个真正的朋友。", "", bc_self;
		sleep2 1500;
		cloakoffnpcself( "Dracula#ilgf01" );
		specialeffect EF_GUARD2, AREA, "Dracula#ilgf01";
		specialeffect EF_BLUELIGHTBODY, AREA, "Dracula#ilgf01";
		npctalk "你为什么要救我？", "德古拉#ilgf01", bc_self;
		sleep2 2000;
		npctalk "这很难解释。这么说吧，我们人类喜欢拯救他人。", "", bc_self;
		sleep2 2000;
		npctalk "那不是真的。你们同类中的其他人只想杀了我。", "德古拉#ilgf01", bc_self;
		sleep2 2000;
		npctalk "并非我们所有人都是一样的。", "", bc_self;
		sleep2 1500;
		npctalk "我送你一件礼物来回报你的恩情如何？我知道您想要强壮的身体和长寿。", "德古拉#ilgf01", bc_self;
		sleep2 1500;
		npctalk "但如何呢？等等，你要提供……吗？不，谢谢。", "", bc_self;
		sleep2 1500;
		npctalk "你非常想要它们，以至于你冒着生命危险在这样的地方学习。", "德古拉#ilgf01", bc_self;
		sleep2 1500;
		npctalk "我愿意，但我不想为了他们而放弃我的人性。", "", bc_self;
		sleep2 2000;
		npctalk "但你却害怕死亡。你的日子屈指可数了。", "德古拉#ilgf01", bc_self;
		sleep2 1500;
		npctalk "对死亡的恐惧是我前进的动力。它让我成为现在的我。", "", bc_self;
		sleep2 2000;
		npctalk "为了永生而放弃人性，违背了我的信仰，违背了我迄今为止所做的一切努力，也违背了我努力保护的一切。", "", bc_self;
		sleep2 2000;
		npctalk "最重要的是，我会放弃自己，而我做不到。", "", bc_self;
		sleep2 2000;
		npctalk "即使你变了，你还是你。", "德古拉#ilgf01", bc_self;
		sleep2 1500;
		npctalk "在外面，也许吧。但我不会再害怕死亡，因此也没有了活下去的欲望。", "", bc_self;
		sleep2 2000;
		npctalk "看着你日复一日地枯萎，我很痛苦。", "德古拉#ilgf01", bc_self;
		sleep2 2000;
		setpcblock PCBLOCK_NPC, false;

		npctalk "我不能说我理解你的逻辑，但我会尊重你的意愿。", "德古拉#ilgf01", bc_self;
		mes "[波密]";
		mes "所以他^0000cd答应了^000000。然后有一天，有人来这里寻找他，他们发生了争斗。";
		next;
		mes "[波密]";
		mes "接下来我知道，我转变了。德古拉违背了他的诺言。";
		next;
		npctalk "你怎么可以这样对我？！", "", bc_self;
		sleep2 1000;
		npctalk "对不起。", "德古拉#ilgf01", bc_self;
		sleep2 1500;
		specialeffect EF_GUARD2, AREA, "Dracula#ilgf01";
		cloakonnpcself( "Dracula#ilgf01" );
		mes "[波密]";
		mes "我不敢相信他把我变成了一个怪物。我信任他！";
		next;
		mes "[波密]";
		mes "外面世界的人一定以为我逃出了城。我离开已经多久了？";
		next;
		mes "[波密]";
		mes "唉，也许他们都忘记了我，就好像我从来没有存在过一样。这是我最痛苦的事情。";
		next;
		mes "[波密]";
		mes "我试图忽视自己的现实，但这种永远存在的饥饿和干渴不断提醒我，我是一个多么可怕的怪物。";
		next;
		mes "[波密]";
		mes "如果我回到外面的世界，我将无法阻止自己去伤害别人。";
		next;
		select("到目前为止，你是如何维持自己的生活的？");
		mes "[波密]";
		mes "我研究了^0000cd药剂配方^000000，用药剂来弥补我虚弱的体力。";
		next;
		mes "[波密]";
		mes "我喝的是用我在这里找到的原料制成的假血。我可能看起来^0000cd足够人性^000000，但我不是。并不真地。";
		next;
		mes "[波密]";
		mes "很抱歉我的故事让你厌烦了。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "一点也不。";
		next;
		mes "[波密]";
		mes "冒险家，我不想强​​加你的好意，但是我可以拜托你一件事吗？";
		next;
		select("当然可以，什么都给你。");
		mes "[波密]";
		mes "你不应该这么说。如果我要你的血怎么办？";
		emotion ET_SWEAT, playerattached();
		next;
		mes "[波密]";
		mes "我是开玩笑的。我正在收集假血成分，但现在我想检查一下这个蘑菇。我以前从未见过它。我想趁它还新鲜的时候检查一下。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "您需要什么类型的成分？我会帮你拿的。";
		next;
		mes "[波密]";
		mes "谢谢。我需要^0000cd来自Matte Drainliars的10个粘血和来自霓虹蘑菇的10个蘑菇汁液^000000。谢谢你为我做这件事。";
		erasequest 14659;// Lost in Thought
		setquest 14660;// Ingredients for Fake Blood
		ill_vampire = 9;
		close;
	}
	if (ill_vampire == 9) {
		mes "[" + .@player_name$ + "]";
		mes "在这里，我把你要的东西带来了。";
		next;
		mes "[波密]";
		mes "让我们来看看...";
		next;
		if (countitem(25268) < 10 || countitem(25269) < 10) {
			mes "[波密]";
			mes "这还不够。";
			next;
			mes "[波密]";
			mes "谢谢。我需要^0000cd来自Matte Drainliars的10个粘血和来自霓虹蘑菇的10个蘑菇汁液^000000。谢谢你为我做这件事。";
			close;
		}
		mes "[波密]";
		mes "谢谢。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "蘑菇怎么样了？";
		next;
		mes "[波密]";
		mes "原来，这是一株普通的、价值连城的蘑菇。";
		next;
		select("如何制造人造血液？");
		mes "[波密]";
		mes "哑光吸血者以这个地方复活的尸体的血液为食。";
		next;
		mes "[波密]";
		mes "你收到了吗？但他们的血液有剧毒。所以我用这些蘑菇来解毒。";
		next;
		mes "[波密]";
		mes "像这样！";
		specialeffect EF_PHARMACY_OK;
		next;
		mes "[波密]";
		mes "但即便是它们的汁液也无法完全清除血液中的毒素。当我摄入过多毒素时...";
		next;
		select("也许你应该选择不同的职业道路。");
		mes "[" + .@player_name$ + "]";
		mes "比如炼金术士。";
		next;
		mes "[波密]";
		mes "我不知道我在这方面有天赋。如果我有^0000cd足够的时间来生活^000000，我会有很多不同的经历。我可能会选择一条不同的道路。";
		next;
		mes "[波密]";
		mes "哦，对了，你不是在找人吗？你说他叫什么名字？朱朱？";
		next;
		select("乔乔。");
		mes "[波密]";
		mes "我在这附近没有看到任何其他人类，但如果我看到了，我会让他知道你在找他。";
		next;
		mes "[波密]";
		mes "我希望你很快就能找到他。你知道，我不是这里唯一的人。如果你还没有找到他，也许他已经找到了？";
		next;
		mes "[波密]";
		mes "没关系。祝你好运找到他。也许你应该检查一下南部的地下墓穴。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "谢谢。我会见到你。";
		next;
		mes "[波密]";
		mes "你最好快点。";
		cloakoffnpcself( "Dracula#ilgf02" );
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		delitem 25268,10;// Sticky_Blood
		delitem 25269,10;// Mushroom_Sap
		erasequest 14660;// Ingredients for Fake Blood
		setquest 14661;// Jojo Is the Mage's Name 02
		ill_vampire = 10;
		close;
	}
	if (ill_vampire < 12) {
		cloakoffnpcself( "Dracula#ilgf02" );
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		mes "[波密]";
		mes "我希望你很快就能找到你的朋友。你为什么不去南方的地下墓穴看看呢？他可能在那儿。";
		close;
	}
	if (ill_vampire == 12) {
		viewpoint 2,85,131,1,0x00FF00;
		cloakoffnpcself( "Gem#ilgf02" );
		cloakoffnpcself( "Marina#ilgf02" );
		cloakoffnpcself( "Antoine#ilgf02" );

		mes "[波密]";
		mes "离我远点，我不会伤害你。";
		next;
		mes "[海军蓝]";
		mes "我们其中一人失踪了。你伤害了他，不是吗？";
		next;
		mes "[波密]";
		mes "我从来没有伤害过任何人，现在我也不会开始。";
		next;
		mes "[海军蓝]";
		mes "就算你不肯，我们也不会放过你！你的存在本身就违背了他的意愿！";
		next;
		mes "[波密]";
		mes "他的意愿？神爱我们所有人。这不是你所宣扬的吗？";
		next;
		mes "[海军蓝]";
		mes "死者属于地下，而你就是其中之一。你以为你是什么？";
		next;
		mes "[波密]";
		mes "……但是……但是我真的没有伤害任何人。";
		next;
		mes "[海军蓝]";
		mes "这并不能保证你将来不会。";
		next;
		mes "[宝石]";
		mes "等等，玛丽娜修女。让自己冷静下来。";
		next;
		mes "[海军蓝]";
		mes "我们为什么还不除掉她呢？死者将重回地球！安托万兄弟！";
		npctalk "叹息，玛丽娜修女是对的。", "安托万#ilgf02", bc_self;
		npctalk "断头拳！", "码头#ilgf02", bc_self;
		sleep2 1000;
		cloakoffnpcself( "Dracula#ilgf03" );
		specialeffect EF_M01, AREA, "Dracula#ilgf03";
		specialeffect EF_BOTTOM_MAG, AREA, "Dracula#ilgf03";
		specialeffect EF_BEGINASURA, AREA, "Dracula#ilgf03";
		sleep2 1000;
		specialeffect EF_DRAGONFEAR, AREA, "Dracula#ilgf03";
		specialeffect EF_BLEEDING, AREA, "Dracula#ilgf03";
		specialeffect EF_COLDTHROW, AREA, "Dracula#ilgf03";
		specialeffect EF_TEIHIT1X, AREA, "Dracula#ilgf03";
		npctalk "啊!", "德古拉#ilgf03", bc_self;
		next;
		cloakoffnpcself( "King#ilgf02" );
		specialeffect EF_M01, AREA, "King#ilgf02";
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "啊，我不敢相信你竟然把自己卷入其中！这就是为什么我不能丢下你一个人！";
		next;
		mes "[波密]";
		mes "...德古拉？为什么？";
		next;
		mes "[海军蓝]";
		mes "还有一个吸血鬼！难怪这个地方感觉这么不舒服，到处都是吸血鬼！";
		npctalk "嘿，你这个蝙蝠，那边那个！你也是吸血鬼吗？", "码头#ilgf02", bc_self;
		sleep2 1000;
		npctalk "吸血鬼有没有呼救？", "安托万#ilgf02", bc_self;
		next;
		emotion ET_FRET, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "人类，你刚才叫我蝙蝠吗？你怎么敢？";
		next;
		mes "[宝石]";
		mes "等等，玛丽娜修女。我说，你冷静一下。";
		next;
		mes "[海军蓝]";
		mes "我们必须立即行动。我们已经使三人中的一人丧失了行动能力。";
		next;
		mes "[宝石]";
		mes "但其中一个人不想打架。她想说话。";
		next;
		mes "[国王]";
		mes "谁想说话？因为我不！我不会不战而屈人之兵！";
		specialeffect EF_TEIHIT1X, AREA, "King#ilgf02";
		specialeffect EF_SUI_EXPLOSION, AREA, "Marina#ilgf02";
		specialeffect EF_DARKBREATH, AREA, "Marina#ilgf02";
		next;
		mes "[海军蓝]";
		mes "咕噜，放开我！够了够了！";
		next;
		cloakoffnpcself( "Jojo#ilgf01" );
		specialeffect EF_TELEPORTATION2, AREA, "Jojo#ilgf01";
		emotion ET_CONFUSE, getnpcid(0, "Jojo#ilgf01");
		mes "[乔乔]";
		mes "哎呀，你怎么跑得这么快？";
		next;
		mes "[乔乔]";
		mes "大家都冷静点吧！";
		next;
		mes "[宝石]";
		mes "乔乔哥哥！你安全了！";
		next;
		mes "[海军蓝]";
		mes "当时你在哪里？我们到处找也没找到你！";
		next;
		mes "[安托万]";
		mes "这是真的。他的伤口已经快完全愈合了。";
		next;
		mes "[德古拉]";
		mes "别碰波密...她...我...我们不想伤害任何人...她教我的...";
		npctalk "哼，你还是担心一下你自己吧，你快死了！", "国王#ilgf02", bc_self;
		next;
		mes "[波密]";
		mes "德古拉！德古拉！让我来治愈你吧！";
		next;
		mes "[海军蓝]";
		mes "我不会让你这么做的！";
		next;
		mes "[宝石]";
		mes "随他们去吧。他们救了乔乔。";
		next;
		mes "[海军蓝]";
		mes "但他们可能会利用他作为诱饵！";
		next;
		mes "[宝石]";
		mes "即使他们试图攻击我们，我们的人数也比他们多。";
		npctalk "如果你认为人多力量大，那你就是妄想。", "国王#ilgf02", bc_self;
		next;
		mes "[安托万]";
		mes "我同意宝石姐姐的观点。而且，我们并不是每天都有机会这么近距离地看到吸血鬼。";
		next;
		mes "[宝石]";
		mes "你是波密吧？我读了你的笔记本。发生了什么？这些吸血鬼对你做了什么？";
		next;
		select("我可以解释一下。");
		mes "我把波米和德古拉的故事转述给了修女杰姆他们。";
		next;
		mes "[宝石]";
		mes "所以你说他们确实是无辜的。";
		next;
		mes "[波密]";
		mes "德古拉，坚持住。喝这个。";
		next;
		mes "[海军蓝]";
		mes "那是谁的血？不能让他喝这个！";
		next;
		mes "[波密]";
		mes "这不是真正的血！他需要它！你没看到他快死了吗？";
		next;
		mes "[海军蓝]";
		mes "你已经死了！";
		next;
		mes "[国王]";
		mes "天啊，你真是太固执了。喂他。我会阻止他们。";
		npctalk "让我帮忙。", "乔乔#ilgf01", bc_self;
		sleep2 500;
		npctalk "你可以喂他。", "宝石#ilgf02", bc_self;
		next;
		mes "[海军蓝]";
		mes "你让她喂他，那个吸血鬼？宝石姐姐，你忘记了你作为我们领袖的职责吗？";
		next;
		mes "[乔乔]";
		mes "玛丽娜，我不在乎他们是谁。他们救了我，不求任何回报。";
		next;
		mes "[乔乔]";
		mes "我不明白为什么吸血鬼会帮助人类，但现在我知道了。德古拉从波米那里学到了如何变得更加人性化。";
		next;
		mes "[乔乔]";
		mes "他说他想了解人类，这样他才能更好地了解她。我认为他已经实现了他的目标。";
		next;
		mes "[乔乔]";
		mes "他帮助了我，却不求任何回报。这种随意的善意行为是人类的特质，不是吗？";
		next;
		mes "[乔乔]";
		mes "你不应该因为某人的身份而帮助他们。玛丽娜，你真的要让他死吗，因为他不是我们中的一员？";
		next;
		mes "[海军蓝]";
		mes "这仅适用于我们人类。他们是吸血鬼！";
		next;
		mes "[国王]";
		mes "现在我明白为什么德古拉如此不信任你们人类了。我觉得他太挑剔了。";
		next;
		mes "[国王]";
		mes "嘿，你这个和尚，在那边。你认为是什么让你成为人类？你认为是什么让吸血鬼成为吸血鬼？如果有一个吸血鬼一生中从未伤害过任何人怎么办？";
		next;
		mes "[海军蓝]";
		mes "我会摆脱他们。";
		next;
		mes "[国王]";
		mes "如果有一个人除了伤害他人之外什么也没做怎么办？你会对他们做什么？";
		next;
		mes "[海军蓝]";
		mes "我会让正义决定他们的命运。";
		next;
		mes "[国王]";
		mes "当我狩猎时，我平等对待所有人类，因为我是吸血鬼。这是我的规则。";
		next;
		mes "[国王]";
		mes "他们的规则是帮助任何需要帮助的人，无论他们是谁。很简单，不是吗？";
		next;
		mes "[海军蓝]";
		mes "...";
		next;
		mes "[德古拉]";
		mes "嗯……波密？";
		npctalk "德古拉，你感觉怎么样？", "国王#ilgf02", bc_self;
		sleep2 500;
		npctalk "唷，他现在已经脱离困境了。", "乔乔#ilgf01", bc_self;
		next;
		mes "[德古拉]";
		mes "你……救了我吗？我以为你想让我死。";
		next;
		mes "[波密]";
		mes "不，现在我明白你为什么做出这个决定了。你总不能让我死吧？";
		next;
		mes "[波密]";
		mes "因为我也做不到。";
		next;
		mes "[德古拉]";
		mes "...";
		npctalk "你们在做什么？", "国王#ilgf02", bc_self;
		sleep2 500;
		npctalk "别管他们了。他们正在互相和解。", "乔乔#ilgf01", bc_self;
		next;
		mes "[宝石]";
		mes "兄弟。姐妹。我们需要谈谈。";
		erasequest 14663;// Bloody Fight
		setquest 14664;// Deep Misunderstanding
		ill_vampire = 13;
		close;
	}
	if (ill_vampire == 13) {
		mes "[波密]";
		mes "谢谢你，也很抱歉。";
		next;
		mes "[德古拉]";
		mes "很抱歉我违背了诺言。但即使可以回到过去，我还是会这么做。";
		next;
		mes "[波密]";
		mes "我现在明白你为什么这么做了。";
		next;
		mes "[乔乔]";
		mes "你们化妆了吗？德古拉，最糟糕的时刻已经过去了。您只需要休息并恢复精力即可。";
		next;
		mes "[德古拉]";
		mes "谢谢。";
		next;
		mes "[国王]";
		mes "*哼哼*你无法打败蘑菇，但你可以拯救吸血鬼。";
		npctalk "他们不是蘑菇，他们是僵尸！", "乔乔#ilgf01", bc_self;
		sleep2 500;
		npctalk "蘑菇和僵尸。对我来说同样的区别。", "国王#ilgf02", bc_self;
		next;
		emotion ET_GO, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "德拉克，我们走吧。我知道你不再痛了。这次我们真的该回城堡了。";
		next;
		mes "[德古拉]";
		mes "我要留下来。";
		next;
		mes "[国王]";
		mes "什么？不！你已经和她和好了。是时候离开了！";
		next;
		mes "[宝石]";
		mes "请听我说完。";
		npctalk "您还有什么要说的？", "国王#ilgf02", bc_self;
		sleep2 500;
		npctalk "就听听吧，好吗？", "乔乔#ilgf01", bc_self;
		next;
		mes "[宝石]";
		mes "我们知道您没有伤害任何人，并且您希望保持这种状态。我们感谢你拯救了乔乔兄弟。";
		npctalk "和？", "国王#ilgf02", bc_self;
		sleep2 500;
		npctalk "安静！", "乔乔#ilgf01", bc_self;
		next;
		mes "[宝石]";
		mes "但这并不能改变你的存在本身就违背了我们神的意志的事实。我们不能丢下你一个人。";
		next;
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "德拉克，他们不会丢下我们不管的。让我们摆脱他们吧！";
		npctalk "不！", "", bc_self;
		npctalk "不！", "德古拉#ilgf03", bc_self;
		next;
		mes "[海军蓝]";
		mes "宝石姐姐，这只是浪费时间。他们一有机会就会杀了我们。让我们在他们出现之前除掉他们吧！";
		next;
		mes "[安托万]";
		mes "姐妹们，我来说说吧。你急于下结论的倾向对这种情况没有帮助。";
		next;
		mes "[安托万]";
		mes "我们理解您不想伤害任何人。";
		next;
		mes "[安托万]";
		mes "但不管你喜欢与否，你对别人来说都是危险的。";
		next;
		emotion ET_FRET, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "你为什么看着我？我什么都没做！";
		next;
		mes "[安托万]";
		mes "既然我们知道你的存在，我们就不能忽视你。我可以，但这里的人不能。他们的教会不允许。";
		npctalk "那么你的观点是什么？", "国王#ilgf02", bc_self;
		next;
		mes "[安托万]";
		mes "我们不会做出任何决定。相反，我们将^0000cd留在这儿陪伴您^000000。";
		next;
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "所以您可以关注我们。德拉克，我再也受不了了！";
		specialeffect EF_PORTAL4, AREA, "King#ilgf02";
		cloakoffnpcself( "King#ilgf02" );
		specialeffect EF_M01, AREA, "King#ilgf02";
		sleep2 1000;
		npctalk "我要把他们全部杀掉！", "国王#ilgf02", bc_self;
		sleep2 1000;
		npctalk "好的。", "", bc_self;
		next;
		emotion ET_FRET, getnpcid(0, "King#ilgf02");
		mes "[国王]";
		mes "什么？德拉克！别再像人类一样行事了！我们是骄傲、有尊严的吸血鬼！";
		next;
		mes "[德古拉]";
		mes "我们回去吧。我累了。我想睡觉了。";
		npctalk "让我和你一起去吧。我想一直陪着你，直到你完全康复。", "乔乔#ilgf01", bc_self;
		next;
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		specialeffect EF_PORTAL4, AREA, "King#ilgf02";
		cloakoffnpcself( "King#ilgf02" );
		specialeffect EF_M01, AREA, "King#ilgf02";
		mes "[国王]";
		mes "我对这个安排并不满意，德拉克。等你康复了我就回我们的城堡，明白吗？";
		next;
		mes "[宝石]";
		mes "所以我们达成协议了。我们现在就离开。";
		specialeffect EF_TELEPORTATION2, AREA, "Gem#ilgf02";
		sleep2 500;
		cloakonnpcself( "Gem#ilgf02" );
		next;
		mes "[海军蓝]";
		mes "你！我在看着你！睡觉时最好把棺材盖盖紧！";
		specialeffect EF_TELEPORTATION2, AREA, "Marina#ilgf02";
		sleep2 500;
		cloakonnpcself( "Marina#ilgf02" );
		next;
		npctalk "什么？嘿，你就停在那里吧！", "国王#ilgf02", bc_self;
		mes "[安托万]";
		mes "我也该离开了。打扰一下。";
		specialeffect EF_TELEPORTATION2, AREA, "Antoine#ilgf02";
		sleep2 500;
		cloakonnpcself( "Antoine#ilgf02" );
		next;
		mes "[国王]";
		mes "啊！我再也不想见到他们了！我们走吧！";
		specialeffect EF_M01, AREA, "King#ilgf02";
		sleep2 500;
		cloakonnpcself( "King#ilgf02" );
		next;
		mes "[乔乔]";
		mes "我们走吧。";
		next;
		mes "[德古拉]";
		mes "波密，等我康复了再来看你。";
		next;
		mes "[乔乔]";
		mes "好吧，走吧。";
		specialeffect EF_TELEPORTATION2, AREA, "Jojo#ilgf01";
		specialeffect EF_M01, AREA, "Dracula#ilgf03";
		sleep2 500;
		cloakonnpcself( "Jojo#ilgf01" );
		cloakonnpcself( "Dracula#ilgf03" );
		next;
		select("最后，他们都离开了。那很接近了。");
		mes "[波密]";
		mes "谢谢你，冒险家。一切都很顺利，没有人因为你而受伤。";
		next;
		select("你问我你看起来像不像人类。记住？");
		mes "[波密]";
		mes "我愿意。";
		next;
		select("你认为人类的定义是什么？");
		mes "[" + .@player_name$ + "]";
		mes "当你还是人类的时候我不认识你，但我不认为你和现在的你有什么不同。你仍在努力保护对你来说重要的东西。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "我认为你比我认识的任何人都更有人情味。你还教会了吸血鬼人性。";
		next;
		mes "[波密]";
		mes "...谢谢。我从来没有想过有一天会有人对我说这样的好话，但我一直渴望听到它们。";
		next;
		mes "[波密]";
		mes "我无法克服自己变成了怪物的事实，但现在我知道得更多了。我或许不再是人类，但我仍然是我。";
		next;
		mes "[波密]";
		mes "谢谢。";
		next;
		mes "[" + .@player_name$ + "]";
		mes "我该走了。是时候我回来汇报了。";
		next;
		mes "[波密]";
		mes "好的。安全出行。感谢您的帮助。";
		erasequest 14664;// Deep Misunderstanding
		setquest 14665;// Is the Fight Over?
		ill_vampire = 14;
		close;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[波密]";
		mes "你不是说要回来汇报吗？走到出口。我在那里闻到了你朋友的味道。";
		close;
	}
	switch( checkquest(14674,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
			mes "[波密]";
			mes "冒险家，谢谢你愿意帮助我，但我不想让你太劳累。你为什么不暂时休息一下呢？";
			next;
			mes "[波密]";
			mes "天亮之后就可以回来。";
			close;
		}
		mes "[波密]";
		mes "我现在不在。请天亮后回来。";
		close;
	case 2:
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
			mes "[波密]";
			mes "冒险家，欢迎回来。今天你能像往常一样帮我吗？";
			.@npc_name$ = "Bomi";
		}
		else {
			mes "[" + .@player_name$ + "]";
			mes "波密不在了。她留下了一张纸条。";
			.@npc_name$ = "Bomi's Note";
		}
		next;
		mes "[" + .@npc_name$ + "]";
		mes "我需要^0000cd来自Matte Drainliars的10个粘血和来自霓虹蘑菇的10个蘑菇汁液^000000。如果您狩猎至少 ^0000cd5 个哑光排水虫和 5 个霓虹蘑菇^000000，您就可以获得它们。";
		next;
		mes "[" + .@npc_name$ + "]";
		mes "感谢您的帮助。";
		erasequest 14674;// Time to Digest
		setquest 14671;// Unreliable Fake Blood
		close;
	}
	switch( checkquest(14671,HUNTING) ) {
	case -1:
		//if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {// unknown text
		mes "[波密]";
		mes "冒险家，你报告了吗？你在这里还有别的事情要做吗？";
		next;
		mes "[波密]";
		mes "如果你不忙的话，可以帮我做点什么吗？";
		next;
		if (select( "当然可以。", "我现在有点忙。") == 2) {
			mes "[波密]";
			mes "哦，你是吗？对不起。也许你可以稍后再回来？不，没关系。";
			close;
		}
		mes "[波密]";
		mes "如你所知，我靠用我在这里找到的原料制成的假血为生。我想我也会为德古拉多做一些。";
		next;
		mes "[波密]";
		mes "但由于这种假血并不纯净，经常饮用它会导致你的身体积累毒素，这会让你发疯，直到它们从你的系统中完全清除。";
		next;
		mes "[波密]";
		mes "但也许这种事只发生在我身上。我是一个新的吸血鬼，而且我很弱。德古拉已经活了很长一段时间了，他一点也不软弱。";
		setquest 14671;// Unreliable Fake Blood
		next;
		mes "[波密]";
		mes "不管怎样，我需要^0000cd来自Matte Drainliars的10个粘血和来自Neon Mushrooms的10个蘑菇汁液^000000。";
		next;
		mes "[波密]";
		mes "如果您狩猎至少 ^0000cd5 个哑光排水虫和 5 个霓虹蘑菇^000000，您就可以找到它们。";
		close;
	case 0:
	case 1:
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {
			mes "[" + .@player_name$ + "]";
			mes "波密不在了。我就把这些留在这里。";
			next;
			mes "[" + .@player_name$ + "]";
			mes "我想我忘记了什么。";
			close;
		}
		mes "[波密]";
		mes "冒险家，你忘记我问的话了吗？我需要^0000cd来自Matte Drainliars的10个粘血和来自霓虹蘑菇的10个蘑菇汁液^000000。谢谢。";
		close;
	case 2:
		if (countitem(25268) < 10 || countitem(25269) < 10) {
			if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {
				mes "[" + .@player_name$ + "]";
				mes "波密不在了。我就把这些留在这里。";
				next;
				mes "[" + .@player_name$ + "]";
				mes "我想我忘记了什么。";
				close;
			}
			mes "[波密]";
			mes "冒险家，你忘记我问的话了吗？我需要^0000cd来自Matte Drainliars的10个粘血和来自霓虹蘑菇的10个蘑菇汁液^000000。谢谢。";
			close;
		}
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {
			mes "[" + .@player_name$ + "]";
			mes "波密不在了。我就把这些留在这里。";
			delitem 25268,10;// Sticky_Blood
			delitem 25269,10;// Mushroom_Sap
			erasequest 14671;// Unreliable Fake Blood
			setquest 14674;// Time to Digest
			getexp 500000,500000;
			getitem 25271,1;// Illusion Stone
			close;
		}
		mes "[波密]";
		mes "冒险家，谢谢你把这些带给我。";
		delitem 25268,10;// Sticky_Blood
		delitem 25269,10;// Mushroom_Sap
		erasequest 14671;// Unreliable Fake Blood
		setquest 14674;// Time to Digest
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1 && mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
			if (.bomi_count < 30)
				.bomi_count++;
		}
		next;
		if (.bomi_count == 29) {
			mes "[波密]";
			mes "顺便说一下，我已经告诉过你这种假血的危害了。记住？它会在我的系统中留下毒素。";
			next;
			mes "[波密]";
			mes "现在我体内的毒素太多了，我感觉自己就像变成了一个怪物。";
			next;
			mes "[波密]";
			mes "我已经等不及像以前那样了。";
			mes "不是当有人需要担心的时候。";
			next;
			mes "[波密]";
			mes "当我变成怪物时，我希望你能阻止我伤害他们。请帮我。";
			next;
			mes "[波密]";
			mes "那么请天亮后回来。";
			close;
		}
		if (.bomi_count == 30) {
			mes "[波密]";
			mes "我的原料用完了。";
			next;
			mes "[波密]";
			mes "如果我像这样混合它们并喝...";
			specialeffect EF_PHARMACY_OK;
			next;
			disablenpc( "Wizard#ilgf01" );
			specialeffect EF_DEVIL;
			mes "[波密]";
			mes "哦，不！我体内的毒素太多了。越来越危险了！";
			if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1 && mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
				.bomi_count = 0;
				donpcevent "ill_vampire_spawn_bomi::OnStart";
			}
			close;
		}
		mes "[波密]";
		mes "如果我喝这种有毒的血液大约三十次，我可能会转身？哦，没关系。";
		next;
		mes "[波密]";
		mes "那么请天亮后回来。";
		close;
	}
	end;

OnTouch:
	if (ill_vampire == 7) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "这个蘑菇的颜色与霓虹蘑菇不同。是新的一种吗？我最好仔细挑选一下...", "", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Typical wizard... Wait, could that be Jojo??", bc_self;
	}
	else if (ill_vampire == 12 || ill_vampire == 13) {
		cloakoffnpcself( "Gem#ilgf02" );
		cloakoffnpcself( "Marina#ilgf02" );
		cloakoffnpcself( "Antoine#ilgf02" );
		if (ill_vampire == 13) {
			cloakoffnpcself( "Dracula#ilgf03" );
			cloakoffnpcself( "King#ilgf02" );
			cloakoffnpcself( "Jojo#ilgf01" );
		}
	}
	end;

OnInit:
	// todo: missing questinfo ?

	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14674,PLAYTIME) == -1 && checkquest(14671,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14671,HUNTING) == 2 && countitem(25268) > 9 && countitem(25269) > 9") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14674,PLAYTIME) == 2") );

	if (strnpcinfo(0) == "Wizard#ilgf001")
		disablenpc();
	end;
}
gef_d01_i,81,135,3	duplicate(Wizard#ilgf01)	Wizard#ilgf001	4_NFCOFFIN,5,5

gef_d01_i,82,132,3	duplicate(dummy_npc)	Mushroom#ilgf01	ILL_BLACK_MUSHROOM
gef_d01_i,86,133,1	duplicate(dummy_cloaked_npc)	Dracula#ilgf01	4_DRACULA


// Boss spawn
gef_d01_i,1,1,5	script	ill_vampire_spawn_bomi	-1,{
	end;
OnStart:
	sleep 1000;
	mapannounce "gef_d01_i", "Oh, no...	I can feel the toxins spreading through my body...!", bc_map, 0xFF0000;
	if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1 && mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
		monster "gef_d01_i",84,135,"Berserk Bomi",3756,1,"ill_vampire_spawn_bomi::OnMobDead";
	}
	end;
OnMobDead:
	enablenpc( "Wizard#ilgf001" );
	disablenpc( "Dracula#ilgf02" );
	mapannounce "gef_d01_i", "Bomi is falling into a long, deep sleep.", bc_map, 0x00ff00;
	mapannounce "gef_d01_i", "Angry Dracula: Who dares hurt my Bomi?!", bc_map, 0x00ff00;
	sleep 1000;
	if (rand(2) == 1)
		mapannounce "gef_d01_i", "Angry Dracula: Leave Bomi alone! Fight me instead!", bc_map, 0xFF0000;
	else
		mapannounce "gef_d01_i", "Angry Dracula: Bomi needs rest. I'll deal with you!", bc_map, 0xFF0000;
	killmonster "gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead";
	killmonster "gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead";
	monster "gef_d01_i",0,0,"Angry Dracula",3757,1,"ill_vampire_spawn_dracula::OnMobDead";
	end;
}

gef_d01_i,1,1,5	script	ill_vampire_spawn_dracula	-1,{
	end;
OnMobDead:
	killmonster "gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead";
	killmonster "gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead";
	mapannounce "gef_d01_i", "Angry Dracula: It's about time for Bomi to wake up. Humans, don't forget your promise!", bc_map, 0x00ff00;
	sleep 2000;
	mapannounce "gef_d01_i", "Bomi is stirring from her long, deep sleep.", bc_map, 0x00ff00;
	if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1) {
		disablenpc( "Wizard#ilgf001" );
		enablenpc( "Wizard#ilgf01" );
        enablenpc "Dracula#ilgf02";
	}
	end;
}

gef_d01_i,185,97,5	script	King#ilgf01	4_NFBAT,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[国王]";
		mes "嘿嘿，你背这么多东西干嘛？先去减轻你的包吧。";
		close;
	}
	if (ill_vampire < 11) {
		mes "[国王]";
		mes "怎么，找我有事吗？如果没有，嘘！";
		close;
	}
	if (ill_vampire == 11) {
		mes "[国王]";
		mes "我闻到了^0000cd血^000000！人血！";
		next;
		mes "[乔乔]";
		mes "你不可能闻到我的味道。我不再流血了。我已经痊愈了！";
		next;
		mes "[国王]";
		mes "不，是从其他地方传来的，而且我闻到了不止一个人的味道。 ...^0000cd战斗^000000！某处发生了打斗！血！我们走吧！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "打架？ ...不。如果教会的人找到了波密怎么办？";
		next;
		mes "[德古拉]";
		mes "哪些人来自教会？";
		next;
		emotion ET_GO;
		mes "[国王]";
		mes "*嗅闻*这边！臭味就是从这个方向传来的！";
		erasequest 14662;// You're Scaring Me
		setquest 14663;// Bloody Fight
		ill_vampire = 12;
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 12 || ill_vampire == 13) {
		mes "[国王]";
		mes "*嗅闻*这边！臭味就是从这个方向传来的！";
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[国王]";
		mes "你为什么这样看着我？德古拉需要更多的休息。不要打扰他。";
		close;
	}
	// if (ill_vampire == 16) {
	switch( checkquest(14676,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[乔乔]";
		mes "冒险家，你回来了。";
		next;
		mes "[国王]";
		mes "是啊，你怎么这么快就回来了？我现在不想被打扰。稍后再回来。";
		close;
	case 2:
		mes "[国王]";
		mes "冒险家来了！";
		next;
		mes "[乔乔]";
		mes "冒险家来了！";
		next;
		select("你为什么见到我这么兴奋？");
		mes "[国王]";
		mes "你会像上次一样照顾那些Matte Drainliars，对吗？他们太大声了。";
		next;
		mes "[乔乔]";
		mes "你也会得到一些^0000cd短蝙蝠毛^000000，对吧？我需要比你上次带来的更多的东西。";
		next;
		mes "[国王]";
		mes "^0000cd10 个哑光 Drainliars^000000！";
		next;
		mes "[乔乔]";
		mes "先感谢您！";
		erasequest 14676;// Break Time
		setquest 14675;// Noisy Neighbors
		close;
	}
	switch( checkquest(14675,HUNTING) ) {
	case -1:
		mes "[乔乔]";
		mes "啊，冒险家。很高兴再次见到你！德古拉的情况好多了，尽管他整天都在睡觉。";
		next;
		mes "[国王]";
		mes "他已经完全康复了，但他仍然不想离开。我不知道他为何如此迷恋那个变身的人。";
		next;
		mes "[乔乔]";
		mes "哦，你是说波密吗？我以为她是像德古拉一样的吸血鬼。";
		next;
		mes "[国王]";
		mes "并非所有吸血鬼都是一样的。我们和她不一样。顺便问一下，你为什么还在这里？德古拉不再需要你了。";
		next;
		mes "[乔乔]";
		mes "嗯，这里有一些我想研究的东西，而且......";
		next;
		mes "[国王]";
		mes "你有死的愿望吗？你没有注意到这些蝙蝠是多么饥饿和凶猛吗？它们会抓住任何会动的东西，这些怪物！帮我照顾他们，好吗？";
		next;
		if (select( "他们很烦人。", "嗯，我有点忙。") == 2) {
			mes "[国王]";
			mes "哦，你是吗？然后走吧。离开。";
			next;
			mes "[乔乔]";
			mes "王爷，你不必这么刻薄。";
			next;
			mes "[国王]";
			mes "他先对我不好！而且他说他很忙。这就是为什么我说走吧。去！";
			close;
		}
		mes "[乔乔]";
		mes "好吧，只要我靠近德古拉和金，他们就不会打扰我。";
		next;
		mes "[国王]";
		mes "但他们喝僵尸血！哎哟！不管我有多饿，我都不会喝死血。那太丢脸了！";
		next;
		mes "[乔乔]";
		mes "所以你讨厌自己的同类。";
		npctalk "什么？你，人类。", "", bc_self;
		sleep2 1000;
		npctalk "是的...？", "向导#ilgf02", bc_self;
		sleep2 1000;
		npctalk "我是蝙蝠吗？", "", bc_self;
		sleep2 1000;
		npctalk "...不。", "向导#ilgf02", bc_self;
		next;
		mes "[国王]";
		mes "万一你忘了，你知道你是如何站在那里呼吸的吗？";
		next;
		mes "[乔乔]";
		mes "...如何？";
		next;
		mes "[国王]";
		mes "因为我让你。我让你喘口气并不是因为你值得活下去，而是因为我懒得杀你。";
		next;
		emotion ET_SWEAT, getnpcid(0, "Wizard#ilgf02");
		mes "[乔乔]";
		mes "...哦。谢谢你所做的一切。嗯，我想我是时候重新加入我的团队了。";
		next;
		mes "[国王]";
		mes "我还在和你说话。你不会因为我是蝙蝠形态而害怕我吧？你们人类太愚蠢了，你们无法超越自己所看到的。";
		npctalk "不，不，这不是真的。", "向导#ilgf02", bc_self;
		next;
		mes "[乔乔]";
		mes "我同意这些蝙蝠是可耻的、无耻的、令人厌恶的动物。";
		next;
		mes "[国王]";
		mes "你刚才是不是说我是令人厌恶的动物？";
		next;
		mes "[乔乔]";
		mes "不，不。不是你。我说的是 Matte Drainliars。";
		npctalk "很好，因为你不想让我生气。", "", bc_self;
		sleep2 1000;
		npctalk "看来你已经认定自己是一只蝙蝠了。", "向导#ilgf02", bc_self;
		sleep2 1000;
		npctalk "什么？", "", bc_self;
		next;
		select("我有一个问题要问你，国王。");
		mes "[国王]";
		mes "它是什么？";
		next;
		select("你为什么变成蝙蝠形态？");
		mes "[乔乔]";
		mes "是的。如果你这么讨厌他们，那你为什么不回到原来的样子呢？";
		next;
		mes "[国王]";
		mes "那是因为这种形式效率更高。我不需要喝很多酒就能吃饱，我并不引人注目，人们，就像那边的那个傻瓜，在我周围放松了警惕。";
		next;
		mes "[乔乔]";
		mes "我不是一个白痴。如果我是的话，我就不会成为一名巫师。别忘了，我拯救了德古拉！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "但为什么是蝙蝠呢？还有其他小动物。";
		next;
		mes "[国王]";
		mes "因为蝙蝠是隐秘的，而且它们会飞。哦，说到这里，你知道Matte Drainliars的短发是用来制作斗篷的吗？";
		next;
		select("啊？不，我从来没有听说过。");
		mes "[乔乔]";
		mes "隐形斗篷？小偷之流肯定喜欢这些。";
		next;
		mes "[国王]";
		mes "我不敢相信你的头脑如此简单。";
		next;
		mes "[乔乔]";
		mes "呃，我怎样才能得到头发？通过追捕 Matte Drainliars？";
		next;
		mes "[国王]";
		mes "为什么，你想放弃魔法而转向偷窃？";
		next;
		mes "[乔乔]";
		mes "不，但征服大陆上所有的地下城并成为最伟大的法师一直是我的梦想。";
		next;
		mes "[国王]";
		mes "……那是一个伟大的梦想，一个不可能实现的梦想。嗯，任何人都可以有远大的梦想。";
		npctalk "啊啊，来吧！", "向导#ilgf02", bc_self;
		sleep2 1000;
		npctalk "来吧，什么？", "", bc_self;
		next;
		mes "[乔乔]";
		mes "即使不是为了我的梦想，斗篷在各种情况下也会派上用场。";
		next;
		mes "[国王]";
		mes "我不知道我们中间有一个有抱负的小偷。呵呵。";
		next;
		mes "[乔乔]";
		mes "我说这不是我想要的。冒险家，你忙吗？";
		next;
		mes "[国王]";
		mes "什么，你要问他？自己做吧！";
		next;
		mes "[乔乔]";
		mes "我还有其他事情要做。";
		next;
		mes "[国王]";
		mes "比如什么？吃饭、睡觉、拉屎？";
		next;
		mes "[乔乔]";
		mes "哦，来吧！你知道我一直在忙着研究东西！";
		next;
		mes "[国王]";
		mes "你的意思是，研究我和德古拉。";
		next;
		mes "[乔乔]";
		mes "……你怎么……？";
		next;
		mes "[国王]";
		mes "我从一开始就知道这一点。你的脸是如此透明，你无法隐藏任何东西。我只是什么也没说，因为我觉得你紧张地一直看着我们很有趣。";
		next;
		mes "[乔乔]";
		mes "...哦。那我可以问你问题吗？";
		npctalk "不。", "", bc_self;
		sleep2 1000;
		npctalk "为什么不呢？", "向导#ilgf02", bc_self;
		next;
		mes "[国王]";
		mes "冒险家，你要给他拿蝙蝠毛吗？很好，这意味着你会照顾那些 Matte Drainliars。它们拍打翅膀让我彻夜难眠。";
		next;
		mes "[乔乔]";
		mes "为什么你不能自己做呢？您所要做的只是轻弹手指即可。";
		next;
		mes "[国王]";
		mes "如果你愿意的话我可以对你动动手指。";
		next;
		mes "[乔乔]";
		mes "冒险家，请把蝙蝠毛给我拿来。金，我的意思是，金先生，我需要多少蝙蝠毛？";
		next;
		mes "[国王]";
		mes "这取决于你想要什么样的斗篷。要知道用头发做东西是很困难的。";
		next;
		mes "[乔乔]";
		mes "嗯，好吧，那么请给我带来^0000cd20根短蝙蝠毛^000000作为开始。";
		next;
		mes "[国王]";
		mes "当你这样做时，寻找我们周围的^0000cdMatte Drainliars^000000。至少有^0000cd10^000000。";
		next;
		mes "[乔乔]";
		mes "狩猎愉快，冒险家！";
		setquest 14675;// Noisy Neighbors
		npctalk "啊，冒险家！等待！", "向导#ilgf02", bc_self;
		close;
	case 0:
	case 1:
		break;
	case 2:
		if (countitem(25263) < 20)
			break;
		mes "[国王]";
		mes "你回来得很快。我希望你没有忘记任何事情。";
		next;
		mes "[国王]";
		mes "巫师！冒险家带来了头发。";
		next;
		mes "[乔乔]";
		mes "我现在该怎么办？";
		next;
		mes "[国王]";
		mes "这需要你自己去弄清楚。我不是斗篷制造商，是吗？但我知道你需要的远不止这些。";
		next;
		mes "[乔乔]";
		mes "呃……冒险者？";
		next;
		mes "[国王]";
		mes "他刚打猎回来。你应该让他休息，至少在这一天剩下的时间里。";
		next;
		mes "[国王]";
		mes "冒险家，明天再来帮我猎取更多哑光吸水者，好吗？没有他们，这里是如此安静。";
		next;
		mes "[乔乔]";
		mes "那么，明天见，冒险家……";
		delitem 25263,20;// Short_Bat_Fur
		erasequest 14675;// Noisy Neighbors
		setquest 14676;// Break Time
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	mes "[国王]";
	mes "你回来得很快。我希望你没有忘记任何事情。";
	next;
	mes "[国王]";
	mes "看看我们这里有什么。你忘了我问什么了吗？我告诉你要^0000cd猎杀10个哑光排水者并带20根短蝙蝠毛^000000。";
	next;
	mes "[国王]";
	mes "去完成它吧。";
	close;

OnInit:
	cloakonnpc();

	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14676,PLAYTIME) == -1 && checkquest(14675,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14675,HUNTING) == 2 && countitem(25263) > 19") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14676,PLAYTIME) == 2") );
	end;
}

gef_d01_i,191,96,3	script	Wizard#ilgf02	4_M_JOB_WIZARD,5,5,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[乔乔]";
		mes "你确定你能携带所有这些东西吗？你为什么不轻点你的包呢？";
		close;
	}
	if (ill_vampire < 10) {
		mes "[乔乔]";
		mes "哎呀，我的伤口已经好了，但我还是很痛。";
		close;
	}
	if (ill_vampire == 10) {
		mes "[乔乔]";
		mes "莫乔怎么样了？呵呵，她实在太好奇了，我为格林兄弟对付她感到抱歉。";
		next;
		mes "[乔乔]";
		mes "我现在还不能离开这里。这个地方还有很多我想了解的事情。";
		close;
	}
	if (ill_vampire == 11) {
		mes "[乔乔]";
		mes "国王闻到了血腥味。尽管当我失血过多时他就是这样找到我的，但我仍然害怕他能做到这一点。";
		close;
	}
	if (ill_vampire == 12 || ill_vampire == 13) {
		mes "[乔乔]";
		mes "那边某处发生了一场战斗。你不想去检查一下吗？";
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[乔乔]";
		mes "我要在这里呆一段时间。德古拉需要一段时间才能完全恢复精力，就我个人而言，我想了解这些人的很多事情。";
		next;
		mes "[乔乔]";
		mes "请让 Nun Gem 和 Mojo 知道。";
		close;
	}
	// if (ill_vampire == 16) {
	switch( checkquest(14678,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[乔乔]";
		mes "冒险家，看到这里的发光了吗？这是你带给我的闪亮孢子。";
		next;
		mes "[乔乔]";
		mes "我感觉自己仿佛回到了过去，在这昏暗的灯光下学习。";
		next;
		mes "[乔乔]";
		mes "这些闪亮的孢子里还剩下足够的光。请天亮后回来。";
		close;
	case 2:
		mes "[乔乔]";
		mes "冒险家！你是我生命中的光！";
		next;
		mes "[国王]";
		mes "你吓到他了。";
		next;
		mes "[乔乔]";
		mes "今天你能再次给我带来闪亮的孢子吗？";
		next;
		mes "[乔乔]";
		mes "请给我带来霓虹蘑菇中的^0000cd10个闪亮孢子^000000和甜蜜噩梦中的^0000cd10个噩梦簇^000000。谢谢。";
		erasequest 14678;// Time to Study
		setquest 14677;// Studying in Dim Light
		close;
	}
	switch( isbegin_quest(14677) ) {
	case 0:
		mes "[乔乔]";
		mes "冒险家，等等！";
		next;
		mes "[国王]";
		mes "你拼错了。";
		next;
		mes "[乔乔]";
		mes "在哪里？哦，我又做了一次。";
		next;
		mes "[国王]";
		mes "啧啧。我不知道当你连拼写都不能正确的时候，你是如何成为一名巫师的。";
		next;
		mes "[乔乔]";
		mes "这只是因为太暗而看不见。别再偷看我在做什么了！";
		next;
		mes "[国王]";
		mes "这不像你在写什么重要的东西。";
		next;
		select("你们两个相处得和我记忆中一样好。");
		mes "[国王]";
		mes "你在这里做什么？你没有事情要做吗？";
		next;
		if (select( "Jojo想见我。", "其实我很忙。") == 2) {
			mes "[乔乔]";
			mes "你是？我本来想请你帮个忙，但我可以等。";
			next;
			mes "[国王]";
			mes "那你最好去忙你的事了。";
			close;
		}
		mes "[国王]";
		mes "为什么？";
		next;
		mes "[乔乔]";
		mes "因为我们在地下，所以太黑了，我无法写作和阅读。我有很多信息想要分类，但我总是拼错单词，因为我看不清它们。";
		next;
		mes "[国王]";
		mes "你应该能够闭着眼睛做到这一点。你是一个巫师。你没学会召唤光吗？当然，如果你在我面前使用魔法，我会把你烧成灰烬。";
		npctalk "我……我还是个巫师！", "向导#ilgf02", bc_self;
		sleep2 500;
		npctalk "什么？我听不到你说话。", "国王#ilgf01", bc_self;
		next;
		mes "[乔乔]";
		mes "我完成了公会的官方巫师培训计划。我的实力已经足够和你较量了！";
		next;
		mes "[国王]";
		mes "哦真的吗？对你有好处！";
		next;
		mes "[国王]";
		mes "不过，说实话。你真的认真学习了吗？你是否每堂课都认真听讲、通宵学习、刻苦练习？你最好告诉我真相。";
		next;
		mes "[国王]";
		mes "你能诚实地说你试图突破自己的极限吗？";
		next;
		mes "[乔乔]";
		mes "...";
		next;
		mes "[国王]";
		mes "不，你没有。这就是为什么你的屁股被那些蘑菇交给了你。";
		next;
		mes "[乔乔]";
		mes "我说他们是僵尸，不是蘑菇！";
		next;
		mes "[国王]";
		mes "僵尸和蘑菇。对我来说同样的区别。";
		next;
		mes "[国王]";
		mes "你还不够优秀，不足以维持生计。我不敢相信你的公会真的投资了你。";
		npctalk "我的生活一直很好。", "", bc_self;
		sleep2 500;
		npctalk "是的，对。", "国王#ilgf01", bc_self;
		next;
		mes "[乔乔]";
		mes "那你呢？我知道你可以转变。但你还能做什么呢？";
		npctalk "你真的想让我给你看吗？现在？", "国王#ilgf01", bc_self;
		sleep2 1000;
		npctalk "...不。", "", bc_self;
		next;
		mes "[国王]";
		mes "也许你一直质疑我，因为你不相信我。我教你成为人类中最伟大的魔法师怎么样？那你愿意相信我吗？";
		next;
		mes "[乔乔]";
		mes "嗯，你想教我吗？";
		next;
		mes "[国王]";
		mes "当然。";
		next;
		mes "[乔乔]";
		mes "为什么？";
		next;
		mes "[国王]";
		mes "我已经研究了很多。你认为我为什么有？";
		next;
		mes "[乔乔]";
		mes "变得更聪明？";
		next;
		mes "[国王]";
		mes "不，因为我无聊死了！";
		next;
		mes "[乔乔]";
		mes "你拥有世界上所有的时间。我对此很羡慕。";
		next;
		mes "[国王]";
		mes "如果你不想让我教你，我也没关系。";
		next;
		mes "[乔乔]";
		mes "不，不！我喜欢！但是，呃，你不会要我的血作为回报，是吗？";
		next;
		mes "[国王]";
		mes "*哼哼*如果我因为饿而喝任何东西，我现在不会比那些Matte Drainliars更好，不是吗？";
		npctalk "你刚才是把我比作僵尸吗？", "", bc_self;
		sleep2 500;
		npctalk "所以你并不像我想象的那么傻。", "国王#ilgf01", bc_self;
		next;
		select("乔乔？");
		mes "[乔乔]";
		mes "哦，对不起，我不是故意让你站在那里的。你能给我一些霓虹蘑菇的孢子吗？我需要一些光线才能看清我在写的东西。";
		npctalk "为什么是那些？", "国王#ilgf01", bc_self;
		next;
		mes "[乔乔]";
		mes "哦，你知道那些孢子是如何发光的。我想用它们来照亮这个地方。";
		next;
		mes "[国王]";
		mes "好吧，那就自己去拿吧。不要向这位冒险家扔东西。";
		next;
		mes "[乔乔]";
		mes "哦，好吧...我是...霓虹蘑菇是...你知道的。";
		npctalk "你说你被僵尸袭击了。", "国王#ilgf01", bc_self;
		sleep2 500;
		npctalk "我是。", "", bc_self;
		next;
		mes "[国王]";
		mes "无论如何，你要把孢子放在哪里？";
		next;
		mes "[乔乔]";
		mes "我有一个空瓶子？哦，我忘了我被袭击时丢了包。";
		next;
		mes "[乔乔]";
		mes "冒险家，你能给我一些梦魇簇吗？我可以将它们与孢子混合制成糊状物并将其涂在墙上。";
		next;
		mes "[国王]";
		mes "什么？太俗气了。";
		next;
		mes "[乔乔]";
		mes "但还是有效的。你不知道你可以这样使用它们，是吗？";
		next;
		mes "[国王]";
		mes "因为我不需要。";
		next;
		mes "[乔乔]";
		mes "那么，冒险家，请给我带来霓虹蘑菇的^0000cd10个闪亮孢子^000000和甜蜜噩梦的^0000cd10个噩梦簇^000000。";
		setquest 14677;// Studying in Dim Light
		close;
	case 1:
	case 2:
		mes "[乔乔]";
		mes "冒险家，欢迎回来！";
		next;
		if (countitem(25264) < 10 || countitem(25265) < 10)	{
			mes "[国王]";
			mes "我可以说这还不够，只要看看它。";
			next;
			mes "[乔乔]";
			mes "哦，你是对的。你一定忘记我问了什么。";
			next;
			mes "[乔乔]";
			mes "请给我带来霓虹蘑菇中的^0000cd10个闪亮孢子^000000和甜蜜噩梦中的^0000cd10个噩梦簇^000000。谢谢。";
			close;
		}
		mes "[国王]";
		mes "我看得出来他带来了你要的一切。来吧，制作糊剂并将其涂在墙上。";
		next;
		mes "[乔乔]";
		mes "冒险家，谢谢你帮助我学习。这些发光的孢子不会持续很长时间。你明天能回来帮我拿更多吗？";
		delitem 25264,10;// NightmareOfLump
		delitem 25265,10;// Shining_Spore
		erasequest 14677;// Studying in Dim Light
		setquest 14678;// Time to Study
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	end;

OnTouch:
	if (ill_vampire == 16 && isbegin_quest(14677) == 0)
		npctalk "啊，冒险家！等待！", "向导#ilgf02", bc_self;
	if (ill_vampire > 13) {
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		cloakoffnpcself( "Dracula#ilgf02" );
	}
	end;

OnInit:
	cloakonnpc();

	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14678,PLAYTIME) == -1 && isbegin_quest(14677) == 0") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && isbegin_quest(14677) == 1 && countitem(25264) > 9 && countitem(25265) > 9") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14678,PLAYTIME) == 2") );
	end;
}

gef_d01_i,189,98,3	script(CLOAKED)	Dracula#ilgf02	4_DRACULA,{
	if (ill_vampire < 10) {
		mes "[德古拉]";
		mes "什么给你带来？我建议你远离这个地方。";
		close;
	}
	if (ill_vampire == 10) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "我们来喝这个吧。", "国王#ilgf01", bc_self;
		sleep2 1500;
		emotion ET_SWEAT, getnpcid(0, "Wizard#ilgf02");
		npctalk "哦，不。那是？", "向导#ilgf02", bc_self;
		sleep2 1500;
		npctalk "国王，我告诉过你，我们不再向人们喝酒了。这可不是什么礼貌的话。我代表他向你道歉。", "", bc_self;
		sleep2 2000;
		npctalk "我、没关系。", "向导#ilgf02", bc_self;
		sleep2 1500;
		npctalk "人类最终都会死亡。早点死有那么糟糕吗？来吧，我们喝一杯吧。不过这个味道不太好闻。", "国王#ilgf01", bc_self;
		sleep2 2000;
		npctalk "你介意我把那只蝙蝠处理掉吗？", "向导#ilgf02", bc_self;
		sleep2 1500;
		npctalk "没有人伤害我面前的任何人。", "", bc_self;
		emotion ET_FRET, getnpcid(0, "King#ilgf01");
		npctalk "人类，你是瞎子吗？我不是蝙蝠。", "国王#ilgf01", bc_self;
		sleep2 1500;
		npctalk "那你又是什么？", "向导#ilgf02", bc_self;
		specialeffect EF_PORTAL4, AREA, "King#ilgf01";
		specialeffect EF_M01, AREA, "King#ilgf01";
		cloakoffnpcself( "King#ilgf01" );
		sleep2 1500;
		npctalk "现在，我看起来像什么？", "国王#ilgf01", bc_self;
		sleep2 1500;
		emotion ET_HUK, getnpcid(0, "Wizard#ilgf02");
		npctalk "*喘息*你到底是什么？！", "向导#ilgf02", bc_self;
		sleep2 1500;
		npctalk "怎么，这也太可怕了吧？那这个呢？", "国王#ilgf01", bc_self;
		specialeffect EF_PORTAL4, AREA, "King#ilgf01";
		specialeffect EF_M01, AREA, "King#ilgf01";
		cloakoffnpcself( "King#ilgf01" );
		sleep2 1500;
		emotion ET_CRY, getnpcid(0, "Wizard#ilgf02");
		npctalk "你-你-你是我吗？啊啊啊啊二重身啊！我、我会死吗？！", "向导#ilgf02", bc_self;
		sleep2 1500;
		npctalk "你害怕你自己。为什么？", "国王#ilgf01", bc_self;
		sleep2 2000;
		npctalk "你非常爱自己，以至于你不接受任何与你不同的人。但当你看到一个和你一模一样的人时，你就无法忍受。为什么？", "国王#ilgf01", bc_self;
		sleep2 2000;
		npctalk "看到其他人类和看到我自己的克隆是两件不同的事情！", "向导#ilgf02", bc_self;
		sleep2 1500;
		npctalk "王，够了。别再折磨他了。", "", bc_self;
		sleep2 2000;
		emotion ET_OHNO, getnpcid(0, "King#ilgf01");
		npctalk "啧啧。你对人太心软了。", "国王#ilgf01", bc_self;
		specialeffect EF_PORTAL4, AREA, "King#ilgf01";
		specialeffect EF_M01, AREA, "King#ilgf01";
		cloakoffnpcself( "King#ilgf01" );
		sleep2 1000;
		npctalk "嗯...我现在可以正常移动了。我可以走了吗？", "向导#ilgf02", bc_self;
		sleep2 500;
		npctalk "是的，你可以离开了。", "", bc_self;
		npctalk "不！", "国王#ilgf01", bc_self;
		sleep2 500;
		npctalk "为什么不呢？", "", bc_self;
		sleep2 1500;
		npctalk "他是一个人，而人类是群体行动的。他会带着他的朋友来攻击我们。你已经忘记了吗？", "国王#ilgf01", bc_self;
		sleep2 2000;
		npctalk "不，我不会那样做。我永远不会忘记恩惠。你救了我。我保证我不会伤害你。请相信我。", "向导#ilgf02", bc_self;
		sleep2 2000;
		npctalk "人类永远不能被信任。", "国王#ilgf01", bc_self;
		sleep2 2000;
		npctalk "我同意他可能会带上他的朋友，但并不是所有的人都是不值得信任的。", "", bc_self;
		npctalk "你站在哪一边？我还是他？", "国王#ilgf01", bc_self;
		setpcblock PCBLOCK_NPC, false;

		mes "[" + strcharinfo(0) + "]";
		mes "典型的巫师……等等，那是Jojo吗？";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Typical wizard... Wait, could that be Jojo??", bc_self;
		next;
		select("乔乔？你是乔乔吗？");
		mes "[乔乔]";
		mes "你、你是谁？";
		npctalk "看，我告诉过你了！他的一位朋友已经出现了！这就是我不相信人类的原因！", "国王#ilgf01", bc_self;
		npctalk "人类？", "", bc_self;
		next;
		mes "[乔乔]";
		mes "不，不！他不是我的朋友！我以前从没见过他，我发誓！";
		next;
		mes "[国王]";
		mes "他可能是你的朋友派来的。人类，回答我！";
		next;
		select("乔乔的同事正在寻找他。");
		mes "[陌生人]";
		mes "我懂了。我们发现他受伤了，昏迷不醒，所以我们把他带到这里治疗。他现在已经好了，可以离开了。";
		npctalk "不！他们会把我们置于危险之中！", "国王#ilgf01", bc_self;
		next;
		select("你救了乔乔。");
		mes "[" + strcharinfo(0) + "]";
		mes "请允许我代表他的同事们向你们表示感谢。我可以问你的名字吗？";
		next;
		mes "[国王]";
		mes "你在这里，却不知道他是谁。他是德古拉。你不是来挑战他的吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "德古拉？你说德古拉？";
		next;
		mes "[德古拉]";
		mes "你身上有一种熟悉的味道，冒险家。我渴望这个味道很久了。";
		npctalk "你是说他闻起来很香吗？我可以喝他的酒吗？", "国王#ilgf01", bc_self;
		next;
		mes "[德古拉]";
		mes "我的意思是他闻起来像一位朋友，小家伙。";
		npctalk "什么朋友？我以为我是你唯一的朋友。", "国王#ilgf01", bc_self;
		next;
		select("我来这里之前就认识了波密。");
		mes "[德古拉]";
		mes "...我懂了。她怎么样？";
		npctalk "什么？波密？", "国王#ilgf01", bc_self;
		npctalk "你是说笔记本的主人吗？", "向导#ilgf02", bc_self;
		sleep2 500;
		npctalk "她有告诉过你任何关于……我的事情吗？", "", bc_self;
		next;
		mes "[国王]";
		mes "哇哦，原来你一直在这里闲逛，就是为了那个忘恩负义的女人啊。是这样吗？";
		npctalk "她并非忘恩负义。她从来不想要我给她的东西。", "", bc_self;
		next;
		mes "[乔乔]";
		mes "你给了她什么？";
		next;
		mes "[国王]";
		mes "永生。";
		next;
		mes "[乔乔]";
		mes "永生...！";
		next;
		mes "[国王]";
		mes "这是人类的正常反应！她忘恩负义！";
		npctalk "为什么，你想要吗？我可以给你。", "国王#ilgf01", bc_self;
		next;
		select("她说德古拉背叛了她。");
		emotion ET_FRET, getnpcid(0, "King#ilgf01");
		mes "[国王]";
		mes "背叛了她？哈？她在哪儿？他就应该让她死掉！";
		next;
		mes "[德古拉]";
		mes "她还是没有原谅我。但我做了我必须做的事。";
		next;
		select("一定有什么误会。");
		mes "[德古拉]";
		mes "我需要人类才能生存。我躲在他们中间，需要的时候就去追捕他们。";
		next;
		mes "[德古拉]";
		mes "有一天，教会的人找到了我。他们一心要以正义的名义杀死我。";
		npctalk "他们很执着。", "国王#ilgf01", bc_self;
		next;
		mes "[德古拉]";
		mes "我被他们打成重伤，不知怎么就到了这个充满死亡和神秘能量的地方。";
		next;
		mes "[德古拉]";
		mes "我以为我会死在这里，但幸运女神终于将目光转向了我。";
		npctalk "请谁让他闭嘴。我讨厌这个故事。", "国王#ilgf01", bc_self;
		next;
		mes "[德古拉]";
		mes "波密救了我。她给了我血液，让我恢复力量。我不是一个生命，但那一天，她给了我新的生命。";
		next;
		mes "[乔乔]";
		mes "后来为什么不走？";
		next;
		mes "[德古拉]";
		mes "尽管波密是一个坚强的女人，但她的身体却让她失望了。看着她一天天消瘦，我很痛苦。我向她提出永生，但她拒绝了。";
		next;
		mes "[德古拉]";
		mes "我留下来是因为当她作为人类死去时我想在她身边。";
		next;
		mes "[德古拉]";
		mes "在我漫长的一生中，这是我第一次真正思考人类，以及是什么造就了他们。他们也有这种帮助别人的冲动，不求任何回报。";
		next;
		mes "[德古拉]";
		mes "我是通过波密了解到他们的。我所学到的东西没有意义，我也没有真正理解它。";
		next;
		mes "[德古拉]";
		mes "但这和我以前对人类的看法不同。我开始理解他们了。";
		npctalk "为什么？了解它们对你有什么好处呢？", "国王#ilgf01", bc_self;
		next;
		mes "[乔乔]";
		mes "那你为什么要违背她的意愿呢？";
		next;
		mes "[德古拉]";
		mes "发生了事故。那些差点杀了我的人又找到了我。";
		npctalk "来自教会的人？", "向导#ilgf02", bc_self;
		next;
		mes "[德古拉]";
		mes "无论我走到哪里，厄运都会跟着我。波密还给我做了护身符，但是没有效果。";
		next;
		mes "[德古拉]";
		mes "那时我已经完全恢复了力量，那些人类根本就不是我的对手。但波米……她不想让任何人受到伤害。";
		next;
		mes "[德古拉]";
		mes "长话短说，她陷入了交火之中。她快要死了，我惊慌失措。";
		next;
		mes "[德古拉]";
		mes "我还没准备好让她走。在我有时间思考我在做什么之前，我把她转过身来。";
		next;
		mes "[乔乔]";
		mes "你这么做是因为你不想失去她。在那种情况下我也会做同样的事情。";
		npctalk "为什么？", "国王#ilgf01", bc_self;
		sleep2 1000;
		npctalk "人们就是这么做的，为了保护他们所爱的人。", "向导#ilgf02", bc_self;
		next;
		mes "[国王]";
		mes "但那个固执的女孩就是不肯承认！";
		next;
		mes "[国王]";
		mes "我不明白她的逻辑。她怎么可能想作为人类而死而不是作为吸血鬼而活呢？她怎么会认为永生的恩赐就是背叛呢？";
		next;
		mes "[乔乔]";
		mes "我想我知道。人们往往认为事情是理所当然的。如果我能永远活下去，我想我就会失去所有的动力。我的意思是，你除了时间什么都没有。";
		next;
		mes "[乔乔]";
		mes "我认为你们需要互相谈谈。你尝试过和她说话吗？";
		next;
		mes "[德古拉]";
		mes "当她复活后，她又惊又怒，根本不听我的话。";
		next;
		mes "[德古拉]";
		mes "我做了我所做的事来拯救她，我知道她因此而怨恨我。";
		npctalk "你需要停止与人类相处。你现在听起来就像他们中的一员。", "国王#ilgf01", bc_self;
		next;
		mes "[国王]";
		mes "德古拉，那个人对你来说算什么？为什么你一定要留在这样的地方";
		npctalk "当她甚至不跟你说话的时候？", "国王#ilgf01", bc_self;
		next;
		mes "[德古拉]";
		mes "我不是吗？";
		next;
		emotion ET_SURPRISE, getnpcid(0, "King#ilgf01");
		mes "[国王]";
		mes "大家安静。我闻到了一些东西。";
		erasequest 14661;// Jojo Is the Mage's Name 02
		setquest 14662;// You're Scaring Me
		ill_vampire = 11;
		close;
	}
	if (ill_vampire == 11) {
		mes "[德古拉]";
		mes "国王？它是什么？";
		close;
	}
	if (ill_vampire == 12 || ill_vampire == 13) {
		mes "[德古拉]";
		mes "打架？哦不，我们最好快点！";
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[德古拉]";
		mes "我决定等她。无论如何，我可以休息一下。";
		close;
	}
	mes "[德古拉]";
	mes "她喝下的蝙蝠血有时会让她失去理智。过了一会儿她平静下来，但如果教会的人看到她如此脆弱的样子，他们会想杀掉她。";
	close;
}


//============================================================
//= Illusion of Frozen
//============================================================
// boss summoning - 1 day of delay for now
ice_d03_i,126,126,3	script	Orb of Seal#frozen1	CLEAR_NPC,{
	if (.ill_frozen_boss_timer >= gettimetick(2)) {
		mes "这个球需要更多的时间来收集足够的能量才能发挥作用。";
		close;
	}
	.@i = atoi( charat(strnpcinfo(2), 6) );
	.timer[.@i] = 30;
	initnpctimer;	// the effect continue after boss spawn
	if (.timer[1] > 0 && .timer[2] > 0 && .timer[3] > 0 && .timer[4] > 0) {
		.ill_frozen_boss_timer = gettimetick(2) + 86400;// respawn timer (seems to be one day)
		donpcevent "bosseff#frozen::OnEvent";
	}
	end;
OnTimer1000:
	.@i = atoi( charat(strnpcinfo(2), 6) );
	.timer[.@i]--;
	if (.timer[.@i] < 1)
		stopnpctimer;
	else {
		initnpctimer;
		specialeffect EF_DETOXICATION;
	}
	end;
}
ice_d03_i,172,126,3	duplicate(Orb of Seal#frozen1)	Orb of Seal#frozen2	CLEAR_NPC
ice_d03_i,172,173,3	duplicate(Orb of Seal#frozen1)	Orb of Seal#frozen3	CLEAR_NPC
ice_d03_i,127,172,3	duplicate(Orb of Seal#frozen1)	Orb of Seal#frozen4	CLEAR_NPC

ice_d03_i,149,112,0	script	bosseff#frozen	HIDDEN_WARP_NPC,{
	end;
OnEvent:
	initnpctimer;
	end;
OnTimer1000:
	mapannounce "ice_d03_i", "All the energy that was sealed inside the cave has been released, awakening Ktullanux.", bc_map, 0xFFFF00;
	end;
OnTimer3000:
	stopnpctimer;
	mapannounce "ice_d03_i", "Ktullanux: Who dares call me a lizard? I'll freeze you all!", bc_map, 0xFFFF00;
	specialeffect EF_PORTAL;
	if (mobcount("ice_d03_i", "bosseff#frozen::OnBossDead") < 1)
		monster "ice_d03_i",149,112,"Awakened Ktullanux",3796,1, "bosseff#frozen::OnBossDead";	// ILL_KTULLANUX
	end;
OnBossDead:
	mapannounce "ice_d03_i", "Ktullanux: I'll... be... back...", bc_map;
	end;
}


// main quest and daily quests
ice_dun02,150,11,1	script	#tofrozen	4_PURPLE_WARP,2,2,{
	end;
OnTouch:
	if (BaseLevel < 120) {
		mes "^4d4dff您必须达到120级或更高级别才能进入此区域。^000000";
		close;
	}
	warp "ice_d03_i",149,24;
	end;
}

ice_d03_i,149,19,1	script	#fromfrozen	4_PURPLE_WARP,2,2,{
	end;
OnTouch:
	warp "ice_dun02",150,17;
	end;
}

ice_d03_i,149,24,0	script	dream#frozen	HIDDEN_WARP_NPC,1,1,{
	end;
OnTouch:
	if (isbegin_quest(15116) == 0) {
		mes "^ff0000我感觉头晕，就像在做梦一样。^000000";
		close;
	}
	end;
}

ice_d03_i,152,43,0	script	cine1#frozen	HIDDEN_WARP_NPC,13,13,{
	end;
OnTouch:
	if (checkquest(15115,PLAYTIME) == 2) {
		illusion_frozen = 0;	// reset the variable for daily quests
		erasequest 15115;// Vrid and Zeith
	}
	.@char_id = getcharid(0);
	if (illusion_frozen < 3) {
		cloakoffnpcself( "Zeith#frozen01" );
		cloakoffnpcself( "Vrid#frozen01" );
		end;
	}
	if (illusion_frozen == 3) {
		cloakoffnpcself( "Vrid#frozen01" );
		if (checkquest(15112,HUNTING) == 2)
			cloakoffnpcself( "Zeith#frozen02" );
		end;
	}
	if (illusion_frozen == 4) {
		cloakoffnpcself( "Zeith#frozen02" );
		if (checkquest(15113,HUNTING) == 2)
			cloakoffnpcself( "Vrid#frozen02" );
		end;
	}
	end;
}

ice_d03_i,155,43,3	script(CLOAKED)	Zeith#frozen01	4_M_FROZEN_GC,{
	if (checkweight(1201,1) == 0 || (MaxWeight - Weight) < 2000) {
		mes "我携带的物品种类太多。我应该先减轻我的包。";
		close;
	}
	if (BaseLevel < 110) {
		mes "- 您必须达到110级或以上才能执行此任务。";
		close;
	}
	.@quest_15116 = isbegin_quest(15116);

	if (illusion_frozen == 0) {
		if (.@quest_15116 == 2) {
			mes "^ff0000...？我早些时候把它们从冰里救了出来。为什么又被冻结了？^000000";
			next;
		}
		mes "[^0000ff蔡斯^000000]";
		mes "唉，这一切都是因为你这个白痴。";
		next;
		mes "[^ff0000转^000000]";
		mes "但他的样子确实很可怜！";
		mes "我只是想帮助他。";
		mes "谁知道他会把我们冻在冰里？";
		mes "我是这里的受害者，你知道。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "我不知道你为什么觉得他看起来很可怜​​，但这并不重要。";
		mes "我们必须考虑如何打破这个僵局。 *呻吟*";
		next;
		mes "[^ff0000转^000000]";
		mes "由于我周围都是冰，我什至动不了一根手指。";
		mes "是的，我们确实需要帮助。";
		mes "有人可以帮忙吗？哦！嘿，你！";
		next;
		select("- 你在打电话给我吗？");
		mes "[^ff0000转^000000]";
		mes "是啊，还有谁呢？正如你所看到的，我们碰巧被困在冰里了。这是一个很长的故事。如果你让我们出去，我会告诉你一切。";
		next;
		select("- 我怎样才能让你出去？");
		mes "[^ff0000转^000000]";
		mes "这是个好问题。泽斯，回答他。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "……别再往我身上扔东西了！";
		mes "我想我们必须用火。";
		next;
		mes "[^ff0000转^000000]";
		mes "火？";
		mes "但我讨厌热，火会把我们烧死。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "但我们需要它来融化我们周围的冰。我们会没事的...我想。";
		mes "所以，嗯...我们的新朋友...";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "抱歉，你能从这个山洞里的干土堆里找到一些干树枝吗？我们不需要超过 10 个。";
		next;
		mes "[^ff0000转^000000]";
		mes "啊啊，你要把我们烧死！";
		setquest 15110;// Fighting Ice with Fire
		illusion_frozen = 1;
		if (.@quest_15116 == 2) {
			next;
			mes "^ff0000他们正在进行与之前相同的对话。而且，我认为他们不记得我了。^000000";
			next;
			mes "^ff0000我已经知道火不会起作用，但我只是按照他们的要求去做。^000000";
		}
		close;
	}
	if (illusion_frozen == 1) {
		if (countitem(25309) < 10) {
			mes "[^0000ff蔡斯^000000]";
			mes "我们需要 10 根干树枝。检查这个洞穴内的干土堆。";
			close;
		}
		.@pc_name$ = strcharinfo(0);
		delitem 25309,10;	// Dry_Branch
		erasequest 15110;// Fighting Ice with Fire
		setarray .@list[0],
			15111,	// Hunt Furious Ice Titans
			15117,	// Hunt Furious Gazetis
			15118,	// Hunt Furious Snowiers
			15119;	// Hunt Hard Icicles
		.@quest_id = .@list[ rand(getarraysize(.@list)) ];
		setquest .@quest_id;
		illusion_frozen = 2;
		mes "[^0000ff蔡斯^000000]";
		mes "你带来了所有这些干树枝。哦，我们还没自我介绍呢。我们有吗？";
		mes "我是泽斯，这是？";
		next;
		mes "[^ff0000转^000000]";
		mes "呃，你会把我们烧死的。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "叹。这是维里德。";
		mes "你叫什么名字？";
		next;
		if (.@quest_15116 == 2) {
			mes "^ff0000他们又问了我的名字，就好像他们不记得我一样。发生了一些奇怪的事情，但无论如何我又告诉了他们我的名字。^000000";
			next;
		}
		select("-" + .@pc_name$ + ".");
		mes "[^0000ff蔡斯^000000]";
		mes "" + .@pc_name$ + "。这是一个很好的名字。";
		mes "现在，让我们点燃树枝并尝试融化冰块。你为什么不先试着融化我朋友周围的坚冰呢？";
		next;
		mes "[^ff0000转^000000]";
		mes "咕噜，你怎么这么邪恶？";
		mes "不，不要！我宁愿死！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "...叹。好吧，我会做的。";
		mes "你能点燃树枝并将它们放在我周围吗？";
		mes "但我要提醒你，";
		mes "尽量不要让它们离我太近。";
		next;
		mes "^ff0000我点燃了干树枝并将它们放在他周围。一段时间过去了，但冰看起来并没有融化。^000000";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "也许这块冰有魔力。";
		mes "它没有融化。";
		mes "维里德，你什么也没说。来吧，想想办法吧！";
		next;
		mes "[^ff0000转^000000]";
		mes "啧啧。你们真是太简单了，以为火能像这样融化冰呢。它不起作用，是吗？我们需要跳出框框思考。让我们尝试用冰来打冰吧！";
		next;
		mes "[^ff0000转^000000]";
		mes "我想，我们可以利用这里怪物的寒气来破冰。";
		next;
		mes "[^0000ff蔡斯^000000]";
		if (.@quest_15116 == 2)
			mes "……这太奇怪了。";
		else
			mes "……这太荒谬了。";
		mes "无论如何，我们要如何利用它们的冷能呢？";
		next;
		mes "[^ff0000转^000000]";
		mes "听听吧。";
		switch(.@quest_id) {
		case 15111:
			mes "维里德的报告：愤怒的冰泰泰坦！";
			next;
			mes "[^ff0000转^000000]";
			mes "根据我的调查，狂暴冰泰坦就像空气中的尘埃一样微小。";
			mes "它们之所以看起来很大，只是因为它们身上长满了冰柱。";
			next;
			mes "[^ff0000转^000000]";
			mes "想象一下他们一定会感到多么不舒服和寒冷！";
			mes "" + .@pc_name$ + "";
			mes "我希望你能把他们从身上长出的冰柱中解放出来。";
			break;
		case 15117:
			mes "维里德的报告：愤怒的报纸！";
			next;
			mes "[^ff0000转^000000]";
			mes "根据我的调查，盖泽提斯是冰巨星。他们对这个山洞实在是太好奇了，把头伸进去，脖子都被折断了。现在他们正在山洞里徘徊，寻找他们的尸体。";
			next;
			mes "[^ff0000转^000000]";
			mes "他们不令人毛骨悚然吗？每次我看着他们，他们看起来就像在张嘴，";
			next;
			mes "[^ff0000转^000000]";
			mes "" + .@pc_name$ + "";
			mes "请帮助他们，这样他们就不用再寻找自己的尸体了。";
			break;
		case 15118:
			mes "弗里德的报告：愤怒的雪人！";
			next;
			mes "[^ff0000转^000000]";
			mes "根据我的调查，狂怒的雪人是温柔的生物，喜欢和人打招呼。";
			mes "在被忽视太多次后，他们变得痛苦。现在，他们假装友好，";
			mes "但一旦它们足够接近，它们就会攻击人。我的心与他们同在……";
			next;
			mes "^ff0000泽斯用难以置信的眼神看着维里德。^000000";
			next;
			mes "[^ff0000转^000000]";
			mes "" + .@pc_name$ + "";
			mes "请教他们不要表现得如此鬼鬼祟祟。";
			break;
		case 15119:
			mes "维里德的报告：坚硬的冰柱！";
			next;
			mes "[^ff0000转^000000]";
			mes "据我调查，这些冰柱经历了很多。";
			next;
			select("- 比如什么？");
			mes "[^ff0000转^000000]";
			mes "嗯，首先，他们是……嗯……呃……";
			next;
			mes "^ff0000Vrid 做了个鬼脸，叹了口气，挠了挠头。然后他说...^000000";
			next;
			mes "[^ff0000转^000000]";
			mes "嗯，冰柱就是冰柱。他们不像有人生故事，不是吗？";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "最后，你说一句有道理的话。";
			next;
			mes "[^ff0000转^000000]";
			mes "贝罗梅德";
			mes "也许你应该帮助他们创造自己的故事。";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "...或不。";
			break;
		}
		next;
		mes "[^ff0000转^000000]";
		mes "当你这样做时，你会吸收它们释放的冷能。回来拥抱我们，也许你体内的冰冷能量会裂开我们被困的冰块。这听起来似乎不太合理？";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "不，一点也不。";
		mes "你所说的一切对我来说听起来都很牵强。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "但是……唉，我想不出更好的解决办法了。";
		switch(.@quest_id) {
		case 15111:
			mes "我们会尝试你的建议。冒险家，你能猎杀 10 只狂暴冰泰泰坦然后回来吗？";
			break;
		case 15117:
			mes "我们会尝试你的建议。冒险家，你能猎杀 10 只愤怒的盖泽提斯然后回来吗？";
			break;
		case 15118:
			mes "我们会尝试你的建议。冒险家，你能猎杀 10 只狂暴雪人并回来吗？";
			break;
		case 15119:
			mes "我们会尝试你的建议。冒险家，你能猎取10个硬冰柱然后回来吗？";
			break;
		}
		next;
		mes "[^ff0000转^000000]";
		mes "不，不要猎杀他们！你必须帮助他们！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "叹息，无论如何。请帮助他们。";
		close;
	}
	if (illusion_frozen == 2) {
		if (isbegin_quest(15111))	// Hunt Furious Ice Titans
			.@quest_id = 15111;
		else if (isbegin_quest(15117))	// Hunt Furious Gazetis
			.@quest_id = 15117;
		else if (isbegin_quest(15118))	// Hunt Furious Snowiers
			.@quest_id = 15118;
		else if (isbegin_quest(15119))	// Hunt Hard Icicles
			.@quest_id = 15119;
		else
			end;

		if (checkquest(.@quest_id,HUNTING) != 2) {
			switch (.@quest_id) {
			case 15111:
				mes "[^0000ff蔡斯^000000]";
				mes "请在洞穴内猎杀 10 只狂暴冰泰泰坦后回来。";
				close;
			case 15117:
				mes "[^0000ff蔡斯^000000]";
				mes "请在洞穴内猎杀 10 只愤怒的盖泽提斯后回来。";
				close;
			case 15118:
				mes "[^0000ff蔡斯^000000]";
				mes "请在洞穴内猎杀 10 只狂暴雪人后回来。";
				close;
			case 15119:
				mes "[^0000ff蔡斯^000000]";
				mes "请在洞穴内狩猎 10 根硬冰柱后回来。";
				close;
			}
		}
		mes "[^ff0000转^000000]";
		mes "看，我告诉过你了！";
		mes "这位冒险者现在身上散发着大量的寒气！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "……这家伙是不是很冷啊？";
		next;
		mes "[^ff0000转^000000]";
		mes "现在，过来拥抱我们吗？不行，先抱抱我吧。然后，当我周围的冰裂开时，光芒就会闪烁，你知道，就像那些童话故事中一样！";
		next;
		mes "^ff0000按照Vrid的要求，我拥抱了他。^000000";
		mes "";
		mes "^ff0000灯闪烁！^000000";
		mes "^ff0000不，等等。那只是反射环境光的冰。^000000";
		mes "^ff0000什么也没发生。^000000";
		next;
		mes "[^ff0000转^000000]";
		mes "*牙齿打战*冷-冷-冷-冷。放开我！你太冷了！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "我知道这是一个愚蠢的想法！我不该听你的愚蠢故事！我不该跟着你进这个山洞的！";
		next;
		if (.@quest_15116 == 2)
			.@menu$ = "I already know what the story is. I should just... skip it.";
		.@s = select( "- 什么愚蠢的故事？", .@menu$ );
		mes "[^ff0000转^000000]";
		mes "这不傻！";
		mes "这是事实！";
		if (.@s == 1) {
			mes "轮的报告：";
			mes "冰洞的秘密！";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "叹...";
			next;
			mes "[^ff0000转^000000]";
			mes "根据我的调查，这个洞穴曾经是一个地下王国，而且完全是用黄金打造的，就像黄金国一样！";
			next;
			mes "^ff0000泽斯翻了个白眼，但维里德无视他并继续说道。^000000";
			next;
			mes "[^ff0000转^000000]";
			mes "国王担心盗贼的数量不断增加，这时一位年轻的武士进来并赶走了所有入侵者。国王大喜，将女儿许配给武士。";
			next;
			mes "[^ff0000转^000000]";
			mes "但原来他的女婿也是个小偷。他最终带着王国最珍贵的宝藏逃跑了。";
			next;
			mes "[^ff0000转^000000]";
			mes "愤怒的国王冻结了这个洞穴，并在里面召唤了可怕的怪物，这样就没有人敢再入侵他的王国了。悲剧不是吗？";
			next;
			mes "[^ff0000转^000000]";
			mes "当然，我来这里并不是为了宝藏。我们碰巧在该地区，我只是想看看这个地方。";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "这不是你第一次告诉我的。无论如何，我从来不相信那个愚蠢的故事。我跟着你进去是因为我很好奇。我现在彻底后悔了。";
		}
		next;
		mes "[^ff0000转^000000]";
		mes "哈哈哈，现在只剩下一件事可以尝试了。那是...";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "请不要再有愚蠢的想法了！";
		next;
		mes "[^ff0000转^000000]";
		mes "有时直接的方法是最好的。让我们尝试击打冰块，直到它破裂。请先尝试 Zeith 的。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "所以我们只能诉诸暴力。你要我先走吗？懦夫！叹息……请温柔一点好吗？不，用你最好的一击来击中我！";
		erasequest .@quest_id;
		setquest 15112;	// Direct Approach
		illusion_frozen = 3;
		cloakonnpcself( "Zeith#frozen01" );
		if (mobcount("ice_d03_i", "Zeith#frozen02::OnZeithDead") < 1)
			monster "ice_d03_i",155,42,"Zeith",3798,1, "Zeith#frozen02::OnZeithDead";	// ILL_FROZEN_GC
		close;
	}
	end;
}

ice_d03_i,155,43,3	script(CLOAKED)	Zeith#frozen02	4_M_GUILLOTINE,{
	if (illusion_frozen == 3) {
		if (checkquest(15112,HUNTING) == 2) {
			mes "[^0000ff蔡斯^000000]";
			mes "...我不敢相信它有效。";
			next;
			mes "[^ff0000转^000000]";
			mes "它成功了，因为我是个天才！你应该感谢我，泽斯！";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "*哼哼*";
			mes "让我们看看你还能幸灾乐祸多久。";
			mes "" + strcharinfo(0) + "";
			mes "让我们把他一个人留在这里吧";
			mes "出去吧！";
			next;
			mes "[^ff0000转^000000]";
			mes "什么？嘿，等等！等待！加油，泽斯！我以为我们是比那更好的朋友！";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "...叹。你很幸运，我太仁慈了，没有把你留在这里。";
			mes "我仍然僵硬得无法动弹。你也要照顾他吗？？";
			erasequest 15112;	// Direct Approach
			setquest 15113;		// Direct Approach
			illusion_frozen = 4;
			cloakonnpcself( "Vrid#frozen01" );
			if (mobcount("ice_d03_i", "Vrid#frozen02::OnVridDead") < 1)
				monster "ice_d03_i",150,42,"Vrid",3797,1, "Vrid#frozen02::OnVridDead";	// ILL_FROZEN_KN
			close;
		}
		end;
	}
	if (illusion_frozen == 4) {
		if (checkquest(15113,HUNTING) != 2) {
			mes "[^0000ff蔡斯^000000]";
			mes "现在，我们需要帮助维里德。请把他从冰里救出来。";
			if (mobcount("ice_d03_i", "Vrid#frozen02::OnVridDead") < 1)
				monster "ice_d03_i",150,42,"Vrid",3797,1, "Vrid#frozen02::OnVridDead";	// ILL_FROZEN_KN
			close;
		}
		cloakoffnpcself( "Vrid#frozen02" );
		mes "[^ff0000转^000000]";
		mes "哇，谢谢！";
		mes "你很不错。";
		mes "谢谢你，" + strcharinfo(0) + "！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "我们离开这里吧。";
		mes "我不想再被冻住了！";
		next;
		mes "[^ff0000转^000000]";
		mes "等待。我们是战士？我们不能离开，否则我们的敌人就会为他对我们所做的事情付出代价！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "复仇？";
		mes "你还想再被冻死吗？";
		next;
		select("- 什么报复？你怎么被冻住了？");
		mes "[^0000ff蔡斯^000000]";
		mes "唉……这个笨蛋碰了不该碰的东西。";
		next;
		mes "[^ff0000转^000000]";
		mes "拜托，我只是想帮忙！";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "帮助谁？在我看来，那个怪物看起来并不需要帮助！";
		next;
		mes "[^ff0000转^000000]";
		mes "听。";
		mes "维里德的报告：奇怪的蜥蜴！";
		next;
		mes "[^ff0000转^000000]";
		if (isbegin_quest(15116) == 2)
			.@r = rand(3);
		switch(.@r) {
		case 0:// it seems likely to be the default text when 15116 uncompleted
			mes "就像我之前告诉过你的，当这个洞穴还是一个王国时，国王有一只宠物蜥蜴。当国王一怒之下将山洞冰封时，这只蜥蜴也变成了可怕的冰怪。";
			next;
			mes "[^ff0000转^000000]";
			mes "现在，他在山洞里徘徊，渴望主人的爱。那不是很悲剧吗？我只是想给他他想要的爱，他却因此惩罚了我！";
			break;
		case 1:
			mes "就像我之前告诉过你的，当这个洞穴还是一个王国时，国王有一只宠物蜥蜴。有一天，这只蜥蜴到王国外面去看看外面的世界，却迷路了。国王对蜥蜴非常生气，咒骂了它。";
			next;
			mes "[^ff0000转^000000]";
			mes "那只被诅咒的蜥蜴在这个山洞里游荡，仍然想出去。这不是悲剧吗？我只是想救他，结果他却把我冻在一块冰里！";
			break;
		case 2:
			mes "他的真名是？他叫什么名字？库图拉——某种东西。有人曾经告诉我，雷切尔的大祭司雇佣了这只蜥蜴来看守一个被封印在这个洞穴里的男孩。";
			next;
			mes "[^ff0000转^000000]";
			mes "但那个故事太不现实、太无聊，不值得记住。蜥蜴就只是蜥蜴吧？";
			next;
			mes "[^0000ff蔡斯^000000]";
			mes "如果你问我，这听起来是我听过的所有故事中最可信的。";
			break;
		}
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "你从哪里得到这一切？为什么你的故事每次都在变化？";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "唉，不管怎样，这个山洞里确实存在那只蜥蜴。如果你想看到它，请在 30 秒内按下洞穴中心的所有 4 个封印球。这会让它从隐藏的地方出来。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "不过那只蜥蜴确实很强。我建议你们组队一起战斗。";
		next;
		mes "[^0000ff蔡斯^000000]";
		mes "我很高兴我们认识你";
		mes "" + strcharinfo(0) + ".";
		mes "我希望我们能再次见面。";
		next;
		if (isbegin_quest(15116) == 0) {
			mes "^ff0000当他们向我告别时，他们开始消失。很快，他们就消失得无影无踪，就好像他们根本不存在一样。这一切只是一场梦还是什么？^000000";
			setquest 15116;// Clear the Illusion of the Frozen
			completequest 15116;
			illusion_frozen = 5;
		}
		else {
			mes "^ff0000当他们向我告别时，他们开始消失。看来这个洞穴陷入了无限的时间循环。^000000";
			next;
			mes "^ff0000但是其中发生的事件并不总是相同的。难不成这个山洞内的时空还在扭曲？我也会受到影响吗？^000000";
		}
		erasequest 15113;// Direct Approach
		setquest 15115;// Vrid and Zeith
		getexp 1200000,1200000;
		getitem 25271,3;	// IllusionStone
		cloakonnpcself( "Vrid#frozen02" );
		cloakonnpcself( "Zeith#frozen02" );
		close;
	}
	end;

OnZeithDead:
	if (illusion_frozen == 3) {
		cloakonnpcself();
		specialeffect EF_ICECRASH;
	}
	end;
}

ice_d03_i,150,43,5	script(CLOAKED)	Vrid#frozen01	4_M_FROZEN_KN,{
	if (illusion_frozen == 3) {
		if (checkquest(15112,HUNTING) == 2) {
			cloakoffnpcself( "Zeith#frozen02" );
			mes "[^ff0000转^000000]";
			mes "真的有效！嘿，泽斯！你还好吗？";
			close;
		}
		mes "[^ff0000转^000000]";
		mes "看看你能否打破他周围的坚冰。如果有效的话，也请让我摆脱困境。";
		if (mobcount("ice_d03_i", "Zeith#frozen02::OnZeithDead") < 1)
			monster "ice_d03_i",155,42,"Zeith",3798,1, "Zeith#frozen02::OnZeithDead";	// ILL_FROZEN_GC
		close;
	}
	end;
}

ice_d03_i,150,43,5	script(CLOAKED)	Vrid#frozen02	4_M_KNIGHT_BLACK,{
	end;
OnVridDead:
	if (illusion_frozen == 4) {
		cloakonnpcself();
		specialeffect EF_ICECRASH;
	}
	end;
}

ice_d03_i,137,38,3	script	Heap of Dry Soil#frozen1	4_SOIL,{
	if (illusion_frozen == 1) {
		if (checkweight(1201,1) == 0 || (MaxWeight - Weight) < 2000) {
			mes "我携带的物品种类太多。我应该先减轻我的包。";
			close;
		}
		if (countitem(25309) >= 10) {
			mes "我有我需要的所有树枝。我应该回到 Zeith 和 Vrid 那里。";
			close;
		}
		mes "我检查了土堆，寻找树枝。";
		next;
		progressbar "00000000",5;
		disablenpc();
		initnpctimer;
		if (rand(100) < 10)
			mes "这土堆里什么也没有。";
		else {
			getitem 25309,1;
			mes "我找到了 1 个^006400干树枝^000000。";
		}
		close;
	}
	end;

OnTimer30000:
	stopnpctimer;
	enablenpc();
	end;
}
ice_d03_i,111,45,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen2	4_SOIL
ice_d03_i,65,70,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen3	4_SOIL
ice_d03_i,86,87,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen4	4_SOIL
ice_d03_i,70,113,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen5	4_SOIL
ice_d03_i,46,206,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen6	4_SOIL
ice_d03_i,64,231,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen7	4_SOIL
ice_d03_i,84,208,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen8	4_SOIL
ice_d03_i,100,246,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen9	4_SOIL
ice_d03_i,196,246,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen10	4_SOIL
ice_d03_i,238,231,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen11	4_SOIL
ice_d03_i,252,206,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen12	4_SOIL
ice_d03_i,238,64,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen13	4_SOIL
ice_d03_i,186,44,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen14	4_SOIL
ice_d03_i,160,48,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen15	4_SOIL
ice_d03_i,126,73,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen16	4_SOIL
ice_d03_i,70,184,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen17	4_SOIL
ice_d03_i,214,208,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen18	4_SOIL
ice_d03_i,228,184,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen19	4_SOIL
ice_d03_i,230,111,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen20	4_SOIL
ice_d03_i,219,90,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen21	4_SOIL
ice_d03_i,171,72,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen22	4_SOIL
ice_d03_i,112,111,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen23	4_SOIL
ice_d03_i,112,188,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen24	4_SOIL
ice_d03_i,186,188,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen25	4_SOIL
ice_d03_i,189,112,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen26	4_SOIL
ice_d03_i,150,104,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen27	4_SOIL
ice_d03_i,110,150,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen28	4_SOIL
ice_d03_i,150,187,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen29	4_SOIL
ice_d03_i,187,149,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen30	4_SOIL


//============================================================
//= Illusion of Turtle
//============================================================

// Entrance - starter
alberta,211,28,5	script	Knight Aylvar#illtur	4_M_YOUNGKNIGHT,{
	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	disable_items;
	if (ill_turtle == 0) {
		npctalk "艾尔瓦：我需要你的帮助。请快点！", "", bc_self;
		mes "[艾尔瓦尔骑士]";
		mes "嗯..你是冒险家吗？我有件事想拜托你...";
		next;
		if (BaseLevel < 150) {
			mes "[艾尔瓦尔骑士]";
			mes "……哦，你需要更多的经验。打扰一下。";
			mes "这是一项高风险的工作。";
			next;
			mes "- ^0000CD150级及以上可以完成此任务。^000000 -";
			close;
		}
		if (select( "发生什么事了？", "我很忙。" ) == 2) {
			npctalk "艾尔瓦：莱芬，我的朋友……请注意安全。", "", bc_self;
			mes "[艾尔瓦尔骑士]";
			mes "很抱歉打扰你。";
			mes "上帝保佑你。";
			close;
		}
		npctalk "艾尔瓦：冒险家？啊。是你，" + .@player_name$ + "。", "", bc_self;
		mes "[艾尔瓦尔骑士]";
		mes "抱歉突然提出要求。";
		mes "我是阿尔伯塔卫队第一骑士团的艾尔瓦骑士。";
		next;
		mes "[艾尔瓦尔骑士]";
		mes "我在骑士团的指挥下，执行着寻找在海龟岛失踪的阿尔伯塔骑士团第二师团的任务。";
		mes "然而，遇到猛烈的风暴后，我来到了一座海龟岛，但它看起来并不像正常的海龟岛。";
		emotion ET_QUESTION, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : What does it mean? It didn't seem like the normal Turtle Island?", bc_self;
		sleep2 1500;
		npctalk "艾尔瓦：很难解释，这显然是一座海龟岛，但我起了鸡皮疙瘩。", "", bc_self;
		next;
		mes "[艾尔瓦尔骑士]";
		mes "我遇到了危险，但有人救了我。";
		next;
		mes "[艾尔瓦尔骑士]";
		mes "当我醒来时，我感受到了从阿尔伯塔港口吹来的海风……我的手里，有两块这样的龟壳。";
		npctalk "艾尔瓦：我不知道是怎么做到的，但我知道我好不容易才逃过一劫。", "", bc_self;
		next;
		mes "[艾尔瓦尔骑士]";
		mes "我现在只有一件。";
		mes "我的朋友可能还有另一件。不，我的意思是他一定还有。";
		next;
		if (select( "你的朋友遇到麻烦了吗？", "这令人难以置信。" ) == 2) {
			emotion ET_PROFUSELY_SWAT;
			mes "[艾尔瓦尔骑士]";
			mes "我明白。 Even for me, I am bewildered, but please hear me out.我认为我的朋友有危险";
		}
		else {
			emotion ET_PROFUSELY_SWAT;
			mes "[艾尔瓦尔骑士]";
			mes "是的，是关于我朋友的。 Sorry for such a long story, just a little more, hear me out.";
		}
		next;
		npctalk "莱芬：我是朱诺老师的莱皮尔。", "", bc_self;
		mes "[艾尔瓦尔骑士]";
		mes "我把这些作品展示给我的朋友 ^0000CDLeiphen^000000。";
		mes "他表现出极大的兴趣。 ^0000CD他说这是用只生活在海龟岛上的海龟的壳制成的。";
		next;
		mes "[艾尔瓦尔骑士]";
		mes "当我把碎片递给他后......";
		mes "我正在看这些碎片的朋友莱芬突然消失了。";
		npctalk "艾尔瓦：我亲眼所见。就在这里。", "", bc_self;
		next;
		mes "[艾尔瓦尔骑士]";
		mes "事情发生在^FF0000半天前^000000。";
		mes "与此同时，我联系了朱诺大学，去了海龟岛，但还没有取得任何成果……我希望能找到线索，弄清楚莱芬失踪的去向。";
		next;
		mes "[艾尔瓦尔骑士]";
		mes "" + .@player_name$ + "，请帮助我们。你能帮我找到我的朋友吗？";
		mes "这篇文章可能是一个线索。请看一下。";
		next;
		select("请告诉我你的朋友长什么样。");
		mes "[艾尔瓦尔骑士]";
		mes "^0000CD他戴着眼镜^000000，留着蓝色短发。 ^0000CD他的脸就像一个学者^000000所以你应该能够认出他。";
		next;
		if (select( "给我看看那件作品。让我看看。", "抱歉，我很忙。" ) == 2) {
			npctalk "艾尔瓦：莱芬，我的朋友……请注意安全。", "", bc_self;
			mes "[艾尔瓦尔骑士]";
			mes "很抱歉打扰你。";
			mes "上帝保佑你。";
			close;
		}
		if (checkweight(25315,1) == 0) {
			mes "- ^424242E停止将作品移交。^000000 -";
			next;
			mes "[艾尔瓦尔骑士]";
			mes "对不起，" + .@player_name$ + "。你已经拥有太多东西了。我想现在很难找到我的朋友了。";
			next;
			mes "[艾尔瓦尔骑士]";
			mes "你能稍微清理一下你的库存吗？我会在这里等你。";
			close;
		}
		mes "- ^424242我抓住了骑士递过来的棋子。龟壳上刻有一片小叶子。这是一块笨重的东西，但不知何故感觉很温暖。^000000 -";
		next;
		mes "- ^424242我盯着这幅作品看了一会儿，但突然我的脑海里似乎出现了一些东西。突然一阵风吹过，我的视线变得更暗。^000000 -";
		next;
		emotion ET_KEK;
		npctalk "Aylvar：呃，和以前一样的风。" + .@player_name$ + "，你还好吗？", "", bc_self;
		mes "- ^424242EAylvar的声音越来越小，我感到头晕。它开始闻起来像湿粘土......^000000 -";
		ill_turtle = 1;
		setquest 16096;	// To the unknown tortoise island
		close2;
		getitem 25315,1;	// Piece_Of_Shell
		warp "tur_d03_i",132,187;
		end;
	}
	if (ill_turtle < 11) {
		mes "[艾尔瓦尔骑士]";
		mes "" + .@player_name$ + "！哦，你没事吧！我……担心。莱芬之后，" + .@player_name$ + "，你也消失了，我真的很担心。";
		sleep2 500;
		if (ill_turtle > 5) {
			unittalk .@account_id, "" + .@player_name$ + " : It's ok, Archeologist Leiphen's location seems to be where I went.", bc_self;
			sleep2 1000;
			npctalk "艾尔瓦：真的吗？哦。莱芬……！", "", bc_self;
		}
		else {
			unittalk .@account_id, "" + .@player_name$ + " : I am ok. I found Archeologist Leiphen.", bc_self;
			sleep2 1000;
			npctalk "艾尔瓦：真的吗？好的！莱芬……！", "", bc_self;
		}
		next;
		mes "[艾尔瓦尔骑士]";
		mes "你又要回去寻找莱芬吗？";
		npctalk "艾尔瓦：我有办法去那里吗？", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : I think it's hard for you to go there.", bc_self;
		next;
		if (select( "让我再去那里一次。", "我稍后会去那里。" ) == 2) {
			mes "[艾尔瓦尔骑士]";
			mes "请救救莱芬。";
			mes "如果我能去那里，我会亲自救他。";
			close;
		}
		mes "[艾尔瓦尔骑士]";
		mes "谢谢。太感谢了。";
		mes "请救救莱芬。";
		next;
		mes "- ^424242正如在场的女孩告诉我的那样，我挤压了那块龟壳，我感觉到风再次吹动了我的头发。^000000 -";
		next;
		npctalk "艾尔瓦：" + .@player_name$ + "，请小心！", "", bc_self;
		mes "- ^424242在我的眼睛完全变黑之前，我的脸颊感受到了来自洞穴的凉爽空气......^000000 -";
		close2;
		warp "tur_d03_i",132,187;
		end;
	}
	if (ill_turtle == 11) {
		mes "[艾尔瓦尔骑士]";
		mes "你好" + .@player_name$ + "。我听过莱芬的每一个故事。";
		mes "我很担心，因为他又去了那里。他说知道了那个地方的秘密之后他就会回来。";
		next;
		mes "[艾尔瓦尔骑士]";
		mes "不仅是莱芬，还有一个名叫纳林的孩子……你也帮助过他。你是一位伟大的冒险家。";
		mes "你还去那里吗？";
		next;
		if (select( "是的。我要去那里。", "现在不行。" ) == 2) {
			emotion ET_SURPRISE;
			mes "[艾尔瓦尔骑士]";
			mes "哦，既然你又要去那里，请确保莱芬也没事。";
			ill_turtle = 12;
			setquest 16114;	// Talk with Aylvar
			completequest 16114;	// Talk with Aylvar
			close;
		}
		mes "[艾尔瓦尔骑士]";
		mes "请你再回来吧" + .@player_name$ + ".";
		mes "路上，请确保莱芬一切顺利。";
		ill_turtle = 12;
		setquest 16114;	// Talk with Aylvar
		completequest 16114;	// Talk with Aylvar
		close2;
		warp "tur_d03_i",132,187;
		end;
	}
	npctalk "Aylvar：他是一个把研究看得比自己更重要的人，所以我想和他保持更亲密的关系。", "", bc_self;
	mes "[艾尔瓦尔骑士]";
	mes "很高兴再次见到你。我已经将情报报告给了骑士团，现在的工作就是支援莱芬的研究。";
	mes "你还去那里吗？";
	next;
	if (select( "是的。我要去那里。", "现在不行。" ) == 2) {
		mes "[艾尔瓦尔骑士]";
		mes "当我听到他的故事时，我也想去那里......但我不能按照他的解释去做。我很伤心。";
		close;
	}
	mes "[艾尔瓦尔骑士]";
	mes "请再次回来，" + .@player_name$ + ".";
	mes "如果你找到莱芬，请确保他正在吃东西。";
	close2;
	emotion ET_KEK;
	warp "tur_d03_i",132,187;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 0 && BaseLevel > 149" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 11" );
	end;
}


tur_d03_i,217,73,0	warp	illtur03_04	 2,2,tur_d04_i,99,186
tur_d04_i,99,191,0	warp	illtur04_03	 2,2,tur_d03_i,217,82

tur_d03_i,132,194,3	script	Portal#illtur02	4_ENERGY_RED,{
	if (ill_turtle < 11) {
		mes "- ^424242门外一片漆黑，似乎什么都不存在。黑色的天空前，浮现出一丝红色的霞光。出现了一位看上去很紧张的女孩。^000000 -";
		next;
		npctalk "女孩：这篇文章会对你有帮助。抓紧。", "女孩#illtur01", bc_self;
		mes "[女孩]";
		mes "……就是这个地方。";
		mes "绝望、绝望、有毒。";
		next;
		mes "- ^424242这是一个令人费解的回答，但可能会有所帮助。正如女孩所说，我抓住了乌龟壳。^000000 -";
		next;
		if (select( "回到艾伯塔省。", "留在这里。" ) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I have something to do here.", bc_self;
			mes "[女孩]";
			mes "……不回去吗？";
			close;
		}
		npctalk "女孩：是的。只是... 走吧。", "女孩#illtur01", bc_self;
		mes "- ^424242咸咸的风的味道掀起了我的衣服下摆。你可以听到艾伯塔港的海浪和海鸥的声音......^000000 -";
		close2;
		warp "alberta",219,31;
		end;
	}
	if (isbegin_quest(16115) == 0) {
		mes "- ^424242纳林看不见这道红光。它似乎就这样消失了。^000000 -";
		next;
		mes "- ^424242如果我不回来，她就会忘记。就在我走进光亮之前，纳林的声音从我身后响起。^000000 -";
		next;
		mes "[这里]";
		mes "我会记得...回来吧。请。兄弟...！";
		next;
		if (select( "点头，前往艾伯塔省。", "点头然后转身。" ) == 2) {
			mes "- ^424242微笑着转身，握着双手的娜琳惊讶地看了过来。^000000 -";
			next;
			mes "[这里]";
			mes "啊？不回去吗？";
			next;
			unittalk getcharid(3), "" + strcharinfo(0) + " : Seems like you still need me. Did you call me? I didn't hear clearly, can you tell me again?", bc_self;
			mes "[这里]";
			mes "嘿！";
			setquest 16115;	// Talk with girl
			completequest 16115;	// Talk with girl
			close;
		}
		mes "- ^424242我点点头，回想起我现在珍藏在心里的那块笨重的东西。港口的海风吹过耳边……^000000 -";
		setquest 16115;	// Talk with girl
		completequest 16115;	// Talk with girl
		close2;
		warp "alberta",219,31;
		end;
	}
	mes "- ^424242现在我站在熟悉的光芒面前。我向纳琳轻轻挥了挥手，她闭上了眼睛，双手合十。^000000 -";
	next;
	mes "- ^424242两手空空，我想起了心里留下的那块笨重而温暖的碎片。^000000 -";
	next;
	if (select( "返回艾伯塔省。", "留在这里。" ) == 2) {
		mes "- ^424242微笑着转身，握着双手的娜琳惊讶地看了过来。^000000 -";
		next;
		mes "[这里]";
		mes "啊？不回去吗？";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Seems like you still need me. Did you call me? I didn't hear clearly, can you tell me again?", bc_self;
		mes "[这里]";
		mes "干草！";
		close;
	}
	mes "- ^424242我会再回来的。我将双手放在胸前。^000000 -";
	next;
	mes "- ^424242意识渐渐远去，阿尔伯塔港咸咸的、略带鱼腥味的味道让我的鼻子发痒。^000000 -";
	close2;
	warp "alberta",219,31;
	end;
}

tur_d03_i,139,186,3	script	Girl#illtur01	4_F_NARIN,{
	if (checkweight(1201,1) == 0) {
		mes "[女孩]";
		mes "你背着这么重的包做什么？清除一些。";
		close;
	}
	if (ill_turtle == 0)
		end;

	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	if (ill_turtle == 1) {
		mes "[女孩]";
		mes "又是……陌生人。";
		mes "然后你又把那个带来了。";
		npctalk "女孩：那件。", "", bc_self;
		next;
		emotion ET_PROFUSELY_SWAT, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : Who are you? This piece did something? Where am I? How did I get here?", bc_self;
		mes "[女孩]";
		mes "你有很多疑问，但没必要知道。";
		next;
		npctalk "女孩：你不需要知道。你不应该在这里。有些事情你不应该知道。", "", bc_self;
		mes "[女孩]";
		mes "但是^0000CD这里有人像你^000000。一个不应该出现在这里的人。";
		mes "和^0000CD蓝发学者^000000一起回去。你认识他吗？";
		next;
		select( "我是来找他的。", "你认识考古学家莱芬吗？" );
		mes "[女孩]";
		mes "好的。我不知道他的名字和他在哪里，但我可以猜测。";
		mes "^0000CD有两个位置^000000。去找他并把他带走。并且不要回来。";
		next;
		switch( select( "好的，但我有一些问题。", "我怎么相信你？", "让我知道回去的路。" ) ) {
		case 1:
			unittalk .@account_id, "" + .@player_name$ + " : Who are you? How do you know him? Where am I?", bc_self;
			mes "[女孩]";
			mes "你将会永远离开。无需知道。";
			next;
			specialeffect EF_DETECT3;
			sleep2 1000;
			specialeffect2 EF_DETECT3;
			specialeffect2 EF_CIRCLEPOWER8;
			sleep2 500;
			unittalk .@account_id, "" + .@player_name$ + " : Uh, what was that??", bc_self;
			mes "[女孩]";
			mes "一个能暂时保护你的咒语。";
			mes "它会跟着你。好奇害死猫。不清楚的事情就不要去探究。不要回头看，也不要在背后议论别人。";
			next;
			mes "[女孩]";
			mes "^FF0000不要担心您可能呼吸异常。^000000";
			unittalk .@account_id, "" + .@player_name$ + " : What do you mean?", bc_self;
			ill_turtle = 2;
			erasequest 16096;	// To the unknown tortoise island
			setquest 16097;	// Stranger on Turtle Island 1
			setquest 16098;	// Stranger on Turtle Island 2
			setquest 16099;	// Stranger on Turtle Island 3
			close;
		case 2:
			emotion ET_THINK;
			mes "[女孩]";
			mes "我不知道。我不知道你从哪里来，我怎么知道？";
			next;
			mes "[女孩]";
			mes "然而，那扇空门……可能有一些你可能知道的东西。";
			next;
			mes "- ^424242少女向自己所站的后方看了一眼。仔细一看，黑洞前方似乎​​漂浮着一些淡红色的东西。我们去看看吧。^000000 -";
			close;
		case 3:
			emotion ET_THINK;
			mes "[女孩]";
			mes "......";
			next;
			mes "[女孩]";
			mes "回去。这里很危险。";
			next;
			mes "——《<<CLR0>>>少女简短地说了一声，就不再说话了。她看起来很悲伤......^000000 -";
			close;
		}
	}
	if (ill_turtle < 8) {
		mes "[女孩]";
		mes "……你，还活着吗？";
		next;
		mes "[女孩]";
		mes "在遇到危险之前，找到你要找的人并离开。";
		close;
	}
	if (ill_turtle == 8) {
		mes "[女孩]";
		mes "你很安全。你们两个。";
		mes "...抱歉给您带来危险。";
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : It's ok, Professor.", bc_self;
		sleep2 2000;
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		emotion ET_SWEAT, getnpcid(0,"Archeologist Leiphen#illtur01");
		npctalk "考古学家莱芬：……哦，我以为我要死了。", "考古学家莱芬#illtur01", bc_self;
		next;
		mes "[女孩]";
		mes "然后，回去吧。到你来的地方。";
		mes "并忘记一切。";
		next;
		npctalk "考古学家莱芬：我怎么能忘记这个地方！？", "考古学家莱芬#illtur01", bc_self;
		mes "[考​​古学家莱芬]";
		mes "啊？你是什​​么意思？我会再回来的。";
		mes "直到我发现这里所有的秘密。";
		next;
		mes "[女孩]";
		mes "为什么你无视我的警告？傲慢的。";
		emotion ET_HNG, getnpcid(0,"Archeologist Leiphen#illtur01");
		npctalk "考古学家莱芬：我是考古学教授。", "考古学家莱芬#illtur01", bc_self;
		mes "你可能是一名教授，但这并不意味着你有权利在这里走动。";
		next;
		mes "[考​​古学家莱芬]";
		mes "……你知道什么吗？";
		mes "请告诉我。我在哪里？这里刚刚发生了什么？";
		npctalk "女孩：你不用知道，反正你要走……", "", bc_self;
		next;
		if (select( "别再说了。", "你才是傲慢的人。" ) == 2) {
			mes "[女孩]";
			mes "停止？我没有说错什么。你很快就会离开并忘记一切。你永远不会回来......对吧？";
		}
		else {
			npctalk "女孩：你说什么？我就是那个嚣张的人？", "", bc_self;
			mes "[女孩]";
			mes "......美好的。傲慢与否。自由思考。反正我不在乎。";
		}
		next;
		mes "[女孩]";
		mes "我之前说过……但没有人回来。我不期望任何人这样做。";
		npctalk "女孩：如果你没有期待，那就没什么可失望的。", "", bc_self;
		next;
		emotion ET_QUESTION, .@account_id;
		sleep2 1000;
		emotion ET_THINK, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : You mean, you want us to return home.", bc_self;
		mes "[女孩]";
		mes "……没有人回来。最好不要来这里。充满了危险。";
		next;
		emotion ET_SURPRISE, getnpcid(0,"Archeologist Leiphen#illtur01");
		mes "[考​​古学家莱芬]";
		mes "你想要那样，但仍然有人会回到这里。";
		sleep2 1000;
		emotion ET_ANGER;
		npctalk "女孩：……想怎样就怎样。", "", bc_self;
		next;
		mes "[女孩]";
		mes "呼…………";
		next;
		mes "[女孩]";
		mes "好的。美好的。让我告诉你。答应我你听完就回去。我不想说太多。";
		next;
		npctalk "女孩：我只是告诉你，因为你太执着了。", "", bc_self;
		mes "[女孩]";
		mes "...请稍等一下。我需要时间清晰地思考。已经好久没说话了......";
		next;
		npctalk "考古学家莱芬：那么让我在这里四处看看。", "考古学家莱芬#illtur01", bc_self;
		sleep2 1000;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		emotion ET_OHNO, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : Even though it's so dangerous, you can't resist curiosity... Be careful anyway.", bc_self;
		mes "[女孩]";
		mes "过一会儿我再和你谈谈。";
		ill_turtle = 9;
		erasequest 16104;	// A long-forgotten story
		setquest 16116;	// Continuous story
		close;
	}
	if (ill_turtle == 9) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;

		npctalk "考古学家莱芬：呃，怪物！", "考古学家莱芬#illtur01", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : Ugh! You are not a kid. It's dangerous here. Stop wandering around!", bc_self;
		mes "[这里]";
		mes "谢谢您的等待...";
		mes "最好先开始自我介绍。我是纳林。 ^0000CD老幽灵。^000000";
		next;
		npctalk "考古学家莱芬：O..老GGhost？", "考古学家莱芬#illtur01", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : ......", bc_self;
		mes "[这里]";
		mes "看来你以前经历过很多事情。我看你能正常说话。";
		mes "像教授这样的普通人根本看不到我们。";
		next;
		mes "[这里]";
		mes "这里的所有居民都被怨恨的重担所束缚。当你死了，痴迷于你迫切想要的东西时，你总是会在没有意识到的情况下做同样的事情。";
		npctalk "Narin：我很幸运，所以有时我可以出去，但最终我会回去重复。", "", bc_self;
		next;
		mes "[这里]";
		mes "我们讨厌生活。那些不受怨恨负担束缚的人，那些呼吸怪异的人。我们想听到你的最后一口气。";
		mes "但除非你认识我们，否则我们也无法认识你。这是一件好事。";
		next;
		mes "[这里]";
		mes "它不会持续很长时间。在这里呆的时间越长，你们就越能注意到对方。逐步地。";
		mes "你们突然意识到。这很奇怪。 ……那么，就结束了。";
		next;
		mes "[这里]";
		mes "教授拿到了我的东西，所以我马上就能认出来。通常我不会知道。";
		npctalk "考古学家莱芬：纳林的东西……？", "考古学家莱芬#illtur01", bc_self;
		sleep2 1000;
		npctalk "Narin：是的，龟壳，我的雕塑。", "", bc_self;
		next;
		mes "[考​​古学家莱芬]";
		mes "啊，我就知道了……！！";
		mes "是你拯救了艾尔瓦。谢谢你帮助我的朋友！";
		next;
		npctalk "纳林：我是为我自己做的。无需说谢谢。", "", bc_self;
		mes "[这里]";
		mes "我想这么做。  我的痴迷是...";
		mes "^0000CDU我不想让任何人死在这里。我要拯救所有的生命。^000000……";
		mes "就是这样。";
		next;
		emotion ET_ANGER;
		mes "[这里]";
		mes "噢……真的，这是一个多么愚蠢的故事。很难继续说话。";
		mes "就让我一个人呆一会儿吗？抱歉花了这么长时间。";
		next;
		mes "[考​​古学家莱芬]";
		mes "没关系。我会离开你一会儿。" + .@player_name$ + "，我们一起吧。";
		emotion ET_OK, .@account_id;
		ill_turtle = 10;
		erasequest 16116;	// Continuous story
		setquest 16117;	// Continuous story 2
		close2;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		end;
	}
	if (ill_turtle == 10) {
		mes "[这里]";
		mes "谢谢您的等待。我现在很好。让我说完。";
		next;
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		emotion ET_DELIGHT, getnpcid(0,"Archeologist Leiphen#illtur01");
		npctalk "考古学家莱芬：我准备好了。这里有很多有趣的事情。", "考古学家莱芬#illtur01", bc_self;
		mes "[这里]";
		mes "这又不是第一次了，有人来了。这是一个罕见的事件。当我第一次见到某人时，我就想起了我想要的东西。";
		next;
		mes "[这里]";
		mes "那人吓得要死，但他还活着，离开了这个地方。";
		mes "在那之后……我可以多呆一会儿。";
		next;
		mes "[这里]";
		mes "已经有一段时间了，我还没有失去理智。我没有被怨恨冲昏头脑，也没有失去理智和情感。";
		next;
		mes "[这里]";
		mes "所以我想拯救所有的生命。那些涌入的人，甚至那些永远被重担困住的人。";
		mes "我意识到我救下的所有人都回到了他们来的地方。";
		npctalk "纳林：我独自一人知道并感受我是谁，我在做什么。", "", bc_self;
		next;
		mes "[这里]";
		mes "这……这很难。就连我也羡慕那些被这个重担困住的人。但是...我无法将其关闭。那些处于危险之中的人。";
		mes "....";
		mes "但我不想抱希望。如果你希望……你可能会被背叛。";
		npctalk "纳林：……我的故事到此结束。现在把碎片给我，你们两个就可以回去了。", "", bc_self;
		next;
		mes "[这里]";
		mes "哦，我差点忘了。让我再次对你施展我的咒语。它很弱，所以不会持续太久。";
		mes "趁一切结束之前赶紧出去吧。";
		specialeffect EF_DETECT3;
		sleep2 1000;
		specialeffect2 EF_DETECT3;
		specialeffect EF_DETECT3, AREA, "Archeologist Leiphen#illtur01";
		specialeffect2 EF_CIRCLEPOWER8;
		specialeffect EF_CIRCLEPOWER8, AREA, "Archeologist Leiphen#illtur01";
		next;
		if (select( "你一个人很难受。", "我不会回去。" ) == 2) {
			mes "[这里]";
			mes "......我没有告诉你长篇故事来听这个......";
			mes "请不要关心我......";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : Please, we do care. I will be glad when I get back again. I will be sad if you are cold when I come here again.", bc_self;
			mes "[考​​古学家莱芬]";
			mes "" + .@player_name$ + "，原来你说得很好。";
		}
		else {
			mes "[这里]";
			mes "你在说什么？！我说你听完我的故事就回去吧……！";
			mes "我不想再担心了！";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : Please, we do care. Archeologist Leiphen and myself will meet your expectations.", bc_self;
			mes "[考​​古学家莱芬]";
			mes "是的。这就是我想说的。";
		}
		next;
		mes "[这里]";
		mes "你是什​​么意思...？";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : We will come back. Do not feel alone.", bc_self;
		mes "[考​​古学家莱芬]";
		mes "让我们帮助像你一样的其他灵魂，纳林，解决自己的问题。";
		next;
		mes "[这里]";
		mes "哦真的吗...";
		emotion ET_THINK;
		mes "……不，这是巧合。他们是，不像我。";
		next;
		mes "[考​​古学家莱芬]";
		mes "我们会看到。正确的？";
		unittalk .@account_id, "" + .@player_name$ + " : Of course. And if it doesn't work, we'll come back to try again and again.", bc_self;
		next;
		npctalk "纳林：不，不要。这里非常危险。不要试图回来。", "", bc_self;
		mes "[这里]";
		mes "没关系。我会忘记你们两个。这里所有的灵魂都是如此。";
		mes "我可能记得长一点。但我最终还是忘记了。";
		next;
		emotion ET_SURPRISE, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : But you still remember the turtle shell pieces. You can remember again.", bc_self;
		next;
		mes "[考​​古学家莱芬]";
		mes "我们可以猜测一个事实。所有失去的记忆都在纳林的潜意识里。";
		unittalk .@account_id, "" + .@player_name$ + " : You said you want to save all life. If you haven't given up on that wish, you can surely remember it.", bc_self;
		next;
		unittalk .@account_id, "" + .@player_name$ + " : If you forget us, we will remind you. As much as you forget.", bc_self;
		sleep2 2000;
		unittalk .@account_id, "" + .@player_name$ + " : I'll help you when you feel lonely. You won't have to forget everything.", bc_self;
		mes "[考​​古学家莱芬]";
		mes "我会回来的。为了研究，也为了你，纳林。";
		next;
		mes "[这里]";
		mes "真的……真的吗？你要回到这里来找我吗？";
		next;
		mes "[这里]";
		mes "我不需要……独自一人……？";
		next;
		select( "我不会丢下你一个人的。", "别担心。", "我保证。", "我会回来的。" );	// note: the selection doesn't change the dialog
		mes "[这里]";
		mes ".........";
		next;
		mes "[这里]";
		mes "......谢谢...";
		next;
		mes "[这里]";
		mes "谢谢...真的...";
		next;
		delitem 25315, countitem(25315);	// Piece_Of_Shell
		specialeffect2 EF_CIRCLEPOWER2;
		specialeffect EF_CIRCLEPOWER2, AREA, "Archeologist Leiphen#illtur01";
		sleep2 500;
		emotion ET_SURPRISE, getnpcid(0,"Archeologist Leiphen#illtur01");
		mes "[考​​古学家莱芬]";
		mes "胡？啊？它就这样消失了。这" + getitemname(25315) + ".";
		mes "突然从我手中...就像融化了一样。";
		next;
		mes "[这里]";
		mes "它有我的愿望。现在...它不需要存在。";
		npctalk "考古学家莱芬：这是什么意思？", "考古学家莱芬#illtur01", bc_self;
		next;
		emotion ET_ANGER;
		mes "[这里]";
		mes "……我、我也不知道具体原因……只是可能是这样。";
		next;
		mes "[这里]";
		mes "……哦，对了。在这里...我把这个给你。在这里，你也是教授。";
		unittalk .@account_id, "" + .@player_name$ + " : What's this?", bc_self;
		npctalk "考古学家莱芬：它......它是一个" + getitemname(25271) + "！", "Archeologist Leiphen#illtur01", bc_self;
		next;
		npctalk "纳林：……是吗？事实上，我拥有它是因为它很漂亮。", "", bc_self;
		mes "[这里]";
		mes "这是承诺的标志。我会努力记住你们两个。所以来吧...来找我吧。";
		mes "明天，后天……我会等……兄弟和教授。";
		next;
		mes "[这里]";
		mes "至于其他人……你说过你会帮助他们。我会告诉你如何做。你可以如何帮助...";
		next;
		mes "[这里]";
		mes "^0000CD听他们想要什么。兄弟，即使你看起来很微不足道，也要做一些他们会高兴的事情。^000000";
		mes "拜托...也许有一天...";
		next;
		select("不用担心。我会。");
		mes "[这里]";
		mes ":)...";
		next;
		mes "[这里]";
		mes "我、我能一个人呆到现在，是因为有一天能再见到你们两个吗？";
		emotion ET_OK;
		mes "我会...记住...请...回来。";
		next;
		mes "[考​​古学家莱芬]";
		mes "我会一直待在这里，直到找到所有的秘密。";
		mes "不用担心。" + .@player_name$ + "我自己也不会忘记你纳林。";
		unittalk .@account_id, "" + .@player_name$ + " : We must remember.", bc_self;
		ill_turtle = 11;
		erasequest 16117;	// Continuous story 2
		setquest 16105;	// A short break, and a promise
		getitem 25271,5;	// IllusionStone
		getexp 2880000,1920000;
		close2;
		npctalk "考古学家莱芬：好的，再见！", "考古学家莱芬#illtur01", bc_self;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		end;
	}
	switch( checkquest(16105,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[这里]";
		mes "我让你回来……但你今天必须离开。再待在这里就很危险了。";
		mes "保护法术是有限制的。";
		next;
		mes "[这里]";
		mes "这一天结束了，你们两个待在一起。我会给你一个新的咒语。";
		mes "如果我又忘记了...请我会尽力记住...";
		close;
	case 2:
		erasequest 16105;	// A short break, and a promise
		break;
	}
	switch( checkquest(16108,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[这里]";
		mes "兄弟……你还在吗？一天后咒语就会消失，请天亮后回来。";
		next;
		mes "[这里]";
		mes "即使我忘记了你兄弟，也请不要走开……求你了。";
		close;
	case 2:
		erasequest 16108;	// A memory that should not be forgotten - Cooldown
		break;
	}
	switch( isbegin_quest(16106) ) {
	case 0:
		mes "[这里]";
		mes "又是……陌生人。";
		mes "回去。很危险...";
		next;
		mes "- ^424242她不记得了，但即使她不记得，她也和其他鬼不同。^000000 -";
		next;
		mes "[这里]";
		mes "……你为什么要这样嘟囔呢？";
		mes "回去。你不属于这里。";
		next;
		if (select( "她想要什么...", "现在回去吧。" ) == 2) {
			mes "- ^424242我们现在回去吧。看来教授还没有发生什么事。我稍后回来。^000000 -";
			next;
			mes "[这里]";
			mes "回去吧，陌生人。并且永远不会回来。";
			close;
		}
		mes "- ^424242...她要我和考古学家莱芬一起离开。到时候她就会记得...";
		mes "教授马上就会回来。我们去找他吧。^000000 -";
		setquest 16106;	// A memory that should not be forgotten 1
		close;
	case 1:
		mes "[这里]";
		mes "回去。 ……你不应该在这里。";
		next;
		mes "- ^424242...她要我和考古学家莱芬一起离开。到时候她就会记得...";
		mes "教授马上就会回来。我们去找他吧。^000000 -";
		close;
	case 2:
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		mes "[考​​古学家莱芬]";
		mes "我又来到这里了。嗯，每天。";
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : I am here too. Are you doing well?", bc_self;
		next;
		mes "[这里]";
		mes "......";
		next;
		mes "[这里]";
		mes "............";
		next;
		mes "[这里]";
		mes ".................";
		next;
		mes "[这里]";
		mes "......哇..";
		unittalk .@account_id, "" + .@player_name$ + " : Hey? What's going on?", bc_self;
		next;
		emotion ET_SWEAT;
		mes "[这里]";
		mes "……又……又忘记了……";
		unittalk .@account_id, "" + .@player_name$ + " : It's ok. We are here again.", bc_self;
		next;
		npctalk "Narin：从我记事起我就一直在等待……", "", bc_self;
		mes "[这里]";
		mes "谢谢你...嗯，让我对你施咒。今天你也去其他人那里吗？";
		next;
		mes "[这里]";
		mes "希望你们两个都平安……";
		specialeffect EF_DETECT3;
		sleep2 500;
		specialeffect2 EF_DETECT3;
		specialeffect EF_DETECT3, AREA, "Archeologist Leiphen#illtur01";
		specialeffect2 EF_CIRCLEPOWER8;
		specialeffect EF_CIRCLEPOWER8, AREA, "Archeologist Leiphen#illtur01";
		next;
		mes "[这里]";
		mes "这是承诺的标志。教授和兄弟。我很高兴你来了。";
		mes "我会等待明天。";
		npctalk "考古学家莱芬：明天见，纳林。你呢。", "考古学家莱芬#illtur01", bc_self;
		erasequest 16106;	// A memory that should not be forgotten 1
		erasequest 16107;	// A memory that should not be forgotten 2
		setquest 16108;	// A memory that should not be forgotten - Cooldown
		getitem 25271,1;	// IllusionStone
		getexp 1200000,1000000;
		close2;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 8" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 9" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 10" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16108,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && isbegin_quest(16106) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && isbegin_quest(16106) == 0 && checkquest(16105,PLAYTIME) == -1 && checkquest(16108,PLAYTIME) == -1" );
	end;
}

tur_d03_i,136,187,5	duplicate(dummy_cloaked_npc)	Archeologist Leiphen#illtur01	2_M_ALCHE


tur_d03_i,80,180,1	script	Impatient Man#illtur	4_M_URGENT_MAN,{
	if (ill_turtle == 2) {
		.@account_id = getcharid(3);
		.@player_name$ = strcharinfo(0);

		mes "[不耐烦的男人]";
		mes "我失去了她。我失去了她。我的宝贝。我的漂亮宝贝。你在哪里？我的宝贝。她叫什么名字？我的女儿。女儿？我的宝贝。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Hey, hello?", bc_self;
		mes "- ^424242正如她告诉我的，还有其他人......但他看起来不像考古学家莱芬。^000000 -";
		next;
		mes "[不耐烦的男人]";
		mes "是谁？我的宝贝，你在哪里？我的女儿？我的女儿？哈哈哈哈。我失去了她。我失去了她";
		next;
		npctalk "我的宝贝走了……我的宝贝。我可爱的宝贝。", "", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : Did he lose his baby...?", bc_self;
		select( "您在寻找您的宝宝吗？", "需要我的帮助吗？" );
		npctalk "我的宝贝，我失去了她。我失去了我的孩子。你在哪里？", "", bc_self;
		mes "[不耐烦的男人]";
		mes "不。^FF0000你不能^000000。";
		next;
		npctalk "我的宝贝？婴儿？我迷失了，迷失了，我的女儿……宝贝。哪里……哪里？", "", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : ...Excuse me?", bc_self;
		mes "[不耐烦的男人]";
		mes "没有。^FF0000没有。^000000 找不到她。";
		next;
		mes "[不耐烦的男人]";
		mes "不^FF0000不可能。我的女儿。^000000 宝贝...宝贝？不，哈，哈^FF0000哈哈。不，哈，哈。^000000我的^FF0000漂亮宝贝，^000000，宝贝。我的^FF0000漂亮宝贝。编号^000000 编号";
		ill_turtle = 3;
		erasequest 16097;	// Stranger on Turtle Island 1
		questinfo_refresh();
		next;
		unittalk .@account_id, "" + .@player_name$ + " : He's...a strange man.", bc_self;
		mes "- ^424242很难与...^000000沟通 -";
		mes "- ^424242让我检查一下另一点。我们走吧...^000000 -";
		close;
	}
	if (ill_turtle == 3) {
		mes "[不耐烦的男人]";
		mes "^FF0000不，我的女儿。我的^000000漂亮宝贝。不。失去了，^FF0000失去了她^000000。丢失的。呜呼...我的^FF0000漂亮...宝贝..找不到^000000找不到^FF0000找不到^000000找不到...^FF0000找到^000000......";
		if (!.talk)
			donpcevent "Impatient Man#illtur::OnTalk";
		close;
	}
	mes "[不耐烦的男人]";
	mes "我失去了她。我失去了她。我的宝贝。我的漂亮宝贝。你在哪里？我的宝贝。她叫什么名字？我的女儿。女儿？我的宝贝。";
	next;
	mes "[不耐烦的男人]";
	mes "是谁？我的宝贝……谁？";
	if (!.talk)
		donpcevent "Impatient Man#illtur::OnTalk";
	close;

OnTalk:
	.talk = 1;
	switch( rand(2) ) {
	case 0:
		npctalk "我找不到。我的宝贝。走了。我的……可爱的女儿。";
		sleep 3000;
		npctalk "我找不到。走了……我的女儿，我的……女儿？我的？婴儿...";
		break;
	case 1:
		npctalk "我的宝贝，我失去了她。我失去了我的孩子。你在哪里？";
		sleep 3000;
		npctalk "我的宝贝？婴儿？我迷失了，迷失了，我的女儿……宝贝。哪里……哪里？";
		break;
	}
	.talk = 0;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 2" );
	end;
}


tur_d03_i,235,187,7	script	Susceptible Soldier#	4_M_KEEN_SOLDIER,{
	if (ill_turtle == 3) {
		.@account_id = getcharid(3);
		.@player_name$ = strcharinfo(0);

		mes "[易受影响的士兵]";
		mes "低语……^FF0000咀嚼^000000，咀嚼。 ^FF0000低语^000000...";
		mes "该死的^BDBDBD呃..^000000星期一..^BDBDBD恶魔^000000...";
		next;
		mes "[易受影响的士兵]";
		mes "这一切都是……我的。 ^BDBDBD这一切^000000都可以^BDBDBD成为^000000我的......";
		mes "我的...我珍贵的^BDBDBD宝藏^000000...^FF0000低语^000000...";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Hum... Hey, hello?", bc_self;
		mes "- ^424242有人。他似乎在嘀咕着什么，但我听不清楚。他看起来不像考古学家莱芬^000000 -";
		next;
		mes "- ^424242咬指甲，指尖乱七八糟......^000000 -";
		next;
		npctalk "我的宝藏，如果" + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + " was gone... All, Munch... Muunch....", "Susceptible Soldier#", bc_self;
		mes "[易受影响的士兵]";
		mes "蒙克，蒙克……低语……我的^BDBDBD宝藏^000000...我的^BDBDBD珍贵的^000000宝藏...它是^BDBDBD全部^000000我的...";
		next;
		select( "你见过这个人吗？", "你……还好​​吗？" );
		specialeffect EF_SCREEN_QUAKE;
		mes "[易受影响的士兵]";
		mes "^BDBDBD一个^000000人类？一个^BDBDBDhuuu^000000男人？就不会有^BDBDBD这样的东西^000000!!!!!";
		mes "该死的^BDBDBD你^000000！别^BDBDBD看^000000我^BDBDBD像^000000那样......^BDBDBD别^000000看！";
		next;
		npctalk "蒙克……蒙克，宝藏……我的宝藏……蒙克……蒙克……", "易受影响的士兵#", bc_self;
		sleep2 1500;
		unittalk .@account_id, "" + .@player_name$ + " : Ugh, it'll be difficult to stay much longer. Need to avoid.", bc_self;
		mes "[易受影响的士兵]";
		mes "该死的^BDBDBD它^000000...^BDBDBD该死的^000000它...";
		mes "咀嚼，低声……^FF0000咀嚼^000000，咀嚼...";
		ill_turtle = 4;
		erasequest 16098;	// Stranger on Turtle Island 2
		questinfo_refresh();
		next;
		mes "- ^424242 还有一点。我们走吧...^000000 -";
		close;
	}
	if (ill_turtle == 4) {
		mes "[易受影响的士兵]";
		mes "咀嚼，低声……^FF0000咀嚼^000000，咀嚼。 ^FF0000蒙克^000000...";
		mes "该死的^BDBDBD呃^000000我的..^BDBDBD恶魔^000000...";
		next;
		mes "[易受影响的士兵]";
		mes "都是我的。 ^BDBDBD可能是^000000全部^ BDDBBDmine^000000...";
		mes "我的……我的宝藏。 ^BDBDBD所有^000000...我的...^FF0000咀嚼，咀嚼^000000...";
		if (!.talk)
			donpcevent "Susceptible Soldier#::OnTalk";
		close;
	}
	if (ill_turtle > 10) {
		if (checkweight(1201,1) == 0) {
			mes "[易受影响的士兵]";
			mes "你背着这么重的包做什么？清理一些空间。";
			close;
		}
		if (!.talk)
			donpcevent "Susceptible Soldier#::OnTalk";

		switch( checkquest(16105,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[易受影响的士兵]";
			mes "它是..^BDBDBD它^000000...还活着。 ^BDBDBD它^000000还活着……该死！ ^BDBDBD还活着，^000000还活着？！我是！！！我^BDBDBD死了^000000，死了！！";
			mes "我无法原谅^BDBDBD你^000000！！！我会^BDBDBD找到^000000并^BDBDBD杀死^000000你们所有人！！ ^FF0000咀嚼^000000...咀嚼...";
			next;
			mes "- ^424242还是不要靠近为好主意。让我们等一天吧。天亮后，再回来。^000000 -";
			close;
		case 2:
			erasequest 16105;	// A short break, and a promise
			break;
		}

		switch( checkquest(16110,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[易受影响的士兵]";
			mes "哈...哈^BDBDBD呃^000000，我的^BDBDBD宝藏^000000...我的宝藏...";
			mes "最后^BDBDBD我^000000得到^BDBDBD它^000000...最后^BDBDBD我^000000得到...";
			next;
			mes "[易受影响的士兵]";
			mes "你^BDBDBD是谁^000000！？为什么^BDBDBD是^000000你在这里！";
			mes "别看我的^BDBDBD宝藏^000000！ ^BDBDBD我^000000不会让你！！！！！！蒙克，^FF0000蒙克^000000，蒙克...";
			next;
			mes "- ^424242他看起来还不错。 ..好的？就让他这样吧。天亮后回来。^000000 -";
			close;
		case 2:
			erasequest 16110;	// Vain Desire - Cooldown
			break;
		}

		.@quest_16109 = checkquest(16109,HUNTING);
		if (.@quest_16109 == -1)
			.@state = -1;
		else if (.@quest_16109 == 2 && countitem(25316) > 4)
			.@state = 2;

		switch( .@state ) {
		case -1:
			break;
		case 0:
		case 1:
			specialeffect EF_SCREEN_QUAKE;
			mes "[易受影响的士兵]";
			mes "^FF0000我需要更多！！！！！！！！！^000000";
			next;
			mes "[易受影响的士兵]";
			mes "^FF0000我的宝藏...我的复仇...";
			mes "不够！！！^000000";
			next;
			mes "- ^424242我忘记了什么吗？ ^0000CD" + getitemname(25316) + " 5 件 ^424242 和 ^0000CD 杀死 10 个 " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + "。^000000 -";
			close;
		case 2:
			mes "[易受影响的士兵]";
			mes "你得到回报了吗？对于^BDBDBD可怕的^000000怪物？";
			mes "还有我的宝藏...^FF0000咀嚼^000000，咀嚼...你带来了^BDBDBD我的^000000宝藏？";
			next;
			specialeffect EF_SCREEN_QUAKE;
			mes "[易受影响的士兵]";
			mes "^FF0000给我^000000！我的宝藏！";
			next;
			mes "[易受影响的士兵]";
			mes "哈哈...哈哈...哈哈^BDBDBD哈^000000哈......哈哈^BDBDBD哈^000000哈哈哈......";
			mes "它闪闪发光......闪闪发光......它很漂亮，非常漂亮。";
			next;
			mes "[易受影响的士兵]";
			mes "拿这个。我不需要它。";
			mes "我有我的宝藏^BDBDBD现在^000000...它很闪亮...漂亮。";
			next;
			mes "- ^424242作为交换，我拿了" + getitemname(25271) + "。他怎么会沉迷于这些毫无价值的垃圾而没有看到任何真正有价值的东西？^000000 -";
			next;
			mes "- ^424242好吧，这可能只是一个活着的人的想法，" + getitemname(25271) + "是珍贵的。^000000 -";
			delitem 25316,5;	// Shabby_Metal_Chip
			erasequest 16109;	// Vain Desire
			setquest 16110;	// Vain Desire - Cooldown
			getitem 25271,1;	// IllusionStone
			getexp 1200000,1000000;
			close;
		}
		mes "[易受影响的士兵]";
		mes "咀嚼，低声……^FF0000咀嚼^000000，咀嚼。 ^FF0000蒙克^000000...";
		mes "该死的^BDBDBD呃^000000.. mon..^BDBDBD恶魔^000000...";
		next;
		mes "[易受影响的士兵]";
		mes "都是我的。 ^BDBDBD可能是^000000全部^BDBDBD我的^000000...";
		mes "我的……我的宝藏。 ^BDBDBD所有^000000...我的...^FF0000咀嚼，咀嚼^000000...";
		next;
		select( "什么宝物？", "什么怪物？" );	// note: the selection doesn't change the dialog
		mes "[易受影响的士兵]";
		mes "该死的^BDBDBD呃^000000.. mon..^FF0000" + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + "怪物^000000...";
		mes "他们拿走了^BDBDBD我的^000000宝藏^BDBDBDD....我的！！宝藏^000000...！！";
		next;
		mes "[易受影响的士兵]";
		mes "咀嚼，低声……^FF0000咀嚼^000000，咀嚼。";
		mes "蒙克，^FF0000蒙克^000000...低语...";
		next;
		if (select( "让我搜索一下。", "好的。" ) == 2) {
			mes "[易受影响的士兵]";
			mes "是的...它是我的..^BDBDBD呃^000000...我的^BDBDBD宝藏^000000...";
			mes "我无法得到^BDBDBD它^000000...该死的^BDBDBDmon^000000..怪物...";
			mes "蒙克，^FF0000蒙克蒙克^000000...";
			close;
		}
		mes "[易受影响的士兵]";
		mes "你？ ^BDBDBD你^000000要去吗？";
		mes "去，^BDBDBD去^000000得到它！我的^BDBDBD宝藏^000000！你可以从他们那里拿走它！我的^BDBDBD宝藏^000000！";
		next;
		mes "[易受影响的士兵]";
		mes "并回报" + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + "。 ^FF0000复仇^000000...咀嚼...我的^BDBDBD复仇^000000..拜托...";
		mes "消灭 10 个……怪物！蒙克，^FF0000咀嚼咀嚼^000000...把^BDBDBD除掉<<<C​​LR3>>>他们！！！";
		next;
		mes "- ^424242Narin 说，我可以从这里得到一些^0000CD" + getitemname(25316) + "^424242。这对他来说就足够了。 ^0000CD让我准备^424242 5块。^000000 -";
		mes "- ^0000CD我需要消灭^42424210个" + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + "怪物。^000000 -";
		setquest 16109;	// Vain Desire
		close;
	}
	mes "[易受影响的士兵]";
	mes "低语……^FF0000咀嚼^000000，咀嚼。 ^FF0000低语^000000...";
	mes "该死的^BDBDBD呃^000000.. mon..^BDBDBD怪物^000000...";
	next;
	mes "[易受影响的士兵]";
	mes "这一切都是……我的。 ^BDBDBD这一切^000000都可以^BDBDBD成为^000000我的......";
	mes "我的...我珍贵的^BDBDBD宝藏^000000...^FF0000低语^000000...";
	if (!.talk)
		donpcevent "Susceptible Soldier#::OnTalk";
	close;

OnTalk:
	.talk = 1;
	switch( rand(3) ) {
	case 0:
		npctalk "蒙克...蒙克...蒙克...蒙克...";
		sleep 3000;
		npctalk "我的，宝贝……蒙克，无法原谅……";
		break;
	case 1:
		npctalk "我的宝藏，如果" + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + " was gone... All, Munch... Muunch....";
		sleep 3000;
		npctalk "蒙克...蒙克，宝藏...我的宝藏...蒙克...蒙克...";
		break;
	case 2:
		npctalk "复仇...复仇.​​..蒙克...蒙克...蒙克...蒙克...";
		sleep 3000;
		npctalk "我会得到回报..." + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + "... They took my treasure!";
		break;
	}
	.talk = 0;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 3" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16110,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == -1 && checkquest(16110,PLAYTIME) == -1 && checkquest(16109,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16109,HUNTING) == 2 && countitem(25316) > 4" );
	end;
}


tur_d04_i,96,112,1	script	Fragile Woman#illtur	4_F_SLOPPY_WOMAN,{
	disable_items;

	.@char_id = getcharid(0);
	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	if (ill_turtle == 4) {
		mes "- ^424242 哎呀。这肯定不是考古学家莱芬。^000000 -";
		next;
		mes "[脆弱的女人]";
		mes "我饿了。帮我。我好饿。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : I'm glad that I found someone who can speak.", bc_self;
		select( "我能为您提供什么帮助？", "让我帮助您。", "请帮助我。" );
		npctalk "我快饿死了。如果我不吃东西，我就会死。", "", bc_self;
		sleep2 3000;
		npctalk "我饿了。请帮我。请...", "", bc_self;
		mes "[脆弱的女人]";
		mes "我今天、昨天、前天都没有吃饭。";
		mes "我要死了。请帮助我...拜托。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : I'll help. Let me share some food. Are there any animals I can hunt around?", bc_self;
		mes "[脆弱的女人]";
		mes "我要死了。挨饿了。";
		mes "我饿了。我饿死了。";
		next;
		select( "那你想要什么...", "请说清楚！" );
		npctalk "我现在可以吃任何东西了。请给我一些东西。", "", bc_self;
		mes "[脆弱的女人]";
		mes "我今天还没吃饭。昨天我一整天都在挨饿。我的孩子也饿坏了。我丈夫也快饿死了。";
		mes "我要死了。我们都会死。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Haha... I can't communicate... I want to go home.", bc_self;
		mes "- ^424242她告诉我另一个地方，^0000CD另一个^000000点。 ^0000CD龟宫^424242在附近吗？^000000 -";
		ill_turtle = 5;
		erasequest 16099;	// Stranger on Turtle Island 3
		setquest 16100;	// Stranger on Turtle Island 4
		close;
	}
	if (ill_turtle == 7) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Archeologist Leiphen#illtur03" );
		npctalk "考古学家莱芬：是这个地方吗？我来过这里好几次了...", "考古学家莱芬#illtur03", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		unittalk .@account_id, "" + .@player_name$ + " : Yes. Just right here. Hello, are you ok?", bc_self;

		mes "[脆弱的女人]";
		mes "我饿了。我已经饿了很长时间了……我快要死了。拜托，请帮助我。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Well, this is the woman here, Professor Leiphen.", bc_self;
		mes "[考​​古学家莱芬]";
		mes "……嗯……嘿？";
		next;
		npctalk "我饿了。请帮我。我饿了。", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : I thought it would be difficult to communicate... Let's go to the other people?", bc_self;
		mes "[考​​古学家莱芬]";
		mes "......";
		next;
		mes "[考​​古学家莱芬]";
		mes "你现在在跟谁说话？";
		mes "这里除了我们两个人之外没有人。";
		npctalk "我要死了。死。死。", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : ......", bc_self;
		next;
		npctalk "啊哈，我发现了。", "", bc_self;
		cloakonnpcself( "Fragile Woman#illtur" );
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur01";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur01";
		cloakoffnpcself( "Rancorous Ghost#illtur01" );
		mes "[考​​古学家莱芬]";
		mes "那是什么……那……声音……";
		next;
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur02";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur02";
		cloakoffnpcself( "Rancorous Ghost#illtur02" );
		sleep2 800;
		npctalk "我发现了。", "怨恨鬼魂#illtur03", bc_self;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur03";
		cloakoffnpcself( "Rancorous Ghost#illtur03" );
		sleep2 800;
		npctalk "呼吸！", "怨恨鬼魂#illtur04", bc_self;
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur04";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur04";
		cloakoffnpcself( "Rancorous Ghost#illtur04" );
		sleep2 800;
		npctalk "被发现还活着。", "怨恨鬼魂#illtur05", bc_self;
		cloakoffnpcself( "Rancorous Ghost#illtur05" );
		sleep2 800;
		npctalk "抓住！", "怨恨鬼魂#illtur06", bc_self;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur06";
		cloakoffnpcself( "Rancorous Ghost#illtur06" );
		sleep2 800;
		npctalk "杀！", "怨恨鬼魂#illtur07", bc_self;
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur07";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur07";
		cloakoffnpcself( "Rancorous Ghost#illtur07" );
		sleep2 800;
		npctalk "切成碎片！", "怨恨鬼魂#illtur01", bc_self;
		mes "[考​​古学家莱芬]";
		mes "啊啊！这是什么啊！";
		next;
		cloakoffnpcself( "Girl#illtur02" );
		unittalk .@account_id, "" + .@player_name$ + " : Look out, it's dangerous!", bc_self;
		mes "[女孩]";
		mes "把这个放进嘴里。嘘，小声点！";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Hey, you are the girl from before? What is it, a turtle shell?", bc_self;
		mes "[女孩]";
		mes "不要呼吸。你也是。";
		next;
		npctalk "考古学家莱芬：还有另外一个吗？", "考古学家莱芬#illtur03", bc_self;
		sleep2 1000;
		npctalk "女孩：别呼吸！别说话！", "女孩#illtur02", bc_self;
		sleep2 1000;
		npctalk "考古学家莱芬：H...", "考古学家莱芬#illtur03", bc_self;
		specialeffect EF_CLOAKING, AREA, "Archeologist Leiphen#illtur03";
		sleep2 1000;
		npctalk "他们在哪里？", "怨恨鬼魂#illtur02", bc_self;
		npctalk "他们就这样消失了。", "怨恨鬼魂#illtur04", bc_self;
		npctalk "他们走了。", "怨恨鬼魂#illtur06", bc_self;
		npctalk "怎么可能呢？", "怨恨鬼魂#illtur01", bc_self;
		npctalk "谁干的？", "怨恨鬼魂#illtur05", bc_self;
		sleep2 1000;
		npctalk "失踪了！", "怨恨鬼魂#illtur03", bc_self;
		npctalk "走了。彻底消失了！", "怨恨鬼魂#illtur07", bc_self;
		npctalk "我看到了生物？", "怨恨鬼魂#illtur05", bc_self;
		npctalk "我会找到他们的！", "怨恨鬼魂#illtur04", bc_self;
		npctalk "应该杀掉！", "怨恨鬼魂#illtur06", bc_self;
		mes "[女孩]";
		mes "现在我看不到你们俩了...但是别走。我正在用平静的声音说话。";
		next;
		npctalk "女孩：……你在吗？", "女孩#illtur02", bc_self;
		mes "[女孩]";
		mes "你在这儿，对吗？";
		mes "我已经说过一次了，所以请仔细听。";
		next;
		mes "[女孩]";
		mes "如果你咬住它并屏住呼吸，你就不会被抓住。";
		mes "赶紧离开这里吧。回到我们相遇的地方。";
		next;
		mes "[女孩]";
		mes "你第一次见到我的地方……还记得吗？我会等待。";
		next;
		npctalk "走了。活着的人们。", "怨恨鬼魂#illtur05", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur03";
		cloakonnpcself( "Rancorous Ghost#illtur03" );
		npctalk "不，我的宝贝...", "怨恨鬼魂#illtur03", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur07";
		cloakonnpcself( "Rancorous Ghost#illtur07" );
		npctalk "这里的人都死了。", "怨恨鬼魂#illtur07", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur04";
		cloakonnpcself( "Rancorous Ghost#illtur04" );
		npctalk "我的宝...", "怨恨鬼魂#illtur04", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur05";
		cloakonnpcself( "Rancorous Ghost#illtur05" );
		npctalk "我们回去吧。", "女孩#illtur02", bc_self;
		sleep2 1000;
		cloakonnpcself( "Girl#illtur02" );
		npctalk "我饿了……饿了。", "怨恨鬼魂#illtur02", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur02";
		cloakonnpcself( "Rancorous Ghost#illtur02" );
		cloakoffnpcself( "Fragile Woman#illtur" );
		npctalk "一如既往。", "怨恨鬼魂#illtur01", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur01";
		cloakonnpcself( "Rancorous Ghost#illtur01" );
		npctalk "都死了...", "怨恨鬼魂#illtur06", bc_self;
		sleep2 1000;
		cloakonnpcself( "Rancorous Ghost#illtur06" );
		sleep2 3000;
		unittalk .@account_id, "" + .@player_name$ + " : We don't have a choice, just believe her. Let's go upward!", bc_self;
		mes "[考​​古学家莱芬]";
		mes "我们走吧！";
		next;
		mes "- ^424242考​​古学家莱芬屏住呼吸点点头。^000000 -";
		ill_turtle = 8;
		erasequest 16103;	// The Secret of Strangers
		setquest 16104;	// A long-forgotten story
		close2;
		cloakonnpcself( "Archeologist Leiphen#illtur03" );
		end;
	}
	if (ill_turtle > 10) {
		switch( checkquest(16105,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[脆弱的女人]";
			mes "我饿了……饿了。我要死了。";
			next;
			mes "[脆弱的女人]";
			mes "我可以吃我面前的任何东西。从头到脚...";
			next;
			mes "- ^424242我应该更近一些。天亮后，也许会平静一些。";
			close2;
			npctalk "我饿了。请帮我。我饿了。", "", bc_self;
			end;
		case 2:
			erasequest 16105;	// A short break, and a promise
			break;
		}
		switch( checkquest(16113,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[脆弱的女人]";
			mes "肉...容易消化的肉。饥饿的。饥饿的。太好了。肉...";
			mes "我饿了。想要更多。好吃。太好吃了。";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : Looking at the happiness she gets with " + getitemname(7564) + ".... I feel sorry.", bc_self;
			mes "- ^424242还是……满意。我们天亮后再回来吧。^000000 -";
			close;
		case 2:
			erasequest 16113;	// Endless Hunger - Cooldown
			break;
		}

		.@quest_16111 = checkquest(16111,HUNTING);
		.@quest_16112 = checkquest(16112,HUNTING);
		if (.@quest_16111 == -1 || .@quest_16112 == -1)
			.@state = -1;
		else if (.@quest_16111 == 2 && .@quest_16112 == 2 && countitem(7564) > 9)
			.@state = 2;

		switch( .@state ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[脆弱的女人]";
			mes "请狩猎海龟。 ^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + "、" + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + "、" + getmonsterinfo("ILL_FREEZER", MOB_NAME) + "、" + getmonsterinfo("ILL_HEATER", MOB_NAME) + "。各 10 个怪物。^000000";
			next;
			npctalk "我要死了。死。死。", "", bc_self;
			mes "[脆弱的女人]";
			mes "给我。 ^0000CD" + getitemname(7564) + "。 10 件。^000000";
			mes "没关系。我需要" + getitemname(7564) + "，否则我就会死。饥饿和痛苦。";
			close;
		case 2:
			if (checkweight(1201,1) == 0) {
				mes "[脆弱的女人]";
				mes "你背着这么重的包做什么？清除一些。";
				close;
			}
			setpcblock PCBLOCK_NPC, true;
			npctalk "我饿了。请帮我。我饿了。", "", bc_self;
			sleep2 500;
			setpcblock PCBLOCK_NPC, false;
			unittalk .@account_id, "" + .@player_name$ + " : I came back. I finished the hunting.", bc_self;

			mes "[脆弱的女人]";
			mes "啊..啊..好香的肉味。";
			mes "闻起来很香。看起来很好吃。请把它给我。饥饿的。匆忙。";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : ...It smells rotten...", bc_self;
			mes "[脆弱的女人]";
			mes "可口的。真是太好吃了。快乐的。真的很好。";
			next;
			npctalk "女：咀嚼、咀嚼……", "", bc_self;
			mes "- ^424242......她空着手拿着它吃东西..^000000 -";
			next;
			mes "[脆弱的女人]";
			mes "啊哈，我饱了。我现在还没有死。我吃饱了。";
			mes "在这里，我给你这个。虽然不能吃..";
			next;
			npctalk "我要死了。死。死。", "", bc_self;
			sleep2 500;
			unittalk .@account_id, "" + .@player_name$ + " : ... " + getitemname(25271) + "?", bc_self;
			mes "[脆弱的女人]";
			mes "我什么都吃了。对不起。这是我唯一能给你的东西。";
			delitem 7564,10;	// Rotten_Meat
			erasequest 16111;	// Endless Hunger 1
			erasequest 16112;	// Endless Hunger 2
			setquest 16113;	// Endless Hunger - Cooldown
			getitem 25271,1;	// IllusionStone
			getexp 1200000,1000000;
			close;
		}
		mes "[脆弱的女人]";
		mes "我饿了。帮我。请。饥饿的。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : How.. can I help you?", bc_self;
		mes "[脆弱的女人]";
		mes "...帮我？真的吗？你不让我死吗？";
		next;
		mes "[脆弱的女人]";
		mes "那么请狩猎海龟。 ^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + "、" + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + "、" + getmonsterinfo("ILL_FREEZER", MOB_NAME) + "、" + getmonsterinfo("ILL_HEATER", MOB_NAME) + "。各 10 个怪物。^000000";
		mes "请把肉拿走。" + getitemname(7564) + "。 10 件。";
		next;
		npctalk "我饿了。请帮我。我饿了。", "", bc_self;
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : It's all rotten meat.", bc_self;
		mes "[脆弱的女人]";
		mes "没关系。否则我就会死。饿死了...";
		mes "拿肉来。 ^0000CD" + getitemname(7564) + "。 10 件。^000000";
		next;
		mes "- ^424242考​​古学家莱芬不能吃饭……但据纳林说，她会很高兴。我只能在这里获取" + getitemname(7564) + "。^000000 -";
		next;
		npctalk "我要死了。死。死。", "", bc_self;
		if (select( "我会接受的。", "我现在帮不了你。" ) == 2) {
			mes "[脆弱的女人]";
			mes "我要死了。饿死。";
			next;
			mes "[脆弱的女人]";
			mes "^FF0000我什么都能吃。真的什么都有。我可以吃..嚼嚼。^000000";
			close;
		}
		mes "[脆弱的女人]";
		mes "谢谢。肉，不吃就会死。";
		mes "我现在可以多活一些了。";
		unittalk .@account_id, "" + .@player_name$ + " : ......", bc_self;
		setquest 16111;	// Endless Hunger 1
		setquest 16112;	// Endless Hunger 2
		close;
	}
	mes "[脆弱的女人]";
	mes "饥饿的。饿得走不动了。。";
	mes "拜托……请怜悯。我已经饿了太久了...";
	if (!.talk)
		donpcevent "Fragile Woman#illtur::OnTalk";
	close;

OnTalk:
	.talk = 1;
	switch( rand(2) ) {
	case 0:
		npctalk "我饿了。请帮我。我饿了。";
		sleep 3000;
		npctalk "我现在可以吃任何东西了。请给我一些东西。";
		break;
	case 1:
		npctalk "我会饿死的。如果我不吃东西，我就会死。";
		sleep 3000;
		npctalk "我饿了。请帮我。请...";
		break;
	}
	.talk = 0;
	end;

OnInit:
	// cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 4" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 7" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16111,HUNTING) == 2 && checkquest(16112,HUNTING) == 2 && countitem(7564) > 9" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16113,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == -1 && checkquest(16113,PLAYTIME) == -1 && isbegin_quest(16111) == 0" );
	end;
}

tur_d04_i,100,112,3	duplicate(dummy_cloaked_npc)	Girl#illtur02	4_F_NARIN
tur_d04_i,101,110,3	duplicate(dummy_cloaked_npc)	Archeologist Leiphen#illtur03	2_M_ALCHE
tur_d04_i,96,112,5	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur02	4_F_NFDEADMGCIAN
tur_d04_i,94,108,7	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur03	4_M_NFDEADSWDMAN
tur_d04_i,91,111,5	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur04	4_F_NFDEADMGCIAN
tur_d04_i,97,104,7	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur05	4_F_NFDEADMGCIAN
tur_d04_i,107,109,3	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur06	4_F_NFDEADMGCIAN
tur_d04_i,104,112,3	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur07	4_M_NFDEADSWDMAN
tur_d04_i,102,102,1	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur01	4_M_NFDEADSWDMAN


tur_d04_i,26,167,0	script	#illtur01	HIDDEN_WARP_NPC,15,15,{
	end;
OnTouch:
	if (ill_turtle == 5 || ill_turtle == 6 || ill_turtle > 10)
		cloakoffnpcself( "Archeologist Leiphen#illtur02" );
	end;
}

tur_d04_i,26,167,5	script	Archeologist Leiphen#illtur02	2_M_ALCHE,{
	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	if (ill_turtle == 5) {
		unittalk .@account_id, "" + .@player_name$ + " : Dr. Leiphen! You are Archeologist Leiphen, right?", bc_self;
		mes "- ^424242那个家伙...？我终于找到他了。^000000 -";
		next;
		emotion ET_SURPRISE, .@account_id;
		mes "[考​​古学家莱芬]";
		mes "天啊……人类，人类？一个真正的人类？";
		mes "哦，感谢上帝！谢谢。我以为我会死在这里！";
		npctalk "考古学家莱芬：你怎么知道是我？", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : Aylvar sent me to look for you. I'm adventurer " + .@player_name$ + ".", bc_self;
		next;
		mes "[考​​古学家莱芬]";
		mes "嗯……没有艾尔瓦和" + .@player_name$ + "我就死了。";
		mes "^FF0000我连续几天无法入睡^000000和吃饭。我四处闲逛。";
		next;
		sleep2 1000;
		emotion ET_QUESTION, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : I heard you were missing for half a day...", bc_self;
		mes "- ^424242几天？很奇怪。^000000 -";
		next;
		npctalk "考古学家莱芬：这个海龟岛，不是我们所知道的海龟岛。", "", bc_self;
		mes "[考​​古学家莱芬]";
		mes "不管怎样，你有艾尔瓦的消息吗？我听了很犹豫。";
		mes "...艾尔瓦对这个地方的看法是正确的。";
		next;
		mes "[考​​古学家莱芬]";
		mes "虽然有很多事情想研究，但还是先回去吧。";
		mes "我已经筋疲力尽，而且没有工具来进行正确的推理。最好做好准备然后回来。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Come back here?", bc_self;
		mes "[考​​古学家莱芬]";
		mes "我当然得回来。在这里我可以发现有关海龟岛历史的所有新事实。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : ...You are an implacable scholar after all.", bc_self;
		emotion ET_HNG;
		mes "[考​​古学家莱芬]";
		mes "我会把这当作一种恭维。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Well, then you are going back for now? Let me guide you out...", bc_self;
		sleep2 1000;
		npctalk "考古学家莱芬：肚子咕咕叫……", "", bc_self;
		emotion ET_SWEAT;
		mes "[考​​古学家莱芬]";
		mes "哼...";
		mes "抱歉，我饿了……我现在不能动。";
		mes "如果你没事的话，你能猎杀周围的一些怪物吗？";
		next;
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : You want me to hunt?", bc_self;
		sleep2 1000;
		npctalk "考古学家莱芬：经过长时间的考察，我能够在勘察现场吃上几顿饭了。", "", bc_self;
		mes "[考​​古学家莱芬]";
		mes "本质是乌龟，所以我可以吃，但我不能一个人打猎，所以我一直饿着……";
		mes "这里的怪物比我们所知的龟岛上的怪物要强大得多。请？";
		next;
		if (select( "你想要什么样的怪物？", "我觉得还是走吧。" ) == 1) {
			mes "[考​​古学家莱芬]";
			mes "……对不起，我不能动。";
			mes "你能带我出去吗？";
			unittalk .@account_id, "" + .@player_name$ + " : ....How many monsters do you need me to hunt?", bc_self;
		}
		else {
			mes "[考​​古学家莱芬]";
			mes "好吧，如果狩猎怪物太麻烦的话……你可以背我出去……";
			unittalk .@account_id, "" + .@player_name$ + " : I will hunt the monster.", bc_self;
		}
		emotion ET_FRET, .@account_id;
		next;
		mes "[考​​古学家莱芬]";
		mes "感谢您接受。好吧，我认为最好将这些怪物视为与海龟岛不同的怪物。";
		next;
		mes "[考​​古学家莱芬]";
		mes "^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + "、" + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + "、" + getmonsterinfo("ILL_FREEZER", MOB_NAME) + "、" + getmonsterinfo("ILL_HEATER", MOB_NAME) + "。 ^0000CD各10只怪物。^000000请。";
		mes "还有^0000CD肉^000000、^0000CD10块^000000。";
		next;
		mes "[考​​古学家莱芬]";
		mes "与此同时，我会生火。";
		mes "呼...我突然很挣扎。我是一名考古学家，不是冒险故事中的英雄。";
		ill_turtle = 6;
		erasequest 16100;	// Stranger on Turtle Island 4
		setquest 16101;	// Emergency food procurement 1
		setquest 16102;	// Emergency food procurement 2
		close;
	}
	if (ill_turtle == 6) {
		if (checkquest(16101,HUNTING) != 2 || checkquest(16102,HUNTING) != 2 || countitem(7564) < 10) {
			npctalk "考古学家莱芬：噢，你回​​来了。我正在等待。", "", bc_self;
			unittalk .@account_id, "" + .@player_name$ + " : ...It's too bad. Leiphen, the flesh of the hunted monster is all rotten..", bc_self;
			mes "[考​​古学家莱芬]";
			mes "哎呀……火烧得不太顺利。我不能烧书或工具。";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : No matter how much I hunt all I got is rotten meat.", bc_self;
			mes "[考​​古学家莱芬]";
			mes "不可能吧……全部？";
			mes "^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + "、" + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + "、" + getmonsterinfo("ILL_FREEZER", MOB_NAME) + "、" + getmonsterinfo("ILL_HEATER", MOB_NAME) + "、^000000全部？";
			next;
			mes "[考​​古学家莱芬]";
			mes "...好吧，让我拿^0000CD" + getitemname(7564) + "^00000010块，^0000CD让我先试试^000000。";
			mes "如果不咀嚼和吞咽一些东西，我就无法移动......";
			npctalk "考古学家莱芬：或者你可以带我出去……", "", bc_self;
			sleep2 1500;
			unittalk .@account_id, "" + .@player_name$ + " : Let me go hunt more.", bc_self;
			close;
		}
		npctalk "考古学家莱芬：哦，你回来了，" + .@player_name$ + "。", "", bc_self;
		mes "[考​​古学家莱芬]";
		mes "太糟糕了。没有什么可烧的……所以我不能生火。";
		next;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : I hunted the monsters by the type but all I got was rotten. I brought only " + getitemname(7564) + ".", bc_self;
		mes "[考​​古学家莱芬]";
		mes "这真的很奇怪。你猎杀活生生的怪物，但不知怎的，它只给你腐烂的肉？";
		mes "烂肉我不会煮，但我可以尝试着吃！";
		sleep2 1500;
		npctalk "考古学家莱芬：咀嚼...恶心...??！", "", bc_self;
		sleep2 2000;
		unittalk .@account_id, "" + .@player_name$ + " : Oops, are you ok?", bc_self;
		next;
		emotion ET_CRY;
		mes "[考​​古学家莱芬]";
		mes "呃……我不能吃。抱歉...你的努力毫无结果...";
		next;
		mes "[考​​古学家莱芬]";
		mes "这里除了我和你，就没有人了，对吧？我已经在这里呆了好几天了^FF0000，但我还没看到任何人^000000。";
		mes "如果还有其他人，我可以请求他们的帮助。";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Umm, I saw some people here.", bc_self;
		sleep2 500;
		emotion ET_HUK;
		npctalk "考古学家莱芬：真的吗？有些人？", "", bc_self;
		mes "[考​​古学家莱芬]";
		mes "你看到人了吗？哦，你应该早点告诉我。你在哪里看到他们的？我们现在就去谈谈吧！";
		mes "我想问他们一些事情！";
		next;
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : You said you want me to carry you out...?", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : But, there are some weird people. I'm not sure we can talk...", bc_self;
		mes "[考​​古学家莱芬]";
		mes "我现在没事了！我们走吧！";
		next;
		mes "[考​​古学家莱芬]";
		mes "即使我们不能交谈，我仍然可以通过观察人们的生活方式来弄清楚一些事情。";
		mes "好吧，我们走吧！请给我指路！到最近的地方！";
		next;
		emotion ET_SCRATCH, .@account_id;
		mes "- ^424242我的意思不是关于谈话部分，但我们还是走吧。";
		mes "到最近的地方...^FF0000我们去找饥饿的^424242女人。^000000 -";
		delitem 7564,10;	// Rotten_Meat
		ill_turtle = 7;
		erasequest 16101;	// Emergency food procurement 1
		erasequest 16102;	// Emergency food procurement 2
		setquest 16103;	// The Secret of Strangers
		close;
	}
	if (ill_turtle == 7) {
		npctalk "考古学家莱芬：你说最近的地方是这里？我一切都好。给我指路！", "", bc_self;
		end;
	}
	if (ill_turtle > 10) {
		switch( isbegin_quest(16106) ) {
		case 0:
			npctalk "考古学家莱芬：如果" + .@player_name$ + "可以抚慰那些纠结的心灵，有一天我想和他们谈谈。关于这个地方...", "", bc_self;
			end;
		case 1:
			npctalk "考古学家莱芬：你好，" + .@player_name$ + "。", "", bc_self;
			mes "[考​​古学家莱芬]";
			mes "今天你又来了。";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : You are always here.", bc_self;
			mes "[考​​古学家莱芬]";
			mes "正如我告诉过你的，在我发现这个地方的秘密之前我不会离开。";
			mes "你是来纳林的吗？";
			next;
			npctalk "考古学家莱芬：嗯，吃饭和睡觉在艾伯塔省都得到了解决。我得到了一个体面的住宿。", "", bc_self;
			sleep2 1000;
			unittalk .@account_id, "" + .@player_name$ + " : Don't you have a class?", bc_self;
			mes "[考​​古学家莱芬]";
			mes "呃，我没告诉你。我要休一年假。";
			next;
			emotion ET_SWEAT, .@account_id;
			emotion ET_DELIGHT, .@account_id;
			unittalk .@account_id, "" + .@player_name$ + " : Okay... Let's go together?", bc_self;
			mes "[考​​古学家莱芬]";
			mes "我们走吧！";
			completequest 16106;	// A memory that should not be forgotten 1
			setquest 16107;	// A memory that should not be forgotten 2
			close;
		case 2:
			npctalk "考古学家莱芬：你要去海龟岛见纳林吗？我们快点吧！", "", bc_self;
			end;
		}
		end;
	}
	end;

OnInit:
	cloakonnpc();

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 5" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 6 && checkquest(16101,HUNTING) == 2 && checkquest(16102,HUNTING) == 2 && countitem(7564) > 9" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16106) == 1" );
	end;
}


// Others npcs
tur_d03_i,147,170,7	script	#illturg11	CLEAR_NPC,{
	mes "- ^424242我想我看到了一些东西。^000000 -";
	close;
}
tur_d03_i,137,170,0	script	#illturgg11	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	.@num = atoi( replacestr( strnpcinfo(2), "illturgg", "" ) );
	if (.talk[.@num])
		end;
	.talk[.@num] = 1;
	switch(.@num) {
	case 11:
		setnpcdisplay( "#illturg11", 4_M_NFDEADSWDMAN );
		npctalk "我在哪里？大家都在哪里？", "#illturg11";
		sleep 1000;
		npctalk "我渴了……渴了。", "#illturg11";
		sleep 1000;
		setnpcdisplay( "#illturg11", CLEAR_NPC );
		break;
	case 12:
		setnpcdisplay( "#illturg12", 4_M_NFDEADSWDMAN );
		npctalk "狂野，狂野。", "#illturg12";
		sleep 1000;
		npctalk "你说你会回来？", "#illturg12";
		sleep 1000;
		setnpcdisplay( "#illturg12", CLEAR_NPC );
		break;
	case 13:
		setnpcdisplay( "#illturg13", 4_F_NFDEADMGCIAN );
		npctalk "啊哈，啊哈哈哈，哈哈……", "#illturg13";
		sleep 1000;
		npctalk "啊哈……哈……呜呼……", "#illturg13";
		sleep 1000;
		setnpcdisplay( "#illturg13", CLEAR_NPC );
		break;
	case 21:
		setnpcdisplay( "#illturg21", 4_F_NFDEADMGCIAN );
		npctalk "我在哪里？我的老板在哪里？？", "#illturg21";
		sleep 1000;
		npctalk "谁在那里？谁在那里？", "#illturg21";
		sleep 1000;
		setnpcdisplay( "#illturg21", CLEAR_NPC );
		break;
	case 22:
		setnpcdisplay( "#illturg22", 4_M_NFDEADSWDMAN );
		npctalk "哈哈哈……啊，太冷了。我想回去……", "#illturg22";
		sleep 1000;
		npctalk "这里有人吗？有人...?", "#illturg22";
		sleep 1000;
		setnpcdisplay( "#illturg22", CLEAR_NPC );
		break;
	case 23:
		setnpcdisplay( "#illturg23", 4_M_NFDEADSWDMAN );
		sleep2 1000;
		npctalk "什么啊哈哈哈哈", "#illturg23", bc_self;
		setnpcdisplay( "#illturg23", CLEAR_NPC );
		break;
	case 24:
		setnpcdisplay( "#illturg24", 4_M_NFDEADSWDMAN );
		npctalk "你等了吗？你等我了吗？", "#illturg24", bc_self;
		sleep2 1000;
		npctalk "已经晚了，已经太晚了。", "#illturg24", bc_self;
		setnpcdisplay( "#illturg24", CLEAR_NPC );
		break;
	}
	sleep 4000;
	.talk[.@num] = 0;
	end;
}

tur_d03_i,142,229,1	script	#illturg12	CLEAR_NPC,{
	mes "- ^424242好像有点冷了。^000000 -";
	close;
}
tur_d03_i,146,223,0	duplicate(#illturgg11)	#illturgg12	HIDDEN_WARP_NPC,5,5

tur_d03_i,214,105,7	script	#illturg13	CLEAR_NPC,{
	mes "- ^424242我感觉很奇怪...^000000 -";
	close;
}
tur_d03_i,207,104,0	duplicate(#illturgg11)	#illturgg13	HIDDEN_WARP_NPC,5,5

tur_d04_i,99,153,7	script	#illturg21	CLEAR_NPC,{
	mes " - ^424242...?^000000 -";
	close;
}
tur_d04_i,99,160,0	duplicate(#illturgg11)	#illturgg21	HIDDEN_WARP_NPC,3,3

tur_d04_i,37,137,7	script	#illturg22	CLEAR_NPC,{
	mes "- ^424242我感觉很奇怪，但这里什么也没有...^000000 -";
	close;
}
tur_d04_i,45,137,0	duplicate(#illturgg11)	#illturgg22	HIDDEN_WARP_NPC,3,3

tur_d04_i,76,35,7	script	#illturg23	CLEAR_NPC,{
	mes "- ^424242我心情不好...^000000 -";
	close;
}
tur_d04_i,69,31,0	duplicate(#illturgg11)	#illturgg23	HIDDEN_WARP_NPC,3,3

tur_d04_i,135,133,1	script	#illturg24	CLEAR_NPC,{
	mes "- ^424242我听到了一些声音。^000000 -";
	close;
}
tur_d04_i,137,126,0	duplicate(#illturgg11)	#illturgg24	HIDDEN_WARP_NPC,3,3



//============================================================
//= Illusion of Luanda
//============================================================
// Warps
beach_dun2,248,254,4	script	#IL_Luanda	4_ENERGY_BLUE,{
	mes "这是一个发出柔和蓝色光芒的图腾。";
	next;
	if (select( "触摸它", "留下它" ) == 2)
		end;
	if (BaseLevel < 160) {
		mes "- 你无法进入该区域，因为你的等级太低。";
		close;
	}
	warp "com_d02_i",249,243;
	end;
}

com_d02_i,254,243,0	warp2	IL_Luanda#Luanda	1,1,beach_dun2,249,243


// Reward npc
com_d02_i,241,255,4	script	Defense Manager Luanda#Lu	4_M_THAIONGBAK,{
	if (BaseLevel < 160)	// shouldn't happen
		end;
	if (checkweight(1201,3) == 0) {
		mes "- 您无法继续，因为您的物品太多。 -";
		close;
	}
	if (ill_luanda == 0) {
		emotion ET_QUESTION;
		mes "[罗安达]";
		mes "你是谁？";
		next;
		mes "[罗安达]";
		mes "啊!啊!啊!";
		mes "我听说他们雇佣冒险者是因为他们没有足够的人手来保卫村庄。我想那就是你吧？";
		next;
		mes "[罗安达]";
		mes "顺便问一下，我是不是在什么地方见过你？你的脸看起来有种奇怪的熟悉感。";
		next;
		mes "[罗安达]";
		mes "哎呀，我无法比较相似的面孔……我们是双胞胎。哈哈哈";
		next;
		mes "[罗安达]";
		mes "我应该打招呼吗？很高兴见到你。我是罗安达，这个洞窟的防御管理员。";
		next;
		mes "[罗安达]";
		mes "对于简单的任务，我们准备了一个请求板，这样你就可以找到它们并向我报告。";
		next;
		mes "[罗安达]";
		mes "任务本身并不困难，因为你只需要绕着洞穴走一圈并对付怪物或带来怪物的副产品即可。";
		next;
		mes "[罗安达]";
		mes "既然你被村里聘用了，我就希望你努力工作，减轻一点负担。这几天确实很难受。请。";
		next;
		ill_luanda = 1;
		emotion ET_KIK;
		mes "[罗安达]";
		mes "然后玩得开心。冒险家。";
		close;
	}
	if (ill_luanda == 2) {	// first time (walk near any shadow npc)
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "告诉罗安达你所目睹的奇怪的闪光。";
		next;
		emotion ET_SCRATCH;
		mes "[罗安达]";
		mes "奇怪的微光？正如你所说，这是一个非常奇怪的现象。";
		next;
		mes "[罗安达]";
		mes "我在村子里住了很长时间了，但这似乎是我从未听说过的现象。我猜测，但我认为这种情况最近才开始发生。";
		next;
		mes "[罗安达]";
		mes "我不是一个人住在村子里，如果有人看到的话，肯定会被传言，但第一次听到，我的猜测就更清楚了。";
		next;
		mes "[罗安达]";
		mes "它可能很危险，所以如果你发现它，为什么不避开它呢？没有必要冒险。";
		next;
		ill_luanda = 3;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 5) {	// MONDAY vortex 153/33
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "告诉罗安达你遇到并交谈过的三个年轻人。";
		next;
		emotion ET_SURPRISE;
		mes "[罗安达]";
		mes "呃..啊？！你看到了我和那些看起来像我兄弟的年轻人。";
		next;
		mes "[罗安达]";
		mes "好像是很久以前的事了。与毛不同，我的记忆力不太好。";
		next;
		mes "[罗安达]";
		mes "我依稀记得。在和兄弟们一起去打猎之前，我确实警告过我遇到的一个陌生人。";
		next;
		mes "[罗安达]";
		mes "在城里见到陌生人并不罕见，所以我的记忆很模糊，但我记得。";
		next;
		mes "[罗安达]";
		mes "这很有趣。如果你说的是真的，那不是说你以前就跟我说过话吗？";
		next;
		mes "[罗安达]";
		mes "啊!想想看，你还记得我们第一次见面的情景吗？我不是说过我已经习惯当冒险者了吗？";
		next;
		mes "[罗安达]";
		mes "正如预期的那样，我不认为这是一种不好的感觉。我真的不敢相信。过去与我相遇的冒险者……";
		next;
		mes "[罗安达]";
		mes "听起来类似的事情将来可能会发生，对吗？";
		next;
		emotion ET_SORRY;
		mes "[罗安达]";
		mes "我道歉。我内心深处觉得冒险者跟我说话很烦人。现在，我先问你。";
		next;
		mes "[罗安达]";
		mes "如果您经历过类似的事情，请告诉我。我求你了。";
		next;
		ill_luanda = 6;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 7) {// TUESDAY vortex 118/100
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "告诉他卡鲁和阿苏德姆的事。";
		next;
		emotion ET_SMILE;
		mes "[罗安达]";
		mes "Puhahaha 我想你是来参观亨尼和嫂子约会的地方的。";
		next;
		emotion ET_SMILE;
		mes "[罗安达]";
		mes "天哪..那个地方是我哥哥和嫂子经常去约会的地方。";
		next;
		mes "[罗安达]";
		mes "我哥哥可能认为这是一个只有他知道的秘密地方，但这是村里每个人都知道的地方。";
		next;
		mes "[罗安达]";
		mes "这是乡村爱好者中非常受欢迎的地方。这里很安静，是约会的好地方。";
		next;
		mes "[罗安达]";
		mes "最近因为各种各样的事情，我没怎么笑过，但是多亏了你，我笑出了声。我期待接下来的故事。";
		next;
		ill_luanda = 8;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 9) {// WEDNESDAY vortex 193/267
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "告诉罗安达谁在山洞里画壁画。";
		next;
		mes "[罗安达]";
		mes "我画壁画的时候你见过我吗？我不记得了，但是……";
		next;
		mes "[罗安达]";
		mes "我想我可以告诉你我为什么画这幅壁画。";
		next;
		mes "[罗安达]";
		mes "这不是什么秘密，但我的每个兄弟都有一种神秘的能力。";
		next;
		mes "[罗安达]";
		mes "就卡鲁哥而言，他即使从远处也能准确地看到东西。";
		next;
		mes "[罗安达]";
		mes "忙内丸拥有出色的记忆力，永远不会忘记自己所看到的一切，并且能够读懂对手的想法。";
		next;
		mes "[罗安达]";
		mes "我并不总是正确的，但我可以预见未来。啊!我有比这更多的能力。";
		next;
		mes "[罗安达]";
		mes "我可以看到人们的善恶能量。如果是冒险者的话……";
		next;
		mes "[罗安达]";
		mes "我能感受到不可触摸的美好能量。正因如此，我的心情更加苦涩。";
		next;
		mes "[罗安达]";
		mes "回到最初的故事，我画壁画的原因是有一天我梦见一个村庄被烧毁。";
		next;
		mes "[罗安达]";
		mes "许多怪物来到了城镇，人们因此痛苦地哭泣......";
		next;
		mes "[罗安达]";
		mes "在经历了地狱般的梦之后，我看到自己在一个山洞的壁画上记录了当天发生的事情。";
		next;
		mes "[罗安达]";
		mes "哈哈，不用太担心。梦想还没有发生。";
		next;
		mes "[罗安达]";
		mes "你知道吗？如果我提前画壁画，我梦中看到的未来会改变吗？";
		next;
		mes "[罗安达]";
		mes "一位我在梦中没有见过的冒险家正在帮助我们，所以我确信我们可以改变它。";
		next;
		ill_luanda = 10;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 11) {// THURSDAY vortex 228/91
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "向罗安达讲述了正在独自训练的毛泽东的情况。";
		next;
		mes "[罗安达]";
		mes "毛哥……你想得很多了。";
		next;
		mes "[罗安达]";
		mes "卡鲁哥哥和嫂子分开住，我们还是住在一起，但我觉得他并不太关心他的妹妹。";
		next;
		mes "[罗安达]";
		mes "据说做了一个痛苦的梦之后我失去了理智，但不知何故我的焦虑......";
		next;
		mes "[罗安达]";
		mes "看来他已经被毛泽东所感染了。或许是因为他的能力，他经常会被别人的情绪所左右……";
		next;
		mes "[罗安达]";
		mes "他……为了变强而训练……就算没有变强……他也够了……";
		next;
		emotion ET_THANKS;
		mes "[罗安达]";
		mes "谢谢。多亏了你，我才知道了毛的烦恼。";
		next;
		ill_luanda = 12;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 13) {// FRIDAY vortex 208/130
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "告诉罗安达有人从山洞里拿走了一些东西。";
		next;
		mes "[罗安达]";
		mes "你也看到了。我想我们之前已经讨论过这个问题了。在梦中，我看到怪物进城了。";
		next;
		mes "[罗安达]";
		mes "为了准备那个时候，村里的武士们把老弱的人疏散到了这里，并在山洞里各处储存了物资。";
		next;
		mes "[罗安达]";
		mes "这些实际上是紧急物品。如果不用它们就完美了，但是……";
		next;
		mes "[罗安达]";
		mes "你不知道世界是如何运转的。如果您发现某些东西，请忽略它。";
		next;
		ill_luanda = 14;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 15) {// (re)MONDAY vortex 153/33
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "向罗安达讲述了与村民和村长见面的故事。";
		next;
		mes "[罗安达]";
		mes "你确实是来看看刚才发生的事情的。虽然没有梦中看到的那么严重，但也算是很大的伤害了。";
		next;
		mes "[罗安达]";
		mes "一想到那天，我的心就痛。突然间，当我的兄弟们不在的时候……";
		next;
		mes "[罗安达]";
		mes "不过，村长，村里最优秀的长辈，似乎因为冷静而受到的伤害要小一些。谢谢你的故事。";
		next;
		ill_luanda = 16;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 17) {// SATURDAY vortex 42/215
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "向罗安达讲述了遇见匆匆逃往某处的兄弟的故事。";
		next;
		mes "[罗安达]";
		mes "你一定看到了我和兄弟们打猎回来的那一天。第二天，村里发生了一场大灾难。";
		next;
		mes "[罗安达]";
		mes "呃..如果我和我的兄弟们没有清空村庄...人们就不会被怪物带走...";
		next;
		mes "[罗安达]";
		mes "如果是的话……我嫂子也……";
		next;
		select( "这不是你的错。" );
		mes "[罗安达]";
		mes "我知道。不是因为我和我的兄弟们..而是..那天..我们.....只是可惜";
		next;
		select( "你最好先冷静一下。" );
		mes "[罗安达]";
		mes "冒险家，你向我展示了一些我不会看到的东西。我只是来告诉你我记得的事......";
		next;
		ill_luanda = 18;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 19) {// (re)THURSDAY vortex 228/91
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "向罗安达讲述了见到卡鲁和阿苏德姆的故事。";
		next;
		mes "[罗安达]";
		mes "…………";
		next;
		mes "[罗安达]";
		mes "卡.. 卡鲁 hyungnim.. hyungnim";
		mes "这就是你把自己关在西洞的原因。";
		next;
		mes "[罗安达]";
		mes "我对自己没能帮助保卫村庄感到不满。";
		next;
		mes "[罗安达]";
		mes "你的心……我根本无法想象你嫂子的……呜……你的悲伤……";
		next;
		mes "[罗安达]";
		mes "等这里的情况解决了，我就去找我哥哥。他必须独自承受痛苦和悲伤。";
		next;
		mes "[罗安达]";
		mes "我的心也像这样受伤，但如果你知道最小的孩子因为他的能力而挣扎……我必须做好准备。谢谢你，冒险家。";
		next;
		ill_luanda = 20;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (ill_luanda == 21) {	// SUNDAY vortex 263/72
		mes "[罗安达]";
		mes "怎么了，冒险家？";
		next;
		mes "向罗安达讲述一些不知名人士的故事。";
		next;
		mes "[罗安达]";
		mes "听起来像是针对村庄的乌坦或巨石怪物之间的对话。";
		next;
		mes "[罗安达]";
		mes "跟随一个强有力的领导者？最近我感觉这些家伙的动作秩序得令人不安……";
		next;
		mes "[罗安达]";
		mes "似乎有一个怪物出现在引导他们。";
		next;
		mes "[罗安达]";
		mes "真尴尬。即便是现在，我们也只能阻止它。";
		next;
		mes "[罗安达]";
		mes "现在不是悲伤的时候。我们需要建立更多的防御并采取其他措施。";
		next;
		mes "[罗安达]";
		mes "强大的领袖也是个问题……但作为传奇流传下来的力量？这是一个我以前从未听说过的故事。";
		next;
		mes "[罗安达]";
		mes "我猜这就是怪物袭击村庄的原因，但我必须告诉酋长并进行调查。";
		next;
		emotion ET_THANKS;
		mes "[罗安达]";
		mes "你刚才告诉我的故事真的很有帮助。谢谢你，冒险家。";
		next;
		ill_luanda = 22;
		getexp 1120000,650000;
		erasequest 5847;
		mes "到罗安达汇报并积累经验。";
		close;
	}
	if (isbegin_quest(5848) == 1 && countitem(25638) > 2) {
		delitem 25638,3;	// Token_Of_Bigstone
		erasequest 5848;
		setquest 5849;
		.@amount = 1;
	}
	if (isbegin_quest(5850) == 1 && countitem(25633) > 2) {
		delitem 25633,3;	// Token_Of_Wootan
		erasequest 5850;
		setquest 5851;
		.@amount += 1;
	}
	if (checkquest(5852,HUNTING) == 2) {
		erasequest 5852;
		setquest 5853;
		.@amount += 1;
	}
	if (checkquest(5854,HUNTING) == 2) {
		erasequest 5854;
		setquest 5855;
		.@amount += 1;
	}
	if (.@amount > 0) {
		getitem 25271, .@amount;	// IllusionStone
		getexp (4300000 * .@amount), (2800000 * .@amount);
		emotion ET_THANKS;
		mes "[罗安达]";
		if (.@amount > 1)
			mes "这是一种即使有一个请求也会令人遗憾的情况，但是" + .@amount + "......确实如此。";
		else
			mes "每一个请求都弥足珍贵。再次感谢您。";
		mes "你辛苦了。";
		close;
	}
	mes "[罗安达]";
	mes "怎么了，冒险家？";
	next;
	switch( select( "这里没有请求吗？", "这是什么洞穴？", "为什么会有怪物入侵？" ) ) {
	case 1:
		mes "[罗安达]";
		mes "对于在镇上招募的任务，有一个单独的请求板。";
		next;
		mes "[罗安达]";
		mes "啊!注意你的想法。位置在战场中间，所以出于安全考虑我把它安装在了角落里。";
		next;
		mes "[罗安达]";
		mes "有时您无法立即完成公告板上的请求，但没有具体的时间限制，所以不要着急。";
		close;
	case 2:
		mes "[罗安达]";
		mes "冒险家，你对一切都充满好奇。";
		next;
		mes "[罗安达]";
		mes "罗安达石窟是战略上通往城镇北部的唯一出路。";
		next;
		mes "[罗安达]";
		mes "这就是我们在这里防御怪物攻击的原因。";
		next;
		select( "罗安达洞？罗安达？" );
		mes "[罗安达]";
		mes "啊!你注意到了吗？是的，我也叫罗安达。村里的老人说...";
		next;
		mes "[罗安达]";
		mes "据说，这三胞胎根据村庄的洞穴被命名为卡鲁、罗安达和毛。";
		next;
		mes "[罗安达]";
		mes "小时候，邻居朋友经常取笑我，但我对这个名字没有任何抱怨。";
		next;
		mes "[罗安达]";
		mes "我听说它们是以村庄守护者的名字命名的。我为他们感到相当自豪。";
		close;
	case 3:
		mes "[罗安达]";
		mes "我们也很困惑。如果我们知道原因，我们就会把所有东西都收起来。";
		next;
		mes "[罗安达]";
		mes "这不是一个食物丰富的城镇，我也不认为怪物有什么特别的理由瞄准它。";
		next;
		mes "[罗安达]";
		mes "但我们能做什么呢？我们只是住在这里，怪物就不断来袭，所以我们必须一边阻挡它们一边生存。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(5847) == 1" );
	end;
}


// Shadow npcs and main quest related
com_d02_i,1,1,1	script	com_d02_i_init_shadow_npc	-1,{
	end;
OnInit:
OnHour00:	// updated every 3h at a fixed time
OnHour03:
OnHour06:
OnHour09:
OnHour12:
OnHour15:
OnHour18:
OnHour21:
	setarray .@num[1],1,2,3,4,5,6,7;
	.@today = gettime(DT_DAYOFWEEK);
	.@today = (.@today == 0 ? 7 : .@today);	// SUNDAY - 0
	deletearray .@num[.@today],1;
	deletearray .@num[ rand(1,6) ],1;	// note: should the previous enabled vortex be taken into account?

	for ( .@i = 1; .@i < 6; ++.@i )
		disablenpc "Shimmer#Lu0" + .@num[.@i];
	end;
}

// MONDAY
com_d02_i,153,33,1	script	Shimmer#Lu01	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 3) {
		cloakoffnpcself( "First Young#LuE01" );
		cloakoffnpcself( "Second Young#LuE01" );
		cloakoffnpcself( "Third Young#LuE01" );
		end;
	}
	if (ill_luanda == 4) {
		cloakoffnpcself( "Second Young#LuE01" );
		end;
	}
	if (ill_luanda == 14) {
		cloakoffnpcself( "Chief#LuE06" );
		cloakoffnpcself( "Villager#LuE061" );
		cloakoffnpcself( "Villager#LuE062" );
		cloakoffnpcself( "Villager#LuE063" );
		end;
	}
	end;
}

com_d02_i,152,40,6	script(CLOAKED)	Second Young#LuE01	4_M_THAIONGBAK,{
	if (ill_luanda == 3) {
		npctalk "兄弟？你准备好了吗？你很快就要离开吗？时间已经不多了。", "", bc_self;
		mes "[第二年轻]";
		mes "兄弟？你准备好了吗？你很快就要离开吗？时间已经不多了。";
		next;
		npctalk "是的。正如第二个所说，我们最好快点开始。我感觉不太好。", "第一年轻#LuE01", bc_self;
		mes "[首先年轻]";
		mes "是的。正如第二个所说，最好尽快开始。我感觉不太好..";
		next;
		npctalk "哈哈哈，只有一天而已。有什么大不了的？啊？！", "三少#LuE01", bc_self;
		mes "[第三个年轻人]";
		mes "哈哈哈，只有一天而已。有什么大不了的？啊？！";
		next;
		npctalk "兄弟们，那边有人。陌生人？", "三少#LuE01", bc_self;
		mes "[第三个年轻人]";
		mes "兄弟们，那边有人。陌生人？";
		next;
		npctalk "看起来像陌生人？如果我没记错的话，我在附近没有见过那张脸。", "三少#LuE01", bc_self;
		mes "[第三个年轻人]";
		mes "看起来像陌生人？如果我没记错的话，我在附近没有见过那张脸。";
		next;
		npctalk "如果这是最小的记忆，那就是了。到了这个年纪却成了陌生人，感觉很奇怪。", "第一年轻#LuE01", bc_self;
		mes "[首先年轻]";
		mes "如果这是最小的记忆，那就是了。到了这个年纪却成了陌生人，感觉很奇怪。";
		next;
		npctalk "兄弟，我不认为你有危险。现在还不是时候。兄弟，我们先走吧。", "", bc_self;
		mes "[第二年轻]";
		mes "兄弟，我不认为你有危险。现在还不是时候。兄弟，我们先走吧。";
		next;
		npctalk "我很快就会赶上的。", "", bc_self;
		mes "[第二年轻]";
		mes "我很快就会赶上的。";
		next;
		npctalk "看老二脸上的表情，我看这个陌生人有话要说？老三，我们先走吧。", "第一年轻#LuE01", bc_self;
		mes "[首先年轻]";
		mes "看第二个表情，你看出陌生人有话要说吗？老三，我们先走吧。";
		next;
		npctalk "小心。别迟到了...", "第一年轻#LuE01", bc_self;
		mes "[首先年轻]";
		mes "小心。别迟到了...";
		next;
		cloakonnpcself( "First Young#LuE01" );
		sleep2 500;
		cloakonnpcself( "Third Young#LuE01" );
		npctalk "是的，兄弟。", "", bc_self;
		mes "[第二年轻]";
		mes "是的，兄弟。";
		next;
		npctalk "嘿，陌生人，看看我。", "", bc_self;
		mes "[第二年轻]";
		mes "嘿，陌生人，看看我。";
		ill_luanda = 4;
		close;
	}
	if (ill_luanda == 4) {
		npctalk "你？除了良好的氛围之外，你难道没有其他感觉吗？你到底在做什么？", "", bc_self;
		mes "[第二年轻]";
		mes "你？除了良好的氛围之外，你难道没有其他感觉吗？你到底在做什么？";
		next;
		select( "你在说什么？" );
		npctalk "我能看到它。嗯……不过你看不到。", "", bc_self;
		mes "[第二年轻]";
		mes "我能看到它。嗯..不过你看不到。";
		next;
		npctalk "我告诉你，我从你身上感受到了良好的氛围。立即离开这个地方。", "", bc_self;
		mes "[第二年轻]";
		mes "我告诉你是因为我从你身上感受到了良好的氛围。立即离开这个地方。";
		next;
		npctalk "很快就会有很多怪物来到这个小镇。别白白死了，离开这个地方。", "", bc_self;
		mes "[第二年轻]";
		mes "很快就会有很多怪物来到这个小镇。别白白死了，离开这个地方。";
		next;
		cloakonnpcself();
		ill_luanda = 5;
		setquest 5847;
		mes "青年说完，便消失了。他一定是追随了走在他前面的兄弟们。他到底在做什么？";
		next;
		mes "我应该向罗安达先生询问发生了什么事吗？";
		close;
	}
	end;
}

com_d02_i,154,41,4	duplicate(dummy_cloaked_npc)	First Young#LuE01	4_M_THAIONGBAK
com_d02_i,156,39,4	duplicate(dummy_cloaked_npc)	Third Young#LuE01	4_M_THAIONGBAK


// TUESDAY
com_d02_i,118,100,1	script	Shimmer#Lu02	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 6) {
		cloakoffnpcself( "Karu#LuE02" );
		cloakoffnpcself( "Asudem#LuE02" );
		end;
	}
	if (ill_luanda == 18) {
		cloakoffnpcself( "Karu#LuE08" );
		cloakoffnpcself( "Asudem#LuE08" );
		end;
	}
	end;
}

com_d02_i,121,95,4	script(CLOAKED)	Karu#LuE02	4_M_THAIONGBAK,{
	if (ill_luanda == 6) {
		npctalk "卡鲁..今天狩猎怎么样？", "असुदेम#LuE02", bc_self;
		mes "[阿斯德姆]";
		mes "卡鲁..今天狩猎怎么样？";
		next;
		npctalk "哈哈哈 Asudem...没有亲爱的。你不相信我的技术吗？这次和往常一样，我钓到了很多。", "", bc_self;
		mes "[卡鲁]";
		mes "哈哈哈 Asudem...没有亲爱的。你不相信我的技术吗？这次和往常一样，我钓到了很多。";
		next;
		npctalk "披~吹牛，毛大师都已经告诉我了。", "असुदेम#LuE02", bc_self;
		mes "[阿斯德姆]";
		mes "披~吹牛，毛大师都已经告诉我了。";
		next;
		npctalk "听说这次只有罗安达大师和毛大师在跑？你躺在树顶上，只是大喊……", "असुदेम#LuE02", bc_self;
		mes "[阿斯德姆]";
		mes "听说这次只有罗安达大师和毛大师在跑？你躺在树顶上，只是大喊……";
		next;
		npctalk "哇……这些家伙是真的……", "", bc_self;
		mes "[卡鲁]";
		mes "哇……这些家伙是真的……";
		next;
		npctalk "蜂蜜？谁在那里？", "असुदेम#LuE02", bc_self;
		mes "[阿斯德姆]";
		mes "蜂蜜？谁在那里？";
		next;
		npctalk "谁会千里迢迢来到这个诡异的地方？啊？！真的……真是一次愉快的约会。", "", bc_self;
		mes "[卡鲁]";
		mes "谁会千里迢迢来到这个诡异的地方？啊？！真的……真是一次愉快的约会。";
		next;
		npctalk "亲爱的，我们走吧，我想今天的约会就结束了。嘿，我们去办点事吧~我们就离开这里吧……", "", bc_self;
		mes "[卡鲁]";
		mes "亲爱的，我们走吧，我想今天的约会就结束了。哎，我们去办点事吧~我们就离开这里吧……";
		next;
		cloakonnpcself();
		cloakonnpcself( "Asudem#LuE02" );
		ill_luanda = 7;
		setquest 5847;
		mes "看来我打扰了这对情侣的约会。我需要告诉罗安达发生了什么事。";
		close;
	}
	end;
}

com_d02_i,120,95,6	duplicate(dummy_cloaked_npc)	Asudem#LuE02	4_F_01


// WEDNESDAY
com_d02_i,193,267,1	script	Shimmer#Lu03	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 8) {
		cloakoffnpcself( "Young#LuE03" );
		end;
	}
	end;
}

com_d02_i,191,271,8	script(CLOAKED)	Young#LuE03	4_M_THAIONGBAK,{
	if (ill_luanda == 8) {
		npctalk "嗯……有点乱……但这对于我的技能来说是很棒的壁画。", "", bc_self;
		mes "[年轻人]";
		mes "嗯……有点乱……但这对于我的技能来说是很棒的壁画。";
		next;
		npctalk "我把梦中看到的东西画下来，但是……我看到的事情真的会发生吗？", "", bc_self;
		mes "[年轻人]";
		mes "我把梦中看到的东西画下来，但是……我看到的事情真的会发生吗？";
		next;
		npctalk "如果这只是一场梦就好了……", "", bc_self;
		mes "[年轻人]";
		mes "如果这只是一场梦就好了……";
		next;
		npctalk "首先，让我们尽我所能。啊？你？", "", bc_self;
		mes "[年轻人]";
		mes "首先，让我们尽我所能。啊？你？";
		next;
		select( "你还记得我吗？" );
		npctalk "啊!你？上次见到的陌生人！！你还在吗？我确信我会...", "", bc_self;
		mes "[年轻人]";
		mes "啊!你？上次见到的陌生人！！你还在吗？我确信我会...";
		next;
		cloakonnpcself();
		ill_luanda = 9;
		setquest 5847;
		mes "年轻人已经消失了。你不是说这个年轻人就是罗安达先生吗？我应该告诉罗安达我所经历的一切。";
		close;
	}
	end;
}


// THURSDAY
com_d02_i,228,91,1	script	Shimmer#Lu04	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 10) {
		cloakoffnpcself( "Young#LuE04" );
		end;
	}
	end;
}

com_d02_i,228,95,4	script(CLOAKED)	Young#LuE04	4_M_THAIONGBAK,{
	if (ill_luanda == 10) {
		npctalk "唉，我怎么这么弱呢？与我的哥哥们不同，我的能力在战斗中并不是特别有用。", "", bc_self;
		mes "[年轻人]";
		mes "唉，我怎么这么弱呢？与我的哥哥们不同，我的能力在战斗中并不是特别有用。";
		next;
		npctalk "啊？！你就是罗安达外出打猎时感兴趣的那个陌生人吗？", "", bc_self;
		mes "[年轻人]";
		mes "啊？！你就是罗安达出去打猎时感兴趣的陌生人吗？";
		next;
		npctalk "自从遇见你以来，我应该大声说吗？我叫毛。我是罗安达的弟弟，你前几天见过他。", "", bc_self;
		mes "[年轻人]";
		mes "自从遇见你以来，我应该大声说吗？我叫毛。我是罗安达的弟弟，你前几天见过他。";
		next;
		select( "我..." );
		npctalk "哈哈哈很高兴认识你。我不知道你是否注意到，我的兄弟姐妹是三胞胎。", "", bc_self;
		mes "[年轻人]";
		mes "哈哈哈很高兴认识你。我不知道你是否注意到，我的兄弟姐妹是三胞胎。";
		next;
		npctalk "我的兄弟们在婴儿时期就被遗弃在村里。村民们把它们捡起来并抚养长大。", "", bc_self;
		mes "[年轻人]";
		mes "我的兄弟们在婴儿时期就被遗弃在村里。村民们把它们捡起来并抚养长大。";
		next;
		npctalk "他们还根据城镇周围的洞穴将它们命名为卡鲁（Karu）、罗安达（Luanda）和毛（Mao）。", "", bc_self;
		mes "[年轻人]";
		mes "他们还根据城镇周围的洞穴将它们命名为卡鲁（Karu）、罗安达（Luanda）和毛（Mao）。";
		next;
		npctalk "他们说这是守护古老村庄的守护神的名字。", "", bc_self;
		mes "[年轻人]";
		mes "他们说这是守护古老村庄的守护神的名字。";
		next;
		npctalk "啊？我为什么要告诉你这个？", "", bc_self;
		mes "[年轻人]";
		mes "啊？我为什么要告诉你这个？";
		next;
		npctalk "我想我是因为练习不顺利而失去了理智。", "", bc_self;
		mes "[年轻人]";
		mes "我想我是因为练习不顺利而失去了理智。";
		next;
		npctalk "我还在训练……徒劳？！你无法相信别人的...", "", bc_self;
		mes "[年轻人]";
		mes "我还在练习..徒劳？！你无法相信别人的...";
		next;
		cloakonnpcself();
		ill_luanda = 11;
		setquest 5847;
		mes "卡鲁失踪了。我需要告诉罗安达发生了什么事。";
		close;
	}
	end;
}

// FRIDAY
com_d02_i,208,130,1	script	Shimmer#Lu05	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 12) {
		cloakoffnpcself( "Young#LuE05" );
		end;
	}
	end;
}

com_d02_i,210,134,6	script(CLOAKED)	Young#LuE05	4_M_THAIONGBAK,{
	if (ill_luanda == 12) {
		npctalk "我觉得喝水就够了...", "", bc_self;
		mes "[年轻人]";
		mes "我觉得喝水就够了...";
		next;
		npctalk "不用这些东西就完美了……", "", bc_self;
		mes "[年轻人]";
		mes "不用这些东西就最完美了..";
		next;
		npctalk "啊？！又是你吗？你不觉得我们经常见面吗？那天有人说话...", "", bc_self;
		mes "[年轻人]";
		mes "啊？！又是你吗？你不觉得我们经常见面吗？那天有人说话...";
		next;
		npctalk "就这样消失了……那句话……", "", bc_self;
		mes "[年轻人]";
		mes "就这样消失了……那句话……";
		next;
		cloakonnpcself();
		ill_luanda = 13;
		setquest 5847;
		mes "年轻人再次消失了。我需要告诉罗安达先生。";
		close;
	}
	end;
}


// (re)MONDAY
com_d02_i,157,28,4	script(CLOAKED)	Chief#LuE06	4_M_JPNOJI2,{
	if (ill_luanda == 14) {
		npctalk "啊啊！！这是一次攻击。怪物从四面八方涌来。", "村民#LuE061", bc_self;
		mes "[酋长]";
		mes "啊啊！！这是一次攻击。怪物从四面八方涌来。";
		next;
		npctalk "便宜……双胞胎在哪里？他们应该在那里...", "村民#LuE062", bc_self;
		mes "[酋长]";
		mes "便宜……双胞胎在哪里？他们应该在那里...";
		next;
		npctalk "双胞胎发现并离开了吗？耐心点..他们很快就会回来..", "", bc_self;
		mes "[酋长]";
		mes "双胞胎发现并离开了吗？耐心点..他们很快就会回来..";
		next;
		npctalk "村长，那些被怪物抓走的村民怎么办？他们已经...", "村民#LuE063", bc_self;
		mes "[酋长]";
		mes "村长，那些被怪物抓走的村民怎么办？他们已经...";
		next;
		npctalk "不要说消极的话。每个人都还活着。癌症不是活的...", "", bc_self;
		mes "[酋长]";
		mes "不要说消极的话。每个人都还活着。癌症不是活的...";
		next;
		npctalk "哈..但是酋长..", "村民#LuE063", bc_self;
		mes "[酋长]";
		mes "哈..但是酋长..";
		next;
		npctalk "呃..该怎么办呢...按照罗安达的建议，我们必须逃到这个地方...", "", bc_self;
		mes "[酋长]";
		mes "呃..我该怎么办..按照罗安达的建议，我们必须逃到这个地方...";
		next;
		npctalk "啊？你没见过吗？你是否陷入了旅行之中？啧啧，你运气不好啊。。", "", bc_self;
		mes "[酋长]";
		mes "啊？你没见过吗？你是否陷入了旅行之中？啧啧，你运气不好啊。。";
		next;
		npctalk "我们现在没有能力照顾任何人，所以照顾好自己吧。", "", bc_self;
		mes "[酋长]";
		mes "我们现在没有能力照顾任何人，所以照顾好自己吧。";
		next;
		cloakonnpcself();
		cloakonnpcself( "Villager#LuE061" );
		cloakonnpcself( "Villager#LuE062" );
		cloakonnpcself( "Villager#LuE063" );
		ill_luanda = 15;
		setquest 5847;
		mes "担心我的酋长已经消失了。我必须告诉罗安达先生我所经历的事情。";
		close;
	}
	end;
}

com_d02_i,155,29,6	duplicate(dummy_cloaked_npc)	Villager#LuE061	4_M_ALCHE_A
com_d02_i,153,28,6	duplicate(dummy_cloaked_npc)	Villager#LuE062	4_M_03
com_d02_i,154,26,6	duplicate(dummy_cloaked_npc)	Villager#LuE063	4_M_02


// SATURDAY
com_d02_i,42,215,1	script	Shimmer#Lu06	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 16) {
		cloakoffnpcself( "First Young#LuE07" );
		cloakoffnpcself( "Second Young#LuE07" );
		cloakoffnpcself( "Third Young#LuE07" );
		end;
	}
	end;
}

com_d02_i,43,219,4	script(CLOAKED)	Third Young#LuE07	4_M_THAIONGBAK,{
	if (ill_luanda == 16) {
		npctalk "兄弟们，看来这次狩猎很顺利啊。", "", bc_self;
		mes "[第三个年轻人]";
		mes "兄弟们，看来这次狩猎很顺利啊。";
		next;
		npctalk "事情虽然有点险恶，但我想，这次一定会很赚钱吧，老三。", "第一年轻#LuE07", bc_self;
		mes "[首先年轻]";
		mes "事情虽然有点险恶，但我想这次一定会赚大钱的，老三。";
		next;
		npctalk "啊？兄弟，在那儿……我以前见过他。", "", bc_self;
		mes "[第三个年轻人]";
		mes "啊？兄弟，在那儿……我以前见过他。";
		next;
		npctalk "是啊，我猜是这样？那张脸我也记得。", "第一年轻#LuE07", bc_self;
		mes "[首先年轻]";
		mes "是啊，我猜是这样？那张脸我也记得。";
		next;
		npctalk "我听说那面色严肃的老二警告过你，但你是一个多么无所畏惧的外人啊。", "第一个年轻人#LuE07", bc_self;
		mes "[首先年轻]";
		mes "我听说那面色严肃的老二警告过你，但你是一个多么无所畏惧的外人啊。";
		next;
		npctalk "兄弟。。我都一样。。", "", bc_self;
		mes "[第三个年轻人]";
		mes "兄弟。。我都一样。。";
		next;
		npctalk "兄弟！这是一件大事。妈……村子里传来血腥味。", "二少#LuE07", bc_self;
		mes "[第二年轻]";
		mes "兄弟！这是一件大事。妈……村子里传来血腥味。";
		next;
		npctalk "什么？血腥味？村边传来血腥味？决不？现在不是关注陌生人的时候。我们快点走吧。", "第一年轻#LuE07", bc_self;
		mes "[首先年轻]";
		mes "什么？血腥味？村边传来血腥味？决不？现在不是关注陌生人的时候。我们快点走吧。";
		next;
		cloakonnpcself( "First Young#LuE07" );
		cloakonnpcself( "Second Young#LuE07" );
		cloakonnpcself();
		ill_luanda = 17;
		setquest 5847;
		mes "兄弟俩很快就消失了。我必须告诉罗安达发生了什么事。";
		close;
	}
	end;
}

com_d02_i,39,219,6	duplicate(dummy_cloaked_npc)	First Young#LuE07	4_M_THAIONGBAK
com_d02_i,41,220,4	duplicate(dummy_cloaked_npc)	Second Young#LuE07	4_M_THAIONGBAK


// (re)TUESDAY
com_d02_i,116,94,6	script(CLOAKED)	Karu#LuE08	4_M_THAIONGBAK,{
	if (ill_luanda == 18) {
		npctalk "啊！阿苏德姆，为什么？为什么？我的……我怎么找到你的……", "", bc_self;
		mes "[卡鲁]";
		mes "哇！阿苏德姆，为什么？为什么？我的……我怎么找到你的……";
		next;
		npctalk "卡..卡鲁..", "असुदेम#LuE08", bc_self;
		mes "[阿斯德姆]";
		mes "卡..卡鲁..";
		next;
		npctalk "嘿，嘿，嘿，Asudem...亲爱的...", "", bc_self;
		mes "[卡鲁]";
		mes "嘿，嘿，嘿，Asudem..亲爱的..";
		next;
		npctalk "卡鲁，别太难过..你就这样发现了我..", "असुदेम#LuE08", bc_self;
		mes "[阿斯德姆]";
		mes "卡鲁，别太难过..你就这样发现了我..";
		next;
		npctalk "我……我……很高兴……", "असुदेम#LuE08", bc_self;
		mes "[阿斯德姆]";
		mes "我……我……很高兴……";
		next;
		npctalk "这..这不是关于死亡..他们的诅咒..对你..", "", bc_self;
		mes "[卡鲁]";
		mes "这..这不是关于死亡..他们的诅咒..对你..";
		next;
		npctalk "全部..你不再..", "", bc_self;
		mes "[卡鲁]";
		mes "全部..你不再..";
		next;
		npctalk "啊...卡鲁..丈夫..萨。", "असुदेम#LuE08", bc_self;
		mes "[阿斯德姆]";
		mes "啊...卡鲁..丈夫..萨。";
		next;
		specialeffect EF_MAGICROD, AREA, "Asudem#LuE08";
		sleep2 1000;
		specialeffect EF_MAGICROD, AREA, "Asudem#LuE08";
		sleep2 1000;
		specialeffect EF_MENTALBREAK, AREA, "Asudem#LuE08";
		sleep2 1000;
		specialeffect EF_POISONSMOKE2, AREA, "Asudem#LuE08";
		cloakonnpcself( "Asudem#LuE08" );
		cloakoffnpcself( "Medusa#LuE08" );
		sleep2 1000;
		specialeffect EF_TELEPORTATION, AREA, "Medusa#LuE08";
		cloakonnpcself( "Medusa#LuE08" );
		npctalk "阿苏德姆！！！！！！！！！！！！", "", bc_self;
		mes "[卡鲁]";
		mes "असुदेम!!!!!!!!!!!!!!!";
		next;
		cloakonnpcself();
		ill_luanda = 19;
		setquest 5847;
		mes "我目睹了一件悲伤的事情。我必须告诉罗安达我的经历。";
		close;
	}
	end;
}

com_d02_i,117,94,4	duplicate(dummy_cloaked_npc)	Asudem#LuE08	4_F_01
com_d02_i,117,94,4	duplicate(dummy_cloaked_npc)	Medusa#LuE08	MEDUSA


// SUNDAY
com_d02_i,263,72,1	script	Shimmer#Lu07	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "这是一种奇异的闪光，你很可能会被吸引进去。";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "这似乎是一个不容忽视的现象。我得和国防部长罗安达谈谈。";
		close;
	}
	if (ill_luanda == 20) {
		cloakoffnpcself( "Silhouette#LuE091" );
		cloakoffnpcself( "Silhouette#LuE092" );
		end;
	}
	end;
}

com_d02_i,268,75,4	script(CLOAKED)	Silhouette#LuE091	4_GHOST_STAND,{
	if (ill_luanda == 20) {
		npctalk "我们必须赶走所有的人类并占领这片土地。", "", bc_self;
		mes "[???]";
		mes "我们必须赶走所有的人类并占领这片土地。";
		next;
		npctalk "呵呵其他时候，我会说这很疯狂，但如果我们跟随一个强有力的领导者......", "轮廓#LuE092", bc_self;
		mes "[???]";
		mes "呵呵其他时候，我会说这很疯狂，但如果我们跟随一个强有力的领导者......";
		next;
		npctalk "这不是疯狂的kkkk。", "", bc_self;
		mes "[???]";
		mes "这不是疯狂的kkkk。";
		next;
		npctalk "一旦我们占领了这片土地，传奇的力量也将属于我们。", "轮廓#LuE092", bc_self;
		mes "[???]";
		mes "一旦我们占领了这片土地，传奇的力量也将属于我们。";
		next;
		npctalk "嗅……我能闻到人类的味道。现在还不是碰到他们的时候。我们走吧。", "", bc_self;
		mes "[???]";
		mes "嗅……我能闻到人类的味道。现在还不是碰到他们的时候。我们走吧。";
		next;
		npctalk "呵呵呵呵希望这一天快点到来……", "轮廓#LuE092", bc_self;
		mes "[???]";
		mes "呵呵希望这一天快点到来..";
		next;
		cloakonnpcself();
		cloakonnpcself( "Silhouette#LuE092" );
		ill_luanda = 21;
		setquest 5847;
		mes "那些我刚才交谈过的生物呢？我需要告诉罗安达我的经历。";
		close;
	}
	end;
}

com_d02_i,266,76,6	duplicate(dummy_cloaked_npc)	Silhouette#LuE092	4_GHOST_STAND


// Daily quests
com_d02_i,238,266,4	script	Request Board#Lu	4_BOARD3,{
	if (checkweight(1201,3) == 0) {
		mes "- 您无法继续，因为您的物品太多。 -";
		close;
	}
	if (ill_luanda == 0) {
		mes "那是一个布告栏，上面写着村里要求的东西，但现在好像不是这样了。";
		close;
	}

	.@quest_menu$[0] = callsub( S_MenuGather, 5848,5849, "Evidence of eradication of Megaliths" );
	.@quest_menu$[1] = callsub( S_MenuGather, 5850,5851, "Evidence of eradication of Wootan" );
	.@quest_menu$[2] = callsub( S_MenuHunt, 5852,5853, "Operation to eradicate Megaliths" );
	.@quest_menu$[3] = callsub( S_MenuHunt, 5854,5855, "Operation to eradicate Wootan" );

	.@playtime_5849 = checkquest(5849,PLAYTIME);
	.@playtime_5851 = checkquest(5851,PLAYTIME);
	.@playtime_5853 = checkquest(5853,PLAYTIME);
	.@playtime_5855 = checkquest(5855,PLAYTIME);

	// menu to take all quests at once
	if (.@playtime_5849 > 0 || .@playtime_5851 > 0 || .@playtime_5853 > 0 || .@playtime_5855 > 0) {	// at least one of the quests is in cooldown
		.@quest_menu$[4] = "^777777[Waiting] Receive all quests^000000";
		.@all_quests = 0;
	}
	else if (isbegin_quest(5848) > 0 || isbegin_quest(5850) > 0 || isbegin_quest(5852) > 0 || isbegin_quest(5854) > 0) {	// at least one of the quests is in progress
		.@quest_menu$[4] = "^777777[Progress] Receive all quests^000000";
		.@all_quests = 1;
	}
	else {	// can take all quests
		.@quest_menu$[4] = "[Daily] Accept all quests";
		.@all_quests = 2;
	}

	switch( select( .@quest_menu$[0], .@quest_menu$[1], .@quest_menu$[2], .@quest_menu$[3], .@quest_menu$[4] ) ) {
	case 1:
		switch( .@playtime_5849 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "这个任务明天可以再做一次。";
			close;
		case 2:
			break;
		}
		switch( isbegin_quest(5848) ) {
		case 0:
			mes "这个村庄因巨石而遇到了很多麻烦。如果你给我带来 3 个" + getitemname(25638) + " 作为击败巨石的证明，我会奖励你。";
			mes "  ";
			mes "首席";
			next;
			if (select( "接受请求", "不接受" ) == 2)
				end;
			setquest 5848;
			open_quest_ui(5848);
			mes "您的请求已收到。请向^FF0000罗安达防守经理^000000汇报。";
			close;
		case 1:
		case 2:
			// note: the amount of item is not checked
			mes "^FF0000巨石被消灭的证据^000000";
			mes "您的请求正在处理中。";
			mes "You can cancel.但是，如果取消，迄今为止取得的进度将会丢失。您确定要取消吗？";
			next;
			if (select( "请勿取消", "取消" ) == 1)
				end;
			erasequest 5848;
			mes "请求已被取消。";
			close;
		}
		end;
	case 2:
		switch( .@playtime_5851 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "这个任务明天可以再做一次。";
			close;
		case 2:
			break;
		}
		switch( isbegin_quest(5850) ) {
		case 0:
			mes "乌坦部落在村里制造了很多麻烦。如果你带3个" + getitemname(25633) + "作为你打败他们的证据，我会奖励你。";
			mes "  ";
			mes "首席";
			next;
			if (select( "接受请求", "不接受" ) == 2)
				end;
			setquest 5850;
			open_quest_ui(5850);
			mes "您的请求已收到。请向^FF0000罗安达防守经理^000000汇报。";
			close;
		case 1:
		case 2:
			// note: the amount of item is not checked
			mes "^FF0000乌坦灭绝的证据^000000";
			mes "您的请求正在处理中。";
			mes "您可以取消。但是，如果取消，迄今为止取得的进度将会丢失。您确定要取消吗？";
			next;
			if (select( "请勿取消", "取消" ) == 1)
				end;
			erasequest 5850;
			mes "请求已被取消。";
			close;
		}
		end;
	case 3:
		switch( .@playtime_5853 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "这个任务明天可以再做一次。";
			close;
		case 2:
			break;
		}
		switch( checkquest(5852,HUNTING) ) {
		case -1:
			mes "我们计划征服巨石。任何能抓住 5 个" + getmonsterinfo("ILL_TRI_JOINT",MOB_NAME) + "、" + getmonsterinfo("ILL_STALACTIC_GOLEM",MOB_NAME) + " 和 " + getmonsterinfo("ILL_MEGALITH",MOB_NAME) + " 的人，请申请。";
			mes "  ";
			mes "首席";
			next;
			if (select( "接受请求", "不接受" ) == 2)
				end;
			setquest 5852;
			open_quest_ui(5852);
			mes "您的请求已收到。请向^FF0000罗安达防守经理^000000汇报。";
			close;
		case 0:
		case 1:
			mes "^FF0000巨石消灭^000000";
			mes "您的请求正在处理中。";
			mes "您可以取消。但是，如果取消，迄今为止取得的进度将会丢失。您确定要取消吗？";
			next;
			if (select( "请勿取消", "取消" ) == 1)
				end;
			erasequest 5852;
			mes "请求已被取消。";
			close;
		case 2:
			mes "您可以从防御经理罗安达那里获得该任务的奖励。";
			close;
		}
		end;
	case 4:
		switch( .@playtime_5855 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "这个任务明天可以再做一次。";
			close;
		case 2:
			break;
		}
		switch( checkquest(5854,HUNTING) ) {
		case -1:
			mes "我们已经计划收服乌坦部落了。任何能抓住 5 个 " + getmonsterinfo("ILL_STONE_SHOOTER",MOB_NAME) + "、" + getmonsterinfo("ILL_WOOTAN_SHOOTER",MOB_NAME) + " 和 " + getmonsterinfo("ILL_WOOTAN_FIGHTER",MOB_NAME) + " 的人，请申请。";
			mes "  ";
			mes "首席";
			next;
			if (select( "接受请求", "不接受" ) == 2)
				end;
			setquest 5854;
			open_quest_ui(5854);
			mes "您的请求已收到。请向^FF0000罗安达防守经理^000000汇报。";
			close;
		case 0:
		case 1:
			mes "^FF0000巨石被消灭的证据^000000";
			mes "您的请求正在处理中。";
			mes "您可以取消。但是，如果取消，迄今为止取得的进度将会丢失。您确定要取消吗？";
			next;
			if (select( "请勿取消", "取消" ) == 1)
				end;
			erasequest 5854;
			mes "请求已被取消。";
			close;
		case 2:
			mes "您可以从防御经理罗安达那里获得该任务的奖励。";
			close;
		}
		end;
	case 5:
		switch( .@all_quests ) {
		case 0:	// at least one of the quests is in cooldown
			mes "有一个任务的冷却时间尚未过去。";
			close;
		case 1:	// at least one of the quests is in progress
			mes "一些任务正在进行中。";
			close;
		case 2:	// can take all quests
			mes "您确定要接收任务板上的所有任务吗？";
			next;
			if (select( "接受", "不接受" ) == 2)
				end;
			setquest 5848;
			setquest 5850;
			setquest 5852;
			setquest 5854;
			mes "任务板上的所有任务均已收到。";
			close;
		}
		end;
	}
	end;

S_MenuGather:
	.@string$ = getarg(2);

	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( isbegin_quest(getarg(0)) ) {
		case 0:
			.@menu$ = "[Daily] " + .@string$;
			break;
		case 1:
		case 2:
			// note: the amount of item is not checked
			.@menu$ = "^777777[Progress] " + .@string$ + "^000000";
			break;
		}
		break;
	case 0:
	case 1:
		.@menu$ = "^777777[Waiting]" + .@string$ + "^000000";
		break;
	case 2:
		erasequest getarg(1);
		.@menu$ = "[Daily]" + .@string$;
		break;
	}
	return .@menu$;

S_MenuHunt:
	.@string$ = getarg(2);

	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( checkquest(getarg(0),HUNTING) ) {
		case -1:
			.@menu$ = "[Daily] " + .@string$;
			break;
		case 0:
		case 1:
			.@menu$ = "^777777[Progress] " + .@string$ + "^000000";
			break;
		case 2:
			.@menu$ = "^777777[Reward] " + .@string$ + "^000000";
			break;
		}
		break;
	case 0:
	case 1:
		.@menu$ = "^777777[Waiting] " + .@string$ + "^000000";
		break;
	case 2:
		erasequest getarg(1);
		.@menu$ = "[Daily] " + .@string$;
		break;
	}
	return .@menu$;
}


//============================================================
//= Illusion of Underwater
//============================================================
// prt_in,157,66,4	script	Jerrymon#jerry	1_M_01,{
prt_elib,57,18,4	script	Jerrymon#jerry	1_M_01,{
	if (ill_underwater == 0) {
		mes "[杰瑞兽]";
		mes "嗯……嗯……";
		next;
		mes "[杰瑞兽]";
		mes "哦，真是一个惊喜！";
		next;
		mes "[杰瑞兽]";
		mes "这是怎么回事？我现在很忙，稍后再和你聊。";
		close;
	}
	if (ill_underwater == 1) {
		mes "[杰瑞兽]";
		mes "嗯……嗯……";
		next;
		mes "[杰瑞兽]";
		mes "哦，真是一个惊喜！";
		next;
		mes "[杰瑞兽]";
		mes "这是怎么回事？我现在有点忙...";
		next;
		mes "[杰瑞兽]";
		mes "啊，你就是Raket介绍的那个人。我一直在等你。";
		mes "你能给我看看你的钓鱼竿吗？";
		next;
		mes "- 杰里蒙开始仔细检查这根棍子。 -";
		next;
		mes ".";
		next;
		mes "..";
		next;
		mes "...";
		next;
		mes "....";
		next;
		mes ".....";
		next;
		mes "[杰瑞兽]";
		mes "是的，没错……这种物质就是这样……就这样再次发现……";
		next;
		select( "你说的是什么材料？" );
		mes "[杰瑞兽]";
		mes "冒险家，你知道大海的最深处在哪里吗？";
		next;
		select( "出色地...？？" );
		mes "[杰瑞兽]";
		mes "这是一个叫做^4d4dff海沟^000000的地方。简单来说，你可以把它想象成大海中的一处深崖。";
		next;
		mes "[杰瑞兽]";
		mes "众所周知，世界海洋中有数百种不同类型的海沟。";
		next;
		mes "[杰瑞兽]";
		mes "已知最宽、最深的海沟是伊兹鲁德附近的^4d4dff巴伊亚海沟^000000。";
		next;
		mes "[杰瑞兽]";
		mes "海沟底部存在着罕见的生命形式，像我这样的海洋科学家表现出了极大的兴趣，并一直在探索它们。";
		next;
		mes "[杰瑞兽]";
		mes "虽然浅沟在一定程度上是可以探索的。";
		next;
		mes "[杰瑞兽]";
		mes "但就巴伊亚海沟而言，科学家们通过科学计算得出，由于它的深度非常深，因此不可能有任何生命存在。";
		next;
		mes "[杰瑞兽]";
		mes "我最近发现巴伊亚海沟里有生命。";
		next;
		select( "你怎么知道的？" );
		mes "[杰瑞兽]";
		mes "从那块蕴藏着我的魔法的石头就可以看出来。";
		next;
		select( "具有神奇力量的石头？" );
		mes "[杰瑞兽]";
		mes "是的，我是一名法师出身的海洋学家。我学习了海洋学的魔法。";
		next;
		mes "[杰瑞兽]";
		mes "对一块大石头施附魔，使其掉落到沟渠所在的地板上。";
		next;
		mes "[杰瑞兽]";
		mes "掉落的石头上的魔法与我相连，因此通过测量距离，我可以了解它有多深以及石头附近发生了什么。";
		next;
		mes "[杰瑞兽]";
		mes "告诉你我发现了什么......";
		next;
		mes "[杰瑞兽]";
		mes "正常海水和深层海水的成分几乎相同。但唯一不同的是巴伊亚海沟的深海。";
		next;
		mes "[杰瑞兽]";
		mes "我应该说它就像水和油吗？有一个部分他们从不混合。";
		next;
		mes "[杰瑞兽]";
		mes "彼此交汇的地方，形成了一道坚固的结界，感觉那一段的深层海水，正在拼命的阻挡着从上面流下来的海水。";
		next;
		mes "[杰瑞兽]";
		mes "水压也比正常海水低得多，因此可以认为它具有适宜生命生存的环境。";
		next;
		mes "[杰瑞兽]";
		mes "我们称之为^4d4dff深层海水^000000";
		next;
		select( "这个光泽和你说的有关系吗？" );
		mes "[杰瑞兽]";
		mes "是的！这是正确的！！";
		mes "我们只在巴伊亚海沟深处发现了深海海水的存在，获取样本非常困难。这根钓鱼竿上有很多深海海水……";
		next;
		mes "[杰瑞兽]";
		mes "你能把这根钓鱼竿留给我吗？我想，如果我把这些海水提取出来，转化为精华，我就能想出一些办法。";
		next;
		mes "[杰瑞兽]";
		mes "哦，我听说今天找到了钓鱼竿。我可以请你检查一下附近海域是否还有其他漂浮物？";
		next;
		if (select( "好的，我会回来的。", "我现在有点忙..." ) == 2) {
			mes "[杰瑞兽]";
			mes "完成后请回到我身边！";
			close;
		}
		mes "[杰瑞兽]";
		mes "是的，谢谢！我会等你的！！";
		close2;
		if (countitem(25898) > 0)
			delitem 25898,1;	// Siroods_Fish_Rod
		ill_underwater = 2;
		erasequest 3407;
		end;
	}
	if (ill_underwater == 2) {
		mes "[杰瑞兽]";
		mes "很抱歉打扰您，但是请吧。我会在这里等你。";
		close;
	}
	if (ill_underwater == 3) {
		if (countitem(25899) < 1) {
			mes "[杰瑞兽]";
			mes "很抱歉打扰您，但是请吧。我会在这里等你。";
			close;
		}
		mes "[杰瑞兽]";
		mes "啊，欢迎，冒险家！";
		next;
		mes "[杰瑞兽]";
		mes "调查进展顺利~";
		mes "嘿，你能看一下这个吗？";
		next;
		mes "[杰瑞兽]";
		mes "看到那两个小水瓶了吗？";
		next;
		mes "[杰瑞兽]";
		mes "一侧是正常的海水，另一侧是与埋在鱼竿中的深渊海水混合的海水。我会尝试混合这两者。";
		next;
		mes "- 杰瑞蒙将两种水倒入一个瓶子中并开始摇晃。 -";
		next;
		mes "[杰瑞兽]";
		mes "现在，看。正如我之前所说，它们根本不混合，是吗？";
		next;
		mes "[杰瑞兽]";
		mes "这……这！！";
		next;
		mes "[杰瑞兽]";
		mes "如果你疯狂地摇晃它！";
		next;
		mes "[杰瑞兽]";
		mes "<字体颜色= E68F8F><字体大小= 16><B>哇！！！！！！</FONT></FONT></B>";
		next;
		mes "[杰瑞兽]";
		mes "<FONT COLOR = E68F8F><FONT SIZE = 16><B>Uwachachaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa！！！！！！</FONT></FONT></B>";
		next;
		mes "[杰瑞兽]";
		mes "<字体颜色= E68F8F><字体大小= 16><B>啊啊啊啊！！！！！！</FONT></FONT></B>";
		next;
		mes "[杰瑞兽]";
		mes "啊啊啊啊啊啊啊啊啊……";
		next;
		select( "哦，我要去抓一个人，可以吗？" );
		mes "[杰瑞兽]";
		mes "保持...哇...哇...现在好。";
		next;
		mes "——看着杰里兽拿着的瓶子，我可以清楚地看到漩涡的形状。 -";
		next;
		mes "[杰瑞兽]";
		mes "现在，你看到这个漩涡了吗？这是连接巴伊亚海沟底部的通道！";
		next;
		select( "???那不就是摇晃而产生的漩涡吗？" );
		mes "[杰瑞兽]";
		mes "不，这是蕴藏着我的魔力的石头。我们来看一下。";
		next;
		mes "- 杰里蒙将一块发光的石头放入瓶子中。发光石被吸进瓶内的漩涡之中，消失得无影无踪！ -";
		next;
		select( "不对，怎么可能？" );
		mes "[杰瑞兽]";
		mes "我有没有告诉过你，蕴含我魔法的石头可以测量到我的距离？";
		next;
		mes "[杰瑞兽]";
		mes "这感觉就像我上次向巴伊亚海沟扔一块鹅卵石一样。";
		mes "如果沿着这个漩涡顺流而下，说不定就能找到钓鱼竿的主人。";
		next;
		mes "[杰瑞兽]";
		mes "问题是……钓鱼竿上的精华量并不能制造出足够大到足以容纳一个人的漩涡。";
		next;
		select( "这个金额可以吗？" );
		mes "- 向 Jerrymon 显示从 Gein 收到的^4d4dff" + getitemname(25899) + "^000000。 -";
		next;
		mes "[杰瑞兽]";
		mes "噢，以防万一，我真的找到了！";
		next;
		mes "[杰瑞兽]";
		mes "有了这个量，我想我可以制造出一个正常人可以进入的裂痕漩涡。你可以传给我。";
		next;
		mes "[杰瑞兽]";
		mes "这里地方太小，无法做这么多，所以我们就在伊兹鲁德做吧。为了得到朋友的帮助。";
		mes "那就在伊兹鲁德见吧！";
		close2;
		delitem 25899,1;	// E_Abyss1
		ill_underwater = 4;
		erasequest 3408;
		setquest 3409;
		end;
	}
	if (ill_underwater == 4) {
		mes "[杰瑞兽]";
		mes "那么我们在伊兹鲁德见面吧！！";
		close;
	}
	mes "[杰瑞兽]";
	mes "很抱歉打扰您，但是请吧。我会在这里等你。";
	close;

OnInit:
	// note: no questinfo for 3407
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3408) == 1" );
	end;
}


izlude,126,53,0	script	Sirood#SRD1	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ill_underwater > 3)
		cloakoffnpcself( "Jerrymon#jerry2" );
	if (ill_underwater > 6)
		cloakoffnpcself( "Sirood#SRD2" );
	end;
}
izlude,132,54,0	duplicate(Sirood#SRD1)	Jerrymon#jerry1	HIDDEN_WARP_NPC,4,4

izlude,126,53,4	script	Sirood#SRD2	1_M_04,{
	mes "[秘密]";
	mes "非常感谢你，冒险家。";
	next;
	mes "[秘密]";
	mes "我以为我再也不会回来了...";
	close;
}

izlude,129,49,4	script	Soup#Soup	1_M_02,{
	if (ill_underwater < 5) {
		mes "[汤]";
		mes "你好，我叫索普，是西鲁德失踪的朋友。";
		next;
		mes "[汤]";
		mes "我们四个人，Sirood、Raket、Gein 和我经常喜欢钓鱼。";
		next;
		mes "[汤]";
		mes "那天刮风……我一直为没有阻止西鲁德去钓鱼而感到非常内疚。";
		next;
		mes "[汤]";
		mes "当我听说西鲁德的鱼竿被发现时，我跳了出去。";
		next;
		mes "[汤]";
		mes "你一定有什么线索吧？";
		close;
	}
	if (ill_underwater < 7) {
		mes "[汤]";
		mes "我尽力了。";
		next;
		mes "[汤]";
		mes "西鲁德应该安全回来吗？";
		close;
	}
	mes "[汤]";
	mes "西鲁德又回到我们身边了。";
	next;
	mes "[汤]";
	mes "谢谢你，冒险家。非常感谢。";
	close;
}

izlude,135,51,4	script	Raket#Raket	1_F_MERCHANT_01,{
	if (ill_underwater < 5) {
		mes "[火箭]";
		mes "距离西鲁德失踪已经整整三个月了。";
		next;
		mes "[火箭]";
		mes "西鲁德的钓鱼竿被发现。";
		next;
		mes "[火箭]";
		mes "我有这样的感觉。";
		next;
		select( "你怎么认为？" );
		mes "[火箭]";
		mes "怎么现在才发现，这不是有人发来的消息吗？";
		next;
		select( "一看就觉得没有道理。" );
		mes "[火箭]";
		mes "哈……这只是我的错觉。今天我特别想念那个孩子。";
		close;
	}
	if (ill_underwater < 7) {
		mes "[火箭]";
		mes "呵呵……用尽全身力气好难啊……";
		next;
		mes "[火箭]";
		mes "但为了西鲁德……";
		close;
	}
	mes "[火箭]";
	mes "太感谢了！！";
	next;
	mes "[火箭]";
	mes "现在你又可以和Sirood一起钓鱼了。";
	next;
	mes "[火箭]";
	mes "我很高兴...";
	close;
}

izlude,132,49,5	script	Gein#Gein	4W_M_01,{
	if (checkweight(1201,3) == 0) {
		mes "您的物品太多。";
		mes "请清理您的物品并重试。";
		close;
	}
	if (BaseLevel < 140) {
		mes "[否]";
		mes "哈哈……怎么现在才被发现？？";
		mes "这不可能，这是……";
		next;
		mes "- 我对这个人感到非常痛苦。等我140级了再回来吧。-";
		close;
	}
	if (ill_underwater == 0) {
		mes "[否]";
		mes "哈哈……怎么现在才被发现？？";
		mes "这不可能，这是……";
		next;
		select( "您有什么顾虑吗？" );
		mes "[否]";
		mes "哦，你好...";
		next;
		mes "- 他手里拿着一根鱼竿，非常烦躁。他看起来不像是出去钓鱼的。 -";
		next;
		mes "[否]";
		mes "这根钓鱼竿属于我三个月前失踪的朋友<FONT COLOR = 4D4DFF><FONT SIZE = 16><B>Sirood</FONT></FONT></B>。我发现了一些东西！！！";
		next;
		select( "失踪了？" );
		mes "[否]";
		mes "是的……西鲁德是个钓鱼爱好者，一有机会就来这里钓鱼。";
		next;
		mes "[否]";
		mes "受西鲁德的影响，我们也爱上了钓鱼，我们四个人常常玩得很开心。";
		next;
		mes "[否]";
		mes "西鲁德对钓鱼的热情以至于他邀请我们即使风雨无阻也去钓鱼。";
		next;
		mes "[否]";
		mes "西鲁德失踪的那天恰好是雨天和风天。我穿上雨衣去钓鱼了。";
		next;
		mes "[否]";
		mes "有人邀请我们一起出去，但他们都拒绝了。";
		next;
		mes "[否]";
		mes "西鲁德独自去钓鱼，从那以后我们就没有见过他了……";
		next;
		mes "[否]";
		mes "我应该阻止你离开...";
		next;
		mes "- 盖恩擦了擦眼泪，又开始说话了。 -";
		next;
		mes "[否]";
		mes "西鲁德失踪的消息立即传遍了整个伊兹鲁德，并投入了大量的时间和人力进行了大规模的搜索，但搜索却没有找到任何线索而结束。";
		next;
		mes "[否]";
		mes "之后我们就聚在一起，到处跑去找西鲁德，但没有结果，我们准备放弃了。";
		next;
		mes "[否]";
		mes "但就在现在！！";
		next;
		mes "[否]";
		mes "3个月后！！！";
		next;
		mes "[否]";
		mes "西鲁德的钓鱼竿已经升到海平面以上。在搜索过程中，他的物品无处可寻！";
		next;
		select( "现在，冷静点……你确定这是西鲁德的钓鱼竿吗？" );
		mes "[否]";
		mes "是的，我确定！这是我经常见到的鱼竿。";
		next;
		mes "[否]";
		mes "这根鱼竿是西鲁德亲手制作的，所以是唯一的一根。你可以在这里看到手柄上的缩写，S.R.D！";
		next;
		select( "哦，那为什么现在..." );
		mes "[否]";
		mes "我现在非常惊讶和震惊，不知道该怎么办。";
		next;
		mes "——但是仔细观察钓鱼竿，我却感觉到了一些不同。这根木钓竿已经在水里浸了3个月了，但看上去还是一样，还能看到一点闪亮的光泽…… -";
		next;
		select( "那边这根鱼竿是不是有点奇怪？" );
		mes "[否]";
		mes "奇怪，这是什么？";
		next;
		mes "[否]";
		mes "呃...";
		next;
		mes "[否]";
		mes "呃……？？";
		next;
		mes "[否]";
		mes "它已经在水中浸泡了3个月了……但它根本没有被腐蚀。完全没问题吗？？";
		next;
		mes "[否]";
		mes "嗯……而且好像还有淡淡的光芒……好像鱼竿上有涂层？";
		next;
		mes "——正在听故事的似乎是盖恩朋友的人张开了嘴。 -";
		next;
		mes "[火箭]";
		mes "哪里有啊，我也想看看！！怎么了？？";
		next;
		mes "[否]";
		mes "这根钓鱼竿……在水里浸泡了三个月，却被发现是原形，更糟糕的是，处于年久失修的状态。";
		next;
		mes "[火箭]";
		mes "啊...";
		next;
		mes "[火箭]";
		mes "一...";
		next;
		mes "- Raket专注地看着他的鱼竿，然后回答了Gein。 -";
		next;
		mes "[火箭]";
		mes "我也不确定？";
		next;
		mes "[否]";
		mes "当然！！我不知道，但你愿意吗？";
		next;
		mes "[火箭]";
		mes "嗯……但我知道有人可能对这根杆略知一二。";
		next;
		mes "[否]";
		mes "WHO？？";
		next;
		select( "WHO？" );
		mes "[火箭]";
		mes "他的名字是<FONT COLOR = 4D4DFF><FONT SIZE = 16><B>Jerrymon</FONT></FONT></B>，一位海洋科学家。我见过我父亲几次。我知道你在普隆德拉东图书馆。";
		next;
		mes "[否]";
		mes "啊啊啊……那么……嘿，冒险家！！第一次见面我很抱歉，但是我可以请你帮个忙吗？我们无法离开伊兹鲁德这里……";
		next;
		mes "[否]";
		mes "请去见杰瑞蒙，给他看这根钓鱼竿……即使是微不足道的……我希望他能提供一些信息……";
		next;
		if (select( "好的。我们走吧。", "对不起。我现在有点忙..." ) == 2) {
			mes "[否]";
			mes "不……你确定吗？";
			next;
			mes "[否]";
			mes "听到这个令人心碎的故事和神秘的线索后，你是否回心转意……";
			close;
		}
		mes "[否]";
		mes "呃...谢谢！";
		next;
		mes "[否]";
		mes "^4d4dff杰里蒙^000000应该还在普隆德拉的<NAVI>[东图书馆]<INFO>prontera,192,264,</INFO></NAVI>。";
		next;
		mes "[否]";
		mes "现在，我会给你钓鱼竿，这是西鲁德的纪念品。谢谢...";
		next;
		mes "[火箭]";
		mes "什么？？？这是一个纪念品！你甚至不知道西鲁德是死是活！！";
		next;
		mes "[否]";
		mes "呃……是的，我搞错了，这是西鲁德留下的鱼竿。请好好照顾它。";
		next;
		mes "[火箭]";
		mes "我会通过父亲提前将内容告诉杰里兽！";
		next;
		mes "[Gein&Raket&汤]";
		mes "谢谢你！！！";
		close2;
		getitem 25898,1;	// Siroods_Fish_Rod
		ill_underwater = 1;
		setquest 3407;
		end;
	}
	if (ill_underwater == 1) {
		mes "[否]";
		mes "你可以按照 Raket 告诉你的那样去 Prontera 的 <NAVI>[East Library]<INFO>prontera,192,264,</INFO></NAVI>。";
		next;
		mes "[否]";
		mes "照顾好你自己！！我希望哪怕是最小的线索......";
		close;
	}
	if (ill_underwater == 2) {
		mes "[否]";
		mes "啊，你来了！！！";
		next;
		mes "[否]";
		mes "您有关于西鲁德的信息吗？";
		next;
		mes "- 我转达了从杰瑞蒙那里听到的消息。 -";
		next;
		mes "[否]";
		mes "啊……原来如此，我以前从来没有听说过战壕啊。";
		next;
		mes "[否]";
		mes "我不敢相信伊兹鲁德附近有这么大这么深的沟渠……";
		next;
		mes "[否]";
		mes "哦，顺便问一下，你回来还有什么需要吗？";
		next;
		select( "我想知道除了钓鱼竿之外，是否还发现了其他东西。" );
		mes "[否]";
		mes "哦，对了！";
		next;
		mes "[否]";
		mes "这是在发现鱼竿的地方附近用登陆网捞起的一大块。";
		next;
		mes "——这个肿块是杰里蒙说的。";
		mes "^4d4dff一定是深渊的精华^000000。 -";
		next;
		mes "[否]";
		mes "闪闪发亮的东西，和西鲁德的钓鱼竿有同样的感觉，所以我暂时把它固定住了。";
		mes "这个金块能帮忙吗？";
		next;
		select( "谢谢，这将是一个很大的帮助。" );
		mes "[否]";
		mes "你要回杰里蒙身边吗？请小心。";
		close2;
		getitem 25899,1;	// E_Abyss1
		ill_underwater = 3;
		setquest 3408;
		end;
	}
	if (ill_underwater == 3) {
		mes "[否]";
		mes "我希望西鲁德能够完好无损地出现在我们面前，就像钓鱼竿完好无损地出现一样……";
		next;
		mes "[否]";
		mes "如果您有任何新信息，请告诉我！";
		close;
	}
	if (ill_underwater < 7) {
		mes "[否]";
		mes "嘿嘿嘿...冒险家你好，嘿嘿...我累得动不了了...";
		close;
	}
	mes "[否]";
	mes "谢谢你，冒险家。";
	next;
	mes "[否]";
	mes "能够再次见到西鲁德就像是一场梦。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_underwater == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "ill_underwater == 2" );
	end;
}

izlude,132,54,4	script(CLOAKED)	Jerrymon#jerry2	1_M_01,{
	if (ill_underwater < 4)
		end;
	if (ill_underwater == 4) {
		mes "[杰瑞兽]";
		mes "啊你来了！！";
		next;
		mes "[杰瑞兽]";
		mes "我们已做好充分准备，迎接冒险者的到来。";
		next;
		mes "- 盖恩喘着气向他的两个朋友打招呼。 -";
		next;
		mes "[否]";
		mes "哈哈哈哈哈哈哈哈哈哈哈哈……啊，欢迎冒险家。";
		next;
		mes "[否]";
		mes "虽然不知道原理是什么，但还是按照杰里兽大人的吩咐认真地搅拌了！！";
		next;
		mes "[火箭和汤]";
		mes "嘿……嘿……嘿……啊……你好。";
		next;
		mes "[杰瑞兽]";
		specialeffect EF_MAP_MAGICZONE3;
		mes "好吧，我们开始吧？";
		next;
		mes "[杰瑞兽]";
		mes "漩涡很快就会形成。";
		next;
		mes "[杰瑞兽]";
		mes "当我给你信号时握住我的手！";
		next;
		select( "不，等等。你现在就要离开吗？" );
		mes "[杰瑞兽]";
		mes "是是是，你先别想了！相信我吧~~!!";
		next;
		mes "[杰瑞兽]";
		mes "现在好吧。握住我的手！";
		next;
		specialeffect EF_CASTSPIN2, AREA;
		mes "[杰瑞兽]";
		mes "哇！转啊转啊~~！！";
		close2;
		ill_underwater = 5;
		erasequest 3409;
		specialeffect EF_CASTSPIN2, AREA;
		warp "iz_d04_i",130,227;
		end;
	}
	mes "[杰瑞兽]";
	mes "你好！！";
	next;
	mes "[杰瑞兽]";
	mes "谢谢你，冒险家，我每天都过得开心又兴奋。";
	next;
	mes "[杰瑞兽]";
	mes "你还想再去一次深海吗？我会追随你的！！";
	next;
	if (select( "请", "我下次再去" ) == 2) {
		mes "[杰瑞兽]";
		mes "是啊……那我就等你了。";
		close;
	}
	mes "[杰瑞兽]";
	specialeffect EF_MAP_MAGICZONE3;
	mes "好的。";
	next;
	specialeffect EF_CASTSPIN2;
	mes "[杰瑞兽]";
	mes "快点！走吧~~！！耶！！";
	close2;
	specialeffect EF_CASTSPIN2, AREA;
	warp "iz_d04_i",130,227;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3409) == 1" );
	end;
}


iz_d04_i,127,228,4	script	Jerrymon#jerry3	1_M_01,{
	if (checkweight(1201,3) == 0) {
		mes "您的物品太多。";
		mes "请清理您的物品并重试。";
		close;
	}
	if (ill_underwater < 5)
		end;
	if (ill_underwater == 5) {
		switch( checkquest(3411,HUNTING) ) {
		case -1:
			mes "[杰瑞兽]";
			mes "哇……这紫色的海……太棒了！！！";
			next;
			mes "[杰瑞兽]";
			mes "太神奇了，我们可以不用鳃呼吸，没有海压，甚至还有我从未见过的海洋生物……！！！";
			next;
			mes "[杰瑞兽]";
			mes "还有不止一两件事要调查，我会很忙的。";
			mes "哇……太刺激了！！！我认为这是我14年海洋学家生涯中最激动人心的时刻！";
			next;
			mes "[杰瑞兽]";
			mes "露露拉~~~";
			next;
			select( "哦嘿，我是来找西鲁德的……" );
			mes "[杰瑞兽]";
			mes "啊啊啊……那个，对吧？这应该优先。";
			next;
			mes "[杰瑞兽]";
			mes "为了将 Sirood 带回岸上，我们需要额外的^4d4dff" + getitemname(25899) + "^000000。问题是如何得到它...";
			next;
			mes "[杰瑞兽]";
			mes "我一直在这里观察着深海生物，我见过其中一些散发着深渊精华的光芒。";
			mes "有时他们似乎威胁我们。";
			next;
			mes "[杰瑞兽]";
			mes "从这个意义上说，你能对付一些深海生物吗？也许我们可以从他们那里得到^4d4dff" + getitemname(25899) + "^000000。";
			next;
			mes "[杰瑞兽]";
			mes "请取出^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000、^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000和^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000各10个。";
			next;
			if (select( "好的", "下次我会这样做" ) == 2) {
				mes "[杰瑞兽]";
				mes "是是是~我就在这里等你！";
				close;
			}
			mes "[杰瑞兽]";
			mes "是是是~我就在这里等你！";
			close2;
			setquest 3411;
			end;
		case 0:
		case 1:
			mes "[杰瑞兽]";
			mes "请取出^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000、^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000和^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000各10个。";
			next;
			mes "[杰瑞兽]";
			mes "我会在这里等你。";
			close;
		case 2:
			mes "[杰瑞兽]";
			mes "感谢你们的辛勤付出，你们还带来了^4d4dff" + getitemname(25899) + "^000000！！果然，我的预测是正确的。";
			next;
			mes "[杰瑞兽]";
			mes "看来我们只需要大约 10 ^4d4dff" + getitemname(25899) + "^000000 就能将 Sirood 送回岸上。";
			next;
			mes "[杰瑞兽]";
			mes "如果你收集它们，我会给你制造一个漩涡。";
			next;
			mes "[杰瑞兽]";
			mes "哦，这是我在研究时发现的一块石头。我之所以一直保留它，是因为它看起来像是冒险者可以使用的东西，所以请收下它。";
			next;
			mes "[杰瑞兽]";
			mes "那就小心点吧！";
			close2;
			getitem 25271,2;	// IllusionStone
			ill_underwater = 6;
			erasequest 3411;
			setquest 3412;
			getexp 4441860,3109150;
			end;
		}
		end;
	}
	if (ill_underwater == 6) {
		if (countitem(25899) < 10) {
			mes "[杰瑞兽]";
			mes "请携带^4d4dff10 " + getitemname(25899) + "^000000。";
			next;
			mes "[杰瑞兽]";
			mes "我想自己拯救它，但正如你所看到的，我很弱，哎呀。";
			close;
		}
		mes "[杰瑞兽]";
		mes "感谢您的辛勤劳动！！您带来了 10 个^4d4dff" + getitemname(25899) + "^000000。";
		next;
		mes "[杰瑞兽]";
		mes "你现在想上岸吗？";
		next;
		if (select( "上岸", "现在不上岸" ) == 2) {
			mes "[杰瑞兽]";
			mes "当你准备好上岸时就跟我说话吧！";
			close;
		}
		mes "[杰瑞兽]";
		mes "我在等待冒险者的时候又发现了这个。请采纳！！";
		next;
		mes "[杰瑞兽]";
		mes "好吧，让我们把这个浓缩一下……";
		next;
		mes "[杰瑞兽]";
		mes "呃...!!";
		next;
		mes "[杰瑞兽]";
		mes "现在，冒险家和西鲁德！！你能帮助我吗？？诶诶诶！！！！";
		next;
		mes "——杰里兽面前产生了一个巨大的漩涡！ -";
		specialeffect EF_MAP_MAGICZONE3;
		next;
		mes "[杰瑞兽]";
		mes "那我就先穿越了！！！仔细跟着我吧！";
		specialeffect EF_CASTSPIN2;
		close2;
		delitem 25899,10;	// E_Abyss1
		ill_underwater = 7;
		erasequest 3412;
		if (isbegin_quest(3410) == 1)
			erasequest 3410;
		getitem 25271,2;	// IllusionStone
		getexp 4441860,3109150;
		warp "izlude",128,54;
		end;
	}

	// daily
	if ((checkquest(3414,PLAYTIME) == 0 || checkquest(3414,PLAYTIME) == 1) && (checkquest(3416,PLAYTIME) == 0 || checkquest(3416,PLAYTIME) == 1)) {
		mes "[杰瑞兽]";
		mes "我已经准备好了今天调查所需的一切，谢谢！！";
		next;
		mes "[杰瑞兽]";
		mes "看起来你的事情已经完成了。您想搬到伊兹鲁德吗？";
		next;
		if (select( "移动", "不要移动" ) == 2) {
			mes "[杰瑞兽]";
			mes "如果您需要任何帮助，请告诉我！";
			close;
		}
		specialeffect EF_MAP_MAGICZONE3;
		mes "[杰瑞兽]";
		mes "好吧，呵呵！";
		next;
		mes "[杰瑞兽]";
		mes "我要穿越了~~啊！！";
		specialeffect EF_CASTSPIN2;
		close2;
		warp "izlude",128,54;
		end;
	}
	mes "[杰瑞兽]";
	mes "你好，研究进展顺利。";
	next;
	mes "[杰瑞兽]";
	mes "如果我们做得好的话，或许能够让连接这里和伊兹鲁德的漩涡永远持续下去！";
	next;
	mes "[杰瑞兽]";
	mes "那么，你能帮我多一点吗？";
	next;
	mes "[杰瑞兽]";
	mes "我需要更多^4d4dff" + getitemname(25899) + "^000000，并且我希望你能照顾好妨碍我研究的^4d4dff深海生物^000000。";
	next;
	switch( select( "好的", "我下次就这么做", "我想回伊兹鲁德" ) ) {
	case 1:
		mes "[杰瑞兽]";
		mes "谢谢！！你能为我做点什么吗？";
		next;

		switch( checkquest(3414,PLAYTIME) ) {
		case -1:
			switch( isbegin_quest(3413) ) {
			case 0:
				.@menu$[0] = "Collect " + getitemname(25899) + "";
				break;
			case 1:
				if (countitem(25899) < 10)
					.@menu$[0] = "Collecting " + getitemname(25899) + " - In Progress";
				else
					.@menu$[0] = "Collect " + getitemname(25899) + " - Done";
				break;
			case 2:
				end;
			}
			break;
		case 0:
		case 1:
			.@menu$[0] = "^999999" + getitemname(25899) + " Collection - Pending^000000";
			break;
		case 2:
			.@menu$[0] = "Collect " + getitemname(25899) + "";
			break;
		}

		switch( checkquest(3416,PLAYTIME) ) {
		case -1:
			switch( checkquest(3415,HUNTING) ) {
			case -1:
				.@menu$[1] = "Kill Deep Sea Creatures";
				break;
			case 0:
			case 1:
				.@menu$[1] = "Kill sea creatures - In Progress";
				break;
			case 2:
				.@menu$[1] = "Kill Deep Sea Creatures - Done";
				break;
			}
			break;
		case 0:
		case 1:
			.@menu$[1] = "^999999Deep Sea Creatures Killed - Pending^000000";
			break;
		case 2:
			.@menu$[1] = "Kill Deep Sea Creatures";
			break;
		}

		switch( select( .@menu$[0], .@menu$[1], "下次。" ) ) {
		case 1:
			switch( checkquest(3414,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				end;	// todo
			case 2:
				erasequest 3414;
				break;
			}
			switch( isbegin_quest(3413) ) {
			case 0:
				mes "[杰瑞兽]";
				mes "^4d4dff" + getitemname(25899) + "^000000可以从这里的所有深海生物中获得。";
				mes "我现在需要10个。";
				next;
				mes "[杰瑞兽]";
				mes "那就照顾好自己吧~~！！";
				close2;
				setquest 3413;
				end;
			case 1:
				if (countitem(25899) < 10) {
					mes "[杰瑞兽]";
					mes "我需要 10 个^4d4dff" + getitemname(25899) + "^000000。";
					next;
					mes "[杰瑞兽]";
					mes "收集完所有精华后就回来找我吧！";
					close;
				}
				mes "[杰瑞兽]";
				mes "您已收集了所有" + getitemname(25899) + "！";
				next;
				mes "[杰瑞兽]";
				mes "谢谢，我会在我的研究中充分利用它。";
				close2;
				delitem 25899,10;	// E_Abyss1
				getexp 4441860,3109150;
				erasequest 3413;
				setquest 3414;
				getitem 25271,1;	// IllusionStone
				end;
			case 2:
				end;
			}
			end;
		case 2:
			switch( checkquest(3416,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				end;	// todo
			case 2:
				erasequest 3416;
				break;
			}
			switch( checkquest(3415,HUNTING) ) {
			case -1:
				mes "[杰瑞兽]";
				mes "请分别杀死 10 个在周围漫游的 ^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000、^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000 和 ^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000在这里。";
				next;
				mes "[杰瑞兽]";
				mes "那就照顾好自己吧~~!!";
				close2;
				setquest 3415;
				end;
			case 0:
			case 1:
				mes "[杰瑞兽]";
				mes "请分别杀死 ^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000、^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000 和 ^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000 各 10 个。";
				close;
			case 2:
				mes "[杰瑞兽]";
				mes "你已经处理完了所有的深海生物，谢谢你的辛劳。";
				next;
				mes "[杰瑞兽]";
				mes "如果我需要帮助，我会回复你。谢谢！！";
				close2;
				getitem 25271,1;	// IllusionStone
				getexp 4441860,3109150;
				erasequest 3415;
				setquest 3416;
				end;
			}
			end;
		case 3:
			mes "[杰瑞兽]";
			mes "我唯一能请求的人就是你……";
			next;
			mes "[杰瑞兽]";
			mes "如果您改变主意，请随时告诉我！";
			close;
		}
		end;
	case 2:
		mes "[杰瑞兽]";
		mes "我会在这里呆一段时间，所以如果你改变主意请告诉我！";
		close;
	case 3:
		specialeffect EF_MAP_MAGICZONE3;
		mes "[杰瑞兽]";
		mes "好吧，呵呵！";
		next;
		mes "[杰瑞兽]";
		mes "我要穿越了~~啊！！";
		specialeffect EF_CASTSPIN2;
		close2;
		warp "izlude",128,54;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_underwater == 5 && checkquest(3411,HUNTING) == -1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "ill_underwater == 5 && checkquest(3411,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3412) == 1 && countitem(25899) >= 10" );

	// daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ill_underwater == 7 && checkquest(3414,PLAYTIME) == -1 && isbegin_quest(3413) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(3413) == 1 && countitem(25899) >= 10" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3414,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ill_underwater == 7 && checkquest(3416,PLAYTIME) == -1 && checkquest(3415,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3415,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3416,PLAYTIME) == 2" );
	end;
}


iz_d04_i,134,223,4	script	Jane#Jane01	1_F_01,{
	if (ill_underwater < 6) {
		mes "[???]";
		mes "你好。";
		next;
		select( "你是西鲁德吗？" );
		mes "[简]";
		mes "不，我叫简。";
		next;
		mes "[简]";
		mes "秘密...？";
		mes "我好像在哪里听过这个名字...";
		close;
	}
	mes "[简]";
	mes "你好，看来你来这儿有一段时间了...";
	next;
	mes "[简]";
	mes "你喜欢吗？这不也是一个非常迷人的地方吗？";
	next;
	mes "[简]";
	mes "我应该回我的家乡...";
	close;
}

iz_d04_i,142,216,4	script	Sunrin#Sun01	4_F_03,{
	if (ill_underwater < 6) {
		mes "[???]";
		mes "你说你要找一个叫西鲁德的人？";
		next;
		mes "[Sunrin]";
		mes "我的名字是孙凛。";
		next;
		mes "[Sunrin]";
		mes "西鲁德……啊，我想我知道他是谁了。";
		next;
		mes "[Sunrin]";
		mes "一直向左走，你就会找到他。";
		next;
		mes "[Sunrin]";
		mes "那么今天祝你有美好的一天！！";
		close;
	}
	mes "[Sunrin]";
	mes "这里的所有人都是移民和定居者。";
	next;
	mes "[Sunrin]";
	mes "正如你所看到的，这些深处有文明的痕迹，但这里的每个人都是外来者。";
	next;
	mes "[Sunrin]";
	mes "你很快就会习惯的。";
	next;
	mes "[Sunrin]";
	mes "海怪时不时会发起攻击，但仅此而已……";
	close;
}

iz_d04_i,125,226,0	script	Sirood#SRD3	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ill_underwater < 7 && isbegin_quest(3410) == 0)
		cloakoffnpcself( "Sirood#SRD4" );
	end;
}

iz_d04_i,125,226,5	script(CLOAKED)	Sirood#SRD4	1_M_04,{
	if (ill_underwater != 5 && ill_underwater != 6)
		end;
	switch( isbegin_quest(3410) ) {
	case 0:
		mes "[秘密]";
		mes "你好，冒险家。";
		next;
		mes "- 西鲁德向我打招呼，就好像他一直在等待一样。 -";
		next;
		mes "[秘密]";
		mes "看来我发的消息已经到达伊兹鲁德了，真是太高兴了……";
		next;
		mes "[秘密]";
		mes "大约3个月前...我在一个风雨交加的日子去钓鱼。";
		next;
		mes "[秘密]";
		mes "当我钓到第一条鱼后，当我试图用鱼竿把它捞出来时，绊倒并掉进了水里。";
		next;
		mes "[秘密]";
		mes "我竭尽全力地想游出去，但我感觉有什么东西用巨大的力量把我拉了进去。";
		next;
		mes "[秘密]";
		mes "什么，看起来就像一个漩涡……我以为我要死了……当我醒来时，我发现了这个地方。";
		next;
		mes "[秘密]";
		mes "我不知道为什么我无法呼吸，也不知道为什么即使不吃东西我也不觉得饿。";
		next;
		mes "[秘密]";
		mes "而观察这里的周围，时不时就能看到一些小漩涡的形成。";
		next;
		mes "[秘密]";
		mes "我有预感，这和我卷入的漩涡是一样的。";
		next;
		mes "[秘密]";
		mes "漩涡的持续时间非常短。光是把写有我名字的鱼竿放进漩涡里，我就花了两个月的时间。";
		next;
		mes "[秘密]";
		mes "等待有人发现...";
		next;
		mes "[秘密]";
		mes "你确定你是带着那根钓鱼竿来找我的吗？";
		next;
		select( "这是正确的" );
		mes "[秘密]";
		mes "啊，这真是一种解脱……如果你上岸时能带上我，我会很感激。";
		next;
		mes "- 我认为我们应该和杰里蒙谈谈将西鲁德送上岸的工作。 -";
		close2;
		setquest 3410;
		end;
	case 1:
		mes "[秘密]";
		mes "冒险家，上岸时请带上我。";
		close;
	case 2:
		end;
	}
	end;
}

iz_d04_i,146,226,4	script	Nick#Nick01	2_M_SAGE_B,{
	mes "[尼克]";
	mes "如何？值得住在这里吗？";
	next;
	mes "[尼克]";
	mes "这里比其他地方都更深，能够自由呼吸真是太神奇了。";
	mes "我不确定这是如何运作的。";
	close;
}


// Floor 2
iz_d04_i,129,232,5	script	Gatekeeper#guard1	4_M_KY_SOLD,{
	if (BaseLevel < 180) {
		mes "[看门人]";
		mes "你的实力还不足以跨越到较低的层次。";
		//close;	// close is used on official
		next;
		mes "[看门人]";
		mes "请达到180级以上后再回来。";
		close;
	}
	mes "[看门人]";
	mes "如果你下楼，你会遇到一些非常恶毒的鱼。这样可以吗？";
	next;
	if (select( "当然", "我下次再来" ) == 2) {
		mes "[看门人]";
		mes "当你准备好穿越时，请再跟我说话。";
		close;
	}
	mes "[看门人]";
	mes "那么要小心。";
	close2;
	warp "iz_d05_i",141,186;
	end;
}

iz_d05_i,141,188,5	script	Guardian#guard2	4_M_KY_SOLD,{
	mes "[看门人]";
	mes "你好，你想再上楼吗？";
	next;
	if (select( "是的", "不" ) == 2) {
		mes "[看门人]";
		mes "当你准备好穿越时，请再跟我说话。";
		close;
	}
	mes "[看门人]";
	mes "那么要小心。";
	close2;
	warp "iz_d04_i",129,227;
	end;
}

iz_d05_i,138,186,5	script	Kena#Kena	4_M_02,{
	if (checkweight(1201,3) == 0) {
		mes "您的物品太多。";
		mes "请清理您的物品并重试。";
		close;
	}
	if (BaseLevel < 180)
		end;
	if (ill_underwater < 5)
		end;
	if ((checkquest(3418,PLAYTIME) == 0 || checkquest(3418,PLAYTIME) == 1) && (checkquest(3420,PLAYTIME) == 0 || checkquest(3420,PLAYTIME) == 1)) {
		mes "[得到]";
		mes "感谢您的辛勤工作。今天好好休息，明天再来拜访我们。";
		close;
	}
	mes "[得到]";
	mes "你好，冒险家。";
	next;
	mes "[得到]";
	mes "听说下层有很多危险的深海生物，但是当我来到这里的时候，它们比我想象的还要危险。";
	next;
	mes "[得到]";
	mes "不久前，当一只下层生物来到上层时，引起了一阵轩然大波。";
	next;
	mes "[得到]";
	mes "深海生物的数量正在增加。冒险家，可以请你帮忙吗？";
	next;
	if (select( "是的", "不" ) == 2) {
		mes "[得到]";
		mes "哎呀...";
		next;
		mes "[得到]";
		mes "如果无人看管的话会很危险...";
		close;
	}
	mes "[得到]";
	mes "谢谢你，如果你能帮我打败深海生物或鱼人，我将不胜感激。";
	next;
	mes "[得到]";
	mes "你想做什么？";
	next;
	.@menu$[0] = callsub( S_Quest, "Kill Deep Sea Creatures", 3418,3417 );
	.@menu$[1] = callsub( S_Quest, "Destroy the Deep Sea Fishmen", 3420,3419 );

	switch( select( .@menu$[0], .@menu$[1], "下次。" ) ) {
	case 1:
		switch( checkquest(3418,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[得到]";
			mes "我想今天就够了，请明天再来。";
			close;
		case 2:
			erasequest 3418;
			break;
		}
		switch( checkquest(3417,HUNTING) ) {
		case -1:
			mes "[得到]";
			mes "请分别杀死 10 个 ^4d4dff" + getmonsterinfo("ILL_SWORD_FISH", MOB_NAME) + "^000000、^4d4dff" + getmonsterinfo("ILL_PHEN", MOB_NAME) + "^000000，以及^4d4dff" + getmonsterinfo("ILL_KING_DRAMOH", MOB_NAME) + "^000000。";
			next;
			mes "[得到]";
			mes "这些怪物非常凶猛，所以要小心。";
			next;
			mes "[得到]";
			mes "谢谢。";
			close2;
			setquest 3417;
			end;
		case 0:
		case 1:
			mes "[得到]";
			mes "^4d4dff" + getmonsterinfo("ILL_SWORD_FISH", MOB_NAME) + "^000000、^4d4dff" + getmonsterinfo("ILL_PHEN", MOB_NAME) + "^000000 和 ^4d4dff" + getmonsterinfo("ILL_KING_DRAMOH", MOB_NAME) + "^000000。";
			next;
			mes "[得到]";
			mes "请各杀10个。";
			close;
		case 2:
			mes "[得到]";
			mes "都已经被淘汰了，谢谢你们的努力。";
			next;
			mes "[得到]";
			mes "如果你有时间，请明天再来。我会等你。";
			close2;
			getitem 25271,1;	// IllusionStone
			getexp 20107500,14075250;
			erasequest 3417;
			setquest 3418;
			end;
		}
		end;
	case 2:
		switch( checkquest(3420,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[得到]";
			mes "我想今天就够了，请明天再来。";
			close;
		case 2:
			erasequest 3420;
			break;
		}
		switch( checkquest(3419,HUNTING) ) {
		case -1:
			mes "[得到]";
			mes "请分别取出 15 个 ^4d4dff" + getmonsterinfo("ILL_SEDORA", MOB_NAME) + "^000000 和 ^4d4dff" + getmonsterinfo("ILL_SROUF", MOB_NAME) + "^000000。";
			next;
			mes "[得到]";
			mes "它们很烦人，所以要小心。";
			close2;
			setquest 3419;
			end;
		case 0:
		case 1:
			mes "[得到]";
			mes "请分别取出 15 个 ^4d4dff" + getmonsterinfo("ILL_SEDORA", MOB_NAME) + "^000000 和 ^4d4dff" + getmonsterinfo("ILL_SROUF", MOB_NAME) + "^000000。";
			close;
		case 2:
			mes "[得到]";
			mes "都已经被淘汰了，谢谢你们的努力。";
			next;
			mes "[得到]";
			mes "请明天适当的时候过来。我会等你。";
			close2;
			getitem 25271,1;	// IllusionStone
			getexp 20107500,14075250;
			setquest 3420;
			erasequest 3419;
			end;
		}
		end;
	case 3:
		mes "[得到]";
		mes "哎呀...";
		next;
		mes "[得到]";
		mes "如果无人看管的话会很危险...";
		close;
	}
	end;

S_Quest:
	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( checkquest(getarg(2),HUNTING) ) {
		case -1:
			.@string$ = getarg(0);
			break;
		case 0:
		case 1:
			.@string$ = getarg(0) + " - In Progress";
			break;
		case 2:
			.@string$ = getarg(0) + " - Done";
			break;
		}
		break;
	case 0:
	case 1:
		.@string$ = "^999999" + getarg(0) + " - Pending^000000";
		break;
	case 2:
		.@string$ = getarg(0);
		break;
	}
	return .@string$;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3418,PLAYTIME) == -1 && checkquest(3417,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3417,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3418,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3420,PLAYTIME) == -1 && checkquest(3419,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3419,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3420,PLAYTIME) == 2" );
	end;
}


//============================================================
//= Illusion of Twins
//============================================================
// anthell02,172,189,5	script	Yolanda#1F	ASSASSIN,{
anthell02,172,189,5	script	Yolanda#1F	HIDDEN_NPC,{
	if (checkweight(1201,3) == 0) {
		mes "- 你无法继续任务，因为你的物品太多。 -";
		close;
	}
	if (BaseLevel < 160) {
		mes "[约兰达]";
		mes "我们不能这样...";
		next;
		mes "[米尔科]";
		mes "但直到有足够强大的冒险家到达那里......";
		next;
		mes "== 这是 160 级或更高级别的任务 ==";
		close;
	}
	if (ill_anthell == 0) {
		emotion ET_PROFUSELY_SWEAT;
		mes "[约兰达]";
		mes "你真的进去了吗？";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[米尔科]";
		mes "这是正确的。很多人都说看到了。";
		mes "既然他说自己是一名左臂受伤的护林员，那么他不可能是他见过的唯一朋友。";
		next;
		mes "[约兰达]";
		mes "我应该怎么办？如果我受了那样的伤，别说搜寻了……";
		next;
		mes "[米尔科]";
		mes "哦，等等！";
		mes "那里的冒险家，等一下！";
		next;
		select( "我？" );
		mes "[米尔科]";
		mes "你来这儿有一段时间了吗？";
		mes "那太棒了。在这里，我们最近找到了一种更深入的方法。";
		next;
		emotion ET_PROFUSELY_SWEAT;
		ill_anthell = 1;
		setquest 8719;
		mes "[尤兰达]";
		mes "嘿，如果我告诉你呢！这不是我的研究，而是你的！";
		next;
		select( "说着说着就睡了..." );
		mes "[" + strcharinfo(0) + "]";
		mes "你对陌生人这么说？";
		next;
		mes "[约兰达]";
		mes "这是正确的！冒险家，";
		mes "抱歉，请稍等。";
		npctalk "Yolanda：你自己到底知道怎么做？", "", bc_self;
		npctalk "Mirko：嘿，那我该去还是刚刚出现的冒险者去？", "米尔科#1F", bc_self;
		close;
	}
	if (ill_anthell == 1) {
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[米尔科]";
		mes "怎么样，我现在需要雇用更多人。";
		mes "连废墟都算不上，去野外怎么样？";
		next;
		emotion ET_PROFUSELY_SWEAT;
		mes "[尤兰达]";
		mes "让我们不要总是犯错误，让我来跟进吧。";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[米尔科]";
		mes "一位冒险家正在等你。";
		mes "我们稍后再聊吧？";
		mes "好吧，冒险家。";
		mes "你的名字是" + strcharinfo(0) + "？";
		next;
		mes "[米尔科]";
		mes "是的，" + strcharinfo(0) + ".";
		mes "我会进入正题。";
		next;
		mes "[米尔科]";
		mes "我是 Mirko，那是 Yolanda";
		mes "然后，一名受轻伤的护林员进入了我之前提到的新发现的蚁丘。我认为...";
		mes "我现在的目标不是探索，我希望你能营救游侠和他的朋友们。";
		next;
		mes "[米尔科]";
		mes "游侠的名字叫布里亚申……";
		mes "Briashen 提到的同事是 Khahris，";
		mes "据布里亚申说，他对她来说就像双胞胎。";
		next;
		ill_anthell = 2;
		erasequest 8719;
		setquest 8720;
		mes "[米尔科]";
		mes "一旦找到其中之一";
		mes "我要你带我出去。";
		mes "尸体就好了，拜托。";
		mes "准备好后给我回电话";
		close;
	}
	if (ill_anthell == 2) {
		mes "[约兰达]";
		mes "怎么了...";
		close;
	}
	if (ill_anthell == 3) {
		mes "[约兰达]";
		mes "如果我再坚强一点就好了……";
		close;
	}
	if (ill_anthell == 4) {
		mes "[约兰达]";
		mes "你见过布里亚申吗？";
		mes "你还活着吗？我很高兴...你为什么不带我出去？";
		mes "啊...";
		mes "...";
		next;
		mes "[约兰达]";
		mes "尝试再次与 Mirko 交谈。";
		mes "我想你和我的想法是一样的。";
		close;
	}
	if (ill_anthell == 5 || ill_anthell == 6) {
		mes "[尤兰达]";
		mes "如果我们也能去就好了...";
		mes "照顾好布里亚申。";
		close;
	}
	if (ill_anthell == 7) {
		mes "[约兰达]";
		mes "真是一个惊喜！";
		mes "它是从哪里来的？";
		next;
		select( "它反弹了" );
		mes "[约兰达]";
		mes "什么？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "有三个人看起来像卡里斯……";
		next;
		mes "== 向 Mirko 和 Yolanda 解释了一切。 ==";
		next;
		mes "[米尔科]";
		mes "三个人在谈话中消失了。";
		mes "而且，你最后见到的人是……维塔？";
		next;
		mes "[约兰达]";
		mes "也许...也许..";
		mes "难道这三个人都不是卡赫里人，而不是长得像他的那个人吗？";
		next;
		mes "[米尔科]";
		mes "什么？";
		mes "如果" + strcharinfo(0) + "独自一人在那里，也有可能是幻觉吧？";
		next;
		mes "[尤兰达]";
		mes "我听说布里亚申就是这么做的。当我和卡里斯在一起时，蚂蚁并没有攻击我。";
		next;
		mes "[米尔科]";
		mes "但最后玛雅...";
		next;
		mes "[约兰达]";
		mes "如果是这样呢？";
		next;
		mes "[约兰达]";
		mes "这是一个假设。";
		mes "卡里斯……和维塔塔在一起，所以其他蚂蚁显然不会碰它。";
		mes "蚂蚁不是蚁群吗？";
		next;
		mes "[约兰达]";
		mes "但玛雅人是地下城的统治者。";
		next;
		mes "[米尔科]";
		mes "一...";
		next;
		mes "[尤兰达]";
		mes "如果你能伤害自己...";
		next;
		mes "[米尔科]";
		mes "我也许能摸到它。";
		next;
		mes "[尤兰达]";
		mes "维塔塔的行为对她的地位构成了威胁……";
		next;
		mes "[米尔科]";
		mes "!!";
		mes "那么现在真正危险的是...";
		next;
		mes "[米尔科]";
		mes "" + strcharinfo(0) + "，现在这是假设，但现在 Briashen 真的很危险！";
		next;
		if (select( "好的，我会回来的", "我需要一些时间准备" ) == 2) {
			mes "[米尔科]";
			mes "事情很紧急，我就赶紧问问你吧！";
			close;
		}
		mes "[米尔科]";
		mes "请！";
		close2;
		warp "ant_d02_i",172,185;
		ill_anthell = 8;
		erasequest 8728;
		setquest 8729;
		open_quest_ui(8729);
		end;
	}
	if (ill_anthell == 8) {
		mes "[尤兰达]";
		mes "请，" + strcharinfo(0) + "...";
		close;
	}
	if (ill_anthell == 9) {
		mes "[约兰达]";
		mes "...";
		close;
	}
	mes "[约兰达]";
	mes "我将进行这项研究一段时间。";
	mes "并不多。以后我再去打钱。";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 12;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 9;
	setunitdata .@npc_id, UNPC_HEADTOP, 1501;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_anthell == 0" );	// note: some dialogs are similiar to the sage npc but only this questinfo is displayed for this npc
	end;
}

anthell02,177,190,3	script	Mirko#1F	4_M_SAGE_A,{
	if (checkweight(1201,3) == 0) {
		mes "- 你无法继续任务，因为你的物品太多。 -";
		close;
	}
	if (BaseLevel < 160) {
		mes "[米尔科]";
		mes "你见过布里亚申吗？";
		next;
		mes "[约兰达]";
		mes "还没有。";
		mes "……我也需要看看那里有什么。";
		next;
		mes "== 这是 160 级或更高级别的任务 ==";
		close;
	}
	if (ill_anthell == 0) {
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Yolanda#1F");
		mes "[约兰达]";
		mes "你真的进去了吗？";
		next;
		emotion ET_PROFUSELY_SWEAT;
		mes "[米尔科]";
		mes "这是正确的。很多人都说看到了。";
		mes "既然他说自己是一名左臂受伤的护林员，那么他不可能是他见过的唯一朋友。";
		next;
		mes "[尤兰达]";
		mes "我应该怎么办？如果我受了那样的伤，别说搜寻了……";
		next;
		mes "[米尔科]";
		mes "哦，等等！";
		mes "那里的冒险家，等一下！";
		next;
		select( "我？" );
		mes "[米尔科]";
		mes "你来这儿有一段时间了吗？";
		mes "那太棒了。在这里，我们最近找到了一种更深入的方法。";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Yolanda#1F");
		ill_anthell = 1;
		setquest 8719;
		mes "[尤兰达]";
		mes "嘿，如果我告诉你呢！这不是我的研究，而是你的！";
		next;
		select( "说着说着就睡了..." );
		mes "[" + strcharinfo(0) + "]";
		mes "你对陌生人这么说？";
		next;
		mes "[约兰达]";
		mes "这是正确的！冒险家的男人，";
		mes "抱歉，请稍等。";
		npctalk "Yolanda：你自己到底知道怎么做？", "约兰达#1F", bc_self;
		npctalk "Mirko：嘿，那我该去还是刚刚出现的冒险者去？", "米尔科#1F", bc_self;
		close;
	}
	if (ill_anthell == 1) {
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[米尔科]";
		mes "怎么样，我现在需要雇用更多人。";
		mes "连废墟都算不上，去野外怎么样？";
		next;
		emotion ET_PROFUSELY_SWEAT;
		mes "[尤兰达]";
		mes "让我们不要总是犯错误，让我来跟进吧。";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[米尔科]";
		mes "冒险家在等你";
		mes "我们稍后再聊吧？";
		mes "好吧，冒险家男人。";
		mes "你叫什么名字？" + strcharinfo(0) + "？";
		next;
		mes "[米尔科]";
		mes "是的，" + strcharinfo(0) + ".";
		mes "我会进入正题。";
		next;
		mes "[米尔科]";
		mes "我是 Mirko，那是 Yolanda";
		mes "然后，一名受轻伤的护林员进入了我之前提到的新发现的蚁丘。我认为 ...";
		mes "我现在的目标不是探索，我希望你能营救游侠和他的朋友们。";
		next;
		mes "[米尔科]";
		mes "游侠的名字叫布里亚申……";
		mes "Briashen 提到的同事是 Khahris，";
		mes "据布里亚申说，他对她来说就像双胞胎。";
		next;
		ill_anthell = 2;
		erasequest 8719;
		setquest 8720;
		mes "[米尔科]";
		mes "一旦找到其中之一";
		mes "我要你带我出去。";
		mes "尸体就好了，拜托。";
		mes "准备好后给我回电话";
		close;
	}
	if (ill_anthell == 2) {
		mes "[米尔科]";
		mes "找到布里亚申和他的同伴。";
		mes "如果你找到其中任何一个，我希望你把它们带出来。";
		mes "尸体就好了，拜托。";
		mes "你准备好了吗？";
		next;
		if (select( "好的", "之后" ) == 2) {
			mes "[米尔科]";
			mes "抱歉突然提出要求。";
			mes "无论如何，调查还没有完成，所以我们很紧张……";
			mes "当你准备好时告诉我。";
			close;
		}
		mes "[米尔科]";
		mes "是的。 ……事情是这样发生的……纯属偶然。不小心把墙打破了...";
		mes "一股强大到连我们都能够感受到的力量！瞧！";
		mes "隔着墙你都能感觉到。";
		next;
		mes "[米尔科]";
		mes "我能做些什么？作为一个冒险者，如果这里不是古迹，没有人迹……我就得去找找了！";
		mes "所以...我把头发拔出来仔细查看。";
		next;
		select( "你很勇敢" );
		mes "[尤兰达]";
		mes "是啊……这混蛋当年真是勇敢啊。";
		mes "我很高兴你没有死。";
		next;
		mes "[米尔科]";
		mes "没关系，因为我还活着！";
		mes "反正这里是二楼，通往一楼的路就在那边不是吗？";
		mes "但是……不是这样的！";
		next;
		mes "[米尔科]";
		mes "但有一点不一样，那就是气氛。";
		mes "感觉就像走在朦胧的……梦中？";
		next;
		mes "[约兰达]";
		mes "我感觉我写了《阿修罗败国》。";
		next;
		mes "[米尔科]";
		mes "嘿嘿，你这样解释大多数人都听不懂！";
		next;
		select( "我大致了解了" );
		mes "[约兰达]";
		mes "哎呀。";
		next;
		mes "[米尔科]";
		mes "我是不是很无聊……？";
		mes "无论如何，尽管周围一片奇怪的黑暗，但感觉就像在这里又不在这里……知觉正在从身体上剥离……";
		mes "所以...";
		next;
		mes "[约兰达]";
		mes "轻度混乱。";
		mes "别担心，没什么严重的，我想我正在看一些愚蠢的东西。";
		mes "我对猜测没问题。每个人的体形都不同。";
		next;
		mes "[约兰达]";
		mes "当你在路上出去时，你可以看出它是空的，但当你在里面时，你却看不出它是空的。";
		mes "也就是说，就算我错了，我也没有回到一楼。";
		next;
		mes "[米尔科]";
		mes "是的！虽然是同一条路，但我感觉自己好像越界了。";
		mes "而且，蚂蚁的威力超级大！";
		next;
		mes "[米尔科]";
		mes "怎么活着回来了，可惜了……还好，那里的蚂蚁好像没有过来这边。";
		mes "之后我准备暂时停止这边的地质勘探，组织新的探险。";
		next;
		mes "[尤兰达]";
		mes "我们当中最强的布里亚森出去巡逻了，不过看来来到这里的冒险者还没有达到组建远征的水平。";
		mes "所以要么我们一个人去，要么他一个人去……有一天，他在那里看到一个和他长得一模一样的人。";
		next;
		mes "[尤兰达]";
		mes "正如我之前所说，有些人可能会看到谎言，但是......";
		mes "当它出来时，你知道这是废话吗？但自从布里亚申出来说……";
		mes "我认为这是真的。我们从来没有见过它。";
		next;
		mes "[约兰达]";
		mes "之后我们就在外面等着，因为探索结果很适合一个人去，";
		mes "前几天他受了重伤回来，而他的同事还在那里。";
		mes "你正被蚂蚁追赶。";
		next;
		mes "[尤兰达]";
		mes "但受了这样的伤……他说他需要休息一会儿，但他一定是自己进了那个蚁丘。";
		mes "也就是说，生与死……";
		next;
		mes "[米尔科]";
		mes "我猜不出来。";
		mes "我们自己无法进入那里。现在没有人能做到这一点。";
		mes "冒险家朋友，救救布里亚申吧。";
		mes "请。";
		ill_anthell = 3;
		erasequest 8720;
		setquest 8721;
		next;
		mes "[米尔科]";
		mes "好吧，这边...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 3) {
		mes "[米尔科]";
		mes "你还要去找布里森吗？";
		next;
		if (select( "是的", "之后" ) == 2) {
			mes "[米尔科]";
			mes "抱歉突然提出要求。";
			mes "无论如何，调查还没有完成，所以我们很紧张……";
			close;
		}
		mes "[米尔科]";
		mes "好吧，这边...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 4) {
		mes "[米尔科]";
		mes "你看到布里亚申了吗？";
		mes "你还活着吗？？";
		mes "感谢上帝...";
		next;
		mes "[尤兰达]";
		mes "但你为什么不跟我一起来？";
		next;
		mes "== 简要解释一下 Briashen 所说的内容。 ==";
		next;
		mes "[米尔科]";
		mes "……我无能为力。";
		mes "不知道还能不能再拔出来……不，如果是这样的话，我就不会问你了，冒险者。";
		next;
		mes "[米尔科]";
		mes "那么，正如布里亚申所问的，你愿意下楼去帮助他吗？";
		ill_anthell = 5;
		erasequest 8722;
		setquest 8723;
		next;
		if (select( "是的", "之后" ) == 2) {
			mes "[米尔科]";
			mes "我无能为力";
			mes "如果我们一起去就好了，但是……";
			close;
		}
		mes "[米尔科]";
		mes "好的...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 5 || ill_anthell == 6) {
		mes "[米尔科]";
		mes "正如布里亚申所问，你愿意下楼去帮助他吗？";
		next;
		if (select( "是的", "之后" ) == 2) {
			mes "[米尔科]";
			mes "我无能为力";
			mes "如果我们一起去就好了，但是……";
			close;
		}
		mes "[米尔科]";
		mes "好的...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 7) {
		mes "[尤兰达]";
		mes "真是一个惊喜！";
		mes "它是从哪里来的？";
		next;
		select( "它反弹了" );
		mes "[约兰达]";
		mes "什么？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "有三个人看起来像卡里斯……";
		next;
		mes "== 向 Mirko 和 Yolanda 解释了一切。 ==";
		next;
		mes "[米尔科]";
		mes "三个人在谈话中消失了。";
		mes "而且，你最后见到的人是……维塔？";
		next;
		mes "[尤兰达]";
		mes "也许...也许";
		mes "难道这三个人都不是卡赫里人，而不是长得像他的那个人吗？";
		next;
		mes "[米尔科]";
		mes "什么？";
		mes "如果你看到" + strcharinfo(0) + "单独来看，这可能是一种幻觉，对吗？";
		next;
		mes "[约兰达]";
		mes "我听说布里亚申就是这么做的。当我和卡里斯在一起时，蚂蚁并没有攻击我。";
		next;
		mes "[米尔科]";
		mes "但最后玛雅...";
		next;
		mes "[约兰达]";
		mes "如果是这样呢？";
		next;
		mes "[约兰达]";
		mes "这是一个假设。";
		mes "卡里斯……和维塔塔在一起，所以其他蚂蚁显然不会碰它。";
		mes "蚂蚁不是蚁群吗？";
		next;
		mes "[尤兰达]";
		mes "但玛雅人是地下城的统治者。";
		next;
		mes "[米尔科]";
		mes "一...";
		next;
		mes "[尤兰达]";
		mes "如果你能伤害自己...";
		next;
		mes "[米尔科]";
		mes "我也许能摸到它。";
		next;
		mes "[尤兰达]";
		mes "维塔塔的行为对她的地位构成了威胁……";
		next;
		mes "[米尔科]";
		mes "!!";
		mes "那么现在真正危险的是...";
		next;
		mes "[米尔科]";
		mes "" + strcharinfo(0) + "，现在这是假设，但现在 Briashen 真的很危险！";
		next;
		if (select( "好的，我会回来的", "我需要一些时间准备" ) == 2) {
			mes "[米尔科]";
			mes "事情很紧急，我就赶紧问问你吧！";
			close;
		}
		mes "[米尔科]";
		mes "请！";
		close2;
		warp "ant_d02_i",172,185;
		ill_anthell = 8;
		erasequest 8728;
		setquest 8729;
		open_quest_ui(8729);
		end;
	}
	if (ill_anthell == 8) {
		mes "[米尔科]";
		mes "" + strcharinfo(0) + "，这只是一个假设，但现在Briashen真的很危险！";
		next;
		if (select( "好的，我会回来的", "我需要一些时间准备" ) == 2) {
			mes "[米尔科]";
			mes "事情很紧急，我就赶紧问问你吧！";
			close;
		}
		mes "[米尔科]";
		mes "请！";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 9) {
		mes "[米尔科]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		next;
		mes "[布里亚申]";
		mes "我现在很好";
		mes "告诉我";
		npctalk "我现在有点理智了。", "布里亚申#ant2", bc_self;
		npctalk "感谢上帝...", "约兰达#1F", bc_self;
		next;
		mes "[米尔科]";
		mes "...";
		mes "这只是一个猜测。";
		mes "布里亚森的幻觉不是比其他冒险者更长，而不是与布里亚森一起冒险的幻觉吗？";
		next;
		mes "[米尔科]";
		mes "就像那边的戈纳一样。";
		npctalk "我受不了了，所以我不断地进进出出。你到底看到了什么？", "", bc_self;
		npctalk "哦，别提醒我！", "农场#ant2", bc_self;
		next;
		mes "[米尔科]";
		mes "一种如此强烈的亲密感，让你无法回来，因为你被附身了......";
		mes "听说你长得很像我？";
		next;
		mes "[布里亚申]";
		mes "我不记得了。";
		next;
		mes "[米尔科]";
		mes "什么？";
		next;
		mes "[布里亚申]";
		mes "我不记得卡里斯长什么样了……";
		next;
		mes "[戈纳]";
		mes "这是我见过的最糟糕的事情。";
		next;
		mes "[米尔科]";
		mes "那里，" + strcharinfo(0) + ".";
		mes "它怎么样？带你出去很难吗？";
		next;
		select( "我也看到了" );
		mes "[米尔科]";
		mes "啊……想想看。";
		mes "你说上次进去看到假货？";
		next;
		mes "[米尔科]";
		mes "这次你看到实物了吗？";
		mes "那么它是什么样子的呢？";
		mes "布里亚申是这么说的吗？";
		next;
		mes "== Briashen 看到的 Khahris 看起来就像一只蚂蚁。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		next;
		mes "[尤兰达]";
		mes "这是一张不同的脸吗？";
		next;
		select( "她看起来就像布里亚申" );
		mes "[" + strcharinfo(0) + "]";
		mes "长得和布里亚申一模一样";
		mes "看起来很真实。我差点就骗自己了。";
		mes "他们就像双胞胎";
		next;
		mes "[布里亚申]";
		mes "真的吗？";
		next;
		mes "[米尔科]";
		mes "看来我现在实在想不起来了。";
		mes "那边的左边和右边都很奇怪。";
		mes "我可以继续探索吗？";
		next;
		mes "[戈纳]";
		mes "不用担心这个。";
		mes "冒险家的天赋……哎呀！";
		next;
		mes "[米尔科]";
		mes "哎呀，你确实该休息一下了……";
		next;
		mes "[布里亚申]";
		mes "..." + strcharinfo(0) + ".";
		mes "谢谢你救了我";
		next;
		mes "[布里亚申]";
		mes "我不会再进去了...";
		mes "关于你告诉我的关于卡里斯的事，我不会忘记。";
		npctalk "啊？那我要怎么调查那边呢？", "", bc_self;
		npctalk "带上高娜一起去吧", "布里亚申#ant2", bc_self;
		npctalk "我不喜欢米尔科。我不会去。", "农场#ant2", bc_self;
		next;
		mes "[布里亚申]";
		mes "卡里斯...";
		mes "谢谢你还记得";
		npctalk "嘿，冒险家！然后接受请求！好的？", "", bc_self;
		ill_anthell = 10;
		completequest 8730;
		getexp 5260084,2000000;
		getexp 2104033,600000;
		getitem 25271,5;	// IllusionStone
		close;
	}
	mes "[米尔科]";
	mes "你想去知觉花园吗？";
	mes "或者您有要求接受吗？";
	next;
	switch( select( "进入意识花园", "地质调查", "力量之源", "同样的事情", "共享内存", "取消" ) ) {
	case 1:
		mes "[米尔科]";
		mes "当心。";
		close2;
		warp "ant_d02_i",172,185;
		end;
	case 2:
		switch( checkquest(8732,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[米尔科]";
			mes "今天很好。明天我会处理的。";
			close;
		case 2:
			erasequest 8732;
			break;
		}
		if (isbegin_quest(8731) == 0) {
			mes "[米尔科]";
			mes "偶尔如果你击败" + getmonsterinfo("ILL_GIEARTH", MOB_NAME) + "";
			mes "你可以获得^0000FF" + getitemname(1000504) + "^000000，你能收集到大约20个吗？";
			next;
			if (select( "接受", "退出" ) == 2) {
				mes "[米尔科]";
				mes "我不能";
				mes "今天，我不得不委托其他冒险者。";
				close;
			}
			mes "[米尔科]";
			mes "好吧，等等。";
			setquest 8731;
			close;
		}
		if (countitem(1000504) < 20) {
			mes "[米尔科]";
			mes "从感知花园狩猎" + getmonsterinfo("ILL_GIEARTH", MOB_NAME) + "";
			mes "并收集 20 ^0000FF" + getitemname(1000504) + "^000000。";
			close;
		}
		delitem 1000504,20;	// Dry_Sand
		erasequest 8731;
		setquest 8732;
		mes "[米尔科]";
		mes "好工作！";
		mes "那我明天也来照顾你。";
		getitem 25271,1;	// IllusionStone
		getexp 3181074,2404545;
		getexp 954322,721363;
		close;
	case 3:
		switch( checkquest(8734,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[米尔科]";
			mes "今天很好。明天我会处理的。";
			close;
		case 2:
			erasequest 8734;
			break;
		}
		if (isbegin_quest(8733) == 0) {
			mes "[米尔科]";
			mes "有时，如果你击败了在知觉花园中出没的" + getmonsterinfo("ILL_ANDRE", MOB_NAME) + "或" + getmonsterinfo("ILL_DENIRO", MOB_NAME) + "";
			mes "你可以获得^0000FF" + getitemname(1000505) + "^000000，你能收集到大约20个吗？";
			next;
			if (select( "接受", "退出" ) == 2) {
				mes "[米尔科]";
				mes "我不能";
				mes "今天没办法，只好向其他冒险者请了工作。";
				close;
			}
			mes "[米尔科]";
			mes "好吧，等等。";
			setquest 8733;
			close;
		}
		if (countitem(1000505) < 20) {
			mes "[米尔科]";
			mes "从知觉花园狩猎" + getmonsterinfo("ILL_ANDRE", MOB_NAME) + "和" + getmonsterinfo("ILL_DENIRO", MOB_NAME) + "";
			mes "并收集 20 ^0000FF" + getitemname(1000505) + "^000000。";
			close;
		}
		delitem 1000505,20;	// Opaque_Liquid
		erasequest 8733;
		setquest 8734;
		mes "[米尔科]";
		mes "好工作！";
		mes "那我明天再问你。";
		getitem 25271,1;	// IllusionStone
		getexp 3151005,2395672;
		getexp 945301,718701;
		close;
	case 4:
		switch( checkquest(8736,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[米尔科]";
			mes "今天很好。明天我会处理的。";
			close;
		case 2:
			erasequest 8736;
			break;
		}
		switch( checkquest(8735,HUNTING) ) {
		case -1:
			mes "[米尔科]";
			mes "如你所知，记忆和感知在那里被扭曲。你看起来很好，但是";
			mes "似乎只要怪物减少就可以缓解。";
			next;
			mes "[米尔科]";
			mes "你能杀死^0000FF10 " + getmonsterinfo("ILL_VITATA", MOB_NAME) + "^000000，";
			mes "^0000FF10 " + getmonsterinfo("ILL_SOLDIER_ANDR", MOB_NAME) + "^000000,";
			mes "^0000FF10 " + getmonsterinfo("ILL_PIERE", MOB_NAME) + "^000000";
			mes "然后回来？";
			next;
			if (select( "接受", "退出" ) == 2) {
				mes "[米尔科]";
				mes "我不能";
				mes "今天，我不得不委托其他冒险者。";
				close;
			}
			mes "[米尔科]";
			mes "好吧，等等。";
			setquest 8735;
			close;
		case 0:
		case 1:
			mes "[米尔科]";
			mes "你能杀死^0000FF10 " + getmonsterinfo("ILL_VITATA", MOB_NAME) + "^000000，";
			mes "^0000FF10 " + getmonsterinfo("ILL_SOLDIER_ANDR", MOB_NAME) + "^000000,";
			mes "^0000FF10 " + getmonsterinfo("ILL_PIERE", MOB_NAME) + "^000000";
			mes "然后回来？";
			close;
		case 2:
			mes "[米尔科]";
			mes "哦，刚刚又有一个冒险者去了那里。听说头晕减轻了。";
			mes "人类的好奇心是不可避免的。我也是。";
			mes "再说一遍，明天我会照顾你的。";
			erasequest 8735;
			setquest 8736;
			getitem 25271,1;	// IllusionStone
			getexp 6483984,4821986;
			getexp 1945195,1446595;
			close;
		}
		end;
	case 5:
		switch( checkquest(8738,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[米尔科]";
			mes "今天很好。明天我会处理的。";
			close;
		case 2:
			erasequest 8738;
			break;
		}
		if (isbegin_quest(8737) == 0) {
			mes "[米尔科]";
			mes "前几天我捡到了一个不知名的贝壳。看来感知花园里的所有怪物，如蚂蚁，都拥有它们。";
			mes "你能收集大约20个^0000FF" + getitemname(1000506) + "^000000吗？";
			next;
			if (select( "接受", "退出" ) == 2) {
				mes "[米尔科]";
				mes "我不能";
				mes "今天，我不得不委托其他冒险者。";
				close;
			}
			mes "[米尔科]";
			mes "好吧，等等。";
			setquest 8737;
			close;
		}
		if (countitem(1000506) < 20) {
			mes "[米尔科]";
			mes "追捕感知花园中的怪物";
			mes "并收集 20 ^0000FF" + getitemname(1000506) + "^000000。";
			close;
		}
		delitem 1000506,20;	// Shell_Of_Cognition
		erasequest 8737;
		setquest 8738;
		mes "[米尔科]";
		mes "好工作！";
		mes "那我明天也来照顾你。";
		getitem 25271,1;	// IllusionStone
		getexp 3113916,2347020;
		getexp 934174,704106;
		close;
	case 6:
		end;
	}
	end;

OnInit:
	// main quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_anthell == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8719) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8720) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8722) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8728) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8730) == 1" );

	// daily
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && isbegin_quest(8731) == 1 && countitem(1000504) >= 20" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && isbegin_quest(8733) == 1 && countitem(1000505) >= 20" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && isbegin_quest(8737) == 1 && countitem(1000506) >= 20" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8735,HUNTING) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8732,PLAYTIME) == -1 && isbegin_quest(8731) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8732,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8734,PLAYTIME) == -1 && isbegin_quest(8733) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8734,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8736,PLAYTIME) == -1 && checkquest(8735,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8736,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8738,PLAYTIME) == -1 && isbegin_quest(8737) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8738,PLAYTIME) == 2" );
	end;
}

anthell02,170,185,0	script	#il_ant002	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell >= 5)
		cloakoffnpcself( "Gona#ant2" );
	if (ill_anthell >= 8)
		cloakoffnpcself( "Julio#ant2" );
	if (ill_anthell >= 9)
		cloakoffnpcself( "Briashen#ant2" );
	end;
}
anthell02,168,171,0	duplicate(#il_ant002)	#il_ant003	HIDDEN_WARP_NPC,3,3

// anthell02,177,181,3	script	Gona#ant2	MINSTREL,{
anthell02,177,181,3	script(CLOAKED)	Gona#ant2	HIDDEN_NPC,{
	if (ill_anthell < 5)
		end;
	if (ill_anthell == 5) {
		mes "[戈纳]";
		mes "里面到底发生了什么？";
		npctalk "Mirko：如果你会那么生气就别走……", "米尔科#1F", bc_self;
		close;
	}
	if (ill_anthell == 6) {
		mes "[戈纳]";
		mes "哎呀...";
		close;
	}
	if (ill_anthell == 7) {
		mes "[戈纳]";
		mes "真的，那……不是一个理智的地方";
		mes "您可以轻松进出。";
		close;
	}
	if (ill_anthell == 8) {
		mes "[戈纳]";
		mes "哎呀...";
		close;
	}
	if (ill_anthell == 9) {
		mes "[戈纳]";
		mes "我差点就惹上麻烦了...";
		close;
	}
	mes "[戈纳]";
	mes "CI....";
	mes "它是什么？但米尔科那个家伙很擅长组织事情。他是个好客户。";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4068;
	setunitdata .@npc_id, UNPC_SEX, SEX_MALE;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 5;
	end;
}

// anthell02,174,177,5	script	Julio#ant2	SURA,{
anthell02,174,177,5	script(CLOAKED)	Julio#ant2	HIDDEN_NPC,{
	mes "[七月]";
	mes "别跟我说话...";
	mes "连拍我的背都不行...";
	mes "我要你去那里...";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4070;
	setunitdata .@npc_id, UNPC_SEX, SEX_MALE;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 12;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 3;
	setunitdata .@npc_id, UNPC_HEADMIDDLE, 65;
	end;
}

// anthell02,167,186,6	script	Briashen#ant2	RANGER,{
anthell02,167,186,6	script(CLOAKED)	Briashen#ant2	HIDDEN_NPC,{
	mes "[布里亚申]";
	mes "...";
	mes "谢谢...";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;
	end;
}


// unknown effect
// ant_d02_i,170,185,0	script	#il_ant001	HIDDEN_WARP_NPC,3,3
// ant_d02_i,173,94,0	script	#il_tw9	HIDDEN_WARP_NPC,5,5

// ant_d02_i,177,181,5	script	Gona#iltw	MINSTREL,{
ant_d02_i,177,181,5	script	Gona#iltw	HIDDEN_NPC,{
	mes "[戈纳]";
	mes "这里有些奇怪";
	mes "……不，这不是很奇怪吗？";
	mes "你好吗？你很奇怪吗？";
	mes "哦，我想回家……";
	mes "你的房子在哪里？";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4068;
	setunitdata .@npc_id, UNPC_SEX, SEX_MALE;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 5;
	end;
}

// ant_d02_i,171,179,3	script	Mick#iltw	WARLOCK,{
ant_d02_i,171,179,3	script	Mick#iltw	HIDDEN_NPC,{
	if (ill_anthell < 3)
		end;
	if (ill_anthell == 3 || ill_anthell == 5 || ill_anthell == 8) {
		mes "[米克]";
		mes "我是……一个人吗？";
		mes "会不会是蚂蚁？";
		mes "不是吗？";
		mes "是一个人吗？";
		close;
	}
	if (ill_anthell == 4 || ill_anthell == 6) {
		mes "[米克]";
		mes "很奇怪。在我的脑海里，我知道我是一个人，但是当我看到一只蚂蚁经过那里时，我想知道我是否是一只蚂蚁";
		mes "发生了什么？";
		close;
	}
	mes "[米克]";
	mes "你是……人类吗？";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4055;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 28;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 2;
	end;
}

ant_d02_i,170,190,0	warp2	antd02i_anthell02	1,1,anthell02,172,185



ant_d02_i,44,258,0	script	#il_tw1	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 3 || ill_anthell == 5 || ill_anthell == 6)
		cloakoffnpcself( "Briashen#part1" );
	if (ill_anthell == 6) {
		cloakoffnpcself( "Rwella#part2" );
		cloakoffnpcself( "Khahris#part3" );
	}
	end;
}
// Note: unknown effect, but let's use it
ant_d02_i,65,246,0	duplicate(#il_tw1)	#ep18w02_1	HIDDEN_WARP_NPC,3,3

// ant_d02_i,44,258,6	script	Briashen#part1	RANGER,{
ant_d02_i,44,258,6	script(CLOAKED)	Briashen#part1	HIDDEN_NPC,{
	if (ill_anthell < 3)
		end;
	if (ill_anthell == 3) {
		mes "[游侠看起来不错]";
		mes "呃，你好";
		mes "你没看到受伤的护林员吗？";
		next;
		mes "[游侠看起来不错]";
		mes "你也在找卡里斯吗？";
		next;
		if (select( "这不是所要求的名称", "对" ) == 2) {
			mes "[游侠看起来不错]";
			mes "是的？谢谢。";
			mes "你到底在哪里...";
			mes "我什至无法尖叫。";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "一个名叫布里亚申的男人...";
		next;
		mes "[游侠看起来不错]";
		mes "什么？";
		next;
		mes "[游侠看起来不错]";
		mes "我没有受伤！";
		mes "是谁？";
		next;
		select( "米尔科和约兰达" );
		mes "[" + strcharinfo(0) + "]";
		mes "在布里亚申独自受伤后，米尔科和约兰达请求将她带出来。";
		next;
		mes "[布里亚申]";
		mes "你说得对，我是 Briashen，但是你受伤了吗？什么时候？";
		next;
		mes "==我不认为你在撒谎。 ==";
		mes "== 表面上看起来很正常，但这难道是我听说的认知障碍的影响吗？ ==";
		next;
		mes "[布里亚申]";
		mes "这很奇怪。正如你所看到的，我很好。我正在寻找在这里分手的朋友";
		mes "他的名字叫 Khahris...他长得和我一模一样";
		next;
		mes "[布里亚申]";
		mes "在找到他之前你不能回去";
		mes "告诉米尔科。那么稍后见";
		ill_anthell = 4;
		erasequest 8721;
		setquest 8722;
		close2;
		cloakonnpcself();
		end;
	}
	if (ill_anthell == 4) {
		cloakonnpcself();
		mes "[布里亚申]";
		mes "你走了吗？";
		mes "这里很危险。我会找到卡里斯并尽快回去。";
		mes "那么稍后见";
		close;
	}
	if (ill_anthell == 5) {
		mes "[布里亚申]";
		mes "哦，我又见到你了";
		mes "你见过米尔科吗？";
		mes "你说什么？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "他说他想帮助你。";
		next;
		mes "[布里亚申]";
		mes "啊~你看起来很坚强。谢天谢地。";
		mes "不过，米尔科的身体太虚弱，无法来这里搜寻，所以担心也是没有意义的。";
		next;
		select( "我认为你什么也没说", "这就是你被录用的原因" );	// note: the selection doesn't change the dialog
		mes "[布里亚申]";
		mes "顺便说一句，人有时也会遇到情况。";
		mes "我现在很着急！卡里斯可能有危险。";
		next;
		mes "[布里亚申]";
		mes "你听到了吗？";
		mes "这就是米尔科也请我帮忙的原因。";
		next;
		select( "或许..." );
		mes "[布里亚申]";
		mes "你确定什么？";
		next;
		select( "一个叫卡里斯的男人，这是真的吗？" );
		mes "[" + strcharinfo(0) + "]";
		mes "一个名叫卡里斯的男人，他是真实存在的吗？";
		next;
		mes "[布里亚申]";
		mes "你也在问同样的问题吗？";
		mes "严重地。我们在这里见过几次面，和蚂蚁一起……";
		mes "...知道了？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "？";
		next;
		mes "[布里亚申]";
		mes "无论如何，我们在这里相遇了。我们惊讶地发现我们是如此相似。";
		mes "但前几天...";
		mes "当我们在一起时，突然出现了一个巨大的玛雅人。";
		next;
		mes "[布里亚申]";
		mes "我受了重伤...";
		mes "你好吗？";
		mes "当时谁受伤了？";
		next;
		mes "[布里亚申]";
		mes "我受伤了吗？";
		next;
		mes "== 这一次，正如 Mirko 所说，Briaschen 的脸色很糟糕。 ==";
		mes "== 血应该已经止住了，但过度的运动会使伤口裂开。 ==";
		next;
		mes "==但这并不是某个地方受过伤的人的姿势。 ==";
		mes "== 感知和现实是扭曲和过度劳累的。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "以这个速度下去很危险。你病了，你需要离开这里。";
		next;
		mes "[布里亚申]";
		mes "不，不。这不是我，是卡里斯";
		mes "卡里斯会在等我……我得去找它。";
		next;
		mes "[布里亚申]";
		mes "卡里斯...";
		next;
		mes "== Briashen 坐下来。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我们也去外面吧。";
		next;
		mes "[布里亚申]";
		mes "不，我在这里从来没见过蚂蚁……除了和 Mirko 在一起的时候。";
		mes "和卡里斯一起……除了玛雅最后一次出现之外，一次也没有。";
		mes "我们一起去狩猎吧...";
		next;
		mes "[布里亚申]";
		mes "卡里斯……对我做了什么？";
		next;
		mes "[布里亚申]";
		mes "救救那个朋友。";
		mes "只要玛雅不来，我就没事。";
		ill_anthell = 6;
		erasequest 8723;
		setquest 8724;
		cloakoffnpcself( "Rwella#part2" );
		cloakoffnpcself( "Khahris#part3" );
		cloakoffnpcself( "Khahris#part4" );
		next;
		mes "== 正在寻找记忆的布里亚申一脸困惑。 ==";
		mes "== 我需要先探索地牢。 ==";
		close;
	}
	if (ill_anthell == 6) {
		mes "[布里亚申]";
		mes "救救那个朋友。";
		mes "只要玛雅不来，我就没事……";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	// The parameters are gender, hair color, hair style, accessory 1-3 and robe
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8721) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8723) == 1" );
	end;
}


ant_d02_i,86,189,0	script	#il_tw2	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 6 && isbegin_quest(8725) == 0)
		cloakoffnpcself( "Rwella#part2" );
	end;
}

// ant_d02_i,86,189,2	script	Rwella#part2	RANGER,{
ant_d02_i,86,189,2	script(CLOAKED)	Rwella#part2	HIDDEN_NPC,{
	if (ill_anthell == 6 && isbegin_quest(8725) == 0) {
		mes "[卢韦拉]";
		mes "什么？你叫什么名字？";
		mes "你自己不应该先说吗？";
		mes "啊...是的。" + strcharinfo(0) + ".";
		mes "我是鲁韦拉";
		next;
		mes "[卢韦拉]";
		mes "你没看到这里有一个叫 Briashen 的人吗？";
		next;
		mes "== Briashen 正在寻找的人的名字是... ==";
		next;
		mes "[卢韦拉]";
		mes "你为何茫然地站在那里？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你知道卡里斯这个名字吗？";
		next;
		mes "[卢韦拉]";
		mes "不，我不知道";
		mes "太不礼貌了，你也回答一下我的问题吧。你见过布里亚申吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "布里亚申正在寻找的名字是卡里斯……";
		next;
		mes "[卢韦拉]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "？";
		next;
		mes "== 等了一会儿，Rwella 没有回应。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "卢韦拉？";
		next;
		mes "[卢韦拉]";
		mes "我不认为那是我的名字。";
		next;
		mes "[卢韦拉]";
		mes "但是……我也不认为是卡里斯。";
		mes "我想当你见到 Briashen 时你就会知道了。";
		mes "布里亚申在哪里？";
		next;
		mes "[卢韦拉]";
		mes "布里亚申...";
		setquest 8725;
		if (isbegin_quest(8725) != 1 || isbegin_quest(8726) != 1 || isbegin_quest(8727) != 1) {
			specialeffect EF_DEFENDER;
			cloakonnpcself();
		}
		else {
			ill_anthell = 7;
			erasequest 8724;
			erasequest 8725;
			erasequest 8726;
			erasequest 8727;
			setquest 8728;
			cloakonnpcself();
			cloakoffnpcself( "Rwella#part5" );
			specialeffect EF_DEFENDER, AREA, "Rwella#part5";
			mes "……我……我……！";
			mes "我...";
			mes "我以为...";
			close2;
			warp "anthell02",172,185;
			end;
		}
		next;
		mes "...";
		next;
		mes "==欢迎...？ ==";
		next;
		mes "== 真正的卡里斯在哪里？ ==";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8724) == 1 && isbegin_quest(8725) == 0" );
	end;
}

ant_d02_i,86,189,2	duplicate(dummy_cloaked_npc)	Rwella#part5	ILL_VITATA

ant_d02_i,258,42,0	script	#il_tw3	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 6 && isbegin_quest(8726) == 0)
		cloakoffnpcself( "Khahris#part3" );
	end;
}

// ant_d02_i,258,42,2	script	Khahris#part3	RANGER,{
ant_d02_i,258,42,2	script(CLOAKED)	Khahris#part3	HIDDEN_NPC,{
	if (ill_anthell == 6 && isbegin_quest(8726) == 0) {
		mes "[卡里斯]";
		mes "什么？你叫什么名字？";
		mes "你自己不应该先说吗？";
		mes "啊……是的。" + strcharinfo(0) + ".";
		mes "我是卡里斯。";
		next;
		mes "[卡里斯]";
		mes "你没看到这里有一个叫布里亚申的护林员吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我懂了。我在找你...";
		next;
		mes "[卡里斯]";
		mes "哦，感谢上帝！你在哪里？";
		mes "我回到这里来找他……但他被玛雅袭击了，他被带走了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "??";
		next;
		mes "[卡里斯]";
		mes "怎么了？布里亚申还好吗？";
		next;
		mes "== 根据 Bryashen 的说法，被玛雅带走的是 Khahris。 ==";
		mes "== 真的是倒退了吗？ ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "是的。我很好...";
		next;
		mes "== 但根据 Mirko 的说法，Mirko 从未见过 Khahris。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你认识米尔科吗？";
		next;
		mes "[卡里斯]";
		mes "好吧，那是我的雇主。我很抱歉我做了某事。";
		next;
		select( "你是谁？" );
		mes "[卡里斯]";
		mes "你这是什么意思？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "米尔科说她从未见过你。";
		next;
		mes "== 我等了一会儿，但自称 Khahris 的人没有任何回应。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "卡里斯？";
		next;
		mes "[卡里斯]";
		mes "我是……卡里斯吗？";
		next;
		mes "[卡里斯]";
		mes "我想当你见到 Briashen 时你就会知道了。";
		mes "布里亚申在哪里？";
		next;
		mes "[卡里斯]";
		mes "布里亚申...";
		setquest 8726;
		if (isbegin_quest(8725) != 1 || isbegin_quest(8726) != 1 || isbegin_quest(8727) != 1) {
			specialeffect EF_DEFENDER;
			cloakonnpcself();
		}
		else {
			ill_anthell = 7;
			erasequest 8724;
			erasequest 8725;
			erasequest 8726;
			erasequest 8727;
			setquest 8728;
			cloakonnpcself();
			cloakoffnpcself( "Khahris#part6" );
			specialeffect EF_DEFENDER, AREA, "Khahris#part6";
			mes "……我……我……！";
			mes "我...";
			mes "我以为...";
			close2;
			warp "anthell02",172,185;
			end;
		}
		next;
		mes "...";
		next;
		mes "==欢迎...？ ==";
		next;
		mes "== 真正的卡里斯在哪里？ ==";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8724) == 1 && isbegin_quest(8726) == 0" );
	end;
}
ant_d02_i,258,42,2	duplicate(dummy_cloaked_npc)	Khahris#part6	ILL_VITATA


ant_d02_i,259,147,0	script	#il_tw4	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 6 && isbegin_quest(8727) == 0)
		cloakoffnpcself( "Khahris#part4" );
	end;
}

// ant_d02_i,259,147,7	script	Khahris#part4	GUNSLINGER,{
ant_d02_i,259,147,7	script(CLOAKED)	Khahris#part4	HIDDEN_NPC,{
	if (ill_anthell == 6 && isbegin_quest(8727) == 0) {
		mes "[卡里斯]";
		mes "什么？你叫什么名字？";
		mes "你自己不应该先说吗？";
		mes "啊……是的。" + strcharinfo(0) + ".";
		mes "我是卡里斯。";
		next;
		mes "== 顺便说一句，布里亚申要找的卡赫里斯并不是枪手。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "卡里斯...";
		next;
		mes "[卡里斯]";
		mes "是的。我突然遇到这样的地方，问你叫什么名字。你有一颗非常坚强的心。它是什么？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "……不，我被要求去找卡里斯。";
		next;
		mes "[卡里斯]";
		mes "什么？给谁？也许是布里亚申？";
		mes "布里亚申还好吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "是的。我很好...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		next;
		select( "你是谁？" );
		mes "[卡里斯]";
		mes "啊？你在说什么啊，我是冒险家卡里斯。我之前告诉过你。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "布里亚申让我找一个和她长得很像的护林员。";
		mes "如果你安全的话，为什么还要在这里做这件事而不出来呢？";
		next;
		mes "== 我等了一会儿答案，但自称 Khahris 的人没有任何回应。 ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "卡里斯？";
		next;
		mes "[卡里斯]";
		mes "我是……卡里斯吗？";
		next;
		mes "[卡里斯]";
		mes "我想当你见到 Briashen 时你就会知道了。";
		mes "布里亚申在哪里？";
		next;
		mes "== 卡里斯用力抓住他的前臂。 ==";
		mes "== 疼得让人尖叫！ ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "邪恶的！好痛！";
		next;
		mes "[卡里斯]";
		mes "带我去布里亚申吧！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "留下这个！";
		next;
		mes "[卡里斯]";
		mes "我是谁，布里亚申……？";
		mes "我是谁...?";
		setquest 8727;
		if (isbegin_quest(8725) != 1 || isbegin_quest(8726) != 1 || isbegin_quest(8727) != 1) {
			specialeffect EF_DEFENDER;
			cloakonnpcself();
		}
		else {
			ill_anthell = 7;
			erasequest 8724;
			erasequest 8725;
			erasequest 8726;
			erasequest 8727;
			setquest 8728;
			cloakonnpcself();
			cloakoffnpcself( "Khahris#part7" );
			specialeffect EF_DEFENDER, AREA, "Khahris#part7";
			mes "……我……我……！";
			mes "我...";
			mes "我以为...";
			close2;
			warp "anthell02",172,185;
			end;
		}
		next;
		mes "...";
		next;
		mes "==欢迎...？ ==";
		next;
		mes "== 真正的卡里斯在哪里？ ==";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 24;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 3;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8724) == 1 && isbegin_quest(8727) == 0" );
	end;
}
ant_d02_i,259,147,7	duplicate(dummy_cloaked_npc)	Khahris#part7	ILL_VITATA



ant_d02_i,130,73,0	script	#il_tw5	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 8) {
		cloakoffnpcself( "Briashen#part8" );
		cloakoffnpcself( "Vitata#part9" );
		end;
	}
	end;
}

// ant_d02_i,130,73,2	script	Briashen#part8	RANGER,{
ant_d02_i,130,73,2	script(CLOAKED)	Briashen#part8	HIDDEN_NPC,{
	if (ill_anthell == 8) {
		mes "[" + strcharinfo(0) + "]";
		mes "！";
		unittalk getcharid(3), "" + strcharinfo(0) + " : !", bc_self;
		next;
		select( "布里亚申是真的吗？" );
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		unittalk getcharid(3), "" + strcharinfo(0) + " : ...", bc_self;
		next;
		select( "维塔塔就是卡里斯" );
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		unittalk getcharid(3), "" + strcharinfo(0) + " : ...", bc_self;
		next;
		select( "我怎么知道" );
		mes "[" + strcharinfo(0) + "]";
		mes "卡里斯！";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Khahris!", bc_self;
		next;
		mes "== 维塔转向这边。 ==";
		next;
		mes "[布里亚申]";
		mes "...";
		next;
		mes "[布里亚申]";
		mes "" + strcharinfo(0) + ".";
		mes "我不记得卡里斯长什么样了……";
		next;
		// specialeffect 1313;	// unsupported effect id?
		mes "[" + strcharinfo(0) + "]";
		mes "布里亚申，这很危险！";
		next;
		mes "[布里亚申]";
		mes "啊!";
		cloakonnpcself( "Vitata#part9" );
		cloakoffnpcself( "Quiet Maya#part10" );
		cloakoffnpcself( "Vitata#part11" );
		specialeffect EF_FREEZE, AREA, "Quiet Maya#part10";
		// specialeffect 1314, AREA, "Vitata#part11";	// unsupported effect id?
		next;
		mes "[布里亚申]";
		mes "卡里斯...！？";
		next;
		mes "[卡里斯]";
		mes "……、……";
		npctalk "布里亚申。对不起。我想我们不能再一起去冒险了。", "维塔塔#part11", bc_self;
		next;
		mes "[布里亚申]";
		mes "什么？？不！";
		mes "卡里斯！！";
		next;
		mes "== Khahris 的话语从很远的地方就可以听到，就像在水下一样...... ==";
		next;
		mes "[卡里斯]";
		mes "……，……";
		npctalk "反正我也不能出去。别伤心。我希望我能成为你心里的一部分。很有趣。", "维塔塔#part11", bc_self;
		next;
		mes "[布里亚申]";
		mes "卡里斯？";
		next;
		mes "[卡里斯]";
		mes "……，……";
		npctalk "冒险家。我只是布里亚申来到这里时内置的感知错误的一部分。", "维塔塔#part11", bc_self;
		next;
		mes "[布里亚申]";
		mes "你在说什么？";
		next;
		mes "[卡里斯]";
		mes "……，……";
		npctalk "如果 Briashen 不来的话，我无论如何都会消失，但是谢谢你来找我。", "维塔塔#part11", bc_self;
		next;
		mes "[卡里斯]";
		mes "……、……、……";
		next;
		mes "== 我再也听不到 Khahris 的声音了。 ==";
		mes "== 玛雅正在移动她的触角来听故事。 ==";
		next;
		mes "[布里亚申]";
		mes "卡里斯！";
		next;
		specialeffect EF_CLOUD4, AREA, "Vitata#part11";
		cloakonnpcself( "Vitata#part11" );
		cloakonnpcself( "Quiet Maya#part10" );
		mes "== 玛雅和卡里斯融入黑暗并消失。 ==";
		ill_anthell = 9;
		erasequest 8729;
		setquest 8730;
		close2;
		warp "anthell02",172,185;
		end;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8729) == 1" );
	end;
}

ant_d02_i,125,73,6	script(CLOAKED)	Vitata#part9	ILL_VITATA,{
	npctalk "...", "", bc_self;
	end;
}

ant_d02_i,128,73,6	duplicate(dummy_cloaked_npc)	Quiet Maya#part10	ILL_MAYA
ant_d02_i,129,73,2	duplicate(dummy_cloaked_npc)	Vitata#part11	ILL_VITATA


//============================================================
//= Illusion of Teddy Bear
//============================================================

ein_d02_i,161,189,3	script	Exit#IBTin	4_ENERGY_BLUE,{
	warp "ein_dun01",189,80;
	end;
}

einbroch,149,242,5	script	Coughing young man#ITB	4_M_NFMAN,3,3,{
	if (BaseLevel < 150) {
		mes "[咳嗽的年轻人]";
		mes "时间已经过去了...";
		mes "怎么还没回来……";
		mes "咳咳！！";
		next;
		mes "^ff0000�� 你可以从 150 级开始此任务。^000000";
		close;
	}
	if (ill_teddy == 0) {
		mes "[咳嗽的年轻人]";
		mes "时间已经过去了...";
		mes "怎么还没回来……";
		mes "咳咳！！";
		next;
		mes "[咳嗽的年轻人]";
		mes "咳……咳……咳……";
		mes "哈哈哈……是不是出什么事了？";
		mes "如果我不亲自去检查的话...";
		mes "咳嗽咳嗽";
		mes "咳咳……幸好……";
		next;
		mes "-扑通-";
		next;
		if (select( "帮助他", "忽略" ) == 2) {
			mes "[咳嗽的年轻人]";
			mes "...咳嗽...";
			mes "咳咳……咳咳";
			close;
		}
		mes "[咳嗽的年轻人]";
		mes "...咳嗽...";
		mes "谢谢。";
		mes "咳咳……咳咳";
		next;
		select( "你最好休息一下" );
		mes "[咳嗽的年轻人]";
		mes "咳嗽...";
		mes "确实如此，但是……咳……我去矿井干活的朋友还没回来……咳。";
		next;
		mes "[咳嗽的年轻人]";
		mes "前几天，一结束工作……他就走了……他说他会回来……";
		mes "他还没回来……咳……还没有。";
		next;
		mes "[咳嗽的年轻人]";
		mes "咳咳咳咳咳";
		mes "我已经和警卫谈过了，但是……咳……咳……他们并没有认真对待……";
		next;
		mes "[咳嗽的年轻人]";
		mes "^ff0000史蒂文^000000不是那种人……咳咳";
		mes "如果他还没有联系我，一定是发生了什么事情。";
		next;
		mes "[咳嗽的年轻人]";
		mes "看来他要去的是^ff0000艾因贝克矿井一楼^000000。";
		mes "如果你环顾四周，也许你会发现一丝线索……即使只是一件小事？";
		ill_teddy = 1;
		setquest 11556;
		close;
	}
	if (ill_teddy == 1) {
		mes "[咳嗽的年轻人]";
		mes "前几天，一结束工作……他就走了……他说他会回来……";
		mes "他还没回来……咳……还没有。";
		next;
		mes "[咳嗽的年轻人]";
		mes "咳咳咳咳咳";
		mes "我已经和警卫谈过了，但是……咳……咳……他们并没有认真对待……";
		next;
		mes "[咳嗽的年轻人]";
		mes "^ff0000史蒂文^000000不是那种人……咳咳";
		mes "如果他还没有联系我，一定是发生了什么事情。";
		next;
		mes "[咳嗽的年轻人]";
		mes "看来他要去的是^ff0000艾因贝克矿井一楼^000000。";
		mes "如果你环顾四周，也许你会发现一丝线索……即使只是一件小事？";
		close;
	}
	if (ill_teddy < 5) {
		mes "[咳嗽的年轻人]";
		mes "啊!咳咳！";
		mes "你回来了！";
		mes "史蒂文……咳嗽";
		mes "你找到他了吗？";
		close;
	}
	if (ill_teddy == 5) {
		mes "[酸]";
		mes "啊!咳咳！";
		mes "你回来了！";
		mes "史蒂文……咳嗽";
		mes "你找到他了吗？";
		next;
		select( "把钱传过去" );
		mes "[酸]";
		mes "....";
		mes "果然……咳咳……发生什么事了？";
		next;
		mes "[酸]";
		mes "他们不可能没事就这么寄钱吧。";
		next;
		mes "[酸]";
		mes "我..咳..必须自己去...咳..咳..";
		mes "也许这没什么帮助，但是……咳嗽";
		mes "我最亲爱的朋友...咳嗽..可能有危险，但我不能保持静止！...咯咯";
		next;
		mes "[酸]";
		mes "咳咳..冒险家..咳..带我一起去吧！";
		mes "请！";
		ill_teddy = 6;
		erasequest 11560;
		setquest 11561;
		close;
	}
	if (ill_teddy == 6) {
		mes "[酸]";
		mes "我..咳..必须自己去...咳..咳..";
		mes "也许这没什么帮助，但是……咳嗽";
		mes "我最亲爱的朋友...咳嗽..可能有危险，但我不能保持静止！...咯咯";
		next;
		mes "[酸]";
		mes "咳咳..冒险家..咳..带我一起去吧！";
		mes "请！";
		close;
	}
	mes "[酸]";
	mes "这些天我大部分时间都在矿井里，所以我的咳嗽似乎有所好转。";
	mes "我的身体变得健康了！";
	mes "这里的空气比矿井还差……咳";
	close;

OnTouch:
	if (BaseLevel >= 150 && ill_teddy == 0)
		npctalk "咳嗽小伙子：咳咳！！", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 150 && ill_teddy == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11560) == 1" );
	end;
}

ein_dun01,198,79,3	script	Teddy Bear#ITB10	4_NASARIAN,{
	if (ill_teddy == 1) {
		mes "[泰迪熊排队]";
		mes "站队！";
		next;
		select( "你为什么站在这里？" );
		mes "[泰迪熊排队]";
		mes "什么？";
		mes "你认为我会把这么先进的信息告诉我第一次见到的陌生人吗？";
		next;
		mes "[泰迪熊排队]";
		mes "如果你有那么好奇，就站在我身后等着轮到你吧！";
		next;
		mes "[泰迪熊排队]";
		mes "信息不是免费获得的。";
		mes "所有的时间和努力...";
		next;
		mes "[????????????]";
		mes "啊啊啊啊！！！";
		mes "松手！！！！";
		mes "你们这些毛茸茸的混蛋！！！！";
		next;
		mes "- 队伍前面传来一名男子的尖叫声。我们去看看前面的情况吧。 -";
		ill_teddy = 2;
		erasequest 11556;
		setquest 11557;
		close;
	}
	if (ill_teddy == 2) {
		mes "[泰迪熊排队]";
		mes "你有听到什么奇怪的事吗？";
		next;
		mes "- 队伍前面传来一名男子的尖叫声。我们去看看前面的情况吧。 -";
		close;
	}
	mes "[泰迪熊排队]";
	mes "站队！";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11556) == 1" );
	end;
}

ein_dun01,189,84,7	script	Bear#3	4_NASARIAN,{
	mes "[泰迪熊排队]";
	mes "嘿！！！不要插队！！！";
	close;
}

ein_dun01,189,82,7	duplicate(dummy_npc)	Bear#4	4_NASARIAN
ein_dun01,190,80,7	duplicate(dummy_npc)	Bear#5	4_NASARIAN
ein_dun01,191,80,5	duplicate(dummy_npc)	Bear#6	4_NASARIAN

ein_dun01,195,80,5	script	Resident#8	4_M_EINMAN2,{
	mes "[居民]";
	mes "有一天，大家都开始在这里排队，我也站在这里。";
	mes "前面是什么？";
	mes "出色地？我来这里只是因为我很好奇......";
	close;
}

ein_dun01,196,80,1	script	Bear#9	4_NASARIAN,{
	mes "[泰迪熊排队]";
	mes "每个人都排了好几天的队等待轮到他们。";
	close;
}

ein_dun01,189,85,7	script	Teddy Bear#IBT1	4_NASARIAN,{
	if (ill_teddy < 2) {
		mes "[泰迪熊排队]";
		mes "哎哟，马上就轮到我进去了。";
		close;
	}
	if (ill_teddy == 2) {
		mes "[泰迪熊排队]";
		mes "呃..发生了什么？";
		mes "当我前面的人刚进来时，我就听到一声尖叫。";
		next;
		select( "关于那个男人。" );
		mes "[泰迪熊排队]";
		mes "什么？";
		mes "我连看的时间都没有！";
		next;
		mes "[泰迪熊排队]";
		mes "缺陷……呵呵……";
		mes "我已经排了好几天队了，突然就没兴趣了……";
		next;
		mes "[泰迪熊排队]";
		mes "如果你真的好奇的话，我会给你我的立场。你为什么不进去看看呢？";
		next;
		mes "[泰迪熊排队]";
		mes "我……不是因为害怕！";
		mes "我只是……我想里面的东西现在对我来说很无聊。";
		mes "因为我失去了兴趣？！";
		ill_teddy = 3;
		erasequest 11557;
		setquest 11558;
		close;
	}
	if (ill_teddy == 3) {
		mes "[泰迪熊排队]";
		mes "缺陷……呵呵……";
		mes "我已经排了好几天队了，突然就没兴趣了……";
		next;
		mes "[泰迪熊排队]";
		mes "如果你真的好奇的话，我会给你我的立场。你为什么不进去看看呢？";
		next;
		mes "[泰迪熊排队]";
		mes "我……不是因为害怕！";
		mes "我只是……我想里面的东西现在对我来说很无聊。";
		mes "因为我失去了兴趣？！";
		close;
	}
	mes "[泰迪熊排队]";
	mes "什么？";
	mes "前面的家伙已经跑掉了！";
	mes "不要混淆！";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11557) == 1" );
	end;
}

ein_dun01,189,87,3	script	An entrance somewhere#IBTin	4_ENERGY_BLUE,{
	if (ill_teddy < 3) {
		mes "- 还不能进去 -";
		close;
	}
	warp "ein_d02_i",168,197;
	end;
}


ein_d02_i,170,193,5	script	Steven#IBT	4W_M_02,3,3,{
	if (checkweight(1201,3) == 0) {
		mes "- 稍等！！";
		mes "- 你的物品太多了。 -";
		mes "- 你无法收到这个。 -";
		mes "- 减轻体重并且 -";
		mes "- 再试一次。 -";
		close;
	}
	if (ill_teddy < 3)
		end;
	if (ill_teddy == 3) {
		mes "[史蒂文]";
		mes "你就不能放开我吗？！";
		mes "让我走吧！";
		mes "这太糟糕了！";
		npctalk "史蒂文：你就不能放开我吗？！", "", bc_self;
		cloakoffnpcself( "White Teddy Bear#IBT" );
		cloakoffnpcself( "Teddy Bear#IBT" );
		next;
		mes "[泰迪熊]";
		mes "哎呀！";
		mes "抓到了，我抓到了！";
		mes "我们跑吧！！！！";
		npctalk "白色泰迪熊：被发现了，我被发现了！", "白色泰迪熊#IBT", bc_self;
		npctalk "泰迪熊：我们跑吧！！！！", "玩具熊#IBT", bc_self;
		ill_teddy = 4;
		erasequest 11558;
		setquest 11559;
		close2;
		cloakonnpcself( "White Teddy Bear#IBT" );
		cloakonnpcself( "Teddy Bear#IBT" );
		end;
	}
	if (ill_teddy == 4) {
		mes "[史蒂文]";
		mes "什么...";
		mes "那是...";
		next;
		mes "[史蒂文]";
		mes "嘿！";
		mes "你在那里！";
		mes "你也看到了吗？";
		mes "泰迪熊刚刚...";
		next;
		select( "告诉他那个咳嗽的年轻人的事。" );
		mes "[史蒂文]";
		mes "啊？艾因布洛赫那个咳嗽的年轻人让你来找我？";
		mes "是酸吗...";
		next;
		mes "[史蒂文]";
		mes "我告诉他我会马上回来，但谣言到底是什么？那里有很多人和怪物在排队等候。";
		next;
		mes "[史蒂文]";
		mes "那么酸怎么样？";
		mes "由于咳嗽得很厉害，他睡不好觉。";
		next;
		mes "[史蒂文]";
		mes "我得回去送他去医院，但是……";
		mes "如果我没记错的话，那就是……";
		next;
		mes "[史蒂文]";
		mes "呃……事情变得混乱了……";
		next;
		mes "[史蒂文]";
		mes "嘿。";
		mes "帮我一个忙。";
		mes "他今天必须去医院，钱不够。";
		next;
		mes "[史蒂文]";
		mes "我想我需要在这里做一些工作。";
		mes "你回去告诉他我没事。";
		mes "这笔钱也给他吧。";
		next;
		mes "[史蒂文]";
		mes "请。";
		mes "等我回去……我什么都没有，但我会回报你一些东西。";
		npctalk "史蒂文：请。", "", bc_self;
		ill_teddy = 5;
		erasequest 11559;
		setquest 11560;
		close;
	}
	if (ill_teddy == 5) {
		mes "[史蒂文]";
		mes "嘿。";
		mes "帮我一个忙。";
		mes "他今天必须去医院，钱不够。";
		next;
		mes "[史蒂文]";
		mes "我想我需要在这里做一些工作。";
		mes "你回去告诉他我没事。";
		mes "这笔钱也给他吧。";
		next;
		mes "[史蒂文]";
		mes "请。";
		mes "等我回去……我什么都没有，但我会回报你一些东西。";
		npctalk "史蒂文：请。", "", bc_self;
		close;
	}
	if (ill_teddy == 6) {
		mes "[史蒂文]";
		mes "哦，你在这儿吗？";
		mes "他去医院了吗？";
		next;
		mes "[酸]";
		mes "史蒂文！";
		mes "何必让人如此担心呢...";
		cloakoffnpcself( "Acid#IBT_inN01" );
		next;
		mes "[史蒂文]";
		mes "不……你为什么在这里？";
		mes "去医院吧！";
		next;
		mes "[酸]";
		mes "我现在有医院或商店吗？";
		next;
		mes "[史蒂文]";
		mes "啊...";
		mes "好吧……好吧！";
		mes "暂时安静！";
		mes "你能听到从北方传来什么奇怪的声音吗？";
		npctalk "史蒂文：呃……唠叨……", "", bc_self;
		ill_teddy = 7;
		erasequest 11561;
		setquest 11562;
		close2;
		cloakonnpcself( "Acid#IBT_inN01" );
		end;
	}
	if (ill_teddy == 7) {
		mes "[史蒂文]";
		mes "啊...";
		mes "好的！";
		mes "暂时安静！";
		mes "你能听到从北方传来什么奇怪的声音吗？";
		npctalk "史蒂文：呃……唠叨……", "", bc_self;
		close;
	}
	if (ill_teddy == 8) {
		if (checkquest(11563,HUNTING) != 2 || checkquest(11564,HUNTING) != 2) {
			mes "[史蒂文]";
			mes "他们太多了。";
			mes "这太危险了。";
			mes "让我们把事情弄清楚然后再谈。";
			close;
		}
		mes "[史蒂文]";
		mes "哇...";
		mes "你把他们送出去了吗？";
		next;
		mes "[酸]";
		mes "这些不就是泰迪熊吗？";
		mes "入侵……他们称自己为拿撒勒人，对吗？";
		cloakoffnpcself( "Acid#IBT_inN01" );
		next;
		mes "[史蒂文]";
		mes "到底是怎么回事...";
		mes "我已经失去理智了...";
		next;
		select( "关于泰迪熊" );
		mes "[酸]";
		mes "史蒂文带来了它，因为他说他想在家里找一些咸的吃的。";
		next;
		mes "[酸]";
		mes "工资比工作好太多了，而且送货地点也是矿场，所以有点可疑……";
		next;
		mes "[酸]";
		mes "有人告诉我那个白痴很兴奋。";
		next;
		mes "[史蒂文]";
		mes "真是个白痴！";
		mes "多亏了你，我才收到医院账单和你的咳嗽……";
		mes "哦……你想想，你已经不咳嗽了吧？";
		npctalk "史蒂文：真是个白痴！", "", bc_self;
		next;
		mes "[酸]";
		mes "呃……是这样吗？";
		mes "想到这里，我感觉呼吸轻松了！";
		next;
		mes "[史蒂文]";
		mes "不管去医院多少次，都不见好转……";
		mes "也许只是空气不好！";
		npctalk "史蒂文：空气比矿井里的还糟糕……", "", bc_self;
		next;
		mes "[酸]";
		mes "不，现在这并不重要……";
		mes "我们制作的娃娃是活的，会动的！";
		mes "他们甚至试图绑架你！";
		next;
		mes "[史蒂文]";
		mes "被绑架了……想想看，我在回来的路上帮助了一个被一只可怕的泰迪熊追赶的人。";
		next;
		mes "[史蒂文]";
		mes "……我不是唯一一个被带到这里的人，不是吗？";
		mes "我想我得留在这里观察情况了。";
		mes "酸！你现在可以回村子了。";
		next;
		mes "[史蒂文]";
		mes "也谢谢你对我的帮助。";
		mes "我不能给你太多，但我会把我之前发现的稀有矿石给你。";
		mes "它可能会在某个地方派上用场！";
		ill_teddy = 9;
		erasequest 11563;
		erasequest 11564;
		getitem 25271,5; // IllusionStone
		getexp 3500000,2500000;
		close2;
		cloakonnpcself( "Acid#IBT_inN01" );
		end;
	}

	// daily
	switch( checkquest(11566,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[史蒂文]";
		mes "休息一下";
		mes "如果过度，只会毁掉你的健康。";
		close;
	case 2:
		erasequest 11566;
		break;
	}
	switch( checkquest(11565,HUNTING) ) {
	case -1:
		mes "[史蒂文]";
		mes "啊...";
		mes "这些家伙总是在哪里出现？";
		next;
		mes "[史蒂文]";
		mes "如果熟悉战斗的话，不熟悉战斗的傀儡师想要离开这里并不容易。";
		next;
		mes "[史蒂文]";
		mes "目前，我也在照顾它，但我一个人还不够好。";
		mes "如果你现在不忙的话，帮我打败" + getmonsterinfo("ILL_PITMAN", MOB_NAME) + "、" + getmonsterinfo("ILL_MINERAL", MOB_NAME) + "和" + getmonsterinfo("ILL_OBSIDIAN", MOB_NAME) + ".";
		mes "我想如果我抓到10个我就能喘口气了。";
		next;
		if (select( "接受", "退出" ) == 2) {
			mes "[史蒂文]";
			mes "好的...";
			close;
		}
		mes "[史蒂文]";
		mes "那么请帮我打败";
		mes "10 " + getmonsterinfo("ILL_PITMAN", MOB_NAME) + "、" + getmonsterinfo("ILL_MINERAL", MOB_NAME) + " 和 " + getmonsterinfo("ILL_OBSIDIAN", MOB_NAME) + "！";
		setquest 11565;
		close;
	case 0:
	case 1:
		mes "[史蒂文]";
		mes "你好吗？";
		mes "" + getmonsterinfo("ILL_PITMAN", MOB_NAME) + "、" + getmonsterinfo("ILL_MINERAL", MOB_NAME) + " 和 " + getmonsterinfo("ILL_OBSIDIAN", MOB_NAME) + " 进展如何？";
		close;
	case 2:
		mes "[史蒂文]";
		mes "哇...";
		mes "好工作！";
		mes "你现在感觉安全一点了吗？";
		erasequest 11565;
		setquest 11566;
		getitem 25271,1; // IllusionStone
		getexp 1000000,900000;
		close;
	}
	end;

OnTouch:
	if (ill_teddy == 3) {
		mes "[史蒂文]";
		mes "你就不能放开我吗？！";
		mes "让我走吧！";
		mes "这太糟糕了！";
		npctalk "史蒂文：你就不能放开我吗？！", "", bc_self;
		cloakoffnpcself( "White Teddy Bear#IBT" );
		cloakoffnpcself( "Teddy Bear#IBT" );
		next;
		mes "[泰迪熊]";
		mes "哎呀！";
		mes "抓到了，我抓到了！";
		mes "我们跑吧！！！！";
		npctalk "白色泰迪熊：被发现了，我被发现了！", "白色泰迪熊#IBT", bc_self;
		npctalk "泰迪熊：我们跑吧！！！！", "玩具熊#IBT", bc_self;
		ill_teddy = 4;
		erasequest 11558;
		setquest 11559;
		close2;
		cloakonnpcself( "White Teddy Bear#IBT" );
		cloakonnpcself( "Teddy Bear#IBT" );
		end;
	}
	end;

OnInit:
	// main quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11558) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11559) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11561) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11563,HUNTING) == 2 && checkquest(11564,HUNTING) == 2" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_teddy == 9 && checkquest(11565,HUNTING) == -1 && checkquest(11566,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11565,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11566,PLAYTIME) == 2" );
	end;
}

ein_d02_i,135,229,1	duplicate(dummy_cloaked_npc)	Acid#IBT_inN	4_M_NFMAN
ein_d02_i,169,193,5	duplicate(dummy_cloaked_npc)	White Teddy Bear#IBT	4_TEDDY_BEAR_W
ein_d02_i,171,193,3	duplicate(dummy_cloaked_npc)	Teddy Bear#IBT	4_NASARIAN
ein_d02_i,172,192,1	duplicate(dummy_cloaked_npc)	Acid#IBT_inN01	4_M_NFMAN

ein_d02_i,132,233,0	script	#ITBSuspicious place	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_teddy == 7) {
		mes "[??????]";
		mes "嗯哈哈哈哈哈哈哈哈哈！！！";
		mes "听着，人们！";
		mes "我们再次崛起的那一天终于到来了！";
		cloakoffnpcself( "??????#IBT_inB01" );
		cloakoffnpcself( "??????#IBT_inB02_1" );
		cloakoffnpcself( "??????#IBT_inB03" );
		cloakoffnpcself( "??????#IBT_inB04" );
		cloakoffnpcself( "??????#IBT_inB05" );
		cloakoffnpcself( "??????#IBT_inB06" );
		cloakoffnpcself( "??????#IBT_inB07" );
		cloakoffnpcself( "??????#IBT_inB08" );
		cloakoffnpcself( "??????#IBT_inB09" );
		cloakoffnpcself( "??????#IBT_inB10" );
		cloakoffnpcself( "??????#IBT_inB11" );
		cloakoffnpcself( "??????#IBT_inB12" );
		cloakoffnpcself( "??????#IBT_inB13" );
		cloakoffnpcself( "??????#IBT_inB15" );
		cloakoffnpcself( "??????#IBT_inB16" );
		cloakoffnpcself( "??????#IBT_inB17" );
		cloakoffnpcself( "??????#IBT_inB18" );
		cloakoffnpcself( "??????#IBT_inB19" );
		cloakoffnpcself( "??????#IBT_inB20" );
		cloakoffnpcself( "??????#IBT_inB21" );
		cloakoffnpcself( "??????#IBT_inB22" );
		npctalk "???? : 嗯哈哈哈哈哈哈哈哈哈！！！", "????#IBT_inB01", bc_self;
		next;
		mes "[??????]";
		mes "忘记被困在黑暗潮湿的土地上的耻辱的过去。";
		npctalk "???? ：忘记被困在阴暗潮湿的地面上的耻辱过去。", "???????#IBT_inB01", bc_self;
		next;
		mes "[??????]";
		mes "这片土地！！！";
		npctalk "???? ：这片土地！！！", "???????#IBT_inB01", bc_self;
		sleep2 500;
		mes "这个世界！！！！";
		npctalk "???? : 这个世界！！！", "????#IBT_inB01", bc_self;
		sleep2 500;
		mes "直到他们拜倒在我们脚下的那一天，我们拿撒勒人！！！";
		npctalk "???? ：直到他们拜倒在我们脚下的那一天，我们拿撒勒人！！！！", "????#IBT_inB01", bc_self;
		sleep2 500;
		mes "不会阻止入侵！";
		npctalk "???? ：不会阻止入侵！", "????#IBT_inB01", bc_self;
		next;
		mes "[拿撒勒人]";
		mes "好的！新的身体已经到来！";
		mes "我们将把我们的圣核植入到这只是空壳的身体里！";
		next;
		mes "[??????]";
		mes "德里维乌斯！快来领取吧！！！";
		next;
		mes "[德里维乌斯]";
		mes "是的！！！陛下来了！！！";
		next;
		mes "[拿撒勒皇帝]";
		mes "哈哈……看！";
		mes "这明亮美丽的身影……";
		next;
		mes "[拿撒勒皇帝]";
		mes "人们！！！";
		mes "欢迎！";
		mes "勇敢的新生战士！！！";
		cloakonnpcself( "??????#IBT_inB02_1" );
		cloakoffnpcself( "??????#IBT_inB02_2" );
		npctalk "???? ：……哦……啊啊……", "????#IBT_inB01", bc_self;
		next;
		mes "[拿撒勒人]";
		mes "哇！！！！";
		mes "皇帝万岁！！！！";
		next;
		mes "[拿撒勒人]";
		mes "万岁！！！万岁！！！";
		next;
		mes "[拿撒勒人]";
		mes "看看那边那些英姿飒爽的士兵！！！";
		mes "惊人的！！！！";
		next;
		mes "[拿撒勒皇帝]";
		mes "世界将在拿撒勒人的强大力量面前屈服！！！！！！";
		next;
		mes "[拿撒勒人]";
		mes "哇！！！！";
		mes "皇帝万岁！！！！";
		mes "万岁！！！万岁！！！";
		cloakoffnpcself( "Steven#IBT_inN" );
		cloakoffnpcself( "Acid#IBT_inN" );
		next;
		mes "[史蒂文]";
		mes "等等那是什么？";
		mes "这不是我们做的娃娃吗？";
		next;
		mes "[酸]";
		mes "大概吧？";
		next;
		mes "[史蒂文]";
		mes "它不仅看起来像这样，而且是我们制作的！";
		next;
		mes "[史蒂文]";
		mes "是因为你缝错了才弄乱的？？是的！";
		next;
		mes "[酸]";
		mes "真是一团乱啊……";
		mes "那个有自己的可爱点吗？";
		next;
		mes "[史蒂文]";
		mes "...可爱的角...";
		next;
		mes "[拿撒勒皇帝]";
		mes "唔...";
		mes "哎呀...";
		next;
		mes "[拿撒勒皇帝]";
		mes "看来神圣的集会里潜伏着一只老鼠。";
		next;
		mes "[拿撒勒皇帝]";
		mes "拿撒勒的战士们！！！";
		mes "严惩闯入者！！！";
		next;
		mes "[拿撒勒人]";
		mes "从我们的名字开始！";
		mes "我们会做到的！";
		next;
		mes "[拿撒勒人]";
		mes "哇！！！";
		mes "惩罚他们！";
		mes "这是入侵者！！！";
		next;
		mes "[史蒂文]";
		mes "哎呀！";
		mes "看来我们被抓住了？！";
		next;
		mes "[史蒂文]";
		mes "嘿！";
		mes "敌人很多，我们分散逃跑吧！";
		next;
		mes "[史蒂文]";
		mes "适当照顾那些追赶我们的人。";
		mes "那么一分钟后出口处见！";
		ill_teddy = 8;
		erasequest 11562;
		setquest 11563;
		setquest 11564;
		close2;
		cloakonnpcself( "Steven#IBT_inN" );
		cloakonnpcself( "Acid#IBT_inN" );
		cloakonnpcself( "??????#IBT_inB01" );
		cloakonnpcself( "??????#IBT_inB02_2" );
		cloakonnpcself( "??????#IBT_inB03" );
		cloakonnpcself( "??????#IBT_inB04" );
		cloakonnpcself( "??????#IBT_inB05" );
		cloakonnpcself( "??????#IBT_inB06" );
		cloakonnpcself( "??????#IBT_inB07" );
		cloakonnpcself( "??????#IBT_inB08" );
		cloakonnpcself( "??????#IBT_inB09" );
		cloakonnpcself( "??????#IBT_inB10" );
		cloakonnpcself( "??????#IBT_inB11" );
		cloakonnpcself( "??????#IBT_inB12" );
		cloakonnpcself( "??????#IBT_inB13" );
		cloakonnpcself( "??????#IBT_inB15" );
		cloakonnpcself( "??????#IBT_inB16" );
		cloakonnpcself( "??????#IBT_inB17" );
		cloakonnpcself( "??????#IBT_inB18" );
		cloakonnpcself( "??????#IBT_inB19" );
		cloakonnpcself( "??????#IBT_inB20" );
		cloakonnpcself( "??????#IBT_inB21" );
		cloakonnpcself( "??????#IBT_inB22" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11562) == 1" );
	end;
}

ein_d02_i,142,244,3	duplicate(dummy_cloaked_npc)	??????#IBT_inB01	4_NASARIAN_EM
ein_d02_i,141,244,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB02_1	4_TEDDY_BEAR_B_L
ein_d02_i,141,244,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB02_2	4_TEDDY_BEAR_B
ein_d02_i,140,244,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB03	4_TEDDY_BEAR_W
ein_d02_i,141,240,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB04	4_NASARIAN
ein_d02_i,139,240,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB05	4_TEDDY_BEAR_W
ein_d02_i,140,238,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB06	4_NASARIAN
ein_d02_i,136,240,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB07	4_TEDDY_BEAR_W
ein_d02_i,133,240,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB08	4_TEDDY_BEAR_B
ein_d02_i,142,237,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB09	4_NASARIAN
ein_d02_i,140,236,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB10	4_TEDDY_BEAR_W
ein_d02_i,142,243,1	duplicate(dummy_cloaked_npc)	??????#IBT_inB11	4_NASARIAN
ein_d02_i,144,242,3	duplicate(dummy_cloaked_npc)	??????#IBT_inB12	4_NASARIAN
ein_d02_i,144,240,1	duplicate(dummy_cloaked_npc)	??????#IBT_inB13	4_NASARIAN
ein_d02_i,141,246,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB14	4_TEDDY_BEAR_W
ein_d02_i,141,237,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB15	4_NASARIAN
ein_d02_i,141,242,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB16	4_TEDDY_BEAR_B
ein_d02_i,137,240,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB17	4_NASARIAN
ein_d02_i,136,238,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB18	4_NASARIAN
ein_d02_i,138,238,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB19	4_NASARIAN
ein_d02_i,141,241,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB20	4_TEDDY_BEAR_B
ein_d02_i,145,241,1	duplicate(dummy_cloaked_npc)	??????#IBT_inB21	4_NASARIAN
ein_d02_i,140,243,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB22	4_NASARIAN
ein_d02_i,133,233,7	duplicate(dummy_cloaked_npc)	Steven#IBT_inN	4W_M_02

ein_d02_i,168,206,5	script	Gloomy Teddy Bear#ITB	4_TEDDY_BEAR_B_L,{
	if (checkweight(1201,3) == 0) {
		mes "- 稍等！！";
		mes "- 你的物品太多了。 -";
		mes "- 你无法收到这个。 -";
		mes "- 减轻体重并且 -";
		mes "- 再试一次。 -";
		close;
	}
	if (ill_teddy < 9) {
		mes "[忧郁的泰迪熊]";
		mes "啊...";
		mes "这是梦境还是现实……";
		mes "我是死了……还是活着……";
		next;
		mes "[忧郁的泰迪熊]";
		mes "我们……不该回来……";
		mes "我得回去了...";
		close;
	}
	switch( checkquest(11569,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[忧郁的泰迪熊]";
		mes "哎呀……别这么催我……";
		close;
	case 2:
		erasequest 11569;
		break;
	}
	switch( checkquest(11567,HUNTING) ) {
	case -1:
		mes "[忧郁的泰迪熊]";
		mes "啊...";
		mes "这是梦境还是现实……";
		mes "我是死了……还是活着……";
		next;
		mes "[忧郁的泰迪熊]";
		mes "我们……不该回来……";
		mes "我得回去了...";
		next;
		mes "[忧郁的泰迪熊]";
		mes "嘿...别只是站在那儿，帮帮我...";
		mes "我……拿撒勒人……";
		next;
		mes "[忧郁的泰迪熊]";
		mes "^ff0000杀死 10 个 " + getmonsterinfo("ILL_TEDDY_BEAR_R", MOB_NAME) + "、" + getmonsterinfo("ILL_TEDDY_BEAR_Y", MOB_NAME) + "、" + getmonsterinfo("ILL_TEDDY_BEAR_G", MOB_NAME) + "、" + getmonsterinfo("ILL_TEDDY_BEAR_B", MOB_NAME) + " 和" + getmonsterinfo("ILL_TEDDY_BEAR_W", MOB_NAME) + "^000000并将它们送回深处...休息...";
		next;
		if (select( "接受", "退出" ) == 2) {
			mes "[忧郁的泰迪熊]";
			mes "...啊...";
			close;
		}
		mes "[忧郁的泰迪熊]";
		mes "我想结束这一切……地狱般的噩梦……";
		mes "快点...";
		setquest 11567;
		setquest 11568;
		close;
	case 0:
	case 1:
		mes "[忧郁的泰迪熊]";
		mes "啊……什么时候才能平静呢……";
		mes "……请求还没有……";
		close;
	case 2:
		switch( checkquest(11568,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			mes "[忧郁的泰迪熊]";
			mes "啊……什么时候才能平静呢……";
			mes "……请求还没有……";
			close;
		case 2:
			mes "[忧郁的泰迪熊]";
			mes "为什么还是……没有消失……";
			mes "这可怕的噩梦...";
			erasequest 11567;
			erasequest 11568;
			setquest 11569;
			getitem 25271,1; // IllusionStone
			getexp 1300000,1000000;
			close;
		}
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_teddy == 9 && checkquest(11569,PLAYTIME) == -1 && checkquest(11567,HUNTING) == -1 && checkquest(11568,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11569,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11567,HUNTING) == 2 && checkquest(11568,HUNTING) == 2" );
	end;
}


ein_d02_i,191,192,3	script	Porcelain Doll Craftsman#ITB	4_F_HUWOMAN,{
	if (checkweight(1201,3) == 0) {
		mes "- 稍等！！";
		mes "- 你的物品太多了。 -";
		mes "- 你无法收到这个。 -";
		mes "- 减轻体重并且 -";
		mes "- 再试一次。 -";
		close;
	}
	if (ill_teddy < 9) {
		mes "[瓷娃娃工匠]";
		mes "啊啊啊啊！！！！";
		mes "你很惊讶！";
		close;
	}
	switch( checkquest(11571,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[瓷娃娃工匠]";
		mes "冒险家，欢迎回来。";
		mes "多亏了你们，我才得以在矿井深处继续学习。";
		mes "请黎明时再回来。";
		close;
	case 2:
		erasequest 11571;
		break;
	}
	switch( checkquest(11570,HUNTING) ) {
	case -1:
		mes "[瓷娃娃工匠]";
		mes "啊啊啊啊！！！！";
		mes "你很惊讶！";
		next;
		mes "[瓷娃娃工匠]";
		mes "您在附近见过巨大的^ff0000" + getmonsterinfo("ILL_TEDDY_BEAR_S", MOB_NAME) + "^000000吗？";
		mes "我好不容易才到达入口，但当我试图离开时，他出现了，并且已经躲在这里好几天了。";
		next;
		if (select( "帮助", "退出" ) == 2) {
			mes "[瓷娃娃工匠]";
			mes "哭泣！";
			mes "结束了！！！";
			mes "我永远被困在这里了！";
			close;
		}
		mes "[瓷娃娃工匠]";
		mes "活！！！";
		mes "你看到了吗？";
		mes "这是一个巨大的^ff0000" + getmonsterinfo("ILL_TEDDY_BEAR_S", MOB_NAME) + "^000000。";
		mes "你必须杀掉它！";
		setquest 11570;
		close;
	case 0:
	case 1:
		mes "[瓷娃娃工匠]";
		mes "你好吗？";
		mes "你杀死了^ff0000" + getmonsterinfo("ILL_TEDDY_BEAR_S", MOB_NAME) + "^000000吗？";
		close;
	case 2:
		// unknown text
		erasequest 11570;
		setquest 11571;
		getitem 25271,1; // IllusionStone
		getexp 1500000,1100000;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_teddy == 9 && checkquest(11571,PLAYTIME) == -1 && checkquest(11570,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11571,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11570,HUNTING) == 2" );
	end;
}

ein_d02_i,169,244,1	script	White Bear#ITBz01	4_TEDDY_BEAR_W,3,3,{
	end;
OnTouch:
	npctalk "白色泰迪熊：啊……亲爱的夏洛特……来到这样的地方……", "", bc_self;
	end;
}

ein_d02_i,169,244,1	script	Sirumsireum Teddy Bear#ITBz02	4_TEDDY_BEAR_B_L,{
	npctalk "泰迪熊：你对我做了什么……", "", bc_self;
	end;
}
