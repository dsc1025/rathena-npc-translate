//===== rAthena Script =======================================
//= Direction of Prayer
//===== Description: =========================================
//= [Walkthrough Conversion]
//--- Main quest NPCs for Episode 18
//
// Notes:
// - The last value of ep18_main is 57
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//===== Translated By: =======================================
//= dsc
//============================================================

// Main Quest: Step 1.
// ba_in01,26,266,3	script	Smart Elly#ep18ely01	4_EP17_TABLET,{

ba_in01,22,262,6	script(CLOAKED)	Est#ep181_est01	4_F_ESTLOVELOY,{
	if (ep18_main == 1) {
		mes "[是]";
		mes "照顾好你自己。";
		close;
	}
	end;
}


// ba_in01,24,262,7	script(CLOAKED)	Rookie#ep181_rk01	4_M_ROOKIE,3,0,{
ba_in01,24,262,7	script(CLOAKED)	Rookie#ep181_rk01	4_M_ROOKIE,{
	if (ep18_main == 1) {
		cutin "16loo_03.bmp",0;
		mes "[新秀]";
		mes "这很不幸，但事实就是如此。";
		mes "我们还有公司的工作要做，不能只是坐着玩。";
		mes "等一切都解决了再来看你。";
		close3;
	}
	end;
// OnTouch:	// unknown effect
	// end;
}


// Main Quest: Step 2.
rachel,182,176,3	script	Masked Girl	4_F_MASK,5,5,{
	.@char_id = getcharid(0);
	if (ep18_main == 1) {
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			mes "有人正在大声讲话。";
			next;
			mes "[迷你艾莉]";
			mes "请把它从包里拿出来，放在我的头上。";
			unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Please take it out of the bag and put it on top of my head.", bc_self;
			close;
		}
		mes "有人正在大声讲话。";
		next;
		mes "[迷你艾莉]";
		mes "我收到一个信号，表明您已到达当地坐标。";
		mes "这就是我叫你去的地方吗？";
		next;
		switch( select( "正确", "否" ) ) {
		case 1:
			mes "[" + strcharinfo(0) + "]";
			mes "好的，我们到了。";
			break;
		case 2:
			mes "[" + strcharinfo(0) + "]";
			mes "我不认为它在这里。";
			next;
			mes "[迷你艾莉]";
			mes "这很奇怪，但似乎与迷你艾莉现在传来的信息相符，所以让我们检查一下。";
			break;
		}
		next;
		mes "[迷你艾莉]";
		mes "客人是否发现任何可疑之处？";
		mes "我从未见过非入侵者非客人的人，但我知道那些蒙面人是可疑的。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那些人都是这里的居民……";
		next;
		mes "[迷你艾莉]";
		mes "这不是一件很有趣的衣服吗？";
		mes "我会记住这一点。";
		next;
		mes "[发言人]";
		mes "...不。";
		mes "我们不是在谈论与邻居的和平或类似的事情。";
		mes "我们需要的是一个稍微好一点的未来。";
		npctalk "演讲者：如果我们现在不采取行动，阿鲁纳费尔茨的未来将会一片混乱！", "蒙面人", bc_self;
		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		npctalk "它是什么？", "人群#ep18c01", bc_self;
		next;
		mes "[发言人]";
		mes "如果这都不算重复，那还能叫什么呢？";
		mes "当这明显是一个国家分裂的标志时，我们怎么能忽视这一点呢？";
		cloakoffnpcself( "Crowd#ep18c05" );
		next;
		mes "[发言人]";
		mes "为什么会发生这种情况？";
		mes "为什么就不能尊重别人呢？";
		mes "相信每个人都有自己的想法，但我还是想说一下。";
		cloakoffnpcself( "Crowd#ep18c02" );
		npctalk "是谁？", "人群#ep18c02", bc_self;
		next;
		mes "[发言人]";
		mes "作为这个国家的公民，将你所有的价值观托付给你的出生血统并对它实施暴力，这对你来说意味着什么？";
		mes "这对你来说意味着什么？";
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		npctalk "是谁？", "人群#ep18c01", bc_self;
		npctalk "拖出来！", "人群#ep18c02", bc_self;
		npctalk "我以前从未见过他们。他们到底是谁？", "人群#ep18c03", bc_self;
		next;
		mes "[发言人]";
		mes "你不觉得为这样的故事生气很奇怪吗？";
		npctalk "正确的！", "人群#ep18c04", bc_self;
		npctalk "嘿，你是什么人，土生土长的人！", "人群#ep18c02", bc_self;
		npctalk "需要区分，这不是很奇怪吗？", "人群#ep18c03", bc_self;
		next;
		mes "[发言人]";
		mes "我不希望你们吵架。";
		mes "除非我们团结起来，否则我们就没有未来。";
		npctalk "你又是什么生意！", "人群#ep18c02", bc_self;
		npctalk "这家伙没有答案。", "人群#ep18c04", bc_self;
		next;
		mes "演讲者继续演讲，没有理会听众的声音。";
		next;
		mes "[迷你艾莉]";
		mes "这很有趣。戴着口罩的人还不少。看来即使我们都长着同一张脸，我们还是能区分彼此。";
		npctalk "嘿，言语很好，但随着人们不断受伤并被送往医院，你认为光说话就能解决任何问题吗？", "人群#ep18c02", bc_self;
		npctalk "那是谁的错？", "人群#ep18c05", bc_self;
		next;
		mes "[迷你艾莉]";
		mes "为什么这个人要打断正在说正确话的人？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "因为我相信这是不对的。";
		npctalk "你看，我以前见过。当发生战斗时，这只是一个战场，还是有时移民是唯一的目标？", "人群#ep18c02", bc_self;
		npctalk "听说是因为土著小孩以前被打了，然后才报复。", "人群#ep18c05", bc_self;
		next;
		mes "[迷你艾莉]";
		mes "看来吵闹声越来越大了。";
		mes "每个人似乎都认为自己是对的，不愿意听别人说什么。";
		npctalk "对人使用暴力本来就是错误的！", "人群#ep18c05", bc_self;
		npctalk "他们肯定做错了什么。", "人群#ep18c02", bc_self;
		npctalk "我真的不喜欢听到“他们一定做错了什么”这句话。 “出了点问题”到底是什么意思？", "人群#ep18c04", bc_self;
		next;
		mes "[迷你艾莉]";
		mes "噪音似乎比之前更大了。";
		npctalk "告诉受害者他们有理由受害是错误的！", "人群#ep18c05", bc_self;
		next;
		mes "[紧张的牧师]";
		mes "我们应该做什么...我们应该干预吗？";
		npctalk "这可麻烦了...", "紧张的牧师#e18a", bc_self;
		completequest 8681;
		setquest 8682;
		ep18_main = 2;
		close;
	}

	if (ep18_main == 2) {
		mes "演讲没有结束。";
		mes "周围的气氛充满敌意。";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: It seems like there's someone here who doesn't quite fit in.", bc_self;

		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		cloakoffnpcself( "Crowd#ep18c05" );
		cloakoffnpcself( "Crowd#ep18c02" );
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		close;
	}
	if (ep18_main == 3 || ep18_main == 4) {
		mes "演讲没有结束。";
		mes "不幸的牧师却视而不见。";

		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		cloakoffnpcself( "Crowd#ep18c05" );
		cloakoffnpcself( "Crowd#ep18c02" );
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		cloakoffnpcself( "Crowd#ep18c06" );
		close;
	}
	if (ep18_main == 4) {
		cloakoffnpcself( "Girl#ep18c07" );
		cloakoffnpcself( "Guard Gala#ep18c08" );
		cloakoffnpcself( "Guard Izu#ep18c09" );

		mes "[蒙面人]";
		mes "这里有人戴着口罩发表演讲吗？";
		mes "嗯...";
		next;
		mes "[蒙面人]";
		mes "别误会，你们外人可能不知道，但我们透过这个半遮半掩的面具认出了彼此。";
		next;
		mes "[蒙面人]";
		mes "他是一个勇敢的人，不伪装。";
		mes "你可能是唯一一个分不清我和他的人。";
		close;
	}
	mes "[蒙面人]";
	mes "芙蕾雅就是爱。";
	close;

OnTouch:
	.@char_id = getcharid(0);
	if (ep18_main == 0) {
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			mes "垂头丧气的艾莉去哪儿了？";
			close;
		}
		end;
	}
	if (ep18_main == 1) {
		mes "[迷你艾莉]";
		mes "请把它从包里拿出来，放在我的头上。";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Please take it out of the bag and put it on top of my head.", bc_self;
		close;
	}
	if (ep18_main == 2 || ep18_main == 3) {
		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		cloakoffnpcself( "Crowd#ep18c05" );
		cloakoffnpcself( "Crowd#ep18c02" );
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		if (ep18_main == 3)
			cloakoffnpcself( "Crowd#ep18c06" );
		end;
	}
	if (ep18_main == 4) {
		cloakoffnpcself( "Girl#ep18c07" );
		cloakoffnpcself( "Guard Gala#ep18c08" );
		cloakoffnpcself( "Guard Izu#ep18c09" );
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8681) == 1" );
	end;
}

rachel,179,175,7	duplicate(dummy_cloaked_npc)	Crowd#ep18c01	4_F_MASK
rachel,177,178,5	duplicate(dummy_cloaked_npc)	Crowd#ep18c02	4_M_RACHMAN1
rachel,179,171,7	duplicate(dummy_cloaked_npc)	Crowd#ep18c03	4_M_RACHMAN2
rachel,181,170,0	duplicate(dummy_cloaked_npc)	Crowd#ep18c04	4_M_MIDDLE
rachel,186,173,1	duplicate(dummy_cloaked_npc)	Crowd#ep18c05	4_F_MASK
rachel,184,171,1	duplicate(dummy_cloaked_npc)	Crowd#ep18c06	4_F_MASK

rachel,187,170,3	script(CLOAKED)	Girl#ep18c07	4_F_DST_CHILD,{
	mes "[女孩]";
	mes "天啊！大家都在逃跑！";
	close;
}

rachel,187,173,3	script(CLOAKED)	Guard Gala#ep18c08	4_M_RASWORD,{
	mes "[守护盛宴]";
	mes "我们稍后会讨论这个问题。";
	close;
}

rachel,187,174,3	script(CLOAKED)	Guard Izu#ep18c09	4_M_RASWORD,{
	mes "[守卫伊豆]";
	mes "叹...";
	close;
}

// Main Quest: Step 3.
rachel,183,170,3	script(CLOAKED)	Nervous Priest#e18a	4_M_TRAINEE,{
	if (checkweight(1000405,20) == 0) {
		mes "- 你无法继续任务，因为你拥有太多物品。 -";
		close;
	}
	.@char_id = getcharid(0);
	if (ep18_main == 2) {
		cloakoffnpcself( "Crowd#ep18c06" );
		mes "[紧张的牧师]";
		mes "...？";
		mes "哦，你听到我说话了吗，对不起。";
		next;
		mes "[紧张的牧师]";
		mes "嗯...好吧，你瞧。近来此类骚乱屡见不鲜。";
		next;
		mes "[紧张的牧师]";
		mes "那么……冒险家是第一次拜访瑞秋吗？";
		npctalk "我怎么知道呢？你就是个笑话。", "人群#ep18c02", bc_self;
		npctalk "什么？这家伙还有什么不能说的吗？", "人群#ep18c04", bc_self;
		next;
		select( "不" );
		mes "[紧张的牧师]";
		mes "出色地...";
		mes "我不确定你对阿鲁纳费尔茨了解多少，但是......";
		mes "您是否知道...原籍居民之间存在任何纠纷？";
		next;
		select( "我听说过" );
		mes "[紧张的牧师]";
		mes "好吧，可耻的是……这是一个持续的情况。";
		mes "最近我看到有人在做这样的演讲……";
		next;
		mes "[紧张的牧师]";
		mes "有人这样打断我。";
		mes "但尽管我很想阻止他们，但我做不到，正如你所看到的......";
		npctalk "你为什么要和他打架？", "人群#ep18c01", bc_self;
		npctalk "他们说战斗是无知者的事。", "人群#ep18c03", bc_self;
		next;
		mes "[紧张的牧师]";
		mes "...因为担心被视为站在统治阶级和移民一边。";
		mes "但这并不意味着你可以假装没有看到它......";
		next;
		mes "[紧张的牧师]";
		mes "我再次紧张地观看一个我从未见过的人的演讲，不知不觉中，......";
		npctalk "什么？", "人群#ep18c02", bc_self;
		npctalk "听起来很合适，对吧？", "人群#ep18c03", bc_self;
		next;
		mes "[紧张的牧师]";
		mes "...";
		npctalk "这家伙？", "人群#ep18c02", bc_self;
		npctalk "啊，拳头飞了，拳头飞了。就试试打我吧。", "人群#ep18c03", bc_self;
		next;
		mes "[紧张的牧师]";
		mes "这很糟糕...";
		mes "冒险家，你有没有...";
		next;
		select( "你想让我停下来吗？" );
		mes "[紧张的牧师]";
		mes "..愿芙蕾雅保护我们。";
		changequest 8682,8683;
		ep18_main = 3;
		close;
	}
	if (ep18_main == 3) {
		mes "我们应该做什么？";
		next;
		select( "请尽量保持安静。", "你怎么了？你怎么这样？", "喂，你这个大腹便便的老家伙！" );
		mes "[拥挤的人群]";
		mes "你说谁是老人？";
		npctalk "这是怎么回事？", "人群#ep18c02", bc_self;
		npctalk "哎呀...", "紧张的牧师#e18a", bc_self;
		next;
		select( "它是什么？这是一个冒险家。" );
		mes "[拥挤的人群]";
		mes "啊？谁小时候不是个冒险家？";
		mes "你已经走了多远？我就是那个爬上雷神火山顶峰的人。";
		mes "不像那些脆弱的当地人。";
		npctalk "这是无稽之谈，这可能只是旅游噱头。", "人群#ep18c03", bc_self;
		npctalk "总是有人夸耀这样的事情。", "人群#ep18c05", bc_self;
		next;
		select( "我在塞斯鲁姆尼尔神庙" );
		mes "[" + strcharinfo(0) + "]";
		mes "我在塞斯鲁姆尼尔神庙，而且……";
		next;
		cloakoffnpcself( "Girl#ep18c07" );
		cloakoffnpcself( "Guard Gala#ep18c08" );
		cloakoffnpcself( "Guard Izu#ep18c09" );
		mes "[女孩]";
		mes "保安员！他在那儿！";
		next;
		mes "[拥挤的人群]";
		mes "天哪，谁又喊保安了？";
		npctalk "啊，在事情变得麻烦之前，我们先逃走吧。", "人群#ep18c04", bc_self;
		npctalk "我希望我再也不用见到你的脸了。", "人群#ep18c05", bc_self;
		npctalk "我也许应该回家了...", "人群#ep18c06", bc_self;
		cloakonnpcself( "Crowd#ep18c01" );
		cloakonnpcself( "Crowd#ep18c02" );
		cloakonnpcself( "Crowd#ep18c03" );
		cloakonnpcself( "Crowd#ep18c04" );
		cloakonnpcself( "Crowd#ep18c05" );
		cloakonnpcself( "Crowd#ep18c06" );
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Are you just going to let this slide like water under the bridge?", bc_self;
		next;
		mes "[守护盛宴]";
		mes "听说有人打架，所以过来看看……";
		mes "冒险家？";
		next;
		mes "[紧张的牧师]";
		mes "哦，不，不，不！这里的冒险家正在试图帮助我......";
		mes "啊，我是朱诺克牧师。这次我回到了塞斯鲁姆尼尔。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "" + strcharinfo(0) + ".";
		mes "冒险家。";
		next;
		mes "[守护盛宴]";
		mes "谢谢。";
		mes "这几天的气氛实在是太严峻了……";
		next;
		select( "究竟发生了什么？" );
		mes "[" + strcharinfo(0) + "]";
		mes "到底发生了什么？";
		mes "想不到竟然发生了这样的争吵……";
		next;
		mes "保安和神父顿了顿，环顾四周，交换了一个眼神，点头表示同意。";
		next;
		mes "[朱诺克]";
		mes "冒险家，你之前在塞斯鲁尼尔神殿说了什么？";
		mes "因为我在寺庙里也有事情要处理，所以去那里聊一会儿似乎也不错。";
		mes "我们在寺庙前继续说吧。";
		changequest 8683,8684;	// todo 8684 unlock side quest kids bas gauche and gramp bas middle. kid flower uncloed at start
		ep18_main = 4;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		navigateto("ra_temple",72,54);
		close;
	}
	if (ep18_main == 4) {
		mes "[朱诺克]";
		mes "我很快就会跟着你。";
		mes "<NAVI>[寺庙前见]<INFO>ra_temple,72,54,0,101,0</INFO></NAVI>。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8682) == 1 || isbegin_quest(8683) == 1" );
	end;
}


ra_temple,118,30,0	script	#ep18w01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep18_main == 4) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Nervous Priest#e18b" );
		cloakoffnpcself( "Guard Gala#ep18c10" );
		end;
	}
	if (ep18_main == 5 || ep18_main == 6) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Nervous Priest#e18c" );
		cloakoffnpcself( "Guard Gala#ep18c12" );
		cloakoffnpcself( "Guard Izu#ep18c13" );
		cloakoffnpcself( "Guard Calsort#c14" );
		cloakoffnpcself( "Heart Hunter#ep18c15" );
		cloakoffnpcself( "Heart Hunter#ep18c16" );
		end;
	}
	end;
}

ra_temple,72,54,0	duplicate(#ep18w01)	#ep18wj1	HIDDEN_WARP_NPC,4,4
ra_temple,39,143,0	duplicate(#ep18w01)	#ep18w02_A	HIDDEN_WARP_NPC,3,3
ra_temple,20,134,0	duplicate(#ep18w01)	#ep18w02_B	HIDDEN_WARP_NPC,3,3
ra_temple,30,142,0	duplicate(#ep18w01)	#ep18w02_C	HIDDEN_WARP_NPC,3,3

// Main Quest: Step 4.
ra_temple,72,54,5	script(CLOAKED)	Nervous Priest#e18b	4_M_TRAINEE,{
	if (ep18_main == 4) {
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			mes "[迷你艾莉]";
			mes "请把它从包里拿出来，放在我的头上。";
			unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Please take it out of the bag and put it on top of my head.", bc_self;
			close;
		}
		mes "[迷你艾莉]";
		mes "客人，请稍等。";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: I'm curious about something.", bc_self;
		next;
		if (select( "艾莉，这是怎么回事？", "因为线索？" ) == 2) {
			mes "[迷你艾莉]";
			mes "嗯，这是一回事。";
			next;
		}
		mes "[迷你艾莉]";
		mes "你以前来过这里，对吗？";
		npctalk "朱诺克：冒险家？", "紧张的牧师#e18b", bc_self;
		next;
		select( "是的" );
		mes "[迷你艾莉]";
		mes "来这里的路上，我收到了一些奇怪的目光。我相信我的客人也感受到了......";
		mes "这个社区有很多持有这种观点的人吗？";
		next;
		select( "事实并非如此。" );
		mes "[迷你艾莉]";
		mes "他们是否与“入侵者”有联系？";
		next;
		select( "或许。" );
		mes "[迷你艾莉]";
		mes "你认为他们认得这位客人吗？";
		npctalk "朱诺克：？", "紧张的牧师#e18b", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "他们没有。";
		next;
		mes "[朱诺克]";
		mes "冒险家，你为什么想得这么深？";
		next;
		select( "没什么" );
		mes "[朱诺克]";
		mes "总而言之……看来我们可以在这里小声地谈谈了。";
		next;
		mes "[朱诺克]";
		mes "我刚刚回到瑞秋，所以我不知道，但是...";
		mes "与以前相比，它变得非常丑陋。";
		next;
		mes "[朱诺克]";
		mes "当地人和移民之间的冲突日益加剧。";
		mes "有些人比平时更加……公开地鼓励它。";
		next;
		mes "[朱诺克]";
		mes "还有一些人，如果因为可能导致其他原因而引发打斗的原因被安全拘留，他们会将所有人贴上你的当地人、你的移民的标签……并以此为借口。";
		next;
		mes "[朱诺克]";
		mes "我正在努力解决这个问题，但是......";
		next;
		mes "[守护盛宴]";
		mes "最近，身份不明的人一直试图入侵塞斯鲁尼尔神庙。";
		npctalk "守卫：在闯入方面较弱且不协调。", "守卫晚会#ep18c10", bc_self;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: breaking in?", bc_self;
		next;
		mes "[守护盛宴]";
		mes "不断尝试闯入首都雷切尔最安全的神殿是一回事，但是……";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Isn't it suspicious even to the guest's ears?", bc_self;
		next;
		mes "[守护盛宴]";
		mes "由于寺庙目前处于高度戒备状态，因此有时我们无法对民间纠纷做出及时回应。";
		next;
		mes "[守护盛宴]";
		mes "考虑到事态可能升级到什么程度以及在哪里突然发生此类事件的不确定性，我们不能贸然采取全面应对措施……";
		mes "过度扩充安全力量也不是一个可行的选择。";
		next;
		mes "[守护盛宴]";
		mes "这真是一个困难的局面……嗯？";
		cloakoffnpcself( "Rookie Guard#ep18c11" );
		npctalk "新秀守卫：神殿西边有入侵者！", "新秀后卫#ep18c11", bc_self;
		next;
		mes "[守护盛宴]";
		mes "光天化日之下，他们又来袭击了！我们走吧！";
		mes "冒险家，请跟我们一起来吧！";
		next;
		select( "你为什么要相信我？" );
		mes "[" + strcharinfo(0) + "]";
		mes "你知道我是谁吗？";
		mes "如果他们是入侵者怎么办？";
		next;
		mes "[守护盛宴]";
		mes "我守护这座寺庙已经很长时间了。";
		mes "你会把这个故事告诉一个你不认识的人吗？";
		npctalk "朱诺克：你们认识吗？", "紧张的牧师#e18b", bc_self;
		npctalk "Guard Gala：单方面。", "守卫晚会#ep18c10", bc_self;
		next;
		mes "[守护盛宴]";
		mes "我们快点吧！";
		changequest 8684,8685;
		ep18_main = 5;
		navigateto("ra_temple",30,142);
		cloakonnpcself( "Nervous Priest#e18b" );
		cloakonnpcself( "Guard Gala#ep18c10" );
		cloakonnpcself( "Rookie Guard#ep18c11" );

		cloakoffnpcself( "Nervous Priest#e18c" );
		cloakoffnpcself( "Guard Gala#ep18c12" );
		cloakoffnpcself( "Guard Izu#ep18c13" );
		cloakoffnpcself( "Guard Calsort#c14" );
		cloakoffnpcself( "Heart Hunter#ep18c15" );
		cloakoffnpcself( "Heart Hunter#ep18c16" );
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8684) == 1" );
	end;
}

ra_temple,75,54,3	duplicate(dummy_cloaked_npc)	Guard Gala#ep18c10	4_M_RASWORD
ra_temple,78,56,3	duplicate(dummy_cloaked_npc)	Rookie Guard#ep18c11	4_M_RASWORD

// Main Quest: Step 5.
// ra_temple,20,134,0	script	#ep18w02_1	HIDDEN_WARP_NPC,3,3,{
ra_temple,20,134,0	script	#ep18w02_1_A	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep18_main == 5) {
		cloakoffnpcself( "Nervous Priest#e18c" );
		cloakoffnpcself( "Guard Gala#ep18c12" );
		cloakoffnpcself( "Guard Izu#ep18c13" );
		cloakoffnpcself( "Guard Calsort#c14" );
		cloakoffnpcself( "Heart Hunter#ep18c15" );
		cloakoffnpcself( "Heart Hunter#ep18c16" );
		end;
	}
	end;
}
// ra_temple,30,142,0	duplicate()	#ep18w02_1	HIDDEN_WARP_NPC,3,3,{
ra_temple,30,142,0	duplicate(#ep18w02_1_A)	#ep18w02_1_B	HIDDEN_WARP_NPC,3,3

ra_temple,30,142,1	script(CLOAKED)	Nervous Priest#e18c	4_M_TRAINEE,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	.@char_id = getcharid(0);
	if (ep18_main == 5) {
		mes "[迷你艾莉]";
		mes "你看起来很眼熟，我认识你吗？";
		next;
		mes "[迷你艾莉]";
		mes "你找到我的速度比我想象的要快。";
		next;
		select( "你还不知道府里的情况吧？" );
		mes "[" + strcharinfo(0) + "]";
		mes "被派往宅邸的人可能是其他队伍的……";
		next;
		mes "[守卫伊豆]";
		mes "你被包围了！投降！";
		next;
		mes "[心脏猎手]";
		mes "哼，这叫环绕。正如传闻所说。";
		next;
		mes "[守卫伊豆]";
		mes "什么？你们至今已经失败、逃跑了14次了！";
		next;
		mes "[守卫卡尔索特]";
		mes "实际上是15次。";
		npctalk "哼。", "心脏猎手#ep18c15", bc_self;
		next;
		mes "[心脏猎手]";
		mes "那是我们派来的新秀球探！";
		mes "现在我们已经绘制好了你们所有的巡逻路线。做好准备。";
		next;
		mes "[守护盛宴]";
		mes "我们必须改变策略。";
		next;
		mes "[心脏猎手]";
		mes "...";
		next;
		mes "[守卫]";
		mes "...";
		next;
		mes "[心脏猎手]";
		mes "这次终于结束了！特种部队已经抵达圣殿……";
		next;
		cloakoffnpcself( "Marshal Chive#c17" );
		mes "[韭菜元帅]";
		mes "如果是特种部队，是这些吗？";
		cloakoffnpcself( "Heart Hunter#ep18c18" );
		cloakoffnpcself( "Heart Hunter#ep18c19" );
		npctalk "啊...", "心脏猎手#ep18c19", bc_self;
		npctalk "该死的。", "心脏猎手#ep18c18", bc_self;
		next;
		mes "[守护盛宴]";
		mes "看来一切都结束了。";
		next;
		mes "[心脏猎手]";
		mes "……下次，我们一定会成功！";
		cloakonnpcself( "Heart Hunter#ep18c15" );
		cloakonnpcself( "Heart Hunter#ep18c16" );
		erasequest 8685;
		setquest 8686;
		ep18_main = 6;
		next;
		// Fallthrough
	}
	if (ep18_main == 6) {
		mes "[守护盛宴]";
		mes "...";
		mes "确实很奇怪。他们多次如此粗心、如此引人注目地进来，现在他们却诉诸如此明显的谎言和戏剧。";
		mes "此时就连放置诱饵都变得可疑了。";
		next;
		mes "[守护盛宴]";
		mes "他们把他们送到哪里去了……";
		next;
		select( "事实是，我来找瑞秋的原因是……" );
		mes "[" + strcharinfo(0) + "]";
		mes "我是来寻找那些与他们有联系的人的……";
		next;
		mes "[朱诺克]";
		mes "我懂了。有联系吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "与其说是联系，不如说是……";
		next;
		mes "我解释说我无法对情况做出完整的解释，但他们的目的是闯入。";
		next;
		mes "[守护盛宴]";
		mes "嗯...";
		mes "你见过尼伦吗？";
		mes "自从你过来已经有一段时间了，你可能还没有和大家打招呼。";
		next;
		mes "[守护盛宴]";
		mes "不是强迫你什么的，但是...";
		mes "无论如何，你最终还是得进去看看他们。何不趁您还在的时候来参观一下呢？";
		npctalk "警卫加拉：暂时拘留这些人。他们一定是新人。", "守卫晚会#ep18c12", bc_self;
		npctalk "守卫韭菜：明白了。", "韭菜元帅#c17", bc_self;
		next;
		mes "[守护盛宴]";
		mes "让我们在那里讨论细节。";
		erasequest 8686;
		setquest 8687;
		ep18_main = 7;
		getitem 1000405,30;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		navigateto("ra_temin",173,40);
		cloakonnpcself( "Nervous Priest#e18c" );
		cloakonnpcself( "Guard Gala#ep18c12" );
		cloakonnpcself( "Guard Izu#ep18c13" );
		cloakonnpcself( "Guard Calsort#c14" );
		cloakonnpcself( "Marshal Chive#c17" );
		cloakonnpcself( "Heart Hunter#ep18c18" );
		cloakonnpcself( "Heart Hunter#ep18c19" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8685) == 1 || isbegin_quest(8686) == 1" );
	end;
}

ra_temple,25,147,5	duplicate(dummy_cloaked_npc)	Guard Gala#ep18c12	4_M_RASWORD

ra_temple,29,143,1	script(CLOAKED)	Guard Izu#ep18c13	4_M_RASWORD,{
	npctalk "守卫伊兹：牧师，请不要上前！", "", bc_self;
	end;
}

ra_temple,26,145,7	script(CLOAKED)	Guard Calsort#c14	4_M_RASWORD,{
	npctalk "警卫卡尔索斯：放下武器！", "", bc_self;
	end;
}

ra_temple,31,147,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c15	G_EP17_2_HEART_HUNTER
ra_temple,29,146,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c16	G_EP17_2_HEART_HUNTER

ra_temple,35,141,1	duplicate(dummy_cloaked_npc)	Marshal Chive#c17	4_M_RASWORD
ra_temple,36,140,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c18	G_EP17_2_HEART_HUNTER
ra_temple,37,140,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c19	G_EP17_2_HEART_HUNTER


ra_temple,168,169,3	script	Eridanus#fp	4_M_MIDDLE1,{
	mes "[波江座]";
	mes "哈哈，正门就是那个方向啊，冒险家。";
	mes "你必须爬楼梯。";
	next;
	select( "你在干什么？" );
	mes "[波江座]";
	mes "维护工作，如您所见。";
	mes "……但是我感觉有点不安。";
	next;
	mes "[波江座]";
	mes "唔。你是一个冒险家。";
	mes "最近，我经常听到从圣地传来奇怪的声音。";
	next;
	mes "[波江座]";
	mes "我想是因为前段时间的那场事故……";
	next;
	select( "事故？" );
	mes "[波江座]";
	mes "（低声）";
	mes "那里发生了一点点法力外泄的意外。";
	mes "高层正试图掩盖此事，但听说这次事故导致了一些怪物的出现。";
	next;
	mes "[波江座]";
	mes "我的上级认为这是胡言乱语，";
	mes "但听着。";
	mes "……你没听到下面传来奇怪的声音吗？";
	next;
	mes "[波江座]";
	mes "如果这真的是怪物，那就说明圣殿里有怪物被困，那就是大问题了。";
	mes "啊...";
	next;
	mes "[波江座]";
	mes "哦，对了！你可以为我们的女神除掉怪物！";
	mes "肯定上级会斥责我的纵容，但我却无法将目光从怪物问题上移开！";
	next;
	mes "[波江座]";
	mes "我们应该为教皇挺身而出！";
	mes "所以？你准备好了吗？";
	next;
	mes "[波江座]";
	mes "会有一些狂热分子发疯并变成怪物。";
	mes "杀死^4d4dff伊西拉、范伯克和霍德姆林^000000。";
	next;
	if (select( "接受", "拒绝。" ) == 2) {
		mes "[波江座]";
		mes "呃，当怪物在那里肆虐时，我不能袖手旁观……！";
		close;
	}
	mes "[波江座]";
	mes "谢谢你这样做。";
	mes "请小心。";
	mes "拿这个通风井。它通向怪物横行的地方。";
	close2;
	warp "ra_san01",47,47;
	end;
}

// Main Quest: Step 6.
ra_temin,173,40,3	script	Guard Dent#ep18	4_M_RASWORD,{
	if (ep18_main == 7) {
		mes "[防护凹痕]";
		mes "<FONT SIZE = 16><B>坚持！！</FONT></B>";
		mes "<FONT SIZE = 14>嘿！</FONT>";
		mes "你看不到那条线吗？";
		mes "^e5555e如果你是来看^000000Niren^000000的，那就按照顺序来吧！";
		npctalk "坚持，稍等！！嘿！", "守卫凹痕#ep18", bc_self;
		next;
		mes "[艾莉]";
		mes "人真的很多。";
		mes "但如果我们不能很快见到尼伦，那就有问题了。";
		cutin "ep172_beta.bmp",2;
		next;
		select( "据说这是一件紧急的事情。" );
		cutin "",255;
		mes "[防护凹痕]";
		mes "<FONT SIZE = 16><B>什么？</FONT></B>";
		mes "<FONT SIZE = 14>我也很着急，你知道吗？</FONT>";
		npctalk "什么？", "守卫凹痕#ep18", bc_self;
		next;
		mes "[防护凹痕]";
		mes "<FONT SIZE = 14><B>呃~</FONT></B>";
		mes "你知道光是今天我就被派去制止斗殴多少次了吗？！";
		mes "人们不断左右争斗，这也让我们发疯！";
		npctalk "唉～要是大家都停止争斗一次就好了……", "守卫凹痕#ep18", bc_self;
		next;
		mes "[防护凹痕]";
		mes "当我们试图阻止打斗时，他们甚至不假装在听！";
		mes "他们多年来一直在争论自己是^e5555e移民^000000还是^e5555e本地人^000000，但现在，这真的不是开玩笑！";
		next;
		mes "[防护凹痕]";
		mes "我们一说话，他们就开始抱怨^e5555e对当地人的歧视^000000...";
		mes "光是想想就让人头疼。";
		npctalk "光是想想就让人头疼。", "守卫凹痕#ep18", bc_self;
		next;
		mes "[安全官员登特]";
		mes "你最近过得怎么样？尼尔？";
		erasequest 8687;
		setquest 11696;
		ep18_main = 8;
		close;
	}
	if (ep18_main == 8) {
		mes "[防护凹痕]";
		mes "你最近过得怎么样？尼尔？";
		close;
	}
	mes "[防护凹痕]";
	mes "叹气~";
	mes "如果每个人都停止战斗一次就好了……";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11696) == 0 && isbegin_quest(8687) == 1" );
	end;
}

// Main Quest: Step 7. and 10.
ra_temin,174,38,3	script	Guard Neil#ep18	4_DST_SOLDIER,{
	if (ep18_main == 8) {
		mes "[尼尔后卫]";
		mes "<FONT SIZE = 14><B>嘿，剪掉它！</FONT></B>";
		mes "但即便如此，你还是比我优秀。";
		mes "你和我一样知道这一点。我是本地人。";
		npctalk "嘿，别说了！", "尼尔后卫#ep18", bc_self;
		next;
		mes "[尼尔后卫]";
		mes "在我开始说话之前，他们让我给另一位本地人的保安打电话。";
		npctalk "歧视不是玩笑！", "尼尔后卫#ep18", bc_self;
		next;
		mes "[尼尔后卫]";
		mes "我厌倦了听到诸如“你知道我是谁吗？”之类的话。当谈到我的原生背景时。";
		mes "他们以为保安是干什么用的！";
		next;
		mes "[尼尔后卫]";
		mes "说实话，最近的事情确实很奇怪。";
		mes "即使是以前从未引发过这些问题的人也会卷入争吵，将小争吵变成大争吵。";
		next;
		mes "[尼尔后卫]";
		mes "确切地！";
		mes "最近到处都很混乱。";
		mes "现在想想，昨天我也来过寺庙。";
		mes "那边的神父就是昨天给我打电话的对吧？";
		mes "寺庙最近怎么样？";
		changequest 11696,11697;
		ep18_main = 9;
		close;
	}
	if (ep18_main == 9) {
		mes "[尼尔后卫]";
		mes "确切地！";
		mes "最近各地的情况都很混乱。";
		mes "想想看，昨天我也去了寺庙。";
		mes "是昨天给我打电话的那个神父吗？";
		mes "寺庙最近怎么样？";
		close;
	}
	if (ep18_main == 10) {
		mes "[尼尔后卫]";
		mes "啊~";
		mes "尼伦好像很忙啊……";
		close;
	}
	if (ep18_main == 11 || ep18_main == 12) {
		mes "[高阶女祭司尼伦]";
		mes "尼尔，你今天碰巧看到了^e5555e马拉姆^000000吗？";
		cloakoffnpcself( "Niren#ep18_in1" );
		cutin "ra_gwoman.bmp",2;
		next;
		cutin "",255;
		mes "[尼尔后卫]";
		mes "我喜欢吗";
		mes "我想我早些时候在去寺庙的路上在^e5555e广场^000000见过他......";
		next;
		mes "[尼尔后卫]";
		mes "我不确定他是否还在广场，但也许我们可以问问那里的人，看看马拉姆去了哪里？";
		next;
		mes "[高阶女祭司尼伦]";
		mes "嗯……我明白了。";
		mes "我之前要求的任务" + strcharinfo(0) + "，我的儿子 Maram 会帮忙完成。";
		mes "对于这件事，他比任何人都清楚。";
		npctalk "我的儿子马拉姆将帮助完成我之前要求的任务。", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[高阶女祭司尼伦]";
		mes "我会亲自介绍他，但正如你所看到的，我现在不能离开我的职位。";
		mes "如果你在广场附近^e5555e询问^000000，你应该能够找到他。";
		if (ep18_main == 11) {
			changequest 11699,11700;
			ep18_main = 12;
		}
		close2;
		navigateto("rachel",137,135);
		cloakonnpcself( "Niren#ep18_in1" );
		cutin "",255;
		end;
	}
	mes "[尼尔后卫]";
	mes "啊...";
	mes "大祭司尼伦到底去哪儿了……";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11696) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11699) == 1" );
	end;
}

// Main Quest: Step 8.
ra_temin,172,36,7	script	Priest Freya#ep18	4_F_MASK1,{
	if (ep18_main == 9) {
		mes "[牧师芙蕾雅]";
		mes "我们始终为信徒的真实信仰和内心平静祈祷。";
		next;
		mes "[尼尔后卫]";
		mes "呃，那些脚本化的问候就够了~";
		mes "我亲眼所见，什么~";
		mes "而且，如果没有什么严重的事情的话，神父也没有理由这样站在这里。";
		next;
		mes "[尼尔后卫]";
		mes "难道我们不需要了解这些天人们的情况，以便保安人员做好准备吗？";
		mes "尤其是对于来寺庙的人们的情况我们还不太了解。";
		npctalk "我们对来寺庙的人的情况了解不多。", "尼尔后卫#ep18", bc_self;
		next;
		mes "[防护凹痕]";
		mes "给我们一些信息吧~";
		npctalk "给我们一些信息吧~", "守卫凹痕#ep18", bc_self;
		next;
		mes "[牧师芙蕾雅]";
		mes "这座寺庙是为弗雷亚神父祈祷的地方。";
		mes "怀着一颗平静的心...";
		next;
		mes "[尼尔后卫]";
		mes "我昨天看到了。";
		mes "<FONT SIZE = 14>在这里，在人们互相争斗的中间，这位摘下半个面具的牧师......</FONT>";
		next;
		mes "[牧师芙蕾雅]";
		mes "<FONT SIZE = 16><B>哦不！！！</FONT></B>";
		mes "<FONT SIZE = 14><B>稍等一下！</FONT></B>";
		mes "<FONT SIZE = 14><B>停在那里！！！</FONT></B>";
		npctalk "哦不！稍等！", "弗蕾亚牧师#ep18", bc_self;
		next;
		mes "[牧师芙蕾雅]";
		mes "<FONT SIZE = 10>叹息...</FONT>";
		next;
		mes "[牧师芙蕾雅]";
		mes "实际上...";
		next;
		mes "[牧师芙蕾雅]";
		mes "确实，最近寺庙里闹事的人越来越多了。";
		next;
		mes "[牧师芙蕾雅]";
		mes "他们大多是发泄个人恩怨，而不是向官方投诉、制造骚乱或在寺庙门口大喊大叫。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "坚持，稍等...";
		mes "我们能听到更多关于此事的细节吗？";
		cloakoffnpcself( "Niren#ep18_in1" );
		npctalk "我们能听到更多关于此事的细节吗？", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		cutin "",255;
		mes "[牧师芙蕾雅]";
		mes "尼伦大祭司！！！";
		npctalk "尼伦大祭司！！！", "弗蕾亚牧师#ep18", bc_self;
		next;
		mes "[牧师芙蕾雅]";
		mes "啊，好吧……";
		mes "有个人恩怨的人到寺庙里喊叫是常有的事，我们一直在努力安抚他们并把他们送走，";
		next;
		mes "[牧师芙蕾雅]";
		mes "但最近，参拜寺庙的民众发生肢体冲突的事件频频发生……";
		next;
		mes "[高阶女祭司尼伦]";
		mes "在神圣的寺庙里发生肢体冲突......";
		mes "难道就没有办法通过对话来解决他们的不满吗？";
		npctalk "难以置信...", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		cutin "",255;
		mes "[牧师芙蕾雅]";
		mes "有些人尽管我们尽力调和他们的意见，却指责我们是异教徒，制造骚乱，而另一些人则问我们容忍这些异教徒到什么时候。解决这些情况对我们来说并不容易。";
		next;
		mes "[牧师芙蕾雅]";
		mes "不过既然他们都这么抱怨了，看来也不能直接向尼仁抱怨，然后把怒火发泄在神殿上吧。";
		mes "因为他们知道尼伦重视和谐有多么重要";
		next;
		mes "[高阶女祭司尼伦]";
		mes "叹...";
		mes "异端...";
		mes "看来我们消除歧视的努力还没有到达他们的心里。";
		cutin "ra_gwoman.bmp",2;
		npctalk "叹...", "Niren#ep18_in1", bc_self;
		next;
		mes "[高阶女祭司尼伦]";
		mes "而且，即使是在寺庙里打架，也不是我们可以轻易忽视的问题。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "我在某种程度上听到过一些分歧，但是……我可能错误地认为，如果我们生活在一起，互相了解，互相理解，这些分歧就会自然解决。";
		next;
		cutin "",255;
		mes "[牧师芙蕾雅]";
		mes "尽管强硬派退了一步，但支持他们的人心却很难一下子改变。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "可悲的是，这是事实。";
		mes "我们等待自愈的时间，却变成了伤口溃烂的结果。";
		mes "现在，即使是和解对话也不容易......";
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[高阶女祭司尼伦]";
		mes "<FONT SIZE = 10>我们需要某种催化剂......</FONT>";
		next;
		cutin "",255;
		mes "[防护凹痕]";
		mes "高阶女祭司尼伦。";
		mes "这位冒险家作为催化剂怎么样？";
		mes "他们完全是局外人。";
		mes "嗯……至少可以开始对话吗？";
		next;
		mes "[防护凹痕]";
		mes "不管怎样，他们来这里看你，是因为他们有话要对你说。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "哦天哪...！";
		mes "" + strcharinfo(0) + "！！！";
		mes "我什至没有注意到" + strcharinfo(0) + "在这里，因为我太心烦意乱了。";
		npctalk "哦天哪...！", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[高阶女祭司尼伦]";
		mes "如您所见，我们目前正忙于处理有关 ^e5555eRachel^000000 的内部问题。";
		mes "但你想告诉我什么呢？";
		next;
		select( "关于入侵者。" );
		mes "[高阶女祭司尼伦]";
		mes "啊...";
		mes "<FONT SIZE = 10>在这里讨论这个有点困难。</FONT>";
		mes "请跟我来。";
		changequest 11697,11698;
		ep18_main = 10;
		close2;
		cloakonnpcself( "Niren#ep18_in1" );
		cutin "",255;
		navigateto("ra_temin",213,87);
		end;
	}
	if (ep18_main == 10) {
		mes "[牧师芙蕾雅]";
		mes "看来高阶女祭司尼伦正在找你。你没有遇见他吗？";
		next;
		mes "[高阶女祭司尼伦]";
		mes "" + strcharinfo(0) + "，请跟我走。";
		cloakoffnpcself( "Niren#ep18_in1" );
		cutin "ra_gwoman.bmp",2;
		close2;
		cloakonnpcself( "Niren#ep18_in1" );
		cutin "",255;
		navigateto("ra_temin",213,87);
		end;
	}
	mes "[牧师芙蕾雅]";
	mes "我们始终为信徒的真诚信仰和内心平静祈祷。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11697) == 1" );
	end;
}

ra_temin,170,38,5	duplicate(dummy_cloaked_npc)	Niren#ep18_in1	4_F_MADAME
ra_temin,171,42,5	duplicate(dummy_npc)	Rachelite#ep18_in1	4_F_SHABBY
ra_temin,173,43,3	duplicate(dummy_npc)	Rachelite#ep18_in2	4_M_RACHMAN2
ra_temin,175,36,0	duplicate(dummy_npc)	Rachelite#ep18_in3	4_F_DESERT
ra_temin,170,35,1	duplicate(dummy_npc)	Rachel Resident#ep18_in4	4_M_DST_GRAND
ra_temin,174,34,3	duplicate(dummy_npc)	Rachel Resident#ep18_in5	4_M_MIDDLE
ra_temin,177,33,5	duplicate(dummy_npc)	Rachel Resident#ep18_in6	4_M_CHILD1
ra_temin,173,32,0	duplicate(dummy_npc)	Rachel Resident#ep18_in7	4_F_MASK

// Main Quest: Step 9.
ra_temin,213,87,3	script	Niren#ep18_in2	4_F_MADAME,{
	if (ep18_main == 10) {
		mes "[高阶女祭司尼伦]";
		mes "看来这里不会有人听了。";
		mes "^e5555e特别是在敏感问题^000000这样的事情上，";
		mes "我很抱歉不得不在这样的地方讨论这个问题。";
		cutin "ra_gwoman.bmp",2;
		next;
		select( "解释入侵者的身份。" );
		mes "[高阶女祭司尼伦]";
		mes "<FONT SIZE = 14>这是可能的！！！</FONT>";
		mes "^e5555e心脏猎手^000000已经瞄准了^e5555e尤米尔的心脏碎片^000000，所以我们不能忽视这一点！";
		next;
		mes "[高阶女祭司尼伦]";
		mes "他们竟然这么轻易的就渗透进来了……";
		mes "我们需要立即^e5555e加强Heart Vault附近的安全保障^000000并积极配合^e5555eRebEllyon^000000。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "但无论我们如何加强心脏穹顶附近的警戒，最近居民们的紧张气氛，其实都是入侵者猖獗的理想场所。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "我现在主要集中在加强安全保卫上，所以可以请你" + strcharinfo(0) + "来^e5555e在居民中进行调解^000000吗？";
		next;
		mes "[高阶女祭司尼伦]";
		mes "不...";
		mes "与其调解，只需聆听他们的故事并转述就足够了。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "当我做出一个我认为会让很多人高兴的决定时，我没有适当考虑那些不支持这个选择的人的感受。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "指望大家一夜之间相处融洽是不现实的。";
		mes "只是...";
		mes "如果我们能理解那些委屈是什么……";
		mes "我相信我们可以重新开始。";
		next;
		mes "[高阶女祭司尼伦]";
		mes "现在好像没有人愿意听，但就像登特说的，也许局外人喜欢" + strcharinfo(0) + "也许能够帮助谈话。";
		next;
		mes "[艾莉]";
		mes "人际关系很复杂。";
		cutin "ep172_beta.bmp",2;
		next;
		mes "[高阶女祭司尼伦]";
		mes "哈哈……确实如此。";
		mes "我们现在要回寺庙门口吗？";
		mes "^e5555e我们还需要与安全^000000团队核实...";
		cutin "ra_gwoman.bmp",2;
		changequest 11698,11699;
		ep18_main = 11;
		close2;
		cutin "",255;
		navigateto("ra_temin",174,38);
		end;
	}
	if (ep18_main == 11) {
		mes "[高阶女祭司尼伦]";
		mes "现在好像没有人愿意听，但就像登特说的，也许局外人喜欢" + strcharinfo(0) + "也许能够帮助谈话。";
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[高阶女祭司尼伦]";
		mes "我们现在要回寺庙门口吗？";
		mes "^e5555e我们还需要与安全^000000团队核实...";
		close2;
		cutin "",255;
		navigateto("ra_temin",174,38);
		end;
	}
	mes "[高阶女祭司尼伦]";
	mes "我现在有点忙...";
	mes "对此感到抱歉。";
	cutin "ra_gwoman.bmp",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11698) == 1" );
	end;
}

// Main Quest: Step 11.
rachel,137,135,7	script	Villager#ep18_Rachel1	4_M_MIDDLE,{
	if (ep18_main == 12) {
		select( "询问他们是否见过马拉姆。" );
		mes "[村民]";
		mes "什么？";
		mes "我不知道！";
		mes "我为什么会知道那个人在哪里。";
		npctalk "什么？我不知道！", "村民#ep18_Rachel1", bc_self;
		next;
		mes "[村民]";
		mes "想想看，你！";
		mes "你是这里的新面孔...";
		next;
		mes "[村民]";
		mes "你为什么要找他？";
		mes "是不是有什么可疑的事情发生？";
		next;
		mes "[艾莉]";
		mes "他们不是很友好。";
		mes "既然他们似乎不会告诉我们马拉姆在哪里，我们就去问问其他人吧。";
		cutin "ep172_beta.bmp",2;
		changequest 11700,11701;
		ep18_main = 13;
		close2;
		cutin "",255;
		navigateto("rachel",105,134);
		end;
	}
	if (ep18_main == 13) {
		mes "[村民]";
		mes "你为什么要找他？";
		mes "是不是有什么可疑的事情发生？";
		next;
		mes "[艾莉]";
		mes "他们不是很友好。";
		mes "既然他们似乎不会告诉我们马拉姆在哪里，我们就去问问其他人吧。";
		cutin "ep172_beta.bmp",2;
		close2;
		cutin "",255;
		navigateto("rachel",105,134);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11700) == 1" );
	end;
}

// Main Quest: Step 12.
rachel,105,134,3	script	 Villager#ep18_Rachel2	4_M_RACHMAN1,{
	if (ep18_main == 13) {
		select( "询问他们是否见过马拉姆。" );
		mes "[村民]";
		mes "...";
		next;
		mes "[村民]";
		mes "我不知道？";
		next;
		mes "[村民]";
		mes "但你是谁？";
		mes "你为什么要找马拉姆？";
		next;
		mes "[村民]";
		mes "你怎么认识马拉姆的？";
		npctalk "可疑的？", "村民#ep18_Rachel2", bc_self;
		next;
		mes "[艾莉]";
		mes "这个人似乎也不会告诉我们马拉姆在哪里。";
		mes "我们去问问别人吧。";
		changequest 11701,11702;
		ep18_main = 14;
		close2;
		navigateto("rachel",69,117);
		end;
	}
	if (ep18_main == 14) {
		mes "[村民]";
		mes "你是谁？";
		mes "你为什么要找马拉姆？";
		next;
		mes "[村民]";
		mes "你怎么认识马拉姆的？";
		npctalk "可疑的？", "村民#ep18_Rachel2", bc_self;
		next;
		mes "[艾莉]";
		mes "这个人似乎也不会告诉我们马拉姆在哪里。";
		mes "我们去问问别人吧。";
		close2;
		navigateto("rachel",69,117);
		end;
	}
	mes "[村民]";
	mes "...";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11701) == 1" );
	end;
}

// Main Quest: Step 13.
rachel,69,117,7	script	Villager#ep18_Rachel3	4_F_SHABBY,{
	if (ep18_main == 14) {
		select( "询问他们是否见过马拉姆。" );
		mes "[村民]";
		mes "如果您正在寻找 Maram，他们会提到您在附近有预约。";
		mes "他们经过这里，所以如果你从这里^e5555e向上^000000，你可能会遇到他们。";
		erasequest 11702;
		setquest 11703;
		ep18_main = 15;
		close2;
		navigateto("rachel",70,147);
		end;
	}
	if (ep18_main == 15) {
		mes "[村民]";
		mes "如果您正在寻找 Maram，他们会提到您在附近有预约。";
		mes "他们经过这里，所以如果你从这里^e5555e向上^000000，你可能会遇到他们。";
		close2;
		navigateto("rachel",70,147);
		end;
	}
	mes "[村民]";
	mes "这些天，雷切尔的气氛显得有些阴沉。";
	mes "有什么事吗？";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11702) == 1" );
	end;
}

rachel,66,135,0	script	#Flower Room Main	HIDDEN_WARP_NPC,10,10,{
	end;
OnTouch:
	// Picking Half Flowers quest
	if (isbegin_quest(5936) == 2)
		cloakoffnpcself( "Mejai#E18_7" );
	else if (isbegin_quest(5933) > 0 || isbegin_quest(5934) == 1 || isbegin_quest(5935) == 1 || isbegin_quest(5936) == 1) {
		cloakoffnpcself( "Mejai#E18_5" );
		cloakoffnpcself( "Half Flower#E18_6" );
	}
	// main quest
	if (ep18_main == 16) {
		cloakoffnpcself( "Miriam#ep18_Rachel" );
		end;
	}
	if (ep18_main == 19 || ep18_main == 20) {
		cloakoffnpcself( "Miriam#ep18_merchant2" );
		cloakoffnpcself( "Maram#ep18_merchant2" );
		end;
	}
	if (ep18_main == 21 || ep18_main == 22 || ep18_main == 26) {
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		if (ep18_main == 22)
			cloakoffnpcself( "Miriam#ep18_merchant3" );
		end;
	}
	end;
}
rachel,112,136,0	duplicate(#Flower Room Main)	Niren Great Hall	HIDDEN_WARP_NPC,5,5
rachel,115,125,0	duplicate(#Flower Room Main)	Reminder#ra01	HIDDEN_WARP_NPC,3,3

// Main Quest: Step 14. and 24.
rachel,70,147,3	script	Maram#ep18_Rachel	4_EP18_MARAM,{
	if (ep18_main < 15) {
		mes "[马拉姆]";
		mes "不知道Miriam什么时候能到呢~";
		cutin "ep18_maram_01.png",2;
		close3;
	}
	if (ep18_main == 15) {
		mes "[马拉姆]";
		mes "你好。";
		mes "我相信这是我们第一次见面。这是你第一次来雷切尔吗？";
		mes "旅行者，愿芙蕾雅的祝福与你同在。";
		cutin "ep18_maram_01.png",2;
		next;
		select( "传达尼伦的消息。" );
		mes "[马拉姆]";
		mes "啊!";
		mes "如果是妈妈托付的任务，那我一定要尽力帮忙！！！";
		npctalk "就交给我吧。", "我喜欢它#ep18_Rachel", bc_self;
		cutin "ep18_maram_02.png",2;
		next;
		mes "[艾莉]";
		mes "但我们对这里的情况了解不多。人与人之间如何调解？";
		cutin "ep172_beta.bmp",2;
		next;
		mes "[马拉姆]";
		mes "从我的角度来看...";
		mes "在进行人与人之间的调解之前，我希望您了解当地人和我们的灰孩子所面临的情况。";
		cutin "ep18_maram_01.png",2;
		next;
		select( "谁是灰孩子？" );
		mes "[马拉姆]";
		mes "雷切尔...";
		mes "现在它是一座拥有美丽寺庙的城市，但它曾经是原住民居住的^e5555e贫瘠荒地^000000。";
		next;
		mes "[马拉姆]";
		mes "但有一天，^e5555e芙蕾雅的门徒^000000突然到来，将土著推到一边，建造了神殿。";
		next;
		mes "[马拉姆]";
		mes "一些追随神殿来到这里定居的人试图与新来者一起生活，但^e5555e许多人无法忍受而离开了^000000或者……一些^e5555e遭受了^000000。";
		next;
		mes "[马拉姆]";
		mes "如果这些都成为过去就好了……但它们^e5555e一直持续到现在^000000。";
		mes "结果，就有^e5555e失去了去处的孩子^000000，我就是其中之一。";
		next;
		mes "[马拉姆]";
		mes "我的养母很同情我们，收养了我。自从她成为高级女祭司以来，她一直在带头^e5555e将我们收养到富裕移民的家庭中^000000。";
		next;
		mes "[马拉姆]";
		mes "有些人认为这是不可接受的，并^e5555e歧视我们^000000，称我们为灰孩子。但我母亲希望我们能成为移民和当地人之间的桥梁。";
		npctalk "为什么他们会这样……", "我喜欢它#ep18_Rachel", bc_self;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 14>我们无法融入任何地方，只是作为局外人</FONT>。";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "直接从人们^000000那里听到这样的故事会更好，但是……";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "我现在和一位朋友^e5555e有一个重要的约会^000000，所以您能允许我见见我的朋友并稍后解释一下情况吗？";
		next;
		mes "[马拉姆]";
		mes "我们约定见面的时间...";
		next;
		mes "[???]";
		mes "已经过去5分钟了不是吗？";
		cutin "ep18_miriam_03.png",2;
		cloakoffnpcself( "Miriam#ep18_Rachel" );
		npctalk "已经过去5分钟了不是吗？", "米里亚姆#ep18_Rachel", bc_self;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 14>^e5555e米里亚姆！</FONT>";
		mes "你从什么时候开始来这里的？";
		cutin "ep18_maram_01.png",2;
		npctalk "真是一个惊喜！", "我喜欢它#ep18_Rachel", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "但更重要的是...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "哦！";
		mes "这是我的^e5555e朋友Miriam^000000。";
		mes "米里亚姆，这些是" + strcharinfo(0) + "和……艾莉？";
		mes "他们是应我母亲的要求来看我的。";
		cutin "ep18_maram_01.png",2;
		erasequest 11703;
		setquest 11704;
		ep18_main = 16;
		close2;
		cutin "",255;
		navigateto("rachel",62,144);
		end;
	}
	if (ep18_main == 16) {
		mes "[马拉姆]";
		mes "哦！";
		mes "这是我的^e5555e朋友Miriam^000000。";
		mes "米里亚姆，这些是" + strcharinfo(0) + "和……艾莉？";
		mes "他们是应我母亲的要求来看我的。";
		cutin "ep18_maram_01.png",2;
		close2;
		cutin "",255;
		navigateto("rachel",62,144);
		end;
	}
	if (ep18_main == 17) {
		mes "[马拉姆]";
		mes "抱歉，" + strcharinfo(0) + "，但是我们可以在我快速买完东西后离开吗？";
		mes "如果我下订单的话会很快。";
		npctalk "请稍等。", "我喜欢它#ep18_Rachel", bc_self;
		cutin "ep18_maram_01.png",2;
		close2;
		cutin "",255;
		navigateto("rachel",87,122);
		end;
	}
	if (ep18_main < 25) {
		mes "[马拉姆]";
		mes "购买商品并不像我想象的那么容易。";
		npctalk "啊...", "我喜欢它#ep18_Rachel", bc_self;
		cutin "ep18_maram_01.png",2;
		close3;
	}
	if (ep18_main == 25) {
		mes "[马拉姆]";
		mes "啊!";
		mes "" + strcharinfo(0) + "，你在这里。";
		mes "我们已经聚集了必要的人员，尽管我们的人数有点少。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "当米丽娅姆回来时……哦！";
		npctalk "哦！", "罗望子#ep18_Maram", bc_self;
		next;
		mes "[狨猴]";
		mes "哦！";
		mes "这是尼伦大人的儿子！";
		cloakoffnpcself( "Tamarin#ep18_Maram" );
		cutin "ep18_tamarin_04.png",2;
		npctalk "哦！", "罗望子#ep18_Maram", bc_self;
		next;
		mes "[马拉姆]";
		mes "啊，上次来找我妈妈的就是你们了。";
		mes "狨猴、马克和玛吉，对吧？";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "我喜欢它。";
		cloakoffnpcself( "Miriam#ep18_Rachel" );
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "米丽亚姆，你回来了？";
		mes "你找到衣服了吗？";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "我带了一些，但是...";
		mes "这够了吗？";
		cutin "ep18_miriam_01.png",2;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 14>哈哈哈！</FONT>";
		mes "那身衣服，难道是……";
		mes "太完美了！";
		cutin "ep18_maram_02.png",2;
		npctalk "哈哈哈！", "罗望子#ep18_Maram", bc_self;
		next;
		mes "[马拉姆]";
		mes "现在我们已经召集了所有必要的人员并准备好了衣服，让我解释一下计划。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "我们将穿上米丽亚姆带来的衣服，前往这个异国小镇的顶端搬运货物。";
		mes "我还不能透露目的地，所以跟着我吧。";
		next;
		mes "[马拉姆]";
		mes "" + strcharinfo(0) + "，请前往您购买商品的^e5555e商店^000000并通知他们您即将离开。";
		mes "其他人跟我一起换好衣服，先往村口走去。";
		erasequest 11713;
		setquest 11714;
		ep18_main = 26;
		close2;
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		cloakonnpcself( "Miriam#ep18_Rachel" );
		cloakonnpcself( "Tamarin#ep18_Maram" );
		cutin "",255;
		navigateto("rachel",137,85);
		end;
	}
	if (ep18_main == 26) {
		mes "[马拉姆]";
		mes "现在所有必要的人员都已经聚集完毕，衣服也都准备好了，我来解释一下计划。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "我们^e5555e穿上米丽亚姆带来的衣服，假装成外国商人^000000，然后搬运货物。";
		mes "我还不能透露目的地，所以跟着我吧。";
		next;
		mes "[马拉姆]";
		mes "" + strcharinfo(0) + "，您能去一下您之前购买商品的商店并通知他们我们很快就要离开吗？";
		mes "其他人跟我一起换好衣服，先往村口走去。";
		close2;
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		cloakonnpcself( "Miriam#ep18_Rachel" );
		cloakonnpcself( "Tamarin#ep18_Maram" );
		cutin "",255;
		navigateto("rachel",137,85);
		end;
	}
	if (ep18_main == 27) {
		mes "[马拉姆]";
		mes "" + strcharinfo(0) + "，谢谢你，看来事情进展得很顺利！";
		cutin "ep18_maram_01.png",2;
		close3;
	}
	mes "[马拉姆]";
	mes "" + strcharinfo(0) + "，谢谢你，看来事情进展得很顺利！";
	cutin "ep18_maram_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11703) == 1" );

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11713) == 1" );
	end;
}

// Main Quest: Step 15.
rachel,62,144,5	script(CLOAKED)	Miriam#ep18_Rachel	4_EP18_MIRIAM,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
		end;
	}
	if (ep18_main == 16) {
		select( "问候。" );
		mes "[米丽亚姆]";
		mes "你好吗？";
		mes "很高兴见到你。";
		mes "" + strcharinfo(0) + ".";
		mes "我是米里亚姆，马拉姆的朋友。";
		cutin "ep18_miriam_01.png",2;
		next;
		mes "[马拉姆]";
		mes "所以，米里亚姆，事情是这样的。";
		mes "我妈妈让你帮忙" + strcharinfo(0) + "，所以这次我可能无法和你一起去。";
		mes "你可以一个人去吗？";
		cutin "ep18_maram_01.png",2;
		npctalk "对不起。", "我喜欢它#ep18_Rachel", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "如果这是尼伦要求的，那就没办法了。";
		mes "但我们甚至不能离开，因为我们没有东西。";
		cutin "ep18_miriam_03.png",2;
		npctalk "没有物品？", "米里亚姆#ep18_Rachel", bc_self;
		next;
		mes "[马拉姆]";
		mes "什么？";
		mes "你没买吗？";
		cutin "ep18_maram_03.png",2;
		npctalk "什么？", "我喜欢它#ep18_Rachel", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "在这里，一张支票。";
		cutin "ep18_miriam_03.png",2;
		npctalk "我会归还它。", "米里亚姆#ep18_Rachel", bc_self;
		next;
		mes "[马拉姆]";
		mes "啊...";
		mes "你在购买物品或其他东西时没有犯错误吧？";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[米丽亚姆]";
		mes "我...？";
		cutin "ep18_miriam_03.png",2;
		npctalk "你这是什么意思啊！", "米里亚姆#ep18_Rachel", bc_self;
		next;
		mes "[马拉姆]";
		mes "大部分时候你都很好，但有时你会生气……";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[米丽亚姆]";
		mes "<FONT SIZE = 16><B>不，对吧？</FONT></B>";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "叹...";
		mes "这确实是一个大问题……";
		cutin "ep18_maram_03.png",2;
		npctalk "这很糟糕！", "我喜欢它#ep18_Rachel", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "上次你不能去那些商家那里买吗？";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "唔...";
		mes "如果我想对付他们，^e5555e我必须自己去^000000...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "" + strcharinfo(0) + "，抱歉，我赶紧买完东西然后离开可以吗？";
		mes "速度会很快，因为我只需要下订单。";
		npctalk "请稍等。", "我喜欢它#ep18_Rachel", bc_self;
		erasequest 11704;
		setquest 11705;
		ep18_main = 17;
		close2;
		cutin "",255;
		navigateto("rachel",87,122);
		cloakonnpcself( "Miriam#ep18_Rachel" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11704) == 1" );
	end;
}

rachel,68,146,5	duplicate(dummy_cloaked_npc)	Tamarin#ep18_Maram	4_EP18_TAMARIN

// Main Quest: Step 16.
rachel,87,122,7	script	Merchant#ep18_Rachel1	4_F_DST_GRAND,{
	if (ep18_main == 17) {
		mes "[马拉姆]";
		mes "你好。";
		mes "商人屏幕。";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[商家屏幕]";
		mes "<FONT SIZE = 16><B>你来这里干什么！</FONT></B>";
		mes "<FONT SIZE = 14><B>我们没有东西可以卖给你，离开这里！</FONT></B>";
		next;
		mes "[马拉姆]";
		mes "请不要这么说。";
		cutin "ep18_maram_02.png",2;
		next;
		cutin "",255;
		mes "[商家屏幕]";
		mes "<FONT SIZE = 16><B>只是因为尼莲，我不会强行赶走你！</FONT></B>";
		next;
		mes "[米丽亚姆]";
		mes "<FONT SIZE = 14>停下来。</FONT>";
		mes "我们回去吧。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "<B>我道歉。</B>";
		mes "商人屏幕。";
		next;
		mes "[马拉姆]";
		mes "但是米丽亚姆...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "<FONT SIZE = 14><B>我们走吧！</FONT></B>";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "你明明那么自信，却从一开始就显得很尴尬。";
		mes "那么我们可以试试^e5555e另一家商店^000000吗？";
		cutin "ep18_maram_02.png",2;
		erasequest 11705;
		setquest 11706;
		ep18_main = 18;
		close2;
		cutin "",255;
		navigateto("rachel",107,102);
		end;
	}
	mes "[商家屏幕]";
	mes "嗯……你是从其他地区来的吗？";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11705) == 1" );
	end;
}

// Main Quest: Step 17.
rachel,107,102,7	script	Merchant#ep18_Rachel2	4_M_DESERT,{
	if (ep18_main == 18) {
		mes "[马拉姆]";
		mes "你好。";
		mes "先生。萨纳特";
		mes "桑纳特夫人也过得好吗？";
		cutin "ep18_maram_02.png",2;
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "啊...";
		mes "好的...";
		mes "怎么了？";
		mes "我喜欢它。";
		next;
		mes "[萨纳特商人]";
		mes "...";
		next;
		mes "[马拉姆]";
		mes "我有兴趣购买此处列出的一些商品。";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "哦……嗯……";
		mes "抱歉，我们目前没有太多库存。";
		next;
		mes "[马拉姆]";
		mes "那么，请您检查一下清单，看看是否有可用的物品？";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "一...";
		mes "抱歉，我们这里的商品都缺货了……";
		next;
		mes "[马拉姆]";
		mes "没关系，即使库存有点少。";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "对不起...";
		next;
		mes "[马拉姆]";
		mes "那么面包和肉呢...";
		cutin "ep18_maram_03.png",2;
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "啊...";
		mes "<FONT SIZE = 10>这些已经被预订了...</FONT>";
		next;
		mes "[马拉姆]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[马拉姆]";
		mes "好吧……对不起。";
		mes "那么，下次...";
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "<FONT SIZE = 10>好的...</FONT>";
		erasequest 11706;
		setquest 11707;
		ep18_main = 19;
		close2;
		cloakoffnpcself( "Miriam#ep18_merchant2" );
		cloakoffnpcself( "Maram#ep18_merchant2" );
		navigateto("rachel",117,104);
		end;
	}
	if (ep18_main == 19 || ep18_main == 20) {
		mes "[萨纳特商人]";
		mes "对不起...";
		next;
		mes "[马拉姆]";
		mes "那么，面包和肉怎么样？";
		cutin "ep18_maram_03.png",2;
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "啊...";
		mes "<FONT SIZE = 10>这些已经被预订了...</FONT>";
		next;
		mes "[马拉姆]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[马拉姆]";
		mes "是的...对不起。";
		mes "那么，下次...";
		next;
		cutin "",255;
		mes "[萨纳特商人]";
		mes "<FONT SIZE = 10>好的...</FONT>";
		close2;
		cloakoffnpcself( "Miriam#ep18_merchant2" );
		cloakoffnpcself( "Maram#ep18_merchant2" );
		navigateto("rachel",117,104);
		end;
	}
	if (ep18_main == 21) {
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		end;
	}
	if (ep18_main == 22) {
		cloakoffnpcself( "Miriam#ep18_merchant3" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11706) == 1" );
	end;
}

// Main Quest: Step 18.
rachel,117,104,5	script(CLOAKED)	Miriam#ep18_merchant2	4_EP18_MIRIAM,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
		end;
	}
	if (ep18_main == 19) {
		mes "[米丽亚姆]";
		mes "呃……";
		cutin "ep18_miriam_03.png",2;
		npctalk "这是什么啊！", "米里亚姆#ep18_merchant2", bc_self;
		next;
		mes "[马拉姆]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		npctalk "冷静点，米丽亚姆。", "我喜欢它#ep18_merchant2", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "在承认我的尴尬行为之前，请允许我提前道歉。";
		mes "对不起。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "???";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "我知道这很不礼貌，但说实话，我之前无意中听到了" + strcharinfo(0) + "和Maram之间的一些对话。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "虽然我不能确定 Niren 和" + strcharinfo(0) + "感知到当前^e5555e瑞秋居民之间的冲突^000000，我相信你刚才所看到的已经给了你一个明确的指示。";
		next;
		mes "[米丽亚姆]";
		mes "说没有货物可以卖给^e5555e灰孩子^000000...";
		next;
		mes "[马拉姆]";
		mes "米丽亚姆，这不是...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "<FONT SIZE = 14>马拉姆，这就是现实。</FONT>";
		mes "<FONT SIZE = 14>你也知道。</FONT>";
		cutin "ep18_miriam_03.png",2;
		npctalk "这就是现实。", "米里亚姆#ep18_merchant2", bc_self;
		next;
		mes "[马拉姆]";
		mes "米丽亚姆...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 10>是的，你说得对。</FONT>";
		mes "Sreen 先生和 Sannat 先生直到最近都是^e5555e销售商品的参与者^000000...";
		mes "但现在，连他们都不愿意卖了。";
		cutin "ep18_maram_01.png",2;
		npctalk "你说得对。", "我喜欢它#ep18_merchant2", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 16><B>是的！！！</FONT></B>";
		mes "<FONT SIZE = 16><B>没错！！！</FONT></B>";
		mes "<FONT SIZE = 14><B>如果我们自己承认这一点会更容易！！！</FONT></B>";
		cutin "ep18_maram_02.png",2;
		npctalk "忘了它！", "我喜欢它#ep18_merchant2", bc_self;
		next;
		mes "[马拉姆]";
		mes "与其老是抱怨现状如何，不如想想如何获取商品吧！";
		erasequest 11707;
		setquest 11708;
		ep18_main = 20;
		close2;
		cutin "",255;
		navigateto("rachel",119,103);
		end;
	}
	if (ep18_main == 20) {
		mes "[米丽亚姆]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 16><B>是的！！！</FONT></B>";
		mes "<FONT SIZE = 16><B>没错！！！</FONT></B>";
		mes "<FONT SIZE = 14><B>如果我们自己承认这一点会更容易！！！</FONT></B>";
		cutin "ep18_maram_02.png",2;
		npctalk "忘了它！", "我喜欢它#ep18_merchant2", bc_self;
		next;
		mes "[马拉姆]";
		mes "与其老是抱怨现状如何，不如想想如何获取商品吧！";
		close2;
		cutin "",255;
		navigateto("rachel",119,103);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11707) == 1" );
	end;
}

// Main Quest: Step 19.
rachel,119,103,3	script(CLOAKED)	Maram#ep18_merchant2	4_EP18_MARAM,{
	if (ep18_main == 20) {
		mes "[马拉姆]";
		mes "这确实是一个大问题。";
		mes "我们需要以某种方式快速获取货物。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "去另一个城市买可能会更好，虽然会很困难......";
		mes "但以雷切尔的情况和<FONT SIZE = 10>还有母亲的要求，</FONT>很难去另一个城市......";
		next;
		mes "[马拉姆]";
		mes "在这种时候，如果有一个来自另一个国家的^e5555e贸易代表团经过我们^000000就好了。";
		mes "<FONT SIZE = 10>来自另一个国家...</FONT>";
		next;
		mes "[马拉姆]";
		mes "<字体大小 = 16><B>！！！</FONT></B>";
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 16><B>哦！！！</FONT></B>";
		mes "<FONT SIZE = 16><B>就是这样！！！</FONT></B>";
		mes "<FONT SIZE = 14><B>" + strcharinfo(0) + "！！！</FONT></B>";
		npctalk "哦！！！！就是这样！！！！", "我喜欢它#ep18_merchant2", bc_self;
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 14>我有件事想请你帮忙！</FONT>";
		mes "^e5555e能不能帮我偷偷给妈妈买点东西？";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "^e5555e有了像" + strcharinfo(0) + "这样的外人<<<CLR1>>>，我们也许能买到货！";
		next;
		select( "购买商品的原因" );
		mes "[马拉姆]";
		mes "啊~";
		mes "那是...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "你打算保守这个秘密多久？";
		mes "如果有人在不知道原因的情况下请求这样的帮助，自然会拒绝。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "正确的。";
		mes "我明白。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "" + strcharinfo(0) + "...";
		mes "事实上，米里亚姆和我正在^e5555e帮助在另一个地区苦苦挣扎的原住民^000000。";
		mes "^e5555e获取生活所需的物资^000000就是这些任务之一。";
		next;
		mes "[马拉姆]";
		mes "虽然名为《^e5555e歧视与迫害^000000，但实际上，这几乎就像是逃离^e5555e强硬派或极端分子^000000。";
		mes "对于那些^e5555e逃亡者^000000来说，唯一的生存方法就是^e5555e隐藏^000000。";
		next;
		mes "[马拉姆]";
		mes "躲藏起来……即使他们没有我们的帮助也能生存……<FONT SIZE = 10>或者更确切地说，即使他们不能</FONT>如果他们能以某种方式谋生那就更好了，但不幸的是，事实并非如此。";
		cutin "ep18_maram_03.png",2;
		npctalk "即使没有我们的帮助他们就无法生存......", "我喜欢它#ep18_merchant2", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "我也提出同样的要求。";
		mes "<FONT SIZE = 14>为了防止饥饿的孩子们走上和我一样的道路...</FONT> <FONT SIZE = 10>经历同样的痛苦</FONT>。";
		cutin "ep18_miriam_03.png",2;
		npctalk "为了不让那些孩子经历和我一样的痛苦。", "米里亚姆#ep18_merchant2", bc_self;
		next;
		switch( select( "帮助他们。", "不要帮助他们。", "通知 Niren。" ) ) {
		case 1:
			mes "[马拉姆]";
			mes "<FONT SIZE = 14><B>谢谢！</FONT></B>";
			mes "<FONT SIZE = 14><B>我们马上出发！</FONT></B>";
			mes "因为回到刚刚去过的商店会很奇怪，所以最好去广场对面的^e5555e商店^000000。";
			npctalk "谢谢你！", "我喜欢它#ep18_merchant2", bc_self;
			npctalk "谢谢你！", "米里亚姆#ep18_merchant2", bc_self;
			cutin "ep18_maram_02.png",2;
			erasequest 11708;
			setquest 11709;
			ep18_main = 21;
			cloakoffnpcself( "Merchant#ep18_Rachel3" );
			close2;
			cutin "",255;
			cloakonnpcself( "Miriam#ep18_merchant2" );
			cloakonnpcself( "Maram#ep18_merchant2" );
			navigateto("rachel",137,85);
			end;
		case 2:
		case 3:
			close3;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11708) == 1" );
	end;
}

// Main Quest: Step 20. and 25.
rachel,137,85,5	script(CLOAKED)	Merchant#ep18_Rachel3	4_M_MIDDLE1,{
	if (ep18_main == 21) {
		mes "[马拉姆]";
		mes "你好~";
		mes "商人伦西亚~";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[商人伦西亚]";
		mes "这是怎么回事。";
		mes "不适合你......";
		next;
		mes "[马拉姆]";
		mes "事实上，<FONT SIZE = 14><B>这里的商家</FONT></B>就是这样的。";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[商人伦西亚]";
		mes "唔...";
		mes "<FONT SIZE = 10>看起来不像商人？</FONT>";
		next;
		mes "[马拉姆]";
		mes "这个人实际上是马罗尔的商人" + strcharinfo(0) + "。";
		mes "由于他们四处奔波贸易，经常会遇到危险区域，所以他们全副武装~";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[商人伦西亚]";
		mes "马罗尔，以前听说过...";
		next;
		mes "[马拉姆]";
		mes "路上遇到<FONT SIZE = 14>怪物</FONT>可就大麻烦了~";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[商人伦西亚]";
		mes "<FONT SIZE = 10>确实如此。</FONT>";
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 16><B>现在！</FONT></B>";
		mes "<FONT SIZE = 14><B>这是项目列表！</FONT></B>";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[商人伦西亚]";
		mes "这些都是你一个人买的吗？";
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 16><B>当然~</FONT></B>其他商家都在别处等着呢。";
		mes "<FONT SIZE = 14><B>对吗？</FONT></B>";
		cutin "ep18_maram_02.png",2;
		next;
		cutin "",255;
		switch( select( "据说是在酒馆。", "据说是在客栈。", "据说是在寺庙。" ) ) {
		case 1:
			mes "[商人伦西亚]";
			mes "嗯，这几天偶尔听到有外人出现的传闻……";
			next;
			mes "[商人伦西亚]";
			mes "不管怎样，既然你似乎没有携带单独的运输工具，请在你离开城镇时告诉我们，我们会把它送到城镇入口。";
			next;
			mes "[马拉姆]";
			mes "你真的不必经历这些麻烦...";
			cutin "ep18_maram_01.png",2;
			next;
			cutin "",255;
			mes "[商人伦西亚]";
			mes "啊？";
			mes "为什么不呢？";
			next;
			mes "[马拉姆]";
			mes "我们还没决定出发时间...";
			cutin "ep18_maram_01.png",2;
			next;
			cutin "",255;
			mes "[商人伦西亚]";
			mes "我会提前做好准备，到了时间请告诉我。";
			mes "你买了这么多，我就应该提供这种程度的<FONT SIZE = 14><B>服务</FONT></B>~！";
			next;
			mes "[马拉姆]";
			mes "...";
			cutin "ep18_maram_01.png",2;
			next;
			mes "[米丽亚姆]";
			mes "感谢您主动提供送货服务。";
			mes "出发时间确定后我们会通知您。";
			mes "我们出发时见。";
			cutin "ep18_miriam_03.png",2;
			next;
			cutin "",255;
			mes "[商人伦西亚]";
			mes "感谢您的购买。";
			mes "来自马罗尔的商人" + strcharinfo(0) + "。";
			next;
			mes "[米丽亚姆]";
			mes "让我们在这里^e5555e聊聊^000000。";
			cutin "ep18_miriam_03.png",2;
			erasequest 11709;
			setquest 11710;
			ep18_main = 22;
			close2;
			cutin "",255;
			cloakoffnpcself( "Miriam#ep18_merchant3" );
			navigateto("rachel",120,79);
			end;
		case 2:
			close3;
		case 3:
			close3;
		}
	}
	if (ep18_main == 22) {
		mes "[商人伦西亚]";
		mes "我会提前做好准备，到了时间请告诉我。";
		mes "你买了这么多，我就应该提供这种程度的<FONT SIZE = 14><B>服务</FONT></B>~！";
		next;
		mes "[马拉姆]";
		mes "...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "感谢您主动提供送货服务。";
		mes "出发时间确定后我们会通知您。";
		mes "我们出发时见。";
		cutin "ep18_miriam_03.png",2;
		next;
		cutin "",255;
		mes "[商人伦西亚]";
		mes "感谢您的购买。";
		mes "来自马罗尔的商人" + strcharinfo(0) + "。";
		next;
		mes "[米丽亚姆]";
		mes "让我们在这里^e5555e聊聊^000000。";
		cutin "ep18_miriam_03.png",2;
		close2;
		cutin "",255;
		cloakoffnpcself( "Miriam#ep18_merchant3" );
		navigateto("rachel",120,79);
		end;
	}
	if (ep18_main == 26) {
		mes "[商人伦西亚]";
		mes "啊!";
		mes "所以你就是刚才那个商人。";
		mes "你是不是忘记了什么？";
		next;
		select( "我准备出发了。" );
		mes "[商人伦西亚]";
		mes "是这样吗？";
		mes "然后我会让工作人员联系您，您可以在小镇的^e5555e西入口^000000处提货。";
		changequest 11714,11715;
		ep18_main = 27;
		close2;
		navigateto("rachel",41,132);
		end;
	}
	if (ep18_main == 27) {
		mes "[商人伦西亚]";
		mes "啊!";
		mes "你就是刚才的商人。";
		mes "你是不是忘记了什么？";
		next;
		select( "我准备出发了。" );
		mes "[商人伦西亚]";
		mes "是这样吗？";
		mes "然后我会让工作人员联系您，您可以在小镇的^e5555e西入口^000000处提货。";
		close2;
		navigateto("rachel",41,132);
		end;
	}
	mes "[商人伦西亚]";
	mes "感谢您的购买！";
	mes "以后如果需要更多的商品，欢迎询问哦~";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11709) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11714) == 1" );
	end;
}

// Main Quest: Step 21.
rachel,120,79,5	script(CLOAKED)	Miriam#ep18_merchant3	4_EP18_MIRIAM,{
	if (ep18_main == 22) {
		mes "[米丽亚姆]";
		mes "我们说话的时候你连看都没看这边……";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "出色地...";
		mes "我对此无能为力。";
		mes "感谢您，我们能够安全地购买这些物品，" + strcharinfo(0) + ".";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[米丽亚姆]";
		mes "在一切完全掌握在我们手中之前，我们不应该放松警惕。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "是啊，因为我们在一起，所以伦西亚似乎有点可疑。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "一个不想出售物品的人。";
		mes "还有一个穿着战斗服而来的商人。";
		mes "商团中其他看不见的成员。";
		mes "即使他们同意交付物品，他们也犹豫不决……";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "<FONT SIZE = 14>怀疑是很自然的，不是吗？</FONT>";
		next;
		mes "[马拉姆]";
		mes "<FONT SIZE = 14><B>哈哈？！</FONT></B>";
		mes "<FONT SIZE = 14>好吧，现实都是谎言~</FONT>";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[米丽亚姆]";
		mes "<FONT SIZE = 16><B>现在是笑的时候吗！！！</FONT></B>";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "抱歉抱歉~";
		mes "无论如何，尽管这是一项服务，但既然他们说会在出发前交付，我想我想直接在顶部检查^e5555e^000000。";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "为了确保您安全地收到货物，最好将其^e5555e装饰得像一个真正的商人^000000。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "我只能看到未来^e5555e我们三个人去了，我们的东西当场就被拿走了^000000。";
		next;
		mes "[马拉姆]";
		mes "然后，我们需要^e5555e假装成商人的人^000000..";
		next;
		mes "[马拉姆]";
		mes "这件事被其他商人听到是很危险的。";
		mes "我会^e5555e从外部雇佣冒险者作为护卫佣兵^000000。";
		mes "米丽亚姆，你能找到一些商人穿的衣服吗？";
		next;
		mes "[米丽亚姆]";
		mes "知道了。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "至于你，" + strcharinfo(0) + "...";
		mes "<FONT SIZE = 14>嗯……</FONT>";
		mes "<FONT SIZE = 16>嗯......</FONT>";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "您想在这家店里休息一下吗？";
		mes "我会为你点^e5555e食物^000000，所以当你吃完后，请来到我们第一次见面的^e5555e树下^000000。";
		next;
		mes "[马拉姆]";
		mes "如果你碰巧遇到认识的人，请随意提及雇用雇佣兵的事。";
		next;
		mes "[艾莉]";
		mes "看来我们的任务一直在变化。";
		cutin "ep172_beta.bmp",2;
		erasequest 11710;
		setquest 11711;
		ep18_main = 23;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#ep18_merchant3" );
		navigateto("rachel",108,73);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11710) == 1" );
	end;
}

// Main Quest: Step 22.
rachel,108,74,3	script	Dumplings#ep18_Rachel	4_POINT_RED,{
	if (ep18_main == 23) {
		select( "吃马拉姆点的食物。" );
		mes "[狨猴]";
		mes "<FONT SIZE = 16><B>哦？</FONT></B>";
		mes "嘿，" + strcharinfo(0) + "！";
		mes "很高兴见到你！";
		cloakoffnpcself( "Tamarin#ep18_Rachel_dumpling" );
		cutin "ep18_tamarin_04.png",2;
		npctalk "很高兴见到你！", "罗望子#ep18_Rachel_dumpling", bc_self;
		next;
		mes "[狨猴]";
		mes "竟然能在这里相遇，真是太巧了！";
		cutin "ep18_tamarin_02.png",2;
		npctalk "很高兴再次见到你！", "罗望子#ep18_Rachel_dumpling", bc_self;
		next;
		mes "[狨猴]";
		mes "这里的食物真的好吗？";
		mes "我之前去雷切尔的时候就试过了，它太美味了，所以我每次来的时候都会一定要去这个地方。";
		next;
		mes "[狨猴]";
		mes "<FONT SIZE = 14>请问，能给我一个饺子吗？</FONT>";
		cutin "ep18_tamarin_01.png",2;
		next;
		select( "询问他们在做什么。" );
		mes "[狨猴]";
		mes "你吃饺子吗？";
		mes "<FONT SIZE = 14><B>哦！</FONT></B>";
		mes "<FONT SIZE = 14>你在雷切尔吗？</FONT>";
		next;
		mes "[狨猴]";
		mes "嗯……我不能详细说，但是我收到了一个请求，在和尼伦会面后，我突然需要额外的警卫，所以我带了杜兰和阿尔夫一起。";
		next;
		mes "[狨猴]";
		mes "所以我们在等他们，如果等得太久，我们可能会考虑前往下一个区域……";
		mes "但我们会看到。";
		npctalk "我们会设法赶上的。", "罗望子#ep18_Rachel_dumpling", bc_self;
		next;
		select( "请求有关商人伪装的帮助。" );
		next;
		mes "[狨猴]";
		mes "<FONT SIZE = 14><B>哦！</FONT></B>";
		mes "这听起来是个好主意。";
		mes "我们去找马克和玛吉一起去吧。";
		mes "他们可能正在广场附近购物。";
		cutin "ep18_tamarin_02.png",2;
		erasequest 11711;
		setquest 11712;
		ep18_main = 24;
		close2;
		cutin "",255;
		cloakonnpcself( "Tamarin#ep18_Rachel_dumpling" );
		navigateto("rachel",122,120);
		end;
	}
	if (ep18_main == 24) {
		select( "吃马拉姆点的食物。" );
		mes "[狨猴]";
		mes "等你包完饺子，我们就去找马克和玛吉一起去吧。";
		mes "他们可能正在广场附近购物。";
		cloakoffnpcself( "Tamarin#ep18_Rachel_dumpling" );
		cutin "ep18_tamarin_02.png",2;
		close2;
		cutin "",255;
		cloakonnpcself( "Tamarin#ep18_Rachel_dumpling" );
		navigateto("rachel",122,120);
		end;
	}
	mes "- 饺子看起来很好吃。 -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11711) == 1" );
	end;
}

rachel,105,73,5	duplicate(dummy_cloaked_npc)	Tamarin#ep18_Rachel_dumpling	4_EP18_TAMARIN

// Main Quest: Step 23.
rachel,122,120,3	script	Mark#ep18_Rachel	4_EP18_MARK,{
	if (ep18_main == 24) {
		mes "[标记]";
		mes "你好。";
		mes "" + strcharinfo(0) + ".";
		cutin "ep18_mark_01.png",2;
		next;
		mes "[美琪]";
		mes "哦...你好...";
		cutin "4job_maggi_04.PNG",2;
		next;
		mes "[狨猴]";
		mes "马克，玛吉，你们的事处理完了吗？";
		mes "" + strcharinfo(0) + "给你介绍了一份工作，对吧？";
		mes "我们现在要去见客户，所以我们一起去吧。";
		cutin "ep18_tamarin_01.png",2;
		next;
		mes "[标记]";
		mes "哦...";
		mes "我找到了阿尔夫要求的那本书。";
		mes "但我找不到Dew要的零食。";
		cutin "ep18_mark_02.png",2;
		next;
		mes "[狨猴]";
		mes "那我们现在就可以离开了。";
		mes "我们前往集合地点吧。";
		cutin "ep18_tamarin_02.png",2;
		changequest 11712,11713;
		ep18_main = 25;
		close2;
		cutin "",255;
		navigateto("rachel",70,147);
		end;
	}
	if (ep18_main == 25) {
		mes "[标记]";
		mes "哦...";
		mes "我找到了阿尔夫要求的那本书。";
		mes "但我找不到Dew要的零食。";
		cutin "ep18_mark_02.png",2;
		next;
		mes "[狨猴]";
		mes "那我们现在就可以离开了。";
		mes "我们前往集合地点吧。";
		cutin "ep18_tamarin_02.png",2;
		close2;
		cutin "",255;
		navigateto("rachel",70,147);
		end;
	}
	mes "[标记]";
	mes "你好";
	mes "" + strcharinfo(0) + ".";
	cutin "ep18_mark_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11712) == 1" );
	end;
}

rachel,121,120,5	script	Magi#ep18_rachel	4_4JOB_MAGGI,{
	mes "[美琪]";
	mes "哦...你好...";
	cutin "4job_maggi_04.PNG",2;
	close3;
}

// Main Quest: Step 26.
rachel,41,132,3	script	Box#ep18_procurement4	4_WOODBOX,{
	if (ep18_main == 27) {
		mes "[商人伦西亚]";
		mes "然后请检查订购的商品是否正确...";
		next;
		select( "交出支票。" );
		mes "[商人伦西亚]";
		mes "啊~";
		mes "份量刚刚好！";
		mes "谢谢你！";
		mes "请下次再使用我们的服务~！";
		next;
		mes "[马拉姆]";
		mes "在离开" + strcharinfo(0) + "之前，让我们^e5555e检查门外的路径^000000。";
		cutin "ep18_maram_01.png",2;
		erasequest 11715;
		setquest 11716;
		ep18_main = 28;
		close2;
		cutin "",255;
		navigateto("ra_fild11",354,235);
		end;
	}
	if (ep18_main == 28) {
		mes "[马拉姆]";
		mes "在离开" + strcharinfo(0) + "之前，让我们^e5555e检查门外的路径^000000。";
		cutin "ep18_maram_01.png",2;
		close2;
		cutin "",255;
		navigateto("ra_fild11",354,235);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11715) == 1" );
	end;
}

rachel,42,133,3	duplicate(dummy_npc)	Box#ep18_procurement1	4_WOODBOX
rachel,40,133,3	duplicate(dummy_npc)	Box#ep18_procurement2	4_WOODBOX
rachel,39,132,3	duplicate(dummy_npc)	Box#ep18_procurement3	4_WOODBOX

// Main Quest: Step 27.
ra_fild11,354,235,3	script	Merchant#ep18_rachel	4_EP18_MERCHANT,{
	if (ep18_main == 28 || ep18_main == 29) {
		mes "[伪装的玛拉姆]";
		mes "从现在开始，请护送" + strcharinfo(0) + "与Miriam和Tamarin一起前往位于西边的^e5555e奥兹峡谷^000000。";
		cutin "ep18_merchant.png",2;
		next;
		mes "[伪装的玛拉姆]";
		mes "考虑到目前的情况，我觉得我们不能把这些人都带走，所以我先把他们打发回去，然后再跟上。";
		next;
		mes "[伪装的玛拉姆]";
		mes "为了避免暴露我们的目的地，最好转移到其他地方并将人送回去。";
		if (ep18_main == 28) {
			erasequest 11716;
			setquest 11717;
			ep18_main = 29;
		}
		close2;
		cutin "",255;
		navigateto("ra_fild10",179,176);
		end;
	}
	mes "[商人]";
	mes "风很大...";
	cutin "ep18_merchant.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11716) == 1" );
	end;
}

// Main Quest: Step 28. (entrance npc is a part of the instance Maze of Oz)
// Main Quest: Step 29. (1@oz solo instance)

// Main Quest: Step 30.
gw_fild01,276,339,3	duplicate(dummy_cloaked_npc)	Maram#ep18_Ozexit	4_EP18_MARAM

gw_fild01,273,339,3	script	#ep18_in front of Oz Exit	4_POINT_RED,1,1,{
// trigger OnClick + OnTouch, so OnTouch commented
	// end;
// OnTouch:
	if (ep18_main == 31 || ep18_main == 32) {
		mes "[马拉姆]";
		mes "<FONT SIZE = 14><B>啊！</FONT></B>";
		mes "终于，我出来了！";
		cloakoffnpcself( "Maram#ep18_Ozexit" );
		cutin "ep18_maram_01.png",2;
		npctalk "我好累啊...", "我喜欢它#ep18_Ozexit", bc_self;
		next;
		mes "[马拉姆]";
		mes "如果你从这里向^e5555e向西^000000走一点，你就会找到^e5555e村庄^000000的入口。";
		next;
		select( "村庄？" );
		mes "[马拉姆]";
		mes "它更像是一个^e5555e藏身处^000000，逃离雷切尔的人们躲藏在那里，而不是一个村庄。";
		next;
		mes "[马拉姆]";
		mes "亲自看看比听我解释更好。";
		if (ep18_main == 31) {
			completequest 11720;
			setquest 11721;
			ep18_main = 32;
		}
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#ep18_Ozexit" );
		navigateto("gw_fild01",35,102);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11720) == 1" );
	end;
}

// Main Quest: Step 31. + 33.
gw_fild01,39,100,5	duplicate(dummy_npc)	Exotic Merchant#ep18_gw2	4_EP18_MERCHANT
gw_fild01,34,96,3	duplicate(dummy_npc)	Exotic Merchant#ep18_gw3	4_EP18_MERCHANT

gw_fild01,35,102,5	script	Maram#ep18_gw	4_EP18_MARAM,{
	if (ep18_main == 32) {
		mes "[露营车]";
		mes "万岁~~~";
		mes "有时候，这样露营也不错~~~";
		next;
		mes "[马拉姆]";
		mes "<字体大小= 14><B>是我！我！</FONT></B>";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[露营车]";
		mes "你？";
		mes "我们认识吗？";
		next;
		mes "[马拉姆]";
		mes "你在说什么？";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "这是当你带着<<<CLR0>>>外人^000000时的反应吗？";
		cloakoffnpcself( "Miriam#ep18_gw" );
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "啊...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "那我就继续吧。";
		cloakoffnpcself( "Imril#ep18_gw" );
		cutin "ep18_imril_02.png",2;
		next;
		mes "[马拉姆]";
		mes "<字体大小 = 14><B>糟糕！！伊姆里尔，等一下！！！！</FONT></B>";
		cutin "ep18_maram_01.png",2;
		erasequest 11721;
		setquest 11722;
		ep18_main = 33;
		close3;
	}
	if (ep18_main == 33) {
		mes "[马拉姆]";
		mes "啊...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "那我就继续吧。";
		cloakoffnpcself( "Imril#ep18_gw" );
		cutin "ep18_imril_02.png",2;
		next;
		mes "[马拉姆]";
		mes "<字体大小 = 14><B>糟糕！！伊姆里尔，等一下！！！！</FONT></B>";
		cutin "ep18_maram_01.png",2;
		close3;
	}
	if (ep18_main == 34) {
		mes "[马拉姆]";
		mes "苏阿德迟到了……";
		mes "如果她根本不来怎么办？";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "我们应该回到雷切尔那里。";
		mes "如果信任已经被打破，^e5555e我们可能无法再次进入村庄。^000000";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[马拉姆]";
		mes "但再这样下去，村子里的人只会受更多的苦。";
		mes "如果有必要的话，甚至可以寻求外人的帮助……";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[米丽亚姆]";
		mes "你不明白。";
		cutin "ep18_miriam_03.png",2;
		npctalk "你们与我们既相同又不同。", "米里亚姆#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[马拉姆]";
		mes "我也……想明白……你们……";
		npctalk "对不起...", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		npctalk "说出这样的话，我才是最应该道歉的人。", "米里亚姆#ep18_gw", bc_self;
		next;
		mes "[苏阿德]";
		mes "不经过任何协商就带外人过来……";
		mes "考虑到我们过去的关系，我很幸运能听到你最后的借口。";
		cutin "ep18_suad_03.png",2;
		cloakoffnpcself( "Suad#ep18_gw" );
		next;
		mes "[马拉姆]";
		mes "苏阿德！";
		mes "二话不说就把一个外人带到村口，真是鲁莽啊！";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "但这些人却足够值得母亲信任，将重任交给他们！";
		mes "无需担心；不会有什么不好的事情发生！";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[苏阿德]";
		mes "Niren 给你这么大的信任来处理任务吗？";
		mes "得到尼伦的信任又有什么关系呢？";
		cutin "ep18_suad_03.png",2;
		npctalk "没什么意义！", "苏阿德#ep18_gw", bc_self;
		next;
		mes "[苏阿德]";
		mes "<FONT SIZE = 14>Niren 甚至不知道你在这里送货。</FONT>";
		next;
		mes "[马拉姆]";
		mes "那是...";
		cutin "ep18_maram_01.png",2;
		npctalk "确实如此，但是……", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "别再嘲笑苏阿德了。";
		cutin "ep18_miriam_03.png",2;
		npctalk "话够了！", "米里亚姆#ep18_gw", bc_self;
		next;
		mes "[苏阿德]";
		mes "我不是在嘲笑。";
		mes "我只是说出事实真相...";
		cutin "ep18_suad_03.png",2;
		next;
		mes "[米丽亚姆]";
		mes "如果这是事实，^e5555e那么在瑞秋，我们就不会再有人向我们卖东西了，^000000我们都会像这样被饿死。";
		cutin "ep18_miriam_03.png",2;
		npctalk "这不是我们想要的，对吧？", "米里亚姆#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "您可以从静脉或其他村庄购买商品，但是^e5555e可以通过奥兹迷宫的人数正在减少。^000000";
		cutin "ep18_maram_01.png",2;
		npctalk "甚至伊姆里尔也处于危险之中。", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "目前来说^e5555e如果有战斗技能就可以杀怪过关，^000000但是以后可能就不是战斗技能了； ^e5555e整个迷宫可能会被锁在熔岩中。^000000";
		next;
		mes "[马拉姆]";
		mes "到时候，能帮忙的人，连这一步都做不到了。";
		npctalk "到那时，就太晚了！", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "只要^e5555e母亲要求的土著与移民之间的调解能够实现，我们就能再次通过一座桥穿越奥兹峡谷了！";
		next;
		mes "[苏阿德]";
		mes "调解？看来尼伦又有了一个梦幻般的想法。";
		mes "就像^e5555e灰色孩子^000000出现时一样。";
		cutin "ep18_suad_03.png",2;
		npctalk "看来尼伦又有了一个梦幻般的想法。", "苏阿德#ep18_gw", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "但多亏了这一点，我们才能避免饥饿，现在我们可以帮助村里的孩子们。";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[苏阿德]";
		mes "美好的。";
		mes "那我们就给他们一个机会吧。";
		mes "就像Niren给了我们一个机会一样。";
		cutin "ep18_suad_03.png",2;
		npctalk "我放弃了这个机会，逃跑了……", "苏阿德#ep18_gw", bc_self;
		next;
		mes "[米丽亚姆]";
		mes "什么？";
		cutin "ep18_miriam_03.png",2;
		npctalk "你这么轻易就允许这样的事情发生吗？", "米里亚姆#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "真的吗？！";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "严重地？";
		cutin "ep18_miriam_03.png",2;
		npctalk "老实说我并没有抱太大期望！", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[苏阿德]";
		mes "它是什么？";
		mes "那个反应。";
		cutin "ep18_suad_03.png",2;
		npctalk "然后回去吧！！", "苏阿德#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "不~不~";
		mes "谢谢~";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "那么，在苏阿德改变主意之前，我们就去^e5555e村庄^000000吧！";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "我们来讨论一下里面的细节。";
		erasequest 11723;
		setquest 11724;
		ep18_main = 35;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#ep18_gw" );
		cloakonnpcself( "Suad#ep18_gw" );
		warp "wolfvill",152,113;
		end;
	}
	if (ep18_main == 35) {
		mes "[马拉姆]";
		mes "那我们就赶紧在苏阿德改变主意之前前往^e5555e村庄^000000吧！";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "我们来讨论一下里面的细节。";
		close2;
		cutin "",255;
		warp "wolfvill",152,113;
		end;
	}
	mes "[马拉姆]";
	mes "呼~";
	mes "我们可以试着点篝火什么的吗？";
	cutin "ep18_maram_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11721) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11723) == 1" );
	end;
}

gw_fild01,36,103,5	duplicate(dummy_cloaked_npc)	Miriam#ep18_gw	4_EP18_MIRIAM
gw_fild01,41,103,5	duplicate(dummy_cloaked_npc)	Suad#ep18_gw	4_EP18_SUAD

// Main Quest: Step 32.
gw_fild01,37,105,5	script(CLOAKED)	Imril#ep18_gw	4_EP18_IMRIL,{
	if (ep18_main == 33) {
		mes "[伊姆里尔]";
		mes "为什么。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[马拉姆]";
		mes "别一个人去，帮帮我们吧。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "不带外人是我们的^e5555e规则^000000。";
		mes "即使你寻求帮助，我也无能为力。";
		cutin "ep18_imril_02.png",2;
		npctalk "我有什么权力。", "伊姆里尔#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "唔...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[马拉姆]";
		mes "那么去村子里呼叫^e5555eSuad^000000怎么样？";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "因为带了外人，我想连我都不会被允许进村子。";
		cutin "ep18_maram_01.png",2;
		npctalk "帮我...", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[伊姆里尔]";
		mes "^e5555eSuad^000000对此很敏感。";
		mes "应该提前告诉他的。";
		cutin "ep18_imril_02.png",2;
		npctalk "他会真的很生气。", "伊姆里尔#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "这一次，在我还没反应过来之前，事情就变得混乱了。";
		mes "您现在大致了解^e5555eRachel 的情况^000000。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "所以我才去^e5555e静脉^000000购买物品。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "我欠他之前的帮助，所以我会问^e5555eSuad^000000。";
		mes "但不要期望太多。";
		cutin "ep18_imril_03.png",2;
		next;
		mes "[马拉姆]";
		mes "知道了。";
		cutin "ep18_maram_01.png",2;
		npctalk "谢谢。", "我喜欢它#ep18_gw", bc_self;
		next;
		mes "[马拉姆]";
		mes "" + strcharinfo(0) + "，要进入村庄，看来我们需要遇见并说服^e5555eSuad^000000。";
		mes "我不确定他是否会同意见我们...";
		next;
		mes "[马拉姆]";
		mes "让我们先等待^e5555eSuad^000000到达。";
		erasequest 11722;
		setquest 11723;
		ep18_main = 34;
		close2;
		cloakonnpcself( "Imril#ep18_gw" );
		cutin "",255;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11722) == 1" );
	end;
}

// Main Quest: Step 34.
// + Quest: Investigation of Oz Labyrinth. Step 1 + 13 (final).
wolfvill,143,114,5	duplicate(dummy_cloaked_npc)	Maram#ep18_wv	4_EP18_MARAM
wolfvill,145,114,5	duplicate(dummy_cloaked_npc)	Miriam#ep18_wv	4_EP18_MIRIAM

wolfvill,143,113,5	script	Imril#ep18_wv	4_EP18_IMRIL,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 35)
		end;
	if (ep18_main == 35) {
		mes "[伊姆里尔]";
		mes "<FONT SIZE = 14>嘿！</FONT>";
		mes "你真的进来了，不是吗？";
		cutin "ep18_imril_03.png",2;
		next;
		mes "[伊姆里尔]";
		mes "我确实传达了这个信息。";
		mes "但是^e5555eSuad^000000不允许外人进入村庄！";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[米丽亚姆]";
		mes "这恐怕说明村里的情况不太好。";
		cloakoffnpcself( "Miriam#ep18_wv" );
		cloakoffnpcself( "Maram#ep18_wv" );
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[艾莉]";
		mes "在这种环境下想要自给自足是很困难的。";
		mes "就连树木也坚硬如石。";
		mes "或者也许它们不是树，而是岩石？";
		cutin "ep172_beta.bmp",2;
		next;
		mes "[马拉姆]";
		mes "我想，如果我们能得到外界的一点帮助，情况就会有所改善。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "如果发生的话那就太好了。";
		mes "苏阿德也许没有说出来，但他一定已经思考了很长一段时间。";
		cutin "ep18_imril_01.png",2;
		npctalk "因为他是一个责任心很强的人。", "伊姆里尔#ep18_wv", bc_self;
		next;
		mes "[马拉姆]";
		mes "而且似乎" + strcharinfo(0) + "购买物品的帮助很有效！";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[马拉姆]";
		mes "^e5555e他们可能会说只有在获取物资时才允许进入^000000，但一旦他们意识到你是^e5555e值得信赖的人^000000，他们可能会感到更安心。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "那么，我们现在要先与^e5555e村民^000000交谈吗？";
		next;
		mes "[马拉姆]";
		mes "^e5555e聆听人们的故事^000000并了解他们可能会揭示^e5555e母亲托付的钥匙^000000。";
		// note: unlocks side quests
		completequest 11724;
		ep18_main = 36;
		getitem 1000405,50;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#ep18_wv" );
		cloakonnpcself( "Maram#ep18_wv" );
		end;
	}

	// Quest before the daily quests
	switch( isbegin_quest(11735) ) {
	case 0:
		switch( isbegin_quest(11725) ) {
		case 0:
			mes "[伊姆里尔]";
			mes "多亏了你们，我才能够安全地通过^e5555e奥兹迷宫^000000。";
			mes "谢谢。";
			cutin "ep18_imril_03.png",2;
			next;
			mes "[伊姆里尔]";
			mes "以前，只要小心一点，一个人旅行并不是什么大问题。但现在，一个人去越来越难了。";
			cutin "ep18_imril_02.png",2;
			next;
			mes "[伊姆里尔]";
			mes "以我们村现在的情况，不可能一直有人陪着，而且跟团出行也有风险，容易引起注意。";
			cutin "ep18_imril_01.png",2;
			next;
			mes "[伊姆里尔]";
			mes "如果我们能更深入地调查奥兹迷宫就好了。";
			mes "<FONT SIZE = 14>熔岩的状态...</FONT>";
			mes "<FONT SIZE = 16><B>怪物分布...</FONT></B>";
			cutin "ep18_imril_02.png",2;
			next;
			mes "[伊姆里尔]";
			mes "唔...";
			mes "冒险家，既然你这么强，有空的话可以陪我去^e5555e奥兹迷宫^000000吗？";
			mes "这或许是无耻的要求，但我并不是每天都有机会遇到像你这样强大的冒险者。";
			next;
			if (select( "立即出发！", "之后..." ) == 2) {
				mes "[伊姆里尔]";
				mes "好吧！";
				mes "如果你现在很忙，我想没什么可做的。";
				cutin "ep18_imril_02.png",2;
				next;
				mes "[伊姆里尔]";
				mes "如果你以后有时间的话，可以跟我一起去吗？";
				close3;
			}
			mes "[伊姆里尔]";
			mes "哇！";
			mes "真的吗？";
			mes "你就这样心甘情愿地接受我的请求吗？我很感动！";
			cutin "ep18_imril_03.png",2;
			next;
			mes "[伊姆里尔]";
			mes "那么我们先在^e5555e奥兹迷宫入口^000000见面吧！";
			mes "你记得路吧？";
			cutin "ep18_imril_02.png",2;
			setquest 11725;
			close2;
			cutin "",255;
			navigateto("oz_dun01",27,184);
			end;
		case 1:
			mes "[伊姆里尔]";
			mes "移动或处理熔岩的怪物是障碍物。";
			mes "如果有办法彻底消灭它们那就太好了。";
			cutin "ep18_imril_01.png",2;
			close3;
		case 2:
			end;
		}
		end;
	case 1:
		mes "[伊姆里尔]";
		mes "啊...";
		mes "我的皮肤感觉刺痛。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[苏阿德]";
		mes "那个敢穿着这样的衣服冒险深入迷宫的傻子在哪里？";
		mes "庆幸自己没有被活活烤死！";
		cutin "ep18_suad_03.png",2;
		next;
		mes "[伊姆里尔]";
		mes "反正不管你说什么！";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "无论如何，^e5555e奥兹迷宫的情况正在变得更糟^000000。";
		mes "^e5555e熔岩区域正在扩大^000000。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "照这样下去，就没有多少时间可以穿越绿野仙踪了。";
		next;
		mes "[苏阿德]";
		mes "确实，如果熔岩已经蔓延到那种程度，我们就需要尽快找到解决办法。";
		cutin "ep18_suad_03.png",2;
		next;
		mes "[苏阿德]";
		mes "目前...";
		mes "为了派遣工人，我们需要减少绿野仙踪中怪物的数量。";
		next;
		cutin "",255;
		completequest 11735;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		mes "^4d4dff您收到了对您的好评。^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
		}
		close;
	case 2:
		break;
	}
	mes "[伊姆里尔]";
	mes "移动行李或处理熔岩的怪物是障碍。";
	mes "如果有办法彻底消除它们那就太好了。";
	cutin "ep18_imril_01.png",2;
	next;
	mes "[伊姆里尔]";
	mes "你说什么，冒险家？";
	mes "^e5555e对消灭怪物感兴趣^000000？";
	cutin "ep18_imril_02.png",2;
	next;

	.@menu$[0] = "Oz Labyrinth 1F [170]";
	if (checkquest(11737,PLAYTIME) == 0 || checkquest(11737,PLAYTIME) == 1)
		.@menu$[0] = "^8C8C8C" + .@menu$[0] + "(pending)^000000";
	else if (checkquest(11736,HUNTING) == 0 || checkquest(11736,HUNTING) == 1)
		.@menu$[0] = "^8C8C8C" + .@menu$[0] + "(running)^000000";

	.@menu$[1] = "Oz Labyrinth 2F [200]";
	if (BaseLevel < 200)
		.@menu$[1] = "^8C8C8C" + .@menu$[1] + " (Insufficient level)^000000";
	else if (checkquest(11739,PLAYTIME) == 0 || checkquest(11739,PLAYTIME) == 1)
		.@menu$[1] = "^8C8C8C" + .@menu$[1] + "(pending)^000000";
	else if (checkquest(11738,HUNTING) == 0 || checkquest(11738,HUNTING) == 1)
		.@menu$[1] = "^8C8C8C" + .@menu$[1] + "(running)^000000";

	switch( select( .@menu$[0], .@menu$[1], "停止" ) ) {
	case 1:
		switch( checkquest(11737,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[伊姆里尔]";
			mes "你今天做得很好。谢谢。";
			mes "明天你也帮我吗？";
			cutin "ep18_imril_04.png",2;
			close3;
		case 2:
			erasequest 11737;
			break;
		}
		switch( checkquest(11736,HUNTING) ) {
		case -1:
			mes "[伊姆里尔]";
			mes "^e5555e请在奥兹迷宫一楼击败约20个" + getmonsterinfo(21295, MOB_NAME) + "。^000000";
			mes "即使怪物的数量稍微减少，对于穿越迷宫的旅行者来说也会有很大的帮助。";
			cutin "ep18_imril_03.png",2;
			next;
			if (select( "接受。", "到此为止。" ) == 2) {
				mes "[伊姆里尔]";
				mes "为什么~？你忙吗？";
				cutin "ep18_imril_02.png",2;
				close3;
			}
			mes "[伊姆里尔]";
			mes "那么回来的路上要小心哦~";
			setquest 11736;
			close3;
		case 0:
		case 1:
			mes "[伊姆里尔]";
			mes "^e5555e请在奥兹迷宫一楼击败约20个" + getmonsterinfo(21295, MOB_NAME) + "。^000000";
			mes "即使怪物的数量稍微减少，对于穿越迷宫的旅行者来说也会有很大的帮助。";
			cutin "ep18_imril_03.png",2;
			close3;
		case 2:
			mes "[伊姆里尔]";
			mes "你已经完成了吗？";
			mes "因为它可靠！";
			cutin "ep18_imril_04.png",2;
			erasequest 11736;
			setquest 11737;
			add_reputation_points(REPUTATION_EP18, 30);
			if (get_reputation_points(REPUTATION_EP18) >= 5000)
				.@bonus = 1;
			if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
				ep18_main = 37;
				setquest 18082;
			}
			getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
			getexp 4364880,3000000;
			close3;
		}
	case 2:
		if (BaseLevel < 200) {
			mes "[伊姆里尔]";
			mes "这还是太危险了，所以^ff0000等到你等级200左右^000000再试一次！";
			close;
		}
		switch( checkquest(11739,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[伊姆里尔]";
			mes "你今天做得很好。谢谢。";
			mes "明天你也帮我吗？";
			cutin "ep18_imril_04.png",2;
			close3;
		case 2:
			erasequest 11739;
			break;
		}
		switch( checkquest(11738,HUNTING) ) {
		case -1:
			mes "[伊姆里尔]";
			mes "^e5555e在奥兹国迷宫二楼击败大约20个^000000 " + getmonsterinfo("EP18_HOT_MOLAR", MOB_NAME) + "。";
			mes "因为即使怪物数量减少一点点，对于穿越迷宫的小贩来说也会有很大的帮助。";
			cutin "ep18_imril_03.png",2;
			next;
			if (select( "接受", "停止" ) == 2)
				close3;
			mes "[伊姆里尔]";
			mes "那就小心点去吧~";
			setquest 11738;
			close3;
		case 0:
		case 1:
			mes "[伊姆里尔]";
			mes "^e5555e在奥兹国迷宫二楼击败大约20个^000000 " + getmonsterinfo("EP18_HOT_MOLAR", MOB_NAME) + "。";
			mes "因为即使怪物数量减少一点点，对于穿越迷宫的小贩来说也会有很大的帮助。";
			cutin "ep18_imril_03.png",2;
			close3;
		case 2:
			mes "[伊姆里尔]";
			mes "你已经完成了吗？";
			mes "因为它可靠！";
			cutin "ep18_imril_04.png",2;
			erasequest 11738;
			setquest 11739;
			add_reputation_points(REPUTATION_EP18, 30);
			if (get_reputation_points(REPUTATION_EP18) >= 5000)
				.@bonus = 1;
			if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
				ep18_main = 37;
				setquest 18082;
			}
			getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
			getexp 11588320,3000000;
			close3;
		}
		end;
	case 3:
		mes "[伊姆里尔]";
		mes "为什么~？你忙吗？";
		cutin "ep18_imril_02.png",2;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11724) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(11725) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11735) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11736,HUNTING) == -1 && (checkquest(11737,PLAYTIME) == -1 || checkquest(11737,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11736,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11738,HUNTING) == -1 && (checkquest(11739,PLAYTIME) == -1 || checkquest(11739,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11738,HUNTING) == 2" );
	end;
}

// Main Quest: Step 35.
wolfvill,180,179,3	script	Village Boy#category	4_M_DST_CHILD,{
	if (ep18_main == 37) {
		mes "[乡村男孩]";
		mes "比赛即将开始。";
		mes "这不是一个经常举行的小规模会议；这是一场来自各地值得信赖的人参加的锦标赛！";
		next;
		mes "[乡村男孩]";
		mes "<NAVI>[那边]<INFO>wolfvill,144,151,0,101,0</INFO></NAVI>就是你应该去的地方。这里也有冒险家的一席之地。";
		mes "当然，既然你是冒险者，那么你就是我们可以信任的人。";
		erasequest 18082;
		setquest 16567;
		ep18_main = 38;
		close;
	}
	if (ep18_main == 38) {
		mes "[男孩]";
		mes "会议即将开始！不仅仅是一场会议，而是一场比赛！";
		mes "<NAVI>[人们]<INFO>wolfvill,144,151,0,101,0</INFO></NAVI>他们聚集在一起。冒险家们，快点出发吧！";
		close;
	}
	mes "[男孩]";
	mes "我们村经常开会。每个人都会在这个时候聚集在一起分享他们的意见。";
	mes "但比赛就不一样了！这真是一个非常重要的时刻！";
	next;
	mes "[男孩]";
	mes "当然，并不是任何人都可以参与。";
	mes "他们说只有村里值得信赖的朋友才能参加。";
	next;
	mes "[男孩]";
	mes "冒险者也可以参加活动吗？";
	mes "好吧，这取决于你，冒险家！";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18082) == 1" );
	end;
}

wolfvill,146,148,0	script	#contest1	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	.@char_id = getcharid(0);
	if (ep18_main == 38 || ep18_main == 39 || ep18_main == 40) {
		cloakoffnpcself( "Maram#1" );
		cloakoffnpcself( "Suad#1" );
		cloakoffnpcself( "Miriam#1" );
		cloakoffnpcself( "Radical Youth#Radical2" );
		cloakoffnpcself( "Excited Youth#Radical3" );
		cloakoffnpcself( "Radical Young Man#Radic" );
		cloakoffnpcself( "Hot-blooded Youth#Radic" );
		cloakoffnpcself( "Angry Youth#Radical5" );
		cloakoffnpcself( "Timid Old Man#Elder3" );
		cloakoffnpcself( "Timid Old Man#Elder4" );
		cloakoffnpcself( "Embarrassed Old Man#Eld" );
		cloakoffnpcself( "Passionate Old Man#Weap" );
		cloakoffnpcself( "Neutral Youth#Neutral3" );
		cloakoffnpcself( "Timid Youth#Neutral1" );
		cloakoffnpcself( "Quiet Youth#Neutral2" );
		cloakoffnpcself( "Native Old Man#Elder1" );
		cloakoffnpcself( "Passionate Youth#Radica" );
		end;
	}
	if (ep18_main == 41) {
		cloakoffnpcself( "Maram#1" );
		cloakoffnpcself( "Suad#1" );
		cloakoffnpcself( "Miriam#1" );
		cloakoffnpcself( "Radical Young Man#Radic" );
		cloakoffnpcself( "Excited Youth#Radical3" );
		end;
	}
	if (ep18_main == 42) {
		cloakoffnpcself( "Suad#1" );
		cloakoffnpcself( "Radical Young Man#Radic" );
		cloakoffnpcself( "Excited Youth#Radical3" );
		end;
	}
	if (ep18_main == 47) {
		cloakoffnpcself( "Suad#sms01" );
		npctalk "…………", "苏阿德#sms01", bc_self;
		end;
	}
	if (ep18_main == 49) {
		cloakoffnpcself( "Suad#sms02" );
		cloakoffnpcself( "Maram#sms02" );
		cloakoffnpcself( "Miriam#sms02" );
		cloakoffnpcself( "Lamacus#sms01" );
		cloakoffnpcself( "Kun#sms01" );
		cloakoffnpcself( "Yopi#sms01" );
		end;
	}
	end;
}

wolfvill,147,148,3	script(CLOAKED)	Radical Youth#Radical2	4_DST_SOLDIER,{
	npctalk "我们来战斗吧！我们必须战斗！", "激进青年#Radical2", bc_self;
	end;
}

wolfvill,145,144,7	script(CLOAKED)	Excited Youth#Radical3	4_EP18_GW_MAN02,{
	npctalk "哈哈哈！当然，打起来我就应该赢！", "兴奋的青春#Radical3", bc_self;
	end;
}

wolfvill,148,144,1	script(CLOAKED)	Hot-blooded Youth#Radic	4_EP18_GW_WOMAN01,{
	npctalk "消灭他们全部！呼！呼！", "热血青年#Radic", bc_self;
	end;
}

wolfvill,143,148,5	script(CLOAKED)	Angry Youth#Radical5	4_EP18_GW_MAN02,{
	npctalk "烧掉一切！", "愤怒的青年#Radical5", bc_self;
	end;
}

// Main Quest: Step 36 + 41.
wolfvill,144,151,5	script(CLOAKED)	Suad#1	4_EP18_SUAD,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		mes "[迷你艾莉]";
		mes "把它从包里拿出来。请把它戴在头顶上。";
		close;
	}
	if (ep18_main < 38)
		end;
	if (ep18_main == 38) {
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "你来晚了一点。不，没有任何责备。";
		mes "这边过来。会议很快就要开始了。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "终于被邀请来到这个地方了，冒险家，你真是太棒了。";
		mes "好吧，我们也希望得到同样的待遇。";
		next;
		cutin "ep18_miriam_02.png",2;
		mes "[米丽亚姆]";
		mes "……废话。冒险者，别太在意玛拉姆的话。";
		mes "这是一个重要的场合。马拉姆，别表现得像平常一样。";
		next;
		cutin "ep18_maram_03.png",2;
		emotion ET_HUK, getnpcid(0,"Maram#1");
		mes "[马拉姆]";
		mes "不，米丽亚姆！如果你这么说，那我就好像做错了什么一样。";
		mes "噢，好吧，好吧。我会集中注意力。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "就算是晚了，苏阿德也是个例外，而且实际上距离会议开始还有时间。";
		mes "冒险家，来之前先听听大家的意见怎么样？";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "我认为参加会议肯定会有帮助......";
		mes "在听故事的同时，也请整理一下作为冒险家的观点。";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "当然。那也不错。";
		mes "如果你听够了，请继续告诉我。我们开始会议吧。";
		erasequest 16567;
		setquest 16568;
		setquest 16569;
		setquest 16570;
		setquest 16571;
		ep18_main = 39;
		close3;
	}
	if (ep18_main == 39) {
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "等你听够了，告诉我。我将开始会议。";
		close3;
	}
	if (ep18_main == 40) {
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "大家都听了吗？我们为此也做好了准备。";
		mes "我们稍后开始会议。";
		next;
		mes "[苏阿德]";
		mes "所有人都已经聚集到了自己的座位上。";
		mes "现在，我们开始会议。";
		npctalk "Suad：大家都已经到了自己的座位上。现在，我们开始会议。", "苏阿德#1", bc_self;
		next;
		mes "[苏阿德]";
		mes "今天，我们将讨论未来的应对措施。";
		mes "灰狼村现在的情况不太有利。";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[苏阿德]";
		mes "如今，无数人正在穿越奥兹峡谷，来到这个村庄。";
		mes "相比之下，食品和必需品的供应严重不足。";
		next;
		mes "[苏阿德]";
		mes "我们现在需要决定前进的方向。";
		mes "有话要说的，请畅所欲言。";
		next;
		cutin "",255;
		emotion ET_ANGER, getnpcid(0,"Passionate Youth#Radica");
		mes "[激进的人]";
		mes "让我们向瑞秋移民们展示一下辣味吧。";
		mes "我们必须摧毁他们的圣殿！";
		npctalk "这是正确的！这是正确的！", "激进青年#Radical2", bc_self;
		npctalk "我们必须摧毁一切！", "热血青年#Radic", bc_self;
		next;
		mes "[迷你艾莉]";
		mes "之前听故事的时候就感觉到了，但是那些人特别粗暴。";
		mes "从目前给出的信息很难判断他们的表情到底是粗暴还是本质上粗暴。";
		next;
		mes "[土著老人]";
		mes "但我们到现在为止还不是过着平静的生活吗？";
		mes "突然毁掉寺庙，这是什么鬼话，竟然闹出这样的事！";
		npctalk "有话要说，也有话不该说！", "胆怯的老人#Elder4", bc_self;
		next;
		mes "[激进的人]";
		mes "我要在这巴掌大的土地上躲多久？";
		mes "苏阿德先生不是也提到了与人类相比，资源和土地都短缺吗？";
		next;
		emotion ET_ANGER, getnpcid(0,"Passionate Youth#Radica");
		mes "[激进的人]";
		mes "本来，雷切尔的土地属于我们土著人民。";
		mes "现在是时候收回它了！";
		npctalk "我们需要打破并抓住它！", "热血青年#Radic", bc_self;
		npctalk "没错，我们现在就必须战斗！这是战争！", "热血青年#Radic", bc_self;
		next;
		mes "[土著老人]";
		mes "说起来容易做起来难。在没有任何准备的情况下你要做什么？";
		mes "难道你不知道，一旦流血，就无法挽回吗？";
		npctalk "不去战斗就谈论战争是荒谬的！", "胆怯的老人#Elder3", bc_self;
		next;
		mes "[激进的人]";
		mes "到现在我们还没有流过血吗？";
		mes "他们可能也没有脱落。";
		next;
		mes "[激进的人]";
		mes "但被边缘化的原住民却遭受暴力侵害，忍受了无数年的痛苦，甚至没有得到适当的工资。";
		mes "如果他们流的不是血和泪，还能叫什么？";
		npctalk "我们唯一的选择就是战争！", "激进青年#Radical2", bc_self;
		npctalk "反对的人都是同样的压迫者！", "愤怒的青年#Radical5", bc_self;
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "呃，好像有点过热了。";
		mes "苏阿德，你不觉得你需要冷静一下吗？";
		next;
		cutin "ep18_suad_03.png",2;
		emotion ET_THINK, getnpcid(0,"Suad#1");
		mes "[苏阿德]";
		mes "让我们再看一下。";
		next;
		cutin "",255;
		mes "[迷你艾莉]";
		mes "有点奇怪。";
		mes "甚至将那些持不同意见的人逼入墙角的言辞似乎是一种敌人的策略。";
		next;
		mes "[激进的人]";
		mes "我们已经忍够了！";
		mes "让我们向那些只被女神迷住的人表达我们的愤怒吧！";
		npctalk "让我们表达一下我们的愤怒吧！", "激进青年#Radical2", bc_self;
		next;
		mes "[老人]";
		mes "他们看起来就像是无所畏惧的年轻人，不是吗？";
		mes "一招失误，他们全都死了！为什么他们必须冒这样的风险？";
		next;
		mes "[激进的人]";
		mes "哼，那些躲在这里，只是为了保全自己微不足道的小命的人，是不会明白的。";
		mes "我们已经赌上了生命，准备以血洗血！";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "你做到了吗？我还没做过……他们说你应该用冷水把血迹洗掉，这样才能很好地洗掉。";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[米丽亚姆]";
		mes "现在不是开玩笑的时候，马拉姆。";
		mes "还有苏阿德，如果你不好好组织的话，森林居民的意见就会完全分歧成这个样子。";
		next;
		mes "[米丽亚姆]";
		mes "即使我不喜欢，但现在似乎是时候组织一下了。";
		next;
		cutin "ep18_suad_03.png",2;
		emotion ET_THINK, getnpcid(0,"Suad#1");
		mes "[苏阿德]";
		mes "够了，这不是我们之间可以脸红的地方。这是一个收集意见并前进的空间。";
		mes "咱们停下来吧，这不是我们创造的一个让我们彼此脸红的地方。";
		npctalk "Suad：够了，这不是我们互相脸红的地方。", "苏阿德#1", bc_self;
		next;
		cutin "",255;
		emotion ET_ANGER, getnpcid(0,"Passionate Youth#Radica");
		mes "[激进的人]";
		mes "那么，从现在开始，我们要打破路上的一切吗？";
		mes "当然，苏阿德先生，您不会与那些失败主义者站在一起，是吗？";
		next;
		mes "[老人]";
		mes "看这里。我不会被那些无知又吵闹的孩子们所左右，在那种明亮的蓝色中喋喋不休，对吧？";
		next;
		cutin "ep18_suad_02.png",2;
		mes "[苏阿德]";
		mes "你想离开我吗？";
		mes "如果你相信有人会听你的意见，看来我一直都误解了你。";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[苏阿德]";
		mes "我会听听双方的观点和理由。";
		mes "有一种观点认为无限期地留在这里是不可能的，另一种观点则认为没有准备就贸然行动会导致耻辱。两者都没有错。";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "所以，我们不要想着选边站队，而要试着互相说服。";
		mes "它的意思是解释你应该如何以及为什么要实现你的观点。";
		npctalk "...", "尴尬的老人#Eld", bc_self;
		npctalk "...", "激进青年#Radical2", bc_self;
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "我们已经有能力武装自己了。";
		mes "说我们没有准备好是没有意义的。";
		next;
		cutin "ep18_maram_03.png",2;
		emotion ET_QUESTION, getnpcid(0,"Maram#1");
		mes "[马拉姆]";
		mes "啊？你是说有我不知道的武器购买途径？";
		mes "我还是第一次听说这样的事......";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "你打算准备到什么时候呢！";
		mes "直到我们变老、死去？直到我们的下一代学会完全放弃？";
		next;
		mes "[土著老人]";
		mes "但武装冲突是危险的。如果我们失败了，那将是无法挽回的。";
		mes "叛逆不是一个选择。我们能提供的最大支持就是通过抗议。";
		npctalk "我们也同意抗议。", "胆怯的老人#Elder4", bc_self;
		npctalk "我们反对战争，但如果是抗议……", "胆怯的青年#Neutral1", bc_self;
		next;
		mes "[胆怯的老人]";
		mes "当然。我们不想完全沦为反动分子！";
		mes "如果打上这样的烙印，在这里生活也会变得困难。";
		next;
		mes "[胆怯的老人]";
		mes "我只是想表明我们有如此多的不满。";
		mes "我反对砸碎一切之类的事情。";
		npctalk "是的，没错。让我们尽量保持安静。", "中性青年#Neutral3", bc_self;
		next;
		mes "[胆怯的男人]";
		mes "如果大家能够团结起来，我们也支持抗议。";
		mes "让我们发表一下我们的意见。";
		next;
		mes "[激进的人]";
		mes "即使你抗议，仅仅通过言语进行的非暴力抗议是没有任何效果的！";
		mes "至少，你要占领圣殿，表达你的抗议。";
		next;
		mes "[热情的男人]";
		mes "这是正确的。假装你听到了，大声说话，好吗？";
		mes "如果我们拿走对他们来说最重要的东西，他们就会开始关注我们。";
		next;
		mes "[迷你艾莉]";
		mes "看似和平的意见汇聚，却又重新转向了暴力的方向……";
		next;
		cutin "ep18_suad_01.png",2;
		emotion ET_SURPRISE, getnpcid(0,"Suad#1");
		mes "[苏阿德]";
		mes "停下来，我们收集到足够的意见了吗？";
		mes "我们是否赞成进行抗议、占领圣殿、表明我们的意图？";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "这并不完全符合我的喜好，但是……这似乎是共识点。";
		next;
		mes "[土著老人]";
		mes "它看起来仍然很危险，但我们仍然需要让人们知道我们的意图。";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "然后，为了进一步讨论细节，我们将举行一次额外的会议。";
		mes "你明白这次会议必须保密吧？";
		npctalk "Suad：主要会议到此结束吧。", "苏阿德#1", bc_self;
		next;
		mes "[苏阿德]";
		mes "冒险家、马鲁姆、米丽亚姆。除了少数例外，我们暂时解散吧。";
		mes "手术完成后我们会通知您详细的计划。";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "让我们通过非暴力抗议来展示一些东西吧！";
		mes "不要，不要！";
		next;
		mes "[老人]";
		mes "我们做出正确的判断吗？";
		mes "我认为我们不应该被阿德尔的建议所左右。";
		cloakonnpcself( "Passionate Youth#Radica" );
		cloakonnpcself( "Quiet Youth#Neutral2" );
		cloakonnpcself( "Timid Old Man#Elder3" );
		cloakonnpcself( "Angry Youth#Radical5" );
		next;
		mes "[中性青年]";
		mes "我们真的能做到吗？";
		mes "不过既然比赛已经决定了，我们就尽量配合吧。";
		cloakonnpcself( "Native Old Man#Elder1" );
		cloakonnpcself( "Embarrassed Old Man#Eld" );
		cloakonnpcself( "Hot-blooded Youth#Radic" );
		cloakonnpcself( "Timid Youth#Neutral1" );
		next;
		cutin "ep18_miriam_03.png",2;
		cloakonnpcself( "Passionate Old Man#Weap" );
		cloakonnpcself( "Radical Youth#Radical2" );
		cloakonnpcself( "Neutral Youth#Neutral3" );
		cloakonnpcself( "Timid Old Man#Elder4" );
		mes "[米丽亚姆]";
		mes "嗯，冒险家。我有一件小事要讨论，你能过来一下吗？";
		mes "苏阿德、马拉姆。我请求您在会议开始前也抽出一点时间。";
		erasequest 16572;
		setquest 16573;
		ep18_main = 41;
		close3;
	}
	if (ep18_main == 41) {
		cutin "ep18_suad_03.png",2;
		mes "[苏阿德]";
		mes "这是怎么回事？如果是一个突然的决定，那么今后想要真正执行起来可能会相当困难。";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[米丽亚姆]";
		mes "重要讲话。请给我一点时间。";
		close3;
	}
	if (ep18_main == 42) {
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "那么，我就指望你了。";
		mes "我也会在这里尽我所能。";
		next;
		mes "[苏阿德]";
		mes "尽可能减少冲突并确保抗议活动安全结束……这就是我的意思。";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16567) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16572) == 1" );
	end;
}

// Main Quest: Step 37.
wolfvill,145,146,5	script(CLOAKED)	Passionate Youth#Radica	4_EP18_GW_MAN01,{
	if (ep18_main < 38)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16568) == 1) {
			mes "[激进的人]";
			mes "所有像芙蕾雅神庙这样的神庙都必须被摧毁！";
			mes "让我们看看谁才是这片土地的真正主人！";
			next;
			mes "[激进的人]";
			mes "好的！好的！好的！好的！";
			mes "我们需要变得更强！我们需要武装自己！";
			next;
			mes "[热情的男人]";
			mes "呼！呼！让我们赢吧！我们来战斗吧！";
			npctalk "让我们赢吧！我们来战斗吧！", "激进青年#Radical2", bc_self;
			npctalk "让我们赢吧！我们来战斗吧！", "激进的年轻人#Radic", bc_self;
			npctalk "让我们赢吧！我们来战斗吧！", "兴奋的青春#Radical3", bc_self;
			npctalk "让我们赢吧！我们来战斗吧！", "热血青年#Radic", bc_self;
			npctalk "让我们赢吧！我们来战斗吧！", "愤怒的青年#Radical5", bc_self;
			next;
			mes "[激进的人]";
			mes "是为了保护自己，寻找安身之所！";
			mes "这就是我们现在需要做的！";
			completequest 16568;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
			}
			close3;
		}
	}
	mes "[激进的人]";
	mes "让我们看看谁是这片土地的主人！";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16568) == 1" );
	end;
}

// Main Quest: Step 38.
wolfvill,139,148,5	script(CLOAKED)	Native Old Man#Elder1	4_EP18_GW_OLD01,{
	if (ep18_main < 38)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16569) == 1) {
			mes "[土著老人]";
			mes "我从出生起就没有离开过这个村子。";
			mes "我在这个小镇出生、长大、长大。";
			next;
			mes "[土著老人]";
			mes "虽然一直这样生活到现在，但并不代表就没有出过什么问题……";
			mes "但现在，我真的必须采取严厉措施吗？";
			next;
			mes "[土著老人]";
			mes "难道年轻人因为血液冲到头上而做出一些无意义的事情吗？";
			mes "如果他们因犯了重大错误而面临后果怎么办？";
			next;
			mes "[土著老人]";
			mes "不，我并不完全反对年轻人的想法。";
			mes "但我们不要做太极端的事情。";
			completequest 16569;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
				unittalk getcharid(3), "" + strcharinfo(0) + " : It seems like I've heard enough at this point. Let's go back to Suad.", bc_self;
			}
			close3;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16569) == 1" );
	end;
}

// Main Quest: Step 39.
wolfvill,150,147,1	script(CLOAKED)	Passionate Old Man#Weap	4_M_MIDDLE,{
	if (ep18_main < 38)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16570) == 1) {
			mes "[热情的男人]";
			mes "哦，天哪！你不是冒险家吗！";
			mes "比赛前你一定很紧张吧？在这里喝一杯放松一下。";
			next;
			select( "我会拥有你所拥有的。", "那么，自下而上！" );
			mes "[热情的男人]";
			mes "嘿嘿，那个苏阿德的人还蛮特别的。相当细致。";
			mes "真的有必要这么僵化吗？";
			next;
			mes "[热情的男人]";
			mes "不要因为这是一个正式的场合而太紧张。说话舒服就好。";
			mes "如果可以的话，冒险者支持我们的意见就更好了！";
			next;
			mes "[热情的男人]";
			mes "您认为我们的意见是什么？当然，这是战争。";
			mes "看看这些武器。我们已经全副武装，做好了准备！";
			next;
			mes "[热情的男人]";
			mes "只要去找瑞秋，扫除一切，无论是女神还是什么。";
			mes "这表明我们到现在为止忍受了多少，活了多少！";
			completequest 16570;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
			}
			close3;
		}
	}
	mes "[热情的男人]";
	mes "这是一场比赛，一场比赛。一个大事件！";
	mes "那么，我们喝一杯吧！干杯，干杯！";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16570) == 1" );
	end;
}

// Main Quest: Step 40.
wolfvill,152,145,1	script(CLOAKED)	Timid Youth#Neutral1	4_M_RACHMAN1,{
	if (ep18_main < 39)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16571) == 1) {
			mes "[胆怯的男人]";
			mes "哦，我们的意见？";
			mes "我们还年轻，可以说这样的话吗？";
			next;
			mes "[胆怯的男人]";
			mes "好吧，那边那些尖叫得那么大声的家伙毕竟还年轻。";
			mes "我不知道他们信仰什么，为什么要引起这么大的骚乱……";
			next;
			mes "[胆怯的男人]";
			mes "我不认为我们真的相信我们可以击败并打破所有雷切尔移民。";
			mes "仅数字上的差异就如此显着。";
			next;
			mes "[胆怯的男人]";
			mes "我们甚至没有接受过特种部队训练，不是吗？";
			mes "但也不知道是谁先开始的，突然间那些家伙就这么多了，这让我很不安。";
			completequest 16571;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
			}
			close3;
		}
	}
	mes "[胆怯的男人]";
	mes "我们还年轻，可以这么大声地表达自己的意见吗？";
	mes "虽然是比赛，但我想大人们的声音不会很大吧？";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16571) == 1" );
	end;
}

wolfvill,149,152,3	script(CLOAKED)	Maram#1	4_EP18_MARAM,{
	if (ep18_main == 38) {
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "呼呼呼，你终于到了这个地方。";
		mes "你相信我的判断，但你比我想象的更令人印象深刻，冒险者。";
		next;
		mes "[马拉姆]";
		mes "希望大家也积极参加这次会议。";
		mes "你知道，苏阿德可能有点固执。我们需要有人来软化一下~";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "我指望冒险家。我仍然相信我的直觉，你知道。";
		mes "我相信我的愿景和言语。";
		close3;
	}
	if (ep18_main == 39) {
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "嘘！比赛马上就要开始了。";
		mes "如果我发出声音，我会被 Miriam 和 Suad 骂，你知道吗？";
		close3;
	}
	if (ep18_main == 40) {
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "嘘！比赛马上就要开始了。";
		mes "如果我吵闹的话，会不会被 Miriam 和 Suad 骂呢？";
		next;
		mes "[马拉姆]";
		mes "那么，冒险家，请和我们一起听听苏阿德的故事吧。";
		mes "当然，还有其他人的故事。";
		close3;
	}
	end;
}

// Main Quest: Step 42.
wolfvill,148,153,3	script(CLOAKED)	Miriam#1	4_EP18_MIRIAM,{
	if (checkweight(1000405,40) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		mes "[迷你艾莉]";
		mes "把它从包里拿出来。请把它戴在头顶上。";
		close;
	}
	if (ep18_main == 38) {
		cutin "ep18_miriam_01.png",2;
		mes "[米丽亚姆]";
		mes "啊，我就知道你终究会来参加比赛。";
		mes "没有人反对冒险者的到来。";
		next;
		cutin "ep18_miriam_02.png",2;
		mes "[米丽亚姆]";
		mes "你在这里一定很辛苦吧？";
		mes "你真是令人印象深刻。";
		close3;
	}
	if (ep18_main == 39) {
		cutin "ep18_miriam_01.png",2;
		mes "[米丽亚姆]";
		mes "嗯，听听大家的意见了吗？";
		mes "它怎么样？冒险者，你下定决心了吗？";
		close3;
	}
	if (ep18_main == 40) {
		cutin "ep18_miriam_01.png",2;
		mes "[米丽亚姆]";
		mes "那么，你听取过人们的意见吗？";
		mes "你觉得怎么样？冒险者，你下定决心了吗？";
		next;
		mes "[米丽亚姆]";
		mes "既然如此，那就等待会议开始吧。";
		mes "苏阿德将致开幕词。";
		close3;
	}
	if (ep18_main == 41) {
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "这是怎么回事？准备抗议似乎真是一件令人头疼的事。";
		mes "啊，说真的，因为我是一个为了谋生而工作的人。";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[米丽亚姆]";
		mes "不是开玩笑。看看那些人。是不是很奇怪？那些早些时候喊着要武装起来的人。";
		mes "仔细看看他们的武装状况。这不是为了打猎。";
		next;
		cutin "",255;
		mes "[迷你艾莉]";
		mes "我也分析过。这些武器被归类为杀伤性武器，这意味着它们用于战争。";
		mes "即使你尝试用它们狩猎，猎物也会被撕裂，使它们毫无用处。";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[苏阿德]";
		mes "发生了什么？";
		mes "想要获得这样的武器并不容易。";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "哦……我可以很自信的说，这样的东西市面上是不容易买到的。";
		mes "我想知道他们从哪里来。";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[米丽亚姆]";
		mes "有一个猜测，但不确定。";
		mes "那么，如果我们尝试识别这些人并找出他们来自哪里呢？";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[苏阿德]";
		mes "我懂了。无论如何，抗议活动需要一定程度的武器。";
		mes "如果我们提供一些诱饵来换取信息怎么办？";
		next;
		cutin "ep18_suad_02.png",2;
		mes "[苏阿德]";
		mes "而且我并不一定反对通过实际交易来武装自己。";
		mes "我们之所以至今受到压迫，是因为我们缺乏力量。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "嘿，领导者。充其量，我们把事情从斗争简化为抗议，但在战争中，如果我们受到武器的诱惑，我们该怎么办？";
		mes "我们只要找到源头，就找到源头。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "苏阿德在这里带头看起来不太好。";
		mes "冒险者和米丽亚姆带头调查怎么样？";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[米丽亚姆]";
		mes "我有一些事情想要去调查另一边，而不是直接面对那些人。";
		mes "那么，直接联系方式就交给你和冒险家玛拉吧。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "好吧。冒险者，我们去上班吧？";
		mes "为了安全起见，假装对交易感兴趣，接近。";
		mes "有了这张地图，应该不会太困难。";
		erasequest 16573;
		setquest 16574;
		ep18_main = 42;
		getitem 1000405,40;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#1" );
		cloakonnpcself( "Maram#1" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16573) == 1" );
	end;
}

// Main Quest: Step 43.
wolfvill,143,145,7	script(CLOAKED)	Radical Young Man#Radic	4_M_RASWORD,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		mes "[迷你艾莉]";
		mes "把它从包里拿出来。请把它戴在头顶上。";
		close;
	}
	if (ep18_main == 42) {
		cloakonnpcself( "Suad#1" );
		cloakoffnpcself( "Maram#1_1" );
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "你好。";
		mes "我有件事想请教一下。可以吗？";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "这是怎么回事？我真的没什么可说的。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "不，武器装备非常酷。";
		mes "好像在其他地方很难找到，你从哪里得到的？";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "这？我买它是因为有人卖得很便宜！";
		mes "为了保护自己，为了向别人炫耀……我穿成这样谁还敢惹我？";
		next;
		mes "[精力充沛的男人]";
		mes "没错，没错！即使在抗议期间，我们也需要这种级别的保护才能确保安全！";
		mes "你认为他们会害怕地畏缩并独自向寺庙低头吗？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "你能提供一些关于谁在这里卖的信息吗？";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "呃...我们不能光穿它。毕竟，我们确实付出了一些努力来获得它。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "但他们说那里卖得很便宜，不是吗？";
		mes "看起来他们正在努力清理库存。既然如此，我们到底应该按照我们所知道的去做，还是按照寺庙所知道的去做呢~";
		next;
		cutin "",255;
		mes "[精力充沛的男人]";
		mes "哈，好吧。这么便宜的武器，要是落入女神拥有者的手里，那可就不太好了吧？";
		mes "就说吧。无论如何，如果我们要去抗议，我们就必须武装起来。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "你想得好。正如所料，你聪明吗？";
		next;
		cutin "",255;
		mes "[激进的人]";
		mes "我明白……但是我们不能随便见面。";
		mes "首先，去找瑞秋并会见大胡子杰克。";
		next;
		npctalk "马拉姆：大胡子杰克？", "我喜欢它#1_1", bc_self;
		mes "[激进的人]";
		mes "如果你说你是来买一朵香蒲公英的，他们就会从那里引导你。";
		mes "我不是一个无视所谓安全的人。我也不是傻子。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "谁是傻子？到目前为止我所说的只是我很聪明。";
		mes "感谢您提供的宝贵信息！";
		next;
		cutin "",255;
		mes "[迷你艾莉]";
		mes "你要回到雷切尔身边。让我们重置目标坐标。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "那么，冒险者。看来我们要像预期的那样，绕一些弯路才能找到核心。";
		mes "我们一起去<NAVI>[Rachel]<INFO>rachel,75,44,0,101,0</INFO></NAVI>！";
		erasequest 16574;
		setquest 16575;
		ep18_main = 43;
		cutin "",255;
		close2;
		cutin "",255;
		cloakonnpcself();
		cloakonnpcself( "Excited Youth#Radical3" );
		cloakonnpcself( "Maram#1_1" );
		end;
	}
	mes "[激进的人]";
	mes "这样武装起来不就安全了吗？";
	mes "就连蕾切尔这样有女神综合症的家伙，也会自己畏缩低头！";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16574) == 1" );
	end;
}

wolfvill,148,145,3	duplicate(dummy_cloaked_npc)	Maram#1_1	4_EP18_MARAM

wolfvill,140,150,5	script(CLOAKED)	Embarrassed Old Man#Eld	4_EP18_GW_MIDDLE01,{
	npctalk "不对啊，为什么那些年轻人会有这样的行为呢？", "尴尬的老人#Eld", bc_self;
	end;
}

wolfvill,138,145,7	script(CLOAKED)	Timid Old Man#Elder3	4_EP18_GW_MIDDLE02,{
	npctalk "好像有点不对劲啊，啧啧。", "胆怯的老人#Elder3", bc_self;
	end;
}

wolfvill,141,146,7	script(CLOAKED)	Timid Old Man#Elder4	4_M_DST_GRAND,{
	npctalk "如果您也能听听我们的意见那就太好了...", "胆怯的老人#Elder4", bc_self;
	end;
}

wolfvill,154,146,1	script(CLOAKED)	Quiet Youth#Neutral2	4_EP18_GW_MAN02,{
	npctalk "...", "安静的青春#Neutral2", bc_self;
	end;
}

wolfvill,151,150,1	script(CLOAKED)	Neutral Youth#Neutral3	4_EP18_GW_MAN01,{
	npctalk "我不同意任何意见。大家都太天真了。", "中性青年#Neutral3", bc_self;
	end;
}

// Main Quest: Step 44.
rachel,72,42,3	duplicate(dummy_cloaked_npc)	Maram#1_2	4_EP18_MARAM

rachel,75,44,3	script	Bearded Jack#armsman_rachel	4_M_MIDDLE1,{
	if (ep18_main == 43) {
		cloakoffnpcself( "Maram#1_2" );
		mes "[迷你艾莉]";
		mes "你已经到了。 “大胡子杰克”的生意是一家五金店。";
		next;
		mes "[大胡子杰克]";
		mes "欢迎。我怎么帮你？";
		next;
		mes "[大胡子杰克]";
		mes "说到菜刀和锅具，没有什么地方能比得上我们位于雷切尔的商店。";
		mes "花点时间环顾四周。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "呃，我们来这里是为了寻找一些不同的东西。";
		mes "那是什么，冒险家？";
		next;
		cutin "",255;
		switch( select( "臭袜子", "臭蒲公英", "香味袜子", "香味蒲公英" ) ) {
		case 1:
			mes "[迷你艾莉]";
			mes "嗯，我不认为是这样。";
			next;
			mes "[大胡子杰克]";
			mes "为什么会在我们店里发现这么脏的东西？";
			close2;
			cloakonnpcself( "Maram#1_2" );
			end;
		case 2:
			mes "[大胡子杰克]";
			mes "好吧，看看谁终于来了。";
			mes "你是来看看蒲公英芳香四溢的地方吗？";
			next;
			mes "[大胡子杰克]";
			mes "前往静脉。你会在那里找到我。";
			mes "在矿脉村的某个角落里，有一个鲜为人知的武器商人。";
			next;
			mes "[大胡子杰克]";
			mes "如果有人问谁推荐你，当然就说是杰克推荐的。";
			mes "他们可能只是做短暂的生意，这样他们就可以快速逃跑。所以如果你来得太晚，他们就不会处理你";
			next;
			mes "[大胡子杰克]";
			mes "嗯，连接上<NAVI>[武器店]<INFO>veins,293,282,0,101,0</INFO></NAVI>就不再属于我的管辖范围了。";
			mes "那么，尽你最大的努力吧。";
			erasequest 16575;
			setquest 16576;
			ep18_main = 44;
			close2;
			cloakonnpcself( "Maram#1_2" );
			end;
		case 3:
			mes "[迷你艾莉]";
			mes "嗯，我不认为是这样。";
			next;
			mes "[大胡子杰克]";
			mes "不，我们的商店是五金店，不是洗衣店。";
			close2;
			cloakonnpcself( "Maram#1_2" );
			end;
		case 4:
			end;
		}
	}
	if (ep18_main == 44) {
		mes "[大胡子杰克]";
		mes "嗯，<NAVI>[武器商人]<INFO>veins,293,282,0,101,0</INFO></NAVI>自从你链接以来就不在我的管辖范围内。";
		mes "然后尽力而为。";
		cloakonnpcself( "Maram#1_2" );
		close;
	}
	mes "[大胡子杰克]";
	mes "欢迎。这是“大胡子杰克”五金店。";
	mes "我们出售做工精良的厨刀和锅具。";
	next;
	mes "[大胡子杰克]";
	mes "我的名字？当然是大胡子杰克。";
	mes "这家店都是我的了！";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16575) == 1" );
	end;
}

// Main Quest: Step 45.
veins,289,281,7	duplicate(dummy_cloaked_npc)	Maram#1_3	4_EP18_MARAM

veins,293,282,3	script	Dandelion#weapons_bains	4_M_DESERT,{
	if (ep18_main == 44) {
		mes "[马拉姆]";
		mes "你好~";
		mes "你在做生意吗？";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "我们关门了。";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "别这样。我来这里是因为杰克介绍我，说这里有臭蒲公英。";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "是谁，蒲公英，是谁！";
		mes "这个混蛋想出了这么奇怪的密码！";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "啊，你的名字是……所以，是蒲公英。";
		mes "对于与安全相关的事情来说，这很简单，不是吗？";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "无论如何，这是怎么回事！";
		mes "如果你是来买武器的，就毫不犹豫地拿走你需要的东西。";
		next;
		select( "我是来买武器的..." );
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "正确的？冒险者所说的是正确的。";
		mes "与其说是来买一两件武器，倒不如说是批量购买吧？";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "批量采购？您打算购买多少钱？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "嗯，大概就这么多吧？";
		mes "这个金额在这家商店可以接受吗？";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "咕噜咕噜，这么多？你是在建议战争吗？";
		mes "呃，好吧，如果你给我一点时间，似乎是有可能的。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "我们应该做什么？我们没有太多时间。";
		mes "我希望我们能尽快找到它。";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "打电话给你的日程安排。我会尽力尽快适应。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "这也很好，但是让我们直接与供应商联系怎么样？";
		mes "我们将承担中介费用，不会造成任何不便。";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "嘿！谁在做生意的时候暴露背景！";
		mes "够了，回去吧，回去吧！";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[马拉姆]";
		mes "嘿，你在逗谁呢？我已经知道一切了。以如此优惠的价格出售，这只是一种华而不实的商业策略，对吗？";
		mes "无论如何，我们不会建立长期的业务关系，不是吗？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "所以，我只是要求你提供一些信息。";
		mes "不管是我们情况紧急，还是那家伙免掉中介费，都行。这不是双赢吗？";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "嗯...好吧。但绝对不能泄露。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "这么明显的话。";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "这是托尔火山。在里面深处，有一个秘密基地，武器就来自那里。";
		mes "我告诉你是因为一旦他们的库存耗尽，交易无论如何都会被终止。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "从你说话的语气来看，你们似乎很快就要断绝关系了，是吗？";
		next;
		cutin "",255;
		mes "[蒲公英]";
		mes "孩子，别再试图到处漂浮了。剩下的你自己找出来吧。";
		mes "如果你得到了你想要的东西，支付佣金然后离开。";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "雷神火山的秘密基地……这味道很可疑。";
		mes "我有预感这可能是我们的最终目的地，你不觉得吗？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "我会在<NAVI>[雷神火山]<INFO>thor_v01,169,169,0,101,0</INFO></NAVI>一定要做好准备！";
		mes "不要直接进入军事基地；相反，从那里往3点钟方向过来，我会等你。";
		erasequest 16576;
		setquest 16577;
		ep18_main = 45;
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#1_3" );
		end;
	}
	if (ep18_main == 45) {
		cloakoffnpcself( "Maram#1_3" );
		mes "[蒲公英]";
		mes "孩子，别再试图到处漂浮了。剩下的你自己找出来吧。";
		mes "如果你得到了你想要的东西，支付佣金然后离开。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "我们会在<NAVI>[雷神火山]<INFO>thor_v01,169,169,0,101,0</INFO></NAVI>一定要做好准备！";
		mes "不要直接进入军事基地；相反，从那里往3点钟方向过来，我会等你。";
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#1_3" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16576) == 1" );
	end;
}

// Main Quest: Step 46.
thor_v01,169,169,3	script	Maram#Armybase-Secret passage	4_EP18_MARAM,{
	if (ep18_main == 45 || ep18_main == 46) {
		mes "[马拉姆]";
		mes "在这里！跟我来！";
		mes "这里有一个<NAVI>[快捷方式]<INFO>que_thr,133,53,0,101,0</INFO></NAVI>，它会带你四处走动，但会让你看不见。";
		close2;
		warp "que_thr",181,53;
		end;
	}
	end;
}

// Main Quest: Step 47. (entrance npc is a part of the instance Thor Gunsu Base)
// Main Quest: Step 48-50 inside the instance 1@tcamp.

// Main Quest: Step 51.
wolfvill,140,112,0	duplicate(#contest1)	#sms01	HIDDEN_WARP_NPC,5,5

wolfvill,142,109,1	duplicate(dummy_cloaked_npc)	Miriam#sms01	4_EP18_MIRIAM
wolfvill,143,110,1	duplicate(dummy_cloaked_npc)	Maram#sms01	4_EP18_MARAM

wolfvill,140,112,5	script(CLOAKED)	Suad#sms01	4_EP18_SUAD,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		npctalk "…………", "苏阿德#sms01", bc_self;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
		end;
	}
	if (ep18_main == 47) {
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "冒险家？怎么已经回来了？你不是和米丽亚姆一起去调查武器的来历吗？";
		next;
		select( "我发现了，但根源是……" );
		cutin "",255;
		mes "[迷你艾莉]";
		mes "这还不是全部。更大的问题是，本应处理掉的武器弹药却在没有任何稳定保证的情况下流入。";
		mes "分析结果表明，储存火药和非管理武器的风险约为9.72%。";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[苏阿德]";
		mes "我预料到了，但情况比我想象的还要糟糕。我只关心起源。我也不能保证武器的稳定性。都是老武器了...";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "虽然我们确实需要武器，但我们不能使用来源可疑的物品。如果我们开始追查对方泄露的武器并将其作为一个问题，事情可能会升级为糟糕的情况。";
		next;
		mes "[苏阿德]";
		mes "然而，寻找可靠的供应商并谈判交易也需要时间，因此我们需要做出谨慎的决定。";
		next;
		mes "[苏阿德]";
		mes "现在，我们先取回所有武器，并在玛拉姆和米丽亚姆回来后与他们讨论未来的计划。";
		mes "米里亚姆和马拉姆不是一起回来的吗？";
		next;
		select( "揭露武器走私..." );
		mes "[苏阿德]";
		mes "是的，看来我们现在能做的就是等待。";
		next;
		cloakoffnpcself( "Miriam#sms01" );
		cloakoffnpcself( "Maram#sms01" );
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "苏阿德！！！苏阿德，苏阿德！！！有大事发生了！大麻烦大麻烦！！！苏阿德！听着，听我说，苏阿德！！！";
		next;
		cutin "ep18_suad_04.png",0;
		mes "[苏阿德]";
		mes "马拉姆、米里亚姆。这是怎么回事？";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "我们都~~要这样死掉了！！";
		next;
		cutin "ep18_suad_04.png",0;
		mes "[苏阿德]";
		mes "...什么？您能更详细地解释一下吗？为什么？";
		next;
		cutin "ep18_miriam_03.png",1;
		mes "[米丽亚姆]";
		mes "我会解释一下。马拉姆，你为什么不坐到那边冷静一下呢？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "真的吗？我有点吃惊……我的心砰砰直跳。";
		npctalk "你...？", "米里亚姆#sms01", bc_self;
		npctalk "你不知道吗？你真的不知道。", "我喜欢它#sms01", bc_self;
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "你还记得我们之前武装的那些人吗？";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "是雷神火山的武器吧？我是从冒险者那里听来的。我们最终是从雷切尔那边得知的吗？";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "事实上，我听说这群人袭击了移民总部。他们拿走了总部的一切。";
		next;
		cutin "ep18_suad_04.png",0;
		mes "[苏阿德]";
		mes "什么？那是什么时候发生的？";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "虽然时间不长，但雷切尔那边已经知道了这件事。";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[苏阿德]";
		mes "哦不...到底为什么...？";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "事情还没有结束。他们在那里声称，自从我们武装起来并发动袭击以来，我们就是叛乱分子。主张采取强硬应对措施的声音似乎正在增强。";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[苏阿德]";
		mes "这是最糟糕的。如果他们先发动攻击的话……不，不是这样的。我们应该先与他们会面。";
		next;
		cutin "ep18_miriam_03.png",1;
		mes "[米丽亚姆]";
		mes "你打算如何做到这一点？";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[苏阿德]";
		mes "我们需要让他们对他们突然采取的使我们处于不利地位的行为负责。我们需要评估规模并制定应对策略。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "我们一起去吧。我知道它在哪里！ <NAVI>[&#65533;&#65533;&#65533;]<INFO>wolfvill,131,257,0,101,0</INFO></NAVI>冒险，跟我们来吧。我有预感，我们可能需要第三方证人！";
		erasequest 16580;
		setquest 17517;
		ep18_main = 48;
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#sms01" );
		cloakonnpcself( "Miriam#sms01" );
		cloakonnpcself( "Suad#sms01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16580) == 1" );
	end;
}

// Main Quest: Step 52.
wolfvill,132,256,1	duplicate(dummy_npc)	Goods#sms01	4_WOODBOX
wolfvill,131,258,1	duplicate(dummy_npc)	Goods#sms02	4_WOODBOX
wolfvill,132,258,1	duplicate(dummy_npc)	Goods#sms03	4_WOODBOX

wolfvill,131,257,1	script	Goods#sms04	4_WOODBOX,{
	if (ep18_main == 48) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Suad#sms02" );
		cloakoffnpcself( "Maram#sms02" );
		cloakoffnpcself( "Miriam#sms02" );
		npctalk "这是掠夺来的货物吗？", "苏阿德#sms02", bc_self;
		sleep2 1000;
		npctalk "哦……他们真的来了，掠夺来的物品。", "我喜欢它#sms02", bc_self;
		npctalk "啊...", "米里亚姆#sms02", bc_self;
		sleep2 2000;
		cloakoffnpcself( "Lamacus#sms01" );
		cloakoffnpcself( "Kun#sms01" );
		cloakoffnpcself( "Yopi#sms01" );
		npctalk "谁敢乱动别人的财物？", "拉马库斯#sms01", bc_self;
		npctalk "盗贼高手出现了吗？", "什么时候#sms01", bc_self;
		npctalk "这很大胆。别人的东西！！！", "约皮#sms01", bc_self;
		sleep2 2000;
		emotion ET_QUESTION, getnpcid(0,"Lamacus#sms01");
		setpcblock PCBLOCK_NPC, false;

		mes "[拉马库斯]";
		mes "哦？苏阿德！米里亚姆和马拉姆也在这里。";
		next;
		mes "[仅]";
		mes "大家这是怎么回事？如果是关于武器的话，我已经说过了。";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "除此之外还有什么需要说的吗？";
		next;
		cutin "",255;
		mes "[尤皮]";
		mes "哎~好可怕~怎么突然呢？还把陌生人带进来。有什么好害怕的吗？";
		npctalk "那人是谁？", "什么时候#sms01", bc_self;
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "这是什么废话？我更怕你们！怎样才能攻击上层呢？";
		next;
		cutin "",255;
		mes "[拉马库斯]";
		mes "哦，那个？你不必夸奖我。";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "真的~啊？";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "我们来听听你袭击无辜上层的原因。";
		next;
		cutin "",255;
		mes "[仅]";
		mes "这是关于什么的？你们都是为了一件小事聚集到这里来的？";
		next;
		cutin "ep18_suad_02.png",1;
		mes "[苏阿德]";
		mes "有什么琐碎的事吗？因为你的所作所为，我们被贴上了叛逆者的标签。你给了他们攻击我们的借口！";
		next;
		cutin "",255;
		mes "[尤皮]";
		mes "如果他们攻击我们，我们就反击。有什么可担心的呢？我们现在也有武器了，你知道吗？";
		npctalk "有什么问题吗？", "什么时候#sms01", bc_self;
		npctalk "说话很容易吧？", "我喜欢它#sms02", bc_self;
		next;
		mes "[尤皮]";
		mes "你知道我们抢了谁吗？如果你知道的话，你会感谢我们的。这不是一个无辜的上层人士，你知道吗？";
		npctalk "你也会后悔这样对待我们的。", "拉马库斯#sms01", bc_self;
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "你知道不顾无辜地攻击上层阶级叫什么吗？这叫抢劫。";
		next;
		cutin "",255;
		mes "[仅]";
		mes "不，这太过分了。抢劫？我们的目标是艾哈迈德的上层。";
		next;
		emotion ET_SURPRISE, getnpcid(0,"Suad#sms02");
		emotion ET_HUK, getnpcid(0,"Miriam#sms02");
		emotion ET_HUK, getnpcid(0,"Maram#sms02");
		emotion ET_QUESTION, playerattached();
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "如果是艾哈迈德的话...";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "这不是苏德的吗？";
		npctalk "哦...毕竟它就在那里。", "我喜欢它#sms02", bc_self;
		next;
		cutin "",255;
		mes "[仅]";
		mes "是的！他们把我们当垃圾对待，甚至不顾自己的儿子！";
		next;
		mes "[拉马库斯]";
		mes "他们正在把我们这样的人吸干！";
		npctalk "我以为是蚊子……？", "约皮#sms01", bc_self;
		next;
		mes "[尤皮]";
		mes "我们向苏阿德报仇并获得了必要的物资，这不是一件好事吗？";
		npctalk "我们需要的东西太多了！", "拉马库斯#sms01", bc_self;
		next;
		mes "[仅]";
		mes "确切地！！因为你的父亲，你受了很多苦。你是因为他才来到这里的。";
		next;
		mes "[仅]";
		mes "就因为你是土著，他不仅不承认你是个能干的儿子，还对你进行虐待。事实上，他可能从未承认你是他的儿子。";
		next;
		mes "[尤皮]";
		mes "这里还有人不知道Suad的故事吗？";
		npctalk "不，没有。仔细想一想。我们为你报了仇。", "什么时候#sms01", bc_self;
		next;
		mes "[拉马库斯]";
		mes "你心里一直有这样的想象吧？你不值得这样的待遇。你想向你的继父报仇。";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "说点什么吧，苏阿德。";
		next;
		cutin "ep18_suad_03.png",1;
		mes "[苏阿德]";
		mes "……唉……好吧，我明白了……只是……下次小心点吧。我明白你为什么这么做，但我们最终可能会陷入更大的麻烦......";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "苏阿德？就这样结束了吗？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "我可能对这种事了解不多，但以我有限的视角来看，以后不会还是这样吧？难道我们不应该武装自己以防万一吗？";
		next;
		cutin "ep18_suad_03.png",1;
		mes "[苏阿德]";
		mes "考虑到村里的物资短缺，确实如此。贸易变得越来越困难。";
		next;
		mes "[苏阿德]";
		mes "正如我之前提到的，武装是必要的。我们需要寻找新的资源，同时保留我们已经获得的资源。所以才想跟大家讨论一下";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "苏阿德？告诉我们。你完全不知道这个决定吗？你能诚实地说你没有参与这件事吗？";
		next;
		cutin "ep18_suad_03.png",1;
		mes "[苏阿德]";
		mes "等等，等等。我需要一些时间来整理思绪。";
		erasequest 17517;
		setquest 17518;
		ep18_main = 49;
		close3;
	}
	if (ep18_main == 49) {
		cloakoffnpcself( "Suad#sms02" );
		cloakoffnpcself( "Maram#sms02" );
		cloakoffnpcself( "Miriam#sms02" );
		cloakoffnpcself( "Lamacus#sms01" );
		cloakoffnpcself( "Kun#sms01" );
		cloakoffnpcself( "Yopi#sms01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17517) == 1" );
	end;
}

// Main Quest: Step 53.
wolfvill,131,252,3	script(CLOAKED)	Lamacus#sms01	EP18_ARMED_VILLAGER01,{
	if (checkweight(1000405,30) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main == 49) {
		mes "[仅]";
		mes "不！但你知道，当我想一想，我们做错了什么？他们为什么要阻止我们？";
		npctalk "我也不知道。我们没有帮助他们吗？", "约皮#sms01", bc_self;
		next;
		mes "[拉马库斯]";
		mes "我们并不是想把一切都占为己有，只是希望每个人都过得好。";
		next;
		mes "[尤皮]";
		mes "正确的？我也是这么想的。也许如果我们更加努力、更加积极地工作，他们就会改变主意？";
		next;
		select( "我们可以保持原样吗...？" );
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "不，我们不能。当然不是。不考虑未来就鲁莽行事，这是成年人的行为吗？";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "苏阿德，请说出来。";
		next;
		cutin "",255;
		cloakoffnpcself( "Citizen#sms01" );
		cloakoffnpcself( "Citizen#sms02" );
		cloakoffnpcself( "Citizen#sms03" );
		mes "[公民]";
		mes "大家都在这里。你提到了对上层阶级的攻击？这是怎么回事？";
		next;
		mes "[公民]";
		mes "干得好。有时你只需要搅动事情。难道我们就应该无能为力，什么都不做吗？他们一直看不起我们，是时候停止被忽视了。";
		npctalk "我们需要证明我们也可以掀起一些波澜。", "公民#sms02", bc_self;
		next;
		mes "[尤皮]";
		mes "但现在苏阿德说我们不应该这样做。";
		next;
		mes "[公民]";
		mes "为什么？他为什么说不要这样做？";
		next;
		mes "[仅]";
		mes "好吧，他说我们的行为可能会让我们陷入更危险的境地，但我太困惑了，无法理解他在说什么";
		next;
		mes "[拉马库斯]";
		mes "他们会因为我们突袭了上层队伍而将我们赶出瑞秋吗？他们要攻击我们？";
		npctalk "他们追赶我们是什么意思！？", "公民#sms01", bc_self;
		npctalk "他们要攻击我们？？", "公民#sms03", bc_self;
		npctalk "这是真的吗？", "公民#sms02", bc_self;
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "我懂了。我们的处境已经变得极其不利。目前还没有什么大动作，但是舆论对我们并不有利。";
		next;
		cutin "",255;
		mes "[拉马库斯]";
		mes "这难道不是我们更应该发出声音的时候吗？";
		npctalk "我们也是人类。就像他们一样。", "公民#sms02", bc_self;
		npctalk "现在我们也有武器了。", "什么时候#sms01", bc_self;
		next;
		mes "[公民]";
		mes "让我们向他们展示我们是由什么组成的！让我们大声疾呼吧！！";
		npctalk "是的！！我们开始做吧！！！", "公民#sms02", bc_self;
		npctalk "现在轮到我们发声了！", "公民#sms01", bc_self;
		npctalk "这是正确的！现在是我们这样做的时候了！", "拉马库斯#sms01", bc_self;
		npctalk "我们还要这样生活多久？", "什么时候#sms01", bc_self;
		npctalk "这是正确的！！！", "约皮#sms01", bc_self;
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "冷静一下。";
		next;
		cutin "",255;
		mes "[公民]";
		mes "苏阿德！我们还要这样生活多久？我觉得自己受到了不公平的对待，我再也受不了了！";
		npctalk "为什么我们要像逃亡者一样躲藏起来？", "公民#sms03", bc_self;
		npctalk "我们不能永远这样生活。", "公民#sms01", bc_self;
		next;
		mes "[仅]";
		mes "苏阿德，你太谨慎了。我们自己去吧。就像那些袭击上层的人一样。什么都不会发生。";
		next;
		mes "[公民]";
		mes "幸运的是，我们这里有一个冒险家。你怎么认为？你一定见过很多旅行吧？";
		next;
		select( "我..." );
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "气氛越来越紧张……";
		next;
		select( "事情似乎正在发生奇怪的转变。" );
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "人们似乎正在挣脱苏阿德的控制，如果再这样下去……";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "砰!帮助！谁来救救我吧！";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "是的。我们开始做吧。反对。我们不能永远等待。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "什么？像这样？现在？没有任何准备？";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "我们又不是完全没有准备。我们已经逐渐穿过雷切尔，躲藏起来，等到时机成熟时，我们就可以从圣殿加入。";
		next;
		cutin "",255;
		mes "[拉马库斯]";
		mes "今晚日落后似乎是个好时机。警卫会换班，所以安全措施会很松懈。";
		next;
		mes "[公民]";
		mes "伟大的！！！我来召集人！！";
		next;
		cloakonnpcself( "Citizen#sms01" );
		cloakonnpcself( "Citizen#sms02" );
		cloakonnpcself( "Citizen#sms03" );
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "马兰，你留在这里，为任何可能发生的情况做好准备。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "知道了。";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "你们，把所有这些武器都抛在身后。";
		next;
		cutin "",255;
		mes "[尤皮]";
		mes "哦，为什么！！我们也要保护自己！！";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "我们去那里不是为了煽动武装冲突。如果我们携带武器的时候出了什么不幸的事情，我们就真的会被贴上叛逆的标签了。";
		next;
		cutin "",255;
		mes "[仅]";
		mes "啊，好吧！无论如何，苏阿德似乎很担心。";
		next;
		mes "[拉马库斯]";
		mes "为什么要担心尚未发生的事情呢？";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[苏阿德]";
		mes "好吧，既然事情已经解决了，那我们就赶紧行动吧。我们在<NAVI>[寺庙前见面]<INFO>rachel,169,245,0,101,0</INFO></NAVI>";
		erasequest 17518;
		setquest 17519;
		ep18_main = 50;
		getitem 1000405,30;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Suad#sms02" );
		cloakonnpcself( "Maram#sms02" );
		cloakonnpcself( "Miriam#sms02" );
		end;
	}
	if (ep18_main == 50) {
		mes "[拉马库斯]";
		mes "你在干什么？我们约定在<NAVI>[寺庙前]<INFO>rachel,169,245,0,101,0</INFO></NAVI>见面。";
		close2;
		cloakonnpcself( "Lamacus#sms01" );
		cloakonnpcself( "Kun#sms01" );
		cloakonnpcself( "Yopi#sms01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17518) == 1" );
	end;
}

wolfvill,129,256,3	duplicate(dummy_cloaked_npc)	Kun#sms01	EP18_ARMED_VILLAGER02
wolfvill,126,255,5	duplicate(dummy_cloaked_npc)	Yopi#sms01	EP18_ARMED_VILLAGER03

wolfvill,129,251,1	duplicate(dummy_cloaked_npc)	Citizen#sms01	4_M_RACHMAN1
wolfvill,129,248,7	duplicate(dummy_cloaked_npc)	Citizen#sms02	4_M_MIDDLE1
wolfvill,132,250,1	duplicate(dummy_cloaked_npc)	Citizen#sms03	4_EP18_GW_MAN01

wolfvill,126,252,7	duplicate(dummy_cloaked_npc)	Suad#sms02	4_EP18_SUAD
wolfvill,124,253,5	duplicate(dummy_cloaked_npc)	Miriam#sms02	4_EP18_MIRIAM
wolfvill,127,250,7	duplicate(dummy_cloaked_npc)	Maram#sms02	4_EP18_MARAM

// Main Quest: Step 54. (entrance npc is a part of the instance A Gathering Place of Wolves)
// Main Quest: Step 55-58 instance 1@nyr.

// Main Quest: Step 59.
rachel,118,197,1	duplicate(dummy_cloaked_npc)	Miriam#sms04	4_EP18_MIRIAM
rachel,119,199,3	duplicate(dummy_cloaked_npc)	Suad#sms04	4_EP18_SUAD

rachel,115,198,5	script(CLOAKED)	Zed#sms01	4_M_RACHOLD1,{
	cutin "ra_gman2.bmp",0;
	mes "[泽德]";
	mes "我想从现在开始我会很忙。";
	close3;
}

rachel,116,200,5	script	Niren#sms01	4_F_MADAME,{
	if (checkweight(1000405,60) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main == 52) {
		cloakoffnpcself( "Zed#sms01" );
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
			end;
		}
		setpcblock PCBLOCK_NPC, true;
		npctalk "我们已经粗略估计了伤亡人数。", "泽德#sms01", bc_self;
		sleep2 800;
		cloakoffnpcself( "Suad#sms04" );
		cloakoffnpcself( "Miriam#sms04" );
		npctalk "我们也把所有人转移到了这里的安全区。", "米里亚姆#sms04", bc_self;
		setpcblock PCBLOCK_NPC, false;

		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "伤害……太大了。";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[苏阿德]";
		mes "而且，随着流血事件的发生，本土起义的传闻很快就会传开。总部遇袭事件，情况已经很糟糕了。";
		next;
		cutin "ra_gman2.bmp",0;
		mes "[泽德]";
		mes "不用担心舆论。让我们来处理恢复。";
		next;
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "原来，最近发生的事情都是一个阴谋的一部分。";
		next;
		cutin "ra_gman2.bmp",0;
		mes "[泽德]";
		mes "没有更仔细地检查寺庙内的可疑活动是我们的疏忽。";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "让我们把自责留到以后吧，现在集中精力解决双方的问题吧。";
		next;
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "我们确定青年阿迈勒副校长会参与其中吗？";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "经过这次挫折，原本萎靡不振的副手一下子又焕发了活力，干劲十足。此后，阿鲁纳费尔茨原住民和移民之间的紧张关系逐渐升级。";
		next;
		cutin "",255;
		mes "[迷你艾莉]";
		mes "这与猎心者逃离宅邸的时间大致一致。";
		next;
		cutin "ra_gman2.bmp",0;
		mes "[泽德]";
		mes "看来他们毕竟是一起密谋的。";
		next;
		select( "因为我什至亲眼目睹过。" );
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "令人不安的一件事是，青年阿迈勒的副校长不会不知道伊米尔心脏碎片的价值。仅仅通过渗透到组织中引起冲突并不足以轻易背叛它……";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "他们同意接受更多东西并移交吗？";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "我不确定，但是我的副手……不行，我得亲自去确认一下。";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "你要去哪里？您知道从哪里开始寻找吗？";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "雷切尔郊区有一座避暑别墅。最近，我的副手经常去那里看病。如果他和那些疯狂的科学家勾结在一起计划什么，那他可能就在那里。";
		next;
		cutin "",255;
		mes "[迷你艾莉]";
		mes "我们需要做一些跟踪。";
		next;
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "追查偷走心脏碎片的人应该留给米丽亚姆。希望冒险者能够陪伴她。";
		next;
		select( "明白了。" );
		cutin "ra_gman2.bmp",0;
		mes "[泽德]";
		mes "我们将留在这里照顾伤者并找出可能仍在附近的剩余散兵游勇。我们还需要考虑公众的意见。";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[苏阿德]";
		mes "我们也需要返回森林，处理那里的善后事宜。";
		mes "米丽亚姆，冒险家。那我就委托你跟踪。";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[米丽亚姆]";
		mes "走吧，冒险家。去别墅之前，会有人陪我们。我们在 <NAVI>[&#65533;&#65533;&#65533;&#65533;&#65533;&#65533; &#65533;&#823;&#65533;]<INFO>oz_dun01,223,116,0,101,0</INFO></NAVI> 见面";
		erasequest 17521;
		setquest 17525;
		ep18_main = 53;
		getitem 1000405,60;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#sms04" );
		cloakonnpcself( "Suad#sms04" );
		end;
	}
	if (ep18_main == 53) {
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "我们同意在<NAVI>[绿野仙踪]<INFO>oz_dun01,223,116,0,101,0</INFO></NAVI>与Miriam见面";
		close3;
	}
	mes "[米丽亚姆]";
	mes "这些天这里的情况不太好。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17521) == 1" );
	end;
}

// Main Quest: Step 60.
oz_dun01,223,116,3	script	Appointment Point#c12_evt01	4_POINT_BLUE,5,5,{
	if (ep18_main < 53)
		end;
	if (ep18_main == 53) {
		mes "到达集合地点。";
		mes "其他人好像还没有到。";
		mes "我们等等吧。";
		close2;
		setpcblock PCBLOCK_NPC, true;
		emotion ET_THINK, playerattached();
		sleep2 2000;
		emotion ET_SLEEPY, playerattached();
		cloakoffnpcself( "Maram#c12_01" );
		npctalk "哦！它还在那里！", "我喜欢它#c12_01", bc_self;
		sleep2 500;
		cloakoffnpcself( "Suad#c12_01" );
		npctalk "是不是太晚了？", "苏阿德#c12_01", bc_self;
		setpcblock PCBLOCK_NPC, false;

		select( "你在等米丽亚姆吗？" );
		mes "[马拉姆]";
		mes "我征求了妈妈的同意，就出来了一会儿。";
		mes "我正在处理抗议活动，所以我必须尽快回去，但是......";
		mes "米丽亚姆在哪里？";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[苏阿德]";
		mes "她来了。";
		cutin "ep18_suad_01.png",0;
		next;
		cloakoffnpcself( "Miriam#c12_01" );
		cloakoffnpcself( "Ira#c12_01" );
		mes "[米丽亚姆]";
		mes "抱歉迟到了。我花了一些时间才找到人。";
		cutin "ep18_miriam_01.png",0;
		next;
		mes "[米丽亚姆]";
		mes "这是艾拉。";
		mes "她是一个经常给我父亲带来书籍的孩子，但她需要帮助才能进入别墅。";
		next;
		cutin "",255;
		npctalk "你好。", "伊拉#c12_01", bc_self;
		next;
		mes "[马拉姆]";
		mes "什么，艾拉为什么在这里？";
		mes "她和这件事有关系吗？";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[艾拉]";
		mes "好久不见，马拉莫帕。";
		mes "我是来报答米丽娅姆欧尼的恩情的。";
		next;
		mes "[艾拉]";
		mes "你说别墅里有什么可看的？";
		mes "我一直推着阿迈勒爵士的轮椅，所以我去过任何地方。";
		next;
		mes "[艾拉]";
		mes "巧合的是，我有仆人的钥匙。我还没有归还它们，因为我最近一直在陪伴阿迈勒爵士。";
		mes "即使最近，我也没有归还它们，因为我和阿迈勒爵士出去了。";
		next;
		mes "[艾拉]";
		mes "还有那栋别墅的事。";
		mes "有时我们会把它借给牧师。";
		mes "这次也出现了这样的情况。";
		mes "但这有点奇怪。";
		next;
		mes "[苏阿德]";
		mes "奇怪的？";
		mes "如果能具体点就好了。";
		cutin "ep18_suad_04.png",0;
		next;
		cutin "",255;
		mes "[艾拉]";
		mes "他们说有些牧师会停留一段时间，但这感觉像是谎言......";
		next;
		mes "[艾拉]";
		mes "阿迈勒爵士似乎正在操纵另一个秘密组织。";
		mes "上次他说要发动战争，却被赶出了圣殿不是吗？";
		next;
		mes "[艾拉]";
		mes "看来他还没有放弃。";
		mes "这一次，入住别墅的危险人物似乎比上次还要多。";
		next;
		mes "[艾拉]";
		mes "我不在乎是谁，但我希望有人能阻止他。";
		mes "气氛也不好。";
		mes "如果发生战争，我们土著人民将成为交火的受害者。";
		next;
		mes "[米丽亚姆]";
		mes "嗯……不，这不会是一场战争。";
		mes "你可以放松一下，没关系。";
		cutin "ep18_miriam_01.png",0;
		next;
		cutin "",255;
		mes "[艾拉]";
		mes "姐姐！你怎么能这么冷静？";
		mes "你知道我管理别墅有多可怕吗？！";
		mes "尤其是还有那个奇怪的女人……";
		next;
		mes "[马拉姆]";
		mes "哈哈哈....";
		mes "好吧，冷静点，伊拉。";
		mes "我们现在聚集在这里就是为了解决这个问题。";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[米丽亚姆]";
		mes "因此，我们打算进入咄咄逼人的客人所居住的别墅。";
		mes "因为他们似乎是我们在寺庙遇到的同一个人。";
		cutin "ep18_miriam_01.png",0;
		next;
		mes "[苏阿德]";
		mes "我明白你的意思。";
		mes "老实说，我想和你一起去。";
		mes "但还有一些事情我需要处理。";
		cutin "ep18_suad_01.png",0;
		next;
		mes "[马拉姆]";
		mes "是的。我连忙请求允许并离开了一会儿。";
		mes "我还需要处理抗议，做一些协调工作。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "抱歉，Suadand 我不能和你一起去..";
		mes "你能理解吗？";
		next;
		mes "[米丽亚姆]";
		mes "当然。";
		mes "你们之间的事情还是自己处理比较好。";
		mes "我就靠狼村的人了。";
		cutin "ep18_miriam_01.png",0;
		next;
		mes "[米丽亚姆]";
		mes "那么，" + strcharinfo(0) + "，你能和我们一起去看看别墅吗？";
		next;
		select( "交给我吧。" );
		mes "[苏阿德]";
		mes "感谢您的理解。";
		mes "如果你安全进入别墅，我们会带艾拉一起去。";
		cutin "ep18_suad_01.png",0;
		next;
		mes "[米丽亚姆]";
		mes "谢谢。";
		mes "然后，伊拉.你能送我们去别墅吗？";
		cutin "ep18_miriam_01.png",0;
		next;
		cutin "",255;
		mes "[艾拉]";
		mes "当然。";
		mes "等你准备好了就跟我说话吧。";
		mes "我马上发给你。";
		erasequest 17525;
		setquest 18083;
		ep18_main = 54;
		close;
	}
	if (ep18_main == 54) {
		npctalk "你准备好了吗？", "伊拉#c12_01", bc_self;
		cloakoffnpcself( "Miriam#c12_01" );
		cloakoffnpcself( "Ira#c12_01" );
		end;
	}
	if (ep18_main == 55) {
		cloakoffnpcself( "Maram#c12_01" );
		end;
	}
	mes "可以进入MD纪念馆的别墅故事模式。";
	mes "已经完成的冒险者只能与同伴冒险者一起进入。";
	mes "您想和您的同伴一起参加吗？";
	next;
	.@md_name$ = "High Priest's Villa";

	select( "输入" + .@md_name$ + "" );

	switch( instance_enter(.@md_name$) ) {
	case IE_OTHER:
		mes "^ff0000发生未知错误。^000000";
		close;
	case IE_NOINSTANCE:
		mes "目前无法陪同。请检查您的随行人员是否已申请MD。";
		close;
	case IE_NOMEMBER:
		mes "^ff0000只有队伍成员才能进入纪念地下城。^000000";
		close;
	case IE_OK:
		mapannounce "oz_dun01", "" + strcharinfo(0) + " from the " + getpartyname( getcharid(1) ) + "'s party has entered the " + .@md_name$ + ".", bc_map, 0xFF99;
		// warp "1@adv",123,17;
		end;
	}
	end;

OnTouch:
	if (ep18_main == 54) {
		npctalk "你准备好了吗？", "伊拉#c12_01", bc_self;
		cloakoffnpcself( "Miriam#c12_01" );
		cloakoffnpcself( "Ira#c12_01" );
		end;
	}
	if (ep18_main == 55) {
		cloakoffnpcself( "Maram#c12_01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(17525) == 1" );
	end;
}

oz_dun01,223,120,5	script(CLOAKED)	Suad#c12_01	4_EP18_SUAD,{
	mes "[苏阿德]";
	mes "很抱歉让您承担这项烦人的任务。";
	mes "但灰狼村的人一定在等我。";
	cutin "ep18_suad_01.png",0;
	next;
	mes "[苏阿德]";
	mes "我把米丽亚姆托付给你了。";
	close3;
}

oz_dun01,220,118,5	script(CLOAKED)	Miriam#c12_01	4_EP18_MIRIAM,{
	mes "[米丽亚姆]";
	mes "只有米丽亚姆和冒险家可以进入别墅。";
	mes "苏阿丹・马拉姆将返回处理抗议活动。";
	cutin "ep18_miriam_01.png",0;
	next;
	mes "[米丽亚姆]";
	mes "据说别墅就位于这个峡谷下面。";
	mes "艾拉有一把单独的入口钥匙，所以当你准备好后，与艾拉交谈。";
	close3;
}

// Main Quest: Step 61. (entrance npc is a part of the instance Villa of High Priest)
// Main Quest: Step 62-66 inside the instance.

// Main Quest: Step 67.
oz_dun01,225,119,3	script(CLOAKED)	Maram#c12_01	4_EP18_MARAM,{
	if (ep18_main == 55) {
		mes "[马拉姆]";
		mes "哦，你来了。";
		mes "事情已经解决了一些，所以我来见你。";
		mes "米丽亚姆和尤斯神父去了圣殿。";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[马拉姆]";
		mes "由于尤神父的暴行，苏阿德被迫护送他离开。";
		mes "他们表示将在寺庙里讨论细节。";
		next;
		mes "[马拉姆]";
		mes "你马上去那儿吗？";
		next;
		if (select( "我会请求你的帮助。", "我自己去。" ) == 2)
			end;
		mes "[马拉姆]";
		mes "那我们就这样一起走吧。哈哈...";
		close2;
		cutin "",255;
		warp "ra_temin",169,26;
		end;
	}
	mes "[马拉姆]";
	mes "就算这件事是猎心者和幻境捏造的，但总有一天会爆炸。";
	cutin "ep18_maram_01.png",2;
	next;
	mes "[马拉姆]";
	mes "我不知道为什么大家要好好地生活在一起就这么难。";
	cutin "ep18_maram_03.png",2;
	next;
	mes "[马拉姆]";
	mes "这些忧虑都留给我们了。";
	mes "冒险，与米丽亚姆一起调查别墅。";
	mes "我不知道阿迈勒在想什么。";
	cutin "ep18_maram_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18084) == 1" );
	end;
}

// Main Quest: Step 68.
ra_temin,256,130,1	script	Temple Knight#c12_02	4_M_RASWORD,3,3,{
	if (ep18_main == 55 || ep18_main == 56)
		end;
	mes "[圣殿骑士]";
	mes "塞斯鲁姆尼尔圣殿。";
	mes "总礼拜堂不在此处，请您回去吧。";
	close;
OnTouch:
	if (ep18_main == 55 || ep18_main == 56) {
		npctalk "我一直在等待。请进来。", "圣殿骑士#c12_02", bc_self;
		cloakoffnpcself( "Niren#c12last" );
		cloakoffnpcself( "Maram#c12last" );
		cloakoffnpcself( "Suad#c12last" );
		cloakoffnpcself( "Miriam#c12_02" );
		end;
	}
	npctalk "除官员外，禁止进入。", "圣殿骑士#c12_02", bc_self;
	warp "ra_temin",255,138;
	end;
}

ra_temin,254,117,5	script(CLOAKED)	Miriam#c12_02	4_EP18_MIRIAM,{
	if (getequipid(EQI_HEAD_TOP) == 400127 && countitem(400127) == 1) {	// player must unequip the item
		mes "你必须带着伸展的艾莉。";
		close;
	}
	if (ep18_main == 55) {
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "在你到来期间，我听到了一些详细的故事......";
		mes "看来真正的目标是芙蕾雅的到来，通过尤弥尔的碎片。";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "在当地人和移民之间放火也是为了转移寺庙和人们的注意力。";
		mes "叹....";
		mes "[米丽亚姆]";
		mes "有多少人因为那件事而受苦、挣扎......";
		next;
		mes "[米丽亚姆]";
		mes "众神？到底什么是神？";
		mes "我父亲做出如此误导性的祈祷到底有什么愿望？";
		next;
		mes "[米丽亚姆]";
		mes "....";
		mes "我必须询问更多才能了解详细信息。";
		mes "但是，我真的对盲目信仰感到失望。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "你真是一点羞耻心都没有。";
		mes "没想到青春会做出这样的事。";
		next;
		mes "[Niren]";
		mes "你还记得他曾经是强硬派的领袖吗？";
		mes "但他不能发动战争。";
		mes "因此从前线撤退后，他就一直在背后策划着这样的事情。";
		next;
		mes "[Niren]";
		mes "我们是众神的仆人，服务于他们的意志。";
		mes "我们一直在等待，希望 Freyja 能再次与我们交谈。";
		next;
		mes "[Niren]";
		mes "但即便如此，我们也不敢将诸神召唤到凡间。";
		mes "这不是诸神的意志。";
		next;
		mes "[Niren]";
		mes "青春触犯了禁忌。";
		mes "敢于称自己为神之仆人，并试图将神视为己有。";
		next;
		mes "[Niren]";
		mes "仅此一点就不可原谅，但他也因此给诸神和无辜的人们带来了痛苦。";
		mes "对于尤弥尔丢失的心脏碎片我们该怎么办……";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "母亲。";
		mes "我们可以取回尤弥尔心脏的碎片。";
		mes "别太担心。";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "你说得对。";
		mes "我也会取回尤弥尔的心脏碎片。";
		next;
		mes "故事越来越长了。";
		mes "我们什么时候可以介入......";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "....";
		mes "如果你在这里，请表现出你的存在。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "哦，我们正在讨论，却没有意识到冒险者已经到来了。";
		mes "你的调查呢？";
		mes "是关于在少年宅邸中发现的那个亵渎之物的残骸的事。";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "是‘Bagot’吗？";
		mes "我们在宅邸中看到的是巴戈特创造的奇美拉……";
		close2;
		cutin "",255;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Elly: Allow me to explain.", bc_self;
		cloakoffnpcself( "Elly's Figure#c12_02" );
		specialeffect EF_BLUELIGHTBODY, AREA, "Elly's Figure#c12_02";
		erasequest 18084;
		setquest 18085;
		ep18_main = 56;
		end;
	}
	npctalk "我们必须在父亲犯下更大的罪之前阻止他。", "米里亚姆#c12_02", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18084) == 1" );
	end;
}

// Main Quest: Step 69.
ra_temin,258,117,3	script(CLOAKED)	Elly's Figure#c12_02	4_EP17_TABLET,{
	disable_items;
	if (checkweight(1201,2) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (getequipid(EQI_HEAD_TOP) == 400127 && countitem(400127) == 1 || countitem(400127) == 0) {
		mes "库存中必须携带一只下垂的艾莉。";
		close;
	}
	if (ep18_main == 56) {
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "我投射了我的原始形式，因为这看起来像是一个你们都需要一起听的故事。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "哦……有时我会听到某处隐约传来呻吟声，是这里吗？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "你看起来很镇静。确实，我可以说你们是冒险家的一方。";
		mes "我们直接进入正题吧。这种形式的持续时间较短。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "确实令人惊讶，但请这样做。我需要了解芙蕾雅现身的真实身份。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "好吧。让我快速解释一下。";
		mes "从宅邸中收集到的遗骸，其结构与人造人的起源――胚胎（Embryo）相同。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "胚胎？";
		mes "那是什么？某种炼金术？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "你了解这个领域吗？";
		mes "胚胎是人造生命体“矮人”的胎儿形态。";
		next;
		mes "[艾莉]";
		mes "人造生命形式是美丽的。根据培育它们的炼金术士的不同，它们可以呈现出数百种不同的形态。";
		next;
		mes "[艾莉]";
		mes "巴戈特以胚胎为基础，仿照教皇，将奇美拉改造成了奇美拉。";
		mes "你在宅邸中看到的就是改造后的奇美拉。";
		next;
		select( "因为那是幻觉。" );
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "我可以更多地了解这个幻象吗？";
		next;
		mes "我简单地解释了这个幻象。";
		next;
		cutin "ep18_suad_02.png",0;
		mes "[苏阿德]";
		mes "那么，我们是被巴戈特的诡计愚弄了，为了得到尤弥尔的心脏碎片来召唤女神吗？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "总而言之，是的。";
		mes "你很快就能明白。你一定有一个优秀的大脑。";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[苏阿德]";
		mes "我很清楚Yuseh中了幻象的诡计并试图召唤女神但最终自毁了。";
		mes "但幻象又如何呢？巴戈特和他的心去哪儿了？";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "最重要的是，我……我无法忍受这样一个事实：我们受苦是因为一些个人的权力斗争，而不仅仅是上帝的旨意。";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[米丽亚姆]";
		mes "苏阿德。";
		mes "我也有同样的感觉。我们都这样做。";
		mes "最重要的是，我距离最近却仍然没有注意到这一事实是最糟糕的......";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "母亲。从现在开始我们应该做什么？";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "组建理事会。";
		mes "据我所知，这个国家缺乏沟通。";
		mes "如果当地人和移民不互相交谈，你怎么知道自己想要什么？";
		next;
		mes "[艾莉]";
		mes "给予当地人地位和权力。依法保障他们。";
		mes "这很困难但很容易。你只需要保证就可以了。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "我懂了。我们需要倾听人们的故事，而不是仅仅等待神的话并强迫它。";
		mes "这样的基本...";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[马拉姆]";
		mes "但统治阶级不会保持沉默。";
		mes "如果有的话，可能会出现比现在更多的阻力和骚乱。";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "哈，但我们不能就这么一直这样下去，不是吗？";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "正确的。改革是必要的。";
		mes "我们不能只对着墙壁大喊大叫，永远躲在森林里。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "人类。不用担心。";
		mes "时间永远站在我们这边。";
		mes "你的角色是强化对方以匹配权威的力量。就这样。";
		next;
		mes "[艾莉]";
		mes "其余的将由时间和人类的适应性来解决。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "这是一个局外人的宝贵教训。";
		mes "明白了。让我们正式提出这个问题来讨论。";
		next;
		mes "[Niren]";
		mes "如果是Zedd Mansion的话，或许会有很大的帮助。";
		mes "你们决定为当地人选出一名代表。";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "苏阿德来了。父亲。";
		mes "还有我和马拉姆。我们不就是为了这一天吗？";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "是时候让灰色的孩子们完成他们的工作了。";
		mes "母亲收养我们，就是为了这一天吗？";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "这边不用担心。只要确保准备好一块合适的板即可。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "谢谢。你已经成长得很好了...";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "好吧。这个国家的情况其实超出了我的了解，但是看起来已经解决的很好了。";
		mes "现在让我们回到幻象的故事。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "正确的。巴戈特带走了尤弥尔的心，去了某个地方，对吗？";
		mes "冒险家将离开去寻找心脏。";
		next;
		select( "我们需要知道巴戈特的下落" );
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "巴戈特似乎已经前往北大陆了。";
		mes "我记得和父亲谈论过耶梦加德。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "北方？";
		mes "你说的是耶梦加得（Jormungand），结界外的密封区域吗？";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "这是真的吗？那个耶梦加德被封印了。巴戈特似乎很感兴趣。";
		mes "巴戈特对复活神感兴趣。";
		next;
		mes "[米丽亚姆]";
		mes "乍一看，这似乎是一个神圣降临的虚假承诺，只是为了偷走尤弥尔的心，但是……";
		mes "没有人知道他会用得到的尤弥尔之心做什么。";
		next;
		mes "[米丽亚姆]";
		mes "不过，巴戈特的一位同伴似乎已经搬到了北大陆。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "耶梦加得存在吗？";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
		mes "在与教派的战斗中获胜的英雄们成为了符文米德加尔特王国的创始人。";
		next;
		mes "[Niren]";
		mes "那时，他们以奥丁的名义战斗，而不是像我们那样以芙蕾雅的名义战斗。";
		mes "显然，是芙蕾雅为人类揭示了这一意义。";
		next;
		mes "[Niren]";
		mes "然而，在与教会的斗争中获胜的英雄家族以奥丁的名义建立了一个国家。";
		mes "还有一个故事，耶蒙加德因此对胜利的英雄和第一位国王下了诅咒。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "我以前从未听说过这个？";
		mes "诅咒...？";
		next;
		select( "诅咒并不重要。" );
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "是的。当前皇家诅咒的故事并不重要。";
		mes "重要的是耶梦加德教派确实存在。";
		next;
		mes "[Niren]";
		mes "还讲述了耶梦加德被封印在北方大陆这个地方的故事。";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "如果巴戈特真想复活神灵，他接下来的目标就是耶梦加得。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "必须防止这种情况发生。";
		mes "这片大陆的黑暗，比持续一千年的神战还要强大。";
		mes "我们必须追踪并阻止巴戈特。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "北方是一片封闭的土地。跨越障碍并不容易。";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "因为有障碍，所以我们无法跨越它？";
		mes "那么巴戈特是利用尤弥尔的心脏来跨越结界的吗？";
		next;
		mes "[米丽亚姆]";
		mes "为了找到他，我们需要想办法穿过封锁北方的屏障。";
		mes "这需要时间。";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[艾莉]";
		mes "我会这么做的。";
		mes "让我回府去想办法穿过结界吧。";
		next;
		mes "[艾莉]";
		mes "而且这并不是吹牛，但是如果你利用了主人的不公平，你就会以某种方式跨越这个障碍，对吧？";
		mes "如果你利用了不公平，你就可以追踪痕迹。";
		next;
		mes "[艾莉]";
		mes "我将返回管理员主体。我会把这个贝壳送给你作为冒险者的纪念品。";
		mes "豪宅见。";
		ep18_main = 57;
		completequest 18085;
		delitem 400127,1;	// Ep18_Mini_Elly
		getitem 400128,1;	// Costume Dropping Elly
		getitem 1000405,180;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		next;
		cloakonnpcself( "Elly's Figure#c12_02" );
		cutin "ep18_miriam_01.png",0;
		mes "[米丽亚姆]";
		mes "在收集到更多信息之前我们无能为力。";
		mes "我会试着和我父亲多谈谈。";
		mes "感谢您的帮助。";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[苏阿德]";
		mes "然后我就回灰狼森林了。";
		mes "尼伦，委员会成立后请给我回电话。到那时我会做好准备。";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[马拉姆]";
		mes "那我要不要一起去听米丽亚姆和尤瑟的故事呢？";
		mes "我想帮忙找到尤弥尔的心脏碎片。";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "然后我会去见杰德警官。";
		mes "冒险家，你再次为我们立了大功。";
		next;
		mes "[Niren]";
		mes "祈祷总是指向上帝，";
		mes "支持那些许愿的人...";
		mes "但尤瑟祈求什么呢？";
		next;
		mes "[Niren]";
		mes "祈祷结束时只有失败。";
		mes "...";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18085) == 1" );
	end;
}

ra_temin,254,114,7	script(CLOAKED)	Suad#c12last	4_EP18_SUAD,{
	if (ep18_main < 57) {
		npctalk "...", "苏阿德#c12last", bc_self;
		end;
	}
	npctalk "感谢您对灰狼森林的帮助。", "苏阿德#c12last", bc_self;
	end;
}

ra_temin,258,114,3	script(CLOAKED)	Niren#c12last	4_F_RACHOLD,{
	npctalk "没想到青春是这样的……", "Niren#c12last", bc_self;
	end;
}

ra_temin,259,111,1	script(CLOAKED)	Maram#c12last	4_EP18_MARAM,{
	if (ep18_main < 57) {
		npctalk "米里亚姆带来了一些信息，我们一起来听听。", "我喜欢它#c12last", bc_self;
		end;
	}
	npctalk "当你去寻找那颗心的时候，如果我能陪着你，我将不胜感激。", "我喜欢它#c12last", bc_self;
	end;
}



//--- Daily quests
//-------------------------------------------------------------------
// Quest: Investigation of Oz Labyrinth. Step 1 + 13 (final). (NPC part of the main quest).
// wolfvill,143,113,5	script	Imril#ep18_wv	4_EP18_IMRIL,{

// Quest: Investigation of Oz Labyrinth. Step 2.
oz_dun01,27,184,5	script	#ep18_sb1	4_POINT_RED,{
	if (isbegin_quest(11725) == 1 || isbegin_quest(11726) == 1) {
		mes "[伊姆里尔]";
		mes "呼……好热啊！";
		mes "它曾经是一个凉爽的洞穴......";
		mes "现在，光是站着不动，就感觉汗流浃背。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "待太久的话我可能会头晕，所以我们还是快点探索吧。";
		mes "目前，这条路径是^e5555e外部路径^000000，所以我们只需要直走即可。";
		if (isbegin_quest(11725) == 1) {
			completequest 11725;
			setquest 11726;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",68,284);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11725) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 3.
oz_dun01,68,284,5	script	Box#ep18_sb1	4_WOODBOX,{
	if (isbegin_quest(11726) == 1 || isbegin_quest(11727) == 1) {
		mes "[伊姆里尔]";
		mes "有人留下了行李。";
		mes "有时，当面对怪物或感到筋疲力尽而无法携带物品时，人们会像这样隐藏行李并继续前进。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "搬运物品固然重要，但生命也是宝贵的。";
		mes "因为这里离入口很近，以后取东西也方便。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "我们暂时放下行李继续前进吧。";
		if (isbegin_quest(11726) == 1) {
			erasequest 11726;
			setquest 11727;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",65,189);
		end;
	}
	mes "- 一个盒子无人看管。 -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11726) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 4.
oz_dun01,65,189,5	script	Steep Road#ep18_sb1	4_POINT_RED,{
	if (isbegin_quest(11727) == 1 || isbegin_quest(11728) == 1) {
		mes "[伊姆里尔]";
		mes "这里的路崎岖不平，所以要小心。";
		mes "如果不小心，您可能会滑倒并伤到脚踝。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "我们从这里直接下去吧。";
		if (isbegin_quest(11727) == 1) {
			erasequest 11727;
			setquest 11728;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",111,96);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11727) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 5.
oz_dun01,111,96,5	script	Steaming Hole#ep18_sb1	4_POINT_RED,{
	if (isbegin_quest(11728) == 1 || isbegin_quest(11729) == 1) {
		mes "[伊姆里尔]";
		mes "呼！";
		mes "很热！";
		mes "蒸汽从破裂的缝隙中逸出。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "幸运的是，目前地面看起来还不错，但蒸汽上升表明下面深处的地面已经升温，所以在熔岩开始流动之前我们可能无法走得更远。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "主干道附近开始变热，情况真的很严重……";
		next;
		cutin "",255;
		mes "[???]";
		mes "<FONT SIZE = 16><B>伊姆里尔！！</FONT></B>";
		if (isbegin_quest(11728) == 1) {
			erasequest 11728;
			setquest 11729;
		}
		close2;
		navigateto("oz_dun01",100,92);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11728) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 6 + 7 + 8.
oz_dun01,100,92,3	script	???#ep18_sb1	4_EP18_GW_MIDDLE02,{
	if (isbegin_quest(11729) == 1) {
		mes "[伊姆里尔]";
		mes "你还好吗，保罗？";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[保罗]";
		mes "哈哈...";
		mes "我在躲避怪物时被热蒸汽击中。";
		mes "我放下了警惕，走上了我一直走的路。";
		next;
		mes "[保罗]";
		mes "我也不知道我的东西去了哪里。";
		mes "受伤了，财物也丢了，太惨了……";
		next;
		mes "[伊姆里尔]";
		mes "别这么说，你的生命比你的财产更重要。";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[保罗]";
		mes "是的...";
		mes "谢谢。";
		next;
		mes "[伊姆里尔]";
		mes "我这里有一些药剂，喝完就先回村子了。";
		mes "您稍后可以找到您的物品。";
		cutin "ep18_imril_01.png",2;
		next;
		cutin "",255;
		mes "[保罗]";
		mes "不，留着吧！";
		mes "我们不能这样浪费村里宝贵的资源。";
		next;
		mes "[保罗]";
		mes "休息一会儿，就回村里涂药膏。";
		next;
		mes "[保罗]";
		mes "不过，我不想在恢复时被怪物击中，所以你能帮我^e5555e清理附近的怪物^000000吗？";
		erasequest 11729;
		setquest 11730;
		close;
	}
	switch( checkquest(11730,HUNTING) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[保罗]";
		mes "休息一会儿，就回村里涂药膏。";
		next;
		mes "[保罗]";
		mes "不过，我不想在恢复时被怪物击中，所以你能帮我^e5555e清理附近的怪物^000000吗？";
		close;
	case 2:
		mes "[保罗]";
		mes "唷~";
		mes "谢谢！";
		mes "我现在感觉好一点了，可以活动了。";
		next;
		mes "[保罗]";
		mes "嗯，我现在就慢慢回村子吧。";
		mes "探索迷宫是好事，但要注意自己的健康。";
		next;
		mes "[伊姆里尔]";
		mes "知道了。";
		mes "保重，保罗。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "唔...";
		mes "从各个地方升起的蒸汽确实是一个大问题，而不仅仅是怪物。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "旅行者很少会进一步下降，但如果被怪物追赶，他们可能会走错路……";
		next;
		mes "[伊姆里尔]";
		mes "现在让我们^e5555e再深入一点^000000。";
		erasequest 11730;
		setquest 11731;
		close2;
		cutin "",255;
		navigateto("oz_dun01",134,56);
		end;
	}
	if (isbegin_quest(11731) == 1) {
		mes "[保罗]";
		mes "嗯，我现在就慢慢回村子吧。";
		mes "探索迷宫是好事，但要注意自己的健康。";
		next;
		mes "[伊姆里尔]";
		mes "知道了。";
		mes "保重，保罗。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "唔...";
		mes "从各个地方升起的蒸汽确实是一个大问题，而不仅仅是怪物。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "旅行者很少会进一步下降，但如果被怪物追赶，他们可能会走错路……";
		next;
		mes "[伊姆里尔]";
		mes "现在让我们^e5555e再深入一点^000000。";
		close2;
		cutin "",255;
		navigateto("oz_dun01",134,56);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11729) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(11730,HUNTING) == 2" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 9.
oz_dun01,134,56,5	script	Box#ep18_sb2	4_WOODBOX,{
	if (isbegin_quest(11731) == 1 || isbegin_quest(11732) == 1) {
		mes "[伊姆里尔]";
		mes "这里还有一些行李...";
		mes "这会是保罗丢失的行李吗？";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "我们暂时记住该位置，稍后再检索。";
		mes "我们仍然需要进一步检查^e5555e^000000。";
		mes "这边走...";
		if (isbegin_quest(11731) == 1) {
			erasequest 11731;
			setquest 11732;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",110,37);
		end;
	}
	mes "- 盒子无人看管。 -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11731) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 10.
oz_dun01,110,37,5	script	#ep18_sb2	4_POINT_RED,{
	if (isbegin_quest(11732) == 1 || isbegin_quest(11733) == 1) {
		mes "[伊姆里尔]";
		mes "啊...";
		mes "炎热已经让人难以忍受了。";
		mes "这里更加危险，所以我们必须小心。";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "说实话，除非你有冒险者那么强的实力，否则走到这一步就等于被判了死刑。";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[伊姆里尔]";
		mes "但既然我和你在一起，我就更进一步。";
		if (isbegin_quest(11732) == 1) {
			erasequest 11732;
			setquest 11733;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun02",152,276);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11732) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 11.
oz_dun02,152,276,5	script	#ep18_sb3	4_POINT_RED,{
	if (isbegin_quest(11733) == 1 || isbegin_quest(11734) == 1) {
		mes "[伊姆里尔]";
		mes "看起来，这里的怪物只是稍微下降了一点，形状就发生了一些变化。";
		mes "即使这种程度的变化也可能会给冒险者带来风险，你不觉得吗？";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "这里太危险了，我们就简单看看周围就回城里了。";
		if (isbegin_quest(11733) == 1) {
			erasequest 11733;
			setquest 11734;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun02",143,231);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11733) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 12.
oz_dun02,143,231,3	script	Old Man#ep18_sb1	4_EP18_GW_OLD01,{
	if (isbegin_quest(11734) == 1) {
		mes "[伊姆里尔]";
		mes "<FONT SIZE = 14><B>长辈！！！</FONT></B>";
		mes "你安全了！";
		cutin "ep18_imril_03.png",2;
		next;
		cutin "",255;
		mes "[长老]";
		mes "不。";
		mes "这是谁？";
		mes "这不是伊姆里尔吗？";
		mes "为什么会来到这么危险的地方？";
		next;
		mes "[伊姆里尔]";
		mes "不，你为什么真的在这里，长老。";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[迷宫大师长老]";
		mes "迷宫主人就在迷宫里，我还能在哪里呢。";
		next;
		mes "[伊姆里尔]";
		mes "但这地方太危险了，有怪物……";
		cutin "ep18_imril_01.png",2;
		next;
		cutin "",255;
		mes "[迷宫大师长老]";
		mes "嗯，它不仅在这里，所以不用担心。";
		mes "这些天怪物发出的噪音很大，我以为可能有人遇到危险，就下来查看。";
		next;
		mes "[迷宫大师长老]";
		mes "我已经告诉苏阿德了，熔岩已经到了这么远，而下面，地面已经融化了很多，更加危险了，别下去了。";
		next;
		mes "[迷宫大师长老]";
		mes "如果是你旁边的冒险者或许还好，但对你来说太危险了。";
		next;
		mes "[伊姆里尔]";
		mes "知道了。";
		mes "请长辈照顾好自己。";
		mes "快点回村子吧。";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[迷宫大师长老]";
		mes "天啊~";
		mes "如果迷宫主人不在迷宫里，谁来管理迷宫！";
		next;
		mes "[伊姆里尔]";
		mes "无论如何，固执...";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "正如励志所说，我认为我无法继续往下走，所以我们回到^e5555e村庄^000000。";
		mes "即使现在我也感觉我的皮肤在燃烧。";
		erasequest 11734;
		setquest 11735;
		close2;
		cutin "",255;
		navigateto("wolfvill",143,113);
		end;
	}
	if (isbegin_quest(11735) == 1) {
		mes "[迷宫大师长老]";
		mes "天啊~";
		mes "如果迷宫主人不在迷宫里，谁来管理迷宫！";
		next;
		mes "[伊姆里尔]";
		mes "反正你就是这么固执……";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[伊姆里尔]";
		mes "正如长辈所说，我觉得已经不能再下去了，所以我们还是回到^e5555e村庄^00000吧。";
		mes "即使现在，我的皮肤也感觉像是要被灼烧一样。";
		close2;
		cutin "",255;
		navigateto("wolfvill",143,113);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11734) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Training Grey Wolves. Step 1 + 4 (final).
wolfvill,120,117,1	duplicate(dummy_npc)	Aisha#wms01	4_F_SHABBY

wolfvill,121,113,1	script	Peco#wms01	4_PECOPECO,{
	npctalk "哇……哇……", "佩科#wms01", bc_self;
	end;
}

wolfvill,117,113,7	script	Pando#wms01	4_HEN,{
	npctalk "咯咯咯咯――", "潘德#wms01", bc_self;
	end;
}

wolfvill,123,110,5	script	Guest#wms01	4_HEN,{
	npctalk "....咕？", "潘杜#wms01", bc_self;
	end;
}

wolfvill,125,111,3	script	Cute#wms01	4_HEN,{
	npctalk "咕！！咕！！！", "潘多#wms01", bc_self;
	end;
}

wolfvill,121,119,3	script	Goat#wms01	EP18_GREY_GOAT,{
	emotion ET_DELIGHT;
	npctalk "啊啊啊啊~~~", "", bc_self;
	end;
}
	
wolfvill,124,116,3	script	Sheep#wms01	4_LAM,{
	npctalk "嗯...", "", bc_self;
	end;
}

wolfvill,117,119,5	script	Scania#wms01	4_EP18_GW_MAN02,5,5,{
	if (checkweight(1000405,10) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[斯堪尼亚]";
		mes "天啊，看看他的呼吸。我们的小狗狗是不是很可爱呢？";
		close;
	}
	switch( isbegin_quest(17510) ) {
	case 0:
		mes "[斯堪尼亚]";
		mes "嘿，哥们，你也该学一门外语了……";
		npctalk "这是怎么回事？", "山羊#wms01", bc_self;
		next;
		mes "[斯堪尼亚]";
		mes "天哪，看看这个！看看他们的呼吸方式。他们是吸气和呼气的天才！真正的天才！";
		next;
		cloakoffnpcself( "Maram#wms01" );
		mes "[马拉姆]";
		mes "你好！斯堪尼亚！";
		next;
		mes "[斯堪尼亚]";
		mes "马拉姆？你什么时候来的？你比预计的来得早吗？";
		next;
		mes "[马拉姆]";
		mes "多亏了冒险者的帮助，这次我来得快了一些。";
		npctalk "你好。你是一个强大而强大的冒险家。", "我喜欢它#wms01", bc_self;
		next;
		mes "[斯堪尼亚]";
		mes "这是刚来的新人吗？";
		next;
		mes "[马拉姆]";
		mes "哦，不是这样的。他不是这附近的人。他来自一个完全不同的地方。 He helped with purchasing goods this time, and they've transported them all the way here.";
		npctalk "他是一位强大而强大的冒险家。", "我喜欢它#wms01", bc_self;
		next;
		mes "[斯堪尼亚]";
		mes "嗯……冒险者……？那么，他们是外人吗？我们确定您的身份吗？如果我们搜查他拥有的一切怎么办？";
		mes "或者我们可以在那里泄露一些信息吗？如果不是，如果他们像那些移民一样试图夺取我们的土地怎么办？";
		next;
		mes "[马拉姆]";
		mes "不，不是他！他对他们遇到的每个人都只有善意的话语！ They're not that kind of person at all.为什么要把他和那些麻烦制造者相提并论呢？";
		next;
		mes "[斯堪尼亚]";
		mes "你认为一个人的意图是写在脸上的吗？无论他们是小偷还是军人，随着时间的推移我们都会发现！";
		mes "伊莎带回了一只狼崽，现在，马雷姆，你要带回人吗？";
		npctalk "回来了，呵呵！注意你的言语！", "我喜欢它#wms01", bc_self;
		next;
		select( "不过我不是那样的人。" );
		mes "[马拉姆]";
		mes "哦，当然，从他们嘴里说出来的不是事实。只是说说而已，仅此而已。";
		mes "顺便说一句，狼崽子？什么狼崽？";
		next;
		mes "[斯堪尼亚]";
		mes "哦！伊莎不久前从森林里带回了一只小灰狼！当我们叫她把它带回树林时，她根本不听！";
		next;
		mes "[斯堪尼亚]";
		mes "你知道这意味着什么吗？已经给我们的羊带来麻烦了！即使现在，它的行为也是如此。当它变大时会发生什么？肯定会害我们的羊！";
		mes "所以，你为什么不去尝试说一次呢！我不会听你说的！";
		next;
		mes "[马拉姆]";
		mes "哦？这实际上是一个很好的建议。这将是一次非常有建设性的对话。但我该怎么办呢？我得把带来的东西收拾一下。";
		npctalk "哦，这语气怎么这么尴尬？", "斯堪尼亚#wms01", bc_self;
		next;
		mes "[马拉姆]";
		mes "啊，当然！冒险家！你愿意去吗？探索这个地方，欣赏景点，也许也给当地人留下深刻的印象。";
		mes "因为无论如何我们都会在这里呆一段时间，对吧？这里的每个人都和我一样友好、善良，所以你不会遇到任何敌意。";
		next;
		mes "[马拉姆]";
		mes "对吧，斯堪尼亚？";
		next;
		mes "[斯堪尼亚]";
		mes "......";
		npctalk "眩光是怎么回事？", "我喜欢它#wms01", bc_self;
		next;
		mes "[马拉姆]";
		mes "你去看看艾莎带回来的到底是一只真正的狼崽，还是一只长得像狼的小狗。";
		npctalk "不检查也是狼！我全都看到了！", "斯堪尼亚#wms01", bc_self;
		next;
		select( "验证一下怎么样？" );
		mes "[马拉姆]";
		mes "哦……好吧，我还没有想那么远。但如果真的是狼崽子那不是很麻烦吗？在这种情况下，即使是小狗也会很麻烦。";
		npctalk "麻烦会出在哪里呢？", "斯堪尼亚#wms01", bc_self;
		next;
		mes "[马拉姆]";
		mes "让我为我们新来的冒险家解释一下。这里的土地有限，适合饲养的动物并不多。";
		next;
		mes "[马拉姆]";
		mes "斯卡尼亚主要负责照顾羊和鸡。几乎没有牛或猪能够适应这样的地方。所以说，牲畜在这里真的很珍贵。";
		next;
		mes "[斯堪尼亚]";
		mes "但万一艾莎怀里的确实是一只狼崽呢？";
		next;
		mes "[马拉姆]";
		mes "妈妈来找她的孩子了！";
		next;
		mes "[斯堪尼亚]";
		mes "就算妈妈不来找呢？";
		next;
		mes "[马拉姆]";
		mes "幼崽长大后会开始伤害牲畜！";
		next;
		emotion ET_SWEAT, playerattached();
		mes "[斯堪尼亚]";
		mes "你听到了吗？";
		next;
		select( "我应该去哪里？" );
		mes "[马拉姆]";
		mes "艾莎又住在哪里？啊，对了！ <NAVI>[上侧]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI>，如果你去那里，你会找到艾莎的房子。";
		next;
		emotion ET_SWEAT, playerattached();
		mes "[斯堪尼亚]";
		mes "但说出来也没啥意义吧？如果我说服你，你对我的看法也可能会改变。";
		npctalk "斯卡尼亚，冒险家，你的价值不是靠你的意见来判断的。", "我喜欢它#wms01", bc_self;
		npctalk "谁说的？我会处理的。", "斯堪尼亚#wms01", bc_self;
		next;
		mes "[马拉姆]";
		mes "那么，冒险者就请出发吧，平安归来！我也先请假了！";
		setquest 17510;
		close2;
		cloakonnpcself( "Maram#wms01" );
		end;
	case 1:
		mes "[斯堪尼亚]";
		mes "<NAVI>[艾莎]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI>，无论我对你说多少遍，都没有什么区别，不是吗？如果我说服你，可能也会改变我对你的看法。";
		close;
	case 2:
		break;
	}
	switch( isbegin_quest(17512) ) {
	case 0:
		mes "[斯堪尼亚]";
		mes "<NAVI>[艾莎]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI>一百天没有帮助吗？如果你说服了我，我就会改变对你的看法。";
		close;
	case 1:
		mes "[斯堪尼亚]";
		mes "汪汪。今天的徒步现在就结束了。我太累了。";
		next;
		mes "[山羊]";
		mes "啊啊啊啊――";
		next;
		mes "[斯堪尼亚]";
		mes "我不能让你一个人走。我怎么能送你一个人去这么危险的地方？当然，我知道你可以自己散步，但我很担心。";
		next;
		setnpcdisplay( "Boksil#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Aisha#wms01" );
		cloakoffnpcself( "Boksil#wms01" );
		npctalk "斯堪尼亚！", "艾莎#wms01", bc_self;
		mes "[斯堪尼亚]";
		mes "艾莎？你为什么在这里？你是来还狼的吗？";
		next;
		npctalk "哇！！", "盒子#wms01", bc_self;
		mes "[斯堪尼亚]";
		mes "不，不是那样的。你把狼带过来了？在羊面前？你疯了吗？";
		next;
		mes "[斯堪尼亚]";
		mes "你到底为什么要养狼？你需要一只狗吗？然后养只狗。";
		mes "不行，我就变成狗了。我也会把你的房子弄乱，偶尔还会咬你。";
		next;
		mes "[艾莎]";
		mes "斯堪尼亚，我清楚地听到了您的愿望。那么，你还派人来找我吗？你是把我当成契约者、冒险者吗？";
		next;
		mes "[艾莎]";
		mes "尽管你付出了一切努力，那又怎样？这个人已经站在我这边了！哈哈哈！来吧，让我看看那张绝望的脸！";
		next;
		mes "[斯堪尼亚]";
		mes "什么？冒险家？你背叛了我？你怎么能这么做？一见钟情的背叛，是不是太过分了？我应该知道的。像你这样的外人是不可信的。";
		next;
		mes "[艾莎]";
		mes "斯堪尼亚，您去过冰洞吗？你血管里流动的血液比那里结冰的水还冷吗？你这个冷血的人！";
		npctalk "什么？那水结冰了吗？", "斯堪尼亚#wms01", bc_self;
		npctalk "不...？", "艾莎#wms01", bc_self;
		next;
		mes "[艾莎]";
		mes "你怎么能建议把这个又小又脆弱的小生物送回这么危险的地方呢？它的母亲死了，它无法独自生存。";
		next;
		mes "[斯堪尼亚]";
		mes "它的母亲……消失了？";
		next;
		mes "[艾莎]";
		mes "我说过了，不是吗？我告诉过你一百遍了。你没有再听，是吗？你只相信你愿意相信的，对吧？";
		next;
		mes "[艾莎]";
		mes "我不知道你怎么想，但我不忍心把这只小而脆弱的幼狼送回市场。";
		next;
		mes "[斯堪尼亚]";
		mes "但如果那只狼长大了，我们的羊...";
		next;
		mes "[艾莎]";
		mes "不用担心这个。冒险家？";
		next;
		select( "哦，我需要谈论这个吗？" );
		mes "[艾莎]";
		mes "反正你也不会听我的。我说话你从来不听，只相信别人说的话。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "这狼崽如果训练好了就没事了。如果它从小就和其他朋友一起长大，它就不会伤害他们，反而会保护羊。";
		next;
		mes "[艾莎]";
		mes "你听到我说话了吗？你的反驳在哪里？加油，聪明的天才！坐下！举起手来！";
		emotion ET_WRAP, getnpcid(0,"Aisha#wms01");
		npctalk "纬！！", "盒子#wms01", bc_self;
		emotion ET_ROCK, getnpcid(0,"Boksil#wms01");
		npctalk "我很高兴你这么想！你也做得很好！我们都是天才！", "艾莎#wms01", bc_self;
		next;
		mes "[斯堪尼亚]";
		mes "这是真的。但是……却不知道它还能持续多久……不知道它能不能压制住它的野性……";
		next;
		mes "[斯堪尼亚]";
		mes "但最重要的是，我认为你无法那么耐心地训练它。";
		npctalk "你看着我干什么？嘿，跟我来吧。", "艾莎#wms01", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我会帮助你缓解任何紧张情绪，这样你就可以得到充分的训练。我会带他去散步，这样我们就可以增进感情。";
		next;
		mes "[斯堪尼亚]";
		mes "但...";
		next;
		mes "[艾莎]";
		mes "你说当幼崽独自散步时，很难一直追着它。这不是一件好事吗？";
		npctalk "一个懒得喂羊的牧羊人。", "艾莎#wms01", bc_self;
		next;
		mes "[斯堪尼亚]";
		mes "你确定你能照顾好我们的小狼崽吗？我担心他在外面和所有危险的怪物在一起。";
		next;
		mes "[艾莎]";
		mes "冒险家，看到你手上的老茧了吗？你说是马拉姆把他带到这里来的，所以他一定是值得信赖的。他是我们几分钟内训练出来的老将！";
		npctalk "没有什么是你做不到的！", "艾莎#wms01", bc_self;
		next;
		mes "[斯堪尼亚]";
		mes "哦，好吧……我忍不住大老远跑到这里，能拜托你帮个忙吗？呵呵。";
		next;
		mes "[艾莎]";
		mes "你很兴奋，就像你一直在等待这一刻一样。你这不是太冷了吗？";
		next;
		mes "[斯堪尼亚]";
		mes "哦不~你真是~拼命~问！！所以，我忍不住...";
		next;
		mes "[艾莎]";
		mes "无论如何……我需要和村民们谈谈幼崽的事。我们的小宝贝很安全！我们走吧，小崽子！";
		npctalk "纬！", "盒子#wms01", bc_self;
		next;
		cloakonnpcself( "Aisha#wms01" );
		cloakonnpcself( "Boksil#wms01" );
		mes "[斯堪尼亚]";
		mes "哦……突然变成了临时牧羊人吧……？谢谢。我有很多事情要做。我能提供什么帮助吗？";
		next;
		mes "[斯堪尼亚]";
		mes "啊，对了！局外人往往喜欢这类事情。冒险家，你喜欢吗？即使你不喜欢，你也可以和喜欢的人交换你喜欢的东西。随身携带。";
		next;
		mes "[斯堪尼亚]";
		mes "当然，到时候我们散步见。";
		mes "^4d4dff您获得好评。^000000";
		completequest 17512;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(17516,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[斯堪尼亚]";
		mes "请等待任务延迟结束。";
		close;
	case 2:
		erasequest 17516;
		break;
	}
	if (isbegin_quest(17515) == 1) {
		mes "[斯堪尼亚]";
		mes "冒险家，辛苦了。我想我们的狗也很满意。吃饭的时间还好吗？那么，请明天再试一次！";
		erasequest 17515;
		setquest 17516;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		close;
	}
	if (isbegin_quest(17514) == 1) {
		mes "[斯堪尼亚]";
		mes "有几个狗狗喜欢的地方，我来指导你。你只需要对付附近的危险怪物。";
		next;
		mes "[斯堪尼亚]";
		mes "灰烬冲进来真是让人头疼。请照顾好周围的灰烬。我通常一天抓20只鹰。那么请。";
		close;
	}
	switch( isbegin_quest(17513) ) {
	case 0:
		mes "[斯堪尼亚]";
		mes "冒险家，我准时来散步了。但艾莎并没有出现……";
		next;
		setnpcdisplay( "Boksil#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Aisha#wms01" );
		cloakoffnpcself( "Boksil#wms01" );
		mes "[艾莎]";
		mes "哒哒！我们来了！";
		next;
		mes "[盒子]";
		mes "纬！！";
		next;
		mes "[斯堪尼亚]";
		mes "当然，我带你去散步。真的……我也得去吗？我可以相信你能处理好这件事吗？";
		next;
		if (select( "好吧。", "我今天有点忙。" ) == 2) {
			mes "[斯堪尼亚]";
			mes "啊……我明白了……你很忙。好吧，那么就没有什么可做的了。";
			next;
			mes "[斯堪尼亚]";
			mes "哦，来吧，看看我失望的脸。我无能为力。今天，跟我来吧。那么，再见了，冒险家！";
			close;
		}
		mes "[艾莎]";
		mes "如果你担心的话，可以一起去。";
		next;
		mes "[斯堪尼亚]";
		mes "嗯，不。好吧，那我就交给你了。保重，小狗。如果您担心或不喜欢，请告诉我并回家。知道了？";
		next;
		mes "[山羊]";
		mes "啊哈啊啊啊啊――";
		next;
		mes "[斯堪尼亚]";
		mes "我会带你去一些小狗喜欢的地方。他可以自己寻找和进食，所以只需处理附近的危险怪物即可。";
		next;
		mes "[斯堪尼亚]";
		mes "灰灵不断成群结队，令人头疼……请照顾附近的灰灵。我们通常每天能捕获大约 20 只。所以，我很感激你的帮助。";
		setquest 17513;
		close2;
		cloakonnpcself( "Boksil#wms01" );
		cloakonnpcself( "Goat#wms01" );
		navigateto("gw_fild01",138,106);
		end;
	case 1:
		mes "[斯堪尼亚]";
		mes "我会带你去一些小狗喜欢的地方。只需处理附近任何危险的怪物即可。";
		next;
		mes "[斯堪尼亚]";
		mes "灰灵不断成群结队，令人头疼……请照顾附近的灰灵。我们通常每天能捕获大约 20 只。所以，我很感激你的帮助。";
		close;
	case 2:
		end;
	}
	end;

OnTouch_:
	if (isbegin_quest(17510) == 0)
		npctalk "嘿，伙计，即使你想出去散步，也要耐心等待一会儿。", "斯堪尼亚#wms01", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17510) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17512) == 1" );
	
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17512) == 2 && isbegin_quest(17515) == 1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17512) == 2 && isbegin_quest(17513) == 0 && isbegin_quest(17514) == 0 && (checkquest(17516,PLAYTIME) == -1 || checkquest(17516,PLAYTIME) == 2)" );
	end;
}

wolfvill,120,121,3	duplicate(dummy_cloaked_npc)	Maram#wms01	4_EP18_MARAM
wolfvill,119,117,1	duplicate(dummy_cloaked_npc)	Boksil#wms01	EP18_GREY_WOLF_BABY

// Quest: Training Grey Wolves. Step 2.
wolfvill,99,178,5	script	Aisha#wms02	4_F_SHABBY,{
	if (isbegin_quest(17512) == 1) {
		mes "[艾莎]";
		mes "我们需要向斯堪尼亚证明我们的 Boksil 是安全可靠的！";
		close;
	}
	switch( isbegin_quest(17510) ) {
	case 0:
		mes "[艾莎]";
		mes "你想看狼崽拉屎吗？有多可爱呢？哦，但是别碰它。";
		close;
	case 1:
		mes "[艾莎]";
		mes "福实~和我一起永远生活吧。如果有人来伤害你，我会亲自将他们埋在奥兹迷宫里。所以别担心，狼崽子~相信我，我们幸福地生活吧。";
		next;
		mes "[盒子]";
		mes "纬 - -";
		emotion ET_FRET, getnpcid(0,"Boksil#wms02");
		next;
		mes "[艾莎]";
		mes "不，博克西尔。冷静一点。哦亲爱的。如果你仍然表现得不熟悉，会发生什么？不，我没有对你说什么...让我们靠近点，好吗？";
		next;
		mes "[盒子]";
		mes "呜呜呜――";
		next;
		mes "[艾莎]";
		mes "我明白了，我明白了。你需要一些独处的时间。老实说，我也有同样的感觉。到最后，我们在这个世界上都是孤独的。所以，让我们在继续共同生活的同时，也好好地独自生活吧。";
		next;
		mes "[盒子]";
		mes "吼吼吼――";
		next;
		mes "[艾莎]";
		mes "为什么？我做了什么……啊？你是谁？我以前从没见过你。";
		npctalk "我们的福实，是因为有陌生人来了才变得小心翼翼吗？哦，干得好~", "艾莎#wms02", bc_self;
		npctalk "吼 -", "盒子#wms02", bc_self;
		next;
		select( "这就是小狼崽吗？" );
		mes "[艾莎]";
		mes "别离我的狼崽太近。把你的手放下。转身消失。";
		next;
		select( "我不是坏人..." );
		mes "[艾莎]";
		mes "我不称任何人为坏人。凡是叫我抛弃狼崽子的人都是坏人。而且我对恶人毫不留情。";
		next;
		select( "你来这里多久了？" );
		mes "[艾莎]";
		mes "我不能透露，因为这是个人信息。你为什么问？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "不，这只狼崽，我想他还没有受过训练。";
		next;
		mes "[艾莎]";
		mes "……不，是这样。她现在大约一个月大了。当她还是个婴儿的时候，她不可能接受训练。";
		next;
		select( "其实我来这里是为了..." );
		mes "[艾莎]";
		mes "什么？我就知道！现在离我的狼崽至少有十步远。别再靠近了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我不是来带她的，我是来看看的……如果她脱离了狼群，我们就得把它们放回去，还要做好母狼来找它们的准备。";
		next;
		mes "[艾莎]";
		mes "她并没有脱离狼群，她是在垂死的母狼旁边被捡起来的。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "哎呀。它可能因为与母亲分离并生活在一个陌生的地方而感到紧张。";
		next;
		mes "[艾莎]";
		mes "你确定不是来带她走的，那你来这里干嘛？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "确认了确实是狼崽之后，我才来劝说……";
		next;
		mes "[艾莎]";
		mes "我就知道！是斯堪尼亚发送的吧？你为什么要干涉别人的宠物？我们的狼崽没有危险，回去吧。没有什么可看的了。";
		next;
		select( "只要你小心一点，就没有什么可担心的。" );
		mes "[艾莎]";
		mes "你真的这么认为吗？你真的认为我们的狼崽可能是一个潜在的威胁吗？看看她，多么娇小，多么可爱……";
		npctalk "吼 -", "盒子#wms02", bc_self;
		npctalk "哦，博克西尔不喜欢恭维吗？好吧好吧。", "艾莎#wms02", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "正常情况下你可能会这么想，但是……如果她没有母亲，至少狼群没有理由来到这里。";
		next;
		mes "[艾莎]";
		mes "我明白你在说什么！但愚蠢的斯堪尼亚不知道这一点！就连你这样一个素不相识的人，也能如此明白我的心！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "而且，这只没有母亲的狼崽根本无法独自生存。";
		next;
		mes "[艾莎]";
		mes "这是正确的！原本冷酷无情的人，已经冷到了头顶。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "然而，为了让福克西尔住在村里，她需要接受培训。她必须学会如何与他人互动而不造成伤害以及如何相处。";
		next;
		mes "[艾莎]";
		mes "她还这么年轻……？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "应该在她年轻的时候做。如果我们从小就开始训练，就不会有村民们的担心了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "坚定的语气、即时的回应、足够的赞美就足以让它听懂了。狼很聪明，你知道的。小狼崽最喜欢什么？";
		next;
		mes "[艾莎]";
		mes "嗯……肉？但现在还没有。冒险者有吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "哦...！没有肉可以当零食，肉……我需要带点肉。";
		completequest 17510;
		setquest 17511;
		close;
	case 2:
		mes "[艾莎]";
		mes "吃肉要怎么训练呢？你只需要一个？";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17510) == 1" );
	end;
}

// Quest: Training Grey Wolves. Step 3.
wolfvill,100,177,1	script	Boksil#wms02	EP18_GREY_WOLF_BABY,{
	if (checkweight(1000405,10) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	switch( isbegin_quest(17511) ) {
	case 0:
		emotion ET_QUESTION;
		npctalk "纬？", "", bc_self;
		mes "[艾莎]";
		mes "噢，别碰我们的福克西尔！她不喜欢！";
		close;
	case 1:
		if (countitem(517) < 1) {	// Meat
			mes "[艾莎]";
			mes "你不是说你需要一块肉吗？是不是？";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "大家好~我是" + strcharinfo(0) + "。你的名字是福实，对吧？很高兴见到你。在这个陌生的地方，你是否感到焦虑？我完全了解你的感受，我了解你的一切。";
		next;
		emotion ET_FRET, getnpcid(0,"Boksil#wms02");
		mes "[盒子]";
		mes "吼吼――";
		npctalk "一切都好吗？你看起来不舒服。", "艾莎#wms02", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "但没关系。一切都很好。这里没有人会伤害我们的福克希尔。不用担心。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "现在我们都住在一起了。有了温暖的住所和美味的食物。";
		mes "然后我们需要建立一些规则。好的？";
		next;
		emotion ET_QUESTION, getnpcid(0,"Boksil#wms02");
		mes "[盒子]";
		mes "纬？";
		next;
		mes "[艾莎]";
		mes "我感觉自己就像在跟一个孩子说话。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "在这里，看。肉。博克西尔喜欢吃肉吗？烤的、生的还是水煮的？你从来没有尝试过烤吗？没关系，以后还有很多机会去尝试。";
		next;
		emotion ET_THROB, getnpcid(0,"Boksil#wms02");
		mes "[盒子]";
		mes "纬！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "让我们做对吧。";
		mes "福实，坐下！";
		mes "等待！";
		mes "干得好。这是你的肉。";
		emotion ET_THROB, getnpcid(0,"Boksil#wms02");
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你有没有看到？如果她遵循这样的指示，请给她很多赞美。";
		next;
		mes "[艾莎]";
		mes "妈妈，妈妈。我们的孩子难道不是一个真正的天才吗？";
		mes "我们的Boksil做得很好！！！！";
		emotion ET_GOODBOY, getnpcid(0,"Boksil#wms02");
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我们需要继续这样做，直到她习惯为止。重复训练很重要。继续像现在一样做就可以了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "博克希尔，坐下。";
		mes "手。";
		mes "等待。现在，你自己尝试一下。";
		next;
		mes "[艾莎]";
		mes "博克希尔，坐下！";
		mes "手！";
		mes "哇，这真是太神奇了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "训练这些家畜的方式各不相同。让他们在这个地方感到安全并与他们建立良好的联系将有助于他们很好地安顿下来。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "而且，如果他们从小就与其他朋友交往并一起度过时光，他们应该相处得很好，不会出现任何重大问题。";
		next;
		mes "[艾莎]";
		mes "人们认识到这一点吗？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "您只需要向他们展示您所做的事情即可。这表明博克西已经准备好作为这个村庄的一员生活了。";
		mes "让我们回到<NAVI>[斯堪尼亚]<INFO>wolfvill,117,119,0,101,0</INFO></NAVI>，展示我们精彩而雄伟的福克西尔。";
		delitem 517,1;	// Meat
		completequest 17511;
		setquest 17512;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		close;
	case 2:
		mes "[艾莎]";
		mes "博克西尔很可爱。但我们要去 <NAVI>[Scania]<INFO>wolfvill,117,119,0,101,0</INFO></NAVI> 对吧？别忘了。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17511) == 1 && countitem(517) > 0" );
	end;
}
//-------------------------------------------------------------------

// Quest: Training Grey Wolves. Daily.
gw_fild01,138,106,5	script	Grass#wms01	4_POINT_YELLOW,5,5,{
	if (isbegin_quest(17513) == 1) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "呀哈哈？", "山羊#wms02", bc_self;
		sleep2 2000;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		erasequest 17513;
		setquest 17514;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Already here. Do you like it here? Oh... There's no grass here. Let's look for another place. Do you have any place in mind?", bc_self;
		sleep2 1500;
		npctalk "是的！", "山羊#wms02", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		unittalk getcharid(3), "" + strcharinfo(0) + " : Already gone. Let's get Ashring!", bc_self;
		end;
	}
	if (checkquest(17514,HUNTING) == 2) {
		setpcblock PCBLOCK_NPC, true;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
		erasequest 17514;
		setquest 17515;
		unittalk getcharid(3), "Are you full?", bc_self;
		sleep2 1000;
		npctalk "呀哈哈！", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "Did Boksil take good care of the dog?", bc_self;
		sleep2 1000;
		npctalk "纬！！！", "盒子#wms03", bc_self;
		sleep2 1500;
		unittalk getcharid(3), "Good job. Let's go home!!!", bc_self;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	end;
OnTouch:
	if (isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2) {
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2" );
	end;
}

gw_fild01,160,104,0	script	Delicious grass#wms11	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2) {
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
	}
	end;
}
gw_fild01,26,101,0	duplicate(Delicious grass#wms11)	#wms01	HIDDEN_WARP_NPC,3,3

gw_fild01,138,106,3	script(CLOAKED)	Goat#wms02	EP18_GREY_GOAT,{
	if (isbegin_quest(17513) == 1) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "啊哈哈？", "", bc_self;
		sleep2 2000;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		erasequest 17513;
		setquest 17514;
		unittalk getcharid(3), "You've already been here. Do you like it? Ah.. There is no grass here. Let's find another place. Is there any place you want?", bc_self;
		sleep2 1500;
		npctalk "呀哈哈！", "", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		unittalk getcharid(3), "Already gone. Let's catch Ashling!!", bc_self;
		end;
	}
	if (checkquest(17514,HUNTING) == 2) {
		setpcblock PCBLOCK_NPC, true;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
		erasequest 17514;
		setquest 17515;
		unittalk getcharid(3), "Are you full?", bc_self;
		sleep2 1000;
		npctalk "呀哈哈！", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "Did Boksil take good care of the dog?", bc_self;
		sleep2 1000;
		npctalk "纬！！！", "盒子#wms03", bc_self;
		sleep2 1500;
		unittalk getcharid(3), "Good job. Let's go home!!!", bc_self;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	end;
}

gw_fild01,137,104,7	duplicate(dummy_npc)	Boksil#wms03	CLEAR_NPC
//-------------------------------------------------------------------



//-------------------------------------------------------------------
// Quest: Ahab's Request. Step 1 + 8 (final).
wolfvill,85,111,3	script	Zlan#ep18	4_M_RACHMAN1,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[兹兰]";
		mes "为什么要偷听别人的谈话？";
		close;
	}
	switch( isbegin_quest(16560) ) {
	case 0:
		mes "[兹兰]";
		mes "呃,又在村会上,那个老头子就是胡说八道。";
		next;
		mes "[红细胞]";
		mes "那个老头？啊，那个名字不能提的人？";
		next;
		mes "[兹兰]";
		mes "我的意思是，我不能提及它。";
		mes "听说他是拉赫尔的重要人物，据说在灰狼森林里有一定的影响力。";
		next;
		mes "[兹兰]";
		mes "那个老头，不管是阿哈还是亚哈！";
		mes "他在Rachel的时候可不是这样的~他一定是搞砸了~";
		next;
		mes "[兹兰]";
		mes "如果是这样的话，为什么还要来这里而不是留在雷切尔呢？";
		mes "我真的不明白！";
		next;
		mes "[卡尔]";
		mes "难道她还没意识到她在雷切尔身边吗？";
		mes "就连睡在通风良好的帐篷里，她还没有从梦中醒来吗？";
		next;
		mes "[兹兰]";
		mes "如果你想梦想，就独自去做吧。";
		mes "何必用自己的烦恼去打扰别人呢？";
		next;
		mes "[红细胞]";
		mes "你以为你是谁，偷听我们的谈话？";
		mes "你是亚哈老头的奸细吗？";
		next;
		mes "[卡尔]";
		mes "你连像亚哈一样聪明到无法种植杂草。";
		mes "那么，你是谁？偷听别人的八卦。可耻。";
		next;
		select( "只是一个过客。" );
		mes "[兹兰]";
		mes "说谎者。这灰狼森林里，路过的旅人在哪里？";
		mes "他们一定和我们有某种关系。";
		next;
		mes "[红细胞]";
		mes "如果你不说话，我们就只能用武力逼迫你了。";
		mes "你真的要继续撒谎吗？";
		next;
		mes "[卡尔]";
		mes "冷静点，雷德塞尔。即使兹兰不是路过的旅行者，这里仍然可能有一个我们不认识的人，但也不会显得格格不入。";
		next;
		mes "[兹兰]";
		mes "那会是谁？";
		setquest 16560;
		close;
	case 1:
		mes "[兹兰]";
		mes "现在亚哈开始听人说话了……他看起来也不像是一个坏人。";
		mes "是的，这就是成年人的沟通方式。";
		next;
		mes "[兹兰]";
		mes "令人欣慰的是，他们并没有因为只是堵着对方的耳朵大喊大叫而造成太多麻烦";
		mes "谢谢你。我很感激。";
		close;
	case 2:
		break;
	}
	if (isbegin_quest(16566) == 1) {
		mes "[兹兰]";
		mes "你回来了？亚哈说了什么？";
		mes "什么？他说他现在要开始听别人说话了？";
		next;
		mes "[兹兰]";
		mes "我猜他到现在都没在听。";
		next;
		mes "[卡亚尔]";
		mes "哼……别开玩笑了，兹兰。";
		mes "现在重要的是他决定好好做这件事。";
		next;
		mes "[红细胞]";
		mes "是啊，是啊。";
		mes "为什么达……我的意思是，亚哈改变了主意？";
		mes "你一定说服了他，因为你是位高权重或人脉广泛的人。";
		next;
		mes "[红细胞]";
		mes "多亏了你，我们再也不用把人赶出这里了。";
		mes "虽然他嘴上说要这么做，但心里还是不舒服。";
		next;
		mes "[卡亚尔]";
		mes "我可能不是村里会议的代表……但我们会表现出一些礼貌。";
		mes "我们很幸运有你这样的人。";
		completequest 16566;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes " ";
		mes "^4d4dff对您的好评出现。^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		close;
	}
	if (isbegin_quest(16566) == 2) {
		mes "[兹兰]";
		mes "现在亚哈开始听人说话了……他看起来也不像是一个坏人。";
		mes "是的，这就是成年人的沟通方式。";
		next;
		mes "[兹兰]";
		mes "令人欣慰的是，他们并没有因为只是堵着对方的耳朵大喊大叫而造成太多麻烦";
		mes "谢谢你。我很感激。";
		close;
	}
	mes "[兹兰]";
	mes "如果你不想遵守这片森林的规则，我希望你离开。";
	mes "你没有什么不同。规则就是要遵守的。";
	next;
	mes "[兹兰]";
	mes "礼仪也是如此。一个没有礼仪和规则的社会？野蛮。";
	mes "我不想陷入荒野状态！";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16560) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16566) == 1" );
	end;
}

// Quest: Ahab's Request. Step 2.
wolfvill,83,109,5	script	Karr#ep18	4W_M_03,{
	switch( isbegin_quest(16560) ) {
	case 0:
		mes "[卡尔]";
		mes "啊，真麻烦。有一个很麻烦的问题。";
		next;
		mes "[卡尔]";
		mes "人际关系出了问题，所以不想和不认识的人说话……";
		close;
	case 1:
		mes "[卡尔]";
		mes "如果是重要的客人，说话有意义吗？";
		mes "因为我们连这里领导的事都无从得知。";
		next;
		mes "[兹兰]";
		mes "这是真的吗？";
		mes "...好吧，如果这对我们来说是秘密，那么也许他们不会告诉我们。";
		next;
		mes "[红细胞]";
		mes "如果它们真的很重要，那么请听我们的。";
		mes "如果不？他们可能仍然是重要的人。听。";
		next;
		mes "[红细胞]";
		mes "那位长老……不，那只是我们之间的昵称。";
		mes "我们怎样才能帮助阿哈普先生呢？";
		next;
		mes "[兹兰]";
		mes "这家伙真是个麻烦的老家伙啊！";
		mes "他总是打断村里的会议，胡言乱语。";
		next;
		mes "[兹兰]";
		mes "他不听别人的，只是胡言乱语，根本没有用。";
		mes "他坚持说他是长辈，所以我们应该听他的，但这太令人沮丧了。";
		next;
		mes "[兹兰]";
		mes "我听说他以前在移民周围发号施令，靠他们为生。";
		mes "认为他可以根据他的过去告诉当地人该做什么是荒谬的。";
		next;
		mes "[卡尔]";
		mes "如果可以的话，我只想把他赶走。";
		mes "也许如果我们收集我们的意见并坚决主张自己的话。";
		next;
		mes "[红细胞]";
		mes "嘿嘿，就算是真的，也不对啊。";
		mes "这是无处可去的人们聚集的地方。";
		next;
		mes "[红细胞]";
		mes "如果我们把他赶走，他就无处可去。";
		next;
		mes "[兹兰]";
		mes "但我们必须永远忍受这种骗局吗？";
		mes "我也无处可去，那我可以随心所欲地演戏吗？";
		next;
		mes "[卡尔]";
		mes "如果你这样做，那么我们都会成为猜谜游戏。我受不了了...";
		next;
		mes "[红细胞]";
		mes "嘿，你，高高在上！你看起来对我们的事情很感兴趣，还在听吗？";
		mes "即使你不高大威猛，也没关系。一个涉猎广泛的人！";
		completequest 16560;
		setquest 16561;
		close;
	case 2:
		break;
	}
	if (isbegin_quest(16566) == 2) {
		mes "[卡尔]";
		mes "人们很少改变……我正在目睹这些罕见的变化之一吗？";
		next;
		mes "[卡尔]";
		mes "可能还需要更多时间，但阿哈普先生到目前为止，似乎可以成为一个好邻居。";
		close;
	}
	mes "[卡尔]";
	mes "我们村只有重要人物不参加村管理会议。";
	mes "当然，决定本身是由重要人物做出的，但仍然……";
	next;
	mes "[卡尔]";
	mes "因此，没有人会因为参加会议而干扰会议。";
	mes "除了阿哈普先生。";
	next;
	mes "[卡尔]";
	mes "我不喜欢这种态度，一点也不……";
	mes "持续的时间越长，影响就越严重。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16560) == 1" );
	end;
}

// Quest: Ahab's Request. Step 3.
wolfvill,87,109,3	script	Redcell#ep18	4_M_DESERT,{
	if (isbegin_quest(16566) == 2) {
		mes "[红细胞]";
		mes "亚哈先生，你似乎变得更容易相处了。";
		mes "虽然还有很多需要注意的地方，但与以前相比，你现在已经好多了。";
		next;
		mes "[红细胞]";
		mes "看着某人改变是一个神圣的时刻。";
		mes "我也应该更加努力地表现得像一个人。";
		close;
	}
	if (isbegin_quest(16562) == 1) {
		mes "[红细胞]";
		mes "把那个老亚哈先生变成一个人。";
		mes "一个人不应该看起来像一个人，做事也像一个人吗……？";
		next;
		mes "[红细胞]";
		mes "是不是批评太多了？ ……好吧，我承认有点过分了。";
		mes "但在一起工作之后，你就会亲眼看到。";
		close;
	}
	if (isbegin_quest(16561) == 1) {
		mes "[红细胞]";
		mes "到现在为止你都听到了吗？";
		mes "你是唯一能帮助我们解决这一痛苦的人。";
		next;
		mes "[兹兰]";
		mes "既然实在没有办法，如果实在不行的话，我会征求意见，建议驱逐出村。";
		next;
		mes "[红细胞]";
		mes "哎呀，我们先把这件事留到以后再说吧……";
		mes "但最终，这可能是最后的解决方案。";
		next;
		mes "[卡尔]";
		mes "不只是我们有烦恼，所以如果我们提出来，就会被接受。";
		mes "参加村民会议的每个人都有麻烦。";
		next;
		mes "[红细胞]";
		mes "但！让我们稍后再说吧。";
		mes "在末日到来之前帮我一点忙。兄弟。";
		next;
		mes "[卡尔]";
		mes "我们无法与那个老人沟通。";
		mes "你为什么不去和他谈谈呢？";
		next;
		mes "[红细胞]";
		mes "哇，听起来很棒。去和他谈谈，看看他为什么会这样，如果他有可能不这样的话。";
		mes "这是一个真正的一生要求。";
		next;
		mes "[兹兰]";
		mes "把它当作一生的请求。我把它存起来，等我找到爱人的时候再用。";
		next;
		mes "[红细胞]";
		mes "是的，没关系。我不会和任何人约会。";
		mes "所以这是我一生的愿望。把那个脾气暴躁的老家伙变成一个人。";
		next;
		mes "[卡尔]";
		mes "看来你的愿望越来越大了。";
		mes "不管怎样，请去做吧。去和阿哈普先生谈谈吧。";
		erasequest 16561;
		setquest 16562;
		close;
	}
	mes "[红细胞]";
	mes "一个字都听不懂的人！有人傻啊！一个让你再说一遍的人！一个在工作中表现出情感的人！";
	next;
	mes "[红细胞]";
	mes "一个人隐藏自己的错误，然后无法挽回！一个不能为自己的行为负责的人！";
	next;
	mes "[红细胞]";
	mes "实在是太恶心了！";
	next;
	mes "[红细胞]";
	mes "为什么这么多人这么讨厌你？";
	mes "不，我讨厌的只是一个人……就一个人！";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16561) == 1" );
	end;
}

// Quest: Ahab's Request. Step 4 + 6 + 7.
wolfvill,127,155,3	script	Ahab#ep18	4_M_MIDDLE1,{
	if (ep18_main < 36) {
		mes "[亚哈]";
		mes "哦，新来的一个人。你是这里的居民吗？";
		mes "呵呵，当权者很难记住所有人，这是自然的。你会明白的。";
		next;
		mes "[亚哈]";
		mes "我是谁？当然，我不是别人，正是亚哈。";
		mes "我是那个一路走到决定村里一切事情的议会的人，那就是我。";
		close;
	}
	if (isbegin_quest(16566) == 1) {
		mes "[亚哈]";
		mes "我，我也在努力。";
		mes "所以请不要赶我走。";
		next;
		mes "[亚哈]";
		mes "如果我被赶出这里，我就无处可去。";
		mes "所以我一直在努力以自己的方式做到最好。但如果大家都不喜欢我的话。";
		close;
	}
	if (isbegin_quest(16565) == 1) {
		mes "[亚哈]";
		mes "啧啧，好吧，我们来听听礼仪吧，亚哈。";
		mes "如果你再胡言乱语，我不会原谅你的！";
		next;
		select( "你知道人们不喜欢你吗，亚哈？" );
		mes "[亚哈]";
		mes "啊……我知道了！所以呢！";
		mes "是我的错吗？他们嘲笑长辈老了！";
		next;
		select( "这不是问题。", "这是你的问题，亚哈。" );
		mes "[亚哈]";
		mes "你说我有问题是什么意思！";
		mes "我没有任何问题！";
		next;
		select( "你正在考虑送我离开这里。" );
		mes "[亚哈]";
		mes "什么，你说什么？那是不可能的！";
		mes "除了这里我无处可去。";
		next;
		mes "[亚哈]";
		mes "在雷切尔……一切都很顺利……";
		mes "在当地人中，没有人像我一样成功，这是一种自豪。";
		next;
		mes "[亚哈]";
		mes "但由于与移民老板的误会……";
		mes "我失去了所有的财富，无处可去，所以我来到了这里。";
		next;
		mes "[亚哈]";
		mes "嘿。我怎样才能避免被赶出这里？";
		next;
		mes "[亚哈]";
		mes "我知道这。我在这里没有权力。";
		mes "啊？我现在没有权力，也没有金钱。我应该怎么办？";
		next;
		select( "你不需要权力和金钱。", "尊重他人。" );
		mes "[亚哈]";
		mes "嗯，我尽力了。";
		mes "我给年轻人提建议，参加村里的会议表达我的意见。";
		next;
		mes "[亚哈]";
		mes "我的努力有错吗？";
		next;
		select( "不要认为自己高人一等。" );
		mes "[亚哈]";
		mes "但我已经是成年人了！成年人期望被当作成年人对待是错误的吗？";
		next;
		select( "那么，也许你应该离开……" );
		mes "[亚哈]";
		mes "嗯嗯……我该怎么办啊！";
		next;
		select( "先别喊。", "主动提出有关情况的建议只是唠叨。", "听听别人怎么说。", "尝试了解这个地方。" );
		mes "[亚哈]";
		mes "啊……我明白了。自从我听了你的建议。";
		mes "我连声音都没有提高吧？";
		next;
		mes "[亚哈]";
		mes "我会尽力听听你的建议。";
		mes "所以……请不要把我赶出这里。";
		next;
		mes "[亚哈]";
		mes "我只是想和年轻人好好相处...";
		mes "有那么令人心烦意乱吗？是有点苦啊……";
		next;
		mes "[亚哈]";
		mes "不管怎样，谢谢你过来跟我说话，而不是立即把我赶走。";
		mes "告诉<NAVI>[其他人]<INFO>wolfvill,85,111,0,101,0</INFO></NAVI>我现在会尽力做得更好......";
		erasequest 16565;
		setquest 16566;
		close;
	}
	if (isbegin_quest(16564) == 1) {
		mes "[亚哈]";
		mes "哦，你买了黄瓜酱吗？让我看看。";
		mes "您买对了。";
		next;
		mes "[亚哈]";
		mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
		mes "我已经有一段时间没有在那个水泄不通的地方吃过一顿像样的饭了，我很饿了。";
		next;
		select( "但首先，我们来谈谈..." );
		mes "[亚哈]";
		mes "噢，你这个无礼的年轻人！";
		mes "长辈吃饭时，一定要礼貌地等到结束！";
		next;
		mes "[亚哈]";
		mes "在瑞秋，如果有像你这样的人，他们会骂我们没有学到任何东西！";
		next;
		select( "这是关于礼仪的，亚哈。" );
		mes "[亚哈]";
		mes "亚哈？亚哈？不，你是在吹牛吗，因为你现在出去办事了！";
		mes "如果你跑了两次差事，那么，哦，你就会和他们成为最好的朋友，一起吃饭！";
		next;
		mes "[亚哈]";
		mes "好啦，接下来就听听您的宝贵意见吧！";
		mes "……吃饭的时候！";
		erasequest 16564;
		setquest 16565;
		close;
	}
	if (isbegin_quest(16563) == 1) {
		mes "[亚哈]";
		mes "你为什么还不走？你听不懂我的话吗？";
		mes "唉，这里的年轻人就是学不到什么礼仪。";
		next;
		mes "[亚哈]";
		mes "赶快去<NAVI>[Munomart]<INFO>rachel,135,64,0,101,0</INFO></NAVI>买黄瓜酱吧！";
		mes "怎么，我得给你钱吗？快点走吧！";
		close;
	}
	if (isbegin_quest(16562) == 1) {
		mes "[亚哈]";
		mes "哦，新来的一个人。你是这里的居民吗？";
		mes "呵呵，当权者很难记住所有人，这是自然的。你会明白的。";
		next;
		mes "[亚哈]";
		mes "对了，你在这儿的时候能帮我一个忙吗？";
		mes "这并不难。这是一个简单的任务，即使是傻瓜也能完成。";
		next;
		mes "[亚哈]";
		mes "只是像我这样的人有不同的可用时间价值。";
		mes "当然，我的价格很贵。哈哈！";
		next;
		if (select( "我会帮你跑腿的。", "我来这里不是为了那种事。" ) == 2)
			end;
		mes "[亚哈]";
		mes "哦，你多么高贵。";
		mes "是啊，年轻人就该有一点高贵。";
		next;
		mes "[亚哈]";
		mes "你看，我吃饭时必须有一种美味的酱汁。";
		mes "没有它，我感觉我根本没有吃过任何东西......";
		next;
		mes "[亚哈]";
		mes "所以，去雷切尔那里买一些酱汁。";
		mes "如果你在 Munomart 点黄瓜酱，他们会理解的。";
		next;
		mes "[亚哈]";
		mes "快点，不然就坏了。只需从 <NAVI>[Munomart]<INFO>rachel,135,64,0,101,0</INFO></NAVI> 购买一瓶即可。";
		mes "新鲜度是好味道的关键。";
		erasequest 16562;
		setquest 16563;
		close;
	}
	mes "[亚哈]";
	mes "在会议上，我尽量保持谦虚。";
	mes "随后，少年的眼神变得柔和起来……";
	next;
	mes "[亚哈]";
	mes "我觉得可能说这不是改变，而是一种态度，世界在改变，可能有点过分了。没有人是不改变的。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16562) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16564) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16565) == 1" );
	end;
}

// Quest: Ahab's Request. Step 5.
rachel,135,64,3	script	Shopkeeper#ep18	4_M_RACHMAN2,{
	if (isbegin_quest(16563) == 1) {
		mes "[店主]";
		mes "欢迎光临，这里是 Munomart 杂货店。";
		mes "您在寻找什么成分？";
		next;
		if (select( "奥比雷格酱", "上面酱汁", "奥格酱", "奥格酱" ) != 3) {
			mes "[店主]";
			mes "唔？我们没有那个酱。";
			mes "我以前从未听说过这个名字的酱汁。";
			close;
		}
		mes "[店主]";
		mes "啊，奥格酱！让我看看...就是这里。";
		mes "这个酱汁里面有黄瓜和酸奶，所以很清爽。涂在面包上味道很好。";
		next;
		mes "[店主]";
		mes "你想要几个？一？干得好。";
		mes "存放于阴凉处，开封后尽快食用。";
		erasequest 16563;
		setquest 16564;
		close;
	}
	mes "[店主]";
	mes "欢迎光临，这里是 Munomart 杂货店。";
	mes "是的，这是雷切尔最好的杂货店。";
	next;
	mes "[店主]";
	mes "大多数餐厅都使用我们的食材。";
	mes "只要把它们带回家，加热，煮熟，瞧！很快你就能吃到一顿美餐了！";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16563) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Collecting Folklore. Step 1 + 5 (final).
wolfvill,61,170,5	script	Folklorist Gudra#ep18	4_F_SHABBY,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[民俗学家古德拉]";
		mes "我猜你一定是这里的新村民。你是谁？";
		close;
	}
	switch( isbegin_quest(16554) ) {
	case 0:
		if ((isbegin_quest(16551)+isbegin_quest(16552)+isbegin_quest(16553)) == 0) {
			select( "学者，你在做什么？" );
			mes "[民俗学家古德拉]";
			mes "哦，哦哦。";
			mes "……你觉得我像个学者吗？";
			next;
			select( "你不是学者？" );
			mes "[民俗学家古德拉]";
			mes "不！我曾经是一名学者。很久以前了。";
			mes "我很高兴外面有人立即认出我是学者。";
			next;
			mes "[民俗学家古德拉]";
			mes "嗯，嗯。你问我在做什么。";
			mes "我正在整理收集的故事。";
			next;
			mes "[民俗学家古德拉]";
			mes "这是关于收集流传给我们的神话和民间故事。";
			mes "这也是为了保护土著人民的宝贵文化遗产。";
			next;
			mes "[民俗学家古德拉]";
			mes "为了确保这些故事不被遗失并能够传承给后代，我们将把它们出版成书。";
			next;
			mes "[民俗学家古德拉]";
			mes "看来你很感兴趣。";
			mes "……你对这项工作感兴趣吗？";
			next;
			if (select( "有兴趣。", "不感兴趣。" ) == 2)
				end;
			mes "[民俗学家古德拉]";
			mes "那么，你的兴趣意味着你愿意提供帮助？";
			mes "随时欢迎额外的帮助。如果您能提供帮助，我会很高兴。";
			next;
			mes "[民俗学家古德拉]";
			mes "你知道怎么写吗？出色的。";
			mes "请收集村民的故事。";
			next;
			mes "[民俗学家古德拉]";
			mes "我答应听听村里一名孩子、一名年轻人和一名祖母的故事。";
			next;
			mes "[民俗学家古德拉]";
			mes "他们说这是一个很长的故事，所以我们可能不是一天就能讲完的。我们需要您的耐心。";
			mes "在这里，我给你一个收集故事的笔记本。";
			next;
			mes "[民俗学家古德拉]";
			mes "孩子的名字叫第纳尔。这个年轻人是一位名叫阿米拉的女性。";
			mes "之后，你可以去找仙妮亚奶奶，写下她的故事。";
			setquest 16551;
			setquest 16552;
			setquest 16553;
			getitem 1000408,1;	// Ep18_Recording_Note
			close;
		}
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		mes "[民俗学家古德拉]";
		mes "我们承诺要听村里一名儿童、一名年轻人和一名祖母的故事。";
		next;
		mes "[民俗学家古德拉]";
		mes "由于这是一个很长的故事，不可能一天听完，因此我们需要您的耐心来帮助我们完成它。";
		next;
		mes "[民俗学家古德拉]";
		mes "孩子的名字叫第纳尔。这位年轻女子名叫阿米拉。";
		mes "接下来，去沙妮娜奶奶家，听她讲故事，并把它写下来。";
		close;
	case 1:
		mes "[民俗学家古德拉]";
		mes "第纳尔和阿米拉，你们是来给莎妮娜奶奶讲故事的吗？";
		mes "我很高兴听到他们的故事。请给我看看笔记本。";
		next;
		mes "[民俗学家古德拉]";
		mes "这是阿米拉给你讲的故事吗？";
		mes "真是丰富多彩又精彩！我还记得小时候听过有关这些神的故事。";
		next;
		mes "[民俗学家古德拉]";
		mes "不过这个故事里的兽神的名字和我小时候听到的差不多，但又有些不同。";
		mes "嗯，我需要做一些研究。";
		next;
		mes "[民俗学家古德拉]";
		mes "这些都是激发我研究兴趣的精彩故事！";
		mes "以后请继续为我记录Amira的故事。";
		next;
		mes "[民俗学家古德拉]";
		mes "如果您明天能回来记录这个故事的下一部分，我将不胜感激。";
		mes "谢谢。这是你今天工作的报酬。";
		delitem 1000408,1;	// Ep18_Recording_Note
		completequest 16554;
		setquest 16559;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes " ";
		mes "^4d4dff对您的好评出现。^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		close;
	case 2:
		break;
	}
	switch( checkquest(16559,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[民俗学家古德拉]";
		mes "尽管我今天很想听听所有的故事......";
		mes "你们、冒险者和人民都会疲惫不堪。";
		next;
		mes "[民俗学家古德拉]";
		mes "剩下的一天好好休息，天亮后再回来。";
		mes "在那段时间里，我会整理和分析你收集到的故事。";
		close;
	case 2:
		erasequest 16559;
		break;
	}
	switch( isbegin_quest(16558) ) {
	case 0:
		if ((isbegin_quest(16555)+isbegin_quest(16556)+isbegin_quest(16557)) == 0) {
			mes "[民俗学家古德拉]";
			mes "我们感谢您上次的光临。";
			mes "今天，我们也想记录一下我们的谈话。";
			next;
			mes "[民俗学家古德拉]";
			mes "迪纳尔和阿米拉，请去找莎妮娜奶奶，听听她的故事，然后写下来。";
			mes "这是给您的一些空白笔记本。";
			next;
			if (select( "我去。", "现在很难。" ) == 2) {
				mes "[民俗学家古德拉]";
				mes "啊，现在很难吗？没关系，我们可以稍后再做。";
				mes "请记住，这项工作需要耐心和毅力。";
				next;
				mes "[民俗学家古德拉]";
				mes "我们已经是同一条道路上的同事了，不是吗？";
				mes "如果很难的话，你可以休息一下。只要我们继续稳步前行。";
				close;
			}
			mes "[民俗学家古德拉]";
			mes "感谢您始终愿意提供帮助。";
			mes "我会写一本好故事书来报答这份恩情。";
			next;
			mes "[民俗学家古德拉]";
			mes "哦，当然，我也会确保你今天的工作得到报酬。";
			mes "这也很重要，不是吗？我明白。";
			setquest 16555;
			setquest 16556;
			setquest 16557;
			getitem 1000408,1;	// Ep18_Recording_Note
			close;
		}
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		break;
	case 1:
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		mes "[民俗学家古德拉]";
		mes "第纳尔和阿米拉，你们带来了莎妮娜奶奶的故事吗？";
		mes "我很高兴听到它们是什么样的故事。请给我看看笔记本。";
		next;
		mes "[民俗学家古德拉]";
		mes "阿米拉的故事也包含许多我熟悉的神话。";
		mes "这些故事是这里所有原住民都听过并伴随长大的。";
		next;
		mes "[民俗学家古德拉]";
		mes "当然，和我所知道的神话有些出入……";
		mes "但研究这些差异和共性正是我的工作，不是吗？";
		next;
		mes "[民俗学家古德拉]";
		mes "这些故事激发了我的研究好奇心！";
		mes "我希望你继续抄写阿米拉的故事。";
		next;
		mes "[民俗学家古德拉]";
		mes "如果您明天能回来抄写这个故事的下一部分，我将不胜感激。";
		mes "谢谢。这是你今天工作的报酬。";
		delitem 1000408,1;	// Ep18_Recording_Note
		erasequest 16555;
		erasequest 16556;
		erasequest 16557;
		erasequest 16558;
		setquest 16559;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close;
	case 2:	// shouldn't happen
		break;
	}
	mes "[民俗学家古德拉]";
	mes "迪纳尔和阿米拉，请去莎妮奶奶家听听她的故事并写下来。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(16554) == 0 && isbegin_quest(16551) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16554) == 1" );

	// note: QTYPE_DAILYQUEST to take the quest, QTYPE_QUEST otherwise
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16554) == 2 && isbegin_quest(16558) == 0 && isbegin_quest(16555) == 0 && (checkquest(16559,PLAYTIME) == -1 || checkquest(16559,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16554) == 2 && isbegin_quest(16558) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 2.
wolfvill,106,224,3	script	Dinar#ep18	4_F_DST_CHILD,{
	if (isbegin_quest(16551) == 1) {
		mes "[第纳尔]";
		mes "你是来听我的故事的吧？";
		mes "哦，是这样。我答应过古德拉奶奶！";
		next;
		mes "[第纳尔]";
		mes "嗯，嗯。我会告诉你一次，所以请仔细写下来。";
		mes "这是我真实经历过的事情。";
		next;
		select( "不只是谣言？" );
		mes "[第纳尔]";
		mes "什么是谣言？无论如何，请注意！";
		mes "很久以前，当我还年轻的时候。";
		next;
		select( "现在你还年轻..." );
		mes "[第纳尔]";
		mes "哦，你老是打扰！";
		mes "灰狼森林的灰狼之中，有一只看起来像是领头者……";
		completequest 16551;
		if (isbegin_quest(16552) == 2 && isbegin_quest(16553) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16555) == 1) {
		mes "[第纳尔]";
		mes "今天你又来听我的故事了！";
		mes "古德拉阿姨说她稍后会把它写成一本书。";
		next;
		mes "[第纳尔]";
		mes "嗯……我们上次说到哪儿了？";
		mes "我们是不是在龙与仙最后对决的场景中停了下来？";
		next;
		mes "[第纳尔]";
		mes "当巨龙最后一次召唤金属巨塔时，仙女则召唤巨大的火之精灵与之对抗……";
		completequest 16555;
		if (isbegin_quest(16557) == 2 && isbegin_quest(16556) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[第纳尔]";
	mes "我真的很喜欢读有趣的故事。";
	mes "阅读并想象下一个故事会更好！";
	next;
	mes "[第纳尔]";
	mes "这些人物，他们在我的脑海里栩栩如生。";
	mes "我只需要像看戏一样看他们。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16551) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16555) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 3.
wolfvill,180,204,3	script	Amira#ep18	4_F_DESERT,{
	if (isbegin_quest(16552) == 1) {
		mes "[阿米拉]";
		mes "你是被古陀罗修女问到才来的吗？";
		mes "她提出了一个奇怪的要求。她想听一个我知道的古老的……故事。";
		next;
		mes "[阿米拉]";
		mes "不管怎样，我答应在来灰太狼森林之前，把我从爷爷那里听到的故事讲给大家听。";
		next;
		mes "[阿米拉]";
		mes "你准备好听了吗？好吧，我慢慢告诉你。";
		mes "世界上的神远比我们所知的多......";
		completequest 16552;
		if (isbegin_quest(16551) == 2 && isbegin_quest(16553) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16556) == 1) {
		mes "[阿米拉]";
		mes "今天你又来执行古德拉修女的任务了。";
		mes "她想用这些故事做什么？";
		next;
		mes "[阿米拉]";
		mes "不管怎样，我会告诉你接下来的故事。";
		mes "这也是我们祖父告诉我们的故事，有些神仍然......";
		next;
		mes "[阿米拉]";
		mes "……那么，呃，名字叫什么？我记不太清楚了，但无论如何，重要的是……";
		completequest 16556;
		if (isbegin_quest(1655) == 2 && isbegin_quest(16557) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[阿米拉]";
	mes "我们的祖父是这么说的。重要的是不要忘记我们的神。";
	mes "这就是为什么他告诉我所有这些故事。";
	next;
	mes "[阿米拉]";
	mes "我听过很多故事，但现在有些我已经忘记了......";
	mes "如果古德拉修女把它们写成一本书，我就不会再忘记它们了。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16552) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16556) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 4.
wolfvill,154,184,5	script	Shanina#ep18	4_F_DST_GRAND,{
	if (isbegin_quest(16553) == 1) {
		mes "[莎妮娜]";
		mes "啊，格德拉的任务？你是来听一个古老的故事的，不是吗？";
		mes "我给你讲一个故事。这是一个非常古老的故事，也许不是每个人都喜欢，但这是我祖母曾经告诉我的一个。";
		next;
		mes "[莎妮娜]";
		mes "担心不好玩？不用担心。这将是一次愉快的消遣。";
		next;
		mes "[莎妮娜]";
		mes "所以，很久很久以前。在很久以前，有一个铁匠......";
		completequest 16553;
		if (isbegin_quest(16551) == 2 && isbegin_quest(16552) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16557) == 1) {
		mes "[莎妮娜]";
		mes "你又来执行古德拉的任务了。你真够勤奋的，不是吗？";
		mes "你说我讲的故事还不错，不是吗？";
		next;
		mes "[莎妮娜]";
		mes "如果它对古德拉有帮助，我很高兴。";
		mes "我们的故事进展到什么程度了？今天是时候讲新故事了吗？";
		next;
		mes "[莎妮娜]";
		mes "哦，最后一个故事还没完吧？我的记忆有点模糊了。";
		mes "我有没有提到铁匠骑着猫头鹰从天而降？";
		next;
		mes "[莎妮娜]";
		mes "是的，我的记忆力很好。";
		mes "那么请讲下一部分。可怜的仙女……";
		completequest 16557;
		if (isbegin_quest(16555) == 2 && isbegin_quest(16556) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[莎妮娜]";
	mes "我现在的生活没有太多的兴奋，但是给小孩子们讲古老的故事是很有趣的。";
	next;
	mes "[莎妮娜]";
	mes "我很感激有人愿意倾听。祝福他们。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16553) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16557) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Purifying Water. Step 1 + 4 (final).
wolfvill,103,230,3	script	Budan#ep18	4_M_RACHMAN1,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[醒来]";
		mes "外人从这里进进出出。";
		mes "如果你只是出于好奇而四处探听的话，我不能让你进来。";
		close;
	}
	switch( isbegin_quest(8693) ) {
	case 0:
		if (isbegin_quest(8691) == 1 || isbegin_quest(8692) == 1) {
			mes "[醒来]";
			mes "如果你走到寺庙前，那天可能会有善信前来行善。";
			mes "说几句话就买了。";
			mes "我求求你。";
			close;
		}
		// isbegin_quest(8691) == 0
		mes "[醒来]";
		mes "我们听说你一直在插手我们的生意......";
		mes "我还听说他们会教你如何轻松做到这一点。";
		mes "你也能帮我吗？";
		next;
		mes "[醒来]";
		mes "正如你所看到的，我们无法轻易找到雷切尔。";
		mes "所以这件事我真的希望你能帮我，冒险者。";
		next;
		mes "[醒来]";
		mes "我想让你给我一些只能在雷切尔的塞斯拉姆尼尔神庙制作的东西。";
		mes "正如您所看到的，由于雷切尔周围地区有火山灰和沙子，该地区很难获得干净的水。";
		next;
		mes "[醒来]";
		mes "所以我开发了一个净水神器......";
		mes "这东西确实是通过某种不为人知的神奇过程吸收了水中的污垢。";
		mes "甚至各种杂七杂八的神通。";
		next;
		mes "[醒来]";
		mes "就连蕴藏着这片森林神秘魔力的硫磺泉水，也可以变成饮用水。";
		mes "但魔法不会持续太久……所以你必须在需要时购买。";
		next;
		mes "[醒来]";
		mes "你明白了。";
		mes "我可以寻求帮助吗？";
		mes "即使我们无论如何都去...他们也不会卖给我们。";
		next;
		mes "[醒来]";
		mes "假装是一个商人，路过瑞秋，悄悄买了一个，放在那边的水箱里。";
		mes "然后您将获得完全净化的干净水。";
		mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
		next;
		if (select( "不会很难", "会很难" ) == 2) {
			mes "[醒来]";
			mes "如果你很忙，那就这样吧。";
			close;
		}
		mes "[醒来]";
		mes "这是一个很长的故事，但谢谢你的简短回答。";
		next;
		setquest 8691;
		mes "[醒来]";
		mes "如果你去寺庙，那天可能会有信徒出来做善事。";
		mes "说几句话就买了。";
		mes "请帮我一个忙。";
		close;
	case 1:
		if (countitem(1000411) < 1) {
			mes "[醒来]";
			mes "如果你去寺庙，那天可能会有信徒出来做善事。";
			mes "说几句话就买了。";
			mes "请帮我一个忙。";
			close;
		}
		delitem 1000411,1;	// Ep18_Purified_Bucket
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		completequest 8693;
		setquest 8694;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff灰太狼的村民已经接受你作为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
			next;
		}
		mes "[醒来]";
		mes "我们已经喝了一段时间的好水了。";
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(8694,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[醒来]";
		mes "我有一段时间有充足的饮用水。";
		close;
	case 2:
		erasequest 8694;
		break;
	}
	if (isbegin_quest(8695) == 1 || isbegin_quest(8696) == 1) {
		mes "[醒来]";
		mes "如果你去寺庙，那天可能会有信徒出来做善事。";
		mes "说几句话就买了。";
		mes "请帮我一个忙。";
		close;
	}
	if (isbegin_quest(8697) == 1) {
		if (countitem(1000411) < 1) {
			mes "[醒来]";
			mes "如果你走到寺庙前，那天可能会有善信前来行善。";
			mes "说几句话就买了。";
			mes "我求求你。";
			close;
		}
		delitem 1000411,1;	// Ep18_Purified_Bucket
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		// erasequest 8695;
		// erasequest 8696;
		erasequest 8697;
		setquest 8694;
		getexp 18252408,2000000;
		mes "[醒来]";
		mes "感谢您帮助我确保饮用水。然后我会把这个煮沸并准备一顿饭。";
		mes "如果您明天有时间留在这里，我可以询问另一条去雷切尔的路线吗？";
		next;
		select( "我", "我想我明天会很忙" );
		mes "[醒来]";
		mes "你的回答快吗？";
		mes "抱歉长途旅行。但我想给我的孩子吃一些安全的东西。谢谢。";
		close;
	}
	mes "[醒来]";
	mes "冒险家，你回来了。";
	mes "你有时间去雷切尔吗？";
	next;
	mes "[醒来]";
	mes "假装是一个商人，路过瑞秋，悄悄买了一个，放在那边的水箱里。";
	mes "然后您将获得完全净化的干净水。";
	mes "你只需要将它带给我即可。";
	next;
	if (select( "不会很难", "会很难" ) == 2) {
		mes "[醒来]";
		mes "如果你很忙，那就这样吧。";
		close;
	}
	mes "[醒来]";
	mes "这是一个很长的故事，但谢谢你的简短回答。";
	next;
	setquest 8695;
	mes "[醒来]";
	mes "如果你去寺庙，那天可能会有信徒出来做善事。";
	mes "说几句话就买了。";
	mes "请帮我一个忙。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8691) == 0 && isbegin_quest(8692) == 0 && isbegin_quest(8693) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8693) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8693) == 2 && (checkquest(8694,PLAYTIME) == -1 || checkquest(8694,PLAYTIME) == 2) && isbegin_quest(8695) == 0 && isbegin_quest(8696) == 0 && isbegin_quest(8697) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8697) == 1" );
	end;
}

// Quest: Purifying Water. Step 2.
rachel,103,141,5	script	Salesman#ep18	4_M_DESERT,{
	if (checkweight(1000405,20) == 0) {
		mes "- 你无法继续任务，因为你拥有太多物品。 -";
		close;
	}
	if (isbegin_quest(8692) == 1 && countitem(1000410) > 0) {
		mes "[推销员]";
		mes "愿你平安~";
		close;
	}
	if (isbegin_quest(8691) == 1 || isbegin_quest(8692) == 1 && countitem(1000410) < 1) {
		mes "[推销员]";
		mes "今天我们有圣水舍利~！";
		mes "早点来，还没卖完哦~！";
		next;
		mes "[推销员]";
		mes "啊？";
		mes "外地人，我能帮你什么忙？";
		next;
		select( "我需要它才能到达顶部" );
		mes "[推销员]";
		mes "唉，谣言你都听到了~";
		mes "我简单解释一下吧~";
		mes "它是一件开光的净化圣物，可以一次净化大量的污染水。";
		mes "就是这个啦~";
		next;
		mes "[推销员]";
		mes "这是寺庙里做的~";
		mes "现在水道维护得很好，需求量就不那么大了~";
		mes "我只赚了一点钱~";
		mes "材料好难找啊~";
		next;
		mes "[推销员]";
		mes "过几天就需要了，所以不能批量购买~";
		mes "但是～一次可以净化的水量是有限的～";
		next;
		mes "[推销员]";
		mes "如果你在去目的地的路上没水了，并且你有合适的补水站，就可以使用该物品了~";
		mes "比拎水还好~";
		next;
		mes "[推销员]";
		mes "不过水一定要烧开哦~";
		mes "有人说有味道~";
		next;
		mes "[推销员]";
		mes "550 Zeny。~";
		next;
		if (select( "买", "不要买" ) == 2) {
			mes "[推销员]";
			mes "需要的就买吧~";
			mes "愿芙蕾雅女神保佑你~";
			close;
		}
		if (Zeny < 550) {
			mes "[推销员]";
			mes "你的 Zeny 还不够。";
			close;
		}
		Zeny -= 550;
		if (isbegin_quest(8691) == 1) {
			erasequest 8691;
			setquest 8692;
		}
		getitem 1000410,1;	// Ep18_Water_Filter
		mes "[推销员]";
		mes "这是商品~";
		mes "愿女神芙蕾雅保佑你。";
		close;
	}
	if (isbegin_quest(8695) == 1 || isbegin_quest(8696) == 1 && countitem(1000410) < 1) {
		mes "[推销员]";
		mes "简直就是当今鱼精的圣物啊~";
		mes "售完之前赶紧下手吧~";
		next;
		mes "[推销员]";
		mes "啊，上次你登顶是吗？";
		mes "你回来得比预想的要早。看来生意很顺利啊~";
		next;
		switch( select( "购买圣物", "听讲解", "取消" ) ) {
		case 1:
			break;
		case 2:
			end;
		case 3:
			end;
		}
		mes "[推销员]";
		mes "这是550珍妮~";
		next;
		if (select( "买", "不要买" ) == 2)
			end;
		if (Zeny < 550) {
			mes "[推销员]";
			mes "你的 Zeny 还不够。";
			close;
		}
		Zeny -= 550;
		if (isbegin_quest(8695) == 1) {
			erasequest 8695;
			setquest 8696;
		}
		getitem 1000410,1;	// Ep18_Water_Filter
		mes "[推销员]";
		mes "东西来了~";
		mes "愿芙蕾雅女神保佑你~";
		close;
	}
	mes "[推销员]";
	mes "今天的净水舍利刚刚出炉啦~";
	mes "每个人面前只有一张。现在，快来吧~";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8691) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8695) == 1" );
	end;
}

// Quest: Purifying Water. Step 3.
wolfvill,104,235,0	script	Water barrel#ep1801	CLEAR_NPC,{
	if (isbegin_quest(8692) == 1 || isbegin_quest(8696) == 1) {
		if (countitem(1000410) < 1)
			end;
		if (checkweight(1000411,1) == 0) {
			mes "- 等一下 ！！ -";
			mes "- 目前你携带的是 -";
			mes "- 你身上带的东西太多了。 -";
			mes "- 请再试一次 -";
			mes "- 减肥后。 -";
			close;
		}
		specialeffect EF_BLUECASTING;
		specialeffect EF_STOPEFFECT;
		specialeffect EF_HEALSP;
		specialeffect EF_SMOKE;
		delitem 1000410,1;	// Ep18_Water_Filter
		getitem 1000411,1;	// Ep18_Purified_Bucket
		if (isbegin_quest(8692) == 1)
			changequest 8692,8693;
		else
			changequest 8696,8697;
		mes "我以为那是比较干净的水，但当我把圣物放进去的时候，它发出明亮的光芒，给我一种神圣的感觉。";
		mes "当光线减弱时，水看起来很干净。";
		next;
		mes "我会把它装进桶里带到布丹去。";
		close;
	}
	mes "这是一个盛水容器，盛放全村使用的饮用水。";
	mes "一侧含有干净的水，另一侧含有相对干净的水。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8692) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8696) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Transporting Goods. Step 1 + 3.
wolfvill,53,234,0	script	#ep18_wp01	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ep18_main < 36)
		end;
	cloakoffnpcself( "Hazar#ep18_1" );
	cloakoffnpcself( "Camille#ep18_1" );
	cloakoffnpcself( "Transport Cart#ep18_1" );
	end;
}

wolfvill,50,234,6	script(CLOAKED)	Hazar#ep18_1	4_EP18_HAZAR,{
	if (ep18_main < 36)
		end;
	switch( isbegin_quest(12532) ) {
	case 0:
		mes "^0000ff一位老人正在责骂一位年轻人。^000000";
		next;
		npctalk "我有没有告诉过你我今天必须离开吗？", "里海#ep18_1", bc_self;
		next;
		npctalk "是的，你做到了。", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "这辆购物车出了什么问题？车轮上有金子吧？你是不是换了新轮子，还是我的眼睛太老了，看不见了？", "里海#ep18_1", bc_self;
		next;
		npctalk "对不起！我赶紧寻找新轮子，但找不到任何备件......", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "往上游走，物品中应该有三十块皮革，但我好像看不到。这也是我眼睛的问题吗？", "里海#ep18_1", bc_self;
		next;
		emotion ET_HUK, getnpcid(0,"Camille#ep18_1");
		npctalk "哎呀！", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "拉车的牛现在去哪儿了？我一定是老了，看来我现在该退休了。我看不到购物车前面有任何东西。", "里海#ep18_1", bc_self;
		next;
		npctalk "对不起。我很快就到！", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "你们招募了护卫骑士吗？为什么没有人出现？你肯定不会指望我一个人拉这辆马车吧。", "里海#ep18_1", bc_self;
		next;
		npctalk "那是……主人，我尝试招募同行，但没有人自愿。", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "你无意逆流而上，卡米尔……你在想什么？", "里海#ep18_1", bc_self;
		next;
		npctalk "......", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "稍后我会详细询问准备过程中的不足之处，但现在我们先关注实际问题。", "里海#ep18_1", bc_self;
		next;
		npctalk "交易日期已定，上游马车必须出发。我们需要解决车轮和上游物品不足的问题。你打算如何解决？", "里海#ep18_1", bc_self;
		next;
		npctalk "嗯……暂时先调整皮革数量吧！ Uma已经派人来了，应该很快就能准备好", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "面对马车的轮子我们该怎么办？它们看起来很不稳定，走几步就可能倒塌。", "里海#ep18_1", bc_self;
		next;
		if (select( "干扰", "忽略" ) == 2) {
			mes "^0000ff干涉没有什么好处，所以我们就走自己的路吧。^000000";
			close;
		}
		npctalk "唔？你想和我们做什么？我们的马车轮子已经够麻烦了。别打扰我们....", "里海#ep18_1", bc_self;
		next;
		select( "描述如何修复" );
		unittalk getcharid(3), "" + strcharinfo(0) + " : If we reinforce the wheel with a strong cord, it should roll somehow, don't you think?", bc_self;
		next;
		npctalk "哦，这个人。马车的轮子不像木椅什么的……不，这可能吗？", "里海#ep18_1", bc_self;
		next;
		if (select( "至少尝试一下不是一个好主意吗？", "确实，这似乎不可能。" ) == 2) {
			mes "^0000ff我们现在停止参与^000000";
			close;
		}
		npctalk "冒险家。我负责这次攀登。如果冒险家解决了车轮问题，我们将根据我们部落的愿景向冒险家支付相应的经验值", "卡米尔#ep18_1", bc_self;
		next;
		if (select( "好吧！", "我想这行不通。" ) == 2)
			end;
		npctalk "谢谢。您能看一下这里的这辆马车吗？", "卡米尔#ep18_1", bc_self;
		specialeffect 1090, AREA, "Transport Cart#ep18_1";
		next;
		npctalk "如果您能加固这辆马车的轮子以供探险使用，我将不胜感激。谢谢。我要去检查一下探险所用的皮革，所以我要离开一会儿。", "卡米尔#ep18_1", bc_self;
		setquest 12532;
		cloakonnpcself( "Camille#ep18_1" );
		close;
	case 1:
		npctalk "嗯，我不确定你是否真的能修好那个马车轮，但我会给你一个无罪推论。", "里海#ep18_1", bc_self;
		end;
	case 2:
		break;
	}
	switch( isbegin_quest(12533) ) {
	case 0:
		mes "^0000ff哈扎尔以友善的目光注视着<<<CLR1>>>";
		next;
		npctalk "啊……你有一项很有趣的技能，不是吗？", "里海#ep18_1", bc_self;
		next;
		npctalk "顺便问一下，卡米尔整理完事情了吗？", "里海#ep18_1", bc_self;
		next;
		npctalk "主人，我已经确认了这次探险所需的所有物资。现在，我们只需检查一下车厢，然后就可以出发了……", "卡米尔#ep18_1", bc_self;
		next;
		npctalk "这里的冒险家已经照顾好车轮了。请表达我们的谢意。", "里海#ep18_1", bc_self;
		next;
		npctalk "非常感谢你，冒险家。当您探险归来时，请来拜访我们。你介意分享你的名字吗？", "卡米尔#ep18_1", bc_self;
		next;
		select( "我的名字是" + strcharinfo(0) + " 就这样。" );
		select( "由于路途遥远，我们暂时出发吧。" );
		npctalk "你是对的。我现在需要出发去探险了。我回来后一定会来迎接你。" + strcharinfo(0) + "那么好吧。我现在就出发了，主人。", "Camille#ep18_1", bc_self;
		next;
		cloakonnpcself( "Camille#ep18_1" );
		cloakonnpcself( "Transport Cart#ep18_1" );
		npctalk "谢谢你帮助我解决我的缺点。尽管我很聪明，但我却容易想太多，无意间暴露了自己可耻的一面。", "里海#ep18_1", bc_self;
		next;
		npctalk "我不能保证那个家伙是否能毫发无损地完成这次探险。如果我的身体状况更好的话，我就会带领这次探险。", "里海#ep18_1", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "当然，如果您有时间的话，能否再帮老夫一个忙？", "Hazar#ep18_1", bc_self;
		next;
		select( "请继续告诉我" );
		npctalk "卡米尔第一次指挥这次探险，这让我在很多方面感到不安。不知道他们是否能够避开怪物的攻击。", "里海#ep18_1", bc_self;
		next;
		npctalk "那么，我想问的是，你能在跟在他后面的时候，在后面看着他吗？我不能提供太多，但我真诚地请求您的帮助。", "里海#ep18_1", bc_self;
		next;
		if (select( "我接受", "我拒绝" ) == 2)
			end;
		npctalk "不客气。确实，我很感激你。" + strcharinfo(0) + "", "Hazar#ep18_1", bc_self;
		setquest 12533;
		close;
	case 1:
		mes "^0000ff哈扎尔以友善的目光注视着<<<CLR1>>>";
		next;
		npctalk "那么，我也该回去履行自己的职责了。", "里海#ep18_1", bc_self;
		cloakonnpcself( "Hazar#ep18_1" );
		close;
	case 2:
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8692) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12532) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12533) == 0 && isbegin_quest(12532) == 2" );
	end;
}

// Quest: Transporting Goods. Step 2.
wolfvill,53,234,4	script	Transport Cart#ep18_1	4_EP18_WAGON,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12532) == 1) {
		mes "^0000ff虽然看起来不错，但有一个磨损的车轮..^000000";
		next;
		if (select( "尝试维修工作", "停止维修工作" ) == 2) {
			mes "^0000ff让我们稍后再想到这一点。^000000";
			close;
		}
		progressbar_npc "FFFF00",2;
		if (countitem(7197) < 1) {
			mes "适用于加固马车轮的材料<ITEM>[坚韧的藤蔓]<INFO>7197</INFO></ITEM>不可用。";
			close;
		}
		// note: Tough_Vines not deleted on fail
		.@r = rand(1,5);
		if (.@r == 1) {
			specialeffect EF_REFINEOK;
			mes "^0000ff修复成功！^000000";
			delitem 7197,1;	// Tough_Vines
			removespecialeffect 1090;
			completequest 12532;
			close;
		}
		specialeffect EF_REFINEFAIL;
		mes "^0000ff似乎还没有得到适当的强化。素材并没有消失，我们继续努力^000000";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12532) == 1" );
	end;
}

wolfvill,56,234,4	script(CLOAKED)	Camille#ep18_1	4_EP18_KAMIL,{
	mes "^0000ff他看起来很专注，也许是被哈扎尔骂了^000000";
	close;
}

// Quest: Transporting Goods. Step 4.
gw_fild01,115,130,0	script	#ep18_wp02	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(12533) == 1)
		cloakoffnpcself( "Transport Cart#ep18_2" );
	end;
}

gw_fild01,115,130,4	script(CLOAKED)	Transport Cart#ep18_2	4_EP18_WAGON,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12533) == 1) {
		mes "^0000ff很明显，卡米尔率领的马车已经离开了。从货物散落的情况来看，肯定是发生了什么不好的事情。我需要找到卡米尔。^000000";
		completequest 12533;
		setquest 12534;
		close;
	}
	mes "^0000ff看来大部分货物已经丢失了。^000000";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12533) == 1" );
	end;
}

// Quest: Transporting Goods. Step 5.
gw_fild01,202,102,0	script	#ep18_wp03	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(12534) == 1) {
		cloakoffnpcself( "#ep18_2_mon" );
		cloakoffnpcself( "Camille#ep18_2" );
		end;
	}
	if (isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0) {
		cloakoffnpcself( "Camille#ep18_2" );
		end;
	}
	end;
}

gw_fild01,205,102,4	script(CLOAKED)	#ep18_2_mon	EP18_GREY_WOLF,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12534) != 1)
		end;
	.@wolf_hp = 1000;
	.@camille_hp = 1000;

	mes "^0000ff情况似乎不太有利。^000000";
	next;
	npctalk "呃呃……", "#ep18_2_mon", bc_self;
	next;
	npctalk "好悲伤", "卡米尔#ep18_2", bc_self;
	next;
	mes "^0000ff我快要崩溃了。无法集中注意力攻击哪里，我的眼睛毫无节制地转动着。可能连一秒钟都坚持不了，成为狼群的一顿美餐^000000";
	next;
	while(1) {
		next;
		switch( select( "给卡米尔提供战斗建议", "我亲自对付狼群", "假装没有注意到并经过" ) ) {
		case 1:
			mes "^0000ff告诉卡米尔去哪里攻击狼群？^000000";
			PlayBGM "182";
			while(1) {
				mes "狼活力 - ^ff0000" + .@wolf_hp + "^000000";
				mes "卡米尔的活力 - ^0000ff" + .@camille_hp + "^000000";
				next;
				switch( select( "胆怯攻击(高概率)", "中度攻击(中概率)", "强力攻击(低概率)", "反击(小概率)", "暂时逃跑" ) ) {
				case 1:
					.@wolf_chance = 65;	// 65% chance the wolf is being hit / 35% Camille
					.@wolf_damage = rand(25,50);
					.@camille_damage = rand(45,93);
					break;
				case 2:
					.@wolf_chance = 42;
					.@wolf_damage = rand(32,58);
					.@camille_damage = rand(37,72);
					break;
				case 3:
					.@wolf_chance = 30;
					.@wolf_damage = rand(45,70);
					.@camille_damage = rand(34,53);
					break;
				case 4:
					.@wolf_chance = 25;
					.@wolf_damage = rand(66,80);
					.@camille_damage = rand(26,50);
					break;
				case 5:
					mes "我很沮丧，但现在没有获胜的机会。让我们修复它并重试";
					close;
				}
				if (.@wolf_chance > rand(100)) {
					.@wolf_hp = .@wolf_hp - .@wolf_damage;
					npctalk "-" + .@wolf_damage, "#ep18_2_mon", bc_self;
					npctalk " ", "卡米尔#ep18_2", bc_self;
					specialeffect EF_ACIDDEMON, SELF, "#ep18_2_mon";
					specialeffect EF_HFLIMOON3, SELF, "#ep18_2_mon";
				}
				else {
					.@camille_hp = .@camille_hp - .@camille_damage;
					npctalk " ", "#ep18_2_mon", bc_self;
					npctalk "-" + .@camille_damage, "卡米尔#ep18_2", bc_self;
					specialeffect EF_ACIDDEMON, SELF, "Camille#ep18_2";
					specialeffect EF_HFLIMOON3, SELF, "Camille#ep18_2";
				}
				if (.@wolf_hp < 1) {
					mes "^0000ff你已经打败了灰太狼。^000000";
					completequest 12534;
					cloakonnpcself( "#ep18_2_mon" );
					playbgm "183";
					close;
				}
				if (.@camille_hp < 1) {
					next;
					mes "^ff0000危险！！我需要停止战斗并恢复卡米尔的生命值。^000000";
					playbgm "183";
					close;
				}
			}
			break;
		case 2:
			mes "^0000ff 不，帮助卡米尔自己成长也许是正确的......^000000";
			continue;
		case 3:
			mes "^0000ff稍后回来，为卡米尔建造坟墓。^000000";
			close;
		}
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12534) == 1" );
	end;
}

// Quest: Transporting Goods. Step 6.
gw_fild01,201,102,6	script	Camille#ep18_2	4_EP18_KAMIL,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0) {
		mes "^0000ff战斗后的兴奋让卡米尔的身体在微微颤抖。^000000";
		npctalk "他们……他们……", "卡米尔#ep18_2", bc_self;
		next;
		select( "你的动作很好", "那太可怕了。别再碰剑" );
		npctalk "不" + strcharinfo(0) + "如果不是你的指点，我就彻底失败了..", "Camille#ep18_2", bc_self;
		next;
		select( "为何弃马车跑这么远？？" );
		npctalk "我正在追那些带着货物逃跑的人，事情就是这样发生的。我无法恢复所有内容，但我确实设法保存了一些内容。", "卡米尔#ep18_2", bc_self;
		next;
		npctalk "我得先把远征马车搬回村里。我们应该收集剩余的物资，并对给您带来的不便表示歉意。", "卡米尔#ep18_2", bc_self;
		next;
		select( "这不只是一场意外吗？道歉也许是不必要的......" );
		npctalk "这些货物对于村庄的生存至关重要。失去他们将是一个重大挫折。", "卡米尔#ep18_2", bc_self;
		next;
		select( "你对贸易经理太严厉了。" );
		npctalk "即使主人阻止了我，我仍然坚持带领商队，这是我的错。 It's not like I was forced to do it.", "卡米尔#ep18_2", bc_self;
		next;
		npctalk "如果我死在这里或者逃走，我的主人就必须承担责任。这种事绝不能发生。", "卡米尔#ep18_2", bc_self;
		next;
		select( "我不会再和你争论了。做你认为最好的事吧..", "我们应该逃跑吗？" );
		npctalk "再次感谢您的帮助。我现在需要回到我的队伍。如果命运引导我们，我希望能再次见到你……", "卡米尔#ep18_2", bc_self;
		setquest 12535;
		close2;
		npctalk "你还没有离开。我先去..", "卡米尔#ep18_2", bc_self;
		cloakonnpcself( "Camille#ep18_2" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		end;
	}
	mes "^0000ff您似乎没有处于正确聆听对话的状态。^000000";
	close;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0" );
	end;
}

wolfvill,76,210,0	script	#ep18_wp03_	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch_:
	if (isbegin_quest(12531) == 1 || isbegin_quest(12535) == 1) {
		cloakoffnpcself( "Hazar#ep18_3" );
		cloakoffnpcself( "Camille#ep18_3" );
		cloakoffnpcself( "Observer#ep18_31" );
		cloakoffnpcself( "Observer#ep18_32" );
		cloakoffnpcself( "Observer#ep18_33" );
	}
	end;
}

// Quest: Transporting Goods. Step 7 + 12 (final).
wolfvill,75,214,4	script(CLOAKED)	Hazar#ep18_3	4_EP18_HAZAR,{
	if (ep18_main < 36)
		end;
	if (!checkweight(1000405,20)) {
		mes "^ff0000 我认为我拥有的物品重量太多了。请组织一次托里。^000000";
		close;
	}
	if (isbegin_quest(12535) == 1) {
		mes "^0000ff灰狼村的领导们正在开会。^000000";
		next;
		npctalk "我向大家道歉。我的能力不足，无法正确指导徒弟。", "里海#ep18_3", bc_self;
		next;
		npctalk "哈扎尔，这不是你的错。这更多的是关于卡米尔雄心勃勃的决定，推动探险队超越极限。", "观察者#ep18_31", bc_self;
		next;
		npctalk "不，是我违背弟子的意愿，强行让他们去探险……", "里海#ep18_3", bc_self;
		next;
		npctalk "这是真的吗，卡米尔？你是说你的导师违背你的意愿强迫你参加探险吗？", "观察者#ep18_33", bc_self;
		next;
		npctalk "我真诚地向大家道歉。而且，并不是我的导师强迫我的，而是我的导师强迫我的。我不顾他们的建议，坚持要进行探险。", "卡米尔#ep18_3", bc_self;
		next;
		npctalk "我就知道事情会发展到这个地步。自从哈扎尔突然提到感觉不舒服以来，事情似乎有些不对劲。", "观察者#ep18_32", bc_self;
		next;
		npctalk "卡米尔，你现在到底在做什么！", "里海#ep18_3", bc_self;
		next;
		npctalk "我坚持不听导师的建议，没能很好地完成任务。都是我的错。", "卡米尔#ep18_3", bc_self;
		next;
		npctalk "咳咳……嗯", "观察者#ep18_31", bc_self;
		npctalk "哇~", "观察者#ep18_32", bc_self;
		npctalk "啧啧。", "观察者#ep18_33", bc_self;
		next;
		npctalk "看来现在的情况我已经大概了解了。那么，我们来讨论一下事件后的处理流程吧？", "观察者#ep18_33", bc_self;
		next;
		npctalk "大家听着！为什么我们要急于做出这样的决定！", "里海#ep18_3", bc_self;
		next;
		npctalk "事实上，我们不是从小就在照顾卡米尔吗？虽然我了解情况。", "观察者#ep18_32", bc_self;
		next;
		npctalk "确实有情况，但是领导有自己的规章制度吧？", "观察者#ep18_33", bc_self;
		next;
		emotion ET_HUK, getnpcid(0,"Observer#ep18_31");
		npctalk "这个人！按照规定，你应该承担后果！这可不是一件可以掉以轻心的事情！", "观察者#ep18_31", bc_self;
		next;
		npctalk "不，确实如此，但是……唉，我们该怎么办呢？", "观察者#ep18_33", bc_self;
		next;
		npctalk "我会遵守规则。这似乎很合适，因为这是我自己的决定。", "卡米尔#ep18_3", bc_self;
		next;
		npctalk "哦不！卡米尔，你这个无赖！现在不是你说话的时候！", "里海#ep18_3", bc_self;
		next;
		npctalk "冷静下来。我们正在谈论领导的规则。我们先来看看卡米尔做出这个决定的依据。", "观察者#ep18_31", bc_self;
		next;
		npctalk "损失了 800 公斤用于冬季预算分配的毛皮/皮革。此外，由于这种损失而无法购买粮食。", "观察者#ep18_33", bc_self;
		next;
		npctalk "那么……现在就不能组织领导的搜寻队去寻找丢失的货物吗？", "观察者#ep18_31", bc_self;
		next;
		npctalk "这是真的。不过，如果领导解决了这个问题，卡米尔的错误将正式成为惩罚对象。", "观察者#ep18_33", bc_self;
		next;
		npctalk "是的，到现在为止，村民和领导的实际成员还没有意识到这个事实。一旦我们派出搜查队，卡米尔的罪名就会得到证实。", "观察者#ep18_32", bc_self;
		next;
		select( "让我们考虑其他建议" );
		unittalk getcharid(3), "" + strcharinfo(0) + " : If an external party unofficially recovers the cargo and returns it, how would it be handled by the leadership?", bc_self;
		next;
		npctalk "不，你是" + strcharinfo(0) + "你不是吗？", "Hazar#ep18_3", bc_self;
		next;
		npctalk "噢，这是个好建议。如果外人在无人知晓的情况下谨慎解决，事件本身就可能被视为不存在。", "观察者#ep18_33", bc_self;
		next;
		npctalk "领导的规则不能惩罚他们不知道的事情。", "观察者#ep18_31", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "这是否意味着...可以将其解释为代表我们领导层提出寻找丢失货物的提议？", "Hazar#ep18_3", bc_self;
		next;
		select( "我来试试。", "这是什么玩笑？" );
		npctalk "谢谢" + strcharinfo(0) + "我将带头并指引道路", "Camille#ep18_3", bc_self;
		next;
		npctalk "不，那不行。这一事件必须成为不存在的。卡米尔，你不能在这件事上起带头作用。", "观察者#ep18_33", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "你指的是我吗？感谢您代表我们可怜的卡米尔挺身而出。我代替你表达我的谢意。", "Observer#ep18_31", bc_self;
		next;
		npctalk "我也表示感谢。虽然这小子身上有一些缺陷，但他也是一个天才，不应该因为这样的事情而丢掉性命。", "观察者#ep18_32", bc_self;
		next;
		npctalk "表达我的感激之情到这种程度是很困难的。你会怎样做？我将为您提供卡米尔的大概位置。", "里海#ep18_3", bc_self;
		next;
		npctalk "是的，我明白。", "卡米尔#ep18_3", bc_self;
		next;
		mes "^ff0000我已经获得了卡米尔所运货物的大致去向信息。^000000";
		completequest 12535;
		setquest 12536;
		setquest 12537;
		setquest 12538;
		setquest 12539;
		next;
		npctalk "然后" + strcharinfo(0) + "我把一切都放在你身上", "Hazar#ep18_3", bc_self;
		next;
		npctalk "嗯，这次会议从未发生过。我们赶紧散吧。", "观察者#ep18_31", bc_self;
		next;
		npctalk "当然。我也很忙。我们散吧。", "观察者#ep18_33", bc_self;
		next;
		cloakonnpcself( "Hazar#ep18_3" );
		cloakonnpcself( "Camille#ep18_3" );
		cloakonnpcself( "Observer#ep18_31" );
		cloakonnpcself( "Observer#ep18_32" );
		cloakonnpcself( "Observer#ep18_33" );
		close;
	}
	if (isbegin_quest(12531) == 1) {
		mes "^0000ff灰狼村的领导们正在开会..^000000";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I've collected the lost cargo as soon as it was spotted. Please check the quantity..", bc_self;
		next;
		npctalk "哦，这么快？", "观察者#ep18_31", bc_self;
		next;
		npctalk "看来我已经欠你第二次了。嗯，考虑到和卡米尔的战斗，已经是第三次了吗？", "里海#ep18_3", bc_self;
		next;
		npctalk "你有我的感激之情。真的...谢谢..", "卡米尔#ep18_3", bc_self;
		next;
		npctalk "看看吧，500皮革，280毛皮加工……嗯，毛皮有点缺，但是……", "观察者#ep18_32", bc_self;
		next;
		npctalk "在这个层面上，这只是普通的损失和损坏。", "观察者#ep18_33", bc_self;
		next;
		npctalk "确实，已经在可以接受的范围之内了。呼...我们可以再次继续会议议程了。", "观察者#ep18_31", bc_self;
		next;
		select( "新的议程将是什么？" );
		npctalk "原来的议程是关于贸易货物损失的会议，现在变成了关于领导层延迟离任的讨论。是不是这样啊，酋长？", "观察者#ep18_33", bc_self;
		next;
		npctalk "哦……嗯。是的，我明白了。看来我们的出发时间比原定时间晚了两天。", "里海#ep18_3", bc_self;
		next;
		npctalk "主人……那是……", "卡米尔#ep18_3", bc_self;
		next;
		npctalk "保持冷静，卡米尔。现在，我们先不要急于下结论。拖延会受到什么惩罚？", "里海#ep18_3", bc_self;
		next;
		npctalk "接下来的三个月是一个反思期，处理好领导的职责，反思自己作为一把手的作为。", "观察者#ep18_33", bc_self;
		next;
		npctalk "我没有异议。", "观察者#ep18_31", bc_self;
		next;
		npctalk "我也没有异议。。", "观察者#ep18_32", bc_self;
		next;
		npctalk "看来你已经躲过了一场重大危机，卡米尔", "里海#ep18_3", bc_self;
		next;
		npctalk "谢谢师父。我也很感谢组长。", "卡米尔#ep18_3", bc_self;
		next;
		npctalk "咳咳，够了。由于出发时间推迟了，所以去准备再次出发吧。", "观察者#ep18_31", bc_self;
		next;
		npctalk "确实，从今天开始，我就要尽快承受惩罚了。", "观察者#ep18_32", bc_self;
		next;
		npctalk "既然重要的事情已经解决了，我们就结束我们的讨论吧。再次感谢您，" + strcharinfo(0) + "我真的很感激。这是我表达谢意的一个小礼物。", "Hazar#ep18_3", bc_self;
		next;
		npctalk "非常感谢" + strcharinfo(0) + "你是我的救星。这是我表达谢意的一个小礼物。", "Camille#ep18_3", bc_self;
		emotion ET_CRY, getnpcid(0,"Observer#ep18_31");
		completequest 12531;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		next;
		mes "^4d4dff您收到了好评。^000000";
		close2;
		cloakonnpcself( "Hazar#ep18_3" );
		cloakonnpcself( "Camille#ep18_3" );
		cloakonnpcself( "Observer#ep18_31" );
		cloakonnpcself( "Observer#ep18_32" );
		cloakonnpcself( "Observer#ep18_33" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12535) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12531) == 1" );
	end;
}

wolfvill,79,213,3	duplicate(dummy_cloaked_npc)	Camille#ep18_3	4_EP18_KAMIL

wolfvill,77,207,8	script(CLOAKED)	Observer#ep18_33	4_M_RACHMAN1,{
	mes "[观察者]";
	mes "嗯，让我们保存个人故事以备后用。";
	close;
}

wolfvill,74,208,8	script(CLOAKED)	Observer#ep18_32	4_M_MIDDLE1,{
	mes "[观察者]";
	mes "没有时间闲聊。";
	close;
}

wolfvill,72,209,8	script(CLOAKED)	Observer#ep18_31	4_M_MIDDLE,{
	mes "[观察者]";
	mes "高层会议上禁止闲聊。";
	close;
}

// Quest: Transporting Goods. Step 8 + 9 + 10 + 11.
gw_fild01,242,325,4	script	#ep18_12536	4_POINT_RED,5,5,{
	if (isnpccloaked(strnpcinfo(0)) == true)
		end;
	.@quest_id = atoi( replacestr(strnpcinfo(2), "ep18_", "") );
	.@state = isbegin_quest(.@quest_id);
	if (.@state == 1) {
		specialeffect EF_BIG_PORTAL, SELF; // 561
		progressbar_npc "FFFF00",2;
		completequest .@quest_id;
		removespecialeffect 561;
		specialeffect EF_ICECRASH, SELF; // 135

		if (isbegin_quest(12536) == 2 && isbegin_quest(12537) == 2 && isbegin_quest(12538) == 2 && isbegin_quest(12539) == 2)
			setquest 12531;
		cloakonnpc strnpcinfo(0), getcharid(0);
	}
	end;

OnTouch:
	end;

OnInit:
	.@quest_id = atoi( replacestr(strnpcinfo(2), "ep18_", "") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(" + .@quest_id + ") == 1" );
	end;
}
gw_fild01,89,211,4	duplicate(#ep18_12536)	#ep18_12537	4_POINT_RED,5,5
gw_fild01,347,194,4	duplicate(#ep18_12536)	#ep18_12538	4_POINT_RED,5,5
gw_fild01,230,52,4	duplicate(#ep18_12536)	#ep18_12539	4_POINT_RED,5,5

gw_fild01,242,325,0	script	#wp12536	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	.@quest_id = atoi( replacestr(strnpcinfo(2), "wp", "") );
	if (isbegin_quest(.@quest_id) == 1)
		cloakoffnpcself( "#ep18_" + .@quest_id );
	end;
}
gw_fild01,89,211,0	duplicate(#wp12536)	#wp12537	HIDDEN_WARP_NPC,5,5
gw_fild01,347,194,0	duplicate(#wp12536)	#wp12538	HIDDEN_WARP_NPC,5,5
gw_fild01,230,52,0	duplicate(#wp12536)	#wp12539	HIDDEN_WARP_NPC,5,5
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Clinic Construction. Step 1 + 3 + 4 + 5 (final).
wolfvill,171,253,5	script	Ezekiel#hms01	4_M_RACHMAN2,5,5,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[以西结]";
		mes "我来这里不会是一个错误的选择吧……？";
		close;
	}
	switch( isbegin_quest(17507) ) {
	case 0:
		if (isbegin_quest(17506) == 1) {
			if (countitem(999) < 3) {
				mes "[以西结]";
				mes "我们可以在这里得到大部分东西，但不能得到钢铁。我想请你帮个小忙。就3...";
				close;
			}
			mes "[以西结]";
			mes "钢！！钢，什么时候来！ ...哦，在这里。你来了，冒险家。它很重，不是吗？把它给我。我不能再让你多留一秒钟，你是一个珍贵的人。谢谢。你做得很好。";
			next;
			mes "[以西结]";
			mes "诊所竣工后，我们会将您的名字刻在基石上，以便您的名字将活在未来新生儿的生命中。";
			next;
			emotion ET_SWEAT, playerattached();
			mes "[以西结]";
			mes "尽管时间流逝，建筑物消失，但冒险家的意志将永远存在。";
			next;
			select( "不，没必要……" );
			mes "[以西结]";
			mes "现在，我将用这种钢材建造一座能够承受任何天气、任何因素的诊所。";
			next;
			cloakoffnpcself( "Old Man#hms01" );
			cloakoffnpcself( "Old Man#hms02" );
			cloakoffnpcself( "Old Man#hms03" );
			mes "[老人]";
			mes "等等，你在做什么？";
			npctalk "我没说清楚吗？", "老人#hms03", bc_self;
			next;
			mes "[老人]";
			mes "你是说你要建一个诊所吗？现在？";
			next;
			select( "老哥冷静点……" );
			mes "[老人]";
			mes "你说的冷静是什么意思？我们正在进行一场冰冷、理性的对话。现在！";
			npctalk "我们没有精力这样做！", "老人#hms02", bc_self;
			next;
			mes "[以西结]";
			mes "你为什么要这样做？你对新人有领地意识吗？";
			next;
			mes "[老人]";
			mes "天哪，我们不是那种人。";
			npctalk "什么？你是什么意思？", "老人#hms03", bc_self;
			next;
			mes "[以西结]";
			mes "那你为什么这么反对呢？";
			next;
			mes "[老人]";
			mes "你想要的舒适生活是一个陷阱。 Something foreign, something comfortable.那些事情会毁了我们。";
			next;
			mes "[以西结]";
			mes "舒适的住房、繁荣的学校、干净的诊所。为什么我们不应该拥有它们？我们避免的是歧视，而不是便利。";
			next;
			mes "[以西结]";
			mes "反正我就住在这里，设施再好点又有什么坏处呢？";
			next;
			mes "[老人]";
			mes "不，我想这就是新人想要的吧？";
			npctalk "确切地！", "老人#hms01", bc_self;
			next;
			mes "[老人]";
			mes "让你的身体习惯于舒适会让不舒服的生活变得难以忍受。在他们提供的最低限度的生活中满足地生活。";
			mes "他们说如果你抗议，他们也会把这个拿走。";
			next;
			mes "[老人]";
			mes "你认为我们要在这里住多久，别介意收回我们的土地！";
			npctalk "我是认真的！", "老人#hms03", bc_self;
			next;
			mes "[老人]";
			mes "你现在拥有的已经足够了，还需要什么呢？";
			next;
			mes "[以西结]";
			mes "我这样做不是因为我忘恩负义。他们说他们不会把它带到这里，因为这对他们来说太陌生了。技术和设施随着时间的推移而发展，但你只是不了解！";
			next;
			cloakoffnpcself( "Maram#hms01" );
			cloakoffnpcself( "Villager#hms01" );
			cloakoffnpcself( "Injured#hms01" );
			mes "[乔尔]";
			mes "哦天哪，我想我快死了。帮助...";
			npctalk "远处有人在向我招手……", "受伤#hms01", bc_self;
			next;
			mes "[马拉姆]";
			mes "以西结！！！有问题！";
			next;
			mes "[以西结]";
			mes "马拉姆？它是什么？发生了什么？";
			next;
			mes "[乔尔]";
			mes "如果我死了……就把我积累的财富……！与我一起。你收到了吗？这不公平！马拉姆，一定要好好守卫我的坟墓！不让一分钱被偷！";
			emotion ET_CRY, getnpcid(0,"Injured#hms01");
			next;
			mes "[马拉姆]";
			mes "不，你不会死。别有不祥之兆。";
			next;
			mes "[老人]";
			mes "乔尔怎么了？";
			next;
			mes "[马拉姆]";
			mes "搬运行李时发生了意外。我需要尽快处理掉它。以西结，你能做到吗？";
			next;
			mes "[老人]";
			mes "天哪，怎么会这样呢？我的一条腿根本无法使用，但我仍然很好。";
			next;
			mes "[老人]";
			mes "让我看看。唔...";
			next;
			mes "[老人]";
			mes "咱们赶紧搬到我家去吧。我的腿可能无法使用，但至少需要涂点药，防止它们腐烂。";
			npctalk "请再说一遍？他的腿烂了吗？？", "受伤#hms01", bc_self;
			npctalk "你还想贴膏药吗？", "我喜欢它#hms01", bc_self;
			next;
			mes "[乔尔]";
			mes "难道我也要像这里的白松先生一样把腿砍掉吗？我做不到……我刚买了一双新工作靴……！";
			next;
			mes "[老人]";
			mes "你的靴子现在有问题吗？";
			next;
			mes "[乔尔]";
			mes "……没错，马拉姆。我有件事想请你帮个忙。你能找到一个失去左腿但右腿健康的人吗？我想我得把我的右靴子卖给他了。";
			mes "先生，请让这一切尽可能顺利。";
			npctalk "啊，大小不重要。", "受伤#hms01", bc_self;
			next;
			mes "[以西结]";
			mes "我不会砍掉你的腿，我可以治好它。";
			next;
			mes "[老人]";
			mes "什么？有这样的腿吗？";
			next;
			mes "[老人]";
			mes "这样的腿要怎么修啊……！我们把它切掉，然后涂点药，防止它被感染！不要浪费时间握住它......！";
			next;
			mes "[以西结]";
			mes "我说我能做到，因为我能做到。大家都让开吧。";
			next;
			mes "[马拉姆]";
			mes "你必须相信他。以西结在你眼里可能不怎么样，但他很不错，对吧？";
			npctalk "我并没有特意把他带进来。", "我喜欢它#hms01", bc_self;
			next;
			mes "[老人]";
			mes "不，时间是……！";
			next;
			specialeffect EF_HEALSP, AREA, "Injured#hms01";
			mes "[以西结]";
			mes "啊...如果我们有合适的设备...我可以做得更快...我无法控制。";
			next;
			specialeffect EF_REPAIRWEAPON, AREA, "Injured#hms01";
			mes "[乔尔]";
			mes "啊啊啊！！！我要死了！！！";
			npctalk "哦，不！", "老人#hms01", bc_self;
			npctalk "不是应该给他治病吗？", "老人#hms02", bc_self;
			npctalk "别了！！！！", "老人#hms03", bc_self;
			delitem 999,3;	// Steel
			erasequest 17506;
			setquest 17507;
			close;
		}
		if (isbegin_quest(17505) == 1) {
			mes "[以西结]";
			mes "冒险家，怎么样，可以开始建造了吗？";
			next;
			select( "关于那个..." );
			mes "[以西结]";
			mes "我试图让它不妨碍其他任何事情，但我想这也不起作用。";
			next;
			mes "[以西结]";
			mes "但我不能放弃，我很高兴你愿意回来谈论这件事，但在此之前，我需要召集一群志同道合的人，并准备好说服他们。";
			next;
			mes "[以西结]";
			mes "我想过按照他们说的去做，但我做不到。我不知道还能做什么，但这是我必须做的事情。";
			next;
			mes "[以西结]";
			mes "说到这里，冒险家，我有件事想拜托你。";
			next;
			select( "它是什么？" );
			mes "[以西结]";
			mes "你可以在这里得到大部分东西，但不能得到钢铁。因为引入它是多么困难，更不用说你需要大量的设施来制造钢铁。那么，你给我带3个可以吗？只是 3...";
			next;
			select( "我会把它带给你。" );
			mes "[以西结]";
			mes "感谢您的慷慨。我很高兴你如此同情我的事业并愿意提供帮助……我要去准备施工了。";
			erasequest 17505;
			setquest 17506;
			close;
		}
		if (isbegin_quest(17504) == 1) {
			mes "[以西结]";
			mes "请说服<NAVI>[先生]<INFO>wolfvill,176,111,0,101,0</INFO></NAVI>我们需要这个设施。";
			close;
		}
		mes "[以西结]";
		mes "以西结，你来到这里并不是为了过富裕的生活。你来这里是为了做事的！";
		next;
		mes "[以西结]";
		mes "不，但像我自己一样住在这里才是真正的生活。我在这里永远是个陌生人，不是吗？";
		next;
		cloakoffnpcself( "Maram#hms01" );
		select( "那个人……？" );
		mes "[马拉姆]";
		mes "嘘――等一下，听听他在说什么，他听起来像是在说什么。";
		next;
		mes "[以西结]";
		mes "不，但我在这里和在那里一样都是局外人。那不是一样吗？我不应该更舒服吗？";
		mes "也许我应该放弃并回家。";
		next;
		mes "[以西结]";
		mes "不，但这就是我最初的目标。寻找我的根源...";
		next;
		mes "[马拉姆]";
		mes "以西结！你最近怎么样？你为什么这样自言自语？";
		next;
		mes "[以西结]";
		mes "马拉姆？马拉姆？？那太棒了。你知道吗，听我说。你很忙吗？你很忙，但听着。我要把这件事告诉谁呢？我什至还不认识任何人。所以听我说。";
		npctalk "好吧好吧，我听着，你冷静点。", "我喜欢它#hms01", bc_self;
		next;
		mes "[以西结]";
		mes "我告诉过你我要在这里建一家诊所。我刚来的时候，没有像样的诊所，所以我就建了一个。";
		next;
		mes "[马拉姆]";
		mes "这是正确的。所以这次我有很多东西要填补。";
		npctalk "真的吗？我们稍后会看到这一点。先听听故事吧。", "以西结#hms01", bc_self;
		next;
		mes "[以西结]";
		mes "我就这么做了，但是当我开始挖掘的时候，这里的长老们阻止了我。他们说我们应该像迄今为止所做的那样与自然和谐相处，但他们将我视为某种环境破坏者。我是这样的人吗？";
		next;
		mes "[以西结]";
		mes "仅仅建造一个更卫生、更现代化的诊所，以便在紧急情况下做出更快的反应，真的会对自然和环境造成那么大的破坏吗？";
		next;
		mes "[马拉姆]";
		mes "不，你不是那样的人。其他人，但从来没有你。";
		next;
		mes "[以西结]";
		mes "是不是这样？你已经让我到了这样的地步……我现在什么都不做，因为我在想，我真的是一个坏人吗？";
		next;
		mes "[马拉姆]";
		mes "如果是这样的话，你应该和 Suad 谈谈。这不公平。我们都在努力生活在一起。诊所并不违背自然。哦，来吧。";
		next;
		mes "[以西结]";
		mes "嗯……我和苏阿德谈过……但他说他无能为力，也不能做他想做的事。";
		next;
		mes "[以西结]";
		mes "我告诉他，我们需要一个诊所，但我们不能硬推，因为长期住在这里的老人是反对的，所以我们必须说服他们。";
		next;
		mes "[马拉姆]";
		mes "从声音来看，他也是如此。毕竟，我们不能忽视长辈的意见，而苏阿德又不是那种会不遗余力这样做的人。";
		next;
		mes "[以西结]";
		mes "所以...我...回到Rachel...你觉得怎么样？";
		next;
		mes "[马拉姆]";
		mes "什么，你都走了这么远，还要回去吗？";
		next;
		mes "[以西结]";
		mes "不，我并没有打算回去……只是人就是这样，他们来这里是为了过上更好的生活，如果这里或那里都一样，为什么他们不想留在更容易的地方……";
		next;
		mes "[以西结]";
		mes "所以我想说的是...我正在努力弄清楚。我什么时候说过我会剪掉然后回去？你能不能随心所欲地听我的？";
		next;
		mes "[马拉姆]";
		mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
		next;
		mes "[马拉姆]";
		mes "这是正确的！我想冒险家或许可以帮助我们。要知道，这个冒险者真的很会说话，你不觉得他的脸可信吗？这正是大人喜欢的奖品。";
		next;
		mes "[马拉姆]";
		mes "他心胸宽广，帮助我们购买和运输物资。";
		next;
		mes "[以西结]";
		mes "他是个好人。是的，他是个好人，但是……";
		next;
		mes "[以西结]";
		mes "……这真的是那种能得到大人们青睐的人吗？他们是如此……如此……固执。";
		npctalk "你很擅长称自己为固执。", "我喜欢它#hms01", bc_self;
		next;
		mes "[马拉姆]";
		mes "你必须充分利用它。就算说服不了你，除了听更多的唠叨还能怎么办？那个冒险者会去听吗？";
		npctalk "哦，那真是太好了。", "以西结#hms01", bc_self;
		next;
		mes "[以西结]";
		mes "嗯...我可以请你帮个忙吗？";
		mes "冒险家，帮我一个忙，我们这里确实需要一个现代化的诊所，即使它没有雷切尔的诊所那么大。";
		next;
		mes "[以西结]";
		mes "在我现在的地方，如果我受伤或生病了，我就必须依靠过去的民间疗法。";
		npctalk "哦，我知道那是什么！他们在伤口上涂了一种不知名的药膏！", "我喜欢它#hms01", bc_self;
		next;
		mes "[以西结]";
		mes "我从雷切尔那里得到了一些药品和医疗用品，但它们很稀缺，而且我又不适合使用它们。";
		next;
		mes "[以西结]";
		mes "但我无法说服反对者，所以我要请冒险家<NAVI>[先生]<INFO>wolfvill,176,111,0,101,0</INFO></NAVI>帮我做这件事。";
		next;
		mes "[马拉姆]";
		mes "请这样做，同时我会去见一些其他人。";
		setquest 17504;
		close2;
		cloakonnpcself( "Maram#hms01" );
		end;
	case 1:
		specialeffect EF_PHARMACY_OK, AREA, "Injured#hms01";
		specialeffect EF_HEALSP, AREA, "Injured#hms01";
		mes "[以西结]";
		mes "这个怎么样？暂时不要勉强自己，吃好食物，想好想法，休息好，就可以轻松地走路或跑步了。";
		next;
		mes "[乔尔]";
		mes "我还活着吗？？我还活着吗？？我的腿还好吗？？";
		next;
		mes "[马拉姆]";
		mes "呃，既然你这么说，那就一定是吧？";
		next;
		mes "[乔尔]";
		mes "太感谢了！！你救了我的靴子！你叫什么名字？以后我会对你好。你是我的救星。我永远不会忘记他的救命恩人。为了生活。";
		next;
		mes "[老人]";
		mes "那么，你是如何保住这条腿的呢？";
		next;
		mes "[以西结]";
		mes "因为这就是我学到的。如果诊所设备齐全，我们可以对他进行更彻底的治疗并加速他的康复。";
		next;
		mes "[老人]";
		mes "嗯……现在每个人都是这样吗？";
		next;
		mes "[以西结]";
		mes "是的，只要你正确对待它，它不会让你失去腿。";
		next;
		mes "[老人]";
		mes "如果您有诊所，您可以更快、更适当地做到这一点，对吗？";
		next;
		mes "[以西结]";
		mes "是的...？是不是这样啊……？";
		next;
		mes "[老人]";
		mes "嗯……冒险家，现在的情况就是这样吧？";
		next;
		select( "如今就是这样。" );
		mes "[以西结]";
		mes "正如我所说，这不是外国人的技术，而是先进时代的技术和设施。";
		next;
		mes "[老人]";
		mes "嗯，我觉得这不是你应该盲目反对的事情。";
		npctalk "看起来它可能有用。", "老人#hms01", bc_self;
		next;
		mes "[老人]";
		mes "正确的？这也是我的看法。这是为了救人。如果我们按照自己的方式去做，我们就能拯救一些人免于死亡。";
		npctalk "如果我们能做到这一点就好了……", "老人#hms02", bc_self;
		next;
		mes "[老人]";
		mes "嗯...建那个诊所需要多长时间？";
		next;
		mes "[以西结]";
		mes "呃……？嗯，这取决于劳动力和资本。";
		next;
		mes "[老人]";
		mes "我们将尽力帮助您。让我们来构建它。";
		npctalk "我会携带任何我能携带的东西。", "老人#hms03", bc_self;
		next;
		mes "[老人]";
		mes "相反，它应该适应这里的生活方式，它应该适应这个地方。";
		npctalk "因为这里的老年人很难适应太新的事物。", "老人#hms02", bc_self;
		next;
		mes "[以西结]";
		mes "我明白了……我明白了。";
		next;
		mes "[马拉姆]";
		mes "哇，你们都想到了。这正是我所需要的，我全力以赴。";
		next;
		mes "[老人]";
		mes "这里还有什么我们需要的吗？";
		next;
		mes "[老人]";
		mes "什么，你接受的不仅仅是诊所？";
		next;
		mes "[老人]";
		mes "这没有让你思考吗？你必须随波逐流。你不可能永远固执。";
		next;
		mes "[老人]";
		mes "我的意思是，即使我们确实收回了我们的土地，我们也不会像现在这样生活。我们的生活已经与以前不同了。";
		next;
		mes "[老人]";
		mes "嘿，年轻人，如果还有其他重要或必要的事情，请告诉我，我们会考虑一下。";
		next;
		mes "[以西结]";
		mes "我会。正如你所说，我会把诊所建得尽可能靠近这个地方。";
		next;
		mes "[老人]";
		mes "是的。你知道我们不会永远住在这里，对吗？";
		next;
		mes "[以西结]";
		mes "是的，我就是这么想的。";
		next;
		mes "[老人]";
		mes "好吧，我们就告辞了。感谢您今天抽出时间。";
		next;
		cloakonnpcself( "Old Man#hms01" );
		cloakonnpcself( "Old Man#hms02" );
		cloakonnpcself( "Old Man#hms03" );
		mes "[马拉姆]";
		mes "让我们来看看！！！";
		mes "哇――这真是一种解脱，不是吗？";
		next;
		mes "[以西结]";
		mes "是的，它就在那里……对吧？但来得太突然，让人有点莫名其妙不是吗？";
		next;
		mes "[马拉姆]";
		mes "现在亲眼所见，他们的想法就不一样了。那挺好的。现在，让我们完成我们开始的事情吧？";
		next;
		mes "[以西结]";
		mes "是的。但首先，我认为我们需要改变设计以适应这个地方。";
		next;
		mes "[马拉姆]";
		mes "冒险家会帮助你的，对吗？";
		next;
		select( "这是正确的..." );
		mes "[马拉姆]";
		mes "如果您需要任何设备或工具，请提前告诉我，我下次会带过来。";
		mes "乔尔，我们也去休息一下吧。";
		next;
		mes "[乔尔]";
		mes "再见，我的救星。我会在不久的将来回来的！";
		emotion ET_THROB, getnpcid(0,"Injured#hms01");
		next;
		cloakonnpcself( "Maram#hms01" );
		cloakonnpcself( "Villager#hms01" );
		cloakonnpcself( "Injured#hms01" );
		mes "[以西结]";
		mes "冒险家，非常感谢你的帮助。这是我定居在这里时得到的东西，我不需要任何东西……就送给你吧，冒险家，作为我的谢意。";
		next;
		mes "[以西结]";
		mes "好吧，下次吧，也许我会请你帮个忙，所以经常过来吧！";
		completequest 17507;
		mes "^4d4dff这将为您带来良好的评价。^000000";
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		close;
	case 2:
		break;
	}
	// daily
	switch( checkquest(17509,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[以西结]";
		mes "呃，很难。冒险家，这是怎么回事。你给我带来的东西正在建设中……你在这里很危险，所以天亮后再回来。";
		close;
	case 2:
		erasequest 17509;
		break;
	}
	switch( isbegin_quest(17508) ) {
	case 0:
		mes "[以西结]";
		mes "你好，冒险家。";
		next;
		select( "施工进展如何？" );
		mes "[以西结]";
		mes "没关系。但我们仍然缺少一些东西，比如钢和非常不寻常的水晶。";
		next;
		mes "[以西结]";
		mes "他们在这里使用了很多水晶，而且它们非常坚硬，所以它们非常适合到处使用。";
		next;
		if (select( "我会给你买的。", "我很想给你买一个，但是..." ) == 2) {
			mes "[以西结]";
			mes "你忙吗？看起来就是这样。即使再忙，也要记得吃饭。";
			close;
		}
		mes "[以西结]";
		mes "哇，非常感谢你！";
		next;
		mes "[以西结]";
		mes "我需要 1 个钢铁和 10 个非常不寻常的水晶，而非常不寻常的水晶可以从灰太狼那里获得。";
		mes "我会等待！";
		setquest 17508;
		close;
	case 1:
		if (countitem(999) < 1 || countitem(1000406) < 10) {
			mes "[以西结]";
			mes "谢谢你，冒险家，你的努力。呃...但是我们的数量有点少，你忘了吗...？";
			next;
			mes "[以西结]";
			mes "我需要 1 个钢铁和 10 个非常不寻常的水晶，而非常不寻常的水晶可以从灰太狼那里获得。";
			close;
		}
		mes "[以西结]";
		mes "冒险家，辛苦了。我总是很感激。今天休息一下，天亮后再来看你！";
		delitem 999,1;	// Steel
		delitem 1000406,10;	// Ep18_Very_Ddan_Crystal
		erasequest 17508;
		setquest 17509;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close;
	case 2:	// impossible
		end;
	}
	end;

OnTouch:
	if (isbegin_quest(17504) == 0 && isbegin_quest(17505) == 0 && isbegin_quest(17506) == 0 && isbegin_quest(17507) == 0)
		npctalk "你来这里是为了享受什么财富和荣耀。你做了什么？", "以西结#hms01", bc_self;
	else if (isbegin_quest(17507) == 1) {
		cloakoffnpcself( "Old Man#hms01" );
		cloakoffnpcself( "Old Man#hms02" );
		cloakoffnpcself( "Old Man#hms03" );
		cloakoffnpcself( "Maram#hms01" );
		cloakoffnpcself( "Villager#hms01" );
		cloakoffnpcself( "Injured#hms01" );
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(17504) == 0 && isbegin_quest(17505) == 0 && isbegin_quest(17506) == 0 && isbegin_quest(17507) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17505) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17506) == 1 && countitem(999) >= 2" );	// Steel
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17507) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17507) == 2 && isbegin_quest(17508) == 0 && (checkquest(17509,PLAYTIME) == -1 || checkquest(17509,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17508) == 1 && countitem(999) > 0 && countitem(1000406) > 9" );
	end;
}

wolfvill,174,252,3	duplicate(dummy_cloaked_npc)	Maram#hms01	4_EP18_MARAM
wolfvill,175,249,1	duplicate(dummy_cloaked_npc)	Old Man#hms01	4_EP18_GW_OLD01
wolfvill,173,247,1	duplicate(dummy_cloaked_npc)	Old Man#hms02	4_EP18_GW_OLD02
wolfvill,170,248,7	duplicate(dummy_cloaked_npc)	Old Man#hms03	4_EP18_GW_MIDDLE01
wolfvill,170,251,5	duplicate(dummy_cloaked_npc)	Villager#hms01	4_M_RACHMAN1
wolfvill,172,250,1	duplicate(dummy_cloaked_npc)	Injured#hms01	4_M_DIEMAN

// Quest: Clinic Construction. Step 2.
wolfvill,174,111,5	script	Old Man#hms05	4_EP18_GW_OLD02,{
	mes "[老人]";
	mes "如果生活中有什么困难，请告诉我。";
	close;
}

wolfvill,178,110,3	script	Old Man#hms06	4_EP18_GW_MIDDLE01,{
	mes "[老人]";
	mes "您还有什么疑问吗？";
	close;
}

wolfvill,176,111,3	script	Old Man#hms04	4_EP18_GW_OLD01,{
	if (ep18_main < 36) {
		mes "[老人]";
		mes "我得去见见新人。";
		close;
	}
	if (isbegin_quest(17504) == 1) {
		mes "[老人]";
		mes "这次进来的人，也要好好适应。";
		next;
		mes "[老人]";
		mes "我们得再看一下。";
		next;
		mes "[老人]";
		mes "她不喜欢我去得太频繁。你以为这和我们小时候一样吗？";
		next;
		mes "[老人]";
		mes "现在，如果你想从现在开始住在这里，你就必须融入这里。你必须遵守这里的规则，这样我们才能和谐相处。";
		next;
		mes "[老人]";
		mes "无论是否与我们的一样，多一个邻居可以交谈总是好的。谁不喜欢友好的邻居呢？";
		npctalk "大家都是这样调整的。", "老人#hms05", bc_self;
		next;
		select( "我..." );
		mes "[老人]";
		mes "你是谁？我不认识你了。";
		npctalk "这是新人吗？", "老人#hms05", bc_self;
		npctalk "我没有忘记什么吧？", "老人#hms06", bc_self;
		next;
		mes "[老人]";
		mes "哦，你又回来了？不是不久前吗？你现在会更频繁地来这里吗？";
		next;
		mes "[老人]";
		mes "欢迎，欢迎，欢迎，有任何问题请务必询问。";
		next;
		mes "[老人]";
		mes "请随意询问，并不是这里的每个人都对此感到困扰。";
		next;
		select( "我来这里是为了诊所的事情..." );
		mes "[老人]";
		mes "那是什么？诊所？这不可能是他们正在建造的诊所吧？";
		npctalk "当然。还能是什么？", "老人#hms05", bc_self;
		next;
		mes "[老人]";
		mes "我想我说得足够好，大家都明白了。没有必要建诊所，也不应该建诊所。";
		next;
		mes "[老人]";
		mes "当您可以在现在的地方进行治疗时，为什么要建造一栋新建筑，甚至是一座外国建筑？";
		next;
		mes "[老人]";
		mes "没有它，我们不就是这样生活的吗？";
		next;
		select( "因为医疗设施很重要。" );
		mes "[老人]";
		mes "不，什么？所以你说这是因为我们认为这不重要？是我们还不够好吗？";
		npctalk "我们不会无缘无故地脾气暴躁。", "老人#hms06", bc_self;
		next;
		mes "[老人]";
		mes "我们知道它很好，我们知道它很舒服，我们知道它有多好，但你就是无法习惯。";
		next;
		mes "[老人]";
		mes "我们习惯了外国人的生活方式，最终我们也习惯了，然后我们的生活就离不开那种便利。";
		npctalk "这就是占领我们土地的人们想要的。", "老人#hms05", bc_self;
		next;
		mes "[老人]";
		mes "你现在拥有的已经足够了，但你不应该依赖它。这意味着失败。";
		next;
		select( "但这是必要的设施。" );
		mes "[老人]";
		mes "嗯，它并不缺乏，因为如果有的话，我们就不会在这里生存这么久了。";
		next;
		mes "[老人]";
		mes "不管怎样，我认为是这样的。虽然我说得好听，你还是不明白。";
		next;
		mes "[老人]";
		mes "如果你以后想住在这里，你最好尽快忘记那边的生活。";
		next;
		mes "[老人]";
		mes "你越早适应这里的生活，你的生活就会越好。";
		next;
		select( "我不是……我不是这里的人……" );
		mes "[老人]";
		mes "什么？你甚至不是这里的人？你有什么权利干涉？";
		next;
		mes "[老人]";
		mes "冷静下来。你可以这么做。别生他的气，他一直在帮助你的孩子。";
		next;
		mes "[老人]";
		mes "我们稍后会在诊所讨论<NAVI>[那颗牙齿]<INFO>wolfvill,171,253,0,101,0</INFO></NAVI>，但我认为我们应该不让外人参与其中。";
		erasequest 17504;
		setquest 17505;
		close;
	}
	if (isbegin_quest(17505) == 1) {
		mes "[老人]";
		mes "我们稍后会在诊所讨论<NAVI>[那颗牙齿]<INFO>wolfvill,171,253,0,101,0</INFO></NAVI>，但我认为我们应该不让外人参与其中。";
		close;
	}
	mes "[老人]";
	mes "我得去找新人了。";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17504) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Checking Traps for Food. Step 1 + 3 (final).
wolfvill,197,170,5	script	Larama#ep18	4_M_DESERT,{
	if (rand(2))
		mes "他正忙着磨刀，所以我打电话，但没有人接听。";
	else {
		mes "[拉拉玛]";
		mes "哦，我现在很忙。我们稍后再谈。";
	}
	close;
}

wolfvill,202,166,3	script	Eruin#ep18	4_F_SHABBY,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[埃鲁因]";
		mes "...";
		mes "这片森林禁止外人狩猎非妖兽。";
		mes "不要抓到任何兔子。";
		close;
	}
	switch( isbegin_quest(8688) ) {
	case 0:
		mes "[埃鲁因]";
		mes "……你说冒险者来了。";
		mes "您是否正在四处闲逛，寻找事情做？";
		next;
		if (select( "是的", "不" ) == 2) {
			mes "[埃鲁因]";
			mes "如果你没什么事可做，就不要只是坐在这儿看着那边生起的火。";
			close;
		}
		mes "[埃鲁因]";
		mes "我负责与那边的埃鲁因人和他们的家人一起观赏牲畜和野生动物。";
		mes "维护刀具和其他刀片也是我的工作。";
		npctalk "照顾埃鲁因的奶奶~！", "蓝色的#ep18", bc_self;
		next;
		mes "[埃鲁因]";
		mes "……啧啧。";
		npctalk "呵呵。", "蓝色的#ep18", bc_self;
		next;
		mes "[埃鲁因]";
		mes "如果有一件事我会留给外人，那就是检查我今天早上设置的陷阱。";
		mes "你能做到吗？";
		next;
		select( "那应该不会太难" );
		mes "[埃鲁因]";
		mes "能快速得到答案是件好事。";
		mes "...";
		next;
		setquest 8688;
		mes "[埃鲁因]";
		mes "<NAVI>[灰狼森林]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI>如果你环顾四周，你会看到一堆陷阱。";
		mes "如果你有时间，就去买五个吧。";
		mes "如果你不去理会剩下的鱼饵，有的东西会再次附着在上面，所以你只能等着看。";
		next;
		mes "[埃鲁因]";
		mes "感谢您的辛勤工作。";
		close;
	case 1:
		.@trap01 = countitem(1000412);
		.@trap02 = countitem(1000413);
		.@trap03 = countitem(1000414);
		if ((.@trap01 + .@trap02 + .@trap03) < 5) {
			mes "[埃鲁因]";
			mes "<NAVI>[灰狼森林]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI>我希望你收集大约5个被陷阱捕获的东西。";
			close;
		}
		if (.@trap01 > 0)
			delitem 1000412, .@trap01;
		if (.@trap02 > 0)
			delitem 1000413, .@trap02;
		if (.@trap03 > 0)
			delitem 1000414, .@trap03;

		completequest 8688;
		setquest 8689;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes "^4d4dff这将为您带来良好的评价。^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		next;
		mes "[埃鲁因]";
		mes "...好的。好工作。";
		mes "如果你明天有空在这儿闲逛的话，我可以再问你一次吗？";
		next;
		if (select( "当然", "我想明天我会很忙" ) == 2)
			end;
		mes "[埃鲁因]";
		mes "好的。我负责诱捕和梳理，所以我一直在工作，所以如果你再偷看，我就会知道，我会让你做这些工作而不是打扰我。";
		mes "对于一个外人来说，这没什么不同。";
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(8689,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[埃鲁因]";
		mes "今天就回去休息吧。";
		close;
	case 2:
		erasequest 8689;
		break;
	}
	switch( isbegin_quest(8690) ) {
	case 0:
		mes "[埃鲁因]";
		mes "你在这里？我看你又在四处窥探，看来你有空了。";
		next;
		switch( select( "去调查陷阱", "聊天", "退出" ) ) {
		case 1:
			mes "[埃鲁因]";
			mes "如果你能帮忙的话，我还有很多其他事情要做，所以我很感激。";
			mes "在该区域周围走动时，收集 5 个被我设置的陷阱捕获的东西。";
			next;
			if (select( "接受", "拒绝" ) == 2) {
				mes "[埃鲁因]";
				mes "别再烦躁了，安静地坐着。你焦躁不安。";
				close;
			}
			setquest 8690;
			mes "[埃鲁因]";
			mes "如果你不去管剩下的鱼饵，还会有别的东西被钓到，所以等着瞧吧。";
			mes "感谢您的辛勤工作。";
			close;
		case 2:
			mes "[埃鲁因]";
			mes "别再烦躁了，安静地坐着。你焦躁不安。";
			close;
		case 3:
			mes "[埃鲁因]";
			mes "你从什么时候开始开始设置陷阱了？";
			mes "唔。自从你放弃冒险家身份之后？";
			close;
		}
		end;
	case 1:
		.@trap01 = countitem(1000412);
		.@trap02 = countitem(1000413);
		.@trap03 = countitem(1000414);
		if ((.@trap01 + .@trap02 + .@trap03) < 5) {
			mes "[埃鲁因]";
			mes "如果能从<NAVI>[灰狼森林]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI>收集到大约5个被陷阱捕获的东西就好了。";
			close;
		}
		if (.@trap01 > 0)
			delitem 1000412, .@trap01;
		if (.@trap02 > 0)
			delitem 1000413, .@trap02;
		if (.@trap03 > 0)
			delitem 1000414, .@trap03;

		erasequest 8690;
		setquest 8689;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		mes "[埃鲁因]";
		mes "...好的。好工作。";
		mes "如果你明天也有空来的话，我可以再问你一次吗？";
		next;
		if (select( "好的", "我想明天我会很忙" ) == 2)
			end;
		mes "[埃鲁因]";
		mes "那挺好的。";
		mes "他并不拒绝帮助。谢谢。";
		close;
	case 2:	// impossible
		end;
	}
	end;

OnInit:
	// note: the questinfo on official is never removed except by PLAYTIME == 1
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(8688) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8688) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8688) == 2 && isbegin_quest(8690) == 0 && (checkquest(8689,PLAYTIME) == -1 || checkquest(8689,PLAYTIME) == 2)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8690) == 1" );
	
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(8688) == 0" );
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8688) == 1 && (countitem(1000412)+countitem(1000413)+countitem(1000414)) > 4" );
	// questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8688) == 2 && isbegin_quest(8690) == 0 && (checkquest(8689,PLAYTIME) == -1 || checkquest(8689,PLAYTIME) == 2)" );
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8690) == 1 && (countitem(1000412)+countitem(1000413)+countitem(1000414)) > 4" );
	end;
}

// Quest: Checking Traps for Food. Step 2.
gw_fild01,24,122,0	script	Trap Set#01	CLEAR_NPC,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8688) == 1 || isbegin_quest(8690) == 1) {
		.@amount = countitem(1000412) + countitem(1000413) + countitem(1000414);
		if (.@amount >= 5) {
			mes "今天我已经收集了足够多的陷阱里的东西了。";
			mes "让我们把它带到<NAVI>[埃鲁因]<INFO>wolfvill,202,166,0,101,0</INFO></NAVI>。";
			close;
		}
		specialeffect2 EF_STEAL;
		progressbar "FFFF00",10;
		.@r = rand(1,5);
		if (.@r == 1)
			getitem 1000412,1;	// Ep18_Trapped01
		else if (.@r == 2)
			getitem 1000413,1;	// Ep18_Trapped02
		else if (.@r == 3)
			getitem 1000414,1;	// Ep18_Trapped03
		else
			mes "我什么也没得到...";
		disablenpc strnpcinfo(0);
		initnpctimer;
		end;
	}
	end;
OnTimer60000:
	enablenpc strnpcinfo(0);
	stopnpctimer;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(8688) == 1" );
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(8690) == 1" );
	end;
}
gw_fild01,93,113,0	duplicate(Trap Set#01)	Trap Set#02	CLEAR_NPC
gw_fild01,106,126,0	duplicate(Trap Set#01)	Trap Set#03	CLEAR_NPC
gw_fild01,213,130,0	duplicate(Trap Set#01)	Trap Set#04	CLEAR_NPC
gw_fild01,267,156,0	duplicate(Trap Set#01)	Trap Set#05	CLEAR_NPC
gw_fild01,229,205,0	duplicate(Trap Set#01)	Trap Set#06	CLEAR_NPC
gw_fild01,192,210,0	duplicate(Trap Set#01)	Trap Set#07	CLEAR_NPC
gw_fild01,153,212,0	duplicate(Trap Set#01)	Trap Set#08	CLEAR_NPC
gw_fild01,121,245,0	duplicate(Trap Set#01)	Trap Set#09	CLEAR_NPC
gw_fild01,86,327,0	duplicate(Trap Set#01)	Trap Set#10	CLEAR_NPC
gw_fild01,126,356,0	duplicate(Trap Set#01)	Trap Set#11	CLEAR_NPC
gw_fild01,175,339,0	duplicate(Trap Set#01)	Trap Set#12	CLEAR_NPC
gw_fild01,192,361,0	duplicate(Trap Set#01)	Trap Set#13	CLEAR_NPC
gw_fild01,232,319,0	duplicate(Trap Set#01)	Trap Set#14	CLEAR_NPC
gw_fild01,257,297,0	duplicate(Trap Set#01)	Trap Set#15	CLEAR_NPC
gw_fild01,249,245,0	duplicate(Trap Set#01)	Trap Set#16	CLEAR_NPC
gw_fild01,303,276,0	duplicate(Trap Set#01)	Trap Set#17	CLEAR_NPC
gw_fild01,325,254,0	duplicate(Trap Set#01)	Trap Set#18	CLEAR_NPC
gw_fild01,335,241,0	duplicate(Trap Set#01)	Trap Set#19	CLEAR_NPC
gw_fild01,308,318,0	duplicate(Trap Set#01)	Trap Set#20	CLEAR_NPC
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "s. Step 1 + 2 + 3 (final).
wolfvill,147,97,5	script	Ahir#ep18	4_M_DST_CHILD,3,3,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36) {
		mes "[阿希尔]";
		mes "啊，一个外人……";
		close;
	}
	if (isbegin_quest(16548) != 2) {
		switch( checkquest(16548,HUNTING) ) {
		case -1:
			mes "[阿希尔]";
			mes "哈姆……啊？一个我以前没见过的人。你是灰狼村的新成员吗？";
			mes "啊...";
			next;
			select( "你昨晚睡不好觉吗？" );
			mes "[阿希尔]";
			mes "是的，我根本无法入睡。";
			mes "哈……在灰狼的森林里，如果你躺下睡觉，你会听到各种各样的声音。";
			next;
			mes "[阿希尔]";
			mes "萤火虫的声音、大人的叽叽喳喳声、野兽的声音……";
			mes "最扰乱睡眠的声音就是各种怪物的叫声";
			next;
			mes "[阿希尔]";
			mes "呜呜……其中，传来了哭声。" + getmonsterinfo("EP18_火风_风筝", MOB_NAME) + "是最可怕的。";
			mes "人们甚至担心它们会带来火花，烧毁整个村庄。";
			next;
			mes "[阿希尔]";
			mes "他们嘴里含着火花哭泣，压抑的声音实在是太可怕了……";
			mes "呃，光是想想就让我的身体颤抖。";
			next;
			select( "我是冒险家，要我帮你追捕他们吗？" );
			mes "[阿希尔]";
			mes "哇！你是冒险家？";
			mes "既然如此，我一定会请求你的帮助！";
			next;
			mes "[阿希尔]";
			mes "您能为我们抓到 30 个" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " 吗？";
			mes "如果我们追捕到一堆，也许" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "今晚会保持安静。";
			next;
			if (select( "就交给我吧！", "哎呀，我现在有点麻烦了。" ) == 2) {
				mes "[阿希尔]";
				mes "嗯，我想连你这样的冒险者也一定很忙吧？";
				mes "我知道你现在很忙，但你有没有尝试过在这些各种各样的噪音中闭上眼睛睡个好觉？这就是我最近发生的事情。";
				close;
			}
			mes "[阿希尔]";
			mes "哇，谢谢你，冒险家！";
			mes "现在是 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "。我会指望你的。";
			next;
			mes "[阿希尔]";
			mes "一旦你把他们全部追捕完毕，请回到我身边告诉我。我给你准备一个小奖励！";
			setquest 16548;
			close;
		case 0:
		case 1:
			mes "[阿希尔]";
			mes "谢谢你，冒险家！";
			mes "有 30 个" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "。请照顾他们。";
			close;
		case 2:
			mes "[阿希尔]";
			mes "谢谢你！暴风筝的鸣叫声绝对减弱了！";
			mes "今晚我可以睡得很舒服了。";
			next;
			mes "[阿希尔]";
			mes "好吧，可能不会持续太久。";
			mes "明天还会增加，但我希望你天亮后再来，赶上" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + ".";
			next;
			mes "[阿希尔]";
			mes "这是对你的感谢，让我今晚睡得很好。";
			mes "请接受哪怕是一颗小小的心吧，冒险家。";
			completequest 16548;
			setquest 16550;
			getitem 1000405,20;	// Ep18_Amethyst_Fragment
			getexp 7769124,3000000;
			mes " ";
			mes "^4d4dff 出现对您有利的评价。^000000";
			add_reputation_points(REPUTATION_EP18, 100);
			if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
				ep18_main = 37;
				setquest 18082;
				mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
				mes "您有资格参加^4d4dff会议。^000000";
			}
			close;
		}
	}
	switch( checkquest(16550,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[阿希尔]";
		mes "看起来" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "仍然潜伏着。";
		mes "如果你现在招惹我，可能会因为邪恶而更加吵闹。";
		next;
		mes "[阿希尔]";
		mes "你会在黎明后回来并捕捉" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "吗？";
		mes "求求你了，冒险家。";
		close;
	case 2:
		erasequest 16550;
		break;
	}
	switch( checkquest(16549,HUNTING) ) {
	case -1:
		mes "[阿希尔]";
		mes "唉，今天又困了。";
		mes "冒险家，介意给我只抓30个" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "吗？";
		next;
		mes "[阿希尔]";
		mes "如果你成群狩猎，" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "今晚可能会保持沉默。";
		next;
		if (select( "当然，我会抓住他们。", "我没兴趣抓住他们。" ) == 2) {
			mes "[阿希尔]";
			mes "嗯，我想你也很忙吧，冒险家？";
			mes "你一定很累了，先去休息一下吧。不过，面对这些碎裂的声音，可能很难入睡。";
			close;
		}
		mes "[阿希尔]";
		mes "哇，谢谢你，冒险家！";
		mes "已经 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " 了，我真的很感激。";
		next;
		mes "[阿希尔]";
		mes "当你把它们全部猎杀完后，请回来告诉我。我给你准备一个小奖励！";
		setquest 16549;
		close;
	case 0:
	case 1:
		mes "[阿希尔]";
		mes "谢谢你，冒险家！";
		mes "有 30 个" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "。请照顾他们。";
		close;
	case 2:
		mes "[阿希尔]";
		mes "谢谢你！暴风筝的鸣叫声绝对减弱了！";
		mes "今晚我可以睡得很舒服了。";
		next;
		mes "[阿希尔]";
		mes "好吧，可能不会持续太久。";
		mes "明天还会增加，但我希望你天亮后再来，赶上" + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + ".";
		next;
		mes "[阿希尔]";
		mes "这是对你的感谢，让我今晚睡得很好。";
		mes "请接受哪怕是一颗小小的心吧，冒险家。";
		erasequest 16549;
		setquest 16550;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 10318080,3000000;
		close;
	}
	end;

OnTouch_:
	npctalk "Ahir：我真的很累……需要更多的睡眠。", "昨天#ep18", bc_self;
	end;

OnInit:
	// first completion
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16548,HUNTING) == -1 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16548,HUNTING) == 2" );

	// daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16548) == 2 && checkquest(16549,HUNTING) == -1 && (checkquest(16550,PLAYTIME) == -1 || checkquest(16550,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16549,HUNTING) == 2" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Childhood Friends. Step 1.
wolfvill,182,82,5	script	Albert#ep18	4_M_RACHMAN1,{
	if (ep18_main < 36) {
		mes "[阿尔伯特]";
		mes "...";
		close;
	}
	switch( isbegin_quest(8718) ) {
	case 0:
		mes "[阿尔伯特]";
		mes "如果你决定回到瑞秋身边，你能帮我一个忙吗？";
		next;
		mes "[阿尔伯特]";
		mes "说白了……我有一个朋友，在雷切尔的酒店当职员。";
		mes "如果他还没有来这里，他可能还在这儿工作。";
		next;
		mes "[阿尔伯特]";
		mes "我和我的朋友...Horim 从小就住在我隔壁。";
		mes "我以前住在雷切尔，但我再也忍受不了了，所以……";
		next;
		mes "[阿尔伯特]";
		mes "他们的家人和我的家人决定编织雷切尔。";
		mes "但霍林说他会留在雷切尔身边。";
		mes "我们不能再等了，所以我们把他留在了这里，把他搬到了这里。";
		next;
		mes "[阿尔伯特]";
		mes "雷切尔是一座大城市，但现在他孤身一人。";
		mes "...";
		mes "如果你不介意的话，我想知道我是否可以顺便过去看看他怎么样了。";
		next;
		if (select( "当然", "我暂时不会去任何地方。" ) == 2) {
			mes "[阿尔伯特]";
			mes "既然如此，那就这样吧。";
			close;
		}
		mes "[阿尔伯特]";
		mes "谢谢。";
		mes "只是...停下来看看。你不需要向我汇报。";
		setquest 8718;
		close;
	case 1:
		mes "[阿尔伯特]";
		mes "你不需要向我汇报。";
		mes "您所要做的就是检查 Horim 是否表现良好。";
		close;
	case 2:
		mes "[愚蠢的]";
		mes "他见过那个男孩吗？";
		mes "是的。";
		mes "...是的。";
		mes "走的时候我把不能说的都说了。";
		mes "现在我已经不留遗憾了。";
		next;
		mes "[愚蠢的]";
		mes "感觉就像一片灰色的森林在闪闪发光。";
		mes "我不能。";
		mes "各位冒险家们，谢谢你们。";
		mes "谢谢。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8718) == 0 && isbegin_quest(11724) == 2" );
	end;
}

// Quest: Childhood Friends. Step 2.
ra_in01,386,44,0	script	#ep18w01_	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (isbegin_quest(8718) == 1) {
		cloakoffnpcself( "Employee#ep1800" );
	}
	end;
}	

ra_in01,388,59,5	script(CLOAKED)	Employee#ep1800	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8718) == 1) {
		mes "[员工]";
		mes "...！";
		mes "冒险家，你闻起来像火山灰。";
		mes "雷神火山……不，不是。";
		next;
		mes "工作人员环视了一圈，然后低声说道：“抱歉。”";
		next;
		mes "[员工]";
		mes "你找到通往灰狼森林的路了吗？";
		next;
		if (select( "我知道。", "我不知道" ) == 2) {
			mes "[员工]";
			mes "假装不知道是没有帮助的。";
			next;
		}
		mes "[员工]";
		mes "...我想知道你是否可以带我去那里。";
		mes "我真的...我真的很想去那里。";
		next;
		mes "[员工]";
		mes "我知道这是一条危险的路，而且我不是冒险家……";
		mes "但我真的没有办法到达那里。";
		next;
		mes "[员工]";
		mes "我的朋友和家人要离开，所以我决定坚持下去，但是......";
		mes "一天晚上，他们像一群破坏公物的人一样离开了，以为我会干涉。";
		mes "然后，当然，我们没有收到他们的消息......";
		next;
		mes "[员工]";
		mes "请带我去那里。";
		mes "我已经没有人了";
		next;
		select( "出了什么问题吗？" );
		mes "他连自我介绍都还没说完。";
		next;
		mes "[员工]";
		mes "是的，我不知道我到底在说什么。";
		mes "我的名字是霍林。";
		mes "冒险家...";
		mes "" + strcharinfo(0) + "， 你？";
		next;
		mes "[霍林]";
		mes "然后..." + strcharinfo(0) + "你。";
		mes "一旦您到达那里，您就处于<B>我们的</B>之中，您知道情况。";
		next;
		mes "[霍林]";
		mes "以前比现在好多了，直到我的家人离开。";
		mes "现在看起来和以前没有什么不同……";
		next;
		mes "[霍林]";
		mes "现在，从表面上看……没关系，我们有很多政策。但在下面，却在溃烂、溃烂……";
		mes "当我走在街上时，我什至听不到自己的笑声。我感觉好像有人在称呼我，我们，名字。";
		mes "我再也受不了了...";
		next;
		select( "一旦我开始..." );
		mes "[" + strcharinfo(0) + "]";
		mes "如果你开始一次，第二次或第三次也会一样。";
		next;
		mes "[霍林]";
		mes "...谢谢。太感谢了...";
		next;
		mes "霍林勉强挤出一句感谢的话，松了口气。";
		next;
		npctalk "员工：来了~", "员工#ep1801", bc_self;
		mes "[霍林]";
		mes "……对不起，先生。我现在有点事，得走了。";
		next;
		mes "[霍林]";
		mes "稍后，在雷切尔的门外见。";
		completequest 8718;
		setquest 8698;
		close2;
		cloakonnpcself( "Employee#ep1800" );
		cloakonnpcself( "Employee#ep1801" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8718) == 1" );
	end;
}

ra_in01,388,63,5	script	Employee#ep1801	4_M_03,{
	mes "[员工]";
	mes "哈~我想知道当人们使用如此严厉的言语时会发生什么。";
	next;
	mes "[员工]";
	mes "啊啊啊！欢迎！芙蕾雅的恩惠与你同在！";
	close;
}

// Quest: Childhood Friends. Step 3.
ra_fild11,355,226,0	script	#ep18w02__	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8698) == 1)
		cloakoffnpcself( "Horim#ep1810" );
	end;
}

ra_fild11,350,236,0	script	#Horim01	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8698) == 1)
		cloakoffnpcself( "Horim#ep1810" );
	end;
}

ra_fild11,350,236,3	script(CLOAKED)	Horim#ep1810	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8698) == 1) {
		mes "[霍林]";
		mes "……啊，冒险者。";
		mes "事实上，我从来没有比这离城市更远过。";
		next;
		mes "[霍林]";
		mes "那么我的家乡在哪里呢？";
		mes "是雷切尔吗？";
		next;
		mes "[霍林]";
		mes "如果你无论身在何处都从未感到轻松……";
		mes "我想知道我是否应该离开瑞秋……？";
		next;
		mes "[霍林]";
		mes "……说起来有点长。";
		mes "从这里走哪条路？";
		mes "我会跟随你的引导。";
		navigateto("ra_fild10",375,293);
		erasequest 8698;
		setquest 8699;
		cloakonnpcself( "Horim#ep1810" );
		next;
		mes "我们回灰狼森林吧。";
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8698) == 1" );
	end;
}

// Quest: Childhood Friends. Step 4.
ra_fild10,375,293,0	script	#Horim02	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(8699) == 1)
		cloakoffnpcself( "Horim#ep1811" );
	end;
}

ra_fild10,379,282,0	script	#Horim03	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (isbegin_quest(8699) == 1)
		cloakoffnpcself( "Horim#ep1811" );
	end;
}

ra_fild10,375,293,5	script(CLOAKED)	Horim#ep1811	4_M_RACHMAN2,5,5,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8699) == 1) {
		mes "[霍林]";
		mes "冒险家，请稍等。";
		mes "我们现在在哪里？";
		next;
		mes "[霍林]";
		mes "我回头一看，看到了雷切尔……城墙那么远。";
		mes "我们还要走多远？";
		next;
		mes "[霍林]";
		mes "...";
		mes "我们还没有完成一半吗？";
		next;
		mes "[霍林]";
		mes "路会崎岖吗？";
		mes "一家人会和睦相处吗？";
		next;
		mes "[霍林]";
		mes "你的朋友会和睦相处吗？";
		mes "你介意我去吗？";
		navigateto("oz_dun01",285,170);
		erasequest 8699;
		setquest 8700;
		cloakonnpcself( "Horim#ep1811" );
		next;
		mes "我们回灰狼森林吧。";
		close;
	}
	end;

OnTouch:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8699) == 1" );
	end;
}

// Quest: Childhood Friends. Step 5.
oz_dun01,285,169,0	script	#ep18w04	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8700) == 1)
		cloakoffnpcself( "Horim#ep1812" );
	end;
}

oz_dun01,285,170,5	script	Horim#ep1812	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8700) == 1) {
		mes "[霍林]";
		mes "我从来没有见过这样的事情。";
		next;
		mes "[霍林]";
		mes "作为一名冒险者，这样的事情时常会发生。";
		next;
		mes "[霍林]";
		mes "那里看起来怎么样？";
		mes "街上有传言说这不是一个非常舒适的居住地。";
		next;
		mes "[霍林]";
		mes "仍然...";
		next;
		mes "[霍林]";
		mes "我喜欢这条路。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "这个长度？";
		next;
		mes "[霍林]";
		mes "怪物太多了，你不能一个人去……";
		mes "你走了这么多地方，是不是有点厌倦冒险了？";
		next;
		mes "[霍林]";
		mes "没关系，我很擅长这个。";
		mes "毕竟，这就是我的谋生之道。";
		next;
		mes "[霍林]";
		mes "我们走吧。";
		navigateto("gw_fild01",272,342);
		erasequest 8700;
		setquest 8701;
		cloakonnpcself( "Horim#ep1812" );
		next;
		mes "我们回灰狼森林吧。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8700) == 1" );
	end;
}

// Quest: Childhood Friends. Step 6.
gw_fild01,272,342,0	script	#Horim04	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(8701) == 1) {
		cloakoffnpcself( "Horim#ep1813" );
		end;
	}
	end;
}
gw_fild01,275,338,0	duplicate(#Horim04)	#ep18w04_	HIDDEN_WARP_NPC,4,4

gw_fild01,272,342,5	script(CLOAKED)	Horim#ep1813	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8701) == 1) {
		mes "[霍林]";
		mes "火山灰的气味发生了变化。";
		next;
		mes "[霍林]";
		mes "还记得我们第一次见到冒险家时我告诉你的话吗？";
		mes "托尔火山和火山灰的气味不同。";
		next;
		mes "[霍林]";
		mes "这是……我从来没有去过那里，但有人走进我的工作场所并闻到那样的味道。";
		mes "他们一定有某种武器……那些人一定是从雷神火山来的。";
		next;
		mes "[霍林]";
		mes "你怎么知道他们隐藏了武器？";
		mes "无论如何，他们看不到我们的人。";
		next;
		mes "[霍林]";
		mes "有时他们会在餐桌上谈论一些机密的事情，就好像我们看不到他们一样。";
		mes "即使你试着不听，你也会听到一两个词。";
		next;
		mes "[霍林]";
		mes "当然，如果这是一个非常重要的故事，我不会在这样的地方说。";
		next;
		mes "[霍林]";
		mes "然而，有些人的火山灰气味略有不同。";
		mes "像我这样的人...";
		next;
		mes "[霍林]";
		mes "我也会闻到那种味道吗？";
		mes "...";
		next;
		mes "[霍林]";
		mes "...我们走吧。";
		navigateto("gw_fild01",36,99);
		erasequest 8701;
		setquest 8702;
		cloakonnpcself( "Horim#ep1813" );
		cloakoffnpcself( "Horim#ep1814" );
		next;
		mes "我们回灰狼村吧。";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8701) == 1" );
	end;
}

// Quest: Childhood Friends. Step 7.
gw_fild01,36,99,0	script	#HorimF	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8702) == 1) {
		cloakoffnpcself( "Horim#ep1814" );
		navigateto("ra_fild11",358,229);
	}
	end;
}

gw_fild01,36,99,5	script(CLOAKED)	Horim#ep1814	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8702) == 1) {
		mes "[霍林]";
		mes "我们在这里休息一下吧...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "在哪里？";
		next;
		mes "[霍林]";
		mes "还有日志...";
		next;
		mes "[看门人]";
		mes "你好？";
		next;
		mes "[霍林]";
		mes "你好...";
		next;
		mes "[霍林]";
		mes "那里生活困难吗？";
		next;
		select( "你不必想太多。" );
		mes "[" + strcharinfo(0) + "]";
		mes "我认为你不需要考虑太多。";
		next;
		mes "[霍林]";
		mes "你说得对。";
		mes "我已经...";
		mes "左雷切尔";
		next;
		mes "[霍林]";
		mes "...";
		next;
		select( "离开原因" );
		mes "[" + strcharinfo(0) + "]";
		mes "你说你关注是因为你所有的朋友和家人都走了，对吧？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那为什么还要麻烦呢？";
		next;
		mes "[霍林]";
		mes "冒险家...";
		mes "好的。那么，冒险家，你有必须回去的地方吗？";
		mes "首先，以前来我工作的地方的很多顾客都不是冒险家。";
		next;
		mes "[霍林]";
		mes "但我需要一个可以回去的地方。";
		mes "一个跟大家道晚安、关灯、睡觉的地方。";
		next;
		mes "[霍林]";
		mes "不是因为我孤独...";
		mes "...";
		next;
		mes "霍林想说什么，咽了口口水。";
		next;
		mes "[霍林]";
		mes "也有这样的人。";
		next;
		mes "[霍林]";
		mes "...我们走吧。";
		next;
		mes "[看门人]";
		mes "这是有人进城了吗？";
		next;
		mes "[霍林]";
		mes "？";
		next;
		mes "[看门人]";
		mes "我听过这个故事。如果他是带你来的人，你就可以相信他。进来吧。";
		next;
		mes "[霍林]";
		mes "是的？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "这是入口。";
		mes "进入。";
		close2;
		erasequest 8702;
		setquest 8703;
		warp "wolfvill",270,26;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8702) == 1" );
	end;
}

// Quest: Childhood Friends. Step 8 (final).
wolfvill,271,26,0	script	#HorimG	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch_:
	if (isbegin_quest(8703) == 1)
		cloakoffnpcself( "Horim#ep1815" );
	end;
}

wolfvill,266,26,5	script(CLOAKED)	Horim#ep1815	4_M_RACHMAN2,{
	if (checkweight(1000405,20) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8703) == 1) {
		mes "[" + strcharinfo(0) + "]";
		mes "就在这里。";
		next;
		mes "[霍林]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你失望吗？";
		next;
		mes "[霍林]";
		mes "不。";
		next;
		mes "[霍林]";
		mes "我会去找我的家人。";
		mes "它一定在这儿的某个地方，对吧？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我相信你会幸福的，因为我没有抛弃你。";
		mes "正如你所说，你很努力，所以我很欢迎。";
		next;
		mes "[霍林]";
		mes "哎呀...";
		next;
		mes "[霍林]";
		mes "谢谢。";
		next;
		mes "[霍林]";
		mes "太感谢了！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我现在可以走了吗？";
		next;
		mes "[霍林]";
		mes "当然。";
		mes "今晚……好久没能跟大家道晚安了。";
		next;
		mes "[霍林]";
		mes "愿你的旅程顺利，冒险家……";
		completequest 8703;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes "^4d4dff将对您产生有利的评价。^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		// next;
		close2;
		cloakonnpcself( "Horim#ep1815" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8703) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Helping the Children. Step 1.
rachel,38,44,3	script	Samariam#ep18	4_M_CHILD1,{
	if (BaseLevel < 170) {
		mes "- 此任务仅适用于 170 级及以上的玩家 -";
		close;
	}
	if (isbegin_quest(16581) == 0) {
		mes "[撒玛利亚]";
		mes "伙计，我渴了。你能给我拿点水吗？你家是最近的。";
		next;
		mes "[卡尔]";
		mes "你家里有什么吃的吗？如果没有的话可以买点干果吗？";
		mes "伙计，你真善良。";
		next;
		mes "[奈曼]";
		mes "没有……没什么可吃的。";
		mes "我没有钱....";
		next;
		mes "[卢克希]";
		mes "哎，这屋子哪里没东西吃啊？";
		mes "你只是小气，不是吗？";
		next;
		mes "[撒玛利亚]";
		mes "令人失望的是，奈曼。";
		mes "我以为你是一个善良的人。";
		next;
		mes "[奈曼]";
		mes "哦，不！";
		mes "我们有水，所以我去拿一些。";
		next;
		mes "[撒玛利亚]";
		mes "美好的。水会被浪费。我们的份额在哪里？";
		mes "连水都是用钱买的，你却说自己没有。";
		setquest 16581;
		close;
	}
	mes "[撒玛利亚]";
	mes "啊，玩得又饿又渴。";
	mes "我希望我能坐在阴凉的地方喝点冰茶和干果。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 170 && isbegin_quest(16581) == 0" );
	end;
}

// Quest: Helping the Children. Step 2.
rachel,37,42,7	script	Karl#ep18	4_M_RACHMAN1,{
	if (isbegin_quest(16581) == 1) {
		mes "[卡尔]";
		mes "你为什么没有钱？你爸爸不是在卢克什当铺工作吗？";
		mes "是因为Lukshi的妈妈没有给你爸爸钱吗？";
		next;
		mes "[卢克希]";
		mes "我们妈妈给你爸爸钱，但你不想给我们买一个打折的水果吗？";
		next;
		mes "[撒玛利亚]";
		mes "好吧，我们停下来吧。可怜啊~别再说没钱了。";
		next;
		mes "[奈曼]";
		mes "不！！！这并不可怜......";
		mes "这并不可怜……!!";
		next;
		mes "[撒玛利亚]";
		mes "哦，对不起~这是一个玩笑。";
		mes "为什么你变得严肃和生气。可怕的....";
		next;
		mes "[撒玛利亚]";
		mes "听说本地人脾气有点暴躁，不过还是一一发火，是不是有点过分了？";
		mes "不是吗？";
		next;
		mes "[卡尔]";
		mes "是的，没错。即使生气了，也要懂得忍着才能一起玩。";
		mes "感谢我们和你这样的孩子一起玩。";
		completequest 16581;
		setquest 16582;
		close;
	}
	mes "[卡尔]";
	mes "我想喝加很多冰的甜茶。";
	mes "以后玩起来就更开心了！";
	next;
	mes "[卡尔]";
	mes "天气太热了，我现在很渴。";
	mes "但我也不想回家。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16581) == 1" );
	end;
}

// Quest: Helping the Children. Step 3.
rachel,40,45,3	script	Lukshi#ep18	4_M_DST_CHILD,{
	if (isbegin_quest(16582) == 1) {
		mes "[卢克希]";
		mes "是的，你应该感谢我们！";
		next;
		select( "我再也受不了了。", "别再打扰我们了。" );
		mes "[卢克希]";
		mes "唔？你是谁，敢在我们玩的时候打扰我们？";
		mes "你看起来并不属于这里……你为什么要多管闲事？";
		next;
		select( "这是玩吗？", "是玩，不是打扰。" );
		mes "[撒玛利亚]";
		mes "由于年龄的原因，我们和你们难免有些不同~";
		mes "这是这里的本地人，而我们都是移民。";
		next;
		mes "[撒玛利亚]";
		mes "大家都知道，本地人与移民相比，是有一些缺点的，对吧？";
		mes "但我们仍然像这样一起玩。";
		next;
		mes "[奈曼]";
		mes "不！谁这么说的？原住民和移民有什么区别！";
		next;
		mes "[卡尔]";
		mes "又喊了一声。";
		mes "你证明当地人脾气更暴躁。";
		next;
		select( "你的行为方式让人生气。", "当然，当你这样说话时，人们会生气。" );
		mes "[撒玛利亚]";
		mes "但这是真的，不是吗？";
		mes "Naiman 的爸爸在 Lukshi 的店里工作，Lukshi 的妈妈总是这么说。";
		next;
		mes "[撒玛利亚]";
		mes "当地人学东西晚，脾气暴躁。";
		mes "但是雇佣这样的本地人并给他们发工资的阿姨也很了不起吧？";
		erasequest 16582;
		setquest 16583;
		close;
	}
	mes "[卢克希]";
	mes "我们家有清凉饮料和小吃！";
	mes "不过太远了……奈曼家不是离这里最近的吗？";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16582) == 1" );
	end;
}

// Quest: Helping the Children. Step 4 (final).
rachel,36,45,5	script	Naiman#ep18	4_F_DST_CHILD,{
	if (isbegin_quest(16583) == 1) {
		if (checkweight(1000405,10) == 0) {
			mes "[通知]";
			mes "- 你的库存已满。请检查您携带的物品的重量和数量，然后再与我联系。 -";
			close;
		}
		mes "[奈曼]";
		mes "......";
		next;
		select( "你为什么和这些孩子一起出去玩？" );
		mes "[奈曼]";
		mes "是的，是的？";
		next;
		select( "为什么你要让他们这样对待你？" );
		mes "[奈曼]";
		mes "嗯...他们是我的朋友。";
		mes "如果没有他们，我就没有人可以一起出去玩了。";
		next;
		mes "[撒玛利亚]";
		mes "看？奈曼和我们一起出去玩是因为他喜欢这样。";
		mes "如果我们真的打扰他，他就不会和我们一起出去玩。";
		next;
		mes "[卢克希]";
		mes "我已经知道外国人很爱管闲事，但是......";
		mes "不懂的事情就不要插手。";
		next;
		mes "[奈曼]";
		mes "我……我要回家去喝点水。";
		mes "还有……很抱歉无缘无故地感到不安。";
		next;
		cloakonnpcself( "Naiman#ep18" );
		mes "[撒玛利亚]";
		mes "好吧，当你们一起出去玩时，事情就会发生，对吗？";
		mes "别太担心。";
		next;
		cloakonnpcself( "Samariam#ep18" );
		mes "[卢克希]";
		mes "我们去别的地方玩吧。";
		mes "让我们把这个爱管闲事的外国人留在这里吧。";
		next;
		cloakonnpcself( "Lukshi#ep18" );
		mes "[卡尔]";
		mes "是的，我们就这么做吧。";
		mes "再见，外国冒险家！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "....感觉我获得了一些人生经验。";
		mes "这并不是一种令人愉快的感觉，但是......";
		cloakonnpcself( "Karl#ep18" );
		erasequest 16583;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		close;
	}
	mes "[奈曼]";
	mes "好热……我想回家。";
	mes "但其他人都想玩更多......";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16583) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Price of Labor. Step 1 + 3 (final).
rachel,181,51,3	script	Amodipin#ep18	4_M_MIDDLE,{
	if (checkweight(1000405,10) == 0) {
		mes "[通知]";
		mes "- 你的库存已满。请检查您携带的物品的重量和数量，然后再与我联系。 -";
		close;
	}
	if (BaseLevel < 170) {
		mes "- 此任务仅适用于 170 级及以上的玩家 -";
		close;
	}
	if (isbegin_quest(16584) == 0) {
		mes "[阿莫地平]";
		mes "今天他们还没发工资。已经三个月了...";
		mes "我很想立刻退出这家店，但这样我就没有办法拿到拖欠的工资了。";
		next;
		mes "[阿莫地平]";
		mes "如果传言说我就这样辞职了，作为一个本地人，我也无法在其他商店工作了。";
		mes "哦，我该怎么办...";
		next;
		mes "[阿莫地平]";
		mes "哦，你有在听我的故事吗？";
		mes "从你的装扮来看，你一定是个冒险家。多么幸运。作为冒险家过着自由的生活……";
		next;
		mes "[阿莫地平]";
		mes "呃，请原谅我的无耻，但我有件事想拜托你。";
		mes "虽然我的老板假装在听我说话，但如果是像你这样的著名冒险家的建议，我想他会注意的。";
		next;
		mes "[阿莫地平]";
		mes "你能去我老板的店里催他给我发工资吗？";
		mes "这样我连明天的饭都买不起了。";
		next;
		if (select( "我会帮忙的。", "我为什么要帮忙？" ) == 2) {
			mes "[阿莫地平]";
			mes "您不一定必须这样做。";
			mes "我只是好奇你是否能帮忙。";
			close;
		}
		mes "[阿莫地平]";
		mes "谢谢，谢谢！";
		mes "我老板的商店在<NAVI>[这里]<INFO>rachel,136,95,0,101,0</INFO></NAVI>。";
		setquest 16584;
		close;
	}
	if (isbegin_quest(16585) == 1) {
		mes "[阿莫地平]";
		mes "你来了。你有什么好消息吗？";
		next;
		select( "分享我的故事。" );
		mes "[阿莫地平]";
		mes "明天就发拖欠工资了！哦，非常感谢你。我真的很感激。";
		mes "现在我可以给我的孩子们买食物和衣服了。";
		next;
		mes "[阿莫地平]";
		mes "明天可能会被骂，但说实话，我很高兴终于拿到工资了。";
		mes "被骂没什么，也就一两天而已。";
		next;
		mes "[阿莫地平]";
		mes "你不生气吗？当然，我是。";
		mes "但我能做什么呢？出生为本地人是我的错误。";
		next;
		mes "[阿莫地平]";
		mes "我什至无法逃到任何地方。";
		mes "我听说有一个村庄，里面住着逃到静脉的当地人，但我怀疑这样的地方是否真的存在。";
		next;
		mes "[阿莫地平]";
		mes "但即使是这样，我也没有勇气住在那里。哦，我说得太多了。";
		mes "很抱歉让你忙了。太感谢了！";
		erasequest 16585;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		close;
	}
	mes "[阿莫地平]";
	mes "每天担心吃饭，担心孩子……没有一天不担心。";
	mes "为什么我生来就是土生土长的人，要受不必要的磨难。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 170 && isbegin_quest(16584) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16585) == 1" );
	end;
}

// Quest: Price of Labor. Step 2.
rachel,136,95,3	script	Dahil#ep18	4_M_RACHMAN2,{
	if (isbegin_quest(16584) == 1) {
		mes "[因为]";
		mes "欢迎，我是达尔。";
		mes "很高兴见到你。从你的穿着来看，你一定是个冒险家！";
		next;
		mes "[因为]";
		mes "我真的很喜欢冒险家！";
		mes "我曾经梦想成为一名冒险家。但后来我的膝盖中了一箭，现在我被困在城里了。";
		next;
		mes "[因为]";
		mes "如果您同意的话，可以一边浏览一些物品，一边告诉我您的冒险故事吗？";
		next;
		select( "我是为了一个不同的故事而来的。" );
		mes "[因为]";
		mes "一个不同的故事？";
		mes "嗯，关于阿莫地平的薪水？阿莫迪平有请你谈谈吗？";
		next;
		mes "[因为]";
		mes "嗯，阿莫地平可能知道这件事，但是店里的情况不太好。";
		mes "我答应下个月一次性付清，但用的是我最喜欢的冒险家。";
		next;
		mes "[因为]";
		mes "这样躲在别人背后公平吗？";
		mes "你似乎很擅长你的工作，所以我雇用了你，但也许我应该重新考虑雇用当地人。";
		next;
		select( "你这是什么意思？" );
		mes "[因为]";
		mes "哦，别担心，冒险者。这是当地人的一个古老的仪式问题。";
		mes "他们性格软弱，喜欢躲在别人背后。";
		next;
		select( "不过，克扣工资是不对的", "这不是歧视吗？" );
		mes "[因为]";
		mes "谁不知道呢？就算你知道，如果没有钱，你能做什么？";
		mes "嗯，阿莫迪平的工资是最后发的。但这也是没办法的事。";
		next;
		mes "[因为]";
		mes "这不是对原住民的歧视。";
		mes "只是他是最后一个进来的，所以顺序就这样。";
		next;
		mes "[因为]";
		mes "啊，为什么我只能和冒险者谈论这个呢？";
		mes "告诉阿莫迪明天把工资存进去，别再胡说八道了。";
		next;
		mes "[因为]";
		mes "我不会因为这件事惩罚你，但请告诉<NAVI>[Amodipin]<INFO>rachel,181,51,0,101,0</INFO></NAVI>正常上班。";
		mes "我不是歧视本地人的人，但他们缺乏责任感，所以如果我骂他们，我可能就这样了。";
		completequest 16584;
		setquest 16585;
		close;
	}
	mes "[因为]";
	mes "我现在正在经营这家商店，但我真的很喜欢冒险家！";
	mes "我曾经梦想成为一名冒险家。但后来我膝盖中箭，被困在城里。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16584) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Gather Opinions in Rachel. Step 1 + 2 (final).
rachel,155,236,3	script	Junok#atm	4_M_TRAINEE,{
	if (checkweight(1000405,10) == 0) {
		mes "[朱诺克]";
		mes "我希望局势尽快平静下来。等你整理好一些物品之后我们再聊吧。";
		close;
	}
	if (BaseLevel < 170) {
		mes "[朱诺克]";
		mes "你好。看来你现在可能缺乏经验来接受我的请求。";
		next;
		mes "[朱诺克]";
		mes "请在接受更多培训后回到我身边。";
		next;
		mes "- 此任务适用于 170 级及以上的玩家。 -";
		close;
	}
	if (ep18_main < 12)
		end;	// unknown text
	switch( checkquest(3504,PLAYTIME) ) {
	case -1:	// first time
		if (isbegin_quest(3503) == 0) {
			mes "[朱诺克]";
			mes "你好，我的名字是朱诺克牧师。";
			next;
			mes "[朱诺克]";
			mes "一段时间以来，这个村庄分为本地人和移民两派，形成对峙状态。";
			next;
			mes "[朱诺克]";
			mes "解决两派之间冲突的努力正在进行中，但尚未取得明显成果。";
			next;
			mes "[朱诺克]";
			mes "因此，我希望您直接与他们每一个人接触，找出问题所在。";
			next;
			mes "[朱诺克]";
			mes "您能代表我与他们交谈吗？我发现很难离开我的岗位。";
			next;
			if (select( "是的。", "下次。" ) == 2) {
				mes "[朱诺克]";
				mes "我很失望你拒绝了我。我的心好痛苦。";
				close;
			}
			setquest 3503;

			setarray .@quest_id[0],3493,3494,3495,3496,3497,3498,3499,3500,3501,3502;
			.@size = getarraysize(.@quest_id);

			for ( .@i = 0; .@i < 6; ++.@i ) {
				.@r = rand(.@size);
				setquest .@quest_id[.@r];
				deletearray .@quest_id[.@r],1;
				.@size--;
			}
			mes "[朱诺克]";
			mes "请与指定的3名本地人和3名移民交谈，然后告诉我结果。";
			next;
			mes "[朱诺克]";
			mes "可以在任务窗口或小地图中找到与之交谈的人员列表。";
			close;
		}
		break;
	case 0:
	case 1:
		mes "[朱诺克]";
		mes "今天，我已经收集了足够的信息。如果您再次需要帮助，请明天再来。";
		close;
	case 2:	// daily
		if (isbegin_quest(3503) == 0) {
			mes "[朱诺克]";
			mes "当然，我今天会检查一下原住民和移民之间的气氛。如果您有任何具体需要帮助，请随时告诉我。";
			next;
			if (select( "是的", "不。" ) == 2)
				end;
			erasequest 3504;
			setquest 3503;

			setarray .@quest_id[0],3493,3494,3495,3496,3497,3498,3499,3500,3501,3502;
			.@size = getarraysize(.@quest_id);

			for ( .@i = 0; .@i < 6; ++.@i ) {
				.@r = rand(.@size);
				setquest .@quest_id[.@r];
				deletearray .@quest_id[.@r],1;
				.@size--;
			}
			mes "[朱诺克]";
			mes "那么，我就交给你了。如果您需要任何帮助，请随时询问。祝你有美好的一天！。";
			next;
			mes "[朱诺克]";
			mes "请与 3 个当地人和 3 个移民交谈后回来。";
			next;
			mes "[朱诺克]";
			mes "可以在任务窗口或小地图上找到与之交谈的人员列表。";
			close;
		}
		break;
	}
	switch( isbegin_quest(3505) ) {
	case 0:
		mes "[朱诺克]";
		mes "请与所有 6 名公民进行对话，然后返回。";
		close;
	case 1:	// task completed
		switch( checkquest(3504,PLAYTIME) ) {
		case -1:	// first completion
			mes "[朱诺克]";
			mes "是这样吗...";
			next;
			mes "[朱诺克]";
			mes "看来他们之间还是有很大的恩怨。";
			next;
			mes "[朱诺克]";
			mes "情况比我预想的还要糟糕。嗯...我想知道对此能做些什么。";
			next;
			getitem 1000405,10;	// Ep18_Amethyst_Fragment
			getexp 7769124,3000000;	// dummy value
			break;
		case 0:
		case 1:	// (shouldn't happen)
			mes "[朱诺克]";
			mes "今天，我已经收集了足够的信息。如果您再次需要帮助，请明天再来。";
			close;
		case 2:	// daily quest
			mes "[朱诺克]";
			mes "是这样吗...";
			next;
			mes "[朱诺克]";
			mes "看来他们之间还是有很大的恩怨。";
			next;
			mes "[朱诺克]";
			mes "情况比我预想的还要糟糕。嗯...我想知道对此能做些什么。";
			next;
			getitem 1000405,3;	// Ep18_Amethyst_Fragment
			getexp 18252408,2000000;
			break;
		}
		for ( .@i = 3493; .@i < 3506; ++.@i ) {
			if (isbegin_quest(.@i) > 0)
				erasequest .@i;
		}
		setquest 3504;
		mes "[朱诺克]";
		mes "这是很有帮助的指导..";
		next;
		mes "[朱诺克]";
		mes "感谢您的帮助。如果你明天能帮忙的话请再来。";
		close;
	case 2:
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep18_main >= 12 && isbegin_quest(3503) == 0 && (checkquest(3504,PLAYTIME) == -1 || checkquest(3504,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3505) == 1" );
	end;
}

rachel,69,234,3	script	Jarad#atm1	4_M_CHILD1,2,2,{
	if (isbegin_quest(3493) == 1) {
		mes "[贾拉德]";
		mes "你好。";
		next;
		mes "[贾拉德]";
		mes "不久前，村里发生了一场大骚乱。";
		next;
		mes "[贾拉德]";
		mes "一位演讲者以尊重理想人的尊严为主题发表演讲，但似乎反而激起了一些听众的兴趣。";
		next;
		mes "[贾拉德]";
		mes "我还觉得这次演讲并没有像人们希望的那样受到欢迎。";
		next;
		mes "[贾拉德]";
		mes "这只是一种脱离现实的理想主义叙述。";
		next;
		mes "[贾拉德]";
		mes "双方发生了激烈的争吵，甚至肢体冲突似乎一触即发，但旁观者设法阻止了。";
		next;
		mes "[贾拉德]";
		mes "好吧，如果这不影响我个人的话，我并不介意。";
		next;
		completequest 3493;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;	// setquest here to prevent bug
		mes "[贾拉德]";
		mes "祝你有美好的一天！";
		next;
		mes "- 你已经完成了与贾拉德的对话。 -";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			// setquest 3505;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[贾拉德]";
	mes "悄悄...";
	next;
	mes "[贾拉德]";
	mes "我想要没有任何烦恼的生活..";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3493) == 1" );
	end;
}

rachel,100,72,3	script	Rohi#atm2	4_F_SHABBY,2,2,{
	if (isbegin_quest(3494) == 1) {
		mes "[草]";
		mes "你好，我叫罗希。";
		next;
		mes "[草]";
		mes "我一直生活在贫困中，没有任何合适的工作，直到最近......";
		next;
		mes "[草]";
		mes "感谢迪娜，我最近能够从事大楼管理工作，让我有饭吃。";
		next;
		mes "[草]";
		mes "然而，从某个时候开始，规定的工作时间增加了，但报酬却没有增加。";
		next;
		mes "[草]";
		mes "为什么会发生这种情况？即使在移民中，迪娜也被认为是富有的，所以她似乎并不缺乏支付的资金。";
		next;
		mes "[草]";
		mes "我直接和迪娜谈论了不公平的方面，但没有结果。";
		next;
		mes "[草]";
		mes "即使他们提供的薪水较低，很多人都愿意接受这份工作，你知道......";
		next;
		mes "[草]";
		mes "我决定等待，因为马拉姆和其他高级成员目前正在讨论解决这个问题的方法并找到解决方案。";
		next;
		completequest 3494;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[草]";
		mes "谢谢你，也祝你有一个平静的一天！";
		next;
		mes "- 你结束了与Rohi的对话-";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[草]";
	mes "今天的工作量很大，我不确定是否能按时完成所有事情。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3494) == 1" );
	end;
}

rachel,258,207,3	script	Jeojin#atm3	4_F_RACHOLD,2,2,{
	if (isbegin_quest(3495) == 1) {
		mes "[杰金]";
		mes "大家好，我叫杰珍。";
		next;
		mes "[杰金]";
		mes "你可以说我是本地人，从我祖先时代起就生活在这个地区。";
		next;
		mes "[杰金]";
		mes "这些天，由于与移民的摩擦，出现了一些噪音。";
		next;
		mes "[杰金]";
		mes "他们中有些人很富有，其中尤其是迪娜，拥有重要的经济权力。";
		next;
		mes "[杰金]";
		mes "即使在本地人中，我这个拥有相当多财产的人，也确实无法与那个人相比。";
		next;
		mes "[杰金]";
		mes "他们已经开始影响本土商圈，政策也向他们倾斜，我的生意也逐渐变得困难起来。";
		next;
		mes "[杰金]";
		mes "当时，迪娜提议购买我拥有的一些建筑物。我不知道该怎么办。";
		next;
		completequest 3495;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[杰金]";
		mes "那么，祝你有美好的一天。";
		next;
		mes "- 你已经结束了与 Jeojin 的对话。 -";
		next;
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[杰金]";
	mes "嗯...我该怎么办";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3495) == 1" );
	end;
}

rachel,159,173,3	script	Squain#atm4	4_M_LGTPOOR,2,2,{
	if (isbegin_quest(3496) == 1) {
		mes "[斯奎因]";
		mes "你好~~";
		next;
		mes "[斯奎因]";
		mes "非常感谢你的工作。";
		next;
		mes "[斯奎因]";
		mes "你不用再依赖别人了！";
		next;
		mes "[斯奎因]";
		mes "如果我得到报酬，我想先换衣服。";
		next;
		mes "[斯奎因]";
		mes "得到了很多人的帮助...";
		next;
		mes "[斯奎因]";
		mes "现在我要成为一个能够帮助别人的人。";
		next;
		completequest 3496;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[斯奎因]";
		mes "然后小心翼翼的进入。";
		next;
		mes "- 结束了与斯奎因的对话。 -";
		next;
		mes "- 让我们找到下一个联系人。 -";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3496) == 1" );
	end;
}

rachel,190,30,5	script	Senado#atm5	4_F_MONK,2,2,{
	if (isbegin_quest(3497) == 1) {
		mes "[参议院]";
		mes "你好。";
		next;
		mes "[参议院]";
		mes "议事亭是一个接受武术二十多年的人。";
		next;
		mes "[参议院]";
		mes "我曾到过各个村庄，检验自己所积累的武功实力。在打破了许多道场之后，我不久前就在蕾切尔这里定居了。";
		next;
		mes "[参议院]";
		mes "不过，最近我感觉这个村子里的气氛不太对劲。";
		next;
		mes "[参议院]";
		mes "似乎人们分成了两派，进行着一场对抗，一场本地人和移民之间的冲突……";
		next;
		mes "[参议院]";
		mes "严格意义上来说，我属于原住民。然而，我不想成为这场对抗的一部分。";
		next;
		mes "[参议院]";
		mes "我对他们的权力斗争不感兴趣。";
		next;
		completequest 3497;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[参议院]";
		mes "那么我们下次再见面吧。";
		next;
		mes "- 我已经和议事亭谈话了。 -";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[参议院]";
	mes "无论是本地人还是移民...";
	next;
	mes "[参议院]";
	mes "我不知道他们为什么如此分裂和争论。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3497) == 1" );
	end;
}

rachel,210,52,5	script	Japer#atm6	1_ETC_01,2,2,{
	if (isbegin_quest(3498) == 1) {
		mes "[贾珀]";
		mes "你好，他们叫我 Trader Japer..";
		next;
		mes "[贾珀]";
		mes "我相信与其他人相比，我拥有卓越的商业技能。我就是这样达到现在的地位的。";
		next;
		mes "[贾珀]";
		mes "当然，如果没有像我这样有奉献精神的人，勤奋地履行自己的职责，国家的繁荣就不可能实现，你不觉得吗？";
		next;
		mes "[贾珀]";
		mes "此外，通过建立一个重要的商人协会，我已经能够为居住在雷切尔的许多土著居民提供就业机会。";
		next;
		mes "[贾珀]";
		mes "我明白了，目前移民和当地人之间似乎存在很多紧张和冲突，尤其是对我的不满越来越大。";
		next;
		mes "[贾珀]";
		mes "似乎现在的工作条件不太理想，有一种不满足的感觉，觉得如果没有我，他们可能根本就没有这些工作机会。";
		next;
		mes "[贾珀]";
		mes "我为那些忘恩负义而且充满受害者感的当地人而颤抖";
		next;
		completequest 3498;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[贾珀]";
		mes "那么，直到下次吧..";
		next;
		mes "- 你已经和贾珀谈完了 -";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[贾珀]";
	mes "我靠自己的方法积累了财富";
	next;
	mes "[贾珀]";
	mes "他们误解了我。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3498) == 1" );
	end;
}

rachel,40,73,7	script	Shiroan#atm7	1_F_02,2,2,{
	if (isbegin_quest(3499) == 1) {
		mes "[白庵]";
		mes "你好。";
		next;
		mes "[白庵]";
		mes "我是贾帕弟子白庵。";
		next;
		mes "[白庵]";
		mes "我一直追随贾珀。";
		next;
		mes "[白庵]";
		mes "他出色的业务能力确实值得我们学习。";
		next;
		mes "[白庵]";
		mes "然而，有时他强迫事情太多。";
		next;
		mes "[白庵]";
		mes "结果，与他所雇用的当地人的冲突增加了";
		next;
		mes "[白庵]";
		mes "他这么固执，根本不听我的话……真令人担忧。";
		next;
		completequest 3499;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[白庵]";
		mes "那么我希望你有一个平静的一天。";
		next;
		mes "――我和白庵的对话已经结束了。 -";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[白庵]";
	mes "我希望贾珀停止争论。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3499) == 1" );
	end;
}

rachel,88,151,3	script	Ishira#atm8	1_F_03,2,2,{
	if (isbegin_quest(3500) == 1) {
		mes "[关闭]";
		mes "你好很高兴见到你。我是伊西拉。我怎么帮你？";
		next;
		mes "[关闭]";
		mes "我是芙蕾雅的忠实追随者。";
		next;
		mes "[关闭]";
		mes "最近信徒之间的气氛紧张吗？";
		next;
		mes "[关闭]";
		mes "我不知道，但从目前的情况来看，当地人和移民之间的紧张关系最近似乎有所升级。";
		next;
		mes "[关闭]";
		mes "原本崎岖不平的土地，在女神的恩典下变成了肥沃的田野，为人们提供了食物和生命的道路……";
		next;
		mes "[关闭]";
		mes "难道我们不应该感恩吗？";
		next;
		mes "[关闭]";
		mes "尽管如此，最近发生的风波……唉……";
		next;
		mes "[关闭]";
		mes "我不确定到底是什么引起了不满。";
		next;
		completequest 3500;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[关闭]";
		mes "然后，度过平静的一天。";
		next;
		mes "- 与伊西拉的对话已经结束。 -";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[关闭]";
	mes "多亏了移民，当地人得到的好处一定是可观的……";
	next;
	mes "[关闭]";
	mes "我真的不明白他们为什么这样做。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3500) == 1" );
	end;
}

rachel,240,182,5	script	Dina#atm9	1_F_04,2,2,{
	if (isbegin_quest(3501) == 1) {
		mes "[你的]";
		mes "你好，什么风把你吹到这里来了？？";
		next;
		mes "[你的]";
		mes "啊~好像有很多关于我的负面传闻吧？";
		next;
		mes "[你的]";
		mes "我希望你不要只考虑你听到的部分。";
		next;
		mes "[你的]";
		mes "为了积累现在的财富，我一直都是战略性、务实的。";
		next;
		mes "[你的]";
		mes "考虑到我们是基于相互理解的合同关系，最近听到各种负面报道令人遗憾。";
		next;
		mes "[你的]";
		mes "如果是关于收购大楼的话，我打算维持目前的立场。";
		next;
		mes "[你的]";
		mes "这是一个合法获取利润的过程。对此说任何反对的话都是没有道理的。";
		next;
		completequest 3501;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[你的]";
		mes "祝您有美好的一天！";
		next;
		mes "- 我已经结束了和迪娜的谈话。 -";
		next;
		mes "-让我们寻找下一个人-";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[你的]";
	mes "哦，好吧，我不知道为什么我是唯一一个处理这个问题的人。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3501) == 1" );
	end;
}

rachel,212,52,3	script	Hari#atm10	1_F_MERCHANT_02,2,2,{
	if (isbegin_quest(3502) == 1) {
		mes "[日]";
		mes "大家好，这是贾弗的妻子哈里。";
		next;
		mes "[日]";
		mes "由于性格火爆，有时发生意外时，我会负责重新安排。一个这样做的人。";
		next;
		mes "[日]";
		mes "因为在给原住民加薪的问题上没有妥协，我吃了不少苦头。";
		next;
		mes "[日]";
		mes "其实我觉得没必要加薪，只是我更讨厌和老公吵架。";
		next;
		mes "[日]";
		mes "不管怎样，我很高兴似乎有一些妥协。";
		next;
		mes "[日]";
		mes "我现在要你安静。";
		next;
		completequest 3502;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[日]";
		mes "然后就进去啦~";
		next;
		mes "- 与哈里的对话结束了。 -";
		next;
		mes "- 让我们找到下一个联系人。 -";
		if (.@total == 12) {
			next;
			mes "- 您已完成与全部 6 个人的对话。让我们回到朱诺克――";
		}
		close;
	}
	mes "[日]";
	mes "你好，我是哈里。";
	next;
	mes "[日]";
	mes "她就是眼前那个倔强不屈的女人。";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3502) == 1" );
	end;
}
//-------------------------------------------------------------------



//-------------------------------------------------------------------
// Quest: Picking Half Flowers. Step 1.
rachel,169,79,0	script(CLOAKED)	#Directing Warp	WARPNPC,{
	end;
OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 170 && isbegin_quest(5932) == 0" );
	end;
}

rachel,170,80,6	duplicate(dummy_cloaked_npc)	Greedy Man#E18_1	4_M_RASWORD
rachel,172,80,4	duplicate(dummy_cloaked_npc)	Abused Child#E18_2	4_M_DST_CHILD
rachel,175,80,4	duplicate(dummy_cloaked_npc)	Abused Child#E18_3	4_M_DST_CHILD
	
rachel,176,80,0	script	#Hoesopflowerstart	HIDDEN_WARP_NPC,10,10,{
	end;
OnTouch:
	if (BaseLevel < 170)
		end;
	switch( isbegin_quest(5932) ) {
	case 0:
		cloakoffnpcself( "#Directing Warp" );
		cloakoffnpcself( "Greedy Man#E18_1" );
		cloakoffnpcself( "Abused Child#E18_2" );

		mes "- 一个看起来很贪婪的人";
		mes "- 对一个孩子大喊大叫。";
		next;
		if (select( "听听发生了什么。", "忽略它。" ) == 2)
			end;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男人：这就是我喂养和庇护一个无处可去的部落儿童所得到的全部回报吗？", "贪婪的人#E18_1", bc_self;
		emotion ET_SURPRISE, playerattached();
		unittalk getcharid(3), "" + strcharinfo(0) + " : ??", bc_self;
		next;
		emotion ET_ANGER, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：啊？！这一点都不好笑。你怎么敢把手放在客人的钱包上？", "贪婪的人#E18_1", bc_self;
		next;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：呃……我只是听从周围的建议，不要对当地人手下留情。", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "男：我一定是一时失去了理智。这次我会让它溜走，但立即从我的视线中消失。", "贪婪的人#E18_1", bc_self;
		specialeffect EF_HIT1, AREA, "Abused Child#E18_2";
		npctalk "孩子：啊啊！", "受虐儿童#E18_2", bc_self;
		emotion ET_PROFUSELY_SWAT, getnpcid(0,"Abused Child#E18_2");
		cloakonnpcself( "Abused Child#E18_2" );
		cloakoffnpcself( "Abused Child#E18_3" );
		next;
		emotion ET_STARE, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：你就不能安静点吗？你在附近大惊小怪、大喊大叫做什么？！", "贪婪的人#E18_1", bc_self;
		next;
		emotion ET_CRY, getnpcid(0,"Abused Child#E18_3");
		npctalk "孩子：我什么也没做。我从来没有见过客人的钱包。", "受虐儿童#E18_3", bc_self;
		next;
		npctalk "男：这……这……", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "男：这小子怎么敢顶嘴而不求饶？！", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "男：所以现在你还在撒谎，即使我试图放过它并原谅你？", "贪婪的人#E18_1", bc_self;
		next;
		emotion ET_BLABLA, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：我不需要你这样无礼的小子！你立即被解雇！", "贪婪的人#E18_1", bc_self;
		next;
		cloakonnpcself( "Abused Child#E18_3" );
		cloakoffnpcself( "Abused Child#E18_2" );
		emotion ET_CRY, getnpcid(0,"Abused Child#E18_2");
		npctalk "孩子：你错了，先生。", "受虐儿童#E18_2", bc_self;
		next;
		npctalk "孩子：求求你，不要解雇我……我需要赚钱给我父亲买药。", "受虐儿童#E18_2", bc_self;
		next;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男人： ？！医药费？", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "男：那是你的事。我为什么要关心？", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "孩子：先生，那我打工到现在赚的钱呢？", "受虐儿童#E18_2", bc_self;
		next;
		emotion ET_QUESTION, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：什么？钱你赚到了吗？", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "男：啊？这是一个什么样的时代？各种废话我都听过，但是偷东西被抓了还厚颜无耻地要钱？", "贪婪的人#E18_1", bc_self;
		next;
		emotion ET_QUESTION, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：钱包被偷了就索赔已经够丢人的了，现在还要钱？多么可笑啊。", "贪婪的人#E18_1", bc_self;
		next;
		emotion ET_CRY, getnpcid(0,"Abused Child#E18_2");
		specialeffect EF_HIT1, AREA, "Abused Child#E18_2";
		npctalk "孩子：啊啊！", "受虐儿童#E18_2", bc_self;
		cloakonnpcself( "Abused Child#E18_2" );
		cloakoffnpcself( "Abused Child#E18_4" );
		next;
		npctalk "男：嘿！你就不能把它放下吗？", "贪婪的人#E18_1", bc_self;
		next;
		npctalk "男：孩子，如果你又在这里闲逛而我抓住你，你最好做好准备。", "贪婪的人#E18_1", bc_self;
		next;
		setquest 5932;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "男：啊，运气不站在我这一边。", "贪婪的人#E18_1", bc_self;
		cloakonnpcself( "#Directing Warp" );
		cloakonnpcself( "Greedy Man#E18_1" );
		close;
	case 1:
		cloakonnpcself( "#Directing Warp" );
		cloakonnpcself( "Greedy Man#E18_1" );
		cloakoffnpcself( "Abused Child#E18_4" );
		end;
	case 2:
		end;
	}
}

rachel,180,80,4	script(CLOAKED)	Abused Child#E18_4	4_M_DST_CHILD,{
	if (checkweight(1000405,10) == 0) {
		mes "- 您有太多项目无法继续。 -";
		close;
	}
	if (isbegin_quest(5932) == 1) {
		mes "[孩子]";
		mes "啊..运气不好不是吗？与一个纯粹的本地人打交道。";
		next;
		mes "[孩子]";
		mes "啊..我在钱上给了他一些自由，但是没有给他太多的自由，所以还是比较满意的。我以为它会持续下去。";
		next;
		select( "你还好吗？" );
		mes "[孩子]";
		mes "叔叔什么？";
		next;
		mes "[孩子]";
		mes "您先生看起来像个外人，所以请饶恕我的浅薄同情吧。这种待遇对于当地人来说很常见。";
		next;
		mes "[孩子]";
		mes "然后先生就可以继续赶路了。很不高兴认识你，我们以后不要再见面了~";
		next;
		emotion ET_STARE_ABOUT;
		mes "[孩子]";
		mes "哈...我知道我会被抓住。";
		next;
		emotion ET_KIK;
		mes "[孩子]";
		mes "连老板都傻了。我偷的不是客人的钱包。";
		next;
		mes "[孩子]";
		mes "哦！那么，到底是谁偷了客人的钱包呢？如果我也偷了它，我会感觉更公平。";
		next;
		mes "[孩子]";
		mes "让我们看看...我花了多少钱？";
		next;
		emotion ET_MONEY;
		mes "[孩子]";
		mes "一。二…… 三、四、五，鱿鱼，香辣炖牛肉，七，章鱼，十字螺丝刀。";
		next;
		mes "[孩子]";
		mes "天啊，咸的。是咸的。";
		next;
		emotion ET_THINK;
		sleep2 3000;
		emotion ET_SWEAT;
		mes "[孩子]";
		mes "哈哈？先生..你还在吗？你看到我数钱了吗？打算扭断老板的手臂吗？";
		next;
		select( "既然不会用，那退货怎么样？" );
		mes "[孩子]";
		mes "哈..这位先生！你还在说好话，刚才没看到吗？";
		next;
		mes "[孩子]";
		mes "我辛辛苦苦工作了几个月连应有的工资都没有拿到？";
		next;
		mes "[孩子]";
		mes "就算不能，至少拿了老板的钱包，也能给拖欠的工资一些安慰。";
		next;
		mes "[孩子]";
		mes "哦，无论如何！如果你要扭转，就扭转吧。现在，父亲已经康复，可以自己活动了。";
		next;
		mes "[孩子]";
		mes "我们也在慢慢筹集商业资金来启动。";
		next;
		select( "什么样的生意？没有什么违法的吧？" );
		mes "[孩子]";
		mes "呵呵..你先生！先生，你正在策划一件大事。";
		next;
		mes "[孩子]";
		mes "您是否想用尖刻的舌头抢夺别人的商业创意？";
		next;
		mes "[孩子]";
		mes "我一个人做起来不容易，而且你看起来也不是什么坏大人，所以我就破例了。";
		next;
		mes "[孩子]";
		mes "我会给你一个我为我的生意预留的地点的粗略草图。如果你真的对我的生意感兴趣，就来找我吧。";
		next;
		completequest 5932;
		setquest 5933;
		mes "[孩子]";
		mes "哦！我的名字是梅杰。再见。";
		close2;
		cloakonnpcself( "Abused Child#E18_4" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5932) == 1" );
	end;
}

// Quest: Picking Half Flowers. Step 2.
rachel,70,135,4	script(CLOAKED)	Mejai#E18_5	4_M_DST_CHILD,{
	if (checkweight(1000405,10) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (isbegin_quest(5933) == 1) {
		mes "[梅杰]";
		mes "好吧，好吧，好吧。所以这位先生真的来了。你来这里就说明你对我的生意感兴趣，对吧？";
		next;
		mes "[梅杰]";
		mes "嗯...我该怎么办..";
		next;
		mes "[梅杰]";
		mes "啊，隐瞒不符合我的性格，所以我就老实说吧。";
		next;
		mes "[梅杰]";
		mes "本来有几个人来听我的商业计划，但一听就都走了。";
		next;
		if (select( "发生什么事了？", "我不感兴趣。" ) == 2) {
			mes "[梅杰]";
			mes "哼！";
			mes "叔叔 如果你连兴趣都没有，何必来这里浪费时间呢？";
			close;
		}
		mes "[梅杰]";
		mes "哈！听到这个不要感到惊讶，我会在这片沙漠里卖花。";
		next;
		emotion ET_QUESTION, playerattached();
		sleep2 3000;
		emotion ET_THINK, playerattached();
		mes "[梅杰]";
		mes "为什么？什么？看看这个，看看。这也是为什么外人说不可能的原因。你知道沙漠里的花有多珍贵吗？";
		next;
		mes "[梅杰]";
		mes "先生，你见过雷切尔的花店吗？";
		next;
		emotion ET_OK, playerattached();
		mes "[梅杰]";
		mes "嗯，你当然已经看到了。雷切尔一定有一家花店吧？";
		next;
		mes "[梅杰]";
		mes "如果一家只卖插花、不卖活花的店就可以称为花店，那就是了。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "但是哪里可以买到花呢？";
		next;
		mes "[梅杰]";
		mes "这正是问题所在。你很敏锐，先生。我喜欢这样。";
		next;
		mes "[梅杰]";
		mes "在这里买到鲜花并非不可能。虽然很少见，但有多种方法可以获得。";
		next;
		mes "[梅杰]";
		mes "你听说过半花吗？外人可能对他们并不熟悉。你问过毕宿五当地人吗？";
		next;
		mes "[梅杰]";
		mes "这是一种美丽而神秘的花朵，只在灰狼森林中绽放。我爸爸说他选了一个来向我妈妈求婚。";
		next;
		mes "[梅杰]";
		mes "而自从妈妈去世后，爸爸也只是在喝酒的时候才会说起采集半花的方法。";
		next;
		mes "[梅杰]";
		mes "人们说半花开在树下、岩石旁或草旁。";
		next;
		mes "[梅杰]";
		mes "你必须考虑花朵周围的湿度，并以 10 度、20 度和 30 度的角度切割。";
		next;
		emotion ET_THINK;
		mes "[梅杰]";
		mes "啊……我有点兴奋。每当我父亲谈到这件事时，我都会感到压力。";
		next;
		mes "[梅杰]";
		mes "好吧，最后，这成了我的事，所以他所有关于这方面的讲座都被证明是值得的。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那么，我能为您提供什么帮助呢？";
		next;
		mes "[梅杰]";
		mes "我相信，保持半花的充足供应对于我正在计划的业务的稳定运营至关重要。";
		next;
		mes "[梅杰]";
		mes "所以，我打算和众多的冒险者签订契约。当然，先生您也会成为其中的一员吧？";
		next;
		mes "[梅杰]";
		mes "叔叔的任务是去灰狼森林采集半花。";
		next;
		mes "[梅杰]";
		mes "当然，一旦该业务稳定下来，我计划进行其他冒险活动，但让我们把讨论留到业务真正稳定时再说。";
		next;
		mes "[梅杰]";
		mes "你说什么，先生？你愿意和我一起工作吗？";
		next;
		if (select( "开始吧。", "现在有点不方便。" ) == 2) {
			completequest 5933;
			mes "[梅杰]";
			mes "好吧，如果不方便的话，我们也无能为力。";
			next;
			mes "[梅杰]";
			mes "人生中，也许会有再次合作的一天吧？如果您重新考虑，让我们尝试一下合作。";
			close;
		}
		mes "[梅杰]";
		mes "好的。我认为老板和员工之间的相互尊重很重要。你可以猜到我为什么这么说。";
		next;
		mes "[梅杰]";
		mes "现在我们正在一起工作，从现在开始请叫我梅贾伊总统。我会尊重你以及工作人员。";
		next;
		mes "[梅杰]";
		mes "我不会亏待你的。我厌倦了这样的事情...";
		next;
		mes "[梅杰]";
		mes "首先，我想告诉你们最重要的任务，如何收集半花。";
		next;
		erasequest 5933;
		setquest 5934;
		mes "[梅杰]";
		mes "等你准备好了就跟我说话。";
		close;
	}
	if (isbegin_quest(5933) == 2) {
		mes "[梅杰]";
		mes "又回来了？我正忙着准备生意，所以除非有重要的事情，否则请不要打扰我？";
		next;
		if (select( "抱歉，可能会晚点。", "我可以参与这项业务吗？" ) == 1) {
			mes "[梅杰]";
			mes "一定要小心。我有很多想法，所以我可以很敏锐。";
			close;
		}
		mes "[梅杰]";
		mes "真的吗？嗯！";
		mes "明白了。我认为雇主和雇员之间的相互尊重至关重要。你可能猜到我为什么这么说。";
		next;
		mes "[梅杰]";
		mes "现在我们已经在一起工作了，从现在开始请称呼我为 Mejai 经理。我还将确保将您视为团队的一员而不仅仅是先生来尊重。";
		next;
		mes "[梅杰]";
		mes "你不会发现我鲁莽行事。我已经厌倦了这样的行为......";
		next;
		mes "[梅杰]";
		mes "首先，明智的做法是对最关键的任务进行教育，即收获半花的方法。";
		next;
		erasequest 5933;
		setquest 5934;
		mes "[梅杰]";
		mes "等你准备好了就跟我说话。";
		close;
	}
	if (isbegin_quest(5934) == 1) {
		mes "[梅杰]";
		mes "您准备好开始半花采摘教育了吗？";
		next;
		if (select( "经理，请继续。", "请稍等。" ) == 2) {
			mes "[梅杰]";
			mes "慢慢来。";
			close;
		}
		mes "[梅杰]";
		mes "嗯，欢迎来到半花采收教育。";
		next;
		mes "[梅杰]";
		mes "收获过程分为四个主要步骤。首先，你要剪掉茎。";
		next;
		mes "[梅杰]";
		mes "其次，您将从切下的茎上除去叶子。";
		next;
		mes "[梅杰]";
		mes "第三，将茎端浸入一个装满水和秘密粉末的小容器中，将它们充分混合。";
		next;
		mes "[梅杰]";
		mes "最后，您将茎端小心地包装在一个小容器中，以防止花朵枯萎。";
		next;
		mes "[梅杰]";
		mes "单纯从方法上来看，应该不会太难吧？";
		next;
		mes "[梅杰]";
		mes "然而，到了高级阶段，切茎的角度、根据半花开花地点去除的叶子数量以及容器中的水和秘粉的量可能会有所不同……";
		next;
		mes "[梅杰]";
		mes "不用担心。当你接受任务时，我会确保提供详细的说明，这样你就不会忘记任何事情。";
		next;
		mes "[梅杰]";
		mes "你能看到你旁边正在练习的半花吗？";
		next;
		mes "[梅杰]";
		mes "我想当我开始创业时，我投入了一半的钱来练习半花。";
		next;
		mes "[梅杰]";
		mes "嗯，我并不后悔，因为它使培训员工变得更容易。我们要像真的一样去练习吗？";
		next;
		erasequest 5934;
		setquest 5935;
		mes "[梅杰]";
		mes "你怎么认为？我们假设半花在树下盛开，然后和我旁边的半花一起练习吗？";
		close;
	}
	if (isbegin_quest(5935) == 1) {
		mes "[梅杰]";
		mes "请关注我旁边练习的半花。";
		close2;
		cloakoffnpcself( "Half Flower#E18_6" );
		end;
	}
	if (isbegin_quest(5936) == 1) {
		// if (rentalcountitem(1000407) < 1)
		mes "[梅杰]";
		mes "干得好。未来的半花系列将按照刚才的方式进行。";
		next;
		mes "[梅杰]";
		mes "你的任务就是将收集到的鲜花交给我。";
		next;
		mes "[梅杰]";
		mes "当您作为一名工作人员同时从事各种其他任务时......";
		next;
		mes "[梅杰]";
		mes "如果你能在工作时半花枯萎之前把它们带给我，我将不胜感激。";
		next;
		mes "[梅杰]";
		mes "哦！我应该提到的一个提示是，使用我提供的方法收集花朵的时间越长，它们的保存时间就越长。";
		next;
		select( "我们什么时候开始工作？" );
		mes "[梅杰]";
		mes "今天我也在忙着开店的准备，那么从明天开始怎么样？";
		next;
		select( "当然。明天见。" );
		mes "[梅杰]";
		mes "哦，亲爱的，我需要给你这个。";
		next;
		mes "[梅杰]";
		mes "我的工作我已经做好了，但是在训练期间，我不能就这么放过你。";
		next;
		if (rentalcountitem(1000407) > 0)
			delitem 1000407,1;	// Ep18_Half_Flower
		completequest 5936;
		setquest 5937;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;	// dummy value
		mes "[梅杰]";
		mes "我现在给你的，就是今天训练的奖励。好好休息，明天见。";
		close;
	}
	mes "[梅杰]";
	mes "好好休息，明天见。";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5933) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5934) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 1" );
	end;
}

// Quest: Picking Half Flowers. Step 3 (final).
rachel,72,133,4	script(CLOAKED)	Half Flower#E18_6	4_EP18_HALFFLOWER,{
	if (checkweight(1000407,1) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (isbegin_quest(5935) == 1) {
		setarray .@good_answer[0],2,2,2,3;
		.@time = 86400;
		mes "这是练习半花。";
		next;
		npctalk "Mejai：我们假设半花在树下盛开，然后开始练习。", "梅贾伊#E18_5", bc_self;
		next;
		npctalk "Mejai：我们要先把半花的茎剪掉吗？", "梅贾伊#E18_5", bc_self;
		next;
		if (select( "以 10&#65533;&#65533; 角度切割。", "以 20&#65533;&#65533; 角度切割。", "以 30&#65533;&#65533; 角度切割。", "以 40&#65533;&#65533; 角度切割。" ) != .@good_answer[0])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "梅杰：谢谢你的决定。我们先从切断茎开始。", "梅贾伊#E18_5", bc_self;
		next;
		npctalk "梅杰：明白了。接下来，我将除去叶子。我会留下足够的并删除其余的。", "梅贾伊#E18_5", bc_self;
		next;
		if (select( "留下 2 片叶子。", "留下 4 片叶子。", "留下 6 片叶子。", "留下 8 片叶子。" ) != .@good_answer[1])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "梅杰：干得好。接下来，我们将准备一个罐子来浸泡茎端。", "梅贾伊#E18_5", bc_self;
		next;
		npctalk "Mejai：首先，请将小罐子装满水。", "梅贾伊#E18_5", bc_self;
		next;
		if (select( "20毫升。", "30毫升。", "40毫升。", "50毫升。" ) != .@good_answer[2])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejai：我现在将我制作的秘密粉末添加到水中并混合。", "梅贾伊#E18_5", bc_self;
		next;
		npctalk "Mejai：请适量混合。", "梅贾伊#E18_5", bc_self;
		next;
		if (select( "添加 2 克。", "添加 4 克。", "添加 6 克。", "添加 8 克。" ) != .@good_answer[3])
			.@time /= 2;
		npctalk "Mejai：现在，进行最后一步。", "梅贾伊#E18_5", bc_self;
		next;
		npctalk "Mejai：现在，只需将切好的茎端放入装有水和我们刚刚混合的秘密粉末的容器中，我们就完成了包装！", "梅贾伊#E18_5", bc_self;
		next;
		progressbar "FFFF00",1;
		// note: the timer decreases according to the answer but no idea of the ratio
		rentitem 1000407,.@time;	// Ep18_Half_Flower
		erasequest 5935;
		setquest 5936;
		cloakonnpcself( "Half Flower#E18_6" );
		npctalk "梅杰：完成了！你能把你刚摘下的半朵花拿给我吗？", "梅贾伊#E18_5", bc_self;
		close;
	}
	end;

OnInit:
	setunittitle( getnpcid(0), "For Practice" );

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5935) == 1" );
	end;
}

// daily quest
rachel,70,135,4	script(CLOAKED)	Mejai#E18_7	4_M_DST_CHILD,{
	if (checkweight(1000405,3) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (isbegin_quest(5933) == 1) {
		if (checkquest(5937,PLAYTIME) == 2)
			erasequest 5937;
		npctalk "梅杰：哦，你来了？我们今天也要积极地开始吗？", "梅贾伊#E18_7", bc_self;
		mes "[梅杰]";
		mes "欢迎。我们正要为“花室”举行一个简单的开幕仪式。";
		next;
		mes "[梅杰]";
		mes "嗯...";
		next;
		mes "[梅杰]";
		mes "虽然不是每个人都能参加这次聚会，但我衷心感谢那些能够加入我们并照亮这一时刻的人。";
		next;
		mes "[梅杰]";
		mes "我必须在这里取得成功。";
		next;
		mes "[梅杰]";
		mes "我知道这并不理想，但这项生意是我用尽我所能筹集到的每一分钱开始的。";
		next;
		mes "[梅杰]";
		mes "没有安全网。所以，我会尽力而为，我希望你们，我的员工，也能这样做。";
		next;
		mes "[梅杰]";
		mes "我会努力成为一个用自己的努力回报大家的老板。";
		next;
		setquest 5942;
		completequest 5942;
		mes "[梅杰]";
		mes "盛大开幕啦！现在我们是不是要全心全意地投入到工作中呢？";
		next;
	}
	switch( checkquest(5937,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		setpcblock PCBLOCK_NPC, true;
		npctalk "梅杰：来吧！今天的工作就完成了。", "梅贾伊#E18_7", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		npctalk "Mejai：回家并忠于你的家人。这并不是您唯一需要做的事情。", "梅贾伊#E18_7", bc_self;
		end;
	case 2:
		setpcblock PCBLOCK_NPC, true;
		npctalk "梅杰：你好。今天我们也尽力吧。", "梅贾伊#E18_7", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		break;
	}
	switch( select( "我现在很忙..", "采摘半朵花", "运送半朵花" ) ) {
	case 1:
		npctalk "Mejai：你好像在忙什么？当你有空的时候请来见我。", "梅贾伊#E18_7", bc_self;
		end;
	case 2:
		for ( .@id = 5938; .@id < 5942; .@id++ ) {
			if (isbegin_quest(.@id) == 1) {
				.@quest_id = .@id;
				break;
			}
		}
		if (.@quest_id == 0)
			.@quest_id = rand(5938,5941);

		switch( isbegin_quest(.@quest_id) ) {
		case 0:
			npctalk "Mejai：你打算收集半朵花吗？", "梅贾伊#E18_7", bc_self;
			if (select( "我去收集它们。", "今天我会跳过。" ) == 2)
				end;
			switch( checkquest(5937,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				npctalk "梅杰：哦！你确定吗？", "梅贾伊#E18_7", bc_self;
				setpcblock PCBLOCK_NPC, true;
				sleep2 1000;
				setpcblock PCBLOCK_NPC, false;
				npctalk "Mejai：今天还没结束，如果你今天任务提早完成的话，也请考虑去花房帮忙。", "梅贾伊#E18_7", bc_self;
				end;
			case 2:
				break;
			}
			setquest .@quest_id;
			npctalk "Mejai：请小心今天树附近盛开的半朵花。", "梅贾伊#E18_7", bc_self;
			setpcblock PCBLOCK_NPC, true;
			sleep2 1000;
			setpcblock PCBLOCK_NPC, false;
			npctalk "梅杰：好的！斗争！今天带回来一些充满活力的新鲜半花。", "梅贾伊#E18_7", bc_self;
			end;
		case 1:
			if (rentalcountitem(1000407) < 1) {
				npctalk "Mejai：今天请继续为新鲜的半花而努力。", "梅贾伊#E18_7", bc_self;
				end;
			}
			delitem 1000407,1;	// Eps18_Half_Flower
			erasequest .@quest_id;
			if (checkquest(5937,PLAYTIME) == 2)
				erasequest 5937;
			setquest 5937;
			getitem 1000405,3;	// Ep18_Amethyst_Fragment
			getexp 18252408,2000000;
			npctalk "Mejai：今天你也辛苦了。剩下的请交给我。", "梅贾伊#E18_7", bc_self;
			end;
		case 2:
			end;	// impossible
		}
		end;
	case 3:
		npctalk "Mejai：这是一项我仍在考虑的服务。也许我们可以在业务稳定一点后启动它？", "梅贾伊#E18_7", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		npctalk "Mejai：到时候，我会依靠你的帮助。", "梅贾伊#E18_7", bc_self;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(5936) == 2 && isbegin_quest(5938) == 0 && isbegin_quest(5939) == 0 && isbegin_quest(5940) == 0 && isbegin_quest(5941) == 0 && checkquest(5937,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 2 && rentalcountitem(1000407) > 0" );
	end;
}

gw_fild01,325,376,1	script	Half Flower#EP18_R01	4_EP18_HALFFLOWER,7,7,{
	if (checkweight(1000407,1) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	for ( .@id = 5938; .@id < 5942; .@id++ ) {
		if (isbegin_quest(.@id) == 1) {
			.@quest_id = .@id;
			break;
		}
	}
	if (.@quest_id == 0) {
		unittalk getcharid(3), "Half flower is blooming", bc_self;
		end;
	}
	// player interacts with the npc according to the quest ID
	// 5938 requires EP18_R (flower near a Rock)
	// 5939 requires EP18_L (?)
	// 5940 requires EP18_T (Tree)
	// 5941 requires EP18_W (Water)
	switch( .@quest_id ) {
	case 5938:
		.@string$ = "EP18_R";
		setarray .@good_answer[0],4,1,4,1;
		break;
	case 5939:
		.@string$ = "EP18_L";
		setarray .@good_answer[0],3,2,3,2;
		break;
	case 5940:
		.@string$ = "EP18_T";
		setarray .@good_answer[0],2,2,2,3;
		break;
	case 5941:
		.@string$ = "EP18_W";
		setarray .@good_answer[0],1,4,1,4;
		break;
	}
	if (compare(strnpcinfo(2), .@string$) == false) {
		cloakonnpc strnpcinfo(0), getcharid(0);
		end;
	}
	if (rentalcountitem(1000407) > 0) {
		mes "- 半花更多";
		mes "- 没有必要，在枯萎之前";
		mes "- 把它带到梅杰。";
		close;
	}
	.@time = 86400;
	mes "- 半朵花正在盛开。让我们";
	mes "- 从以下地方收集所需材料";
	mes "- Mejai 提供的收获工具。";
	next;
	unittalk getcharid(3), "" + strcharinfo(0) + " : What angle should I cut the stem?", bc_self;
	next;
	if (select("以 10&#65533;&#65533; 角度切割", "以 20&#65533;&#65533; 角度切割", "以 30&#65533;&#65533; 角度切割", "以 40&#65533;&#65533; 角度切割" ) != .@good_answer[0])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many leaves should I leave?", bc_self;
	next;
	if (select("留下 2 片叶子", "留下 4 片叶子", "留下 6 片叶子", "留下 8 片叶子" ) != .@good_answer[1])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many milliliters of water should I put in the small bottle?", bc_self;
	next;
	if (select("放入20毫升", "放入30毫升", "放入40毫升", "放入50毫升" ) != .@good_answer[2])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many grams of secret powder should I put in?", bc_self;
	next;
	if (select( "放入2克。", "放入4克。", "放入6克。", "放入8克。" ) != .@good_answer[3])
		.@time /= 2;
	progressbar "FFFF00",1;
	cloakonnpcself();
	// note: the timer decreases according to the answer but no idea of the ratio
	rentitem 1000407, .@time;	// Ep18_Half_Flower
	mes "- 你已经收获了半朵花。";
	mes "- 让我们在它枯萎之前把它送到梅贾伊吧。";
	close;

OnTouch:
	for ( .@id = 5938; .@id < 5942; .@id++ ) {
		if (isbegin_quest(.@id) == 1) {
			.@quest_id = .@id;
			break;
		}
	}
	if (.@quest_id == 0)
		end;
	setarray .@string$[5938], "EP18_R", "EP18_L", "EP18_T", "EP18_W";
	if (compare(strnpcinfo(2), .@string$[.@quest_id]) == false) {
		cloakonnpc strnpcinfo(0), getcharid(0);
		end;
	}
	end;
}
gw_fild01,280,106,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R02	4_EP18_HALFFLOWER,7,7
gw_fild01,382,271,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R03	4_EP18_HALFFLOWER,7,7
gw_fild02,291,248,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R04	4_EP18_HALFFLOWER,7,7
gw_fild02,119,93,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R05	4_EP18_HALFFLOWER,7,7
gw_fild02,287,321,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R06	4_EP18_HALFFLOWER,7,7

gw_fild01,297,310,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L01	4_EP18_HALFFLOWER,7,7
gw_fild01,219,211,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L02	4_EP18_HALFFLOWER,7,7
gw_fild01,316,150,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L03	4_EP18_HALFFLOWER,7,7
gw_fild02,104,338,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L04	4_EP18_HALFFLOWER,7,7
gw_fild02,207,101,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L05	4_EP18_HALFFLOWER,7,7
gw_fild02,268,262,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L06	4_EP18_HALFFLOWER,7,7
gw_fild02,144,94,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L07	4_EP18_HALFFLOWER,7,7
wolfvill,212,86,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L08	4_EP18_HALFFLOWER,7,7
wolfvill,143,43,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L09	4_EP18_HALFFLOWER,7,7
wolfvill,58,113,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L10	4_EP18_HALFFLOWER,7,7

gw_fild01,157,92,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T01	4_EP18_HALFFLOWER,7,7
gw_fild01,189,183,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T02	4_EP18_HALFFLOWER,7,7
gw_fild01,202,358,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T03	4_EP18_HALFFLOWER,7,7
gw_fild01,279,64,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T04	4_EP18_HALFFLOWER,7,7
gw_fild01,159,206,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T05	4_EP18_HALFFLOWER,7,7
gw_fild02,125,367,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T06	4_EP18_HALFFLOWER,7,7
gw_fild02,114,355,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T07	4_EP18_HALFFLOWER,7,7
gw_fild02,248,288,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T08	4_EP18_HALFFLOWER,7,7
wolfvill,258,226,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T09	4_EP18_HALFFLOWER,7,7
wolfvill,130,203,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T10	4_EP18_HALFFLOWER,7,7

gw_fild01,48,83,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W01	4_EP18_HALFFLOWER,7,7
wolfvill,88,57,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W02	4_EP18_HALFFLOWER,7,7
wolfvill,65,95,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W03	4_EP18_HALFFLOWER,7,7
wolfvill,78,222,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W04	4_EP18_HALFFLOWER,7,7
wolfvill,193,238,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W05	4_EP18_HALFFLOWER,7,7
wolfvill,208,245,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W06	4_EP18_HALFFLOWER,7,7
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Others daily
gw_fild01,32,101,3	script	Camper#to_wolfvill	4_M_SITDOWN,{
	if (ep18_main < 35) {
		mes "[露营车]";
		mes "我找不到工作，考试也一直不及格，所以我一气之下离家出走了……";
		mes "然后我偶然发现了这样一个地方。";
		mes "我打算在这里停留一段时间。";
		npctalk "本来想尝试露营的~", "", bc_self;
		next;
		mes "[露营车]";
		mes "你不害怕吗？";
		mes "每次我遇到那些问我什么时候能找到工作的老前辈，他们都更可怕。";
		mes "...";
		close;
	}
	if (checkweight(1000405,4) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	if (checkquest(18086,HUNTING) == 2) {
		mes "[看门人]";
		mes "哦，我听你说这里很和平，所以你帮了我的忙。";
		mes "谢谢。";
		mes "来吧，我会把我所拥有的都给你。";
		erasequest 18086;
		setquest 18087;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff 灰太狼的村民已经接受你成为村庄的一部分。^000000";
			mes "您有资格参加^4d4dff会议。^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 9956480,2000000;
		next;
	}
	mes "[看门人]";
	mes "你要去村里吗？";
	next;
	switch( select( "去灰狼村", "别走。", "你是谁？", "让灰狼森林更安全" ) ) {
	case 1:
		mes "[看门人]";
		mes "好吧。你需要穿过那些树之间的缝隙。";
		mes "跟我来。";
		close2;
		warp "wolfvill",270,26;
		end;
	case 2:
		mes "[看门人]";
		mes "那么好吧。去附近猎杀一些怪物怎么样？";
		mes "当我想睡觉时他们太吵了。";
		close;
	case 3:
		mes "[看门人]";
		mes "如你所见，我是看门人。";
		mes "我还会赶走任何不受欢迎的访客。";
		mes "通常，我把自己伪装成流浪汉，但实际上我不是流浪汉。";
		mes "你竟然敢把我当成一类人！";
		close;
	case 4:
		if (ep18_main == 35) {
			mes "[看门人]";
			mes "不，不。我不会在见到你之后就要求帮忙。";
			mes "森林可能有点危险，但没关系。";
			close;
		}
		switch( checkquest(18087,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[看门人]";
			mes "嗯……暂时就好了。";
			mes "这在某种程度上已经是一种威胁了，所以他们只要想一想，就不会攻击。";
			close;
		case 2:
			erasequest 18087;
			break;
		}
		switch( checkquest(18086,HUNTING) ) {
		case -1:
			mes "[看门人]";
			mes "如你所见，我守卫着这里的入口。";
			mes "有时候，即使我很累，怪物也会大老远地来到这里打扰我。";
			next;
			mes "[看门人]";
			mes "你会清除附近森林中的三十种怪物，无论其类型如何吗？";
			mes "我发现了一些美丽的紫水晶碎片。我会把它们给你。";
			next;
			if (select( "接受请求", "拒绝" ) == 2) {
				mes "[看门人]";
				mes "我明白了……你是一个不关心可怜看门人生命安全的人……";
				mes "知道了。我会真诚地把这件事记在心里。";
				close;
			}
			mes "[看门人]";
			mes "谢谢你！";
			mes "现在我可以放松一下了！";
			mes "那我就交给你了。";
			setquest 18086;
			close;
		case 0:
		case 1:
			mes "[看门人]";
			mes "什么都好。只要猎杀附近的一些怪物就可以了。";
			mes "这样我也能更安全地守护吧？";
			close;
		case 2:
			end;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "ep18_main == 35" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep18_main > 35 && checkquest(18086,HUNTING) == -1 && (checkquest(18087,PLAYTIME) == -1 || checkquest(18087,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(18086,HUNTING) == 2" );
	end;
}
//-------------------------------------------------------------------



//--- Others NPCs
//============================================================
oz_dun01,284,164,3	script	Rope#to_ra_fild10	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "看来你可以用绳子爬上去。";
	next;
	if (select( "使用绳索上升。", "不要使用。" ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "ra_fild10",173,176;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) == 2" );
	end;
}

oz_dun01,28,190,3	script	Rope#to_gw_fild01	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "看来你可以用绳子爬上去。";
	next;
	if (select( "使用绳索上升。", "不要使用。" ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "gw_fild01",275,337;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) == 2" );
	end;
}


gw_fild01,279,335,3	script	Rope#to_oz_dun01	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "岩石缝隙下面似乎有一个洞穴，";
	mes "看起来你可以用绳子滑过去。";
	next;
	if (select( "使用绳索下降。", "不要使用。" ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "oz_dun01",27,188;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) > 0" );
	end;
}

ra_fild10,175,179,3	script	Rope#to_oz_dun01_	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "岩石缝隙下面似乎有一个洞穴，";
	mes "看起来你可以用绳子滑过去。";
	next;
	if (select( "使用绳索下降。", "不要使用。" ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "oz_dun01",284,167;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) > 0" );
	end;
}



//-------------------------------------------------------------------
// Other NPCs
//-------------------------------------------------------------------

gw_fild01,396,269,3	script	Old milestone#ep18	2_BOARD2,{
	mes "只能看到悬崖上断桥的痕迹。";
	mes "该路径当前未被使用。";
	close;
}

wolfvill,90,261,6	script	Syeil#E18_D7	4_F_RUSWOMAN1,{
	mes "[赛伊尔]";
	mes "我怀着沮丧的心情来到了这个荒无人烟的地方，竟然还有人在这里。";
	close;
}

wolfvill,269,68,4	script	Seil#E18_D8	4_F_RUSWOMAN2,{
	mes "[航行]";
	mes "噢嗬！欢迎来到灰狼村。";
	close;
}

wolfvill,167,253,1	duplicate(dummy_npc)	Building materials#hms01	4_WOODBOX
wolfvill,166,252,1	duplicate(dummy_npc)	Building materials#hms02	4_WOODBOX
wolfvill,165,254,1	duplicate(dummy_npc)	Building materials#hms03	4_ROPEPILE
wolfvill,165,250,1	duplicate(dummy_npc)	Building materials#hms04	4_WOODPILE
wolfvill,164,251,1	duplicate(dummy_npc)	Building materials#hms05	4_BRICKPILE

wolfvill,154,217,3	script	Sarana#cmm01	4_EP18_GW_WOMAN01,{
	mes "[表示]";
	mes "我们这里通常种植玉米或大豆。";
	mes "你可以把它们种植在任何地方，它们都会茁壮成长，只要确保给它们施肥就好。";
	next;
	mes "[表示]";
	mes "马铃薯一直长得很好，但除此之外......";
	mes "哈...我想吃一些用小麦粉做的东西。";
	close;
}

wolfvill,146,131,1	duplicate(dummy_npc)	Village child#cmm01	4_EP18_GW_CHILD02

wolfvill,192,146,3	script	Oha#cmm01	4_EP18_GW_MIDDLE01,{
	mes "[哦]";
	mes "这个可以做 35 份吗？我总是把它煮沸，但我无法得到正确的量。";
	close;
}

wolfvill,123,162,7	script	Zen#cmm01	4_EP18_GW_OLD02,{
	mes "[禅宗]";
	mes "只要保证安全，别让太初之火吞噬这个村庄和森林……";
	close;
}

wolfvill,38,243,5	duplicate(dummy_npc)	#con_admin	CLEAR_NPC

wolfvill,188,140,7	script	Cassoulet#villager	4_EP18_GW_CHILD01,{
	mes "[砂锅]";
	mes "嗨……好香啊。";
	mes "我会在这里等一切都煮熟。";
	next;
	mes "[砂锅]";
	mes "嗨……好香啊。";
	mes "我会在这里等一切都煮熟。";
	close;
}

wolfvill,202,130,7	script	Hiyares#villager	4_EP18_GW_WOMAN02,{
	mes "[希亚雷斯]";
	mes "这是一个珍贵的发酵容器。请先不要碰它，因为它还在发酵。";
	next;
	mes "[希亚雷斯]";
	mes "这是一种发酵食品，采用自我曾曾祖父时代以来传承下来的发酵剂文化制成。";
	mes "老实说，我不太喜欢它，因为它有很浓的气味。";
	close;
}

wolfvill,224,230,3	script	Director#villager	4_EP18_GW_CHILD02,{
	mes "[导演]";
	mes "不能下水吗？为什么？";
	next;
	mes "[导演]";
	mes "你看起来好温暖好舒服……我想玩水。";
	mes "如果你在玩风，很快你就会满身灰烬。";
	close;
}


gw_fild01,147,137,2	script	Boksil#wms04	EP18_GREY_WOLF_BABY,{
	end;
OnMove:
	while(1) {
		switch( .move ) {
		case 0:
			.val = !.val;
			setarray .@a[0],147,137;
			setarray .@b[0],147,138;
			break;
		case 1:
			setarray .@a[0],148,127;
			setarray .@b[0],147,127;
			break;
		case 2:
			setarray .@a[0],159,115;
			setarray .@b[0],160,115;
			break;
		case 3:
			setarray .@a[0],159,104;
			setarray .@b[0],160,104;
			break;
		case 4:
			setarray .@a[0],159,93;
			setarray .@b[0],160,93;
			break;
		case 5:
			setarray .@a[0],160,82;
			setarray .@b[0],161,82;
			break;
		case 6:
			.val = !.val;
			setarray .@a[0],161,71;
			setarray .@b[0],162,71;
			break;
		}
		.move = .move + .sens[.val];
		unitstopwalk getnpcid(0),USW_FORCE_STOP;
		unitstopwalk getnpcid(0,"Goat#wms03"),USW_FORCE_STOP;
		unitwalk getnpcid(0),.@a[0],.@a[1];
		unitwalk getnpcid(0,"Goat#wms03"),.@b[0],.@b[1];
		sleep 6000;
	}
	end;
OnInit:
	npcspeed 300;
	setarray .sens[0],1,-1;
	.move = 1;
	donpcevent strnpcinfo(0) + "::OnMove";
	end;
}

gw_fild01,147,138,15	script	Goat#wms03	EP18_GREY_GOAT,{
	end;
OnInit:
	npcspeed 300;
	end;
}


//-------------------------------------------------------------------
// Dummy NPCs (need to check the dialog)
//-------------------------------------------------------------------
// rachel,67,134,8	duplicate(dummy_cloaked_npc)	Guest#E18_8	4_M_OLDSCHOLAR
// rachel,114,66,2	duplicate(dummy_npc)	Flower Lady#E18_9	4_F_GODEMOM
// rachel,55,106,6	duplicate(dummy_npc)	Telling#E18_D6	4_F_07	// an old npc already exists at this location

rachel,135,208,6	duplicate(dummy_npc)	Physics#E18_D1	4_F_MASK
rachel,163,196,4	duplicate(dummy_npc)	Molly#E18_D2	4_F_MASK1
rachel,31,89,6	duplicate(dummy_npc)	Tiling#E18_D5	4_F_02


//-------------------------------------------------------------------
// Merchants NPCs
//-------------------------------------------------------------------

// Storage and unlock reputation feature
wolfvill,167,135,3	script	Asad#asad	4_EP18_GW_MAN01,{
	if (checkweight(1201,1) == 0) {
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 减肥后。 -";
		close;
	}
	.@reputation = get_reputation_points(REPUTATION_EP18);
	if (.@reputation < 1000) {
		mes "[阿萨德]";
		mes "先生，好久没见到您了。";
		mes "等你熟悉了这个村子，就来找我吧。";
		mes "我会给你提供一些便利。";
		next;
		mes "[阿萨德]";
		mes "但前提是您^4d4dff要参加锦标赛^000000。";
		mes "我不只是为任何人做事。";
		next;
		mes "[阿萨德]";
		mes "如果你仔细观察，就会发现有些地方需要伸出援手。";
		mes "我想，通过伸出援助之手，你会赢得人们的一些好感。";
		mes "尽力而为。";
		close;
	}

	if (.@reputation >= 3000) {
		mes "[阿萨德]";
		mes "欢迎，我狼一样的" + strcharinfo(0) + ".";
		mes "你需要什么？";
		mes "哦，我一直在寻找更好的熔炼箱。";
		mes "您想用它来兑换紫水晶吗？";
	}
	else {
		mes "[阿萨德]";
		mes "欢迎，先生。";
		mes "你想收拾一些东西吗？";
		mes "或者您想浏览我出售的一些商品吗？";
	}
	next;
	.@amethyst_name$ = getitemname(1000405);
	if (.@reputation >= 4000)
		.@menu$[2] = "Exchange Smelting Box for " + .@amethyst_name$;
	else if (.@reputation >= 3000)
		.@menu$[1] = "Exchange Smelting Box for " + .@amethyst_name$;
	if (.@reputation >= 2000)
		.@menu$[0] = "Request space movement.";
	switch( select( "使用存储。", "使用商店。", .@menu$[0], .@menu$[1], .@menu$[2] ) ) {
	case 1:
		mes "[阿萨德]";
		mes "仓储费为200z。";
		mes "您想打开哪个存储？";
		next;
		select( "存储1" );
		if (Zeny < 200)
			end;
		Zeny -= 200;
		mes "[阿萨德]";
		mes "好的，我去打开存储。";
		mes "好好利用它。";
		close2;
		openstorage();
		end;
	case 2:
		mes "[阿萨德]";
		mes "您要出售物品吗？";
		mes "你要买你需要的东西吗？";
		next;
		switch( select( "购买物品。", "出售物品。" ) ) {
		case 1:
			mes "[阿萨德]";
			mes "我不确定我是否拥有您需要的一切。";
			mes "但无论是什么，你都可以信赖我。";
			close2;
			callshop "Tool Dealer#wolf",1;
			end;
		case 2:
			mes "[阿萨德]";
			mes "好吧。我会以合理的价格卖给你任何东西。";
			close2;
			callshop "Tool Dealer#wolf",2;
			end;
		}
		end;
	case 3:
		mes "[阿萨德]";
		mes "您想传送到瑞秋 1 " + .@amethyst_name$ + " 吗？";
		next;
		if (select( "不", "是的" ) == 1)
			end;
		if (countitem(1000405) < 1) {
			mes "[阿萨德]";
			mes "你没有足够的材料。";
			close;
		}
		delitem 1000405,1;	// Ep18_Amethyst_Fragment
		warp "rachel",115,125;
		end;
	case 4:
		mes "[阿萨德]";
		mes "紫水晶店？";
		mes "你可以用它们交换熔炼箱..";
		close2;
		callshop "barter_ep18_2",1;
		end;
	case 5:
		mes "[阿萨德]";
		mes "紫水晶店？";
		mes "你可以用它们交换熔炼箱..";
		close2;
		callshop "barter_ep18_3",1;
		end;
	}
	end;
}

// (custom tool dealer)
-	shop	Tool Dealer#wolf	-1,611:-1,1750:-1,501:-1,502:-1,503:-1,504:-1,506:-1,645:-1,656:-1,601:-1,602:-1,1065:-1,2239:-1

// Greywolf enchant
wolfvill,164,137,3	script	Emmet#emet	4_EP18_GW_WOMAN01,{
	if (ep18_main < 38) {
		mes "[埃米特]";
		mes "你好呀！";
		mes "我看到你最近在村里收到了一些<ITEM>[紫水晶碎片]<INFO>1000405</INFO></ITEM>，对吧？";
		mes "我注意到人们经常交换它们，认为它们是幸运之类的象征。";
		next;
		mes "[埃米特]";
		mes "我们正在收集水晶。";
		mes "如果你碰巧收集到很多的话，介意稍后给我吗？";
		next;
		mes "[埃米特]";
		mes "当然，我不会就这么白白拿走水晶碎片。";
		mes "我会用它们来交换像你这样的冒险者可能需要的装备或其他物品。";
		next;
		mes "[埃米特]";
		mes "当你收集到大量的时候，请来找我。";
		mes "你明白吧？";
		close;
	}
	disable_items;
	mes "[埃米特]";
	mes "你好。";
	mes "你碰巧有<ITEM>[紫水晶碎片]<INFO>1000405</INFO></ITEM>吗？";
	mes "我们正在收集水晶。";
	next;
	mes "[埃米特]";
	mes "我们提供精心制作的^4d4dff盔甲和结界^000000来换取水晶。";
	mes "你想做什么？";
	next;
	switch( select( "交换护甲", "灰狼结界" ) ) {
	case 1:
		mes "[埃米特]";
		mes "按照约定，你带来了很多紫晶碎片？";
		mes "花点时间四处看看。";
		close2;
		callshop "barter_ep18_1",1;
		end;
	case 2:
		mes "[埃米特]";
		mes "你有足够的装备和材料来附魔吗？";
		mes "我是说，紫水晶碎片。";
		mes "请选择您想要附魔的部分。";
		next;
		switch( select( "防具", "服装", "鞋子", "右(R)饰品", "左(L)饰品" ) ) {
		case 1:
			mes "[埃米特]";
			mes "我明白了，你正在给盔甲施咒。";
			close2;
			item_enchant(1);
			end;
		case 2:
			mes "[埃米特]";
			mes "我明白了，你对这件衣服很着迷。";
			close2;
			item_enchant(2);
			end;
		case 3:
			mes "[埃米特]";
			mes "我明白了，你的鞋子很迷人。";
			close2;
			item_enchant(3);
			end;
		case 4:
			mes "[埃米特]";
			mes "我明白了，你正在使用正确的配饰。";
			close2;
			item_enchant(4);
			end;
		case 5:
			mes "[埃米特]";
			mes "我明白了，你正在对左边的配饰施魔法。";
			close2;
			item_enchant(5);
			end;
		}
		end;
	}
	end;
}

// item exchange
wolfvill,170,131,3	script	Bamdat#bamdat	4_EP18_GW_OLD02,{
	if (ep18_main < 38) {
		mes "[巴姆达特]";
		mes "我过去曾经是一名公认的技术人员。";
		mes "现在工作都很难找了...";
		mes "但如果需要我的技能时，我会随时提供帮助。";
		close;
	}
	disable_items;
	mes "[巴姆达特]";
	mes "听说神社的别墅发生了很奇怪的变化，对吧？";
	mes "那是堕落之神经过的地方……";
	mes "从那里获得的战利品必定也充满了错误的信仰。";
	next;
	mes "[巴姆达特]";
	mes "如果你愿意的话，我可以进行净化仪式，将它们转化为充满真实信仰的武器。";
	mes "我的魔法技能也会派上用场。";
	next;
	mes "[巴姆达特]";
	mes "你可以选择初级净化仪式和高级净化仪式，前者会显着降低精炼力，后者会保留大部分精炼力。";
	next;
	mes "您可以将+9精炼的Adulter Pides武器系列改造为Vibtus Pides系列。";
	mes "根据所选择的净化仪式，所掉落的精炼力也会有所不同。";
	next;
	switch( select( "基础净化仪式", "高级净化仪式", "没关系。" ) ) {
	case 1:
		mes "[巴姆达特]";
		mes "愿诸神的祝福与你同在。";
		close2;
		item_reform("Consecrate_Weapon_1");
		end;
	case 2:
		mes "[巴姆达特]";
		mes "愿诸神的祝福与你同在。";
		close2;
		item_reform("Consecrate_Weapon_2");
		end;
	case 3:
		mes "[巴姆达特]";
		mes "唔？您似乎拥有与其他国家的研究人员相当的技能。";
		close;
	}
	end;
}
