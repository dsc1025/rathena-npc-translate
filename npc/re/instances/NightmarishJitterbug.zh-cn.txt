//===== rAthena Script =======================================
//= Nightmarish Jitterbug
//===== Description: =========================================
//= [Walkthrough Conversion]
//= Nightmarish Jitterbug Instance
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//= 1.0.1 Fix Cutin Aigu. [mazvi]
//============================================================

moc_para01,26,95,5	script	Roel#sara	4_M_ROEL,{
	cutin "roel01",0;
	if (BaseLevel < 120) {
		mes "[罗尔]";
		mes "我们正在寻找可以加入我们进行全新冒险的冒险家。如果你达到了接受 IGU 任务的等级，那么你就有资格。";
		close3;
	}
	switch( isbegin_quest(13183) ) {// Nightmarish Jitterbug: Completed
	case 0:
		switch( isbegin_quest(13181) ) {// Nightmarish Jitterbug
		case 0:
			mes "[罗尔]";
			mes "我是罗尔，白翼公会的新成员。罗特让我到处寻找纽沃兹，我找到了一些关于他下落的线索。";
			next;
			mes "[罗尔]";
			mes "公会招募前景！和我们一起寻找我们的前大师 Newoz！你有兴趣吗？";
			next;
			if (select( "是的。", "不。" ) == 1) {
				cutin "roel02",0;
				mes "[罗尔]";
				mes "多么艰巨的任务啊。我从天涯海角找遍了，连他的皮毛都找不到。";
				next;
				cutin "roel01",0;
				mes "[罗尔]";
				mes "我试图寻找他的踪迹，但没有成功。";
				next;
				mes "[罗尔]";
				mes "纽兹是一位狂热的冒险家，他永远不会在一个地方停留足够长的时间。很多人声称看到了他，但没有人记得他去了哪里。";
				next;
				mes "[罗尔]";
				mes "过了一段时间，我不得不放弃追踪他。我只是在浪费时间。";
				next;
				mes "[罗尔]";
				mes "我把目光转向另一个世界，在那里我遇到了一些目击者。他们带我到了纽沃兹最后一次出现的地方。";
				next;
				mes "[罗尔]";
				mes "整个过程很痛苦。如果没有鲁纳恩，我们就不可能记住他最后的位置，也无法摆脱它。";
				next;
				mes "[罗尔]";
				mes "如果您有兴趣加入我们，请与 Runane 联系。我们面前有一场激动人心的冒险。";
				setquest 13181;// Nightmarish Jitterbug
			}
			close3;
		case 1:
			mes "[罗尔]";
			mes "如果您有兴趣加入我们，请与 Runane 联系。";
			close3;
		case 2:
			cutin "roel03",0;
			mes "[罗尔]";
			mes "这是我作为白翼成员的第一次冒险。我等不及下一篇了！";
			erasequest 13181;
			setquest 13183;// Nightmarish Jitterbug: Completed
			completequest 13183;
			getexp 1500000,500000;
			close3;
		}
		end;
	case 1:
	case 2:
		switch( isbegin_quest(13181) ) {
		case 0:
			mes "[罗尔]";
			mes "你认为夏洛西现在在哪里？我们遇见夏洛希的空间陷入了时间循环，一遍又一遍地重复同样的事件。";
			next;
			mes "[罗尔]";
			mes "明敏认为这种现象与空间裂缝和夏洛西的能力有关。";
			next;
			mes "[罗尔]";
			mes "我不太明白她的意思，但鲁南说通往她记忆的地方的传送门是基于时间而不是空间。";
			next;
			mes "[罗尔]";
			mes "如果你愿意，你可以回到过去并经历同样​​的事件。你想再次踏上冒险之旅吗？";
			next;
			if (select( "是的。", "不。" ) == 1) {
				mes "[罗尔]";
				mes "这次来到这个充满深不可测的谜团的地方，或许你会有不一样的体验。请让 Runane 为您打开门户。";
				next;
				mes "[罗尔]";
				mes "这一次，也许你不必离开夏洛西了。";
				setquest 13181;// Nightmarish Jitterbug
			}
			close3;
		case 1:
			mes "[罗尔]";
			mes "你准备好了吗？如果你没有信心，你可以放弃。";
			next;
			if (select( "不。", "放弃。" ) == 1) {
				mes "[罗尔]";
				mes "这就是精神！";
				close3;
			}
			erasequest 13181;
			close3;
		case 2:
			cutin "roel03",0;
			mes "[罗尔]";
			mes "冒险总是很有趣的。成为一名伟大的冒险家，好吗？";
			erasequest 13181;
			getexp 1500000,500000;
			close3;
		}
	}
}

moc_para01,29,95,5	script	Runane#sara	4_F_RUNAIN,{
	cutin "lunain01",0;
	if (BaseLevel < 120) {
		mes "[符文]";
		mes "^ff0000您必须达到 120 级。^000000";
		close3;
	}
	if (isbegin_quest(13181) != 1) {
		mes "[符文]";
		mes "^ff0000如果你想使用我的维度传送门，那么你首先要和罗尔交谈。该门户并非对所有人开放。^000000";
		close3;
	}
	.@party_id = getcharid(1);
	.@md_name$ = "Nightmarish Jitterbug";
	if (.@party_id < 1) {
		mes "[符文]";
		mes "^ff0000你首先必须组建/加入至少1人的队伍才能进入这个地下城。^000000";
		close3;
	}
	switch( checkquest(13182,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[符文]";
		mes "^ff0000自上次访问后 20 小时内无法访问此维度门户。^000000";
		close3;
	case 2:
		mes "[符文]";
		mes "该门户现已可供使用。";
		erasequest 13182;// Nightmarish Jitterbug: Waiting
		close3;
	}
	if (is_party_leader() == true)
		.@menu$ = "Open the dimensional portal.";
	switch( select( .@menu$, "输入" + .@md_name$ + ".", "取消。" ) ) {
	case 1:
		if (instance_create(.@md_name$) < 0) {
			mes "当事人名称：" + getpartyname( getcharid(1) );
			mes "党组领导：" + strcharinfo(0);
			mes "^0000ff" + .@md_name$ + " ^000000- 预订失败！";
			close3;
		}
		mes "[符文]";
		mes "^ff0000正在准备维度传送门...^000000";
		mes "^ff0000请稍候。^000000";
		close3;
	case 2:
		switch( instance_enter(.@md_name$) ) {
		case IE_NOMEMBER:
			close3;
		case IE_NOINSTANCE:
			if (is_party_leader() == false) {
				mes "[符文]";
				mes "传送...";
				next;
				mes "[符文]";
				mes "^ff0000请注意，自上次访问后 23 小时内无法访问此门户。^000000";
				next;
			}
			mes "[符文]";
			mes "^ff0000你的队伍领袖尚未创建时间裂缝。^000000";
			close3;
		case IE_OTHER:
			mes "发生未知错误。";
			close3;
		case IE_OK:
			setquest 13182;// Nightmarish Jitterbug: Waiting
			mapannounce "moc_para01", "" + strcharinfo(0) + " of the party, " + getpartyname( getcharid(1) ) + ", is entering the " + .@md_name$ + ".", bc_map, 0xFF99;
			specialeffect2 EF_READYPORTAL2;
			specialeffect2 EF_PORTAL2;
			// warp "1@jtb",16,17;
			end;
		}
	case 3:
		cutin "",255;
		end;
	}
}

// Warps
1@jtb,45,47,0	warp	1 Door 1	3,3,1@jtb,100,14
1@jtb,135,17,0	warp	2 Door 1	3,3,1@jtb,184,17
1@jtb,220,23,0	warp	3 Door 1	3,3,1@jtb,270,13
1@jtb,306,47,0	warp	4 Door 1	3,3,1@jtb,11,102

1@jtb,39,133,0	warp	6 Door 1	3,3,1@jtb,96,100
1@jtb,133,106,0	warp	7 Door 1	3,3,1@jtb,183,128
1@jtb,209,133,0	warp	8 Door 1	3,3,1@jtb,277,95
1@jtb,307,122,0	warp	9 Door 1	3,3,1@jtb,359,97
1@jtb,386,133,0	warp	10 Door 1	3,3,1@jtb,13,214
1@jtb,49,196,0	warp	11 Door 1	3,3,1@jtb,95,201
1@jtb,133,197,0	warp	12 Door 1	3,3,1@jtb,181,198
1@jtb,218,203,0	warp	13 Door 1	3,3,1@jtb,269,206
1@jtb,307,195,0	warp	14 Door 1	3,3,1@jtb,355,214
1@jtb,388,182,0	warp	15 Door 1	3,3,1@jtb,13,274
1@jtb,47,302,0	warp	16 Door 1	3,3,1@jtb,99,298
1@jtb,134,275,0	warp	17 Door 1	3,3,1@jtb,200,271
1@jtb,199,305,0	warp	18 Door 1	3,3,1@jtb,13,384
1@jtb,49,365,0	warp	19 Door 1	3,3,1@jtb,107,389
1@jtb,111,352,0	warp	20 Door 1	3,3,1@jtb,184,385
1@jtb,220,359,0	warp	21 Door 1	3,3,1@jtb,287,355
1@jtb,311,358,0	warp	22 Door 1	3,3,1@jtb,335,320
1@jtb,325,325,0	warp	23 Door 1	10,10,1@jtb,360,23

1@jtb,391,30,0	script	24 Door 1	WARPNPC,3,3,{
	end;
OnTouch_:
	if (isbegin_quest(13181) == 1)
		completequest 13181;
	warp "moc_para01",30,88;
	end;
}


// Room 1 : Entrance
1@jtb,28,30,5	script	Newoz#01	4_M_NEWOZ,{
	if ('room != 1 || is_party_leader() == false) {
		cutin "nines02",0;
		mes "[纽沃兹]";
		mes "我们的冒险还没有开始，我已经饿了。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 1 && is_party_leader() == true) {
			if ('additionnal_option) {// officially not disabled when choose hurry
				disablenpc instance_npcname("Roel#01");
				disablenpc instance_npcname("Melody-Jack#01");
				disablenpc instance_npcname("Arang#01");
				disablenpc instance_npcname("Lagi#01");
				disablenpc instance_npcname("Aigu#01");
				disablenpc instance_npcname("Mingmin#01");
				disablenpc instance_npcname("Runane#01");
				disablenpc instance_npcname("Gelka#01");
				disablenpc instance_npcname("Roter#01");
				disablenpc instance_npcname("Newoz#01");
			}
			donpcevent 'jitterbug_main$ + "::OnNextIs2";
		}
		close;
	}
	.@roel$ = instance_npcname("Roel#01");
	.@melody$ = instance_npcname("Melody-Jack#01");
	.@arang$ = instance_npcname("Arang#01");
	.@lagi$ = instance_npcname("Lagi#01");
	.@aigu$ = instance_npcname("Aigu#01");
	.@mingmin$ = instance_npcname("Mingmin#01");
	.@runane$ = instance_npcname("Runane#01");
	.@gelka$ = instance_npcname("Gelka#01");
	.@roter$ = instance_npcname("Roter#01");

	cutin "nines02",0;
	mes "[纽沃兹]";
	mes "看来大家都来了。";
	npctalk "Newoz：看来每个人都在这里。";
	emotion ET_DELIGHT;
	next;
	cutin "rote03",0;
	mes "[旋转]";
	mes "我告诉过你了，纽奥兹。我们不能就这么放过这件事。";
	npctalk "罗特：我告诉过你了，纽沃兹。我们不能就这么放过这件事。", .@roter$;
	emotion ET_FRET, getnpcid(0,.@roter$);
	next;
	if ('room == 1 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs2";
	cutin "min02",0;
	mes "[Mingmin]";
	mes "考虑到我们在你身上浪费的时间和金钱，你值得喂一篮子毒蘑菇。";
	npctalk "明敏：考虑到我们在你身上浪费的时间和金钱，你活该喂一篮子毒蘑菇。", .@mingmin$;
	next;
	cutin "nines04",0;
	emotion ET_DELIGHT;
	mes "[纽沃兹]";
	mes "我会解释一切。毒蘑菇就够了。我根本不能吃蘑菇。";
	npctalk "Newoz：我会解释一切。毒蘑菇就够了。我根本不能吃蘑菇。";
	next;
	cutin "igu05",2;
	mes "[高音]";
	mes "纽兹，除了肉你什么都不能吃。叹气，我很高兴你安全了。";
	npctalk "艾古：纽奥兹，除了肉什么都不能吃。叹气，我很高兴你安全了。", .@aigu$;
	next;
	cutin "gelca03",0;
	mes "[盖尔卡]";
	mes "你就是大名鼎鼎的纽奥兹！很高兴见到你。我的师父告诉了我很多伟大的事情......";
	npctalk "盖尔卡：你就是大名鼎鼎的纽奥兹！很高兴见到你。我的师父告诉了我很多伟大的事情......", .@gelka$;
	next;
	cutin "rote03",0;
	mes "[旋转]";
	mes "足够的。他只是一个没有方向感的白痴。";
	npctalk "罗特：够了。他只是一个没有方向感的白痴。", .@roter$;
	next;
	cutin "arang02",2;
	mes "[木炭]";
	mes "哇，纽兹！你的眼睛看起来比以前更加浮肿。";
	npctalk "阿朗：哇，纽奥兹！你的眼睛看起来比以前更加浮肿。", .@arang$;
	next;
	cutin "nines02",0;
	mes "[纽沃兹]";
	mes "你好，阿朗。阿里郎怎么样了？呵呵。是什么风把你吹到这里来的？";
	npctalk "纽奥兹：你好，阿朗。阿里郎怎么样了？呵呵。是什么风把你吹到这里来的？";
	next;
	cutin "rote03",0;
	mes "[旋转]";
	mes "纽兹，你知道你失踪多久了吗？我们甚至招募了新的公会成员来寻找你，并且......";
	npctalk "Roter：Newoz，你知道你失踪多久了吗？我们甚至招募了新的公会成员来寻找你，并且......", .@roter$;
	next;
	cutin "lunain01",0;
	mes "[符文]";
	mes "你好，很高兴认识你。我很荣幸能亲自见到著名的纽沃兹。";
	npctalk "Runane：嗨，很高兴认识你。我很荣幸能亲自见到著名的纽沃兹。", .@runane$;
	next;
	cutin "roel01",2;
	mes "[罗尔]";
	mes "你-你好，我叫罗尔。鲁南和我一起加入了公会。很高兴见到你。";
	npctalk "罗尔：你-你好，我叫罗尔。鲁南和我一起加入了公会。很高兴见到你。", .@roel$;
	next;
	cutin "rote02",0;
	mes "[旋转]";
	mes "根据公会政策第八条规定，我现在是这个公会的会长，而你只是一个会员。";
	npctalk "Roter：根据公会政策第八条，我现在是这个公会的会长，而你只是一个会员。", .@roter$;
	next;
	cutin "nines02",0;
	mes "[纽沃兹]";
	mes "噢，恭喜师父。";
	npctalk "纽奥兹：哦，恭喜你，主人。";
	next;
	cutin "rote01",0;
	emotion ET_THINK, getnpcid(0,.@roter$);
	mes "[旋转]";
	mes "……这不是我所期望的。你一点都不难过吗？";
	npctalk "Roter：……这不是我所期望的。你一点都不难过吗？", .@roter$;
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "你期待什么？他满脑子想的都是冒险、怪物和宝藏。";
	npctalk "Melody-Jack：你期待什么？他满脑子想的都是冒险、怪物和宝藏。", .@melody$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "哎哟，有鬼吗？还是我听到了什么？";
	npctalk "Newoz：啊，有鬼吗？还是我听到了什么？";
	next;
	emotion ET_THINK, getnpcid(0,.@melody$);
	cutin "",255;
	mes "[旋律杰克]";
	mes "...";
	npctalk "旋律-杰克：...", .@melody$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "哇，是你，杰克。大家好久不见。";
	npctalk "纽奥兹：哇，是你，杰克。大家好久不见。";
	next;
	emotion ET_THINK, getnpcid(0,.@melody$);
	cutin "",255;
	mes "[旋律杰克]";
	mes "现在可不是闲聊的好时机。我从你站着的地板和我躲藏的地方感觉到了某种东西。";
	npctalk "Melody-Jack：现在不是闲聊的好时机。我从你站着的地板和我躲藏的地方感觉到了某种东西。", .@melody$;
	next;
	cutin "arang03",2;
	mes "[木炭]";
	mes "杰克，这就是你像个胆小鬼一样躲起来的原因吗？";
	npctalk "阿朗：杰克，这就是你像个胆小鬼一样躲起来的原因吗？", .@arang$;
	next;
	emotion ET_THINK, getnpcid(0,.@melody$);
	cutin "",255;
	mes "[旋律杰克]";
	mes "对于像我这样的老贼来说，隐藏在潜在的敌方领土中是很自然的事情。";
	npctalk "Melody-Jack：对于像我这样的经验丰富的盗贼来说，隐藏在潜在的敌人领土中是很自然的。", .@melody$;
	next;
	mes "[旋律杰克]";
	mes "我没有隐藏，因为我的精灵还没有准备好！";
	npctalk "Melody-Jack：我不会躲藏，因为我的精灵还没有准备好！", .@melody$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "我同意杰克的观点。这个地方的一切——从空气到土壤——都显得不自然。";
	npctalk "明敏：我同意杰克的观点。这个地方的一切——从空气到土壤——都显得不自然。", .@mingmin$;
	next;
	cutin "ragi01",2;
	mes "[更多]";
	mes "难道是超自然现象吗？";
	npctalk "Lagi：这可能是超自然现象吗？", .@lagi$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "或者超凡脱俗。";
	npctalk "纽兹：或者说是超凡脱俗的。";
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "...";
	npctalk "Mingmin: ...", .@mingmin$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "你是拉吉，对吧？我喜欢你的想法。我很乐意和你一起工作。";
	npctalk "Newoz：你是Lagi，对吧？我喜欢你的想法。我很乐意和你一起工作。";
	next;
	cutin "lunain02",0;
	mes "[符文]";
	mes "我加入这个公会就是为了见到你，Newoz。你有女朋友吗？";
	npctalk "Runane：我加入这个公会就是为了见到你，Newoz。你有女朋友吗？", .@runane$;
	next;
	cutin "igu05",2;
	mes "[高音]";
	mes "你敢不敢——我先对他打电话了！";
	npctalk "哀谷：你敢吗——我先叫他了！", .@aigu$;
	next;
	cutin "lunain03",0;
	mes "[符文]";
	mes "我认为他不知道这一点。你是吗，纽兹？";
	npctalk "Runane：我认为他不知道这一点。你是吗，纽兹？", .@runane$;
	next;
	cutin "igu04",2;
	mes "[高音]";
	mes "嗯，我没有...";
	npctalk "艾古：呃，我没有……", .@aigu$;
	next;
	cutin "lunain01",0;
	mes "[符文]";
	mes "*哼哼*那么他就是公平的游戏！";
	npctalk "Runane：*哼哼*那么他就是公平的游戏！", .@runane$;
	next;
	cutin "gelca02",0;
	mes "[盖尔卡]";
	mes "嗯，对话好像已经结束了……";
	npctalk "Gelka：嗯，谈话似乎已经结束了……", .@gelka$;
	next;
	cutin "ragi03",2;
	mes "[更多]";
	mes "她改变主题的速度比阿克鲁斯施放增加 AGI 的速度还要快。";
	npctalk "Lagi：她改变主题的速度比Arclouse施放增加AGI的速度还要快。", .@lagi$;
	next;
	cutin "arang02",0;
	mes "[木炭]";
	mes "他们在与 Newoz 竞争吗？我也想进去！";
	npctalk "Arang：他们在与 Newoz 竞争吗？我也想进去！", .@arang$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "...很抱歉打扰你们，但我认为那边出了点问题。";
	npctalk "Mingmin：……很抱歉打扰你们，但我觉得那边出了点问题。", .@mingmin$;
	next;
	cutin "roel01",2;
	mes "[罗尔]";
	mes "也许是怪物。要我去检查一下吗？";
	npctalk "罗尔：也许是怪物。要我去检查一下吗？", .@roel$;
	next;
	cutin "lunain04",0;
	mes "[符文]";
	mes "你呆在这里，孩子。我去吧。";
	npctalk "Runane：你呆在这里，孩子。我去吧。", .@runane$;
	next;
	cutin "igu05",2;
	mes "[高音]";
	mes "等等，我们还没完呢！";
	npctalk "哀谷：等等，我们还没完呢！", .@aigu$;
	next;
	cutin "ragi01",0;
	mes "[更多]";
	mes "哦，两个人都走了。";
	npctalk "Lagi：哦，他们俩都走了。", .@lagi$;
	next;
	disablenpc .@aigu$;
	disablenpc .@runane$;
	cutin "rote01",0;
	mes "[旋转]";
	mes "纽兹，你就像一块疯狂的磁石。";
	npctalk "Roter：Newoz，你就像一块让人疯狂的磁石。", .@roter$;
	next;
	cutin "gelca02",0;
	mes "[盖尔卡]";
	mes "我明白是什么让您变得如此烦躁，Master。";
	npctalk "格尔卡：我明白是什么让你变得如此烦躁，主人。", .@gelka$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "他生来就脾气暴躁。";
	npctalk "明敏：他生来就脾气暴躁。", .@mingmin$;
	next;
	cutin "arang01",0;
	mes "[木炭]";
	mes "同意。他很暴力，很肮脏……";
	npctalk "阿朗：同意。他很暴力，很肮脏……", .@arang$;
	next;
	cutin "rote01",0;
	mes "[旋转]";
	mes "噢，闭嘴，你们两个！";
	npctalk "Roter：哦，闭嘴，你们两个！", .@roter$;
	next;
	cutin "nines03",0;
	mes "[纽沃兹]";
	mes "这让我想起了罗特年轻的时候……";
	npctalk "Newoz：这让我想起了 Rot 还小的时候……";
	next;
	cutin "gelca04",0;
	mes "[盖尔卡]";
	mes "腐烂？这是您的爱称吗，主人？你们两个是朋友吗？";
	npctalk "盖尔卡：腐烂？这是您的爱称吗，主人？你们两个是朋友吗？", .@gelka$;
	next;
	cutin "rote01",0;
	mes "[旋转]";
	mes "就这样了！我要走了！";
	npctalk "罗特：就这样！我要走了！", .@roter$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "那个裂缝的东西，或者你可能称之为入口的东西，已经消失了。如果你真想走，那就跟着艾古走吧。";
	npctalk "明敏：那个裂缝的东西，或者你可能称之为入口的东西，已经消失了。如果你真想走，那就跟着艾古走吧。", .@mingmin$;
	next;
	cutin "rote01",0;
	mes "[旋转]";
	mes "别再假装关心我了！我能照顾好自己！";
	npctalk "Roter：别再假装你关心我了！我能照顾好自己！", .@roter$;
	next;
	cutin "gelca04",0;
	mes "[盖尔卡]";
	mes "师父，跟我来吧！";
	npctalk "盖尔卡：主人，跟我来吧！", .@gelka$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "哦，我们有新成员了，是吗？太好了，我有一些我想尝尝的蘑菇......";
	npctalk "明敏：噢，我们有新成员了，是吗？太好了，我有一些我想尝尝的蘑菇......", .@mingmin$;
	next;
	disablenpc .@roter$;
	disablenpc .@gelka$;
	cutin "ragi02",2;
	mes "[更多]";
	mes "罗尔，我想我们也该搬家了。";
	npctalk "Lagi：罗尔，我想我们也应该搬走。", .@lagi$;
	next;
	cutin "roel01",2;
	mes "[罗尔]";
	mes "我们走吧。";
	npctalk "罗尔：我们走吧。", .@roel$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "阿朗，我们走吧。是时候来一场冒险了！";
	npctalk "纽兹：阿朗，我们走吧。是时候来一场冒险了！";
	next;
	disablenpc .@lagi$;
	disablenpc .@roel$;
	cutin "arang02",0;
	mes "[木炭]";
	mes "好吧！";
	npctalk "阿朗：好吧！", .@arang$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "我希望有很多东西可以学习。";
	npctalk "明敏：我希望有很多东西可以学习。", .@mingmin$;
	next;
	cutin "",255;
	disablenpc instance_npcname("Newoz#01");
	mes "[" + strcharinfo(0) + "]";
	mes "...";
	next;
	disablenpc .@arang$;
	disablenpc .@mingmin$;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "...";
	npctalk "旋律-杰克：...", .@melody$;
	next;
	mes "[" + strcharinfo(0) + "]";
	mes "...";
	next;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "...";
	npctalk "旋律-杰克：...", .@melody$;
	next;
	mes "[旋律杰克]";
	mes "在他们忘记我们之前我们就行动吧。";
	npctalk "Melody-Jack：在他们忘记我们之前我们就行动吧。", .@melody$;
	close3;
}

1@jtb,34,22,4	script	Roel#01	4_M_ROEL,{
	cutin "roel01",0;
	mes "[罗尔]";
	mes "我是罗尔，新公会成员。很高兴见到你。";
	close3;
}

1@jtb,28,21,5	script	Melody-Jack#01	CLEAR_NPC,{
	mes "[旋律杰克]";
	mes "别再打扰我了。你没看到我躲起来了吗？！";
	close;
}

1@jtb,31,24,4	script	Arang#01	4_F_TAEKWON,{
	cutin "arang01",2;
	mes "[木炭]";
	mes "嘿嘿！";
	close3;
}

1@jtb,33,26,4	script	Lagi#01	4_M_RAGI,{
	cutin "ragi01",2;
	mes "[更多]";
	mes "我一路跟着艾古来到这里。";
	close3;
}

1@jtb,31,28,4	script	Aigu#01	4_F_IU,{
	cutin "igu04",2;
	mes "[高音]";
	mes "你在这里看起来很新。很高兴认识你！";
	close3;
}

1@jtb,25,24,5	script	Mingmin#01	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "他是个坏消息。无论他走到哪里，麻烦都跟着他。";
	close3;
}

1@jtb,23,22,5	script	Runane#01	4_F_RUNAIN,{
	mes "[符文]";
	mes "哦，他就是大名鼎鼎的Newoz吗？";
	close;
}

1@jtb,23,26,5	script	Gelka#01	4_F_GELKA,{
	cutin "gelca01",0;
	mes "[盖尔卡]";
	mes "这个地方让我感到惊慌。";
	close3;
}

1@jtb,25,28,5	script	Roter#01	4_M_ROTERT,{
	cutin "rote01",0;
	mes "[旋转]";
	mes "...我们终于见面了，Newoz！";
	close3;
}


// Room 2
1@jtb,123,45,4	script	Runane#02	4_F_RUNAIN,{
	if ('room != 2 || is_party_leader() == false) {
		cutin "lunain01",2;
		mes "[符文]";
		mes "拜托，不要再有什么意外了。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 2 && is_party_leader() == true) {
			if ('additionnal_option) {
				disablenpc instance_npcname("Runane#02");
				disablenpc instance_npcname("Aigu#02");
			}
			donpcevent 'jitterbug_main$ + "::OnNextIs3";
		}
		end;
	}
	.@shaloshi$ = instance_npcname("???#02");
	.@aigu$ = instance_npcname("Aigu#02");

	cutin "lunain01",2;
	mes "[符文]";
	mes "嗯，我有预感，可能会有什么东西突然冒出来攻击我们。";
	npctalk "Runane：嗯，我有一种预感，可能会有什么东西突然冒出来攻击我们。";
	next;
	if ('room == 2 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs3";
	cutin "shaloshi01",0;
	mes "[???]";
	mes "它是什么？";
	npctalk "？？？：那是什么？", .@shaloshi$;
	next;
	enablenpc .@shaloshi$;
	cutin "lunain04",2;
	mes "[符文]";
	mes "*尖叫*";
	npctalk "鲁纳内：*尖叫*";
	emotion ET_HUK;
	next;
	cutin "igu03",0;
	mes "[高音]";
	mes "怪物-！ ……呃，只是个女人而已。";
	npctalk "哀谷：怪物——！ ……呃，只是个女人而已。", .@aigu$;
	emotion ET_HUK, getnpcid(0,.@aigu$);
	next;
	cutin "lunain04",0;
	mes "[符文]";
	mes "有东西！某物！";
	npctalk "鲁南：有东西！某物！";
	next;
	cutin "igu01",0;
	mes "[高音]";
	mes "冷静下来。这只是一个女人。";
	npctalk "艾古：冷静点。这只是一个女人。", .@aigu$;
	next;
	cutin "shaloshi01",0;
	mes "[???]";
	mes "一个女人的声音...";
	npctalk "？？？：一个男人的声音……", .@shaloshi$;
	emotion ET_QUESTION, getnpcid(0,.@shaloshi$);
	next;
	cutin "igu01",0;
	mes "[高音]";
	mes "你问我们是怎么进来的？";
	npctalk "哀谷：你问我们是怎么进来的？", .@aigu$;
	next;
	cutin "shaloshi01",0;
	mes "[???]";
	mes "不知道。你是怎么进来的？";
	npctalk "？？？：不知道。你是怎么进来的？", .@shaloshi$;
	next;
	cutin "lunain03",2;
	mes "[符文]";
	mes "我们迷路了，现在我们正处于时空裂缝中。这是怎么发生的？";
	npctalk "Runane：我们迷路了，现在我们正处于时空裂缝中。这是怎么发生的？";
	next;
	cutin "igu04",0;
	mes "[高音]";
	mes "如果不是为了某人，我们就不必来这里。";
	npctalk "哀谷：如果不是为了某人，我们就不必来这里。", .@aigu$;
	emotion ET_PROFUSELY_SWAT, getnpcid(0,.@aigu$);
	next;
	cutin "shaloshi01",0;
	mes "[???]";
	mes "那个唱歌的人。";
	npctalk "？？？：唱歌的人。", .@shaloshi$;
	next;
	cutin "lunain01",2;
	mes "[符文]";
	mes "你认识纽奥兹吗？我们带他离开这里吧。";
	npctalk "Runane：你知道Newoz吗？我们带他离开这里吧。";
	next;
	cutin "igu03",0;
	mes "[高音]";
	mes "好的。握住我的手。";
	npctalk "艾古：好的。握住我的手。", .@aigu$;
	next;
	cutin "shaloshi01",0;
	mes "[???]";
	mes "你的手……温暖。";
	npctalk "？？？：你的手……温暖。", .@shaloshi$;
	next;
	cutin "igu02",0;
	mes "[高音]";
	mes "因为我跳舞所以长满了老茧。呵呵。";
	npctalk "哀谷：因为跳舞所以长了老茧。呵呵。", .@aigu$;
	next;
	cutin "shaloshi01",0;
	mes "[???]";
	mes "舞蹈...";
	npctalk "？？？： 舞蹈...", .@shaloshi$;
	next;
	cutin "lunain01",2;
	mes "[符文]";
	mes "大家都在哪里？他们去别的地方了吗？让我们朝那个方向走吧。";
	npctalk "Runane：大家都在哪儿？他们去别的地方了吗？让我们朝那个方向走吧。";
	close2;
	cutin "",255;
	disablenpc instance_npcname("Runane#02");
	disablenpc .@aigu$;
	disablenpc .@shaloshi$;
	end;
}

1@jtb,121,47,4	script	???#02	4_F_SHALOSH,{ end; }

1@jtb,118,45,5	script	Aigu#02	4_F_IU,{
	cutin "igu03",0;
	mes "[高音]";
	mes "一个充满神秘色彩的地方。";
	close3;
}


// Room 3
1@jtb,198,31,5	script	Roter#03	4_M_ROTERT,{
	if ('room != 3 || is_party_leader() == false) {
		cutin "rote01",0;
		mes "[旋转]";
		mes "这些怪物很无聊。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@gelka$ = instance_npcname("Gelka#03");
		cutin "gelca01",2;
		mes "[盖尔卡]";
		mes "我正在探测前方的电磁波。至少是E级怪物。";
		npctalk "格尔卡：我正在探测前方的电磁波。至少是E级怪物。", .@gelka$;
		next;
		emotion ET_SWEAT;
		cutin "rote01",0;
		mes "[旋转]";
		mes "嘿，这些天你读了什么书？";
		npctalk "Roter：嘿，这些天你读了什么书？";
		next;
		cutin "gelca03",2;
		mes "[盖尔卡]";
		mes "呵呵，科幻。有一种机械工具可以工作...";
		npctalk "格尔卡：呵呵，科幻小说。有一种机械工具可以工作...", .@gelka$;
		next;
		emotion ET_OHNO;
		cutin "rote01",0;
		mes "[旋转]";
		mes "停止说话并准备好练习您的特殊技能。";
		npctalk "Roter：别说话了，准备好练习你的特殊技能吧。";
		next;
		cutin "gelca03",2;
		mes "[盖尔卡]";
		mes "哦，这就像重演书中的场景一样，怪物横行。";
		npctalk "盖尔卡：哦，这就像重演书中的场景一样，怪物横行。", .@gelka$;
		next;
		cutin "rote01",0;
		mes "[旋转]";
		mes "格尔卡，超必杀技第8号：狂野之舞！";
		npctalk "罗特：格尔卡，超必杀技第8号：狂野之舞！";
		next;
		emotion ET_SURPRISE, getnpcid(0,.@gelka$);
		cutin "gelca01",2;
		mes "[盖尔卡]";
		mes "!!";
		npctalk "杰拉：！！", .@gelka$;
		next;
		mes "[盖尔卡]";
		mes "开始了！";
		npctalk "盖尔卡：我们走吧！", .@gelka$;
		next;
		cutin "rote01",0;
		mes "[旋转]";
		mes "精致的手电筒，Lumiere Dupleix！";
		npctalk "打嗝：精致的手电筒，Lumiere Dupleix！";
		specialeffect EF_LEXAETERNA;
		specialeffect EF_POTION_BERSERK;
		specialeffect EF_SIGNUM;
		next;
		cutin "gelca01",2;
		mes "[盖尔卡]";
		mes "毁灭十二天网！";
		npctalk "格尔卡：毁灭十二天网！";
		specialeffect EF_HITLINE,AREA, .@gelka$;
		specialeffect EF_BASH3D2,AREA, .@gelka$;
		specialeffect EF_GUMGANG,AREA, .@gelka$;
		next;
		emotion ET_SPARK;
		emotion ET_SPARK, getnpcid(0,.@gelka$);
		mes "[格尔卡/旋转]";
		mes "叉！！！";
		npctalk "罗特：交叉！！！";
		npctalk "盖尔卡：交叉！！！", .@gelka$;
		specialeffect EF_GRANDCROSS;
		specialeffect EF_GRANDCROSS,AREA, .@gelka$;
		next;
		cutin "rote01",0;
		mes "[格尔卡/旋转]";
		mes "分散——千手电筒！";
		npctalk "格尔卡：分散——数千个手电筒！", .@gelka$;
		npctalk "Roter：分散——数千个手电筒！";
		specialeffect EF_LEXAETERNA;
		specialeffect EF_LEXAETERNA,AREA, .@gelka$;
		sleep2 300;
		specialeffect EF_LORD;
		specialeffect EF_LORD,AREA, .@gelka$;
		specialeffect EF_LORD;
		specialeffect EF_LORD,AREA, .@gelka$;
		sleep2 300;
		specialeffect EF_SUI_EXPLOSION;
		specialeffect EF_SUI_EXPLOSION,AREA, .@gelka$;
		specialeffect EF_BEGINASURA;
		specialeffect EF_BEGINASURA,AREA, .@gelka$;
		next;
		cutin "gelca01",2;
		mes "[盖尔卡]";
		mes "...呼。";
		npctalk "盖尔卡：……呼。", .@gelka$;
		next;
		cutin "rote01",0;
		mes "[旋转]";
		mes "嗯，还不够好，盖尔卡。不要让公会事务分散你练习的注意力。";
		npctalk "Roter：嗯，不够好，Gelka。不要让公会事务分散你练习的注意力。";
		next;
		cutin "gelca03",2;
		mes "[盖尔卡]";
		mes "是的，师父！";
		npctalk "格尔卡：是的，主人！", .@gelka$;
		next;
		cutin "rote01",0;
		mes "[旋转]";
		mes "其他人在哪里？这绝对不是一个普通的洞穴。";
		npctalk "罗特：其他人在哪里？这绝对不是一个普通的洞穴。";
	}
	if ('room == 3 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs4";
	close3;
}

1@jtb,205,31,4	script	Gelka#03	4_F_GELKA,{
	cutin "gelca04",2;
	mes "[盖尔卡]";
	mes "有什么东西可能会跳到我们身上！";
	close3;
}


// Room 4
1@jtb,292,22,4	script	???#04	4_F_SHALOSH,{
	if ('room != 4 || is_party_leader() == false) {
		cutin "shaloshi01",2;
		mes "[???]";
		mes "...";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		cutin "shaloshi01",2;
		mes "[???]";
		mes "...";
		npctalk "？？？：……";
		next;
		select("你是不是又自己迷路了？");
		mes "[???]";
		mes "我并不孤单。";
		npctalk "？？？：我并不孤单。";
		next;
		mes "[???]";
		mes "艾古和鲁南都不错。";
		npctalk "？？？：艾古和鲁南都很好。";
		next;
		mes "[???]";
		mes "问很多问题。";
		npctalk "？？？：问很多问题。";
		next;
		mes "[???]";
		mes "无法回答。";
		npctalk "？？？：无法回答。";
		next;
		mes "[???]";
		mes "什么都不记得了。";
		npctalk "？？？：什么都不记得了。";
		next;
		mes "[???]";
		mes "但我并不孤单。";
		npctalk "？？？：但我并不孤单。";
		next;
		if (select( "离开他吧。", "太危险了，带上他吧。" ) == 1) {
			mes "[???]";
			mes "我没事。这不是第一次了。";
			npctalk "？？？：我没事。这不是第一次了。";
		}
		else {
			mes "[???]";
			mes "种类。";
			npctalk "？？？： 种类。";
		}
		cutin "shaloshi03",2;
		next;
		mes "[???]";
		mes "...";
		npctalk "？？？：……";
	}
	if ('room == 4 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs6";
	close3;
}

// Room 5 (final room)

// Room 6
1@jtb,20,108,5	script	Newoz#06	4_M_NEWOZ,{
	if ('room != 6 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "稍后我会再唱歌。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@aigu$ = instance_npcname("Aigu#06");
		.@arang$ = instance_npcname("Arang#06");
		.@shaloshi$ = instance_npcname("Shaloshi#06");

		cutin "igu05",2;
		mes "[高音]";
		mes "纽奥兹！这次你去哪儿了？";
		npctalk "艾古：纽奥兹！这次你去哪儿了？", .@aigu$;
		next;
		cutin "nines04",0;
		mes "[纽沃兹]";
		mes "对不起。";
		mes "这个地方就像一个迷宫。这里有太多的分支和空地，我已经数不清了。";
		npctalk "纽兹：抱歉。这个地方就像一个迷宫。这里有太多的分支和空地，我已经数不清了。";
		next;
		cutin "arang01",2;
		mes "[木炭]";
		mes "*哼哼*你对普隆德拉​​涵洞也说了同样的话。";
		npctalk "阿朗：*哼哼*你对普隆德拉​​涵洞也说了同样的话。", .@arang$;
		next;
		cutin "igu04",2;
		mes "[高音]";
		mes "你在说什么？为什么你不能跟着我们？鲁南在哪里？刚才我看到她就在我旁边。";
		npctalk "艾古：你在说什么？为什么你不能跟着我们？鲁南在哪里？刚才我看到她就在我旁边。", .@aigu$;
		next;
		cutin "shaloshi01",2;
		mes "[???]";
		mes "有着歌声的男人。";
		npctalk "？？？：有歌声的男人。", .@shaloshi$;
		next;
		cutin "nines02",0;
		mes "[纽沃兹]";
		mes "哦，你好。请问小姐姐你是谁？";
		npctalk "纽奥兹：哦，你好。请问小姐姐你是谁？";
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "我是夏洛西。为我唱歌。";
		npctalk "夏洛西：我是夏洛西。为我唱歌。", .@shaloshi$;
		next;
		cutin "nines03",0;
		mes "[纽沃兹]";
		mes "哈哈哈，你真可爱。稍后我会唱歌给你听。";
		npctalk "纽兹：哈哈哈，你真可爱。稍后我会唱歌给你听。";
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "你答应了。你很善良。";
		npctalk "夏洛西：你答应过的。你很善良。", .@shaloshi$;
		next;
		cutin "igu03",2;
		mes "[高音]";
		mes "怪物开始出现，而且数量正在迅速增加。";
		npctalk "哀谷：怪物开始出现，而且数量正在迅速增加。", .@aigu$;
		next;
		cutin "arang02",2;
		mes "[木炭]";
		mes "你不会有事的，哀谷，只要你跟我们在一起……嗯，大家都在哪儿？";
		npctalk "阿朗：你会没事的，艾古，只要你坚持和我们在一起……嗯，大家都在哪里？", .@arang$;
		next;
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "哈哈哈，小仙女们不用担心。我会保护你。";
		npctalk "Newoz：哈哈哈，别担心，小女士们。我会保护你。";
		next;
		cutin "arang03",2;
		mes "[木炭]";
		mes "纽兹，我爱你！";
		npctalk "阿朗：纽兹，我爱你！", .@arang$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "你保护我。你很善良。";
		npctalk "夏洛西：你保护我。你很善良。", .@shaloshi$;
		next;
		cutin "igu05",2;
		mes "[高音]";
		mes "你会比这里的其他人先跑。好吧，我们不能留在这里。让我们继续吧。";
		npctalk "哀谷：你会比这里的其他人都跑得早。好吧，我们不能留在这里。让我们继续吧。", .@aigu$;
	}
	if ('room == 6 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs7";
	close3;
}

1@jtb,25,110,4	script	Aigu#06	4_F_IU,{
	cutin "igu01",0;
	mes "[高音]";
	mes "怪物开始出现，而且数量正在迅速增加。";
	close3;
}

1@jtb,27,108,4	script	Shaloshi#06	4_F_SHALOSH,{
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "...";
	close3;
}

1@jtb,25,104,4	script	Arang#06	4_F_TAEKWON,{
	cutin "arang03",0;
	mes "[木炭]";
	mes "我不害怕！";
	close3;
}


// Room 7
1@jtb,111,115,5	script	Roel#07	4_M_ROEL,{
	if ('room != 7 || is_party_leader() == false) {
		cutin "roel01",0;
		mes "[罗尔]";
		mes "我怎么了？我的心不会停止跳动。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@aigu$ = instance_npcname("Aigu#07");
		.@runane$ = instance_npcname("Runane#07");

		cutin "lunain01",2;
		mes "[符文]";
		mes "雾散了。";
		npctalk "Runane：雾散了。", .@runane$;
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "但它持续的时间足够长，足以让我们失去彼此。";
		npctalk "罗尔：但它持续的时间足够长，让我们失去了彼此。";
		next;
		cutin "igu05",2;
		mes "[高音]";
		mes "前一刻，我还握着夏洛希的手，下一秒，她就消失了。";
		npctalk "哀谷：前一刻，我还握着夏洛西的手，下一秒，她就消失了。", .@aigu$;
		next;
		cutin "lunain01",2;
		mes "[符文]";
		mes "她的名字叫夏洛西？我问了她好几次，她都不告诉我。";
		npctalk "Runane：她的名字叫Shaloshi？我问了她好几次，她都不告诉我。", .@runane$;
		next;
		cutin "igu01",2;
		mes "[高音]";
		mes "这很奇怪。她从一开始就直接告诉了纽奥兹。";
		npctalk "艾古：这很奇怪。她从一开始就直接告诉了纽奥兹。", .@aigu$;
		next;
		cutin "lunain04",2;
		mes "[符文]";
		mes "哼，我讨厌女孩子。我有预感我们会看到更多的怪物。";
		npctalk "Runane：哼，我讨厌女孩。我有预感我们会看到更多的怪物。", .@runane$;
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "别担心——我会保护你的！";
		npctalk "罗尔：别担心——我会保护你的！";
		next;
		cutin "igu04",2;
		mes "[高音]";
		mes "你最好比我认识的人更可靠。";
		npctalk "哀谷：你最好比我认识的人更可靠。", .@aigu$;
		next;
		cutin "lunain03",2;
		mes "[符文]";
		mes "别对这小子抱有太大的信心。我最好去找纽沃兹。";
		npctalk "Runane：别对这孩子抱有太大的信心。我最好去找纽沃兹。", .@runane$;
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "...";
		npctalk "罗尔：……";
		next;
		cutin "roel03",0;
		mes "[罗尔]";
		mes "（她就是我喜欢的类型！）";
		npctalk "罗尔：（她就是我喜欢的类型！）";
	}
	if ('room == 7 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs8";
	close3;
}

1@jtb,116,117,4	script	Runane#07	4_F_RUNAIN,{
	cutin "lunain01",2;
	mes "[符文]";
	mes "你觉得这次 Newoz 会在哪里？";
	close3;
}

1@jtb,115,113,4	script	Aigu#07	4_F_IU,{
	cutin "igu01",0;
	mes "[高音]";
	mes "我感觉很棒——自从我负责照顾其他冒险家以来，这是我很长一段时间以来的第一次冒险。另外，我还见到了我的英雄 Newoz！";
	close3;
}


// Room 8
1@jtb,206,107,5	script	Mingmin#08	4_F_GENETIC,{
	if ('room != 8 || is_party_leader() == false) {
		mes "[Mingmin]";
		mes "关于她的一切都令人怀疑。";
		close;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 8 && is_party_leader() == true) {
			if ('additionnal_option) {
				disablenpc instance_npcname("Newoz#08");
				disablenpc instance_npcname("Shaloshi#08");
				disablenpc instance_npcname("Mingmin#08");
			}
			donpcevent 'jitterbug_main$ + "::OnNextIs9";
		}
		end;
	}
	.@shaloshi$ = instance_npcname("Shaloshi#08");
	.@newoz$ = instance_npcname("Newoz#08");

	cutin "min02",2;
	mes "[Mingmin]";
	mes "纽奥兹！";
	npctalk "明敏：纽奥兹！";
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "是啊，怎么了？";
	npctalk "纽奥兹：是啊，怎么了？", .@newoz$;
	next;
	if ('room == 8 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs9";
	cutin "min03",2;
	emotion ET_HUK;
	mes "[Mingmin]";
	mes "你真的需要问吗？那个女孩是谁？她是你的吗？";
	npctalk "明敏：你真的要问吗？那个女孩是谁？她是你的吗？";
	next;
	cutin "nines04",0;
	emotion ET_HUK, getnpcid(0,.@newoz$);
	mes "[纽沃兹]";
	mes "什、什...？！别开玩笑了。我现在才找到她。";
	npctalk "纽奥兹：什、什幺……？！别开玩笑了。我现在才找到她。", .@newoz$;
	next;
	cutin "min02",2;
	mes "[Mingmin]";
	mes "一个小女孩孤身一人来到这个陌生的地方？嗯，你不觉得很奇怪吗？";
	npctalk "明敏：一个小女孩独自一人来到这个陌生的地方？嗯，你不觉得很奇怪吗？";
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "你很奇怪。";
	npctalk "夏洛西：你很奇怪。", .@shaloshi$;
	next;
	emotion ET_STARE;
	cutin "min01",2;
	mes "[Mingmin]";
	mes "不，我不是！你不想让我对你生气，女孩。";
	npctalk "明敏：不，我不是！你不想让我对你生气，女孩。";
	emotion ET_FRET;
	next;
	emotion ET_THINK, getnpcid(0,.@shaloshi$);
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "他们来了...";
	npctalk "夏洛西：他们来了……", .@shaloshi$;
	next;
	cutin "nines04",0;
	mes "[纽沃兹]";
	mes "这些怪物不会停止过来。但那些大的、稀有的、美丽的东西在哪里呢？";
	npctalk "Newoz：这些怪物不会停止出现。但那些大的、稀有的、美丽的东西在哪里呢？", .@newoz$;
	next;
	cutin "min02",2;
	mes "[Mingmin]";
	mes "以后我得好好研究一下你，姑娘。";
	npctalk "明敏：我以后得好好研究一下你，姑娘。";
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "...";
	npctalk "夏洛西：……", .@shaloshi$;
	close2;
	cutin "",255;
	disablenpc .@newoz$;
	disablenpc .@shaloshi$;
	disablenpc instance_npcname("Mingmin#08");
	end;
}

1@jtb,206,114,5	script	Shaloshi#08	4_F_SHALOSH,{
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "纽兹的手……很热。";
	close3;
}

1@jtb,203,112,5	script	Newoz#08	4_M_NEWOZ,{
	cutin "nines03",0;
	mes "[纽沃兹]";
	mes "我想知道在这段经文的结尾等待我们的是什么。期待快要杀了我！";
	close3;
}


// Room 9 (menu affects the boss encounter in the next room)
1@jtb,285,114,5	script	Newoz#09	4_M_NEWOZ,{
	if ('room != 9 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "我一直很喜欢唱歌。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 9 && is_party_leader() == true) {
			donpcevent 'jitterbug_main$ + "::OnNextIs10";
			if (jitterbug_options & 1)
				areamonster 'map_jtb$,351,131,389,96, "--ja--", 3108,1;	// no label
			disablenpc instance_npcname("Newoz#09");
			disablenpc instance_npcname("Shaloshi#09");
			disablenpc instance_npcname("Lagi#09");
		}
		close3;
	}
	.@shaloshi$ = instance_npcname("Shaloshi#09");
	.@lagi$ = instance_npcname("Lagi#09");

	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我不断失去其他人。他们就在我面前。";
	npctalk "Newoz：我一直在失去其他人。他们就在我面前。";
	next;
	cutin "ragi01",0;
	mes "[更多]";
	mes "我们又见面了。";
	npctalk "拉吉：我们又见面了。", .@lagi$;
	next;
	cutin "nines03",0;
	mes "[纽沃兹]";
	mes "你的品味很好。这只是我想到的。听。";
	npctalk "纽奥兹：你的品味很好。这只是我想到的。听。";
	next;
	if ('room == 9 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs10";
	cutin "nines02",0;
	emotion ET_DELIGHT;
	mes "[纽沃兹]";
	mes "季节又要变了~我还没机会用凤仙花染指甲呢~";
	npctalk "Newoz：季节又变了~我还没机会用凤仙花染指甲呢~";
	next;
	cutin "ragi02",0;
	emotion ET_DELIGHT, getnpcid(0,.@lagi$);
	mes "[更多]";
	mes "等待下雪~";
	npctalk "拉吉：等雪~", .@lagi$;
	next;
	cutin "nines01",0;
	emotion ET_BEST;
	mes "[纽沃兹]";
	mes "你很厉害。你会成为一名伟大的吉普赛人和吟游诗人。";
	npctalk "纽奥兹：你很好。你会成为一名伟大的吉普赛人和吟游诗人。";
	next;
	cutin "ragi01",0;
	mes "[更多]";
	mes "我想继续当吟游诗人一段时间。";
	npctalk "Lagi：我想继续当吟游诗人一段时间。", .@lagi$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我想工作并不重要，只要你能唱歌能弹就行吧？";
	npctalk "Newoz：我想工作并不重要，只要你能唱歌、弹琴，对吧？";
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "喜欢你的歌。";
	npctalk "Shaloshi：喜欢你的歌。", .@shaloshi$;
	next;
	cutin "nines02",0;
	mes "[纽沃兹]";
	mes "Shaloshi，你有最喜欢的歌曲吗？";
	npctalk "Newoz：Shaloshi，你有最喜欢的歌曲吗？";
	next;
	cutin "shaloshi01",0;
	emotion ET_DELIGHT, getnpcid(0,.@shaloshi$);
	mes "[沙洛西]";
	mes "Runane 唱歌甚至吹口哨也很好听。";
	npctalk "Shaloshi：Runane 甚至吹口哨也很好听。", .@shaloshi$;
	next;
	cutin "",255;
	mes "- 莎洛希撅起嘴唇想吹口哨，但失败了。 -";
	next;
	cutin "ragi01",0;
	mes "[更多]";
	mes "嗯，你想吹口哨吗？";
	npctalk "Lagi：嗯，你想吹口哨吗？", .@lagi$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "哈哈哈，稍后我教你怎么做，Shaloshi。";
	npctalk "Newoz：哈哈哈，我稍后教你怎么做，Shaloshi。";
	next;
	mes "[纽沃兹]";
	mes "" + strcharinfo(0) + "，你有最喜欢的歌曲吗？";
	npctalk "消息：" + strcharinfo(0) + "，你有最喜欢的歌曲吗？";
	next;
	switch( select("爱谷出道曲-Lost Poring", "爱谷单曲-只有我不知道卡牌专辑", "Newoz的红色药水(feat. Muka)", "Laggi自作曲-意外的月光" ) ) {
	case 1:
		jitterbug_options &= ~1;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I like Aigu's debut song, Lost Poring.";
		mes "[纽沃兹]";
		mes "你知道她的出道歌曲。你是她的粉丝吧？";
		npctalk "Newoz：你知道她的首张歌曲。你是她的粉丝吧？";
		break;
	case 2:
		jitterbug_options &= ~1;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I like Aigu's single, Only I Didn't Know about the Card Album.";
		mes "[纽沃兹]";
		mes "艾古是符文米德加特目前最炙手可热的歌手！";
		npctalk "Newoz：艾古是目前符文中最炙手可热的歌手！";
		break;
	case 3:
		jitterbug_options |= 1;
		areamonster 'map_jtb$,351,131,389,96, "--ja--", 3108,1;	// no label
		unittalk getcharid(3), "" + strcharinfo(0) + " : I like your Red Potion (feat. Muka).";
		mes "[纽沃兹]";
		mes "哈哈哈，虽然有点尴尬，不过还是谢谢你";
		npctalk "Newoz：哈哈哈，这很尴尬，但是谢谢你。";
		break;
	case 4:
		jitterbug_options &= ~1;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I like your Laggi's self-composed song, Accidental Moonlight.";
		mes "[更多]";
		mes "但如何...？！它还没有发布。";
		npctalk "拉吉：但是怎么……？！它还没有发布。";
		break;
	}
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "嗯，各有各的。";
	npctalk "Newoz：嗯，各有各的。";
	next;
	cutin "ragi01",0;
	emotion ET_SURPRISE, getnpcid(0,.@lagi$);
	mes "[更多]";
	mes "还有其他东西正在出现。";
	npctalk "Lagi：还有别的东西出现了。", .@lagi$;
	next;
	cutin "nines04",0;
	mes "[纽沃兹]";
	mes "啊，我饿了。怪物可以搞砸自己。夏洛西，我们走吧！";
	npctalk "纽兹：啊，我饿了。怪物可以搞砸自己。夏洛西，我们走吧！";
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "好的。";
	npctalk "夏洛西：好的。", .@shaloshi$;
	next;
	cutin "ragi01",0;
	mes "[更多]";
	mes "嘿，跟我来吧！";
	npctalk "拉吉：嘿，跟我来吧！", .@lagi$;
	sleep2 1000;
	disablenpc instance_npcname("Newoz#09");
	disablenpc .@shaloshi$;
	disablenpc .@lagi$;
	close3;
}

1@jtb,290,114,4	script	Lagi#09	4_M_RAGI,{
	cutin "ragi01",0;
	mes "[更多]";
	mes "我没有冒险经验，但是很有趣。";
	close3;
}

1@jtb,286,117,5	script	Shaloshi#09	4_F_SHALOSH,{
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "（试图吹口哨）我不能。";
	close3;
}

// Room 10
1@jtb,375,117,4	script	Newoz#10	4_M_NEWOZ,{
	if ('room != 10 || is_party_leader() == false) {
		cutin "nines01",2;
		mes "[纽沃兹]";
		mes "这些人是不同的。他们似乎懂音乐……也可能不懂。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@runane$ = instance_npcname("Runane#10");
		.@shaloshi$ = instance_npcname("Shaloshi#10");
		.@roel$ = instance_npcname("Roel#10");

		emotion ET_DELIGHT;
		cutin "nines01",2;
		mes "[纽沃兹]";
		mes "你已经照顾好他们了吗？我想参与其中！";
		npctalk "Newoz：你已经照顾好他们了吗？我想参与其中！";
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "它们看似可爱，实则凶猛。";
		npctalk "罗尔：它们看起来很可爱，但其实很凶猛。", .@roel$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "小伙伴们关注我们吧。不可爱。";
		npctalk "Shaloshi：小伙伴们跟随着我们。不可爱。", .@shaloshi$;
		next;
		cutin "lunain01",0;
		mes "[符文]";
		mes "他们是怪物，不是你的朋友。当心。";
		npctalk "Runane：他们是怪物，不是你的朋友。当心。", .@runane$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "怪物...";
		npctalk "夏洛西：怪物……", .@shaloshi$;
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "她会不会失去了记忆？看来她并不了解危险。";
		npctalk "罗尔：她会不会失去了记忆？看来她并不了解危险。", .@roel$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "危险，不。";
		npctalk "Shaloshi：危险，不。", .@shaloshi$;
		next;
		cutin "lunain02",0;
		mes "[符文]";
		mes "我想她有。";
		npctalk "Runane：我想她有。", .@runane$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "...";
		npctalk "夏洛西：……", .@shaloshi$;
	}
	if ('room == 10 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs11";
	close3;
}

1@jtb,374,110,4	script	Shaloshi#10	4_F_SHALOSH,{
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "这并不危险。不用担心。";
	close3;
}

1@jtb,369,117,5	script	Roel#10	4_M_ROEL,{
	cutin "roel01",0;
	mes "[罗尔]";
	mes "我已经训练够了。我可以成为有用的人。";
	close3;
}

1@jtb,368,111,5	script	Runane#10	4_F_RUNAIN,{
	cutin "lunain01",0;
	mes "[符文]";
	mes "探索时切勿放松警惕，否则您可能会受伤。";
	close3;
}


// Room 11
1@jtb,26,201,5	script	Runane#11	4_F_RUNAIN,{
	if ('room != 11 || is_party_leader() == false) {
		cutin "lunain04",0;
		mes "[符文]";
		mes "阿朗，你为什么不喝呢？";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 11 && 'additionnal_option && is_party_leader() == true)
			disablenpc instance_npcname("Roel#11");
	}
	else {
		.@roel$ = instance_npcname("Roel#11");
		.@aigu$ = instance_npcname("Aigu#11");
		.@arang$ = instance_npcname("Arang#11");
		.@mingmin$ = instance_npcname("Mingmin#11");

		cutin "lunain01",0;
		emotion ET_DELIGHT;
		mes "[符文]";
		mes "推啊推啊~";
		npctalk "鲁南：推，推~";
		next;
		cutin "min01",0;
		emotion ET_DELIGHT, getnpcid(0,.@mingmin$);
		mes "[Mingmin]";
		mes "推啊推啊~";
		npctalk "明珉：推啊推啊~", .@mingmin$;
		next;
		cutin "igu02",0;
		emotion ET_DELIGHT, getnpcid(0,.@aigu$);
		mes "[高音]";
		mes "肩膀还要晃多久~";
		npctalk "哀谷：我的肩膀还要晃多久~", .@aigu$;
		next;
		cutin "lunain01",0;
		mes "[符文]";
		mes "帕姆帕姆帕姆~";
		npctalk "Runane：帕姆，帕姆，帕姆~";
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "妹子妹子~";
		npctalk "明珉：丫头丫头~", .@mingmin$;
		next;
		cutin "igu02",0;
		mes "[高音]";
		mes "帕姆帕姆帕姆帕姆~";
		npctalk "哀谷：啪啪啪啪啪～", .@aigu$;
		next;
		cutin "lunain01",0;
		mes "[符文]";
		mes "*吹*";
		npctalk "鲁南：*吹*";
		next;
		cutin "arang01",2;
		mes "[木炭]";
		mes "呃，我不想喝这个！";
		npctalk "阿朗：呃，我不想喝这个！", .@arang$;
		next;
		cutin "min03",0;
		mes "[Mingmin]";
		mes "只要相信我，喝掉它！";
		npctalk "明敏：相信我，喝吧！", .@mingmin$;
		next;
		cutin "roel01",2;
		emotion ET_SURPRISE, getnpcid(0,.@roel$);
		mes "[罗尔]";
		mes "你想给这个孩子吃什么？这个绿色瓶子里装的是什么？ ...不...";
		npctalk "罗尔：你想给这个孩子吃什么？这个绿色瓶子里装的是什么？ ...不...", .@roel$;
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "绿色药水";
		npctalk "明敏：绿色药水", .@mingmin$;
		next;
		cutin "roel01",2;
		mes "[罗尔]";
		mes "绿药水太苦了……嗯，你说绿药水？";
		npctalk "罗尔：绿药水太苦了……嗯，你说绿药水？", .@roel$;
		next;
		cutin "igu03",0;
		mes "[高音]";
		mes "绿色药水！";
		npctalk "急性：绿色药水！", .@aigu$;
		next;
		cutin "roel01",2;
		mes "[罗尔]";
		mes "绿色药水？";
		npctalk "罗尔：绿色药水？", .@roel$;
		next;
		cutin "lunain04",0;
		mes "[符文]";
		mes "我说的是绿色药水！";
		npctalk "Runane：我说的是绿色药水！";
		next;
		cutin "roel01",2;
		mes "[罗尔]";
		mes "但你唱的是一首奇怪的歌，而且……绿药水？";
		npctalk "罗尔：但是你唱的是一首奇怪的歌，而且……绿药水？", .@roel$;
		next;
		cutin "igu03",0;
		mes "[高音]";
		mes "我有一瓶快过期的绿色药水，所以我们决定玩石头剪刀布，把它喂给失败者。";
		npctalk "哀谷：我有一瓶快过期的绿色药水，所以我们决定玩石头剪刀布，把它喂给失败者。", .@aigu$;
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "当你没有中毒时，它不会做任何事情。我们只是不想浪费好药水。";
		npctalk "明敏：没中毒的时候没有任何作用。我们只是不想浪费好药水。", .@mingmin$;
		next;
		cutin "arang01",0;
		mes "[木炭]";
		mes "但实在是太苦了。";
		npctalk "阿朗：但是非常苦。", .@arang$;
		next;
		cutin "lunain04",0;
		mes "[符文]";
		mes "你还喝吗？";
		npctalk "Runane：你喝了吗？";
		next;
		cutin "igu02",0;
		mes "[高音]";
		mes "喝！喝！";
		npctalk "艾古：喝吧！喝！", .@aigu$;
		next;
		cutin "min01",0;
		mes "[Mingmin]";
		mes "喝！喝！";
		npctalk "明敏：喝吧！喝！", .@mingmin$;
		next;
		cutin "arang02",2;
		mes "[木炭]";
		mes "罗尔，你不能给你妹妹喝吗？";
		npctalk "阿朗：罗尔，你不能给你妹妹喝一杯吗？", .@arang$;
		next;
		cutin "roel01",2;
		mes "[罗尔]";
		mes "让我去寻找可能的威胁。";
		npctalk "罗尔：让我去寻找可能的威胁。", .@roel$;
		disablenpc instance_npcname("Roel#11");
	}
	if ('room == 11 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs12";
	close3;
}

1@jtb,32,198,4	script	Roel#11	4_M_ROEL,{
	cutin "roel01",2;
	mes "[罗尔]";
	mes "一股水流开始流动。";
	close3;
}

1@jtb,28,197,4	script	Arang#11	4_F_TAEKWON,{
	cutin "arang01",2;
	mes "[木炭]";
	mes "讨厌绿色药水~";
	close3;
}

1@jtb,25,196,5	script	Aigu#11	4_F_IU,{
	cutin "igu01",0;
	mes "[高音]";
	mes "肩膀还要晃多久~";
	close3;
}

1@jtb,23,200,5	script	Mingmin#11	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "嗯，这里变得很尴尬。";
	close3;
}


// Room 12
1@jtb,106,198,5	script	Mingmin#12	4_F_GENETIC,{
	if (is_party_leader() == false) {
		mes "[Mingmin]";
		mes "有学者证明Poring卡的下降率是..%。";
		close;
	}
	if ('room != 12) {
		cutin "min02",0;
		mes "[Mingmin]";
		mes "我很高兴蘑菇没有毒。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		cutin "min02",0;
		mes "[Mingmin]";
		mes "其内部原本是一片森林，后来又变成了一个山洞。多么奇怪啊。";
		npctalk "明敏：它的内部看起来像森林，然后变成了洞穴。多么奇怪啊。";
		next;
		mes "[Mingmin]";
		mes "奇怪的植物生长在陌生的地形上。一切看起来都不对劲。";
		npctalk "明敏：奇怪的植物生长在陌生的地形上。一切看起来都不对劲。";
		next;
		mes "[Mingmin]";
		mes "我采了一些蘑菇来尝尝。";
		npctalk "明敏：我采了一些蘑菇来尝尝。";
		next;
		cutin "min01",0;
		mes "[Mingmin]";
		mes "这种蘑菇有毒，但不会危及生命。你想吃一口吗？";
		npctalk "明敏：这个蘑菇有毒，但不会危及生命。你想吃一口吗？";
		next;
		if (select( "衰退。", "咬一口。" ) == 1) {
			cutin "min03",0;
			mes "[Mingmin]";
			mes "我不会接受“不”的回答！";
			npctalk "明敏：我不会拒绝！";
			next;
			mes "- 明敏把蘑菇塞进你嘴里。 -";
			next;
			cutin "min02",0;
			mes "[Mingmin]";
			mes "嗯？";
			npctalk "Mingmin: Hm?";
			next;
			mes "[Mingmin]";
			mes "你没反应。也许蘑菇根本就没有毒。也许我应该尝试一下...";
			npctalk "明敏：你没反应。也许蘑菇根本就没有毒。也许我应该尝试一下...";
			next;
			mes "[Mingmin]";
			mes "嗯...";
			npctalk "Mingmin: Hm...";
			next;
			mes "[Mingmin]";
			mes "它几乎没有味道。";
			npctalk "明敏：几乎没有味道。";
			next;
			mes "[Mingmin]";
			mes "谢什，这真是浪费时间。你应该先走。我还想看一件事。";
			npctalk "明敏：哎呀，这真是浪费时间。你应该先走。我还想看一件事。";
		}
		else {
			mes "[Mingmin]";
			mes "你比我想象的更勇敢。";
			npctalk "明敏：你比我想象的勇敢。";
			next;
			mes "- 你感觉很好，可能是吃蘑菇的副作用。 -";
			next;
			mes "[Mingmin]";
			mes "我应该尝试一个。";
			npctalk "明敏：我应该尝试一下。";
			next;
			mes "[Mingmin]";
			mes "嗯...";
			npctalk "Mingmin: Hm...";
			next;
			mes "[Mingmin]";
			mes "它几乎没有味道。";
			npctalk "明敏：几乎没有味道。";
			next;
			mes "[Mingmin]";
			mes "谢什，这真是浪费时间。你应该先走。我还想看一件事。";
			npctalk "明敏：哎呀，这真是浪费时间。你应该先走。我还想看一件事。";
		}
	}
	if ('room == 12 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs13";
	close3;
}

// Room 13
1@jtb,195,206,4	script	Newoz#13	4_M_NEWOZ,{
	if (is_party_leader() == false) {
		cutin "nines01",2;
		mes "[纽沃兹]";
		mes "突然很想吃肉。我应该带一个装满它的容器！";
		close3;
	}
	if ('room != 13) {
		cutin "nines01",2;
		mes "[纽沃兹]";
		mes "当你只能说“给予和接受”时，你让它听起来如此困难。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 13 && is_party_leader() == true)
			donpcevent 'jitterbug_main$ + "::OnNextIs14";
		close3;
	}
	.@melody$ = instance_npcname("Melody-Jack#13");
	cutin "nines04",2;
	mes "[纽沃兹]";
	mes "嗯，我怎么又失去了其他人呢？";
	npctalk "Newoz：嗯，我怎么又失去了其他人呢？";
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "消息。";
	npctalk "旋律-杰克：纽奥兹。", .@melody$;
	next;
	cutin "nines01",2;
	mes "[纽沃兹]";
	mes "哇！天啊！";
	npctalk "纽兹：哇！天啊！";
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "我以为你已经习惯了让我隐形。";
	npctalk "Melody-Jack：我以为你已经习惯了让我隐形。", .@melody$;
	next;
	cutin "nines01",2;
	mes "[纽沃兹]";
	mes "我们还处于危险之中吗？";
	npctalk "纽兹：我们仍然处于危险之中吗？";
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "猜猜是这样。顺便说一句，我们一直在同一个地方转来转去。";
	npctalk "Melody-Jack：你猜是这样。顺便说一句，我们一直在同一个地方转来转去。", .@melody$;
	next;
	cutin "nines04",2;
	mes "[纽沃兹]";
	mes "所以我对这个地方像迷宫一样的看法是正确的。呃，我又饿了。";
	npctalk "纽奥兹：所以我对这个地方像迷宫一样的看法是正确的。呃，我又饿了。";
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "我一直在等你，因为我想跟你谈谈。";
	npctalk "Melody-Jack：我一直在等你，因为我想跟你谈谈。", .@melody$;
	next;
	mes "[旋律杰克]";
	mes "纽奥兹，当你回到公会时，你的合同已经到期了。";
	npctalk "Melody-Jack：Newoz，当你回到公会时，你的合同已经到期了。", .@melody$;
	next;
	cutin "nines01",2;
	mes "[纽沃兹]";
	mes "哦，是这样。既然我不再是主人了，我的契约自然就到期了。";
	npctalk "纽奥兹：噢，是这样。既然我不再是主人了，我的契约自然也就到期了。";
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "但鉴于目前的情况，我对你的承诺仍然有效。";
	npctalk "Melody-Jack：但鉴于目前的情况，我对你的承诺仍然有效。", .@melody$;
	next;
	cutin "nines01",2;
	mes "[纽沃兹]";
	mes "谢谢。我很高兴我的应急计划仍然有效。";
	npctalk "纽奥兹：谢谢。我很高兴我的应急计划仍然有效。";
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "哼，你要知道我遵守对你的承诺只是因为你得到了我想要的东西。";
	npctalk "Melody-Jack：嗯，你要知道我遵守对你的承诺只是因为你得到了我想要的东西。", .@melody$;
	next;
	cutin "nines02",2;
	mes "[纽沃兹]";
	mes "哦，你是说这把尤克里里吗？";
	npctalk "Newoz：哦，你是说这把尤克里里吗？";
	next;
	cutin "",255;
	emotion ET_MERONG, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "你个白痴，那东西一点价值都没有。你的合同已经到期，但承诺就是承诺，我打算遵守。";
	npctalk "Melody-Jack：你这个白痴，那东西一文不值。你的合同已经到期，但承诺就是承诺，我打算遵守。", .@melody$;
	next;
	cutin "nines01",2;
	mes "[纽沃兹]";
	mes "谢谢。";
	npctalk "纽奥兹：谢谢。";
	close2;
	cutin "",255;
	if ('room == 13 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs14";
	end;
}

1@jtb,191,206,5	script	Melody-Jack#13	CLEAR_NPC,{
	mes "[旋律杰克]";
	mes "请不要跟我说话——我躲起来是有原因的。";
	close;
}


// Room 14 (menu affects the boss encounter in the next room)
1@jtb,282,194,5	script	Newoz#14	4_M_NEWOZ,{
	if ('room != 14 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "这里可能还有其他人。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 14 && is_party_leader() == true) {
			donpcevent 'jitterbug_main$ + "::OnNextIs15";
			if (jitterbug_options & 2)
				areamonster 'map_jtb$,358,212,388,182, "--ja--", 3108,1;	// no label
		}
		close3;
	}
	.@lagi$ = instance_npcname("Lagi#14");
	.@aigu$ = instance_npcname("Aigu#14");
	.@shaloshi$ = instance_npcname("Shaloshi#14");
	.@mingmin$ = instance_npcname("Mingmin#14");
	.@roel$ = instance_npcname("Roel#14");

	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "我想起了一些事情。";
	npctalk "Shaloshi：我记得一些事情。", .@shaloshi$;
	next;
	cutin "igu04",2;
	mes "[高音]";
	mes "你有吗？";
	npctalk "艾古：是吗？", .@aigu$;
	next;
	cutin "ragi03",2;
	emotion ET_DELIGHT, getnpcid(0,.@lagi$);
	mes "[更多]";
	mes "她说她做到了。";
	npctalk "拉吉：她说她做到了。", .@lagi$;
	next;
	cutin "nines03",0;
	emotion ET_DELIGHT;
	mes "[纽沃兹]";
	mes "没错，她就是这么说的。";
	npctalk "纽奥兹：对，她就是这么说的。";
	next;
	cutin "ragi01",2;
	emotion ET_SURPRISE;
	emotion ET_SURPRISE, getnpcid(0,.@lagi$);
	mes "[更多与Newoz]";
	mes "！！！";
	npctalk "纽兹：!!!";
	npctalk "更多的： ！！！", .@lagi$;
	next;
	cutin "nines01",0;
	mes "[更多与Newoz]";
	mes "吉米五！";
	npctalk "纽奥兹：吉米五！";
	npctalk "拉吉：吉米五！", .@lagi$;
	next;
	cutin "",255;
	mes "- *一巴掌* -";
	next;
	emotion ET_KEK;
	emotion ET_KEK, getnpcid(0,.@lagi$);
	emotion ET_HNG, getnpcid(0,.@aigu$);
	emotion ET_HNG, getnpcid(0,.@mingmin$);
	specialeffect EF_HIT5;
	specialeffect EF_HIT5,AREA, .@lagi$;
	mes "- 在两人互相击掌五分之前，爱古和明敏拍了拍他们的背。 -";
	next;
	cutin "igu03",2;
	mes "[高音]";
	mes "别再胡闹了。夏洛西，和我们谈谈吧。";
	npctalk "哀谷：别再胡闹了。夏洛西，和我们谈谈吧。", .@aigu$;
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "漆黑之中，我听到了一个声音。声音很小，但响了一会儿。";
	npctalk "Shaloshi：在一片漆黑中，我听到了一个声音。声音很小，但响了一会儿。", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "后来我听到纽奥兹在等待他的朋友时唱歌。他的声音温暖了我。";
	npctalk "Shaloshi：后来我在等待朋友时听到 Newoz 唱歌。他的声音温暖了我。", .@shaloshi$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "你现在说话像个大人了，流畅清晰。";
	npctalk "明敏：你现在说话像个大人了，流畅又清晰。", .@mingmin$;
	next;
	cutin "roel01",2;
	mes "[罗尔]";
	mes "她可能很害怕。";
	npctalk "罗尔：她可能很害怕。", .@roel$;
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "我不知道朋友是什么意思，但听起来不错。我想要它。";
	npctalk "Shaloshi：我不知道朋友是什么意思，但听起来不错。我想要它。", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "艾古和鲁南出现了。";
	npctalk "Shaloshi：Aigu 和 Runane 出现了。", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "我以为有人实现了我的愿望。";
	npctalk "Shaloshi：我以为有人实现了我的愿望。", .@shaloshi$;
	next;
	cutin "nines01",0;
	emotion ET_QUESTION;
	mes "[纽沃兹]";
	mes "漆黑一片……你不记得还有什么吗？";
	npctalk "Newoz：漆黑一片……你还记得其他事情吗？";
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "不。";
	npctalk "夏洛西：没有。", .@shaloshi$;
	next;
	cutin "roel01",2;
	mes "[罗尔]";
	mes "她本可以闭上眼睛。也许她正在睡觉。";
	npctalk "罗尔：她本可以闭上眼睛。也许她正在睡觉。", .@roel$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "漆黑一片……山洞里除了雾气之外，通体明亮。";
	npctalk "纽兹：漆黑一片……除了雾气，整个洞穴都是明亮的。";
	next;
	if ('room == 14 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs15";
	cutin "min02",0;
	mes "[Mingmin]";
	mes "一个梦。梦中的声音低沉。什么样的梦？";
	npctalk "明珉：一个梦。梦中的声音低沉。什么样的梦？", .@mingmin$;
	next;
	if (select( "她听到了自己的想法。", "她正在和某人说话。" ) == 1) {
		jitterbug_options &= ~2;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Maybe she heard her own thoughts.";
	}
	else {
		jitterbug_options |= 2;
		areamonster 'map_jtb$,358,212,388,182, "--ja--", 3108,1;	// no label
		unittalk getcharid(3), "" + strcharinfo(0) + " : Maybe she was talking with someone.";
	}
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "...";
	npctalk "夏洛西：……", .@shaloshi$;
	next;
	cutin "igu04",0;
	mes "[高音]";
	mes "她可能不记得所有的事情，但这是一个进步。让我们等她准备好再说更多吧。";
	npctalk "哀谷：她可能没有记住所有的事情，但这是一个进步。让我们等她准备好再说更多吧。", .@aigu$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "在我唱歌之前有一个声音。这里可能还有其他人。";
	npctalk "Newoz：我唱歌之前的声音。这里可能还有其他人。";
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "我们很快就会知道。";
	npctalk "明敏：我们很快就会知道。", .@mingmin$;
	close3;
}

1@jtb,285,191,1	script	Shaloshi#14	4_F_SHALOSH,{
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "我想有人实现了我的愿望。";
	close3;
}

1@jtb,285,195,4	script	Lagi#14	4_M_RAGI,{
	cutin "ragi02",0;
	mes "[更多]";
	mes "如果你觉得我的笑话很有趣，请不要试图隐藏它。笑吧。";
	close3;
}

1@jtb,287,194,4	script	Aigu#14	4_F_IU,{
	cutin "igu04",0;
	mes "[高音]";
	mes "别听他的。他不需要因为他的糟糕笑话而受到鼓励。";
	close3;
}

1@jtb,289,191,4	script	Roel#14	4_M_ROEL,{
	cutin "roel01",2;
	mes "[罗尔]";
	mes "希望夏洛西能尽快恢复记忆。";
	close3;
}

1@jtb,280,191,8	script	Mingmin#14	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "呃，我累了。整天照顾这些新成员本身就是一项工作。";
	close3;
}


// Room 15
1@jtb,380,219,5	script	Newoz#15	4_M_NEWOZ,{
	if (is_party_leader() == false) {
		cutin "nines02",0;
		mes "[纽沃兹]";
		mes "我怀念牛肉和橡子的美味组合，称为 Bifrost 烤牛肉。";
		close3;
	}
	if ('room != 15) {
		cutin "nines02",0;
		mes "[纽沃兹]";
		mes "不用担心。孩子是在战斗中成长的。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@roel$ = instance_npcname("Roel#15");
		.@runane$ = instance_npcname("Runane#15");
		.@shaloshi$ = instance_npcname("Shaloshi#15");
		.@roter$ = instance_npcname("Roter#15");
		.@gelka$ = instance_npcname("Gelka#15");
		.@mingmin$ = instance_npcname("Mingmin#15");
		.@arang$ = instance_npcname("Arang#15");

		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "阿让！沙洛西！";
		npctalk "纽兹：阿兰！沙洛西！";
		next;
		cutin "arang01",2;
		mes "[木炭]";
		mes "什么？";
		npctalk "阿朗：什么？", .@arang$;
		next;
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "你没有遇到危险吗？";
		npctalk "Newoz：你没有遇到危险吗？";
		next;
		cutin "arang02",2;
		mes "[木炭]";
		mes "你去哪儿了？我们这里刚刚出现了一个很棒的怪物！";
		npctalk "阿朗：你去哪儿了？我们这里刚刚出现了一个很棒的怪物！", .@arang$;
		next;
		cutin "nines02",0;
		mes "[纽沃兹]";
		mes "呵呵，我的直觉告诉我要放慢速度，因为危险就在前面。";
		npctalk "纽兹：呵呵，我的直觉告诉我要放慢速度，因为危险就在前面。";
		next;
		cutin "gelca01",0;
		mes "[盖尔卡]";
		mes "哦，伟大冒险家的本能！";
		npctalk "盖尔卡：噢，伟大冒险家的本能！", .@gelka$;
		next;
		cutin "arang01",2;
		mes "[木炭]";
		mes "不，他的冒险家本能已经生锈了。";
		npctalk "阿朗：不，他的冒险家本能已经生锈了。", .@arang$;
		next;
		cutin "rote01",0;
		mes "[旋转]";
		mes "他只是懒而已。他没那么弱。";
		npctalk "Roter：他只是懒而已。他没那么弱。", .@roter$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "我的直觉告诉我 Newoz 并不强大。";
		npctalk "Shaloshi：我的直觉告诉我 Newoz 并不强大。", .@shaloshi$;
		next;
		mes "[沙洛西]";
		mes "Newoz，你是否认为除了 Rot 之外的所有人都很平庸？";
		npctalk "Shaloshi：Newoz，你是否认为除了 Rot 之外的所有人都很平庸？", .@shaloshi$;
		next;
		cutin "min02",2;
		mes "[Mingmin]";
		mes "你可以说话，你可以听到别人的想法。杰出的。";
		npctalk "明敏：你可以说话，你可以听到别人的想法。杰出的。", .@mingmin$;
		next;
		cutin "lunain04",2;
		mes "[符文]";
		mes "足够的！别再对纽沃兹不尊重了！";
		npctalk "鲁南：够了！别再对纽沃兹不尊重了！", .@runane$;
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "同志之间不应该互相争斗。";
		npctalk "罗尔：同志之间不应该互相争斗。", .@roel$;
		next;
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "同志之间不应该互相争斗。知道了。";
		npctalk "沙洛希：同志们不应该互相争斗。知道了。", .@shaloshi$;
		next;
		cutin "lunain03",2;
		mes "[符文]";
		mes "同志们，谁？我们只是一群拼命拯救迷失女孩的陌生人！";
		npctalk "Runane：同志们，谁？我们只是一群拼命拯救迷失女孩的陌生人！", .@runane$;
		next;
		cutin "roel03",0;
		mes "[罗尔]";
		mes "（她生气的时候会很生气！）";
		npctalk "Roel：（她生气的时候会变得很笨拙！）", .@roel$;
		next;
		emotion ET_FRET, getnpcid(0,.@mingmin$);
		cutin "min02",0;
		mes "[Mingmin]";
		mes "等我们离开这里之后我们再谈。";
		npctalk "明敏：等我们离开这里再聊。", .@mingmin$;
	}
	if ('room == 15 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs16";
	close3;
}

1@jtb,382,211,4	script	Mingmin#15	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "别在意。";
	close3;
}

1@jtb,378,211,5	script	Gelka#15	4_F_GELKA,{
	cutin "gelca01",0;
	mes "[盖尔卡]";
	mes "我在训练上从不松懈。";
	close3;
}

1@jtb,385,214,4	script	Shaloshi#15	4_F_SHALOSH,{
	cutin "shaloshi02",2;
	mes "[沙洛西]";
	mes "你就不能听听别人的想法吗？";
	close3;
}

1@jtb,383,216,5	script	Arang#15	4_F_TAEKWON,{
	cutin "arang01",0;
	mes "[木炭]";
	mes "做吧！做吧！";
	close3;
}

1@jtb,384,218,4	script	Runane#15	4_F_RUNAIN,{
	cutin "lunain02",2;
	mes "[符文]";
	mes "我在业余时间烘焙和编织。我很国内。嗬嗬嗬！";
	close3;
}

1@jtb,375,214,5	script	Roter#15	4_M_ROTERT,{
	cutin "rote01",0;
	mes "[旋转]";
	mes "确实，我是最强的。";
	close3;
}

1@jtb,376,218,5	script	Roel#15	4_M_ROEL,{
	cutin "roel01",0;
	mes "[罗尔]";
	mes "同志应该是最好的朋友！";
	close3;
}


// Room 16
1@jtb,25,280,5	script	Newoz#16	4_M_NEWOZ,{
	if ('room != 16 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "等等，我收集了一些秋叶和蓝卡，准备送给其他朋友作为纪念品。他们在哪里？";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@mingmin$ = instance_npcname("Mingmin#16");
		.@roter$ = instance_npcname("Roter#16");

		cutin "nines02",0;
		emotion ET_DELIGHT;
		mes "[纽沃兹]";
		mes "你们两个和我在一起勾起了很多回忆。";
		npctalk "Newoz：你们两个和我在一起让我回想起很多回忆。";
		next;
		cutin "rote01",2;
		mes "[旋转]";
		mes "我像头骡子一样固执，忙着假装我知道自己在做什么。";
		npctalk "罗特：我像骡子一样固执，忙着假装我知道自己在做什么。", .@roter$;
		next;
		cutin "min01",0;
		emotion ET_QUESTION, getnpcid(0,.@mingmin$);
		mes "[Mingmin]";
		mes "你们还记得你们两个在普隆德拉南门为了那个卖花姑娘而打架的事吗？或者当东门的玩偶商人因为你争吵并赶走他的顾客而殴打你时？";
		npctalk "明敏：你们还记得你们两个在普隆德拉南门为了那个卖花女而打架的事吗？或者当东门的玩偶商人因为你争吵并赶走他的顾客而殴打你时？", .@mingmin$;
		next;
		cutin "rote01",2;
		mes "[旋转]";
		mes "你对我们没有什么美好的回忆吗？";
		npctalk "Roter：你对我们没有什么美好的回忆吗？", .@roter$;
		next;
		cutin "nines03",0;
		emotion ET_DELIGHT;
		mes "[纽沃兹]";
		mes "哦，我记得了！啊，美好时光！";
		npctalk "纽兹：哦，我记得了！啊，美好时光！";
		next;
		cutin "rote01",0;
		emotion ET_THINK, getnpcid(0,.@roter$);
		mes "[旋转]";
		mes "我是唯一一个对这次谈话不满意的人吗？";
		npctalk "Roter：我是唯一一个对这次谈话不满意的人吗？", .@roter$;
		next;
		cutin "min03",2;
		emotion ET_MERONG, getnpcid(0,.@mingmin$);
		mes "[Mingmin]";
		mes "你和Dead Branch玩到死的时候怎么样？或者当你和你的魔法师伙伴玩 Hocus Pocus 时自杀了？";
		npctalk "明敏：那你和Dead Branch玩死的时候怎么样？或者当你和你的魔法师伙伴玩 Hocus Pocus 时自杀了？", .@mingmin$;
		next;
		cutin "rote01",0;
		emotion ET_OHNO, getnpcid(0,.@roter$);
		mes "[旋转]";
		mes "你就不能想一个美好的回忆吗？";
		npctalk "Roter：你就不能想一个美好的回忆吗？", .@roter$;
		next;
		cutin "nines02",2;
		emotion ET_OK;
		mes "[纽沃兹]";
		mes "我可以！明敏喝了我在街上找到的毒瓶就死了；我告诉过你它很贵，但我并没有说它对你的健康有好处。";
		npctalk "纽兹：我可以！明敏喝了我在街上找到的毒瓶就死了；我告诉过你它很贵，但我并没有说它对你的健康有好处。";
		next;
		cutin "min03",0;
		emotion ET_SMILE, getnpcid(0,.@mingmin$);
		mes "[Mingmin]";
		mes "哦，我记得了！太有趣了！";
		npctalk "明敏：哦，我想起来了！太有趣了！", .@mingmin$;
		next;
		emotion ET_KEK, getnpcid(0,.@roter$);
		cutin "rote01",2;
		mes "[旋转]";
		mes "啊！";
		npctalk "根：啊啊！", .@roter$;
	}
	if ('room == 16 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs17";
	close3;
}

1@jtb,30,279,4	script	Mingmin#16	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "啧啧。我几乎把这里的所有人都养大了，现在他们为了公会会长的位置互相争斗。";
	close3;
}

1@jtb,30,284,4	script	Roter#16	4_M_ROTERT,{
	cutin "rote01",0;
	mes "[旋转]";
	mes "不要让自己被谣言所迷惑！我是南门雄鹿，驱魔史上最强的主教！";
	close3;
}


// Room 17 (menu affects the boss encounter in the next room)
1@jtb,110,281,5	script	Shaloshi#17	4_F_SHALOSH,{
	if ('room != 17 || is_party_leader() == false) {
		cutin "shaloshi01",2;
		mes "[沙洛西]";
		mes "朋友……竞争……同志……";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 17 && is_party_leader() == true) {
			donpcevent 'jitterbug_main$ + "::OnNextIs18";
			if (jitterbug_options & 4)
				areamonster 'map_jtb$,183,301,220,272, "--ja--", 3108,1;	// no label
		}
		close3;
	}
	.@runane$ = instance_npcname("Runane#17");
	.@aigu$ = instance_npcname("Aigu#17");

	cutin "lunain02",2;
	mes "[符文]";
	mes "也许纽奥兹对约会不感兴趣。";
	npctalk "Runane：也许 Newoz 对约会不感兴趣。", .@runane$;
	next;
	cutin "igu05",0;
	mes "[高音]";
	mes "告诉我一些我不知道的事情。";
	npctalk "哀谷：告诉我一些我不知道的事情。", .@aigu$;
	next;
	cutin "lunain01",2;
	mes "[符文]";
	mes "但你还没有尝试与他交谈。我是认真的，你有吗？";
	npctalk "Runane：但你还没有尝试和他说话。我是认真的，你有吗？", .@runane$;
	next;
	cutin "igu04",0;
	mes "[高音]";
	mes "你今天见过他，但除非你傻，否则你应该知道。";
	npctalk "哀谷：你今天见过他，但除非你傻，否则你应该知道。", .@aigu$;
	next;
	cutin "lunain02",2;
	mes "[符文]";
	mes "我知道——如果我约他出去，他会拒绝。";
	npctalk "Runane：我知道——如果我约他出去，他会拒绝的。", .@runane$;
	next;
	cutin "igu05",0;
	mes "[高音]";
	mes "那个傻瓜只对冒险感兴趣。";
	npctalk "哀谷：那个笨蛋只对冒险感兴趣。", .@aigu$;
	next;
	cutin "lunain04",2;
	mes "[符文]";
	mes "别这样称呼我的英雄！ ...但我同意你的观点。";
	npctalk "Runane：别这样称呼我的英雄！ ...但我同意你的观点。", .@runane$;
	next;
	cutin "igu03",0;
	mes "[高音]";
	mes "看来你很喜欢罗尔。";
	npctalk "哀谷：看来你很喜欢罗尔啊。", .@aigu$;
	next;
	cutin "lunain03",2;
	mes "[符文]";
	mes "我对那个孩子不感兴趣。";
	npctalk "Runane：我对那个孩子不感兴趣。", .@runane$;
	next;
	if ('room == 17 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs18";
	cutin "igu03",0;
	mes "[高音]";
	mes "冒险家你呢？你和你的另一半相处得怎么样？";
	npctalk "哀谷：你呢，冒险家？你和你的另一半相处得怎么样？", .@aigu$;
	next;
	switch( select( "你甚至不知道我是否有一个。", "我的爱是单相思的。", "我们很幸福。" ) ) {
	case 1:
		jitterbug_options &= ~4;
		unittalk getcharid(3), "" + strcharinfo(0) + " : You don't even know if I have one.";
		cutin "igu05",0;
		mes "[高音]";
		mes "哦，对不起，我快要哭了。";
		npctalk "哀谷：哦，对不起，我快要哭了。", .@aigu$;
		break;
	case 2:
		jitterbug_options &= ~4;
		unittalk getcharid(3), "" + strcharinfo(0) + " : My love is unrequited.";
		cutin "igu01",0;
		mes "[高音]";
		mes "无回报的爱是痛苦的。你最好在它击垮你之前放手。";
		npctalk "哀谷：单相思是痛苦的。你最好在它击垮你之前放手。", .@aigu$;
		break;
	case 3:
		jitterbug_options |= 4;
		areamonster 'map_jtb$,183,301,220,272, "--ja--", 3108,1;	// no label
		unittalk getcharid(3), "" + strcharinfo(0) + " : We're happy.";
		mes "[高音]";
		mes "你是认真的？即使像你这样的人也找到了自己的爱情。关于我的什么？！";
		npctalk "艾古：你是认真的吗？即使像你这样的人也找到了自己的爱情。关于我的什么？！", .@aigu$;
		break;
	}
	next;
	cutin "igu01",0;
	mes "[高音]";
	mes "我不介意健康的竞争，但我更喜欢友谊，无论它能持续多久。";
	npctalk "哀谷：我不介意健康的竞争，但我更喜欢友谊，无论它能持续多久。", .@aigu$;
	next;
	cutin "",255;
	mes "[符文]";
	mes "我们暂时休战吧。但别搞错了——当我发现纽沃兹脆弱的时候，他就是我的了。";
	npctalk "Runane：我们现在休战吧。但别搞错了——当我发现纽沃兹脆弱的时候，他就是我的了。", .@runane$;
	next;
	cutin "shaloshi03",0;
	mes "[沙洛西]";
	mes "（朋友……竞争……）";
	npctalk "Shaloshi：（朋友们……竞争……）";
	next;
	cutin "igu01",0;
	mes "[高音]";
	mes "在我的尸体上！";
	npctalk "哀谷：在我的尸体上！", .@aigu$;
	close3;
}

1@jtb,113,285,4	script	Runane#17	4_F_RUNAIN,{
	cutin "lunain01",2;
	mes "[符文]";
	mes "我们暂时休战吧。但别搞错了——当我发现纽沃兹脆弱的时候，他就是我的了。";
	close3;
}

1@jtb,108,285,5	script	Aigu#17	4_F_IU,{
	cutin "igu03",0;
	mes "[高音]";
	mes "我不介意健康的竞争，但我更喜欢友谊，无论它能持续多久。";
	close3;
}


// Room 18
1@jtb,198,282,5	script	Shaloshi#18	4_F_SHALOSH,{
	if ('room != 18 || is_party_leader() == false) {
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "费雷斯别咬我。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@runane$ = instance_npcname("Runane#18");
		.@roel$ = instance_npcname("Roel#18");

		emotion ET_THINK;
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "罗尔和鲁纳恩受伤了。";
		npctalk "Shaloshi：罗尔和鲁纳恩受伤了。";
		next;
		cutin "lunain04",2;
		mes "[符文]";
		mes "我很好。我告诉过你要小心，孩子！";
		npctalk "鲁纳内：我很好。我告诉过你要小心，孩子！", .@runane$;
		next;
		cutin "roel04",0;
		emotion ET_SORRY, getnpcid(0,.@roel$);
		mes "[罗尔]";
		mes "对不起。我不会再让你失望了。";
		npctalk "罗尔：抱歉。我不会再让你失望了。", .@roel$;
		next;
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "她对他不满意，但她仍然对他很好。";
		npctalk "Shaloshi：她对他不满意，但她仍然对他很好。";
		next;
		emotion ET_THROB, getnpcid(0,.@roel$);
		cutin "roel03",0;
		mes "[罗尔]";
		mes "（她很善良！）";
		npctalk "罗尔：（她很友善！）", .@roel$;
		next;
		cutin "lunain02",2;
		mes "[符文]";
		mes "不要误认为这只是保姆！";
		npctalk "Runane：别误认为这只是保姆！", .@runane$;
		next;
		emotion ET_THINK;
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "她脸红了。";
		npctalk "夏洛西：她脸红了。";
		next;
		cutin "lunain01",2;
		mes "[符文]";
		mes "你身上没有什么是我喜欢的。";
		npctalk "Runane：我不喜欢你。", .@runane$;
		next;
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "在艾古和鲁南之前，";
		npctalk "Shaloshi：在Aigu和Runane之前，";
		next;
		mes "[沙洛西]";
		mes "费雷斯夫妇首先出现。";
		npctalk "Shaloshi：费雷斯一家首先出现。";
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "费雷？";
		npctalk "罗尔：费雷？", .@roel$;
		next;
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "它们会发出“ferre，ferre”的声音，所以我称它们为 Ferres。";
		npctalk "Shaloshi：他们买了“ferre，ferre”，所以我称他们为 Ferres。";
		next;
		mes "[沙洛西]";
		mes "他们什么也没做，只是嘎嘎叫。";
		npctalk "Shaloshi：他们什么也没做，只是发出嘶哑的声音。";
		next;
		mes "[沙洛西]";
		mes "他们是我的朋友。它们不会咬我或伤害我。";
		npctalk "Shaloshi：他们是我的朋友。它们不会咬我或伤害我。";
		next;
		cutin "roel01",0;
		mes "[罗尔]";
		mes "但现在...";
		npctalk "罗尔：但是现在……", .@roel$;
		next;
		cutin "lunain04",2;
		emotion ET_HNG, getnpcid(0,.@runane$);
		mes "[符文]";
		mes "听着，人类和怪物不可能成为朋友。至少我是这么认为的。";
		npctalk "Runane：听着，人类和怪物不能成为朋友。至少我是这么认为的。", .@runane$;
		next;
		cutin "shaloshi01",0;
		mes "[沙洛西]";
		mes "不能做朋友。";
		npctalk "Shaloshi：不能成为朋友。";
		next;
		cutin "lunain03",2;
		mes "[符文]";
		mes "这是正确的。当你听我说话时，我更喜欢你。";
		npctalk "鲁纳内：没错。当你听我说话时，我更喜欢你。", .@runane$;
		next;
		cutin "roel03",0;
		mes "[罗尔]";
		mes "我做你的朋友怎么样？";
		npctalk "罗尔：我做你的朋友怎么样？", .@roel$;
		next;
		emotion ET_SCRATCH, getnpcid(0,.@runane$);
		cutin "lunain02",2;
		mes "[符文]";
		mes "别再让事情变得尴尬了！我们年龄相仿，所以我们已经是朋友了。";
		npctalk "Runane：别再让事情变得尴尬了！我们年龄相仿，所以我们已经是朋友了。", .@runane$;
		next;
		cutin "shaloshi03",0;
		mes "[沙洛西]";
		mes "（不能成为朋友。）";
		npctalk "Shaloshi：（不能成为朋友。）";
	}
	if ('room == 18 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs19";
	close3;
}

1@jtb,203,281,4	script	Runane#18	4_F_RUNAIN,{
	cutin "lunain02",2;
	mes "[符文]";
	mes "真正的朋友不需要表白；他们只是在不知情的情况下成为了朋友。";
	close3;
}

1@jtb,199,278,8	script	Roel#18	4_M_ROEL,{
	cutin "roel03",0;
	mes "[罗尔]";
	mes "我没事。至少我可以保护夏洛西。保护某人的感觉很好。";
	close3;
}


// Room 19
1@jtb,28,377,5	script	Newoz#19	4_M_NEWOZ,{
	if ('room != 19 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "我们应该找到她。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2)
		mes "试着在匆忙的时候唤起你的记忆。";
	else {
		.@aigu$ = instance_npcname("Aigu#19");
		.@mingmin$ = instance_npcname("Mingmin#19");
		.@roter$ = instance_npcname("Roter#19");
		.@melody$ = instance_npcname("Melody-Jack#19");
		.@arang$ = instance_npcname("Arang#19");

		cutin "nines01",0;
		emotion ET_THINK;
		mes "[纽沃兹]";
		mes "奇怪……气氛变了。";
		npctalk "Newoz：奇怪……气氛变了。";
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "空气中的气味不同了，事物看起来也变得不那么……难以察觉了。";
		npctalk "明敏：空气里的味道不一样了，东西看起来不那么明显了。", .@mingmin$;
		next;
		cutin "rote01",2;
		mes "[旋转]";
		mes "好像我们在水下，但我感觉不到。";
		npctalk "Roter：好像我们在水下，但我感觉不到。", .@roter$;
		next;
		emotion ET_HUM, getnpcid(0,.@melody$);
		cutin "",255;
		mes "[旋律杰克]";
		mes "我告诉你，我们一直在同一个地方转来转去。";
		npctalk "Melody-Jack：我告诉你，我们一直在同一个地方转。", .@melody$;
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "我同意。而且这块空地既不紧凑也不宽敞。";
		npctalk "明敏：我同意。而且这块空地既不紧凑也不宽敞。", .@mingmin$;
		next;
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "你觉得我们再深入下去没有意义吗？";
		npctalk "Newoz：你认为我们再深入下去没有意义吗？";
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "不，我只是说环境变化太剧烈了，就像躁郁症患者的情绪波动一样。";
		npctalk "明敏：没有。我只是说环境变化太剧烈了，就像躁郁症患者的情绪波动一样。", .@mingmin$;
		next;
		mes "[Mingmin]";
		mes "我不知道为什么，但事物正在失去形状，就好像它们正在消失一样。";
		npctalk "明敏：我不知道为什么，但事情正在失去形状，就好像它们正在消失一样。", .@mingmin$;
		next;
		emotion ET_THINK, getnpcid(0,.@melody$);
		cutin "",255;
		mes "[旋律杰克]";
		mes "一直以来，我感受到的异域能量越来越强。这很糟糕。";
		npctalk "Melody-Jack：一直以来，我感觉到的外来能量越来越强。这很糟糕。", .@melody$;
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "我感觉有什么东西会随着一声巨响出现在我们眼前。";
		npctalk "明敏：我感觉有什么东西会突然出现在我们眼前，伴随着一声巨响。", .@mingmin$;
		next;
		cutin "arang02",0;
		mes "[木炭]";
		mes "我希望这是一个强大的怪物！";
		npctalk "阿朗：我希望它是一个强大的怪物！", .@arang$;
		next;
		emotion ET_X, getnpcid(0,.@aigu$);
		cutin "igu01",0;
		mes "[高音]";
		mes "我希望你错了。";
		npctalk "哀谷：我希望你是错的。", .@aigu$;
		next;
		cutin "ragi02",2;
		mes "[更多]";
		mes "我只是要离开你们...";
		npctalk "Lagi：我要离开你们了……", instance_npcname("再次#19");
		next;
		cutin "nines02",0;
		mes "[纽沃兹]";
		mes "怪物？";
		npctalk "纽兹：怪物？";
		next;
		cutin "rote01",2;
		mes "[旋转]";
		mes "我会在怪物面前杀掉你们两个。";
		npctalk "Roter：我会在怪物面前杀掉你们俩。", .@roter$;
		next;
		cutin "gelca04",2;
		mes "[盖尔卡]";
		mes "大师请！";
		npctalk "格尔卡：主人，拜托了！", instance_npcname("凝胶#19");
		next;
		cutin "arang02",0;
		mes "[木炭]";
		mes "你见过夏洛西吗？她在哪儿？";
		npctalk "阿朗：你见过夏洛西吗？她在哪儿？", .@arang$;
		next;
		cutin "igu04",0;
		mes "[高音]";
		mes "哦，你说得对！";
		npctalk "艾古：哦，你说得对！", .@aigu$;
		next;
		cutin "min02",0;
		mes "[Mingmin]";
		mes "...";
		npctalk "Mingmin: ...", .@mingmin$;
		next;
		emotion ET_THINK, getnpcid(0,.@melody$);
		cutin "",255;
		mes "[旋律杰克]";
		mes "...";
		npctalk "旋律-杰克：...", .@melody$;
		next;
		cutin "nines03",0;
		mes "[纽沃兹]";
		mes "我们应该找到她。";
		npctalk "纽兹：我们应该找到她。";
	}
	if ('room == 19 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs20";
	close3;
}

1@jtb,30,377,5	script	Melody-Jack#19	CLEAR_NPC,{
	mes "[旋律杰克]";
	mes "纽兹从来都不圆滑。";
	close;
}

1@jtb,30,373,4	script	Roter#19	4_M_ROTERT,{
	cutin "rote01",0;
	mes "[旋转]";
	mes "我有一种感觉，Newoz 没有什么好图谋。";
	close3;
}

1@jtb,25,373,5	script	Mingmin#19	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "我们最好在事情变得太疯狂之前寻找出口。";
	close3;
}

1@jtb,24,376,5	script	Aigu#19	4_F_IU,{
	cutin "igu05",0;
	mes "[高音]";
	mes "纽奥兹对冒险的热情过度了。再次。但我不能说我讨厌他。";
	close3;
}

1@jtb,26,380,5	script	Arang#19	4_F_TAEKWON,{
	cutin "arang03",0;
	mes "[木炭]";
	mes "我希望这些怪物像跆拳道任务中的波林一样可爱又无助。";
	close3;
}

1@jtb,31,380,4	script	Lagi#19	4_M_RAGI,{
	cutin "ragi01",0;
	mes "[更多]";
	mes "他们总是吵架，但看起来就像好朋友。不是吗？";
	close3;
}

1@jtb,33,376,4	script	Gelka#19	4_F_GELKA,{
	cutin "gelca01",0;
	mes "[盖尔卡]";
	mes "我努力练习，以便在危险的时候能够发光发热。";
	close3;
}


// Room 20 (menu affects the boss encounter in the next room)
1@jtb,105,377,5	script	Roel#20	4_M_ROEL,{
	if ('room != 20 || is_party_leader() == false) {
		cutin "roel01",0;
		mes "[罗尔]";
		mes "我的一位朋友曾经安排我去伊兹鲁德相亲。";
		next;
		mes "[罗尔]";
		mes "她和我交换了几封信，第一封是互相介绍，第二封是约定约会。";
		next;
		cutin "roel04",0;
		mes "[罗尔]";
		mes "她没有回复我的第二封信。我不明白为什么。";
		close3;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 20 && is_party_leader() == true) {
			donpcevent 'jitterbug_main$ + "::OnNextIs21";
			if (jitterbug_options & 8)
				areamonster 'map_jtb$,182,387,219,354, "--ja--", 3108,1;	// no label
		}
		close3;
	}
	.@gelka$ = instance_npcname("Gelka#20");
	cutin "gelca01",2;
	mes "[盖尔卡]";
	mes "场景8：英雄被一大群敌人包围。罗尔，让我们编排一下今天练习的内容，好吗？";
	npctalk "盖尔卡：场景 8：英雄被一大群敌人包围。罗尔，让我们编排一下今天练习的内容，好吗？", .@gelka$;
	next;
	cutin "roel01",0;
	emotion ET_SURPRISE;
	mes "[罗尔]";
	mes "格尔卡，准备好！";
	npctalk "罗尔：盖尔卡，准备好！";
	next;
	emotion ET_COMEON, getnpcid(0,.@gelka$);
	cutin "gelca01",2;
	mes "[盖尔卡]";
	mes "格尔卡式精神力！钢铁体质！";
	npctalk "格尔卡：格尔卡式的精神力！钢铁体质！", .@gelka$;
	specialeffect EF_GUMGANG,AREA, .@gelka$;
	next;
	emotion ET_COMEON;
	cutin "roel02",0;
	mes "[罗尔]";
	mes "坚不可摧的防御！罗尔式的守卫！";
	npctalk "罗尔：坚不可摧的防御！罗尔式的守卫！";
	specialeffect EF_KEEPING;
	next;
	cutin "gelca01",2;
	mes "[罗尔与盖尔卡]";
	mes "叉！！！";
	npctalk "盖尔卡：交叉！！！", .@gelka$;
	npctalk "罗尔：交叉！！！";
	specialeffect EF_POTION_BERSERK;
	specialeffect EF_POTION_BERSERK,AREA, .@gelka$;
	next;
	cutin "roel03",0;
	mes "[罗尔与盖尔卡]";
	mes "最后的堡垒！";
	npctalk "罗尔：最后的堡垒！";
	npctalk "盖尔卡：最后的堡垒！", .@gelka$;
	specialeffect EF_SHIELDBOOMERANG;
	specialeffect EF_BOTTOM_BASILICA,AREA, .@gelka$;
	specialeffect EF_SHIELDCHARGE;
	specialeffect EF_GLASSWALL,AREA, .@gelka$;
	specialeffect EF_GLASSWALL;
	specialeffect EF_GUARD;
	specialeffect EF_ANGELUS,AREA, .@gelka$;
	specialeffect EF_ANGELUS;
	next;
	cutin "roel03",0;
	mes "[罗尔]";
	mes "天啊，盖尔卡，你太棒了！";
	npctalk "罗尔：上帝啊，盖尔卡，你太棒了！";
	if ('room == 20 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs21";
	next;
	cutin "gelca01",2;
	if (select( "太棒了，确实！", "你只是编造了这些词来看起来很酷！" ) == 1) {
		jitterbug_options &= ~8;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Awesome, indeed!";
		cutin "gelca03",2;
		mes "[盖尔卡]";
		mes "我向最优秀的人学习。";
		npctalk "Gelka：我向最优秀的人学习。", .@gelka$;
		next;
		cutin "roel02",0;
		mes "[罗尔]";
		mes "我希望你也能教我，罗特。";
		npctalk "罗尔：我希望你也能教我，罗特。";
		next;
		cutin "gelca01",2;
		mes "[盖尔卡]";
		mes "特殊技能都与他们的名字有关。喊出令人印象深刻的名字足以吓倒你的敌人。";
		npctalk "盖尔卡：特殊技能都与他们的名字有关。喊出令人印象深刻的名字足以吓倒你的敌人。", .@gelka$;
	}
	else {
		jitterbug_options |= 8;
		areamonster 'map_jtb$,182,387,219,354, "--ja--", 3108,1;	// no label
		unittalk getcharid(3), "" + strcharinfo(0) + " : You just made up those words to look cool!";
		cutin "gelca02",2;
		mes "[盖尔卡]";
		mes "你是个扫兴的人，你知道吗？";
		npctalk "盖尔卡：你是个扫兴的人，你知道吗？", .@gelka$;
		next;
		cutin "roel04",0;
		mes "[罗尔]";
		mes "我们已经刻苦练习了。";
		npctalk "罗尔：我们练习得很努力。";
		next;
	}
	next;
	cutin "",255;
	mes "- 他们全神贯注地谈论他们的新特殊技能。 -";
	close3;
}

1@jtb,110,377,4	script	Gelka#20	4_F_GELKA,{
	cutin "gelca01",0;
	mes "[盖尔卡]";
	mes "战斗对于冒险者的训练来说是必不可少的。分而治之！";
	close3;
}


// Room 21 (menu affects the boss encounter in the next room)
1@jtb,198,369,5	script	Newoz#21	4_M_NEWOZ,{
	if ('room != 21 || is_party_leader() == false) {
		mes "[纽沃兹]";
		mes "夏洛西...";
		close;
	}
	if (select( "讲话。", "匆忙。" ) == 2 && isbegin_quest(13183) == 2) {
		mes "试着在匆忙的时候唤起你的记忆。";
		if ('room == 21 && is_party_leader() == true) {
			disablenpc instance_npcname("Shaloshi#21");
			disablenpc instance_npcname("Aigu#21");
			disablenpc instance_npcname("Newoz#21");
			donpcevent 'jitterbug_main$ + "::OnNextIs22";
		}
		close3;
	}
	.@aigu$ = instance_npcname("Aigu#21");
	.@mingmin$ = instance_npcname("Mingmin#21");
	.@roter$ = instance_npcname("Roter#21");
	.@runane$ = instance_npcname("Runane#21");
	.@shaloshi$ = instance_npcname("Shaloshi#21");
	.@melody$ = instance_npcname("Melody-Jack#21");

	cutin "shaloshi03",0;
	mes "[沙洛西]";
	mes "...";
	npctalk "夏洛西：……", .@shaloshi$;
	next;
	cutin "",255;
	mes "[旋律杰克]";
	mes "恐怕我们周围的这个地方正在崩溃。";
	npctalk "Melody-Jack：恐怕我们周围的这个地方正在塌陷。", .@melody$;
	next;
	cutin "shaloshi03",0;
	mes "[沙洛西]";
	mes "费雷斯夫妇很生气。";
	npctalk "Shaloshi：费雷斯一家很生气。", .@shaloshi$;
	next;
	cutin "min02",2;
	mes "[Mingmin]";
	mes "哇，你连怪物的想法都听得见？";
	npctalk "明敏：哇，你连怪物的想法都听得见？", .@mingmin$;
	next;
	if ('room == 21 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs22";
	cutin "shaloshi03",0;
	mes "[沙洛西]";
	mes "他们是我的朋友。";
	npctalk "Shaloshi：他们是我的朋友。", .@shaloshi$;
	next;
	cutin "lunain04",0;
	mes "[符文]";
	mes "不，他们不是。朋友之间不要互相攻击！";
	npctalk "Runane：不，他们不是。朋友之间不要互相攻击！", .@runane$;
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "他们只是想保护我。";
	npctalk "Shaloshi：他们只是想保护我。", .@shaloshi$;
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "保护你免受什么伤害？";
	npctalk "Roter：保护你免受什么伤害？", .@roter$;
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "从罗特的想法来看。";
	npctalk "Shaloshi：来自 Rot 的想法。", .@shaloshi$;
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "...";
	npctalk "旋律-杰克：...", .@melody$;
	next;
	cutin "shaloshi01",0;
	mes "[沙洛西]";
	mes "费雷？";
	npctalk "夏洛西：费雷？", .@shaloshi$;
	next;
	enablenpc instance_npcname("Ferre#21");
	enablenpc instance_npcname("Ferre#22");
	cutin "",255;
	emotion ET_FRET, getnpcid(0,instance_npcname("Ferre#21"));
	mes "[带]";
	mes "费雷，费雷！";
	npctalk "费雷：费雷，费雷！", instance_npcname("费雷#21");
	next;
	emotion ET_FRET, getnpcid(0,instance_npcname("Ferre#22"));
	mes "[带]";
	mes "熊，熊，熊！";
	npctalk "费雷：费雷，费雷，费雷！", instance_npcname("费雷#21");
	specialeffect EF_READYPORTAL2,AREA, .@shaloshi$;
	specialeffect EF_PORTAL2,AREA, .@shaloshi$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "！！！";
	npctalk "纽兹：!!!";
	next;
	disablenpc .@shaloshi$;
	disablenpc instance_npcname("Ferre#21");
	disablenpc instance_npcname("Ferre#22");
	cutin "rote01",2;
	mes "[旋转]";
	mes "我们将被埋葬在这里。我们找个出口吧。";
	npctalk "Roter：我们将被埋在这里。我们找个出口吧。", .@roter$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我们必须找到夏洛西！";
	npctalk "Newoz：我们必须找到Shaloshi！";
	next;
	emotion ET_THINK, getnpcid(0,.@melody$);
	cutin "",255;
	mes "[旋律杰克]";
	mes "纽兹，我知道你脑子里很奇怪，但她...";
	npctalk "Melody-Jack：Newoz，我知道你脑子里很奇怪，但她……", .@melody$;
	next;
	cutin "nines04",0;
	mes "[纽沃兹]";
	mes "我知道。你不用提醒我。";
	npctalk "纽兹：我知道。你不用提醒我。";
	next;
	cutin "min02",2;
	mes "[Mingmin]";
	mes "那我们就离开这里吧。我们现在正处于严重危险之中。";
	npctalk "明敏：那我们就离开这里吧。我们现在正处于严重危险之中。", .@mingmin$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我必须找到她。我必须和她谈谈。";
	npctalk "纽兹：我必须找到她。我必须和她谈谈。";
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "新的！";
	npctalk "旋转：NEWOZ！", .@roter$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我不再是你的主人了。你不必跟着我。";
	npctalk "Newoz：我不再是你的主人了。你不必跟着我。";
	next;
	cutin "lunain01",0;
	mes "[符文]";
	mes "！！！";
	npctalk "鲁纳内：！！！", .@runane$;
	next;
	disablenpc instance_npcname("Newoz#21");
	cutin "igu05",0;
	mes "[高音]";
	mes "纽兹，我跟你一起去！";
	npctalk "艾古：纽沃兹，我跟你一起去！", .@aigu$;
	next;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "这是你的决定，新主人。";
	npctalk "明敏：这是你的决定，新主人。", .@mingmin$;
	next;
	disablenpc .@aigu$;
	cutin "gelca04",2;
	mes "[盖尔卡]";
	mes "掌握！";
	npctalk "格尔卡：主人！", instance_npcname("凝胶#21");
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "...";
	npctalk "红色的： ...", .@roter$;
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "我们会找到纽兹和沙洛希。当我们这样做时，我会杀掉他们两个。";
	npctalk "Roter：我们会找到Newoz和Shaloshi。当我们这样做时，我会杀掉他们两个。", .@roter$;
	next;
	cutin "roel04",0;
	mes "[罗尔]";
	mes "纽兹，你知道会发生这种事吗？你很幸运有这么好的朋友。";
	npctalk "Roel：Newoz，你知道会发生这种事吗？你很幸运有这么好的朋友。", instance_npcname("罗尔#21");
	next;
	emotion ET_THINK, getnpcid(0,.@melody$);
	cutin "",255;
	mes "[旋律杰克]";
	mes "他不知道，因为他从来没有思考过。";
	npctalk "Melody-Jack：他不知道，因为他从来不思考。", .@melody$;
	next;
	cutin "arang01",2;
	mes "[木炭]";
	mes "耶皮！我们走吧！";
	npctalk "阿朗：耶皮！我们走吧！", instance_npcname("木炭#21");
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "我们将分成两队。小心不要在迷宫般的分支中迷路。";
	npctalk "Roter：我们将分成两队。小心不要在迷宫般的分支中迷路。", .@roter$;
	next;
	if (select( "跟随 Roter 和 Gelka。", " 单独搜索。" ) == 1)
		jitterbug_options &= ~16;
	else
		jitterbug_options |= 16;
	cutin "min02",0;
	mes "[Mingmin]";
	mes "我们准备好了吗？我们走吧！";
	npctalk "明敏：我们准备好了吗？我们走吧！", .@mingmin$;
	close3;
}

1@jtb,202,367,5	script	Melody-Jack#21	CLEAR_NPC,{
	mes "[旋律杰克]";
	mes "我就知道会这样，哀谷却不听我的话！";
	close;
}

1@jtb,204,366,4	script	Arang#21	4_F_TAEKWON,{
	cutin "arang01",0;
	mes "[木炭]";
	mes "希望！";
	close3;
}

1@jtb,201,365,4	script	Gelka#21	4_F_GELKA,{
	cutin "gelca04",2;
	mes "[盖尔卡]";
	mes "我相信您，师父！";
	close3;
}

1@jtb,202,363,4	script	Mingmin#21	4_F_GENETIC,{
	cutin "min02",0;
	mes "[Mingmin]";
	mes "*咕噜声*为什么我会让自己陷入这样的困境？";
	close3;
}

1@jtb,195,365,5	script	Runane#21	4_F_RUNAIN,{
	cutin "lunain01",0;
	mes "[符文]";
	mes "我们应该先找到Newoz和Shaloshi。";
	close3;
}

1@jtb,194,363,5	script	Roel#21	4_M_ROEL,{
	cutin "roel01",0;
	mes "[罗尔]";
	mes "我会跟随你们，直到世界的尽头。";
	close3;
}

1@jtb,194,367,5	script	Lagi#21	4_M_RAGI,{
	cutin "ragi02",0;
	mes "[更多]";
	mes "我希望今天不是我演奏乐器的最后一天......";
	close3;
}

1@jtb,195,368,5	script	Aigu#21	4_F_IU,{
	cutin "igu05",0;
	mes "[高音]";
	mes "我正在关注纽奥兹。";
	close3;
}

1@jtb,201,369,4	script	Roter#21	4_M_ROTERT,{
	cutin "rote01",0;
	mes "[旋转]";
	mes "我就让你们见识一下我身为公会会长的领导魅力吧！";
	close3;
}

1@jtb,197,363,5	duplicate(???#02)	Ferre#21	4_F_PERE01
1@jtb,198,363,5	duplicate(???#02)	Shaloshi#21	4_F_SHALOSH
1@jtb,199,363,5	duplicate(???#02)	Ferre#22	4_F_PERE01


// Room 22
// 1@jtb,318,358,5	duplicate(???#02)	Newoz#22	4_M_NEWOZ


// Room 23 (Boss Room entrance)
1@jtb,320,323,5	script	Newoz#23	4_M_NEWOZ,{
	if ('room != 23 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "*裤裤*我很高兴你没有走得太远。";
		close3;
	}
	.@shaloshi$ = instance_npcname("Shaloshi#23");
	.@ferre_23$ = instance_npcname("Ferre#23");
	.@ferre_24$ = instance_npcname("Ferre#24");
	cutin "nines04",0;
	mes "[纽沃兹]";
	mes "*裤裤*我找到你了，Shaloshi。";
	npctalk "Newoz：*裤裤*我找到你了，Shaloshi。";
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "纽兹...";
	npctalk "夏洛西：纽奥兹……", .@shaloshi$;
	next;
	cutin "nines04",0;
	mes "[纽沃兹]";
	mes "*裤裤*我很高兴你没有走得太远。";
	npctalk "Newoz：*裤裤*我很高兴你没有走得太远。";
	next;
	cutin "",255;
	mes "[带]";
	mes "费雷，费雷，费——！";
	npctalk "费雷：费雷，费雷，费——！", .@ferre_23$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "费雷很生气。";
	npctalk "Shaloshi：费雷很生气。", .@shaloshi$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "你不必难过。我来这里不是为了带走你的朋友。我只想...";
	npctalk "纽奥兹：你不必感到沮丧。我来这里不是为了带走你的朋友。我只想...";
	next;
	cutin "",255;
	mes "[带]";
	mes "熊，熊，熊！";
	npctalk "费雷：费雷，费雷，费雷！", .@ferre_23$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "费雷真的很生气。";
	npctalk "Shaloshi：费雷真的很生气。", .@shaloshi$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "是的，你不必告诉我这一点。";
	npctalk "Newoz：是的，你不必告诉我这一点。";
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "这不好。费雷...";
	npctalk "夏洛西：这不好。费雷...", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "不不！";
	npctalk "夏洛西：不，不！", .@shaloshi$;
	next;
	cutin "",255;
	mes "[带]";
	mes "熊，熊，熊，熊——！";
	npctalk "费雷：费雷，费雷，费雷，费雷——！", .@ferre_23$;
	next;
	sleep2 400;
	disablenpc .@ferre_23$;
	enablenpc .@ferre_24$;
	disablenpc .@ferre_24$;
	enablenpc .@ferre_23$;
	sleep2 800;
	disablenpc .@ferre_23$;
	enablenpc .@ferre_24$;
	disablenpc .@ferre_24$;
	enablenpc .@ferre_23$;
	disablenpc .@ferre_23$;
	enablenpc .@ferre_24$;
	disablenpc .@ferre_24$;
	enablenpc .@ferre_23$;
	disablenpc .@ferre_23$;
	enablenpc .@ferre_24$;
	sleep2 700;
	specialeffect EF_LORD,AREA, .@ferre_24$;
	specialeffect EF_SUI_EXPLOSION,AREA, .@ferre_24$;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "费雷已经变身为真身了！";
	npctalk "夏洛西：费雷变回原形了！", .@shaloshi$;
	next;
	cutin "",255;
	mes "^FF0000强大的敌人出现了！^000000";
	next;
	mes "[带]";
	mes "费雷-费雷-费雷-费雷-！！";
	npctalk "费雷：费雷-费雷-费雷-费雷-！！", .@ferre_24$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "费雷，你不必这样做！";
	npctalk "Shaloshi：Ferre，你不必这样做！", .@shaloshi$;
	next;
	cutin "nines03",0;
	mes "[纽沃兹]";
	mes "好吧，如果我不能说服他放弃这件事，那么我们就只能决一死战了。";
	npctalk "纽奥兹：好吧，如果我不能说服他放弃这件事，那么我们就只能决一死战了。";
	next;
	mes "[纽沃兹]";
	mes "其他人在哪里？嘿，新人，帮帮我吧。费雷看起来很有拳头。";
	npctalk "纽兹：其他人在哪里？嘿，新人，帮帮我吧。费雷看起来很有拳头。";
	next;
	cutin "",255;
	mes "[带]";
	mes "火，火，火——！";
	npctalk "费雷：费雷，费雷，费雷——！", .@ferre_24$;
	next;
	cutin "nines02",0;
	mes "[纽沃兹]";
	mes "让我们开始吧！";
	npctalk "纽兹：我们开始吧！";
	close2;
	cutin "",255;
	if ('room == 23 && is_party_leader() == true) {
		'party_id = getcharid(1);
		donpcevent 'jitterbug_main$ + "::OnNextIs23";
		if (jitterbug_options & 16)
			monster 'map_jtb$,327,331, "--ja--", 3108,2;	// JITTERBUG1 - no label
	}
	end;
}

1@jtb,324,327,4	duplicate(???#02)	Ferre#23	4_F_PERE01
1@jtb,324,327,4	duplicate(???#02)	Ferre#24	4_JITTERBUG
1@jtb,326,329,4	duplicate(???#02)	Shaloshi#23	4_F_SHALOSH

// 1@jtb,323,337,5	script	Boss#23	HIDDEN_WARP_NPC

1@jtb,320,323,5	script	Newoz#boss	4_M_NEWOZ,{
	end;
OnStart:
	enablenpc instance_npcname("Newoz#boss");
	npctalk "纽兹：别担心。我来帮助你！";
	initnpctimer;
	end;
OnTimer30000:
	.@r = rand(5);
	if (.@r == 0)
		npctalk "Newoz：八卦辣椒有什么作用？获得墨西哥胡椒生意！";
	else if (.@r == 1)
		npctalk "Newoz：为什么香蕉可以涂防晒霜？因为它们会剥皮！";
	else if (.@r == 2)
		npctalk "你怎么称呼鱼音乐家？钢琴金枪鱼。";
	else if (.@r == 3)
		npctalk "嗯，等一下。尤克里里琴弦的一根断了。我来唱歌怎么样？";
	else
		npctalk "Newoz：农夫对绿色南瓜说了什么？为什么是橙色你是橙色的？";
	emotion ET_DELIGHT;
	initnpctimer;
	if ('boss_id) {
		getunitdata 'boss_id, .@data;
		npcskilleffect "WZ_STORMGUST",1,.@data[UMOB_X],.@data[UMOB_Y];
		unittalk 'boss_id, "FERRE! FERRE!";

		getpartymember 'party_id, 1, .@char_id;
		getpartymember 'party_id, 2, .@account_id;
		for ( .@i = 0; .@i < $@partymembercount; .@i++ ) {
			if (isloggedin(.@account_id[.@i],.@char_id[.@i]) == true) {
				getmapxy .@map$,.@x,.@y, BL_PC, .@account_id[.@i];
				if (.@map$ == 'map_jtb$ && distance(.@x,.@y,323,324) < 10)
					sc_start SC_FREEZE,15000,0,10000,0, .@account_id[.@i];
			}
		}
	}
	end;
OnStop:
	stopnpctimer;
	disablenpc instance_npcname("Newoz#boss");
	end;
}

// Room 23 - After Boss dead
1@jtb,320,323,5	script	Newoz#24	4_M_NEWOZ,{
	if ('room != 24 || is_party_leader() == false) {
		cutin "nines01",0;
		mes "[纽沃兹]";
		mes "夏洛西..";
		close3;
	}
	.@aigu$ = instance_npcname("Aigu#24");
	.@roel$ = instance_npcname("Roel#24");
	.@ferre$ = instance_npcname("Ferre#25");
	.@arang$ = instance_npcname("Arang#24");
	.@runane$ = instance_npcname("Runane#24");
	.@roter$ = instance_npcname("Roter#24");
	.@melody$ = instance_npcname("Melody-Jack#24");
	.@mingmin$ = instance_npcname("Mingmin#24");
	.@shaloshi$ = instance_npcname("Shaloshi#24");

	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我喜欢他的精神，尽管我可以看到他已经精疲力尽了。";
	npctalk "纽奥兹：我喜欢他的精神，尽管我可以看到他已经精疲力尽了。";
	next;
	cutin "",255;
	mes "[带]";
	mes "费雷...";
	npctalk "费雷：费雷……", .@ferre$;
	next;
	enablenpc .@roter$;
	enablenpc instance_npcname("Gelka#24");
	cutin "rote01",2;
	mes "[旋转]";
	mes "纽兹，你还活着！很好，因为我要杀人……";
	npctalk "Roter：Newoz，你还活着！很好，因为我要杀人……", .@roter$;
	next;
	enablenpc .@aigu$;
	enablenpc instance_npcname("Lagi#24");
	cutin "igu05",0;
	mes "[高音]";
	mes "纽兹，你还好吗？";
	npctalk "艾古：纽奥兹，你还好吗？", .@aigu$;
	next;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "我没事。罗特，你担心我吗？";
	npctalk "纽兹：我没事。罗特，你担心我吗？";
	next;
	enablenpc .@melody$;
	enablenpc .@mingmin$;
	enablenpc .@arang$;
	enablenpc .@runane$;
	enablenpc .@roel$;
	sleep2 500;
	emotion ET_FRET, getnpcid(0,.@roter$);
	emotion ET_THINK, getnpcid(0,.@melody$);
	cutin "",255;
	mes "[旋律杰克]";
	mes "哇，这个地方撑不了多久了——看地面晃得多么厉害！我们真的需要像昨天一样离开，纽奥兹。";
	npctalk "Melody-Jack：哇，这个地方撑不了多久了——看看地面晃得多么猛烈！我们真的需要像昨天一样离开，纽奥兹。", .@melody$;
	next;
	mes "[带]";
	mes "费雷...";
	npctalk "费雷：费雷……", .@ferre$;
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "他还没死。伙计们，我知道你们是新人，但你们不能犯这样的错误。";
	npctalk "罗特：他没有死。伙计们，我知道你们是新人，但你们不能犯这样的错误。", .@roter$;
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "最好快点摆脱他。";
	npctalk "Melody-Jack：最好快点除掉他。", .@melody$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "不！他是我的朋友！";
	npctalk "夏洛西：不！他是我的朋友！", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "费雷在裂缝中为我创造了这个空间。如果他失去理智或者死亡，这个空间就会连同其中的一切一起消失。";
	npctalk "Shaloshi：Ferre 在裂缝中为我创造了这个空间。如果他失去理智或者死亡，这个空间就会连同其中的一切一起消失。", .@shaloshi$;
	next;
	cutin "min02",2;
	mes "[Mingmin]";
	mes "除了你，你的意思是。";
	npctalk "明敏：你是说，除了你。", .@mingmin$;
	next;
	emotion ET_DELIGHT, getnpcid(0,instance_npcname("Newoz#24"));
	npctalk "Newoz：农夫对绿色南瓜说了什么？为什么是橙色你是橙色的？", instance_npcname("消息#24");
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "...";
	npctalk "夏洛西：……", .@shaloshi$;
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "在那之前我应该​​有足够的时间摆脱你。我会告诉你为什么我被称为驱魔世界的坏小子。";
	npctalk "Roter：在那之前我应该​​有足够的时间来摆脱你。我会告诉你为什么我被称为驱魔世界的坏小子。", .@roter$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "如果我带着费雷去异空间，那么松动的时空裂缝中就会出现多个出口。";
	npctalk "夏洛希：如果我带着费雷去异空间的话，松动的时空裂缝中就会出现多个出口。", .@shaloshi$;
	next;
	cutin "",255;
	emotion ET_THINK, getnpcid(0,.@melody$);
	mes "[旋律杰克]";
	mes "你很聪明并且能够传送。罗特，我们不能让她走。";
	npctalk "Melody-Jack：你很聪明并且能够传送。罗特，我们不能让她走。", .@melody$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "我不应该带你来这里，但我真的想要一些朋友。";
	npctalk "Shaloshi：我不应该带你来这里，但我真的想要一些朋友。", .@shaloshi$;
	next;
	cutin "nines03",0;
	mes "[纽沃兹]";
	mes "你有它们。我们。";
	npctalk "纽奥兹：你有它们。我们。";
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "...谢谢。";
	npctalk "夏洛西：……谢谢。", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "现在我应该对你诚实。我现在记得一切。让我再次自我介绍一下。";
	npctalk "Shaloshi：现在我应该对你说实话了。我现在记得一切。让我再次自我介绍一下。", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "我是夏洛希，恶魔读心者，摩洛哥的第三位特工。";
	npctalk "夏洛希：我是夏洛希，恶魔读心者，摩洛哥的第三位特工。", .@shaloshi$;
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "摩洛哥？！";
	npctalk "罗特：摩洛哥？！", .@roter$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "...我现在自由了，但这并没有改变我的身份：一个恶魔。";
	npctalk "Shaloshi：……我现在自由了，但这并没有改变我的身份：一个恶魔。", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "我很喜欢你的陪伴。如果再见面……我们会成为敌人吗？";
	npctalk "Shaloshi：我很喜欢和你在一起。如果再见面……我们会成为敌人吗？", .@shaloshi$;
	next;
	cutin "nines03",0;
	mes "[纽沃兹]";
	mes "不，夏洛西。从今天开始，您是纽沃兹白翼公会的新成员。";
	npctalk "纽兹：不，沙洛希。从今天开始，您是纽沃兹白翼公会的新成员。";
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "谁说你可以邀请她？我不会收养恶魔的！";
	npctalk "Roter：谁说你可以邀请她？我不会收养恶魔的！", .@roter$;
	next;
	cutin "arang02",2;
	mes "[木炭]";
	mes "公会成员可以互相争吵，但他们仍然是一家人。";
	npctalk "阿朗：公会成员可以互相争吵，但他们仍然是一家人。", .@arang$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "……谢谢你，冒险家纽兹。如果我发现一些有趣的地方，我可以邀请你过来吗？";
	npctalk "夏洛西：……谢谢你，冒险家纽奥兹。如果我发现一些有趣的地方，我可以邀请你过来吗？", .@shaloshi$;
	next;
	mes "[沙洛西]";
	mes "我认为我有能力带着人们一起，无论我走到哪里。不然你也不会跟着我这么远。";
	npctalk "Shaloshi：我认为我有能力带着人们一起，无论我走到哪里。不然你也不会跟着我这么远。", .@shaloshi$;
	next;
	cutin "lunain04",0;
	mes "[符文]";
	mes "你竟敢夺走我的纽奥兹！";
	npctalk "Runane：你竟敢夺走我的Newoz！", .@runane$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "你只是想，“也带上我吧！”";
	npctalk "Shaloshi：你只是想，“也带上我吧！”", .@shaloshi$;
	next;
	cutin "igu03",0;
	mes "[高音]";
	mes "哇，鲁纳内。你真可爱！";
	npctalk "哀古：哇哦，鲁南。你真可爱！", .@aigu$;
	next;
	cutin "roel04",2;
	mes "[罗尔]";
	mes "夏洛西，我不在乎你是谁。你是我的朋友，我也是你的朋友。";
	npctalk "Roel：Shaloshi，我不在乎你是谁。你是我的朋友，我也是你的朋友。", .@roel$;
	next;
	cutin "shaloshi01",2;
	mes "[沙洛西]";
	mes "谢谢。如果我知道如何表达我的感受就好了……";
	npctalk "夏洛西：谢谢。如果我知道如何表达我的感受就好了……", .@shaloshi$;
	next;
	cutin "igu05",0;
	mes "[高音]";
	mes "这很容易。只是笑一下。";
	npctalk "艾古：这很容易。只是笑一下。", .@aigu$;
	next;
	cutin "shaloshi04",2;
	mes "[沙洛西]";
	mes "再见，朋友们。我希望我们很快就能再次见面。";
	npctalk "夏洛西：再见，朋友们。我希望我们很快就能再次见面。", .@shaloshi$;
	next;
	specialeffect EF_PORTAL2,AREA, .@shaloshi$;
	specialeffect EF_PORTAL2,AREA, .@ferre$;
	disablenpc .@shaloshi$;
	disablenpc .@ferre$;
	cutin "nines01",0;
	mes "[纽沃兹]";
	mes "再见。";
	npctalk "纽兹：再见。";
	next;
	cutin "rote01",2;
	mes "[旋转]";
	mes "别看我。那是出口吗？";
	npctalk "罗特：别看我。那是出口吗？", .@roter$;
	close2;
	cutin "",255;
	if ('room == 24 && is_party_leader() == true)
		donpcevent 'jitterbug_main$ + "::OnNextIs5";
	end;
}

1@jtb,326,329,4	duplicate(???#02)	Shaloshi#24	4_F_SHALOSH
1@jtb,324,327,4	duplicate(???#02)	Ferre#25	4_F_PERE01

1@jtb,328,326,4	duplicate(???#02)	Roter#24	4_M_ROTERT
1@jtb,330,328,4	duplicate(???#02)	Gelka#24	4_F_GELKA
1@jtb,328,324,4	duplicate(???#02)	Mingmin#24	4_F_GENETIC
1@jtb,317,325,5	duplicate(???#02)	Aigu#24	4_F_IU
1@jtb,316,322,5	duplicate(???#02)	Lagi#24	4_M_RAGI
1@jtb,319,320,5	duplicate(???#02)	Arang#24	4_F_TAEKWON
1@jtb,321,318,4	duplicate(???#02)	Runane#24	4_F_RUNAIN
1@jtb,326,319,4	duplicate(???#02)	Roel#24	4_M_ROEL
1@jtb,325,322,4	duplicate(???#02)	Melody-Jack#24	CLEAR_NPC


// Room 5 (Exit)
1@jtb,379,31,4	script	Newoz#05	4_M_NEWOZ,{
	if ('room != 25 || is_party_leader() == false) {
		cutin "nines01",2;
		mes "[纽沃兹]";
		mes "我已经有一段时间没有这么开心了。";
		if ('room >= 25 && isbegin_quest(13181) == 1)	// officially, complete the quest for members
			completequest 13181;
		close3;
	}
	.@aigu$ = instance_npcname("Aigu#05");
	.@roter$ = instance_npcname("Roter#05");
	.@runane$ = instance_npcname("Runane#05");
	.@melody$ = instance_npcname("Melody-Jack#05");
	.@mingmin$ = instance_npcname("Mingmin#05");

	cutin "nines02",2;
	emotion ET_DELIGHT;
	mes "[纽沃兹]";
	mes "这是我很长一段时间以来第一次和我的老朋友一起冒险。我希望我们很快就能再次这样做。";
	npctalk "Newoz：这是我很长一段时间以来第一次和我的老朋友一起冒险。我希望我们很快就能再次这样做。";
	next;
	cutin "rote01",0;
	emotion ET_STARE, getnpcid(0,.@roter$);
	mes "[旋转]";
	mes "纽奥兹。需要我提醒你这个公会不再叫纽沃兹白翼了吗？";
	npctalk "罗特：纽奥兹。需要我提醒你这个公会不再叫纽沃兹白翼了吗？", .@roter$;
	next;
	cutin "nines04",2;
	mes "[纽沃兹]";
	mes "什么？公会名称改了吗？";
	npctalk "纽兹：什么？公会名称改了吗？";
	next;
	cutin "rote01",0;
	emotion ET_HNG, getnpcid(0,.@roter$);
	mes "[旋转]";
	mes "当然！现在叫……嗯……";
	npctalk "罗特：当然！现在叫……嗯……", .@roter$;
	next;
	emotion ET_OHNO, getnpcid(0,.@mingmin$);
	cutin "min02",0;
	mes "[Mingmin]";
	mes "别再想了，保留旧名称即可。";
	npctalk "明敏：别想了，就用老名字吧。", .@mingmin$;
	emotion ET_SCRATCH, getnpcid(0,.@mingmin$);
	next;
	emotion ET_SPARK, getnpcid(0,.@roter$);
	cutin "rote01",0;
	mes "[旋转]";
	mes "不，我要把它称为罗特的超临界公会！";
	npctalk "Roter：不，我要把它称为Roter的超级批判公会！", .@roter$;
	emotion ET_SHY, getnpcid(0,.@roter$);
	next;
	emotion ET_OTL, getnpcid(0,.@aigu$);
	cutin "igu05",2;
	mes "[高音]";
	mes "...";
	npctalk "急性：...", .@aigu$;
	next;
	mes "[高音]";
	mes "听起来很蹩脚。";
	npctalk "哀谷：听起来很蹩脚。", .@aigu$;
	next;
	cutin "roel04",2;
	mes "[罗尔]";
	mes "我不喜欢它。";
	npctalk "罗尔：我不喜欢它。", instance_npcname("罗尔#05");
	next;
	cutin "lunain04",0;
	mes "[符文]";
	mes "呆呆的。";
	npctalk "鲁纳内：傻瓜。", .@runane$;
	next;
	cutin "rote01",0;
	emotion ET_STARE, getnpcid(0,.@roter$);
	mes "[旋转]";
	mes "我是公会会长！我想怎么命名就怎么命名！";
	npctalk "Roter：我是公会会长！我想怎么命名就怎么命名！", .@roter$;
	next;
	cutin "arang01",2;
	mes "[木炭]";
	mes "不酷。";
	npctalk "阿朗：不酷。", instance_npcname("木炭#05");
	next;
	emotion ET_KIK, getnpcid(0,.@mingmin$);
	cutin "min02",0;
	mes "[Mingmin]";
	mes "保留名字。我出去了。";
	npctalk "明敏：保留名字。我出去了。", .@mingmin$;
	next;
	emotion ET_HUK, getnpcid(0,.@roter$);
	cutin "rote01",0;
	mes "[旋转]";
	mes "你不能那样做！";
	npctalk "罗特：你不能这么做！", .@roter$;
	next;
	cutin "",255;
	mes "[旋律杰克]";
	mes "我不是会员，但如果你问我，这个名字...";
	npctalk "Melody-Jack：我不是会员，但如果你问我，那个名字......", .@melody$;
	emotion ET_THINK, getnpcid(0,.@melody$);
	next;
	cutin "ragi01",0;
	mes "[更多]";
	mes "我永远无法说出这个名字。哀谷，你确定要跟这些家伙待在一起吗？";
	npctalk "Lagi：我永远无法说出这个名字。哀谷，你确定要跟这些家伙待在一起吗？", instance_npcname("再次#05");
	next;
	cutin "igu02",2;
	mes "[高音]";
	mes "我不在乎。我和纽沃兹住在一起。";
	npctalk "艾古：我不在乎。我和纽沃兹住在一起。", .@aigu$;
	emotion ET_BIGTHROB, getnpcid(0,.@aigu$);
	next;
	cutin "lunain04",0;
	mes "[符文]";
	mes "我只是不喜欢这个名字。";
	npctalk "Runane：我只是不喜欢这个名字。", .@runane$;
	next;
	cutin "rote01",0;
	mes "[旋转]";
	mes "嘘！我们已经玩够一天了。你们都被解雇了！罗特超临界公会的冒险就此结束！";
	npctalk "罗特：嘘！我们已经玩够一天了。你们都被解雇了！罗特超临界公会的冒险就此结束！", .@roter$;
	completequest 13181;
	if ('room == 25) {
		'room = 26;
		enablenpc instance_npcname("24 Door 1");
	}
	close3;
}

1@jtb,363,11,5	script	Melody-Jack#05	CLEAR_NPC,{
	mes "[旋律杰克]";
	mes "我们的交易完成了。让我想想我想要什么回报...";
	close;
}

1@jtb,358,25,5	script	Gelka#05	4_F_GELKA,{
	cutin "gelca01",0;
	mes "[盖尔卡]";
	mes "我会！我也会更加努力的练习！";
	close3;
}

1@jtb,385,20,5	script	Runane#05	4_F_RUNAIN,{
	cutin "lunain03",0;
	mes "[符文]";
	mes "我想回家。我真想洗个澡，吃点面包。";
	close3;
}

1@jtb,375,31,5	script	Roter#05	4_M_ROTERT,{
	cutin "rote01",0;
	mes "[旋转]";
	mes "你现在是一个潜在客户。为公会努力工作，也许有一天我会提升你。";
	close3;
}

1@jtb,380,28,4	script	Aigu#05	4_F_IU,{
	cutin "igu03",2;
	mes "[高音]";
	mes "我再也不会放开你了，纽奥兹！";
	close3;
}

1@jtb,359,43,5	script	Lagi#05	4_M_RAGI,{
	cutin "ragi01",0;
	mes "[更多]";
	mes "我通过这次冒险找到了很多灵感。我希望我能写出一些好歌。";
	close3;
}

1@jtb,378,47,5	script	Arang#05	4_F_TAEKWON,{
	cutin "arang03",0;
	mes "[木炭]";
	mes "罗尔和我现在是朋友了。呵呵。";
	close3;
}

1@jtb,381,47,4	script	Roel#05	4_M_ROEL,{
	cutin "roel03",2;
	mes "[罗尔]";
	mes "我也想和爱姑一样跳舞。";
	close3;
}

// Exchange npc
1@jtb,375,28,5	script	Mingmin#05	4_F_GENETIC,{
	disable_items;
	if (!checkweight(18122,1) || (MaxWeight - Weight) < 1000) {// custom - officially no check of the weight
		mes "- 等一下 ！！ -";
		mes "- 目前你携带的是 -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 请再试一次 -";
		mes "- 当你减掉一些体重后。 -";
		close;
	}
	cutin "min02",0;
	mes "[Mingmin]";
	mes "我从夏洛希那里偷了几缕头发，以为有一天它会派上用场。我想分析它们，尽管我已经知道结果。";
	next;
	switch( select( "奇怪的吊坠", "吉特巴牙", "退出。" ) ) {
	case 1:
		mes "[Mingmin]";
		mes "你见过这个吊坠吗？";
		next;
		mes "[Mingmin]";
		mes "我想我可以把和谐吊坠和混沌吊坠放在一起。";
		next;
		mes "[Mingmin]";
		mes "如果我这样做，结果将是令人难以置信的！";
		next;
		mes "[Mingmin]";
		mes "攻击力+6%。徒步旅行 +6%。所有统计数据+1。";
		mes "来自敌人的魔法攻击会施放 1 级自动法术漩涡。";
		mes "防御：0 重量：10 所需等级：130";
		mes "插槽：1";
		next;
		mes "[Mingmin]";
		mes "如果您对我对组合结果的描述感到奇怪的熟悉，我就不知道了。但这就是我对结果的看法。如果你找到了两个吊坠，就把它们带给我，好吗？";
		next;
		if ((countitem(2990) - isequippedcnt(2990)) > 0 && (countitem(2991) - isequippedcnt(2991)) > 0) {
			mes "[Mingmin]";
			mes "哦，你有一些漂亮的吊坠。你想把它们结合起来吗？我保证，它是万无一失的。";
			next;
			if (select( "退出。", "合并。" ) == 2) {
				mes "[Mingmin]";
				mes "组合过程非常简单。我只是把和谐吊坠放在地上，然后把混沌吊坠扔向它……就像这样！";
				next;
				specialeffect EF_PHARMACY_FAIL;
				mes "[Mingmin]";
				mes "哦，我失败了吗？";
				next;
				mes "[Mingmin]";
				mes "*咯咯*我在逗你——它成功了！";
				delitem	2990,1;// Pendant_Of_Harmony
				delitem	2991,1;// Pendant_Of_Chaos
				getitem 2992,1;// Pendant_Of_Maelstorm
				next;
				mes "[Mingmin]";
				mes "啊，组合物品很有趣。";
				next;
			}
		}
		break;
	case 2:
		mes "[Mingmin]";
		mes "你有吉特巴牙齿吗？";
		next;
		mes "[Mingmin]";
		mes "我现在还不能告诉你，但它们对我很有用。把它们带给我，我会给你一些纽沃兹囤积的战利品作为回报。";
		next;
		mes "[Mingmin]";
		mes "我到底提供什么？巨弓、风暴弓和^FF0000在这个空间中发现的其他有价值的东西。^000000如果你想要它们，请给我至少50颗吉特巴牙齿。";
		next;
		mes "[Mingmin]";
		mes "我将用^FF0000一个随机物品交换 50 个吉特巴牙齿。^000000";
		next;
		if (select( "退出。", "交换 50。" ) == 2) {
			if (countitem(6719) < 50) {// Tooth_Of_Jitterbug
				mes "[Mingmin]";
				mes "我不会接受少于 50 个 Jitterbug Teeth 的东西。";
			}
			else {
				mes "[Mingmin]";
				mes "好的！让我想想我想给你什么...";
				next;
				delitem 6719,50;// Tooth_Of_Jitterbug
				.@item_id = F_Rand(
					616,	// Old_Card_Album
					1935,	// Ukulele_Of_Newoz
					1990,	// Floral_Mic_Of_Igu
					2988,	// Winged_Ring_Of_Newoz
					2989,	// Floral_Bracelet_Of_Igu
					2990,	// Pendant_Of_Harmony
					2991,	// Pendant_Of_Chaos
					12246,	// Magic_Card_Album
					15100,	// Frozen_Breastplate
					15101,	// Harden_Breastplate
					18122,	// Gigantic_Bow
					18123	// Bow_Of_Storm
				 );
				getitem .@item_id,1;
				mes "[Mingmin]";
				mes "享受您的物品。如果您想要更多物品，请带上更多吉特巴牙齿。";
			}
			next;
		}
		break;
	case 3:
		break;
	}
	mes "[Mingmin]";
	mes "这个地方仍然充满了值得研究的东西。";
	close3;
}


1@jtb,1,1,0	script	#jitterbug_main	-1,{
	end;
OnNextIs2:
	'room = 2;
	enablenpc instance_npcname("1 Door 1");
	areamonster 'map_jtb$,100,13,133,46, "--ja--", 3069,10, 'jitterbug_main$ + "::OnMobDead2";// PERE1
	end;
OnMobDead2:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead2") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Aigu#02");
		enablenpc instance_npcname("Runane#02");
	}
	end;

OnNextIs3:
	'room = 3;
	enablenpc instance_npcname("2 Door 1");
	areamonster 'map_jtb$,180,12,220,46, "--ja--", 3069,10, 'jitterbug_main$ + "::OnMobDead3";// PERE1
	end;
OnMobDead3:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead3") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Roter#03");
		enablenpc instance_npcname("Gelka#03");
	}
	end;

OnNextIs4:
	'room = 4;
	enablenpc instance_npcname("3 Door 1");
	areamonster 'map_jtb$,268,14,305,46, "--ja--", 3069,20, 'jitterbug_main$ + "::OnMobDead4";// PERE1
	end;
OnMobDead4:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead4") == 0) {
		sleep 1500;
		enablenpc instance_npcname("???#04");
	}
	end;

OnNextIs6:
	'room = 6;
	enablenpc instance_npcname("4 Door 1");
	areamonster 'map_jtb$,11,97,47,130, "--ja--", 3069,20, 'jitterbug_main$ + "::OnMobDead6";// PERE1
	end;
OnMobDead6:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead6") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#06");
		enablenpc instance_npcname("Aigu#06");
		enablenpc instance_npcname("Shaloshi#06");
		enablenpc instance_npcname("Arang#06");
	}
	end;

OnNextIs7:
	'room = 7;
	enablenpc instance_npcname("6 Door 1");
	areamonster 'map_jtb$,94,96,131,131, "--ja--", 3069,10, 'jitterbug_main$ + "::OnMobDead7";// PERE1
	areamonster 'map_jtb$,94,96,131,131, "--ja--", 3070,5,  'jitterbug_main$ + "::OnMobDead7";// PERE2
	end;
OnMobDead7:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead7") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Roel#07");
		enablenpc instance_npcname("Runane#07");
		enablenpc instance_npcname("Aigu#07");
	}
	end;

OnNextIs8:
	'room = 8;
	enablenpc instance_npcname("7 Door 1");
	areamonster 'map_jtb$,182,95,219,131, "--ja--", 3069,15, 'jitterbug_main$ + "::OnMobDead8";// PERE1
	areamonster 'map_jtb$,182,95,219,131, "--ja--", 3070,5,  'jitterbug_main$ + "::OnMobDead8";// PERE2
	end;
OnMobDead8:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead8") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Mingmin#08");
		enablenpc instance_npcname("Shaloshi#08");
		enablenpc instance_npcname("Newoz#08");
	}
	end;

OnNextIs9:
	'room = 9;
	enablenpc instance_npcname("8 Door 1");
	areamonster 'map_jtb$,268,131,306,95, "--ja--", 3069,22, 'jitterbug_main$ + "::OnMobDead9";// PERE1
	areamonster 'map_jtb$,268,131,306,95, "--ja--", 3070,5,  'jitterbug_main$ + "::OnMobDead9";// PERE2
	end;
OnMobDead9:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead9") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#09");
		enablenpc instance_npcname("Lagi#09");
		enablenpc instance_npcname("Shaloshi#09");
	}
	end;

OnNextIs10:
	'room = 10;
	enablenpc instance_npcname("9 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead10";
	areamonster 'map_jtb$,351,131,389,96, "--ja--", 3069,10, .@label$;// PERE1
	areamonster 'map_jtb$,351,131,389,96, "--ja--", 3071,5,  .@label$;// PERE3
	areamonster 'map_jtb$,351,131,389,96, "--ja--", 3108,1,  .@label$;// JITTERBUG1
	end;
OnMobDead10:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead10") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#10");
		enablenpc instance_npcname("Shaloshi#10");
		enablenpc instance_npcname("Roel#10");
		enablenpc instance_npcname("Runane#10");
	}
	end;

OnNextIs11:
	'room = 11;
	enablenpc instance_npcname("10 Door 1");
	areamonster 'map_jtb$,11,218,48,182, "--ja--", 3069,10, 'jitterbug_main$ + "::OnMobDead11";// PERE1
	areamonster 'map_jtb$,11,218,48,182, "--ja--", 3070,5,  'jitterbug_main$ + "::OnMobDead11";// PERE2
	end;
OnMobDead11:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead11") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Runane#11");
		enablenpc instance_npcname("Roel#11");
		enablenpc instance_npcname("Arang#11");
		enablenpc instance_npcname("Aigu#11");
		enablenpc instance_npcname("Mingmin#11");
	}
	end;

OnNextIs12:
	'room = 12;
	enablenpc instance_npcname("11 Door 1");
	areamonster 'map_jtb$,94,218,132,182, "--ja--", 3069,10, 'jitterbug_main$ + "::OnMobDead12";// PERE1
	end;
OnMobDead12:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead12") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Mingmin#12");
	}
	end;

OnNextIs13:
	'room = 13;
	enablenpc instance_npcname("12 Door 1");
	areamonster 'map_jtb$,180,217,218,182, "--ja--", 3069,15, 'jitterbug_main$ + "::OnMobDead13";// PERE1
	areamonster 'map_jtb$,180,217,218,182, "--ja--", 3070,5,  'jitterbug_main$ + "::OnMobDead13";// PERE2
	end;
OnMobDead13:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead13") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#13");
		enablenpc instance_npcname("Melody-Jack#13");
	}
	end;

OnNextIs14:
	'room = 14;
	disablenpc instance_npcname("Melody-Jack#13");
	enablenpc instance_npcname("13 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead14";
	areamonster 'map_jtb$,268,216,305,181, "--ja--", 3069,15, .@label$;// PERE1
	areamonster 'map_jtb$,268,216,305,181, "--ja--", 3070,5,  .@label$;// PERE2
	areamonster 'map_jtb$,268,216,305,181, "--ja--", 3071,5,  .@label$;// PERE3
	end;
OnMobDead14:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead14") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#14");
		enablenpc instance_npcname("Shaloshi#14");
		enablenpc instance_npcname("Lagi#14");
		enablenpc instance_npcname("Aigu#14");
		enablenpc instance_npcname("Roel#14");
		enablenpc instance_npcname("Mingmin#14");
	}
	end;

OnNextIs15:
	'room = 15;
	enablenpc instance_npcname("14 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead15";
	areamonster 'map_jtb$,358,212,388,182, "--ja--", 3069,20, .@label$;// PERE1
	areamonster 'map_jtb$,358,212,388,182, "--ja--", 3070,10, .@label$;// PERE2
	areamonster 'map_jtb$,358,212,388,182, "--ja--", 3109,1,  .@label$;// JITTERBUG2
	end;
OnMobDead15:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead15") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#15");
		enablenpc instance_npcname("Mingmin#15");
		enablenpc instance_npcname("Gelka#15");
		enablenpc instance_npcname("Shaloshi#15");
		enablenpc instance_npcname("Arang#15");
		enablenpc instance_npcname("Runane#15");
		enablenpc instance_npcname("Roter#15");
		enablenpc instance_npcname("Roel#15");
	}
	end;

OnNextIs16:
	'room = 16;
	enablenpc instance_npcname("15 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead16";
	areamonster 'map_jtb$,13,300,47,267, "--ja--", 3069,10, .@label$;// PERE1
	areamonster 'map_jtb$,13,300,47,267, "--ja--", 3070,10, .@label$;// PERE2
	areamonster 'map_jtb$,13,300,47,267, "--ja--", 3071,10, .@label$;// PERE3
	areamonster 'map_jtb$,13,300,47,267, "--ja--", 3072,5,  .@label$;// PERE4
	end;
OnMobDead16:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead16") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#16");
		enablenpc instance_npcname("Mingmin#16");
		enablenpc instance_npcname("Roter#16");
	}
	end;

OnNextIs17:
	'room = 17;
	enablenpc instance_npcname("16 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead17";
	areamonster 'map_jtb$,104,297,132,268, "--ja--", 3069,8, .@label$;// PERE1
	areamonster 'map_jtb$,104,297,132,268, "--ja--", 3070,10,.@label$;// PERE2
	areamonster 'map_jtb$,104,297,132,268, "--ja--", 3071,5, .@label$;// PERE3
	areamonster 'map_jtb$,104,297,132,268, "--ja--", 3072,7, .@label$;// PERE4
	end;
OnMobDead17:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead17") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Shaloshi#17");
		enablenpc instance_npcname("Runane#17");
		enablenpc instance_npcname("Aigu#17");
	}
	end;

OnNextIs18:
	'room = 18;
	enablenpc instance_npcname("17 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead18";
	monster 'map_jtb$, 210, 272, "--ja--", 3069,1, .@label$;// PERE1
	monster 'map_jtb$, 211, 273, "--ja--", 3071,1, .@label$;// PERE3
	monster 'map_jtb$, 212, 272, "--ja--", 3072,1, .@label$;// PERE4
	monster 'map_jtb$, 209, 273, "--ja--", 3072,1, .@label$;
	monster 'map_jtb$, 213, 273, "--ja--", 3070,1, .@label$;// PERE2
	monster 'map_jtb$, 211, 274, "--ja--", 3070,1, .@label$;
	monster 'map_jtb$, 212, 275, "--ja--", 3070,1, .@label$;
	monster 'map_jtb$, 213, 275, "--ja--", 3070,1, .@label$;
	monster 'map_jtb$, 213, 276, "--ja--", 3070,1, .@label$;

	areamonster 'map_jtb$,183,301,220,272, "--ja--", 3069,5, .@label$;// PERE1
	areamonster 'map_jtb$,183,301,220,272, "--ja--", 3070,8, .@label$;// PERE2
	areamonster 'map_jtb$,183,301,220,272, "--ja--", 3071,5, .@label$;// PERE3
	areamonster 'map_jtb$,183,301,220,272, "--ja--", 3072,5, .@label$;// PERE4
	areamonster 'map_jtb$,183,301,220,272, "--ja--", 3108,1, .@label$;// JITTERBUG1
	end;
OnMobDead18:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead18") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Shaloshi#18");
		enablenpc instance_npcname("Runane#18");
		enablenpc instance_npcname("Roel#18");
	}
	end;

OnNextIs19:
	'room = 19;
	enablenpc instance_npcname("18 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead19";
	areamonster 'map_jtb$,13,389,45,355, "--ja--", 3069,5, .@label$;// PERE1
	areamonster 'map_jtb$,13,389,45,355, "--ja--", 3070,9, .@label$;// PERE2
	areamonster 'map_jtb$,13,389,45,355, "--ja--", 3071,9, .@label$;// PERE3
	areamonster 'map_jtb$,13,389,45,355, "--ja--", 3072,9, .@label$;// PERE4
	end;
OnMobDead19:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead19") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#19");
		enablenpc instance_npcname("Melody-Jack#19");
		enablenpc instance_npcname("Roter#19");
		enablenpc instance_npcname("Mingmin#19");
		enablenpc instance_npcname("Aigu#19");
		enablenpc instance_npcname("Arang#19");
		enablenpc instance_npcname("Lagi#19");
		enablenpc instance_npcname("Gelka#19");
	}
	end;

OnNextIs20:
	'room = 20;
	enablenpc instance_npcname("19 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead20";
	areamonster 'map_jtb$,95,387,133,352, "--ja--", 3069,3, .@label$;// PERE1
	areamonster 'map_jtb$,95,387,133,352, "--ja--", 3070,10, .@label$;// PERE2
	areamonster 'map_jtb$,95,387,133,352, "--ja--", 3072,6, .@label$;// PERE4
	end;
OnMobDead20:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead20") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Roel#20");
		enablenpc instance_npcname("Gelka#20");
	}
	end;

OnNextIs21:
	'room = 21;
	enablenpc instance_npcname("20 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead21";
	areamonster 'map_jtb$,182,387,219,354, "--ja--", 3069,10, .@label$;// PERE1
	areamonster 'map_jtb$,182,387,219,354, "--ja--", 3070,10, .@label$;// PERE2
	areamonster 'map_jtb$,182,387,219,354, "--ja--", 3071,10, .@label$;// PERE3
	areamonster 'map_jtb$,182,387,219,354, "--ja--", 3072,10, .@label$;// PERE4
	areamonster 'map_jtb$,182,387,219,354, "--ja--", 3109,1,  .@label$;// JITTERBUG2
	end;
OnMobDead21:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead21") == 0) {
		sleep 1500;
		enablenpc instance_npcname("Newoz#21");
		enablenpc instance_npcname("Melody-Jack#21");
		enablenpc instance_npcname("Arang#21");
		enablenpc instance_npcname("Gelka#21");
		enablenpc instance_npcname("Mingmin#21");
		enablenpc instance_npcname("Runane#21");
		enablenpc instance_npcname("Roel#21");
		enablenpc instance_npcname("Lagi#21");
		enablenpc instance_npcname("Aigu#21");
		enablenpc instance_npcname("Roter#21");
		enablenpc instance_npcname("Shaloshi#21");
	}
	end;

OnNextIs22:
	'room = 22;
	enablenpc instance_npcname("21 Door 1");
	.@label$ = 'jitterbug_main$ + "::OnMobDead22";
	monster 'map_jtb$, 288, 339, "--ja--", 3069,1, .@label$;// PERE1
	monster 'map_jtb$, 288, 319, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 288, 309, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 287, 296, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 299, 295, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 310, 294, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 323, 295, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 334, 295, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 344, 295, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 353, 294, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 357, 300, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 357, 307, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 358, 317, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 358, 325, "--ja--", 3069,1, .@label$;
	monster 'map_jtb$, 358, 338, "--ja--", 3069,1, .@label$;
	end;
OnMobDead22:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead22") == 0) {
		sleep 1500;
		if ('room == 22) {
			'room = 23;
			enablenpc instance_npcname("22 Door 1");
			enablenpc instance_npcname("Ferre#23");
			enablenpc instance_npcname("Shaloshi#23");
			enablenpc instance_npcname("Newoz#23");
		}
	}
	end;

OnNextIs23:
	'room = 24;
	disablenpc instance_npcname("22 Door 1");	// can't enter in the boss room anymore
	disablenpc instance_npcname("Ferre#24");
	disablenpc instance_npcname("Newoz#23");
	disablenpc instance_npcname("Shaloshi#23");
	donpcevent instance_npcname("Newoz#boss") + "::OnStart";

	.@label$ = 'jitterbug_main$ + "::OnMobDead23";
	for ( .@id = 3069; .@id < 3072; .@id++ ) {
		monster 'map_jtb$,323,315, "--ja--", .@id, 1;// no label
		monster 'map_jtb$,331,324, "--ja--", .@id, 1;
		monster 'map_jtb$,322,338, "--ja--", .@id, 1;
		monster 'map_jtb$,314,325, "--ja--", .@id, 1;
	}
	monster 'map_jtb$,322,335, "Awakened Ferre", 3073,1, .@label$;	// GRAND_PERE
	'boss_id = $@mobid[0];
	end;
OnMobDead23:
	if (mobcount('map_jtb$, 'jitterbug_main$ + "::OnMobDead23") == 0) {
		sleep 1500;
		donpcevent instance_npcname("Newoz#boss") + "::OnStop";
		enablenpc instance_npcname("Newoz#24");
		enablenpc instance_npcname("Shaloshi#24");
		enablenpc instance_npcname("Ferre#25");
		'boss_id = 0;
	}
	end;

OnNextIs5:
	'room = 25;
	enablenpc instance_npcname("23 Door 1");// note: dead players are not warped
	enablenpc instance_npcname("Newoz#05");
	enablenpc instance_npcname("Melody-Jack#05");
	enablenpc instance_npcname("Gelka#05");
	enablenpc instance_npcname("Runane#05");
	enablenpc instance_npcname("Roter#05");
	enablenpc instance_npcname("Aigu#05");
	enablenpc instance_npcname("Lagi#05");
	enablenpc instance_npcname("Arang#05");
	enablenpc instance_npcname("Roel#05");
	enablenpc instance_npcname("Mingmin#05");
	end;


OnInstanceInit:
	// false: some npcs are not disabled when choosing 'Hurry' (official)
	// true: disable the npcs
	'additionnal_option = false;

	'room = 1;
	'boss_id = 0;
	'map_jtb$ = instance_mapname("1@jtb");
	'jitterbug_main$ = instance_npcname("#jitterbug_main");

	// warps
	disablenpc instance_npcname("1 Door 1");
	disablenpc instance_npcname("2 Door 1");
	disablenpc instance_npcname("3 Door 1");
	disablenpc instance_npcname("4 Door 1");
	disablenpc instance_npcname("6 Door 1");
	disablenpc instance_npcname("7 Door 1");
	disablenpc instance_npcname("8 Door 1");
	disablenpc instance_npcname("9 Door 1");
	disablenpc instance_npcname("10 Door 1");
	disablenpc instance_npcname("11 Door 1");
	disablenpc instance_npcname("12 Door 1");
	disablenpc instance_npcname("13 Door 1");
	disablenpc instance_npcname("14 Door 1");
	disablenpc instance_npcname("15 Door 1");
	disablenpc instance_npcname("16 Door 1");
	disablenpc instance_npcname("17 Door 1");
	disablenpc instance_npcname("18 Door 1");
	disablenpc instance_npcname("19 Door 1");
	disablenpc instance_npcname("20 Door 1");
	disablenpc instance_npcname("21 Door 1");
	disablenpc instance_npcname("22 Door 1");
	disablenpc instance_npcname("23 Door 1");
	disablenpc instance_npcname("24 Door 1");

	// Room 2
	disablenpc instance_npcname("Aigu#02");
	disablenpc instance_npcname("???#02");
	disablenpc instance_npcname("Runane#02");

	// Room 3
	disablenpc instance_npcname("Roter#03");
	disablenpc instance_npcname("Gelka#03");

	// Room 4
	disablenpc instance_npcname("???#04");

	// Room 6
	disablenpc instance_npcname("Newoz#06");
	disablenpc instance_npcname("Aigu#06");
	disablenpc instance_npcname("Shaloshi#06");
	disablenpc instance_npcname("Arang#06");

	// Room 7
	disablenpc instance_npcname("Roel#07");
	disablenpc instance_npcname("Runane#07");
	disablenpc instance_npcname("Aigu#07");

	// Room 8
	disablenpc instance_npcname("Mingmin#08");
	disablenpc instance_npcname("Shaloshi#08");
	disablenpc instance_npcname("Newoz#08");

	// Room 9 (menu affects the boss encounter in the next room)
	disablenpc instance_npcname("Newoz#09");
	disablenpc instance_npcname("Lagi#09");
	disablenpc instance_npcname("Shaloshi#09");

	// Room 10
	disablenpc instance_npcname("Newoz#10");
	disablenpc instance_npcname("Shaloshi#10");
	disablenpc instance_npcname("Roel#10");
	disablenpc instance_npcname("Runane#10");

	// Room 11
	disablenpc instance_npcname("Runane#11");
	disablenpc instance_npcname("Roel#11");
	disablenpc instance_npcname("Arang#11");
	disablenpc instance_npcname("Aigu#11");
	disablenpc instance_npcname("Mingmin#11");

	// Room 12
	disablenpc instance_npcname("Mingmin#12");

	// Room 13
	disablenpc instance_npcname("Newoz#13");
	disablenpc instance_npcname("Melody-Jack#13");

	// Room 14 (menu affects the boss encounter in the next room)
	disablenpc instance_npcname("Newoz#14");
	disablenpc instance_npcname("Shaloshi#14");
	disablenpc instance_npcname("Lagi#14");
	disablenpc instance_npcname("Aigu#14");
	disablenpc instance_npcname("Roel#14");
	disablenpc instance_npcname("Mingmin#14");

	// Room 15
	disablenpc instance_npcname("Newoz#15");
	disablenpc instance_npcname("Mingmin#15");
	disablenpc instance_npcname("Gelka#15");
	disablenpc instance_npcname("Shaloshi#15");
	disablenpc instance_npcname("Arang#15");
	disablenpc instance_npcname("Runane#15");
	disablenpc instance_npcname("Roter#15");
	disablenpc instance_npcname("Roel#15");

	// Room 16
	disablenpc instance_npcname("Newoz#16");
	disablenpc instance_npcname("Mingmin#16");
	disablenpc instance_npcname("Roter#16");

	// Room 17 (menu affects the boss encounter in the next room)
	disablenpc instance_npcname("Shaloshi#17");
	disablenpc instance_npcname("Runane#17");
	disablenpc instance_npcname("Aigu#17");

	// Room 18
	disablenpc instance_npcname("Shaloshi#18");
	disablenpc instance_npcname("Runane#18");
	disablenpc instance_npcname("Roel#18");

	// Room 19
	disablenpc instance_npcname("Newoz#19");
	disablenpc instance_npcname("Melody-Jack#19");
	disablenpc instance_npcname("Roter#19");
	disablenpc instance_npcname("Mingmin#19");
	disablenpc instance_npcname("Aigu#19");
	disablenpc instance_npcname("Arang#19");
	disablenpc instance_npcname("Lagi#19");
	disablenpc instance_npcname("Gelka#19");

	// Room 20 (menu affects the boss encounter in the next room)
	disablenpc instance_npcname("Roel#20");
	disablenpc instance_npcname("Gelka#20");

	// Room 21 (menu affects the boss encounter in the boss room)
	disablenpc instance_npcname("Newoz#21");
	disablenpc instance_npcname("Melody-Jack#21");
	disablenpc instance_npcname("Arang#21");
	disablenpc instance_npcname("Gelka#21");
	disablenpc instance_npcname("Mingmin#21");
	disablenpc instance_npcname("Runane#21");
	disablenpc instance_npcname("Roel#21");
	disablenpc instance_npcname("Lagi#21");
	disablenpc instance_npcname("Aigu#21");
	disablenpc instance_npcname("Roter#21");
	disablenpc instance_npcname("Shaloshi#21");
	disablenpc instance_npcname("Ferre#21");
	disablenpc instance_npcname("Ferre#22");

	// Boss room entrance
	disablenpc instance_npcname("Ferre#23");
	disablenpc instance_npcname("Ferre#24");
	disablenpc instance_npcname("Shaloshi#23");
	disablenpc instance_npcname("Newoz#23");
	disablenpc instance_npcname("Newoz#boss");

	// Boss room - boss dead
	disablenpc instance_npcname("Newoz#24");
	disablenpc instance_npcname("Shaloshi#24");
	disablenpc instance_npcname("Roter#24");
	disablenpc instance_npcname("Gelka#24");
	disablenpc instance_npcname("Mingmin#24");
	disablenpc instance_npcname("Aigu#24");
	disablenpc instance_npcname("Lagi#24");
	disablenpc instance_npcname("Arang#24");
	disablenpc instance_npcname("Runane#24");
	disablenpc instance_npcname("Roel#24");
	disablenpc instance_npcname("Melody-Jack#24");
	disablenpc instance_npcname("Ferre#25");

	// Exit
	disablenpc instance_npcname("Newoz#05");
	disablenpc instance_npcname("Melody-Jack#05");
	disablenpc instance_npcname("Gelka#05");
	disablenpc instance_npcname("Runane#05");
	disablenpc instance_npcname("Roter#05");
	disablenpc instance_npcname("Aigu#05");
	disablenpc instance_npcname("Lagi#05");
	disablenpc instance_npcname("Arang#05");
	disablenpc instance_npcname("Roel#05");
	disablenpc instance_npcname("Mingmin#05");
	end;
}
