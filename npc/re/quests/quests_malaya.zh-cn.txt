//===== rAthena Script =======================================
//= Port Malaya Quest NPCs
//===== By: ==================================================
//= Euphy
//===== Current Version: =====================================
//= 1.3
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= [Official Conversion]
//= Quest NPCs related to Port Malaya:
//== Cautious Village, Port Malaya Daily Quests,
//== Secret in the Woods, Bakonawa Extermination
//== Nurse in Port Malaya, Pintados Festival
//= Merchants:
//== Traders, Upgrade Boss Equipment
//===== Additional Comments: =================================
//= 0.1 Traders only. Adapted from Masao's conversion. [Euphy]
//= 0.2 Added Tribe Blacksmith [DeadlySilence]
//= 0.3 Added "Secret in the Woods" quest [DeadlySilence]
//= 0.4 Added "Cautious Village" and subsequent quests [DeadlySilence]
//= 0.5 Added "Bakonawa Extermination" quest. [Euphy]
//= 1.0 Added "Nurse in Port Malaya" and "Pintados Festival" quests. [Euphy]
//= 1.1 Added GM management function and NPC. [Euphy]
//= 1.2 Added VIP features. [Euphy]
//= 1.3 Fixed Pintados Festival never ends. [Capuche]
//===== Translated By: =======================================
//= dsc
//============================================================

// Cautious Village & Daily Quests :: hi_malaya
//============================================================
malaya,266,76,3	script	Rodel the Guard#malaya	570,4,4,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi == 0) {
		mes "[守卫罗德尔]";
		mes "在如此混乱的时期旅行？";
		mes "最近，村民们越来越感受到邪灵的威胁。";
		mes "村民们惊恐万状，浑身颤抖。";
		next;
		mes "[守卫罗德尔]";
		mes "所以......马来亚港的公民在你身边会感到不舒服，尽管他们对你并没有什么不好的感觉。";
		mes "旅馆和车站可能不对外人开放。";
		next;
		mes "[守卫罗德尔]";
		mes "对此没有明确的解决方案，但您可能想先在孟巴基与 Phong 会面。";
		mes "如果村领导确认了，其他人也许就不会那么担心了。";
		next;
		mes "[守卫罗德尔]";
		mes "我将在地图上标记 Phong 在孟巴基的位置。";
		mes "尽管时势艰难，我仍欢迎您的光临。";
		viewpoint 1, 185, 358, 0, 0x0A82FF;
		set malaya_hi, 1;
		setquest 7350;
		close;
	} else if (malaya_hi == 1) {
		mes "[守卫罗德尔]";
		mes "首先在孟巴基与 Phong 会面。";
		mes "如果你被证明拥有纯洁的灵魂，其他村民就不会避开你。";
		mes "如果您不确定位置，我会在您的地图上标记它。";
		viewpoint 1, 185, 358, 0, 0x0A82FF;
		close;
	} else if (malaya_hi >= 20) {
		if (BaseLevel < 100) {
			mes "[守卫罗德尔]";
			mes "这里的生活怎么样？";
			mes "人没那么坏吧？";
			mes "如果你的技能多一点，可能会有一份适合你的工作。现在，你稍微低于标准。";
			next;
			mes "[守卫罗德尔]";
			mes "如果你变得更强，";
			mes "我正在考虑把正在城里执行的消灭任务交给你。真丢脸。";
			close;
		}
		.@playtime = checkquest(7405, PLAYTIME);
		if (.@playtime == 0) {
			mes "[守卫罗德尔]";
			mes "哇哦，多亏了你，我少了一件要担心的事。";
			mes "我会失去更少的东西。";
			mes "工作做得很好。";
			next;
			mes "[守卫罗德尔]";
			mes "如果你愿意的话可以回来。";
			mes "你明白我的意思吧？";
			close;
		} else if (.@playtime == 2) {
			erasequest 7405;
			mes "[守卫罗德尔]";
			mes "哦，关于你之前追捕的 Jejeling。";
			mes "进出巴约的人们对此感到高兴。";
			mes "如果不是太麻烦的话，我想再次请求你的帮助。";
			next;
			mes "[守卫罗德尔]";
			mes "你不必现在就这样做，只要你舒服的时候就可以。";
			mes "当你决定的时候就来找我吧。";
			close;
		} else {
			.@hunting = checkquest(7404, HUNTING);
			if (.@hunting == -1) {
				mes "[守卫罗德尔]";
				switch(rand(1, 6)) {
				case 1:
					mes "最近，又有几个人的勇敢得到了村民的认可。" + $malayaNames$[0] + "、" + $malayaNames$[3] + "、" + $malayaNames$[5] + "……是不是很神奇？";
					break;
				case 2:
					mes "昨天，我看到有人从公园的楼梯上滚下来，被送往医院。那个人的名字是" + $malayaNames$[1] + "。我想知道那个人还好吗。";
					break;
				case 3:
					mes "在 Jejeling 狩猎中贡献最大的人是" + $malayaNames$[1] + ".";
					break;
				case 4:
					mes "如果你无聊的话，你来守护我怎么样？这是一项艰巨的工作。你必须像雕像一样站着，直到太阳从你头顶升起。";
					break;
				case 5:
					mes "你在吉普尼车里单独和一个女人在一起过吗？哇，太尴尬了……我永远不会以这种速度结婚……";
					break;
				case 6:
					mes "最近，在来访者中，有一位成为了我的亲密朋友。你知道吗" + $malayaNames$[1] + "？哦，当然你也是好朋友。";
					break;
				}
				mes "哦，是的，如果你不太忙的话，有一份工作适合你。你有兴趣吗？";
				next;
				mes "[守卫罗德尔]";
				mes "这次我们要组织一次广泛的杰吉岭狩猎活动。";
				mes "进出巴约的小贩总是抱怨 Jejelings。";
				next;
				if (select("加入 Jejeling 狩猎。：拒绝。") == 2) {
					mes "[守卫罗德尔]";
					mes "是这样吗？听到这个消息我很遗憾。";
					mes "如果我们身边有一个像你这样的人，事情就会简单得多。";
					close;
				}
				mes "[守卫罗德尔]";
				mes "你只需每人猎杀 20 只杰杰林。";
				mes "这对你来说是一个简单的任务。";
				setquest 7404;
				close;
			} else if (.@hunting == 0) {
				mes "[守卫罗德尔]";
				mes "你必须除掉 20 个 Jejelings。";
				mes "20个应该足以让那些杰吉林人吓一跳了。";
				close;
			} else if (.@hunting == 1) {
				mes "[守卫罗德尔]";
				mes "哦，狩猎结束了，但你还没有杀死所有的杰吉林人。";
				mes "如果您想再尝试一次，请再来一次。";
				erasequest 7404;
				close;
			} else {
				mes "[守卫罗德尔]";
				mes "哦，我已经确认你消灭了 20 个 Jejelings。";
				mes "在这里，这是对参加 Jejeling 狩猎的人们的奖励。";
				next;
				mes "[守卫罗德尔]";
				mes "我想未来还会有更多的 Jejeling 狩猎活动。请下次再次加入我们。";
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				erasequest 7404;
				setquest 7405;
				if (rand(2))
					$malayaNames$[1] = strcharinfo(0);
//				SavePPL Jejellopy
				close;
			}
		}
	} else {
		mes "[守卫罗德尔]";
		mes "即使人们用警惕的目光看着你，也请理解。";
		mes "鬼魂一直困扰着这里的人们。";
		close;
	}
OnTouch:
	emotion ET_SURPRISE;
	end;

OnInit:
	// if there are no names set, set some default values
	if (!getarraysize($malayaNames$)) {
		$malayaNames$[0] = "unknown";
		$malayaNames$[1] = "unknown";
		$malayaNames$[2] = "unknown";
		$malayaNames$[3] = "unknown";
		$malayaNames$[4] = "unknown";
		$malayaNames$[5] = "unknown";
	}
	end;
}

malaya,185,358,3	script	Leader Phong in Mumbaki	580,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 2) {
		mes "[孟买的冯]";
		mes "看来这个灵魂遇到了一大片水域。";
		mes "年轻的朋友。";
		mes "你找到我的原因...是的...我明白了。";
		next;
		mes "[孟买的冯]";
		mes "你不必用语言说出来。";
		mes "人们对你过于谨慎。";
		mes "罗德尔大概是担心这件事，所以才派你来的。";
		next;
		if (malaya_hi == 0) {
			mes "[孟买的冯]";
			mes "不？";
			mes "那么也许我们之间存在某种精神纽带。";
			next;
		}
		mes "[孟买的冯]";
		mes "尽管如此，很高兴认识你，年轻的朋友。";
		mes "不要过多地责怪村民对你的态度。";
		next;
		mes "[孟买的冯]";
		mes "我们总是被灵魂包围。";
		mes "我们和他们住在一起，祈祷和平。";
		mes "但最近，出现了一个问题。";
		next;
		mes "[孟买的冯]";
		mes "由于某种未知的原因，";
		mes "鬼魂横行，邪灵一直困扰着村民。";
		next;
		mes "[孟买的冯]";
		mes "这是投在这座美丽小镇上的阴影。";
		mes "他们之所以小心翼翼，是因为他们不知道黑暗的阴影什么时候会降临到他们身上。";
		mes "他们在没有任何警告的情况下来访。";
		next;
		mes "^4d4dff孟巴基的Phong转过头，出现了黑影。";
		mes "人们惊慌失措，每个人都胆战心惊。^000000";
		cutin "malaya_ghost01", 4;
		next;
		select("走向阴影：拔出武器。");
		mes "[孟买的冯]";
		mes "他们追寻着外来者的踪迹。";
		mes "不要太关闭它们。";
		mes "你的灵魂会被吸收。";
		next;
		mes "[孟买的冯]";
		mes "唔？他们正在回应。";
		mes "我不明白？他们看起来很害怕，仿佛面对着一个强大的灵魂。";
		mes "这种感觉……不可能……";
		cutin "malaya_ghost02", 4;
		next;
		mes "^4d4dff就像孟巴基的 Phong 所说的那样，灵魂正在对某些事物做出反应，犹豫不决。";
		mes "观察他们的反应，你就更接近了。精神慌乱。^000000";
		next;
		cutin "", 255;
		mes "[孟买的冯]";
		mes "惊人的。拥有如此强大而纯洁的灵魂......！";
		mes "黑暗的灵魂因为你的存在而消失了。";
		next;
		mes "[孟买的冯]";
		mes "我想其他村民现在会以不同的方式对待你......";
		mes "我们不都见证了这个奇迹吗？";
		next;
		mes "[孟买的冯]";
		mes "年轻的朋友。任何地方都欢迎您的光临。";
		mes "来自你纯洁灵魂的光明将保护你免受黑暗的侵害。";
		set malaya_hi, 10;
		if (checkquest(7350) > -1)
			erasequest 7350;
		close;
	} else if (malaya_hi == 10) {
		mes "[孟买的冯]";
		mes "村里的每个人都见证了你的灵魂是多么坚强和纯洁。";
		mes "不要害怕黑暗。";
		close;
	} else if (malaya_hi == 11) {
		mes "[孟买的冯]";
		mes "有什么问题吗？";
		mes "你看起来很不安。";
		mes "你的衣服看起来也很乱。是不是遇到什么麻烦了？";
		next;
		switch (select("解释一下发生了什么：没什么好说的。")) {
		case 1:
			mes "[孟买的冯]";
			mes "是这样吗？";
			mes "哈哈……这是个大问题。";
			mes "你一定很担心。";
			next;
			mes "[孟买的冯]";
			mes "你知道，我们正在为";
			mes "村民们害怕恶灵……";
			mes "但准备工作并不顺利。";
			next;
			mes "[孟买的冯]";
			mes "作为临时解决方案，给他们想要的东西怎么样？";
			mes "只需选择您拥有的不重要的物品并将其交给他们即可。";
			next;
			mes "[孟买的冯]";
			mes "无论如何，他们想要的只是内心的平静。";
			mes "他们赋予小事以意义，并在这种行为中找到平静。";
			next;
			mes "[孟买的冯]";
			mes "真正重要的是相信只要携带该物品，您就会安全。";
			mes "如果人们可以通过抓住你的旧衬衫纽扣而不再害怕，那么那个纽扣就是一种精神保护。";
			next;
			mes "^4d4dff正如蒙巴基所说，赠送一些物品作为精神防护是个好主意。";
			mes "作为精神防护，什么才算足够……^000000";
			next;
			switch (select("圣水！：神圣的魔法物品蓝色宝石？！：书写用具或学习用品")) {
			case 1:
				mes "[孟买的冯]";
				mes "这个名字本身就暗示着圣洁。";
				mes "它受到了圣水的祝福，是吗？";
				mes "不错。";
				mes "还有另一个吗？更有说服力的东西会很好。";
				next;
				select("谈论蓝色宝石。");
				mes "[孟买的冯]";
				mes "啊哈...吸收诅咒或魔法效果后消失的石头而不是持有者。";
				mes "用于神圣魔法？";
				mes "听起来不错。";
				next;
				break;
			case 2:
				mes "[孟买的冯]";
				mes "啊哈...吸收诅咒或魔法效果后消失的石头而不是持有者。";
				mes "用于神圣魔法？";
				mes "但听起来并不那么神圣。";
				next;
				select("谈论圣水。");
				mes "[孟买的冯]";
				mes "这个名字本身就暗示着圣洁。";
				mes "它受到了圣水的祝福，是吗？";
				mes "听起来不错。";
				next;
				break;
			case 3:
				mes "[孟买的冯]";
				mes "唔？如果你总是随身携带它，那也不算太糟糕。";
				mes "但我认为看起来更有说服力的东西会更好。";
				next;
				mes "[孟买的冯]";
				mes "如果有一种神圣的感觉就更好了...";
				mes "你有得到神祝福的东西吗？";
				next;
				select("圣水还是蓝色宝石？");
				mes "[孟买的冯]";
				mes "这个名字本身就暗示着圣洁。";
				mes "它受到了圣水的祝福，是吗？";
				mes "保护持有者的石头...";
				mes "听起来很完美。";
				next;
				break;
			}
			mes "[孟买的冯]";
			mes "你能找到你所说的圣水和蓝色宝石吗？";
			mes "我在搞精神守护的时候，你就可以发放圣物了。";
			next;
			mes "[孟买的冯]";
			mes "如果你这样做，人们对你的信任就会增强。";
			mes "他们会信任并倾听您的意见。";
			mes "是的，因为你将成为他们心灵的救世主。";
			next;
			mes "^4d4dff在孟巴基听Phong的话，你决定向村民分发圣水和蓝色宝石。";
			set malaya_hi, 12;
			erasequest 7358;
			setquest 7351;
			close;
		case 2:
			mes "[孟买的冯]";
			mes "是这样吗？";
			mes "如果发生什么事请告诉我。";
			mes "对于你来说，我很乐意为你提供帮助";
			close;
		}
	} else if (malaya_hi == 12) {
		mes "[孟买的冯]";
		mes "你说的圣水和蓝色宝石效果很好。";
		mes "希望他们能这样抛开恐惧和担忧……";
		close;
	} else if (malaya_hi == 13) {
		mes "[孟买的冯]";
		mes "你把礼物送给大家了吗？";
		mes "通过这样做，你和镇上的每个人都成了朋友。";
		next;
		mes "[孟买的冯]";
		mes "我找到了建立精神保护的方法。";
		mes "我的孙子伊梅尔达将创造它。";
		mes "所以不用担心。你不必再交出任何东西。";
		erasequest 7365;
		set malaya_hi, 20;
		getexp 200000, 200000;
//		SavePPL Soul_Protection
		close;
	} else {
		mes "[孟买的冯]";
		switch(rand(1, 6)) {
		case 1:
			mes "曾经有一位旅行者和你一样勇敢。旅行者的名字是" + $malayaNames$[0] + "。你认识那个人吗？";
			break;
		case 2:
			mes "最近有一位旅行者在村里很受欢迎。旅行者的名字是" + $malayaNames$[0] + "。外人看来是非常有活力的。";
			break;
		case 3:
			mes "在我作为孟巴基人的一生中，我从未见过像孟巴基人那样纯洁和坚强的灵魂。" + $malayaNames$[0] + "的。是的，比你更强大、更纯粹。";
			break;
		case 4:
			mes "我亲眼目睹一位旅行者踩到果皮后向后翻转。" + $malayaNames$[1] + "。他大叫一声‘哎哟！请有人帮忙~'。我们都笑得很开心。";
			break;
		case 5:
			mes "欢迎！欢迎！这里随时欢迎您。";
			break;
		case 6:
			mes "我不知道你是否意识到这一点，但是" + $malayaNames$[0] + "甚至帮助了Baryo。知道周围多了一个善良的灵魂，我感到很高兴。";
			break;
		}
		next;
		switch (select("求指教：祝福鲜花...")) {
		case 1:
			if (malaya_diwata == 2) {
				mes "[孟买的冯]";
				mes "港口有轮渡吗？";
				mes "所以就发生了这样的事...";
				mes "重要的是首先找出孩子为什么如此不安。";
				next;
				mes "[孟买的冯]";
				mes "在这种情况下，贿赂就完美了。";
				mes "鲜花永远是勾引女人的最佳选择，不是吗？";
				next;
				select("这不是爱情咨询。");
				mes "[孟买的冯]";
				mes "我只是说说而已。";
				mes "不管是死是活，那个可怜的灵魂只是一个小女孩。";
				next;
				mes "[孟买的冯]";
				mes "这个年纪的女孩，即使看到落叶也会微笑。";
				mes "用一捧鲜花打开她的心扉。";
				next;
				mes "[孟买的冯]";
				mes "让我们来看看...";
				mes "^4d4dff3朵神秘之花，3朵优雅之花，3朵美丽之花^000000足以制作一束花束。";
				next;
				mes "[孟买的冯]";
				mes "收集这些花，我会用它制作花束并祝福它。";
				mes "村外可以找到鲜花。";
				set malaya_diwata, 3;
				erasequest 7396;
				setquest 7397;
				close;
			} else if (malaya_diwata == 3) {
				if ((countitem(6509) < 3) || (countitem(6510) < 3) && (countitem(6511) < 3)) {
					mes "[孟买的冯]";
					mes "有^4d4dff3朵神秘花、3朵优雅花、3朵漂亮花^000000。";
					mes "你明白吗？";
					close;
				}
				mes "[孟买的冯]";
				mes "哦……我从这里就闻到了花香。";
				mes "我会收集这些并祝福他们。";
				next;
				mes "-孟巴基的 Phong 将鲜花小心地扎成花束后进行祝福仪式。-";
				mes "-只要看着它，圣洁就会压倒你。-";
				next;
				mes "[孟买的冯]";
				mes "是不是很美呢？";
				mes "对于一个老人来说，这还不错吧？";
				mes "我以前做了很多供花束，现在闭着眼睛也能做一束。";
				next;
				mes "[孟买的冯]";
				mes "现在，把这个交给那个孩子。";
				mes "我希望她能借此敞开心扉，愿意与你交谈。";
				delitem 6509, 3; // Mysterious_Flower
				delitem 6510, 3; // Elegant_Flower
				delitem 6511, 3; // Beautiful_Flower
				getitem 6506, 1; // Memorial_Bouquet
				set malaya_diwata, 4;
				erasequest 7397;
				setquest 7398;
				close;
			} else if (malaya_diwata == 4) {
				mes "[孟买的冯]";
				mes "拿着这束花，与栖息在船上的灵魂交谈。";
				close;
			} else if (malaya_diwata > 5) {
				mes "[孟买的冯]";
				mes "看到不幸的灵魂真是可惜……就像渡轮事件一样。";
				mes "如果您要为烈酒献花束，我总是愿意提供帮助。";
				close;
			} else {
				mes "[孟买的冯]";
				mes "这位老人什么也不能告诉你。";
				mes "没有什么比保持健康更重要的了，对吧？";
				close;
			}
		case 2:
			if (checkquest(7402) == -1) {
				mes "[孟买的冯]";
				mes "献花献给谁？";
				mes "别告诉我你因为懒才提前做一个？";
				mes "致敬必须是真诚的。别忘了这一点。";
				close;
			}
			if (countitem(6506) > 0) {
				mes "[孟买的冯]";
				mes "不是已经做好了吗？";
				mes "你手里那是什么？";
				mes "你为什么站在这儿？去把那些花送给大家吧。";
				close;
			}
			if ((countitem(6509) < 3) || (countitem(6510) < 3) || (countitem(6511) < 3)) {
				mes "[孟买的冯]";
				mes "要去迪瓦塔吗？";
				mes "你需要神秘之花、优雅之花、美丽之花，各3个，好吗？";
				mes "等花准备好了我就去办。";
				close;
			}
			mes "[孟买的冯]";
			mes "Diwata 是个女人。";
			mes "你每天去找她也是很重要的事情。";
			next;
			mes "[孟买的冯]";
			mes "嘿，这是花束。";
			mes "用你的灵魂进行供养，并祝愿有一个丰硕的一天。";
			delitem 6509, 3; // Mysterious_Flower
			delitem 6510, 3; // Elegant_Flower
			delitem 6511, 3; // Beautiful_Flower
			getitem 6506, 1; // Memorial_Bouquet
			close;
		}
	}
}

malaya,169,350,5	script	Imelda#malaya	475,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[伊梅尔达]";
		mes ".... 唔。";
		close;
	} else if (malaya_hi < 20) {
		mes "[伊梅尔达]";
		mes "..........";
		mes "不错。";
		mes "我的目光注视着你。让我们看看你在这个镇上的表现如何..*咯咯*";
		next;
		mes "- 她是一个相当烦人的小女孩。 -";
		close;
	} else if (malaya_hi == 20) {
		mes "[伊梅尔达]";
		mes "你不是最近用廉价的外国圣器讨好村民的英雄吗？";
		mes "这是怎么回事？";
		next;
		select ("你想要进行传统的精神守护吗？");
		mes "[伊梅尔达]";
		mes "是的。我爷爷找到了一个办法。";
		mes "我会成功的。";
		next;
		mes "[伊梅尔达]";
		mes "这是我的工作，与其他人无关。";
		mes "保护传统是我的工作。";
		next;
		switch (select("是这样吗？：祝你自己好运！")) {
		case 1:
			if (BaseLevel < 100) {
				mes "[伊梅尔达]";
				mes "当然。";
				mes "向像你这样软弱的人寻求帮助并不是一个好主意。";
				next;
				mes "[伊梅尔达]";
				mes "获取材料并不像听起来那么容易。";
				mes "也许当你变得更强时，是的，但不是现在。绝不。";
				close;
			}
			mes "[伊梅尔达]";
			mes "然后呢？";
			mes "你要去拿材料吗？";
			mes "好吧我就接受你的提议。";
			next;
			select ("....?!");
			mes "[伊梅尔达]";
			mes "既然你这么想帮我，为什么一开始就不说呢？";
			mes "或者问我爷爷？";
			next;
			mes "[伊梅尔达]";
			mes "如果你这么热衷于制作精神守护的话。";
			mes "我必须放弃，不是吗？";
			next;
			mes "[伊梅尔达]";
			mes "现在，需要的材料是^4d4dff6根尖竹子、6个盐袋和6个银十字架^000000。";
			next;
			mes "[伊梅尔达]";
			mes "您必须在西北海滩自己制造盐。";
			mes "你会发现我在那里挖的坑。";
			next;
			mes "[伊梅尔达]";
			mes "前往银色十字军武器店的 Pandoi。";
			mes "他答应给我做一些。";
			next;
			mes "[伊梅尔达]";
			mes "您可以在巴约或附近的森林中获得削尖的竹子。";
			mes "这些你都明白了吗？";
			next;
			mes "[伊梅尔达]";
			mes "现在是证明你实力的时候了！";
			set malaya_hi, 21;
			setquest 7366;
			close;
		case 2:
			mes "[伊梅尔达]";
			mes "的确。";
			mes "我来保护村庄！";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "现在我还没有看到用它们做出任何精神防护！";
			mes "有趣~";
			mes "相信你一定会做得很好的~";
			mes "哈哈哈哈~";
			next;
			mes "[伊梅尔达]";
			mes "别再烦我了，走开吧！";
			close;
		}
	} else if (malaya_hi == 21) {
		if ((countitem(6501) < 6) || (countitem(6500) < 6) || (countitem(6502) < 6)) {
			mes "[伊梅尔达]";
			mes "只要你带上所有精神守护的材料，我就认可你的资格！";
			next;
			mes "[伊梅尔达]";
			mes "制造村庄的盐成就。";
			mes "请 Pandoi 制作银十字架。";
			mes "别忘了每样都买 6 个。";
			close;
		}
		mes "[伊梅尔达]";
		mes "……哦……天啊，你真的拿到了？";
		mes "你比我想象的还要好。";
		mes "这根本就不是恭维啊！";
		next;
		mes "[伊梅尔达]";
		mes "现在我正在进行神圣仪式，进行传统的精神守护。";
		mes "把它们给我！并且在这个过程中不要打扰我！";
		set malaya_hi, 22;
		delitem 6500, 6; // Sharp_Bamboo
		delitem 6501, 6; // Salt_Bag
		delitem 6502, 6; // Silver_Cross
		erasequest 7366;
		setquest 7367;
		close;
	} else if (malaya_hi == 22) {
		.@playtime = checkquest(7367, PLAYTIME);
		if (.@playtime == 0 || .@playtime == 1) {
			mes "与她在直播中谩骂时相比，伊梅尔达在仪式中充满了虔诚的气息。";
			mes "最好别打扰她。";
			close;
		} else if (.@playtime == 2) {
			mes "[伊梅尔达]";
			mes "还在这里吗？";
			mes "当然，你想看看我的精神防护比那件廉价圣器要好多少。";
			next;
			mes "[伊梅尔达]";
			mes "美好的。";
			mes "现在就去给人们这些精神上的保护吧！";
			mes "您拥有这样做的所有权利！";
			mes "*咯咯笑*";
			next;
			mes "尽管她的逻辑和气力可笑，但还是接受了精神保护。";
			mes "我们把它们送给村民吧。";
			set malaya_hi, 23;
			getitem 6503, 6; // Soul_Protection
			erasequest 7367;
			setquest 7368;
			setquest 7369;
			setquest 7370;
			setquest 7371;
			setquest 7372;
			setquest 7373;
			setquest 7374;
			close;
		} else {
			mes "[伊梅尔达]";
			mes "不要打扰仪式并走开。";
			mes "请稍等，我正在进行精神防护。";
			setquest 7367;
			close;
		}
	} else if (malaya_hi == 23) {
		mes "[伊梅尔达]";
		mes "获得精神守护的人都在名单上。";
		mes "去给他们新的精神保护";
		next;
		mes "[伊梅尔达]";
		mes "像你这样善良的人一定会这么做的，不是吗？";
		mes "*傻笑*";
		close;
	} else if (malaya_hi == 24) {
		mes "[伊梅尔达]";
		mes "……你真的按照我的要求做了吗？";
		mes "你知道吗？我放弃。";
		mes "我以为你从这个镇上甜言蜜语地得到一些东西后就会离开……";
		next;
		mes "[伊梅尔达]";
		mes "我为我的粗鲁行为道歉。";
		mes "……这与道歉是相辅相成的。";
		next;
		mes "[伊梅尔达]";
		mes "如果你能帮助我，我会很高兴，因为精神保护需要每天进行。";
		set malaya_hi, 25;
		erasequest 7374;
		erasequest 7379;
		setquest 7375;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 6497, 2; // Lesser_Agimat
		else
			getitem 6497, 1; // Lesser_Agimat
		getexp 200000,200000;
		if (rand(2))
			$malayaNames$[0] = strcharinfo(0);
		close;
	} else {
		mes "[伊梅尔达]";
		mes "你好呀。";
		mes "你喜欢马来亚的风景吗？";
		mes "在吉普尼车上和朋友聊天真是太好了。";
		next;
		switch (select("我将帮助您进行精神保护。：对所有人的爱和精神保护。")) {
		case 1:
			if (checkquest(7380) > -1) {
				if ((countitem(6501) < 6) || (countitem(6502) < 6) || (countitem(6500) < 6)) {
					mes "[伊梅尔达]";
					mes "制作精神守护的材料有";
					mes "盐袋、银十字架和削尖的竹子，各 6 个。";
					next;
					mes "[伊梅尔达]";
					mes "盐来自西北海滩，银十字来自潘多伊，尖竹来自巴约附近。";
					close;
				}
				mes "[伊梅尔达]";
				mes "是的，你准确地了解了一切。";
				mes "感谢您的帮助。";
				next;
				mes "[伊梅尔达]";
				mes "如果明天你能再次帮忙就好了。";
				mes "这里有一些东西可以解决你的麻烦。";
				delitem 6500, 6; // Sharp_Bamboo
				delitem 6501, 6; // Salt_Bag
				delitem 6502, 6; // Silver_Cross
				erasequest 7380;
				setquest 7381;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				close;
			} else {
				.@playtime = checkquest(7381, PLAYTIME);
				if ((.@playtime == 0) || (.@playtime == 1)) {
					mes "[伊梅尔达]";
					mes "我很感激你的好意，但今天我们已经够了。";
					mes "当我需要更多材料时我会问你。";
					close;
				} else if (.@playtime == 2) {
					mes "[伊梅尔达]";
					mes "时机非常好。";
					mes "今天的精神保护材料已经用完了。";
					mes "你现在可以去找他们吗？";
					erasequest 7381;
					next;
					switch (select("当然。：我需要一些准备。")) {
					case 1:
						mes "[伊梅尔达]";
						mes "那就和往常一样。";
						mes "6 个盐袋。请给我银十字架和削尖的竹子。";
						setquest 7380;
						close;
					case 2:
						mes "[伊梅尔达]";
						mes ".......我懂了。";
						mes "那我就等着吧。";
						close;
					}
				} else {
					mes "[伊梅尔达]";
					mes "这确实是个好消息。";
					mes "你知道进行精神防护需要什么吗？";
					mes "当然，这不是你第一次...";
					next;
					mes "[伊梅尔达]";
					mes "那我就把它留给你了。";
					mes "6 个盐袋。请给我银十字架和削尖的竹子。";
					setquest 7380;
					close;
				}
			}
		case 2:
			if (checkquest(7374) != -1) {
				if (checkquest(7379) == -1) {
					mes "[伊梅尔达]";
					mes "请把这些新的精神保护传递给村民。";
					mes "你认识他们，对吧？";
					close;
				}
				mes "[伊梅尔达]";
				mes "他们不可能永远依赖这些精神守护……";
				mes "拥有像你这样坚强的头脑会好得多。";
				next;
				mes "[伊梅尔达]";
				mes "强大的精神充满了光明。";
				mes "由于耀眼的光芒，黑暗者无法接近";
				next;
				mes "[伊梅尔达]";
				mes "我想今天就这样了。";
				mes "非常感谢。";
				setquest 7375;
				erasequest 7374;
				erasequest 7379;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (rand(2))
					$malayaNames$[0] = strcharinfo(0);
				close;
			} else {
				.@playtime = checkquest(7375, PLAYTIME);
				if (.@playtime == 0 || .@playtime == 1) {
					mes "[伊梅尔达]";
					mes "之前给予的精神防护仍然有效";
					mes "现在还好。";
					close;
				} else if (.@playtime == 2) {
					mes "[伊梅尔达]";
					mes "我想知道你什么时候过来。";
					mes "今天您能为人们提供精神上的保护吗？";
					erasequest 7375;
					next;
					if (select("当然。：今天不行。") == 2) {
						mes "[伊梅尔达]";
						mes "是的。";
						mes "今天何不去马来亚散步呢？";
						mes "当然，你还是会时不时地遇到鬼魂。";
						close;
					}
					if ((checkquest(7381) == 0) || (checkquest(7381) == 1)) {
						mes "[伊梅尔达]";
						mes "非常感谢。";
						mes "等你把它们都给完后再回来。";
						setquest 7374;
						setquest 7368;
						setquest 7369;
						setquest 7370;
						setquest 7371;
						setquest 7372;
						setquest 7373;
						getitem 6503, 6; // Soul_Protection
						close;
					} else {
						mes "[伊梅尔达]";
						mes "感谢您的关心，但我无法制作，因为我的材料用完了。";
						mes "耻辱，不是吗？";
						mes "我真希望有人愿意帮我拿走它们。";
						close;
					}
				} else {
					mes "[伊梅尔达]";
					mes "你平安吗？从这里我一路都能感受到你的平静。";
					mes "你想为我多花点时间吗？";
					next;
					mes "[伊梅尔达]";
					mes "你能帮我把这些精神护身符送给村民吗？";
					next;
					switch (select("是的：今天不行。") == 2) {
						mes "[伊梅尔达]";
						mes "是的。";
						mes "今天何不去马来亚散步呢？";
						mes "当然，你还是会时不时地遇到鬼魂。";
						close;
					}
					if ((checkquest(7381, PLAYTIME) == 0) || (checkquest(7381, PLAYTIME) == 1)) {
						mes "[伊梅尔达]";
						mes "非常感谢。";
						mes "等你把它们都给完后再回来。";
						setquest 7374;
						setquest 7368;
						setquest 7369;
						setquest 7370;
						setquest 7371;
						setquest 7372;
						setquest 7373;
						getitem 6503, 6; // Soul_Protection
						close;
					} else {
						mes "[伊梅尔达]";
						mes "感谢您的关心，但我无法制作，因为我的材料用完了。";
						mes "耻辱，不是吗？";
						mes "我真希望有人愿意帮我拿走它们。";
						close;
					}
				}
			}
			break;
		}
	}
	end;
}

malaya,181,353,5	script	Old Man Nardo#malaya	574,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[纳尔多老人]";
		mes ".......";
		mes "我看，不是从这里来的。我无话可说。";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7353) == 2) {
			mes "[纳尔多老人]";
			mes "为一位贫穷的老人伸出援助之手怎么样？";
			mes "我不在乎这只是你衬衫的一个袖子，只要用你的活力给我一些东西就可以了。";
			next;
			mes "[纳尔多老人]";
			mes "你知道，我现在离开的时间不远了...";
			mes "帮助我一路平安。";
			close;
		} else {
			mes "[纳尔多老人]";
			mes "你……你！！";
			mes "你就是那个拥有如此强大精神力抵挡黑暗鬼魂的年轻人？！";
			mes "是否可以...可以与我分享一些你的精神？";
			next;
			mes "[纳尔多老人]";
			mes "由于镇上有恶作剧的鬼魂，我很难入睡，下雨时我的背也会痛。";
			next;
			mes "[纳尔多老人]";
			mes "请与我分享你那神奇的精神。";
			mes "只用你的一个按钮怎么样？";
			next;
			mes "-陷入困境的村民想要你的财物，因为你抵御了鬼魂。 -";
			setquest 7353;
			completequest 7353;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "-很多人已经问过你这个了。也许最好与孟巴基的 Phong 交谈。-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[" + strcharinfo(0) + "]";
		mes "如果我现在跟他说话，他会扒掉我所有的扣子。";
		mes "必须先咨询Mumbaki！";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7360) != -1) {
			mes "[纳尔多老人]";
			mes "说实话，我不相信这件圣器有什么能力。";
			mes "这只是为了内心的平静。";
			next;
			mes "[纳尔多老人]";
			mes "然而，我现在对你的看法不同了";
			mes "仅仅因为某人是局外人而将其排除在外似乎不再是一个好主意。";
			mes "很抱歉我忽略了你。";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备并给予蓝色宝石和圣水。 ^000000";
			close;
		}
		mes "[纳尔多老人]";
		mes "那么，你改变了分享精神的想法吗？";
		next;
		select("交出准备好的物品。");
		mes "[纳尔多老人]";
		mes "啊……谢谢。";
		mes "现在我可以平静一段时间了……";
		mes "……和平总是好的。是的。";
		next;
		mes "- 将圣水和蓝色宝石交给老人纳尔多。-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7360;
		completequest 7360;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "――老夫最后，已经发放了足够多的圣物了――";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if ((malaya_hi > 12) && (malaya_hi < 20)) {
		mes "[纳尔多老人]";
		mes "说实话，我不相信这件圣器有什么能力。";
		mes "这只是为了内心的平静。";
		next;
		mes "[纳尔多老人]";
		mes "当你有时间的时候，能帮我做点什么吗？";
		mes "我现在很好……我是说以后。";
		close;
	} else {
		mes "[纳尔多老人]";
		switch(rand(1, 6)) {
		case 1:
			mes "你认识卡普雷吗？我听说" + $malayaNames$[1] + "旅行者正在帮助卡普雷......无论如何......";
			break;
		case 2:
			mes "现在有很多精神保护。 " + $malayaNames$[0] + "热衷于给予精神保护。这是你来自的地方的传统吗？";
			break;
		case 3:
			mes "听说商家之间有" + $malayaNames$[1] + "？这个名字似乎经常出现。看来他在生意上很有天赋。";
			break;
		case 4:
			mes "有一次，我看到一个旅行者踩到一块水果滑倒了。 '有人帮忙" + $malayaNames$[1] + "～”他喊道，这让我哈哈大笑。";
			break;
		case 5:
			mes "啊，又是你吗？感谢当时的帮助。";
			break;
		case 6:
			mes "我听说" + $malayaNames$[2] + "在巴约很有名。你为什么不尝试一下出名呢？";
			break;
		}
		mes "它是什么？";
		next;
		switch (select("说：给予精神保护：老人与铸铁锅")) {
		case 1:
			mes "[纳尔多老人]";
			mes "马来亚港是一座美丽的城市。";
			mes "新旧完美和谐。";
			next;
			mes "[纳尔多老人]";
			mes "当然，最近的问题是鬼魂想知道......";
			mes "你和其他年轻人正在为此努力，这让我感到欣慰。";
			mes "谢谢。";
			close;
		case 2:
			if ((checkquest(7374) != -1) && (checkquest(7369) != -1)) {
				if (!countitem(6503)) {
					mes "^4d4dff没有任何精神保护可以给予老人。^000000";
					close;
				}
				mes "[纳尔多老人]";
				mes "这难道是用传统方法炼制出来的新的精神守护？";
				mes "我很感激你能用新的替换掉我的。";
				mes "我一直欠你和伊梅尔达的情。";
				next;
				mes "-为纳尔多老人提供精神保护。-";
				delitem 6503, 1; // Soul_Protection
				erasequest 7369;
				setquest 7383;
				if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
					mes "――老夫最后，所有的精神防护都已交付。返回伊梅尔达身边。-";
					if (malaya_hi == 23) {
						set malaya_hi, 24;
					}
					setquest 7379;
					erasequest 7382;
					erasequest 7383;
					erasequest 7384;
					erasequest 7385;
					erasequest 7386;
					erasequest 7387;
				}
				close;
			} else {
				mes "[纳尔多老人]";
				mes "什么？新的精神守护？";
				mes "我没事。我还留着你之前给我的那个。";
				mes "当这件用完后，你能给我一件新的吗？";
				close;
			}
			break;
		case 3:
			if (BaseLevel < 100) {
				mes "[纳尔多老人]";
				mes "嗯...你看起来不够强壮，无法前往巴约。";
				mes "很抱歉，我不能让你携带珍贵的铸铁鼎。";
				close;
			}
			if ((checkquest(7378, PLAYTIME) == 0) || (checkquest(7378, PLAYTIME) == 1)) {
				mes "[纳尔多老人]";
				mes "您已将铸铁大锅交付给巴约，今天就足够了。";
				mes "无论多么坚固的鼎，即使是最坚韧的铸铁，也只能维持一天。";
				next;
				mes "[纳尔多老人]";
				mes "如果可以的话明天再帮我一下。";
				close;
			} else if (checkquest(7378, PLAYTIME) == 2) {
				mes "[纳尔多老人]";
				mes "嘿！";
				mes "那么，你吃得饱饱吗？";
				mes "有时间的话再回来吧。";
				next;
				mes "[纳尔多老人]";
				mes "这是关于铸铁大锅的，但它可以等到你当前的差事之后。";
				erasequest 7378;
				close;
			 } else {
				if (checkquest(7377) != -1) {
					if (countitem(6503) < 5) {
						mes "[纳尔多老人]";
						mes "你把大锅是一整块寄过来的吗？";
						mes "孟巴基的基科应该给你精神上的保护。你有吗？";
						mes "你一定把它落在某个地方了。请去拿一下。";
						close;
					}
					mes "[纳尔多老人]";
					mes "好的。这是基科在孟巴基承诺的精神保护作为回报。";
					mes "我知道伊梅尔达制作了它们，你每天都带来它们，但精神保护越多越好。";
					next;
					mes "[纳尔多老人]";
					mes "请再次过来。";
					mes "我总是准备巴约所需的铸铁大锅。";
					delitem 6503, 5; // Soul_Protection
					setquest 7378;
					erasequest 7377;
					if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
						getitem 6497, 2; // Lesser_Agimat
					else
						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					if (!rand(3))
						$malayaNames$[2] = strcharinfo(0);
					close;
				} else {
					if (checkquest(7376) > -1) {
						mes "[纳尔多老人]";
						mes "前往孟巴基 Mahiwaga 村的 kiko 并交付铸铁大锅。";
						mes "这应该有助于解决巴科纳瓦的麻烦。";
						close;
					} else {
						mes "[纳尔多老人]";
						mes "是的，铸铁锅。";
						mes "前往孟巴基 Mahiwaga 村的 kiko 并交付铸铁大锅。";
						mes "我希望你为我做...";
						next;
						switch (select("铸铁大锅??：我会做的。：我现在很忙。")) {
						case 1:
							mes "[纳尔多老人]";
							mes "这是因为巴科纳瓦。";
							mes "敲响大锅，惊讶的巴科纳瓦吐出了月亮。";
							next;
							mes "[纳尔多老人]";
							mes "Baryo Mahiwaga 离 Bakonawa 住的地方很近，所以他们总是做好应对麻烦的准备。";
							next;
							mes "[纳尔多老人]";
							mes "必须准备足够的铸铁大锅用于敲打。";
							mes "但这里的锻造厂更好。";
							mes "所以我每天都会送货。";
							close;
						case 2:
							mes "[纳尔多老人]";
							mes "这就是铸铁锅。他们在马来亚有优秀的铁匠。";
							mes "交付这个 Kiko。";
							setquest 7376;
							getitem 6504, 5; // Cast_Iron_Caldron
							close;
						case 3:
							mes "[纳尔多老人]";
							mes "是这样吗。";
							mes "抱歉，你一定很忙。";
							close;
						}
					}
				}
			}
			break;
		}
	}
	end;
}

malaya,224,267,3	script	Romel#malaya	573,{
	if (malaya_hi < 10) {
		mes "[罗梅尔]";
		mes ".........";
		mes " ";
		mes "（他避开你的目光并无视你。）";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7357) == 2) {
			mes "[罗梅尔]";
			mes "……真是冷酷无情啊。";
			mes "而我们在这里，总是在焦虑中颤抖……";
			next;
			mes "[罗梅尔]";
			mes "连内心的平静都不允许……";
			close;
		} else {
			mes "[罗梅尔]";
			mes "啊……";
			mes "... 你..";
			mes "很抱歉我忽略了你。";
			mes "但是……他们说的一定是你……";
			next;
			mes "[罗梅尔]";
			mes "你是抵御鬼魂的人吗？";
			mes "如果你同意的话，可以给我一件你的东西或者一些头发吗？";
			next;
			mes "[罗梅尔]";
			mes "我想带着它...就像某种护身符一样。";
			next;
			mes "-陷入困境的村民想要你的财物，因为你抵御了鬼魂。 -";
			setquest 7357;
			completequest 7357;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 很多人已经问过你这个了。也许最好与孟巴基的 Phong 交谈。-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "罗梅尔一脸悲伤地看着你。";
		mes "只要他愿意，他一定会拔一根头发，拉一根袖子！";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7364) != -1) {
			mes "[罗梅尔]";
			mes "说白了，就是为了心安。";
			mes "有了它，我就能更加勇敢地面对他们了。";
			next;
			mes "[罗梅尔]";
			mes "我的意思是，我依赖这些东西，";
			mes "但和他们在一起我更勇敢。";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备并给予蓝色宝石和圣水。 ^000000";
			close;
		}
		mes "[罗梅尔]";
		mes "……那是什么？";
		next;
		select ("把准备好的东西递给他");
		mes "[罗梅尔]";
		mes "哦...谢谢你。";
		mes "我能感受到你的精神。";
		mes "这会让我安全。";
		next;
		mes "[罗梅尔]";
		mes "嘿...你能也给我女儿一些吗？";
		next;
		mes "- 给了罗梅尔准备好的圣水和蓝色宝石。-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7364;
		completequest 7364;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-罗梅尔是最后一个，我认为已经提供了足够的圣物。-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[罗梅尔]";
		mes "圣物被妥善保管。";
		mes "我女儿也一样。";
		close;
	} else {
		mes "[罗梅尔]";
		mes "你好呀。";
		switch(rand(1, 6)) {
		case 1:
			mes "哈哈，我昨晚做了一个梦，你看，里面有" + $malayaNames$[0] + "在梦中。哈哈……确实奇怪……";
			break;
		case 2:
			mes "有时，我妻子在睡梦中会发出这些声音。" + $malayaNames$[0] + "... " + $malayaNames$[0] + "……她说。是谁？你知道吗？！难道她被鬼附身了？";
			break;
		case 3:
			mes  "这一切都归功于" + $malayaNames$[0] + "来改变房子的气氛。看来我们是被圣器和精神守护拯救了。";
			break;
		case 4:
			mes  "邻近的巴约马希瓦加（Baryo Mahiwaga）的人民是如此强大。甚至他们的孩子也在森林里玩耍。我无法想象自己会这么做。";
			break;
		case 5:
			mes  "毫无疑问，镇上最有名的人是" + $malayaNames$[2] + "。他们说甚至在巴约很有名。";
			break;
		case 6:
			mes  "商人Woeon在喝酒时说“我们的" + $malayaNames$[1] + "先生/女士”“我们" + $malayaNames$[1] + "先生/女士”。我想知道他们两个之间到底发生了什么？";
			break;
		}
		next;
		if (select("给予精神保障：怎么样？") == 2) {
			mes "[罗梅尔]";
			mes "这些天我很平静。";
			close;
		}
		if ((checkquest(7374) == -1) || (checkquest(7373) == -1)) {
			mes "[罗梅尔]";
			mes "新的精神守护？";
			mes "你之前给我的那个现在还可以用。";
			mes "我现在还好。";
			close;
		}
		if (!countitem(6503)) {
			mes "^4d4dff没有任何精神保护可以给予罗梅尔。^000000";
			close;
		}
		mes "[罗梅尔]";
		mes "新的精神保护。";
		mes "我以为这个已经磨损了...谢谢您的光临。";
		mes "这种精神上的保护也会保护我们。";
		next;
		mes "- 为罗梅尔提供精神保护。-";
		delitem 6503, 1; // Soul_Protection
		erasequest 7373;
		setquest 7387;
		if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
			mes "- 罗梅尔最后一个，所有的精神防护都已交付。返回伊梅尔达身边。-";
			if (malaya_hi == 23) {
				set malaya_hi, 24;
			}
			setquest 7379;
			erasequest 7382;
			erasequest 7383;
			erasequest 7384;
			erasequest 7385;
			erasequest 7386;
			erasequest 7387;
		}
		close;
	}
	end;
}

malaya,223,267,5	script	Talah#malaya	941,{
	if (malaya_hi < 10) {
		mes "[塔拉]";
		mes "..........喘气！";
		mes " ";
		mes "（当你的目光与她的目光相遇时，她跑到了她父亲身后。）";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7356) == 2) {
			mes "[塔拉]";
			mes "塔拉今晚可能会被带走。";
			mes "可怕的孩子可能会来到塔拉。";
			next;
			mes "当塔拉拉拉罗梅尔的衬衫时，罗梅尔用悲伤的目光看着你。";
			mes "最好在他们拿走你的按钮之前做点什么......";
			close;
		} else {
			mes "[塔拉]";
			mes "……我……嗯……那个……";
			mes "……哦……爸爸……";
			next;
			mes "[罗梅尔]";
			mes "嘿，你能给我女儿一颗纽扣或者你的一些头发吗？";
			mes "她晚上睡不着觉......";
			next;
			mes "[罗梅尔]";
			mes "如果她有你送的东西当护身符，她会睡不好觉吗？";
			next;
			mes "- 陷入困境的村民想要你的财物，因为你抵御了鬼魂。 -";
			setquest 7356;
			completequest 7356;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 很多人已经问过你这个了。也许最好在孟巴基与 Phong 交谈。 -";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "塔拉用好奇的目光看看你，又看看她的父亲。";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7363) != -1) {
			mes "[塔拉]";
			mes "我不确定";
			mes "但我从他们身上感受到了温暖。";
			mes "爸爸现在更加勇敢了，这也让塔拉变得更加坚强。";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备并给予蓝色宝石和圣水。 ^000000";
			close;
		}
		mes "[塔拉]";
		mes "....我可以打个招呼吗？";
		mes "你好呀...";
		next;
		select("交出准备好的物品。");
		mes "[塔拉]";
		mes "漂亮的蓝色石头...！";
		mes "哦哦~他们好漂亮！";
		mes "这块石头能保证塔拉的安全吗？";
		next;
		mes "- 将圣水和蓝色宝石交给塔拉。 -";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7363;
		completequest 7363;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后是塔拉，我认为已经提供了足够的圣物。-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[塔拉]";
		mes "爸爸让我紧紧抓住圣器。";
		mes "所以它可以驱除恶鬼...";
		close;
	} else {
		mes "[塔拉]";
		mes "你好...";
		next;
		if (select("给予精神上的保护：嗨？") == 2) {
			mes "[塔拉]";
			mes "...嘿...谢谢你。";
			mes "你在保护我们的安全不是吗？";
			close;
		}
		if ((checkquest(7374) != -1) && (checkquest(7372) != -1)) {
			if (!countitem(6503)) {
				mes "^4d4dff没有任何精神保护可以给予塔拉。^000000";
				close;
			}
			mes "[塔拉]";
			mes "这是新的精神守护吗？";
			mes "谢谢。";
			mes "有了精神保护，塔拉现在可以睡个好觉了。";
			mes "爸爸也喜欢。";
			next;
			mes "- 为塔拉提供新的精神保护。-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7372;
			setquest 7386;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "- 以塔拉为最后，所有的精神保护都已交付。返回伊梅尔达。 -";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		} else {
			mes "[塔拉]";
			mes "嗯...";
			mes "你之前给的那个仍然可以保证塔拉的安全。";
			mes "我没事。";
			close;
		}
	}
	end;
}

malaya,62,274,0	script	Sand Trap#malaya	557,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if ((checkquest(7366) == -1) && (checkquest(7380) == -1)) {
		mes "沙子里埋着一个蒸发海水的装置……";
		close;
	}
	if (countitem(6501) >= 6) {
		mes "盐够了。";
		close;
	}
	mes "沙坑内安装有蒸发海水的装置。";
	next;
	mes "可以从干叶子上刮掉盐";
	mes "有人散落在海水上。";
	close2;
	progressbar "0xffff00", 5;
	disablenpc();
	initnpctimer;
	getitem 6501, 1; // Salt_Bag
	mes "[" + strcharinfo(0) + "]";
	mes "这应该足够了。";
	close;

OnTimer30000:
	enablenpc();
	stopnpctimer;
	end;
}
malaya,66,277,0	duplicate(Sand Trap#malaya)	Sand Trap#malaya01	557
malaya,70,282,0	duplicate(Sand Trap#malaya)	Sand Trap#malaya02	557

ma_fild01,178,206,0	script	Black Bamboo#malaya	844,4,4,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if ((checkquest(7366) == -1) && (checkquest(7380) == -1)) {
		mes "有一棵又矮又黑的竹树。";
		close;
	}
	if (countitem(6500) >= 6) {
		mes "削尖的竹子够多了...";
		close;
	}
	mes "这里有竹子，还有黑色的藤条和树叶。";
	mes "如果将其中一些切掉并磨尖，我想这足以满足伊梅尔达想要的磨尖竹子了。";
	close2;
	progressbar "0xffff00", 3;
	disablenpc();
	initnpctimer;
	getitem 6500, 1; //Sharp_Bamboo
	mes "[" + strcharinfo(0) + "]";
	mes "我知道我能做到！";
	close;
OnTouch_:
	if ((checkquest(7366) != -1) || (checkquest(7380) != -1)) {
		specialeffect EF_LEVEL99_4;
	}
	end;
OnTimer30000:
	enablenpc();
	stopnpctimer;
	end;
}
ma_fild01,225,186,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya01	844,4,4
ma_fild01,230,244,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya02	844,4,4
ma_fild01,174,238,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya03	844,4,4
ma_fild01,180,273,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya04	844,4,4
ma_fild01,179,145,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya05	844,4,4

malaya,295,171,3	script	Collection Dealer Woeon	582,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[云]";
		mes "呃……呃……我头疼……";
		mes "我的头痛一定是你从外地来给我带来的！";
		mes "离开。嘘，离开！";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7355) == 2) {
			mes "[云]";
			mes "现在，看这里，我的朋友……";
			mes "这一切都可以通过给我一个按钮来解决。";
			mes "看起来也没有那么贵。";
			close;
		} else {
			mes "[云]";
			mes "啊哈！你就是他们都在谈论的那个人！";
			mes "我有点粗鲁吧？忘了它吧！";
			mes "是的，一定要忘记...";
			next;
			mes "[云]";
			mes "如果你急需的话，我可以在这里给你找一份工作，你知道的。";
			mes "....可以给我一些你的东西吗？";
			next;
			mes "[云]";
			mes "我听到了关于你驱鬼的传闻！";
			mes "你没看到我因为害怕鬼魂而颤抖的双手吗？";
			mes "如果你能把袖子上的纽扣给我的话我会感觉好很多...";
			next;
			mes "- 陷入困境的村民想要你的财物，因为你抵御了鬼魂。 -";
			setquest 7355;
			completequest 7355;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 很多人已经问过你这个了。也许最好与孟巴基的 Phong 交谈。-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[云]";
		mes "唉……现在的生活真是太艰难了。";
		mes "为什么鬼会来打扰我。";
		mes "我希望我有一个幸运符什么的...";
		next;
		mes "[云]";
		mes "你为什么不给我一件你的东西，让我留着当做护身符呢？";
		mes "来吧，一只袜子可以挽救一个人的生命，你知道。";
		mes "冷酷无情的儿子...";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7362) != -1) {
			mes "[云]";
			mes "唔。看看我的手。";
			mes "不那么摇晃了，是吗？";
			mes "不是这样吗？";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备并给予蓝色宝石和圣水。 ^000000";
			close;
		}
		mes "[云]";
		mes "哼!你想要什么？";
		next;
		select ("交出准备好的物品。");
		mes "[云]";
		mes "哦天哪...忘掉后面的事情吧。";
		mes "你看，你走后我又被另一个鬼魂缠住了……";
		mes "没有难受的感觉..";
		next;
		mes "[云]";
		mes "这就是你的精神之源吗？";
		mes "感觉有点酷啊！";
		mes "也许这会抵挡他们中的一些人......";
		next;
		mes "[云]";
		mes "不管怎样，非常感谢。";
		mes "当有职位空缺时，我会先打电话给你。";
		next;
		mes "-给了Woeon圣水和蓝色宝石。-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7362;
		completequest 7362;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后是Woeon，我认为已经提供了足够的圣物。-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[云]";
		mes "现在...让我们回到正题。";
		mes "多亏了你，我才没有看到那些该死的鬼魂。";
		mes "哈哈哈哈哈哈哈";
		close;
	} else {
		mes "[云]";
		mes "哦，你好！";
		next;
		if (select("给予精神上的保护:商人和他的收藏") == 1) {
			if (((checkquest(7374) == 0) || (checkquest(7374) == 1)) && ((checkquest(7371) == 0) || (checkquest(7371) == 1))) {
				if (!countitem(6503)) {
					mes "^4d4dff没有任何精神保护可以给予Woeon。^000000";
					close;
				}
				mes "[云]";
				mes "呼～新的精神守护？";
				mes "这是官方制作的护身符吗？伊梅尔达做得很好。";
				mes "当然我也很感谢你。";
				next;
				mes "-为Woeon提供精神保护。-";
				delitem 6503, 1; // Soul_Protection
				erasequest 7371;
				setquest 7385;
				if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
					mes "-以Woeon为最后，所有的精神保护都已交付。-";
					if (malaya_hi == 23) {
						set malaya_hi, 24;
					}
					setquest 7379;
					erasequest 7382;
					erasequest 7383;
					erasequest 7384;
					erasequest 7385;
					erasequest 7386;
					erasequest 7387;
				}
				close;
			} else {
				mes "[云]";
				mes "精神保护？";
				mes "我的仍然工作正常。";
				mes "确实非常有效。";
				close;
			}
		} else {
			if (BaseLevel < 100) {
				mes "[云]";
				mes "是的，我从怪物那里收集各种副产品。";
				mes "事实上，我在这里收集 Jejellopys...";
				next;
				mes "[云]";
				mes "这对你来说太多了。";
				mes "你看，这里的事情可能会变得非常糟糕。";
				mes "等你变得更强了，我会让你这么做的，我的朋友！";
				close;
			}
			if ((checkquest(7392, PLAYTIME) == 0) || (checkquest(7392, PLAYTIME) == 1)) {
				mes "[云]";
				mes "哦，Jjellopy 收藏？";
				mes "我今天已经够了。";
				mes "明天再回来吧。";
				close;
			} else if (checkquest(7392, PLAYTIME) == 2) {
				mes "[云]";
				mes "哦，是的，是的。";
				mes "今天你也要去收集 Jejellopy 吗？";
				mes "我知道这是一项艰巨的工作...但你做得很好。";
				erasequest 7392;
				next;
				if (select("我今天太忙了：交给我吧！") == 1) {
					mes "[云]";
					mes "是这样吗？那么就是这样。";
					mes "当你需要一些工作时就来吧。";
					close;
				}
				mes "[云]";
				mes "像往常一样，请给我带来 30 个 Jejellopy。";
				mes "你可以从 Jejelings 那里得到它们。";
				setquest 7391;
				close;
			} else {
				if ((checkquest(7391) == 0) || (checkquest(7391) == 1)) {
					if (countitem(6498) < 30) {
						mes "[云]";
						mes "唔？我认为你还不够。";
						mes "我向你要了 30 个 Jejellopy。恐怕生意就是生意。";
						close;
					}
					mes "[云]";
					mes "哦，你有要求的号码吗？";
					mes "我会带他们离开这里。";
					mes "你不需要它们，对吗？";
					next;
					mes "[云]";
					mes "所以我拥有所有 Jejellopy...";
					mes "再来吧！";
					delitem 6498, countitem(6498); //Jejellopy
					setquest 7392;
					erasequest 7391;
					if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
						getitem 6497, 2; // Lesser_Agimat
					else
						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					set .@memo_name, rand(1,3);
					if (!rand(3))
						$malayaNames$[1] = strcharinfo(0);
					close;
				} else {
					mes "[云]";
					mes "如您所见，我是一名收藏经销商。";
					mes "我交易各种怪物或动物副产品。";
					next;
					mes "[云]";
					mes "它们被用作制成品的材料。";
					mes "当然，马来亚港最受欢迎的还是来自怪物 Jejeling..";
					next;
					mes "[云]";
					mes "Jejellopy 可以从 Jejeling 获得。";
					mes "你能给我 30 个 Jejellopy 吗？";
					next;
					if (select("是的，当然。：不。") == 2) {
						mes "[云]";
						mes "是这样吗。太可惜了。";
						mes "当你需要一些工作的时候就回来吧。";
						close;
					}
					mes "[云]";
					mes "很好，我相信你能做到。";
					mes "记住，30 Jejellopy。";
					setquest 7391;
					close;
				}
			}
		}
	}
	end;
}

malaya,119,217,3	script	Blacksmith Pandoi	538,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[潘多伊]";
		mes "...喘气！";
		mes "走……走开！";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7354) == 2) {
			mes "[潘多伊]";
			mes "请..";
			mes "难道你就不能仅仅为了帮助一个人吗？";
			mes "你真的认为无视我是最好的选择吗？";
			next;
			mes "[潘多伊]";
			mes "现在看这里。";
			mes "请给我看一下..";
			mes "这只是一个按钮...";
			close;
		} else {
			mes "[潘多伊]";
			mes "你好呀！";
			mes "我听说过你的威望。";
			mes "我想知道我是否可以收到一些东西来证明我见过你本人......";
			next;
			mes "[潘多伊]";
			mes "噢……你很惊讶，因为我突然对你这么好。";
			mes "我听到了你击退鬼魂的消息。";
			mes "太棒了！";
			next;
			mes "[潘多伊]";
			mes "有了你的灵物，一定能吓跑鬼不是吗？";
			mes "请你慷慨一点，我求你了……";
			next;
			mes "-陷入困境的村民想要你的财物，因为你抵御了鬼魂。 -";
			setquest 7354;
			completequest 7354;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 很多人已经问过你这个了。也许最好与孟巴基的 Phong 交谈。-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[潘多伊]";
		mes "唷……现在的生活太艰难了。";
		mes "为什么鬼会来打扰我。";
		mes "我希望我有一个幸运符什么的...";
		next;
		mes "[潘多伊]";
		mes "请...";
		mes "难道你就不能仅仅为了帮助一个人吗？";
		mes "你真的认为无视我是最好的选择吗？";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7361) != -1) {
			mes "[潘多伊]";
			mes "现在我有了信心，剩下的就是去医院或者现场索取物资了！";
			mes "布……但是，我太害怕了……";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备并给予蓝色宝石和圣水。 ^000000";
			close;
		}
		mes "[潘多伊]";
		mes "什、什么，你终于决定帮我了？！";
		mes "你要给Pandoi一份和平的礼物吗？！";
		next;
		select ("交出准备好的物品。");
		mes "[潘多伊]";
		mes "伟大的！我就知道你会回来的！";
		mes "是的……现在有了你的一些灵气，晚上我就可以好好休息了。";
		next;
		mes "- 给潘多伊圣水和蓝色宝石。-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7361;
		completequest 7361;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后潘多伊，我想我已经给了足够的圣器了-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[潘多伊]";
		mes "银……银。我需要银子，谢谢。";
		mes "我以为鬼魂消失后我就能得到银子，但我不能……";
		close;
	} else {
		mes "[潘多伊]";
		switch(rand(1, 6)) {
		case 1:
			mes "你知道。" + $malayaNames$[1] + "。你是我的英雄，让我变得更强。我仰望你！";
			break;
		case 2:
			mes "我见过你，" + $malayaNames$[1] + " 在镇外打败那些 Jejelings。那股能量……我……我太感动了！";
			break;
		case 3:
			mes "你，" + $malayaNames$[0] + "，照亮了我的灵魂。它闪闪发光，你知道。不？你不这么认为吗？";
			break;
		case 4:
			mes "据我所知，最近一段时间，" + $malayaNames$[1] + "是周围最勤奋的人。他就像一个努力工作的神。";
			break;
		case 5:
			mes $malayaNames$[5] + "做出了一个巨大的发现。他们说，是一条龙。";
			break;
		case 6:
			mes "你好呀？！";
			break;
		}
		next;
		switch (select("给予精神保护。：银刃。：银十字")) {
		case 1:
			if ((checkquest(7374) == -1) || (checkquest(7370) == -1)) {
				mes "[潘多伊]";
				mes "感谢您照顾我的精神保护的有效期。";
				mes "我认为我的目前还不错。";
				mes "等它用完了，我再向你要一份！";
				close;
			}
			if (!countitem(6503)) {
				mes "^4d4dff没有任何精神保护可以给予Pandoi。^000000";
				close;
			}
			mes "[潘多伊]";
			mes "好的。新的精神保护。";
			mes "很高兴知道您不会再看到那些黑色的东西了！";
			next;
			mes "-为Pandoi提供精神保护。-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7370;
			setquest 7384;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "-以Pandoi为最后，所有的精神保护都已交付。-";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		case 2:
			if (BaseLevel < 100) {
				mes "[潘多伊]";
				mes "嗯……要制作银刃，你需要银。";
				mes "我可以熔化银手镯来获得银。";
				mes "银手镯可以在医院购买。";
				next;
				mes "[潘多伊]";
				mes "不过，我认为你现在还做不到。对不起，这对你来说太过分了！";
				mes "如果你就这样进去的话……你绝对不可能活着出来！";
				close;
			}
			.@hunting = checkquest(7393, HUNTING);
			if (.@hunting == 2) {
				if (countitem(6508) < 10) {
					mes "[潘多伊]";
					mes "银手镯在哪里？";
					mes "我知道你是无敌的...";
					mes "但我必须有银手镯才能制作银剑。";
					next;
					mes "[潘多伊]";
					mes "10 条银手链！";
					mes "不管你阻碍多少，我都需要十个银手镯！！";
					mes "现在它在你手中！";
					close;
				}
				mes "[潘多伊]";
				mes "尊重，一路走来！";
				mes "你击退了他们并带来了银手镯。";
				next;
				mes "[潘多伊]";
				mes "从今天开始，我要尝试熔炼一把新的银武器..!!";
				mes "我会不断地殴打他们，直到我手中只剩下一把精美的银刃……！！";
				next;
				mes "[潘多伊]";
				mes "虽然不多，但这是你为获得银手镯所经历的麻烦的一些东西。";
				mes "如果我失败了……我会再次向你要求任务！";
				delitem 6508, 10; //Silver_Bracelet
				setquest 7394;
				erasequest 7393;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(3))
					$malayaNames$[1] = strcharinfo(0);
				close;
			} else if (.@hunting == 0 || .@hunting == 1) {
				mes "[潘多伊]";
				mes "村医院里面藏着最可怕的东西。";
				mes "我不知道到底是什么……无论里面有什么，我都不愿意靠近它……";
				next;
				mes "[潘多伊]";
				mes "请除掉那些传闻中的怪物并获得那些银手镯。";
				mes "你是我唯一可以信任的人！";
				close;
			} else {
				.@playtime = checkquest(7394, PLAYTIME);
				if (.@playtime == 0 || .@playtime == 1) {
					mes "[潘多伊]";
					mes "我还有一些银子要熔炼。";
					mes "如果我再次失败，我会要求更多。";
					close;
				} else if (.@playtime == 2) {
					erasequest 7394;
					mes "[潘多伊]";
					mes "哦...我该怎么办？";
					mes "你给我带回来的珍贵材料都被我浪费了……";
					next;
					mes "[潘多伊]";
					mes "也许我不适合当铁匠！";
					mes "不过，我很擅长制作银子！";
					next;
					if (select("我给你拿材料。振作起来：放弃吧。当你这样做的时候就容易多了。") == 2) {
						mes "[潘多伊]";
						mes "... 你说得对...";
						mes "我这辈子都炼不出银剑了……";
						mes "放弃吧...我以为你会让我振作起来..我对你有点失望。";
						close;
					}
					mes "[潘多伊]";
					mes "我知道我可以信赖你！";
					mes "我知道我可以信赖你！";
					mes "请给我 10 条银手镯。";
					setquest 7393;
					next;
					mes "[潘多伊]";
					mes "Pandoi会永远对你微笑~";
					mes "*咧嘴笑*";
					close;
				} else {
					mes "[潘多伊]";
					mes "银刃！";
					mes "这很棒。精彩的！一击斩断一切邪恶的圣剑……！";
					next;
					mes "[潘多伊]";
					mes "我想通过制作银刃而成为一名著名的铁匠。";
					mes "但是，我无法获取材料。";
					next;
					mes "[潘多伊]";
					mes "听说他们在医院都戴着银手镯作为认可。";
					mes "但当我到达那里时，这已经不是我以前认识的医院了。";
					next;
					mes "[潘多伊]";
					mes "你能杀死那些可怕的苦力怕并给我拿到银手镯吗？";
					next;
					if (select("确实！：不。方式。") == 2) {
						mes "[潘多伊]";
						mes "... 你说得对...";
						mes "我这辈子都不会炼出银剑了……";
						mes "如此直白的表达厌恶。你知道吗？我现在讨厌这个想法。";
						close;
					}
					mes "[潘多伊]";
					mes "我就知道！";
					mes "教医院里的那些东西一些礼仪......";
					mes "请带回 10 条银手镯。";
					setquest 7393;
					next;
					mes "[潘多伊]";
					mes "Pandoi会永远对你微笑~";
					mes "*咧嘴笑*";
					close;
				}
			}
		case 3:
			mes "[潘多伊]";
			mes "您需要银十字架吗？";
			mes "Pandoi 将为您制作！";
			mes "不过，我无法突然创造出一些东西，所以我需要一些银子。";
			next;
			mes "[潘多伊]";
			mes "我可以为^4d4dff2个银手镯^000000制作一个银十字，怪物们拿着在那里......";
			mes "如果你有银手镯，我可以用它们制作银十字架。";
			next;
			switch(select("制作 1 个银十字：制作 6 个银十字：输入数字：退出。")) {
			case 1:
				set .@amount,1;
			case 2:
				if (!.@amount) set .@amount,6;
				if (countitem(6508) < (.@amount * 2)) {
					mes "[潘多伊]";
					mes "您至少需要" + (.@amount * 2) + "银手镯来制作" + .@amount + "银" + ((.@amount == 1) ? "十字架" : "十字架") + ".";
					close;
				}
				set .@time,5;
				break;
			case 3:
				mes "[潘多伊]";
				mes "您需要多少个银十字勋章？";
				mes "我一次最多可以做50个。";
				next;
				input .@amount;
				if (.@amount == 0) {
					mes "[潘多伊]";
					mes "不需要银十字吗？";
					mes "嗯，那我可以休息一下了。哈哈哈哈~";
					close;
				} else if (.@amount > 50) {
					mes "[潘多伊]";
					mes "一次最多50个！";
					close;
				}
				if (countitem(6508) < (2 * .@amount)) {
					mes "[潘多伊]";
					mes "要制作" + .@amount + "银" + ((.@amount == 1) ? "十字架" : "十字架") + "，我至少需要" + (2 * .@amount) + "银手镯。";
					close;
				}
				set .@time,15;
				break;
			case 4:
				mes "[潘多伊]";
				mes "如果你需要我，我就在这里！";
				close;
			}
			mes "[潘多伊]";
			mes "只需要一秒钟。";
			mes "Pandoi 可以瞬间完成！";
			close2;
			progressbar "0xffff00", .@time;
			delitem 6508, .@amount * 2; //Silver_Bracelet
			getitem 6502, .@amount; // Silver_Cross
			mes "[潘多伊]";
			mes "看看这个！";
			mes "确实非常好。";
			mes "我应该成为一名工匠，而不是铁匠！";
			close;
		}
	}
	end;
}

malaya,326,68,2	script	Pedro the Sailor	100,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[水手佩德罗]";
		mes "哦...这艘船没有服役。";
		mes "或者说，它无法起航。 *暗笑*";
		mes "我看到鬼了。我想我的死期到了。";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7352) == 2) {
			mes "- 水手佩德罗似乎已经放弃了，但他的目光却无法从我身上移开。-";
			close;
		}
		mes "[水手佩德罗]";
		mes "哦，你就是……一挥手就能挡鬼的人？！";
		mes "你能留下来听我说完吗？";
		next;
		if (select("抱歉：当然可以。") == 1) {
			mes "[水手佩德罗]";
			mes "噢，坚决否认。";
			mes "你刚刚刺穿了我最后一丝希望。";
			mes "可能是我的说服力不够吧……";
			close;
		}
		mes "[水手佩德罗]";
		mes "开门见山，这个小镇就是鬼窝！";
		mes "唉……我当水手已经有一段时间了，去过很多地方，但这是我以前从未经历过的。";
		next;
		mes "[水手佩德罗]";
		mes "你看到那里那艘船了吗？";
		mes "这是一个小渡轮，但它也因为这些该死的鬼魂而停止服务！";
		next;
		mes "[水手佩德罗]";
		mes "从外面看起来还不错，但我告诉你，里面充满了鬼魂。";
		mes "但听我的意思，他们害怕你，对吗？";
		next;
		select ("哦不，你也是……：不是我的按钮！");
		mes "[水手佩德罗]";
		mes "我看已经有很多人向你索要一些你的护身符了，呵呵。";
		mes "我也可以在这条线上让步吗？";
		next;
		mes "[水手佩德罗]";
		mes "我需要和那边的那个鬼魂进行一些真诚的对话。";
		mes "但这种精神太强大了，我无法接近。";
		next;
		mes "[水手佩德罗]";
		mes "…………那是一个蹩脚的故事。";
		mes "而且把你的东西送给别人并不容易。";
		next;
		mes "- 水手佩德罗似乎已经放弃了，但他的目光却无法从我身上移开。-";
		setquest 7352;
		completequest 7352;
		if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
			next;
			mes "- 很多人已经问过你这个了。也许最好在孟巴基与 Phong 交谈。 -";
			set malaya_hi, 11;
			setquest 7358;
		}
		close;
	} else if (malaya_hi == 11) {
		mes "[水手佩德罗]";
		mes "叹...";
		mes "这太尴尬了。";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7359) != -1) {
			mes "[水手佩德罗]";
			mes "无论如何，现在我已经拥有了他们所讨厌的东西......";
			mes "现在是时候冲进我的船了……！";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备并给予蓝色宝石和圣水。^000000";
			close;
		}
		mes "[水手佩德罗]";
		mes "什么？我能感觉到你手里有一些清爽的东西。它是什么？";
		next;
		mes "[水手佩德罗]";
		mes "你要给我吗？";
		mes "鬼会讨厌吗？";
		mes "这是个好消息！";
		next;
		mes "[水手佩德罗]";
		mes "佩德罗，竭诚为您服务！";
		mes "等你解决掉这里的鬼魂后，我就会乘船前往世界的尽头！";
		next;
		mes "- 给水手佩德罗圣水和蓝色宝石。 -";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7359;
		completequest 7359;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后还有水手佩德罗，我想我已经给了足够的圣物了。-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[水手佩德罗]";
		mes "无论如何，现在我已经拥有了他们所讨厌的东西......";
		mes "现在是时候冲进我的船了……！";
		next;
		mes "-水手佩德罗看上去意志坚定。-";
		close;
	} else {
		mes "[水手佩德罗]";
		mes "哇...你看到了吗？";
		mes "那些黑色的灵魂刚出现，就消失了。";
		mes "好吧，实现梦想吧？";
		next;
		if (select("给予精神上的保护：关于渡轮") == 1) {
			if ((checkquest(7374) == -1) || (checkquest(7368) == -1)) {
				mes "[水手佩德罗]";
				mes "你之前给我的精神保护效果很好。";
				mes "我现在很好。";
				mes "战斗还在继续！";
				close;
			}
			if (!countitem(6503)) {
				mes "^4d4dff没有精神保护可以给予水手佩德罗。^000000";
				close;
			}
			mes "[水手佩德罗]";
			mes "新制作的精神守护。";
			mes "好吧。今天我就用这个来对付他们。";
			next;
			mes "-为水手佩德罗提供精神保护。-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7368;
			setquest 7382;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "-以水手佩德罗为最后，所有的精神保护都已交付。-";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		}
		if (BaseLevel < 100) {
			mes "[水手佩德罗]";
			mes "嗯……你不记得我说过鬼吗？";
			mes "渡轮上充满了鬼魂。";
			mes "等等，是一个还是多个？";
			next;
			mes "[水手佩德罗]";
			mes "任何。对于你和你现在的情况来说，这是不可能的。";
			mes "是的。你做不到。你会被装在裹尸袋里拖出来。";
			next;
			mes "[水手佩德罗]";
			mes "现在我不会站在这里等待那件事发生。决不。";
			close;
		}
		if (malaya_diwata == 0) {
			mes "[水手佩德罗]";
			mes "抱歉，我不是说过那边有鬼吗？";
			mes "因此它无法起航。";
			next;
			mes "[水手佩德罗]";
			mes "那么这整个鬼故事讲的是什么呢？";
			mes "嗯…………";
			mes "这是一个很长的故事...";
			next;
			if (select("我正在听：也许稍后。") == 2) {
				mes "[水手佩德罗]";
				mes "我就知道。";
				mes "不过，这并不是一个无聊的故事。";
				mes "毕竟，这是一个鬼故事。";
				close;
			}
			mes "[水手佩德罗]";
			mes "故事要追溯到我第一次来这里港口的时候。";
			mes "第一次担任班轮经理，这真是令人伤脑筋。";
			next;
			mes "[水手佩德罗]";
			mes "当我准备下船时，我看到了一些我简直不敢相信的事情。";
			mes "黑色的烟雾从城镇各处涌向港口。";
			next;
			mes "[水手佩德罗]";
			mes "起初，我以为这只是一场很浓的雾霾。";
			mes "随着日子一天天过去，事情的真相已经很清楚了。";
			mes "那是一群灵魂。";
			next;
			mes "[水手佩德罗]";
			mes "确实是一群非常不愉快的灵魂。";
			mes "一些人在即将起航的渡轮周围发出可怕的叫声……";
			next;
			mes "[水手佩德罗]";
			mes "那次事件之后，那艘船一直停留在那个地方，直到今天。";
			mes "为什么？因为他们接管了这艘船！它闹鬼了！";
			next;
			mes "[水手佩德罗]";
			mes "如果你不相信我，你自己看看。";
			mes "那么你就会相信我。";
			set malaya_diwata, 1;
			setquest 7395;
			close;
		} else if (malaya_diwata == 1) {
			mes "[水手佩德罗]";
			mes "如果你想知道，就亲自去看看吧。";
			close;
		} else if (malaya_diwata == 2) {
			mes "[水手佩德罗]";
			mes "小女孩的灵魂？";
			mes "那些欺负人的人怎么办？";
			mes "他们来了又走了？";
			next;
			mes "[水手佩德罗]";
			mes "我不明白。";
			mes "也许领袖蒙巴基会知道该怎么做。";
			close;
		} else if (malaya_diwata == 3) {
			mes "[水手佩德罗]";
			mes "嗯……抚慰心灵的花香……";
			mes "平静下来之后你想听听它的故事吗？";
			mes "嗯...祝你好运。";
			next;
			mes "[水手佩德罗]";
			mes "渡轮再次起航也是没办法的事。";
			mes "因为那些卑鄙的人，我无法靠近它。";
			next;
			mes "[水手佩德罗]";
			mes "现在我要求你这么做并不是因为我不想被打扰";
			mes "但因为我自己根本做不到。";
			close;
		} else if (malaya_diwata == 4) {
			mes "[水手佩德罗]";
			mes "蒙巴基祝福过这朵花吗？";
			mes "我希望这能起作用...";
			mes "祝你一切顺利！！";
			next;
			mes "[水手佩德罗]";
			mes "祝愿您能洽谈成功！";
			mes "我会尽力解决船外那些粗鲁的人。";
			close;
		} else if (malaya_diwata == 5) {
			mes "[水手佩德罗]";
			mes "我懂了。";
			mes "也许渡轮可以再次移动......";
			mes "感谢您为我们所做的一切。";
			next;
			mes "[水手佩德罗]";
			mes "那我最好准备好启航了。";
			mes "虽然不多，但这是给你的。";
			mes "如果我们能恢复营业，我就带你去伊兹鲁德，只需 1000 兹。";
			set malaya_diwata, 6;
			erasequest 7399;
			setquest 7401;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6497, 2; // Lesser_Agimat
			else
				getitem 6497, 1; // Lesser_Agimat
			getexp 200000,200000;
			if (!rand(3))
				$malayaNames$[0] = strcharinfo(0);
			close;
		} else {
			.@playtime = checkquest(7401, PLAYTIME);
			if (.@playtime == 0 || .@playtime == 1) {
				mes "[水手佩德罗]";
				mes "如果你想去艾伯塔省，就坐那边的大船。";
				mes "这个小家伙去了伊兹鲁德。";
				mes "那将是 1000z。";
				next;
				if (select("使用：那是敲竹杠！") == 2) {
					mes "[水手佩德罗]";
					mes "什么？！";
					mes "你要花多少钱乘坐阿尔伯塔班轮才能到达这里！？";
					mes "这就是诈骗……你以为我在做慈善吗？";
					close;
				}
				if (Zeny < 1000) {
					mes "[水手佩德罗]";
					mes "价格是1000泽尼。";
					mes "我帮不了你~";
					close;
				}
				mes "[水手佩德罗]";
				mes "谢谢~";
				mes "在鬼魂回来之前我们走吧！";
				set Zeny, Zeny - 1000;
				close2;
				warp "izlude",195,180;
				end;
			} else if (.@playtime == 2) {
				erasequest 7401;
				goto L_SetQuest;
			} else {
				if (checkquest(7403) == -1) {
					if (checkquest(7402) == -1) {
						goto L_SetQuest;
					}
					mes "[水手佩德罗]";
					mes "你知道该怎么做。";
					mes "收集鲜花并将其带到孟巴基制作供奉花束。";
					next;
					mes "[水手佩德罗]";
					mes "将花束送给 Diwata 小姐，让她高兴起来。";
					mes "....谢谢。";
					close;
				}
				mes "[水手佩德罗]";
				mes "迪瓦塔冷静！";
				mes "我什至能感觉到这里的差异。";
				mes "我永远欠你的情。";
				next;
				mes "[水手佩德罗]";
				mes "你知道吗？你为什么不更定期地这样做呢？";
				mes "我想你有点喜欢这样做。";
				setquest 7401;
				erasequest 7403;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(3))
					$malayaNames$[0] = strcharinfo(0);
				close;
			}
		}
	}
	end;

L_SetQuest:
	mes "[水手佩德罗]";
	mes "啊，事情是……";
	mes "我们现在还不能走..";
	mes "你看，鬼魂又回来了……";
	mes "我受够了麻烦。";
	next;
	mes "[水手佩德罗]";
	mes "我的意思是……迪瓦塔小姐……感觉不太舒服，即使有精神保护";
	mes "一个正常人是受不了的。";
	next;
	if (select("我懂了。那就当心吧：献花怎么样？") == 1) {
		mes "[水手佩德罗]";
		mes "我很高兴你能理解。";
		mes "叹...";
		close;
	}
	mes "[水手佩德罗]";
	mes "嗯。那太好了。";
	mes "如果可以用鲜花来安抚她的话……！";
	mes "祝你好运。";
	setquest 7402;
	close;
}

ma_in01,125,107,3	script	Ghost Diwata	1761,4,4,{
	end;
OnTouch:
	if (malaya_diwata == 0) {
		cutin "malaya_diwata01", 2;
		mes "- 一个令人毛骨悚然的小女孩站着。";
		mes "当我们四目相对的时候，我的脊背发凉，浑身起鸡皮疙瘩。 -";
		next;
		mes "[迪瓦塔]";
		mes "你也是来欺负迪瓦塔的吗？";
		mes "我不会要它！";
		next;
		cutin "", 255;
		mes "-在小女孩低沉的令人毛骨悚然的声音和她眼中的闪光后，我被扔了出去。-";
		close;
		warp "malaya", 324, 66;
		end;
	} else if (malaya_diwata == 1) {
		cutin "malaya_diwata01", 2;
		mes "- 一个令人毛骨悚然的小女孩站着。";
		mes "当我们四目相对的时候，我的脊背发凉，浑身起鸡皮疙瘩。 -";
		next;
		mes "[迪瓦塔]";
		mes "你也是来欺负迪瓦塔的吗？";
		mes "我不会要它！";
		next;
		select ("等待！我只是想谈谈！");
		mes "[迪瓦塔]";
		mes "那你背后的人又是谁呢？";
		mes "你就是其中之一！";
		next;
		cutin "malaya_ghost01", 4;
		mes "- 熟悉的灵魂正在接近迪瓦塔。 -";
		next;
		if (select("这是一个误会！：你是从那里来的..！") == 2) {
			cutin "malaya_ghost02", 4;
			mes "[" + strcharinfo(0) + "]";
			mes "和我想的一样！你怕我？！";
			mes "靠边站！";
			mes "我需要和她谈谈。";
			next;
			cutin "malaya_diwata01", 2;
			mes "[迪瓦塔]";
			mes "我不知道他们为什么要退缩……";
			mes "你也滚出我的视线吧！";
			next;
			cutin "", 255;
			mes "-小女孩恼怒的哭声和眼睛里的闪光让我被赶了出去。-";
			set malaya_diwata, 2;
			setquest 7396;
			erasequest 7395;
			close2;
			warp "malaya", 324, 66;
			end;
		}
		cutin "malaya_diwata01",2;
		mes "[迪瓦塔]";
		mes "足够的！";
		next;
		cutin "", 255;
		mes "-在小女孩坚决的哭声和她眼中的闪光之后，我被扔了出去。-";
		set malaya_diwata, 2;
		setquest 7396;
		erasequest 7395;
		close2;
		warp "malaya", 324, 66;
		end;
	} else if ((malaya_diwata == 2) || (malaya_diwata == 3)) {
		cutin "malaya_diwata01", 2;
		mes "[迪瓦塔]";
		mes "你又爬进去了？";
		mes "出去-！！！！！";
		next;
		cutin "", 255;
		mes "-在小女孩的尖叫声和她眼中的闪光之后，我被扔了出去。-";
		close;
		warp "malaya", 324, 66;
		end;
	} else if (malaya_diwata == 4) {
		if (!countitem(6506)) {
			cutin "malaya_diwata01", 2;
			mes "――迪瓦塔小姑娘的灵魂正凶狠地看着我。";
			mes "没有供奉花束...！！！";
			next;
			cutin "", 255;
			mes "-她用冷漠的眼神把我赶了出去-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		mes "――迪瓦塔小姑娘的灵魂正凶狠地看着我。 -";
		mes "- 供奉花束... -";
		cutin "malaya_diwata01", 2;
		next;
		if (select("把它扔给小女孩：把它滑到地板上。") == 1) {
			mes "- 在她把我扔出去之前，我把花束扔了出去，她吃了一惊……";
			mes "既然她有了花，她就不会把我扔得……太远了。-";
		} else {
			mes "- 我把花从地板上滑到她面前。她看起来很困惑。 -";
		}
		next;
		mes "[迪瓦塔]";
		mes "这有什么意义呢？";
		mes "你不是敌人吗？";
		next;
		mes "[迪瓦塔]";
		mes "什么？你也是外人吗？";
		mes "哈，所以活的是允许的，而我不允许？";
		next;
		mes "[迪瓦塔]";
		mes "现在人们对农村人的看法比外地人要高。";
		mes "我很生气。我想把它们从地图上抹掉。";
		next;
		mes "[迪瓦塔]";
		mes "什么？我不应该吗？";
		mes "为什么我不应该？";
		mes "我要停船了？";
		next;
		mes "[迪瓦塔]";
		mes "我本来想听你倾诉，因为鲜花";
		mes "但你却对我撒谎？！";
		next;
		mes "[迪瓦塔]";
		mes "所以你是说我把这些乡下人带到了这艘船上";
		mes "与他们的战斗导致了失速？";
		next;
		mes "[迪瓦塔]";
		mes "……嗯……哼。这不是我打算做的。";
		mes "但他们才是让我心烦意乱的人！";
		next;
		mes "[迪瓦塔]";
		mes "……反正我下不了车。";
		mes "这意味着我可能会再次感到难过。知道了？";
		next;
		mes "[迪瓦塔]";
		mes "...今天我会尽力保留它。";
		mes "不是因为我喜欢花，也不是因为我喜欢有人陪伴！";
		mes "因为我受到了和那些贱鬼一样的对待！";
		next;
		mes "[迪瓦塔]";
		mes "现在请原谅我。";
		mes "我会说清楚。我不会把脾气憋这么久。";
		next;
		mes "[迪瓦塔]";
		mes "现在，g...走开！";
		set malaya_diwata, 5;
		delitem 6506, 1; // Memorial_Boquet
		erasequest 7398;
		setquest 7399;
		close3;
	} else if (malaya_diwata == 5) {
		cutin "malaya_diwata02", 2;
		mes "[迪瓦塔]";
		mes "我保证，如果那些乡下人不打扰我，我会成为一个好小女孩。";
		mes "不过，如果他们再打扰我，我就不会了。";
		close3;
	} else {
		if (checkquest(7402) == -1) {
			if (checkquest(7403) == -1) {
				if ((checkquest(7401, PLAYTIME) == 0) || (checkquest(7401, PLAYTIME) == 1)) {
					cutin "malaya_diwata02", 2;
					mes "[迪瓦塔]";
					mes "令人惊讶的是，我做得很好。";
					mes "当然，他们回来时我很紧张，";
					mes "但一如既往，我会赢。";
					next;
					mes "[迪瓦塔]";
					mes "然后可怜的船员又会哭了";
					mes "吵架后我无法让自己平静下来。";
					next;
					mes "[迪瓦塔]";
					mes "你带来的花让我平静下来。";
					mes "....";
					mes "..这不是因为我想念人，也不是因为我喜欢花。不要以错误的方式对待它。";
					close3;
				}
				cutin "malaya_diwata01", 2;
				mes "[迪瓦塔]";
				mes "迷路！";
				mes "什么？哦，是你。";
				mes "那些乡巴佬又回来了！";
				mes "我要杀了他们！";
				close3;
			}
			cutin "malaya_diwata02", 2;
			mes "[迪瓦塔]";
			mes "看看国外的花也不错~";
			mes "来自世界温暖地区的所有花朵都闻起来那么香吗？";
			next;
			mes "[迪瓦塔]";
			mes "你带来的花让我平静下来。";
			mes "....";
			mes "..这不是因为我想念人，也不是因为我喜欢花。不要以错误的方式对待它。";
			close3;
		}
		cutin "malaya_diwata01", 2;
		mes "[迪瓦塔]";
		mes "该死的！你还来更多吗？！";
		mes "什么？";
		mes "哦。是你吗？";
		mes "我现在真的很郁闷。";
		next;
		mes "――迪瓦塔伸出双手，仿佛期待着什么。 -";
		next;
		if (select("给花束：握住她的手。") == 2) {
			mes "[迪瓦塔]";
			mes "你以为你在做什么？！！！！！！";
			mes "啊啊――我这里已经有足够的小人了，谢谢！！";
			next;
			cutin "", 255;
			mes "-我被迪瓦塔雷鸣般的叫声甩了出去-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		if (!countitem(6506)) {
			mes "[迪瓦塔]";
			mes "什么？你要我挥手吗？";
			mes "你没带吗？";
			mes "你没有？！？";
			mes "啊啊你就是不能相信任何人！任何人！";
			next;
			cutin "", 255;
			mes "-我被迪瓦塔雷鸣般的叫声甩了出去-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		cutin "malaya_diwata02", 2;
		mes "[迪瓦塔]";
		mes "……哦……和我想的一样！";
		mes "我唯一的幸福，我唯一的心灵平静......！";
		mes "国外送的花~！";
		next;
		mes "-迪瓦塔似乎感觉好多了。气氛变得更加清爽。-";
		next;
		mes "[迪瓦塔]";
		mes "告诉水手佩德罗！";
		mes "迪瓦塔将成为海洋女神，所以在我的慷慨下扬帆起航吧。";
		delitem 6506, 1; // Memorial_Boquet
		setquest 7403;
		erasequest 7402;
		close3;
	}
	cutin "", 255;
	end;
}

ma_fild01,261,208,2	script	Kiko in Mumbaki	580,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	mes "[Kiko在孟买]";
	mes "欢迎来到巴约，陌生人。";
	mes "我是巴约这里人民和灵魂的灵魂引导者和保护者。";
	mes "所以，我是孟巴基的一名优秀领导者 Kiko。";
	next;
	switch (select("给予铸铁大锅。：请求净化仪式。：用果冻换取黄金。")) {
		case 1:
			if (checkquest(7376) == -1) {
				if (checkquest(7377) == -1) {
					mes "[Kiko在孟买]";
					mes "什么锅？";
					mes "据我所知，你不是带来它的人。";
					next;
					mes "[Kiko在孟买]";
					mes "可怜的东西。";
					mes "不要过着谎言的生活。";
					close;
				}
				mes "[Kiko在孟买]";
				mes "巴约并不是打铁匠工作的好地方。";
				mes "因此，我们总是向马来亚的锻造厂寻求帮助。";
				next;
				mes "[Kiko在孟买]";
				mes "巴科纳瓦不喜欢大声喧哗。";
				mes "这就是为什么我们击败了坚固的铸铁大锅。";
				next;
				mes "[Kiko在孟买]";
				mes "精神守护是我拥有鼎的证明，";
				mes "所以要好好交付。好的？好的。";
				close;
			}
			if (countitem(6504) < 5) {
				mes "[Kiko在孟买]";
				mes "哦，一定是我订的锅。";
				mes "但是，它在哪里？";
				mes "你在嘲笑我吗？！";
				close;
			}
			mes "[Kiko在孟买]";
			mes "是的，非常好！";
			mes "非常好。";
			mes "我们可以用这个进一步激怒巴科纳瓦。";
			next;
			mes "[Kiko在孟买]";
			mes "我给你这个当锅用。";
			mes "听说你的灵魂有问题？";
			mes "拿这个。它会对你有所帮助。";
			delitem 6504, 5; // Cast_Iron_Caldron
			getitem 6503, 5; // Soul_Protection
			setquest 7377;
			erasequest 7376;
			close;
		case 2:
			if (checkquest(7406) == -1) {
				if (checkquest(7407) == -1) {
					mes "[Kiko在孟买]";
					mes "这个村庄唯一需要净化的就是万泰的食物。";
					mes "没有任何仪式可以让像你这样的局外人参加。";
					close;
				}
				mes "[Kiko在孟买]";
				mes "万泰一定饿了。";
				mes "去给他吧。";
				mes "现在快点。";
				close;
			}
			if ((countitem(523) < 10) || (countitem(6507) < 10)) {
				mes "[Kiko在孟买]";
				mes "净化护卫犬万泰需要啃咬的骨头？";
				mes "我在这里的工作变得越来越好。";
				next;
				mes "[Kiko在孟买]";
				mes "到森林里去给我取^4d4dff10根邪灵之骨^000000和^4d4dff10颗圣水^000000来进行净化仪式。";
				mes "我会亲自进行仪式。";
				close;
			}
			mes "[Kiko在孟买]";
			mes "这森林里的动物骨头里都有恶灵。";
			mes "当然，由于恶灵四处乱窜，这是没办法的事……";
			next;
			mes "[Kiko在孟买]";
			mes "你这样做，到处这样做，然后……";
			mes "那里。邪灵已经离开，骨头纯净到可以咀嚼。";
			next;
			mes "[Kiko在孟买]";
			mes "现在，把这个带回给董守卫。";
			mes "凡泰吃了这净化后的邪骨，就会变得更强。";
			next;
			mes "[Kiko在孟买]";
			mes "而且，持有邪灵骨只会对自己造成伤害，";
			mes "所以我会把它们全部带去净化。";
			delitem 6507, countitem(6507); // Evil_Bone
			delitem 523, 10; //Holy_Water
			getitem 6505, 10; //Purified_Bone
			setquest 7407;
			erasequest 7406;
			close;
		case 3:
			mes "[Kiko在孟买]";
			mes "哦，不，你不！";
			mes "你不敢！";
			close;
	}
	end;
}

ma_fild01,239,253,3	script	Dhong the Guard	570,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	mes "[守卫东]";
	mes "你好呀！";
	mes "欢迎来到巴约。";
	next;
	if (select("你的工作看起来好辛苦啊~：看门狗Vantai") == 1) {
		mes "[守卫东]";
		mes "一点也不。我只是看着谁来来去去。";
		mes "旅行者是经历更多苦难的人。";
		close;
	}
	if (BaseLevel < 100) {
		mes "[守卫东]";
		mes "万泰是一只好狗。";
		mes "他可能比你强。";
		next;
		mes "[守卫东]";
		mes "无意冒犯，但是";
		mes "你看起来比万泰咀嚼的骨头的原主人还要弱。";
		next;
		mes "[守卫东]";
		mes "这意味着和我一样强大！";
		mes "哈哈哈哈哈哈哈！";
		close;
	}
	.@playtime = checkquest(7408, PLAYTIME);
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[守卫东]";
		mes "你带来的骨头给了万泰一顿盛宴。";
		mes "他将会在一段时间内感到充实和快乐。";
		mes "在这附近的侦察中没有人能打败 Vantai。";
		next;
		mes "[守卫东]";
		mes "虽然说人不如狗不好，";
		mes "但也有一些较小的。";
		close;
	} else if (.@playtime == 2) {
		erasequest 7408;
		mes "[守卫东]";
		mes "万泰？";
		mes "总是一样的。";
		mes "既然你这么一提，他也快到饿的时候了。";
		next;
		mes "[守卫东]";
		mes "当然，他吃正常的狗粮，但他不能没有那些。";
		mes "你知道我的意思，对吧？";
		mes "傻笑...";
		next;
		mes "[守卫东]";
		mes "我和万泰一直在等待";
		mes "让英雄从森林里给我们找一些邪灵之骨。";
		close;
	} else {
		if (checkquest(7406) != -1) {
			mes "[守卫东]";
			mes "我的意思是，要成为一只优秀的护卫犬，它必须能够抵御邪灵。";
			mes "为此，他需要吃恶灵骨，但必须将恶灵骨净化后才能吃。";
			next;
			mes "[守卫东]";
			mes "你可以从森林里的怪物或动物身上获得邪灵之骨。";
			mes "孟巴基的 Kiko 将为您净化它们。";
			close;
		} else {
			if (checkquest(7407) == 1) {
				if (countitem(6505) < 10) {
					mes "[守卫东]";
					mes "孟巴基的基科要了10块净化灵骨。";
					mes "他一次至少需要有10个。这当然不会持续一天......";
					close;
				}
				mes "[守卫东]";
				mes "嘿，Vantai 会喜欢这些的！";
				mes "一切都状况良好...";
				mes "通过神圣仪式净化的邪恶骨头......";
				next;
				mes "[守卫东]";
				mes "这就是完美的狗粮！！";
				mes "现在他可以感知并察觉邪灵，";
				mes "既然他吃了净化的东西，他就会获得消灭它们的能力。";
				next;
				mes "[守卫东]";
				mes "我打赌他现在是村里最强的生物了。";
				mes "当然不是我。我说的是凡泰。";
				next;
				mes "[守卫东]";
				mes "这是你的奖励。";
				mes "如果您明天能再次帮助我们，那就太好了。";
				delitem 6505, 10; // Purified_Bone
				setquest 7408;
				erasequest 7407;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(0, 2))
					$malayaNames$[2] = strcharinfo(0);
				close;
			} else {
				mes "[守卫东]";
				mes "万泰不仅是一只护卫犬，而且还是一名出色的探测器和侦察兵。";
				mes "但要做到这一点，他就需要吃纯净灵骨。";
				next;
				mes "[守卫东]";
				mes "正如你所看到的，我无法离开这里";
				mes "所以我想知道你能不能给Vantai弄到骨头……";
				next;
				if (select("好的。：对不起。") == 2) {
					mes "[守卫东]";
					mes "我懂了。";
					mes "万泰！";
					mes "今天没有请客..!!";
					next;
					mes "――看来今天万泰的眼睛更湿润了。 -";
					close;
				}
				mes "[守卫东]";
				mes "骨头可以从附近的动物或怪物那里获得。";
				mes "将它们带到孟巴基的 Kiko 进行净化，然后再交给 Vantai 食用。";
				next;
				mes "[守卫东]";
				mes "给我们带来十块纯净灵骨。";
				mes "这让我想起了。你需要圣水来进行净化仪式。";
				next;
				mes "[守卫东]";
				mes "慢慢来。";
				mes "看这里。万泰也很喜欢。";
				setquest 7406;
				close;
			}
		}
	}
	end;
}

ma_fild01,238,257,2	script	Guard Dog Vantai	972,{
	mes "[万泰]";
	mes "咕噜咕噜...";
	mes " ";
	mes "（他被你吓到了。）";
	close;
}

ma_fild01,200,190,3	script	Maries#malaya	579,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 无法继续任务。您携带的物品太多。 -";
		close;
	}
	if (BaseLevel < 100) {
		mes "[玛丽]";
		mes "嗯……嘿……";
		mes "哦，不，抱歉。你看起来并不那么坚强或大胆。";
		mes "对不起。我只是不太像我自己...";
		close;
	}
	if (malaya_hi < 20) {
		mes "站着一个看上去焦急的女人。";
		close;
	}
	.@playtime = checkquest(7390, PLAYTIME);
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[玛丽]";
		mes "现在孩子们知道他们可以穿着反面衬衫回家，";
		mes "他们在森林里肆意而永恒地玩耍。";
		next;
		mes "[玛丽]";
		mes "在这种情况下，孩子们肯定会再次迷路。";
		mes "如果再次发生这种情况，我会再次寻求您的帮助。";
		close;
	} else if (.@playtime == 2) {
		mes "[玛丽]";
		mes "我又想念一个孩子了。";
		mes "哦，我的天啊...";
		erasequest 7390;
		close;
	} else {
		if (checkquest(7389) != -1) {
			mes "[玛丽]";
			mes "你回来了。";
			mes "多亏了你们，孩子才安全回家。";
			next;
			mes "[玛丽]";
			mes "尽管这件衬衫是由内而外的，但它奇迹般地将它们带回了应有的位置。";
			mes "感谢您将这些珍贵的衬衫送给我的孩子们。";
			setquest 7390;
			erasequest 7389;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6497, 2; // Lesser_Agimat
			else
				getitem 6497, 1; // Lesser_Agimat
			getexp 200000,200000;
			if (!rand(3))
				$malayaNames$[2] = strcharinfo(0);
			close;
		} else {
			if (checkquest(7388) != -1) {
				mes "[玛丽]";
				mes "我确信他们是因为恶灵而在树林里迷路的。";
				mes "找到后，请给孩子^4d4dff反面衬衫^000000。";
				next;
				mes "[玛丽]";
				mes "内翻式衬衫...";
				mes "你也许可以从恶魔那里得到它们，因为恶魔带着它们逃跑了。";
				close;
			} else {
				mes "[玛丽]";
				mes "你好...我正在寻找我的孩子...";
				mes "我的女儿没有回来。";
				mes "请帮忙，我想她在森林里迷路了。";
				next;
				switch (select("当然。：我现在太忙了。：你有这么多孩子。")) {
				case 1:
					mes "[玛丽]";
					mes "我确信她是因为恶鬼的缘故在树林里迷路了。";
					next;
					mes "[玛丽]";
					mes "如果她被诅咒了，就很难让她离开那里。";
					mes "事实上，她会在迷宫中徘徊，令人着迷，甚至对你来说也是如此。";
					next;
					mes "[玛丽]";
					mes "获得一件^4d4dff反面衬衫^000000并将其交给我的女儿。";
					mes "尽管这件衬衫是由内而外的，但它奇迹般地将它们带回了应有的位置。";
					next;
					mes "[玛丽]";
					mes "内翻式衬衫...";
					mes "你也许可以从恶魔那里得到它们，因为恶魔带着它们逃跑了。";
					setquest 7388;
					close;
				case 2:
					mes "[玛丽]";
					mes "……是的……我明白了。";
					mes "我得问问别人。";
					mes "好吧。";
					mes "叹...";
					close;
				case 3:
					mes "[玛丽]";
					mes "...我最终生了三胞胎。";
					mes "就连我有时也会感到困惑。 *咯咯笑*";
					next;
					mes "[玛丽]";
					mes "他们似乎受到了诅咒，因为其中一个总是在树林里迷路。";
					mes "叹...";
					close;
				}
			}
		}
	}
	end;
}

ma_fild01,203,189,3	script	Little Girl#malaya	576,{
	mes "[小女孩]";
	mes "呵呵，森林虽然可怕，但是很好玩，所以我经常去那里玩~";
	mes "奇怪的是，我们总是迷路。";
	next;
	mes "[小女孩]";
	mes "不过没关系，迷路的不止我一个~";
	mes "我们是三胞胎了~还缺另外两个~咯咯~";
	close;
}

ma_fild01,251,93,3	script	Lost Child#malaya01	576,{
	if (checkquest(7388) > -1) {
		if (!countitem(12700)) {
			mes "[小孩子]";
			mes "叹。你也迷失了吗？";
			mes "他们太调皮了。";
			next;
			mes "[小孩子]";
			mes "一件由内而外的衬衫正是我所需要的。";
			mes "*咯咯笑*...";
			close;
		}
		mes "[小孩子]";
		mes "哦，该死的他们。";
		mes "他们一定是又骗我迷路了！";
		next;
		select ("你想回家吗？");
		mes "[小孩子]";
		mes "如果我不快点回来，我妈妈会担心死的。";
		mes "叹息......我希望我有一件反面衬衫可以回去。";
		next;
		select ("给你。");
		mes "[小孩子]";
		mes "真的吗？";
		mes "真的是衬衫啊！";
		mes "这将带我直接回家！";
		next;
		mes "[小孩子]";
		mes "是妈妈送你来的吗？";
		mes "她一定很担心吧..！";
		mes "我现在就回家去！";
		mes "多谢！";
		delitem 12700, 1; // Insideout_Shirt
		setquest 7389;
		erasequest 7388;
		close2;
		disablenpc();
		if (strnpcinfo(0) == "Lost Child#malaya01") {
			enablenpc "Lost Child#malaya02";
		} else if (strnpcinfo(0) == "Lost Child#malaya01") {
			enablenpc "Lost Child#malaya03";
		} else {
			enablenpc "Lost Child#malaya01";
		}
		end;
	} else {
		if (checkquest(7389) != -1) {
			mes "[小孩子]";
			mes "我还想再玩一会儿。";
			mes "我总是可以穿着这件衬衫回去。";
			mes "妈妈不会担心的。";
			close;
		} else {
			mes "[小孩子]";
			mes "嗯。我又迷路了吗？";
			mes "我在哪里...";
			mes "我确定我必须从第三棵树上朝日出的方向走才能回家……嗯？";
			next;
			mes "[小孩子]";
			mes "为什么~我总是在这里兜圈子？";
			mes "你为什么，" + ((Sex == SEX_MALE) ? "先生" : "女士") + "？";
			mes "这条路是怎么回事？";
			mes "有人想欺骗我吗？";
			close;
		}
	}
	end;
	
OnInit:
	if (strnpcinfo(0) != "Lost Child#malaya01")
		disablenpc();
}
ma_fild01,114,141,3	duplicate(Lost Child#malaya01)	Lost Child#malaya02	576
ma_fild01,130,314,3	duplicate(Lost Child#malaya01)	Lost Child#malaya03	576

ma_fild02,241,39,5	script	Good Capre Budidai	572,{
	mes "[布迪代]";
	mes "嘿嘿嘿~";
	mes "我真是一个可爱的卡普雷~嘿！";
	mes "我要去一家不错的咖啡馆~YO！";
	mes "我比昨天好多了~嘿嘿！";
	mes "我是一个押韵很好的卡普雷~哦？";
	next;
	mes "[布迪代]";
	mes "嘿伙计，你是来听布迪黛唱歌的吗？";
	next;
	switch (select("你喜欢歌曲吗？：对独眼怪物的深入研究。：再见！")) {
	case 1:
		mes "[布迪代]";
		mes "是的，布迪代喜欢唱歌。";
		mes "牛、马、山羊、公鸡、野猪都喜欢我的歌。";
		mes "他们都是朋友。";
		next;
		mes "[布迪代]";
		mes "除了那个独眼的Bongisungisu。";
		mes "他欺负我的朋友。";
		mes "我很恼火，但是布迪代很弱。";
		next;
		mes "[布迪代]";
		mes "我担心那是单一的目光，但我更担心他挥舞的棍棒。";
		mes "我必须给我的朋友们唱一些歌，但他们不是因为他才来的。";
		next;
		mes "[布迪代]";
		mes "所以布迪代，在这里唱歌。";
		mes "很多旅客经过。";
		mes "卡普雷是一个流浪者的伙伴。";
		mes "你也是好友啊";
		close;
	case 2:
		if (BaseLevel < 100) {
			mes "[布迪代]";
			mes "我的朋友，你对那个恶魔感兴趣吗？";
			mes "简直就是森林霸王啊！";
			mes "它攻击我的动物朋友！";
			next;
			mes "[布迪代]";
			mes "遗憾的是，布迪黛所擅长的只是唱歌。";
			mes "对于那可怕的目光和挥舞的棍棒我无能为力。";
			next;
			mes "[布迪代]";
			mes "奉吉星吉苏！只要和它在同一个森林里，我就会感到寒意……";
			mes "但布迪代却很弱。";
			next;
			mes "[布迪代]";
			mes "你和我，流浪者。";
			mes "我们永远不会成功。";
			close;
		}
		.@playtime = checkquest(7410, PLAYTIME);
		if (.@playtime == 0 || .@playtime == 1) {
			mes "[布迪代]";
			mes "旅行者，我的朋友！";
			mes "Bogigigre Ran fare faar Ay。";
			mes "狗、牛、马、山羊和公鸡都会回到我身边，不是吗？";
			next;
			mes "[布迪代]";
			mes "但布迪代很担心。";
			mes "独眼欺负者最终会回来。";
			mes "你会再帮我一次吗？";
			next;
			mes "[布迪代]";
			mes "你，布迪代的朋友";
			mes "你不会回头再找个好卡普雷吗？";
			close;
		} else {
			if (checkquest(7409) != -1) {
				if (checkquest(7409, HUNTING) == 2) {
					mes "[布迪代]";
					mes "令人惊奇，流浪者！";
					mes "从这里一路都能听到奉吉水的悲惨哀号声！";
					mes "布迪代又可以为他的朋友们唱歌了，是吗？";
					next;
					mes "[布迪代]";
					mes "现在，布迪代能为善良的流浪者、独眼怪物杀手做些什么呢？";
					mes "啊哈！这是一个护身符。";
					mes "这对你们旅行者来说会有好处。";
					next;
					mes "[布迪代]";
					mes "善良的卡普雷是旅行者的朋友。";
					mes "我希望能再次见到你，流浪者。";
					mes "这是对朋友的祝福。嘿嘿嘿~";
					setquest 7410;
					erasequest 7409;
					if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
						getitem 6497, 2; // Lesser_Agimat
					else
						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					if (!rand(3))
						$malayaNames$[1] = strcharinfo(0);
					close;
				} else {
					mes "[布迪代]";
					mes "请杀死破坏性的浪子 Bongisungisu。";
					mes "对我来说，是一首为朋友们再次歌唱的卡普雷。";
					close;
				}
			} else {
				if (.@playtime == 2) {
					mes "[布迪代]";
					mes "嘿，善良的流浪者。";
					mes "Bongisungisu，独眼花花公子回来了！";
					mes "我该怎么办？我应该怎么办？";
					next;
					mes "[布迪代]";
					mes "我一唱歌他就生气。";
					mes "但马、牛、山羊、狗和野猪都喜欢它。";
					mes "这让布迪代很为难。";
					erasequest 7410;
					close;
				} else {
					mes "[布迪代]";
					mes "我的朋友，你对那个恶魔感兴趣吗？";
					mes "简直就是森林霸王啊！";
					mes "它攻击我的动物朋友！";
					next;
					mes "[布迪代]";
					mes "遗憾的是，布迪黛所擅长的只是唱歌。";
					mes "对于那可怕的目光和挥舞的棍棒我无能为力。";
					next;
					mes "[布迪代]";
					mes "奉吉星吉苏！只要和它在同一个森林里，我就会感到寒意……";
					mes "但布迪代却很弱。";
					next;
					if (select("我要照顾它吗？：那确实让人发冷。") == 2) {
						mes "[布迪代]";
						mes "别提醒我。";
						mes "因为那个庞然大物，我的朋友不能来听我的歌。";
						mes "这太令人沮丧了。";
						close;
					}
					mes "[布迪代]";
					mes "你会教奉辛苏在这里吗？！";
					mes "儿童徒步旅行者！！";
					mes "踢一些浪荡子的屁股！";
					setquest 7409;
					close;
				}
			}
		}
		break;
	case 3:
		mes "[布迪代]";
		mes "留下我流浪~";
		mes "卡普雷布迪代将歌唱奇迹~";
		mes "你比别人都好~";
		mes "你把所有的野兽都带来了~";
		mes "就回卡夫拉吧~";
		next;
		mes "[布迪代]";
		mes "嘿嘿嘿~";
		mes "善良善良的卡普雷的祝福~";
		mes "流浪者的朋友卡普雷的礼物~";
		mes "嘿嘿嘿~";
		close;
	}
	end;
}

// Traders :: malaya_npc
//============================================================
ma_fild01,166,214,6	script	Old Man in Dilemma#GA	575,{
	if (MaxWeight - Weight < 600 || checkweight(1201,1) == 0) {
		mes "无法继续，因为您拥有太多物品。";
		close;
	}
	mes "[陷入困境的老人]";
	mes "哦！恶魔在这个世界上的力量越来越大。";
	next;
	switch(select("我们需要收集物品来击退他们。：忽略。")) {
	case 1:
		if (countitem(6497) >= 3 && Zeny >= 1000) {
			mes "[陷入困境的老人]";
			mes "看来你的实力还不足以对抗恶魔。";
			next;
			mes "[陷入困境的老人]";
			mes "您会用 3 个较小的 Agimat 和 1,000 Zeny 创造一个古代精神的大型 Agimat 吗？";
			next;
			if(select("创建：不，谢谢。") == 1) {
				if (countitem(6497) >= 3 && Zeny >= 1000) {
					specialeffect2 EF_CONE;
					specialeffect EF_FORESTLIGHT2;
					set Zeny, Zeny-1000;
					delitem 6497,3; //Lesser_Agimat
					getitem 12775,1; //Ancient_Spirit_Agimat
				} else {
					mes "[陷入困境的老人]";
					mes "材料短缺。";
					close;
				}
			}
			mes "[陷入困境的老人]";
			mes "希望你能赢得与恶魔的战斗。";
			close;
		}
		mes "[陷入困境的老人]";
		mes "现在做不到，但有一种世代相传的老方法。";
		next;
		mes "[陷入困境的老人]";
		mes "你需要召唤远古灵魂的力量。但你首先需要一些重要的材料。";
		next;
		select("这些是什么？");
		mes "[陷入困境的老人]";
		mes "3 个较小的阿吉玛特在这里拥有远古灵魂的力量，以及另一种代代相传的特殊材料。";
		next;
		mes "[陷入困境的老人]";
		mes "但再也没有人能得到这个特殊的物品了。";
		next;
		select("有什么东西是钱买不到的？");
		mes "[陷入困境的老人]";
		mes "不，不……就是这个圆圆的小东西，你看到了吗？";
		next;
		select("你说的是泽尼吗？");
		mes "[陷入困境的老人]";
		mes "看起来和代代相传的特殊物品很相似。";
		next;
		mes "[陷入困境的老人]";
		mes "只要有足够的东西，我们就可以制作远古之灵大阿吉玛特来对抗恶魔。";
		next;
		select("听起来不错。");
		mes "[陷入困境的老人]";
		mes "如果你太疲倦而无法对抗恶魔......";
		next;
		mes "[陷入困境的老人]";
		mes "带着 3 个小 Agimat 和 1,000 个所谓的 Zeny 过来。";
		next;
		mes "[陷入困境的老人]";
		mes "我会制作一个远古之灵的大阿吉玛特，它会让你对恶魔的攻击力提高10%，持续20分钟。";
		close;
	case 2:
		mes "[陷入困境的老人]";
		mes "希望你能赢得与恶魔的战斗。";
		close;
	}
}

ma_fild01,238,198,4	script	Tikbalang Expert#malaya	582,{
	if (MaxWeight - Weight < 50 || checkweight(1201,1) == 0) {
		mes "无法继续，因为您拥有太多物品。";
		close;
	}
	mes "[蒂卡朗专家]";
	mes "我一生90%的时间都在学习Tikbalang。";
	next;
	switch(select("但你看起来很年轻？：提克巴朗是什么？：教我如何抓住提克巴朗。")) {
	case 1:
		mes "[蒂卡朗专家]";
		mes "什么！我可能在想象一些事情。";
		next;
		mes "[蒂卡朗专家]";
		mes "由于我的娃娃脸，我看起来比实际年龄年轻。哈哈哈~";
		next;
		select("... ... ...");
		mes "[蒂卡朗专家]";
		mes "相信！！他们说信仰会给你带来好运。";
		close;
	case 2:
		mes "[蒂卡朗专家]";
		mes "哈哈...你问对了问题。";
		mes "我是该领域的专家。有什么事就问我吧。";
		next;
		select("你为什么不回答我？");
		mes "[蒂卡朗专家]";
		mes "你有没有被周围的人欺骗过？为什么你不能相信某人的话？真的，有什么问题就问我吧。";
		next;
		while(1) {
			switch(select("我没有任何问题。:特征？:特征？:传闻？:栖息地？")) {
			case 1:
				mes "[蒂卡朗专家]";
				mes "我认为现在这已经足够解释了。无论如何，您无法理解具有特定术语的其他高度复杂的主题。";
				next;
				mes "[蒂卡朗专家]";
				mes "哦！您还有其他问题吗？";
				next;
				mes "[蒂卡朗专家]";
				mes "你怎么认为？对我知道的程度印象深刻吗？如果您还有任何疑问，请随时来咨询。";
				close;
			case 2:
				mes "[蒂卡朗专家]";
				mes "提克巴朗有一种让旅行者在遇到它们时迷惑的方法，无论他们在哪里旅行，走多远，它们都会让他们转圈。";
				next;
				mes "[蒂卡朗专家]";
				mes "他们是顽皮的生物。";
				next;
				mes "[蒂卡朗专家]";
				mes "但当然有办法阻止他们的恶作剧。你知道内翻衬衫吗？您可以将上衣反面穿着。";
				next;
				mes "[蒂卡朗专家]";
				mes "或者安静地继续前行，不要打扰提克巴朗人。";
				next;
				mes "[蒂卡朗专家]";
				mes "哈哈哈哈~不过大家都知道冒险家在旅行的时候从来都不会安静吧？";
				next;
				mes "[蒂卡朗专家]";
				mes "绝不...";
				break;
			case 3:
				mes "[蒂卡朗专家]";
				mes "他们说 Tikbalangs 有几个区别。";
				next;
				mes "[蒂卡朗专家]";
				mes "首先，他们非常高^AAAAAA（哎呀...希望我很高）^000000并且有瘦弱的、不平衡的腿和手臂。看起来几乎像人类，但坐下时膝盖高于上半身。";
				next;
				mes "[蒂卡朗专家]";
				mes "二是协会认可的标准特征。它们有像马一样的头和脚。";
				next;
				mes "[蒂卡朗专家]";
				mes "因此，由于具有所有这些外观特征，提克巴朗有时被称为来自地狱的生物。";
				break;
			case 4:
				mes "[蒂卡朗专家]";
				mes "关于提克巴朗有几个有趣的谣言。";
				next;
				mes "[蒂卡朗专家]";
				mes "其中之一是关于提克巴朗人是某个崇拜自然的王国的守护者。";
				next;
				mes "[蒂卡朗专家]";
				mes "因此，提克巴朗人会通过绕圈旅行来欺骗那些怀有恶意来到王国的旅行者。";
				next;
				mes "[蒂卡朗专家]";
				mes "另一个谣言是，附近的人说“如果晴天下雨，那一定是提克巴朗的婚礼”。";
				next;
				mes "[蒂卡朗专家]";
				mes "该协会推测，“巴托里婚礼当天下雨”或“月光花婚礼当天下雨”之类的说法可能源自提克巴朗的谚语。";
				next;
				mes "[蒂卡朗专家]";
				mes "最后，古老的童话故事说提克巴朗可以变成人形，甚至使自己变得透明，但尚未有人证实这一点。";
				break;
			case 5:
				mes "[蒂卡朗专家]";
				mes "提克巴朗人通常生活在黑暗、繁忙、周围人烟稀少的地方。";
				next;
				mes "[蒂卡朗专家]";
				mes "嗯……例如，众所周知，它们生活在桥下、香蕉林和竹林中以及大树下。";
				next;
				mes "[蒂卡朗专家]";
				mes "这只是我的观点，但你不同意他们生活在黑暗的地方，因为更容易恶作剧吗？";
				break;
			}
			next;
		}
	case 3:
		mes "[蒂卡朗专家]";
		mes "哈哈哈。现在你知道我有多厉害了吗？";
		next;
		if (countitem(6496) >= 3 && countitem(6497) >= 5) {
			mes "[蒂卡朗专家]";
			mes "哦！这种制作“提克巴朗腰带”的材料不是用来驯服提克巴朗的吗？";
			next;
			mes "[蒂卡朗专家]";
			mes "“^F80835提克巴朗腰带^000000”用于轻松捕获提克巴朗。但这并不意味着它100%成功。感兴趣的？要我给你做一份吗？";
			next;
			switch(select("是的，我有兴趣。：不，我自己可以抓一张。")) {
			case 1:
				delitem 6496,3; //Tikbalang_Thick_Spine
				delitem 6497,5; //Lesser_Agimat
				getitem 12699,1; //Tikbalang_Belt
				mes "[蒂卡朗专家]";
				mes "呀呀呀呀呀！是啊！";
				next;
				specialeffect EF_SONICBLOW2;
				select("啊？");
				mes "[蒂卡朗专家]";
				mes "“^F80835Tikbalang Belt^000000”已创建。";
				close;
			case 2:
				mes "[蒂卡朗专家]";
				mes "你？哈...如果你愿意的话可以尝试一下。";
				close;
			}
		}
		mes "[蒂卡朗专家]";
		mes "捕获提克巴朗有简单的方法和困难的方法。你更喜欢哪一个？";
		next;
		switch(select("简单的方法：困难的方法。")) {
		case 1:
			mes "[蒂卡朗专家]";
			mes "哈哈。我自己想出了简单的方法。";
			next;
			mes "[蒂卡朗专家]";
			mes "给我带来 3 个提克巴朗的粗刺和 5 个小型阿基马特，制作一条“^F80835提克巴朗腰带^000000”，以帮助您轻松捕获提克巴朗。";
			next;
			mes "[蒂卡朗专家]";
			mes "哈哈哈哈哈哈哈！";
			mes "我再说一遍。";
			mes "这是 3 个提克巴朗的粗刺和 5 个小型阿基马特。明白了吗？";
			close;
		case 2:
			mes "[蒂卡朗专家]";
			mes "这对我来说很容易，但我不了解你。";
			next;
			mes "[蒂卡朗专家]";
			mes "提克巴朗的脖子后面有一根尖锐的鬃毛。";
			next;
			mes "[蒂卡朗专家]";
			mes "当然！它们有好几个，但你必须买最厚的三个。";
			next;
			mes "[蒂卡朗专家]";
			mes "这三个鬃毛是弱点。你可以通过拉出鬃毛来驯服提克巴朗。";
			next;
			mes "[蒂卡朗专家]";
			mes "现在让我解释一下如何拔出这些鬃毛。";
			next;
			mes "[蒂卡朗专家]";
			mes "您必须像蝴蝶一样飞翔，像蜜蜂一样降落在提克巴朗背上。";
			next;
			mes "[蒂卡朗专家]";
			mes "当然！提克巴朗会发怒并竭尽全力将你甩开。";
			next;
			mes "[蒂卡朗专家]";
			mes "您所要做的就是坚持下去，直到 Tikbalang 耗尽为止。";
			next;
			mes "[蒂卡朗专家]";
			mes "不过，提克巴朗是强壮的生物，需要四天三夜才会感到疲倦。但我们不要关注太多细节。";
			next;
			mes "[蒂卡朗专家]";
			mes "这意味着！！提克巴朗已经被驯服了。";
			close;
		}
	}
}

// Upgrade Boss Equipment :: malaya_mvpitem
//============================================================
ma_fild01,158,243,6	script	Tribe Blacksmith#malaya	582,{
	disable_items;
	mes "[巴亚尼]";
	mes "如果你带来一件拥有巨大力量的盔甲，我会升级你的盔甲。";
	next;
	switch (select("升级什么装备？：需要什么材料？：升级后会变成什么？：请升级这个。")) {
	case 1:
		mes "[巴亚尼]";
		mes "你的问题太简单了，但是！";
		next;
		mes "[巴亚尼]";
		mes "也很重要。";
		next;
		mes "[巴亚尼]";
		mes "^7B4772巴科纳瓦鳞甲^000000由已知能吞噬月亮的巴科纳瓦怪物的鳞片制成。";
		next;
		mes "[巴亚尼]";
		mes "轻便而坚固的^7B4772Kalasag^000000由生长在马来亚港附近的野生藤条制成。";
		next;
		mes "[巴亚尼]";
		mes "^7B4772布瓦亚麻袋布^000000 由食人鳄鱼布瓦亚的麻袋制成。";
		next;
		mes "[巴亚尼]";
		mes "^7B4772Bangungot梦魇之靴^000000充满了怪物Bangungot的仇恨和复仇。";
		next;
		mes "[巴亚尼]";
		mes "正如刚才提到的。";
		next;
		mes "[巴亚尼]";
		mes "我将只用从可怕的怪物身上掉落的最坚固的盔甲来制造强大的盔甲。";
		close;
	case 2:
		mes "[巴亚尼]";
		mes "学得很好。";
		mes "看来你已经知道生活中没有免费的事情了。";
		next;
		mes "[巴亚尼]";
		mes "首先要记住的是，升级的对象本身必须很强。至少能够承受^FF0000+9精炼^000000。";
		next;
		mes "[巴亚尼]";
		mes "其次是真正的力量，只有自然获得的力量才能产生。我需要^FF000020个远古恩怨^000000来保护我在精炼时免受邪恶侵害。";
		next;
		mes "[巴亚尼]";
		mes "当^FF0000+9精炼强铠^000000与^FF000020远古怨恨^000000组合进行保护时！";
		next;
		mes "[巴亚尼]";
		mes "您可以从旧废料中获得全新且改进的装甲。";
		next;
		mes "[巴亚尼]";
		mes "永远期待这一点。";
		close;
	case 3:
		mes "[巴亚尼]";
		mes "听着，因为这是一个非常重要的问题。";
		next;
		mes "[巴亚尼]";
		mes "就算我说一百倍以上也没关系，升级后的装甲很强大。";
		next;
		mes "[巴亚尼]";
		mes "除非持有它的人不相信！询问发生了什么变化并自己决定！";
		next;
		while (1) {
			switch (select("没有了。:巴科纳瓦鳞片 铠甲:盾牌:布瓦亚麻袋 布:班贡戈特 梦魇之靴")) {
			case 1:
				mes "[巴亚尼]";
				mes "看来您已经没有问题了。";
				mes "别忘了。你必须放弃一些东西才能获得一些东西。";
				close;
			case 2:
				mes "[巴亚尼]";
				mes "Bakonawa Scale Armor 为所有职业的所有统计数据增加+1，这对每个人来说都是很棒的盔甲。";
				next;
				mes "[巴亚尼]";
				mes "但我确信你内心认为这还不够。";
				next;
				mes "[巴亚尼]";
				mes "这就是为什么+2可以添加到所有统计数据中，并且如果升级的话，可以为您的插槽添加一个额外的卡槽。";
				next;
				break;
			case 3:
				mes "[巴亚尼]";
				mes "卡拉萨格是一个很好的盾牌，每精炼 3 点，就能减少 Boss 怪物造成的伤害 1%。";
				next;
				mes "[巴亚尼]";
				mes "但还不够。不敢相信盾牌没有地方装备卡牌。";
				next;
				mes "[巴亚尼]";
				mes "这就是为什么我可以在升级后为您的插槽添加一个额外的卡插槽。";
				next;
				break;
			case 4:
				mes "[巴亚尼]";
				mes "布瓦亚麻袋布的治疗能力和治疗物品效果每精炼 3 次增加 1%。更不用说它可以减少水、土、火、风元素怪物 10% 的伤害。";
				next;
				mes "[巴亚尼]";
				mes "但还不够。不敢相信这些衣服没有装备卡片的地方。大家都知道衣服上就应该有Raydric！";
				next;
				mes "[巴亚尼]";
				mes "不用担心！如果升级的话，我可以在您的插座上添加一个额外的卡插槽。";
				next;
				break;
			case 5:
				mes "[巴亚尼]";
				mes "Bangungot 梦魇之靴每精炼 1 点，增加 +1 MDEF，并且从 14 精炼及以上开始，速度会增加。";
				next;
				mes "[巴亚尼]";
				mes "月光花鞋、斯雷普尼尔等鞋子的提速效果，对于普通人来说是遥不可及的。";
				next;
				mes "[巴亚尼]";
				mes "当然，+14 精炼并不容易，但有一个简单的方法可以获得它。";
				next;
				mes "[巴亚尼]";
				mes "通过升级你的鞋子，你可以从+12精炼开始获得速度提升！";
				next;
				mes "[巴亚尼]";
				mes "而且事情还没有结束！";
				mes "我还将在您的插座中放置一个额外的插槽以添加卡。";
				next;
				break;
			}
			mes "[巴亚尼]";
			mes "然而，你必须放弃一些东西才能获得一些东西。";
			next;
			mes "[巴亚尼]";
			mes "^0000FF同时装备卡拉萨格、布瓦亚麻袋布、巴科纳瓦鳞甲和梦魇之靴将会失去^FF0000套装效果^0000FF。^000000";
			next;
			mes "[巴亚尼]";
			mes "想清楚了。下一个问题？";
			next;
		}
	}
	mes "[巴亚尼]";
	mes "哈哈哈哈哈哈哈！好的！";
	mes "你已经把材料带来了吧？";
	next;
	if (select("噢...抱歉...：准备工作完成！！") == 1) {
		mes "[巴亚尼]";
		mes "哦不！";
		mes "我需要一套轻质但坚固的铠甲，精炼度+9以上，还有20个远古怨恨！！";
		close;
	}
	if (countitem(6499) < 20) {
		mes "[巴亚尼]";
		mes "你说所有的准备工作都完成了，你就给我这个？！我至少需要20个远古恩怨来炼制你的物品。";
		close;
	}
	mes "[巴亚尼]";
	mes "那么它会是什么样的铠甲呢？";
	next;
	switch (select("巴科纳瓦鳞甲：盾牌：鳄鱼麻袋布：班贡戈特梦魇之靴")) {
	case 1:
		.@part    = EQI_ARMOR;
		.@item    = 15051;
		.@newItem = 15052;
		break;
	case 2:
		.@part    = EQI_HAND_L;
		.@item    = 2169;
		.@newItem = 2170;
		break;
	case 3:
		.@part    = EQI_GARMENT;
		.@item    = 2590;
		.@newItem = 2591;
		break;
	case 4:
		.@part    = EQI_SHOES;
		.@item    = 2491;
		.@newItem = 2492;
		break;
	}
	
	if (!getequipisequiped(.@part)) {
		mes "[巴亚尼]";
		mes "升级时必须穿戴装备，不能不带装备。";
		close;
	} else if (getequipid(.@part) != .@item) {
		mes "[巴亚尼]";
		mes "这是什么啊！您说您想升级" + getitemname(.@item) + "，但为什么要给我这个？你应该穿着" + getitemname(.@item) + ".";
		close;
	}
	.@equip_refine = getequiprefinerycnt(.@part);
	if (.@equip_refine < 9) {
		mes "[巴亚尼]";
		mes "不，该产品的坚固性尚未经过测试。它必须至少精炼到+9，我才能说，‘哦，这是非常坚固的盔甲。";
		close;
	}

	mes "[巴亚尼]";
	mes "看来你已经做好功课了！看不出有什么破绽！然后在开始细化之前我有一个问题要问。";
	next;
	mes "[巴亚尼]";
	mes "^0000FF物品精炼后，精炼等级将为^FF00000^0000FF，物品将会升级。^000000 你明白这部分了吗？";
	next;
	if (select("否：是的。") == 1) {
		mes "[巴亚尼]";
		mes "什么？你不知道这个吗？然后，阅读我的说明并再次回来。";
		close;
	}
	mes "[巴亚尼]";
	mes "好的。下一个问题。细化完成后，";
	mes "^0000FF同时装备卡拉萨格、布瓦亚麻袋布、巴科纳瓦鳞甲和梦魇之靴将会失去^FF0000套装效果^0000FF。^000000";
	mes "你明白这一点吗？";
	next;
	if (select("否：是的。") == 1) {
		mes "[巴亚尼]";
		mes "什么？你不知道这个吗？然后，阅读我的说明并再次回来。";
		close;
	}
	mes "[巴亚尼]";
	mes "惊人的！那么我们就开始精炼" + getitemname(.@item) + ".";
	next;
	specialeffect EF_SONICBLOW;
	mes "[巴亚尼]";
	mes "噗！！哇！！拖鞋！";
	next;
	specialeffect2 EF_TRIPLEATTACK;
	mes "[巴亚尼]";
	mes "嘭！！";
	next;
	delitem 6499,20; //Ancient_Grudge

	// anti-hack
	if (callfunc("F_IsEquipIDHack", .@part, .@item) || callfunc("F_IsEquipRefineHack", .@part, .@equip_refine))
		close;

	delequip .@part;
	getitem .@newItem, 1; 
	mes "[巴亚尼]";
	mes "哈哈。完美的。";
	mes "恭喜。你的盔甲比以前更好了。";
	close;
}

// Secret in the Woods :: malaya_buwaya
//============================================================
malaya,305,281,3	script	Guard#buwaya	570,7,7,{
	if (malaya_hi < 10) {
		mes "- 从守卫脸上警惕的表情来看，他看到你时很警惕。他不会恐吓你，但似乎也不会和你打交道。 -";
		next;
		mes "- 村里有人可以说话吗？ -";
		close;
	} else if (malaya_hi < 20) {
		mes "[守卫]";
		mes "马来亚港外有一个名为^3131FFBaryo Mahiwaga^000000的小区域。";
		mes "这个地方比我们这里更接近大自然。";
		next;
		mes "[守卫]";
		mes "另一方面，该地区充满了凶猛的怪物。在那里旅行时要照顾好自己。";
		close;
	}
	if (malaya_buwaya == 0) {
		mes "[守卫]";
		mes "这几天偷偷离开村子的人越来越多了。你是否也在前往树林寻找神秘宝藏呢？";
		next;
		if (BaseLevel < 100) {
			mes "[守卫]";
			mes "我收回这句话。转念一想，我想你这样的弱者也不敢去那里。";
			next;
			mes "[守卫]";
			mes "如果你想离开马来亚港，你最好紧紧握住你妈妈的手，否则怪物会把你活活吃掉。哈哈。";
			close;
		}
		mes "[守卫]";
		mes "这就是为什么现在这里的外人越来越多了吗？现在不要偷偷摸摸，万事通。你怎么知道我是否愿意带你到处走走？";
		next;
		if (select("宝藏？：忽略。") == 2) {
			mes "[守卫]";
			mes "你不理我吗？呸。";
			close;
		}
		mes "[守卫]";
		mes "哦，所以你不是来寻找宝藏的吗？";
		next;
		mes "[守卫]";
		mes "我听说人们正在谈论隐藏在树林深处的神秘宝藏。";
		set malaya_buwaya,1;
		setquest 2271;
		next;
	}
	if (malaya_buwaya == 1) {
		mes "[守卫]";
		mes "你看到那边那群人了吗？他们每天总是聚在一起谈论这件事。";
		mes "如果您也有兴趣，请尝试与他们交谈。";
		close;
	}
	mes "[守卫]";
	mes "那么关于宝藏的说法只是谣言？我这么问并不是因为我想一夜暴富。哈哈。";
	close;
OnTouch:
	if ((malaya_hi > 19) && (malaya_buwaya == 0)) {
		emotion ET_SURPRISE;
		emotion ET_SURPRISE, playerattached();
	}
	end;
}
malaya,276,288,5	script	Port Malaya Villager::buwaya_A	582,{
	if (malaya_hi < 20) {
		mes "- 一边互相窃窃私语，一边警惕地看着你。 -";
		close;
	} else if (malaya_buwaya == 1) {
		emotion ET_SURPRISE, getnpcid(0, "buwaya_A");
		mes "[马来亚港村民]";
		mes "不，我听说他们在树林里迷路了。";
		mes "谁会在我们这样的小村庄里藏匿这样的宝藏呢？";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "难道是怪物？我奶奶说，树林深处住着一条头很大的龙。";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0, "buwaya_C");
		mes "[马来亚港村民]";
		mes "不，听我说。";
		next;
		mes "[马来亚港村民]";
		mes "你们都知道^3131FFTotoy^000000吗？住在^3131FF旅馆^000000的孩子。";
		mes "嗯，你知道托托最近从树林里回来了吗？";
		next;
		emotion ET_HUK, getnpcid(0, "buwaya_A");
		emotion ET_HUK, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "真的吗？？？他活着回来了？";
		next;
		emotion ET_SURPRISE, getnpcid(0, "buwaya_C");
		mes "[马来亚港村民]";
		mes "是的。但奇怪的是，捣蛋鬼^3131FFTotoy^000000现在静静地待在家里，从来不出来。";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "为什么？";
		next;
		emotion ET_SURPRISE, getnpcid(0, "buwaya_C");
		mes "[马来亚港村民]";
		mes "你不明白吗？托托一定是找到了宝藏。";
		next;
		emotion ET_HUK, getnpcid(0, "buwaya_A");
		emotion ET_HUK, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "什么！！！！那么^3131FFTotoy^000000现在有钱了吗？";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0, "buwaya_C");
		mes "[马来亚港村民]";
		mes "我不这么认为。";
		mes "我看到^3131FF托托伊^000000回家了，但托托伊什么也没带。";
		mes "但后来我一定错过了，因为我立刻跑回家了。";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "那么^3131FFTotoy^000000在家做什么呢？";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_C");
		mes "[马来亚港村民]";
		mes "我认为托托伊正在制定一项计划，在我们不知情的情况下将宝藏带回来。";
		mes "把所有的宝藏都占为己有，这个贪婪的孩子。";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_A");
		mes "[马来亚港村民]";
		mes "这是真的吗？";
		next;
		emotion ET_BIGTHROB, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "宝藏在我手里会更好~";
		mes "我每天都会清洁它，让它闪闪发光，并将它用作美丽的装饰品。啊~~~";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_C");
		mes "[马来亚港村民]";
		mes "那么我们要不要和^3131FFTotoy^000000谈谈宝藏在哪里呢？";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_A");
		mes "[马来亚港村民]";
		mes "哇。这是一个很棒的主意。难怪你是领导！";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_A");
		mes "[马来亚港村民]";
		mes "但^3131FFTotoy^000000会轻易放弃这些信息吗？";
		mes "因为托托伊太狡猾了，竟然想把所有宝藏都偷走。";
		next;
		emotion ET_CRY, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "然后我们应该说服^3131FFTotoy^000000告诉我们宝藏在哪里，而不是自己去寻找。";
		next;
		emotion ET_CRY, getnpcid(0, "buwaya_B");
		mes "[马来亚港村民]";
		mes "啊~~~现在想要漂亮的东西真是太难了~~~！！！！！！";
		set malaya_buwaya,2;
		erasequest 2271;
		setquest 2272;
		close;
	} else if (malaya_buwaya == 2) {
		mes "- 最好参观一下这个玩具，以获取有关宝藏的更多信息。 -";
		close;
	} else {
		mes "- 人们说话时表情严肃。 -";
		close;
	}
}
malaya,278,288,3	duplicate(buwaya_A)	Port Malaya Villager::buwaya_B	583
malaya,276,286,7	duplicate(buwaya_A)	Port Malaya Villager::buwaya_C	582

ma_in01,47,101,3	script	Totoy#buwaya	577,7,7,{
	if ((malaya_hi < 20) || (malaya_buwaya < 2)) {
		mes "- 看到某人眼神呆滞，浑身颤抖。 -";
		close;
	}
	if (malaya_buwaya == 2) {
		mes "- 看到某人眼神呆滞，浑身颤抖。 -";
		next;
		if (select("拍拍他的肩膀：别理他。") == 2)
			close;
		emotion ET_HUK;
		mes "[正确]";
		mes "哇！不！离开！请别打扰我！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "嘿，你还好吗？";
		next;
		mes "[正确]";
		mes "呃……你是人吗？你是谁？";
		next;
		mes "- 他直视着你的脸，但似乎没有认出你。 -";
		next;
		mes "[正确]";
		mes "谁在那里？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我是" + strcharinfo(0) + "。你是托托伊吧？人们说你找到了宝藏。这是真的吗？";
		next;
		mes "[正确]";
		mes "什么宝物？";
		mes "我看不到。我瞎了。请帮我。我又累又沮丧。";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "发生了什么？";
		next;
		mes "[正确]";
		mes "不能说太久。我需要先治愈我的眼睛。";
		mes "抽屉里应该还剩下一些^3131FF绿色药水^000000。你能帮我拿出来吗？";
		set malaya_buwaya,3;
		close;
	} else if (malaya_buwaya == 3) {
		if (!countitem(506)) {
			mes "[正确]";
			mes "不能说太久。我需要先治愈我的眼睛。";
			mes "抽屉里应该还剩下一些^3131FF绿色药水^000000。你能帮我拿一下吗？";
			close;
		}
		mes "[正确]";
		mes "你好？嘿，你还在吗？绿色药水怎么了？天哪，这让我发疯。";
		next;
		if (select("交出绿色药水。：不要交出药水。") == 2) {
			mes "[正确]";
			mes "你真的离开了吗？嘿！该死！";
		} else {
			mes "[正确]";
			mes "咕噜咕噜，咕噜咕噜……";
			delitem 506,1; //Green_Potion
			set malaya_buwaya,4;
		}
		close;
	} else if (malaya_buwaya == 4) {
		emotion ET_SURPRISE;
		mes "[正确]";
		mes "我可以看到！！我的眼睛好用！！！";
		mes "耶！我现在感觉好多了！";
		next;
		emotion ET_THINK, playerattached();
		emotion ET_BEST;
		mes "[正确]";
		mes "哇！你看起来比听起来更好。哈哈。";
		next;
		mes "[正确]";
		mes "但你说什么？有什么关于宝藏的事情吗？";
		mes "你说我捡到宝了？";
		mes "那是关于什么的？";
		next;
		select("告诉他人们在谈论什么。");
		emotion ET_SMILE;
		mes "[正确]";
		mes "什么？";
		mes "普哈哈！托托有钱了！一夜暴富！艾德酋长！";
		next;
		emotion ET_HNG;
		mes "[正确]";
		mes "抱歉，我去树林里收集虫子了。希望我在其中时看到了宝藏。哼！";
		next;
		emotion ET_THINK;
		mes "[正确]";
		mes "我确实走进了树林深处，因为我在收集虫子方面毫无进展。但谁能想到我会陷入这样的困境呢？";
		next;
		if (select("Totoy 看到了什么：关于 bug") == 2) {
			mes "[正确]";
			mes "我只是想向人们展示我收集的可爱虫子。哈哈。";
			next;
			emotion ET_SMILE;
			mes "[正确]";
			mes "将冰块或虫子滴到人们的衣服上就像是日常问候，不是吗？";
			next;
			mes "[正确]";
			mes "我喜欢看到人们像参加马拉松比赛一样绕着村庄奔跑。呵呵。";
			next;
		}
		mes "[正确]";
		mes "我以为人们不会因为普通的虫子而逃跑，所以我和艾德一起去了树林里。";
		next;
		mes "[正确]";
		mes "啊，艾德是我可爱的小狗。他非常友善和可爱。我在全世界最好的朋友。";
		next;
		emotion ET_THINK;
		mes "[正确]";
		mes "艾德通常会吠叫很多，但当他吠叫并拉扯我的袖子时，我应该环顾四周。";
		next;
		mes "[正确]";
		mes "- 托玩具弯下腰对你低声说话，就像墙壁有耳朵一样。 -";
		next;
		mes "[正确]";
		mes "我的身后有一只嘴巴有房子那么大的怪物。";
		next;
		select("怪物？！");
		mes "[正确]";
		mes "嘘！安静。我从来没有见过这么大的嘴。满是从尖牙里流出来的口水河。一想到这个我就想躲起来。";
		next;
		mes "[正确]";
		mes "最可怕的是这个怪物有两个头。在您亲眼目睹之前您不会相信。";
		next;
		emotion ET_CRY;
		mes "[正确]";
		mes "艾德拼尽全力咬住怪物的腿，让我逃脱。但我不知道他后来怎么样了。闻一闻~";
		next;
		mes "[正确]";
		mes "就在那时，我的眼睛受伤了。说实话我都不记得我是怎么回来的。";
		next;
		select("关于怪物");
		mes "[正确]";
		mes "不知道。我还是第一次见到这样的怪物。谁能活着讲述这个故事？";
		next;
		mes "[正确]";
		mes "等等，也许^FF0000狩猎大师^000000可能知道怪物的事。他们说他与各种各样的怪物战斗。";
		next;
		mes "[正确]";
		mes "我需要一些独处的时间。我需要为艾德立一块墓碑。如果你想见到^FF0000狩猎大师^000000，你可以在武器店附近找到他。";
		next;
		mes "[正确]";
		mes "并告诉其他人不要散布有关宝藏的谣言。他们不知道我经历了什么。闻一闻！我要把远古蠕虫放在每个人的衣服里！";
		set malaya_buwaya,5;
		erasequest 2272;
		setquest 2273;
		close;
	} else if (malaya_buwaya == 5) {
		mes "[正确]";
		mes "我必须为艾德建造一个坟墓。我忠实的朋友艾德...";
		mes "如果你想见到^FF0000狩猎大师^000000，你可以在武器店附近找到他。";
		close;
	} else if (malaya_buwaya == 6) {
		mes "[正确]";
		mes "艾德！！诶诶诶诶诶！！！";
		mes "不敢相信你为了救我而献出生命。哀号！！！";
		next;
		mes "- 托托哭得这么伤心，他不可能说谎。 -";
		close;
	} else if (malaya_buwaya == 7) {
		mes "[正确]";
		mes "我在哪里看到怪物了？";
		next;
		mes "[正确]";
		mes "嗯……嗯……";
		mes "我正忙着逃跑……";
		next;
		mes "[正确]";
		mes "确实是在树林深处。甚至可能超过了 Baryo Mahiwaga。";
		mes "我想我听到了^3131FF流水的声音^000000。巨大的嘶嘶声。我只记得这些。";
		close;
	} else if ((malaya_buwaya > 7) && (malaya_buwaya < 12)) {
		mes "[正确]";
		mes "可怜的艾德。我想念艾德。哀号！！！！";
		close;
	} else if (malaya_buwaya == 12) {
		emotion ET_CRY;
		mes "[正确]";
		mes "可怜的艾德。我想念艾德。哀号！！！！";
		next;
		enablenpc "Dog#buwaya_totoi";
		mes "[狗]";
		mes "吠叫！！";
		next;
		emotion ET_HUK;
		mes "[正确]";
		mes "艾德！！";
		mes "艾德！！！你还活着！！！";
		mes "你回来了！！！我太高兴了！！！！";
		next;
		mes "[正确]";
		mes "你把艾德带回来了吗？";
		mes "太感谢了！";
		mes "你没看到怪物吧？";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "这个怪物叫做布瓦亚。我把怪物的事告诉了守卫。你最好不要再靠近那个地方了。";
		next;
		mes "[正确]";
		mes "好的！";
		mes "呵呵。艾德，树林太危险了，我们不能再去那里捉虫子了。";
		next;
		mes "[狗]";
		mes "呜咽...";
		next;
		mes "[正确]";
		mes "但我相信我们可以找到一种方法来保持我们在其他令人毛骨悚然的东西上的声誉！";
		next;
		mes "[狗]";
		mes "吠叫！！";
		next;
		/*
		// Better translation needed.
		mes "[正确]";
		mes "嗯……嘿！";
		next;
		select("你是一个" + ((Sex == SEX_MALE) ? "男孩" : "女孩") + "，不是吗？");
		emotion ET_HUK, playerattached();
		mes "[正确]";
		mes "啊？";
		if (Sex == SEX_FEMALE) {
			mes "托托伊是个女孩，而你是个男孩。";
			mes "你不是男孩吗？";
		} else {
			mes "托托是个女孩，你也是个女孩。";
			mes "你不是女孩吗？";
		}
		next;
		mes "[正确]";
		mes "是因为我的名字吗，托托伊？但这是我父母给我起的名字，他们认为我出生时会是个男孩。哈哈！";
		next;
		*/
		mes "[正确]";
		mes "不管怎样，谢谢你把我最好的朋友带回来。";
		mes "我没有太多，但我想谢谢你。等等，让我看看抽屉里有什么。他他――";
		set malaya_buwaya,13;
		erasequest 2278;
		setquest 2279;
		close;
	} else if (malaya_buwaya == 13) {
		if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
			mes "- 等待！！ -";
			mes "- 你身上带的东西太多了。 -";
			mes "- 无法收到该物品。 -";
			mes "- 清理你的物品 -";
			mes "- 请再试一次。 -";
			close;
		}
		mes "- 托玩具穿过抽屉，把它翻了个底朝天。把房间弄得乱七八糟。 -";
		next;
		mes "[正确]";
		mes "找到了！";
		next;
		mes "[正确]";
		mes "这里。我妈妈给了我，但我不知道怎么用……呵呵。";
		mes "我希望你能使用它。";
		next;
		mes "[正确]";
		mes "无聊的时候就来找我吧！";
		mes "就别再问宝物了~！";
		next;
		mes "[狗]";
		mes "汪汪汪！！！";
		set malaya_buwaya,14;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 6497,10; //Lesser_Agimat
		else
			getitem 6497,5; //Lesser_Agimat
		disablenpc "Dog#buwaya_totoi";
		erasequest 2279;
		setquest 2280;
		close;
	} else {
		mes "[正确]";
		mes "艾德出去玩了，所以我一个人。";
		mes "会有什么很棒的东西让人们感到惊讶吗？";
		close;
	}
OnTouch_:
	emotion ET_HUK;
	end;
}

ma_in01,43,101,7	script	Dog#buwaya_totoi	81,{
	end;
OnInit:
	disablenpc "Dog#buwaya_totoi";
	end;
}

ma_in01,44,105,3	script	Drawer#buwaya	844,{
	if (malaya_buwaya == 3) {
		mes "- 你在玩具抽屉里寻找绿色药水。 -";
		next;
		mes "- 翻找，摸索。 -";
		next;
		mes "- 翻找，摸索。 -";
		mes "- 翻找，摸索。 -";
		next;
		mes "- 叮当声、叮当声、嘎吱声。 -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "什么？我只看到一个空的药水瓶。";
		mes "这是否意味着我必须自己去拿药水？那个Totoy真是个麻烦制造者。";
		close;
	}
	end;
}

malaya,290,152,5	script	Master of Hunting#buwaya	578,{
	if ((malaya_hi < 20) || (malaya_buwaya < 5)) {
		mes "[狩猎大师]";
		mes "哦！我有！我有！";
		mes "我是狩猎大师！除了一件事，我什么都不怕！我害怕外人...";
		close;
	}
	if (malaya_buwaya == 5) {
		mes "[狩猎大师]";
		mes "是的！是的！是的！";
		mes "我千里迢迢前往符文米德加特王国，打败愤怒的未成年人。";
		next;
		mes "[狩猎大师]";
		mes "然后我成功地杀死了穆卡，这个有着扰乱世界和平的恶魔声音的人。";
		mes "哇！他真的很坚强。一想到他我就开始出汗。";
		next;
		mes "[狩猎大师]";
		mes "哟！看来你自己也有一些战斗故事。你见过未成年人吗？哈哈哈！";
		next;
		mes "[狩猎大师]";
		mes "所以你来这里是为了了解我出色的狩猎技巧吗？或者让我发表一篇关于狩猎大师的文章？嗬！";
		next;
		if (select("关于Totoys 怪物：中断。") == 2) {
			mes "[狩猎大师]";
			mes "哦？嘿！你要去哪里？";
			close;
		}
		mes "[狩猎大师]";
		mes "你说有人看到了怪物？";
		next;
		mes "[狩猎大师]";
		mes "马来亚港进出有很多怪物。这个有什么特别之处呢？";
		next;
		select("关于有两个头的怪物");
		mes "[狩猎大师]";
		mes "嗬！你说是有两个头的怪物？你在开玩笑吧？到底哪里有长着两个头的怪物？！";
		next;
		mes "[狩猎大师]";
		mes "这孩子一定是被秃鹰什么的吓到了。";
		mes "有句话说，有人惊讶地看到佩米特，也会惊讶地看到桃树。哈哈！";
		next;
		mes "[狩猎大师]";
		mes "你不应该对成年人撒谎。我知道你想引起狩猎大师的注意。哈哈！";
		next;
		if (select("我会证明这一点：怀疑托托伊。") == 2) {
			mes "[狩猎大师]";
			mes "孩子们讲故事有自己的原因。我确信托托伊也是一样。";
			set malaya_buwaya,6;
			close;
		}
		mes "[狩猎大师]";
		mes "哦！真的吗？如果您确实认为孩子说的是真话，请带上证据。";
		next;
		mes "[狩猎大师]";
		mes "每一种生物都会留下某种痕迹。无论你走到哪里，你都会留下痕迹和气味。我的意思是，尤其是在私人场所。呵呵！";
		next;
		mes "[狩猎大师]";
		mes "尝试从孩子看到怪物的地方收集 10 个动物样本。我会从样本中寻找那个怪物的踪迹。";
		next;
		mes "[狩猎大师]";
		mes (Sex == SEX_MALE) ? "这不会令人愉快，但任何勇敢的男人都可以轻松做到，你同意吗？" : "我不想让漂亮女孩的手闻起来很难闻，但我可以不在乎像你这样的人。哈哈！";
		set malaya_buwaya,7;
		erasequest 2273;
		setquest 2274;
		close;
	} else if (malaya_buwaya == 6) {
		mes "[狩猎大师]";
		mes "哦，你回来了！";
		next;
		if (select("让我们看看里面有没有怪物！：我不认为有怪物。") == 2) {
			mes "[狩猎大师]";
			mes "这是一个小孩子的玩笑。哈哈。";
			close;
		}
		mes "[狩猎大师]";
		mes "哦！真的吗？如果您确实认为孩子说的是真话，请带上证据。";
		next;
		mes "[狩猎大师]";
		mes "每一种生物都会留下某种痕迹。无论你走到哪里，你都会留下痕迹和气味。我的意思是，尤其是在私人场所。呵呵！";
		next;
		mes "[狩猎大师]";
		mes "尝试从孩子看到怪物的地方收集 10 个动物样本。我会从样本中寻找那个怪物的踪迹。";
		next;
		mes "[狩猎大师]";
		mes (Sex == SEX_MALE) ? "这不会令人愉快，但任何勇敢的男人都可以轻松做到，你同意吗？" : "我不想让漂亮女孩的手闻起来很难闻，但我可以不在乎像你这样的人。哈哈！";
		set malaya_buwaya,7;
		erasequest 2273;
		setquest 2274;
		close;
	} else if (malaya_buwaya == 7) {
		if (countitem(6519) < 10) {
			mes "[狩猎大师]";
			mes "如果你想证明有两个头的怪物，就给我带回样本。";
			close;
		}
		mes "[狩猎大师]";
		mes "啊！那就太犯规了";
		mes "你真的带回了样品。";
		mes "嗬！把它留在那里，洗手后再回来。即使是上帝也不会用这种恶臭对你微笑。";
		delitem 6519,10; //Collected_Sample
		set malaya_buwaya,8;
		erasequest 2274;
		setquest 2275;
		close;
	} else if (malaya_buwaya == 8) {
		mes "[狩猎大师]";
		mes "嗬！我可以吗？";
		next;
		mes "- 翻找，摸索。 -";
		next;
		mes "- 翻找，摸索。 -";
		mes "- 蠕动，蠕动。 -";
		next;
		mes "- 翻找，摸索。 -";
		mes "- 蠕动，蠕动。 -";
		mes "- 摇摆，摇摆。 -";
		next;
		mes "[狩猎大师]";
		mes "嗬！这是！！";
		next;
		mes "[狩猎大师]";
		mes "哇！嗬！嗬！嗬！惊人的！！！！！！";
		next;
		mes "[狩猎大师]";
		mes "你！来这里感受一下吧！";
		set malaya_buwaya,9;
		enablenpc "#buwaya_soil";
		close;
	} else if (malaya_buwaya == 9) {
		mes "[狩猎大师]";
		mes "不要只是站在那里。触摸样品！";
		enablenpc "#buwaya_soil";
		close;
	} else if (malaya_buwaya == 10) {
		mes "[狩猎大师]";
		mes "赶紧告诉卫队长布瓦亚又活跃了。匆忙！你会在村庄北边找到守卫队长。";
		close;
	} else {
		mes "[狩猎大师]";
		mes "打瞌睡...";
		close;
	}
}

malaya,291,152,3	script	#buwaya_soil	557,{
	if (malaya_buwaya == 9) {
		mes "- 翻找，摸索。 -";
		next;
		mes "- 翻找，摸索。 -";
		mes "- 蠕动，蠕动。 -";
		next;
		mes "- 翻找，摸索。 -";
		mes "- 蠕动，蠕动。 -";
		mes "- 摇摆，摇摆。 -";
		next;
		if (rand(1,10) <= 5) {
			mes "[" + strcharinfo(0) + "]";
			mes "我什么也没看到。";
			next;
			mes "[狩猎大师]";
			mes "不可能！仔细看看！";
		} else {
			mes "- 用手指末端感觉到有尖的东西。 -";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "哎哟!";
			mes "这是什么？";
			next;
			mes "[狩猎大师]";
			mes "嗬！这是巨大的！而且密度如此之大，很容易划伤钢铁！";
			next;
			mes "[狩猎大师]";
			mes "这是^3131FF布瓦亚^000000的牙齿！";
			mes "怎么会这样！";
			next;
			select("鳄鱼？");
			mes "[狩猎大师]";
			mes "啊!是的！别再举着它了。很臭。去洗手吧。";
			next;
			mes "[狩猎大师]";
			mes "唔。这孩子看到的怪物一定是布瓦亚。毫无疑问。";
			next;
			mes "[狩猎大师]";
			mes "我听说我妈妈那边的祖父叔叔的邻居的妻子也被布瓦亚杀死了。";
			next;
			mes "[狩猎大师]";
			mes "他们说，布瓦亚经过之后，就没有任何生物留下了。";
			mes "托托伊是一个幸运的孩子。哇！";
			next;
			mes "[狩猎大师]";
			mes "布瓦亚已经很长时间没有活动了。想知道是不是冬眠了？唔。";
			next;
			mes "[狩猎大师]";
			mes "既然知道外面有这样的怪物，我也该小心点了。";
			mes "必须告诉村民不要进入树林太深。";
			next;
			mes "[狩猎大师]";
			mes "请去告诉卫队长布瓦亚又活跃了。";
			mes "同时我会联系其他猎人，想出杀死布瓦亚的计划。";
			set malaya_buwaya,10;
			disablenpc "#buwaya_soil";
			erasequest 2275;
			setquest 2276;
		}
		close;
	}
	end;
OnInit:
	disablenpc "#buwaya_soil";
	end;
}

-	script	Unknown Trace#buwaya	-1,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
		mes "- 等待！！ -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 无法收到该物品。 -";
		mes "- 清理你的物品 -";
		mes "- 请再试一次。 -";
		close;
	}
	if (malaya_buwaya == 7) {
		if (countitem(6519) >= 10) {
			mes "- 您无需收集更多样本。 -";
			close;
		}
		mes "- 你看到有东西与土壤和草纠缠在一起。 -";
		next;
		if (rand(1,10) <= 2) {
			mes "- 所收集的样本散发出恶臭，令您感到恶心。 -";
			sc_start SC_POISON,5000,0;
			close;
		}
		mes "- 你放慢速度，小心翼翼地收集柔软且略带温热的物质。 -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "就像母亲的怀抱一样温暖。";
		getitem 6519,1; //Collected_Sample
		disablenpc();
		initnpctimer;
		close;
	}
	end;
OnTimer20000:
	enablenpc();
	stopnpctimer;
	end;
}
ma_fild02,155,235,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_1	557
ma_fild02,143,142,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_2	557
ma_fild02,266,155,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_3	557
ma_fild02,221,91,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_4	557
ma_fild02,205,85,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_5	557
ma_fild02,300,98,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_6	557
ma_fild02,100,275,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_7	557

malaya,290,340,3	script	Guard Leader#buwaya	571,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
		mes "- 等待！！ -";
		mes "- 你身上带的东西太多了。 -";
		mes "- 无法收到该物品。 -";
		mes "- 清理你的物品 -";
		mes "- 请再试一次。 -";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 一边互相窃窃私语，一边警惕地看着你。 -";
		close;
	}
	if (malaya_buwaya < 10) {
		mes "[守卫队长]";
		mes "由于班贡戈特的仆人袭击了医院，我们忙得不可开交。";
		next;
		mes "[守卫队长]";
		mes "我们正在尽最大努力确保村庄的安全，因此请享受您在马来亚港的住宿。";
		next;
	}
	if (malaya_buwaya == 10) {
		if (select("告诉他布瓦亚的事。：谈话结束。") == 2) {
			close;
		}
		mes "[守卫队长]";
		mes "布瓦亚？那个无情的生物又回来了？";
		next;
		mes "[守卫队长]";
		mes "这是个坏消息。派大家去对抗班贡戈特，我们已经人手不足了。";
		next;
		mes "[守卫队长]";
		mes "村民们需要去树林里采集水果和蔬菜。";
		next;
		mes "[守卫队长]";
		mes "嗯...你能帮助马来亚港吗？";
		next;
		if (select("交给我吧！：我自己也很忙。") == 2) {
			mes "[守卫队长]";
			mes "真的吗？那可不好。如果我们不采取行动，所有村民的生命都会受到威胁。像你这样的年轻人，怎么可以这么没心没肺。外人都和你一样吗？哼！现在不能相信年轻人了。哼。";
			close;
		}
		mes "[守卫队长]";
		mes "我知道我可以依靠你。";
		next;
		mes "[守卫队长]";
		mes "好的。我会相信你。";
		mes "我需要知道布瓦亚可能会出现在哪里，以确保村民的生活区域。";
		mes "我猜布瓦亚斯巢将是最好的选择。";
		next;
		mes "[守卫队长]";
		mes "^3131FF到达该区域后发射烟雾弹^000000。";
		mes "然后我们就跑到烟雾弹发射的地方。";
		next;
		mes "[守卫队长]";
		mes "然后保重并祝你好运。";
		set malaya_buwaya,11;
		erasequest 2276;
		setquest 2277;
	} else if (malaya_buwaya == 11) {
		mes "[守卫队长]";
		mes "^3131FF到达该区域后发射烟雾弹^000000。";
		mes "然后我们就跑到烟雾弹发射的地方。";
	} else if ((malaya_buwaya == 12) || (malaya_buwaya == 13)) {
		mes "[" + strcharinfo(0) + "]";
		mes "我们先把艾德带到托托伊。";
	} else if (malaya_buwaya == 14) {
		mes "[守卫队长]";
		mes "守卫队长给了你布瓦亚洞穴的位置。";
		mes "这不可能发生。";
		next;
		mes "[守卫队长]";
		mes "我没有足够的人手来处理布瓦亚的情况，但我们必须利用我们所拥有的资源做点什么。";
		next;
		mes "[守卫队长]";
		mes "在这里，这是我们感恩的象征。";
		mes "如果您想再次帮助Buwaya，请找我。";
		mes "希望您旅途愉快。";
		set malaya_buwaya,15;
		getexp 1000000, 600000;
		completequest 2280;
	} else {
		set .@hunting, checkquest(2281,HUNTING);
		if (.@hunting == -1) {
			mes "[守卫队长]";
			mes "听到布瓦亚从森林深处出现。";
			mes "众所周知，我们所有的人手都被用来处理最近袭击医院的班贡戈特仆人。";
			next;
			mes "[守卫队长]";
			mes "所以我们没有办法，只能请外人帮忙消灭布瓦亚。";
			mes "他们说布瓦亚是一个非常强壮且丑陋的有两个头的怪物。";
			mes "你会帮助我们打败布瓦亚吗？";
			next;
			if (select("当然。：不。") == 2) {
				mes "[守卫队长]";
				mes "众所周知，布瓦亚是一种非常危险的怪物。";
				mes "拒绝这个请求并不可耻。";
				close;
			}
			if (BaseLevel < 130) {
				mes "[守卫队长]";
				mes "这项任务将是一项危险的任务。";
				mes "如果你想帮助除掉布瓦亚，你必须做好准备。";
				mes "达到130级后回来。";
				close;
			}
			mes "[守卫队长]";
			mes "据传说，布瓦亚会绑架人，并将他们放在背上的麻袋里，然后吃掉。";
			next;
			mes "[守卫队长]";
			mes "请记住这一点并始终保持谨慎。";
			mes "我建议向值得信赖的同事寻求帮助。";
			setquest 2281;
		} else if (.@hunting == 0 || .@hunting == 1) {
			mes "[守卫队长]";
			mes "布瓦亚的情况怎么样了？";
			next;
			if (select("我放弃了：还在战斗。") == 2) {
				mes "[守卫队长]";
				mes "请记住这一点并始终保持谨慎。";
				mes "我建议向值得信赖的同事寻求帮助。";
				close;
			}
			mes "[守卫队长]";
			mes "众所周知，布瓦亚是一种非常危险的怪物。";
			mes "拒绝这个请求并不可耻。";
			erasequest 2281;
		} else if (.@hunting == 2) {
			mes "[守卫队长]";
			mes "不敢相信你真的摆脱了布瓦亚！";
			mes "你不只是一个普通的年轻人，不是吗？马来亚港的人们现在可以在晚上睡觉了。";
			next;
			mes "[守卫队长]";
			mes "干得好。";
			erasequest 2281;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6497,10; //Lesser_Agimat
			else
				getitem 6497,5; //Lesser_Agimat
			getexp 0,600000;
		} else {
			mes "[守卫队长]";
			mes "在包括巴约・马希瓦加在内的整个马来亚港免受布瓦亚的威胁之前，我不会下台。答应照顾好自己。";
			erasequest 2281;
		}
	}
	close;
}

ma_fild02,307,245,0	script	#buwaya_todog1	139,3,3,{
	end;
OnTouch:
	if (malaya_buwaya == 11) {
		enablenpc "Dog#buwaya";
		//mes "[Here something]";
		mes "吠叫！！";
		close;
	}
	end;
}
ma_fild02,320,241,0	duplicate(#buwaya_todog1)	#buwaya_todog2	139,3,3
ma_fild02,317,250,0	duplicate(#buwaya_todog1)	#buwaya_todog3	139,7,7

ma_fild02,312,259,3	script	Dog#buwaya	81,{
	if (malaya_buwaya == 11) {
		mes "[狗]";
		mes "吠叫！！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "为什么这里有狗？";
		next;
		if (select("仔细看看那只狗：忽略它。") == 2) {
			mes "[" + strcharinfo(0) + "]";
			mes "看起来像一只迷路的狗。";
			close;
		}
		mes "- 仔细观察那只肮脏的狗，发现它脖子上有一个旧项圈。 -";
		next;
		mes "- 项圈上写着“永远与托托伊在一起”。 -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那么你就是艾德？";
		next;
		mes "[狗]";
		mes "吠叫！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你没有被布瓦亚杀死。你这幸运的小狗。让我们回到你的主人身边。";
		next;
		emotion ET_DELIGHT;
		mes "[狗]";
		mes "吠叫！！";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "啊，我们走之前，你知道布瓦亚的巢穴在哪里吗？";
		next;
		mes "[狗]";
		mes "纬！";
		next;
		mes "- 艾德是一只聪明的狗，明白你问他什么。艾德开始向北吠叫。 -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "布瓦亚就在那里！";
		mes "那我应该在这里发射烟雾弹。";
		next;
		mes "- 你从库存中取出烟雾弹并向天空射击。 -";
		next;
		mes "^FF0000-舒克-^000000";
		enablenpc "Guard#buwayacave";
		specialeffect2 EF_MVP;
		next;
		mes "[守卫]";
		mes "工作干得好！";
		mes "所以布瓦亚就住在这样偏僻的地方。我会确保这个信息传达给警卫队长！";
		disablenpc "Guard#buwayacave";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我应该先把艾德送回托托伊，然后再去见警卫队长吗？";
		next;
		mes "[狗]";
		mes "吠叫！";
		set malaya_buwaya,12;
		disablenpc "Dog#buwaya";
		erasequest 2277;
		setquest 2278;
		close;
	} else if (malaya_buwaya == 12) {
		mes "[" + strcharinfo(0) + "]";
		mes "我们先把艾德带到托托伊，然后再回到警卫队长那里。";
		close;
	}
	end;
OnInit:
	disablenpc "Dog#buwaya";
	end;
}

ma_fild02,308,262,3	script	Guard#buwayacave	570,{
	end;
OnInit:
	disablenpc "Guard#buwayacave";
	end;
}

// Bakonawa Extermination :: malaya_bakonawa
//============================================================
malaya,280,331,4	script	Singing Man#bako1	578,{
	if (malaya_bakona1 < 5) {
		mes "[歌者]";
		mes "住在湖边的龙的故事~";
		mes "一个老太太的故事";
		mes "早就变成龙了~";
		next;
		mes "[歌者]";
		mes "等待远去他乡的儿子，";
		mes "我儿子会回来的";
		mes "当月亮第 90 次落下时";
		next;
		mes "[歌者]";
		mes "Error 500 (Server Error)!!1500.That’s an error.There was an error. Please try again later.That’s all we know.";
		mes "90号月亮落下，";
		mes "191号月亮落下……";
		next;
		mes "[歌者]";
		mes "那月亮带走了我的儿子~";
		mes "那个可怕的事情";
		mes "吞掉了我的儿子，";
		mes "我会惩罚那个月亮~";
		next;
		mes "[歌者]";
		mes "愤怒的月亮隐藏在视线之外的那一天，";
		mes "整个世界将被雨水淹没";
		mes "所有的村庄和人民都面临着水下的死亡~";
		next;
		mes "[歌者]";
		mes "老太太的咒骂让月亮勃然大怒~";
		mes "赶走老太婆才能平月~";
		mes "要是老太太不在这里就好了，要是老太太不在这里就好了……";
		next;
		mes "[歌者]";
		mes "听说有传言~";
		mes "老太太跳进湖里了~";
		mes "老太太现在变成了一条龙，将吞下月亮";
		mes "很快就把村庄也吞掉了~";
		close;
	} else {
		mes "[歌者]";
		mes "你说传说都是谎言？";
		mes "你的意思是我的祖先都是骗子";
		mes "和骗子？";
		next;
		mes "[歌者]";
		mes "这个村庄是建立在一个古老的传说之上的";
		mes "和历史。";
		mes "他们不是那种会被事情所动摇的人";
		mes "像你这样的低能者的愚蠢言论。";
		close;
	}
}

malaya,275,333,5	script	Singing Woman#bako1	579,{
	if (malaya_bakona1 < 5) {
		mes "[歌唱的女人]";
		mes "住在湖边的巴科纳瓦，";
		mes "一个老妇人变成龙的故事。";
		next;
		mes "[歌唱的女人]";
		mes "九十次月亮落下后本该回来的儿子";
		mes "月落几百次都没有回来~";
		mes "月亮把老太太的儿子吞掉了~";
		next;
		mes "[歌唱的女人]";
		mes "月亮月亮，你会受到老太太的诅咒吧~";
		mes "整个村庄都沉浸在死亡之中";
		mes "带着怒月带来的雨水和洪水~";
		next;
		mes "[歌唱的女人]";
		mes "月亮，月亮，安静，平静，";
		mes "因为老太太走了，她也不在了~";
		mes "老太太在湖里淹死了~";
		mes "她将变身为Bakonawa并回来......";
		next;
		mes "[歌唱的女人]";
		mes "...吞掉你并且";
		mes "快来惩罚村子吧~";
		mes "月亮死去的那一天";
		mes "也是村子灭亡的日子~";
		close;
	} else {
		mes "[歌唱的女人]";
		mes "传说都是骗人的？";
		mes "为什么说这样的废话呢？";
		mes "有没有什么";
		mes "这对你来说很重要，需要保护吗？";
		next;
		mes "[歌唱的女人]";
		mes "普尔的照片...";
		mes "我会很高兴";
		mes "如果她咬了你这样的人一大口！";
		close;
	}
}

malaya,290,329,4	script	Frightened Boy#bako1	577,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[受惊的男孩]";
		mes "凶恶的怪物巴科纳瓦即将来临";
		mes "吞下月亮，向村庄报仇。";
		mes "我很害怕，请帮帮我...";
		close;
	} else {
		mes "[受惊的男孩]";
		mes "巴科纳瓦的传说都是谎言？";
		mes "那么这意味着巴科纳瓦不存在？";
		mes "稍后我要和朋友们去湖边玩。";
		mes "你告诉我这一切都是谎言吧？";
		close;
	}
}

malaya,264,338,4	script	Frightened Maiden#bako1	576,{
	if (malaya_hi < 20) {
		mes "- 她看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[受惊的少女]";
		mes "据说巴科纳瓦讨厌大声喧哗。";
		mes "想活命就砸锅吧！";
		next;
		switch(select("讨厌大声喧哗？：Bakonawa 是什么？")) {
		case 1:
			mes "[受惊的少女]";
			mes "你已经听说老太太了";
			mes "死后变成了巴科纳瓦，对吗？";
			next;
			mes "[受惊的少女]";
			mes "传说是这样的";
			mes "老太太听力很敏锐";
			mes "因为她始终专注于";
			mes "她旅行的儿子回来了。";
			next;
			mes "[受惊的少女]";
			mes "所以很自然地，巴科纳瓦也";
			mes "有非常敏锐的听力。";
			mes "大家都在敲打的原因";
			mes "锅碗瓢盆就是因为这个。";
			close;
		case 2:
			mes "[受惊的少女]";
			mes "这是一种生活在湖边的可怕怪物。";
			mes "我们都因恐惧而颤抖";
			mes "因为我们不知道它什么时候会袭击村庄。";
			next;
			mes "[受惊的少女]";
			mes "有人说它更痴迷吞月";
			mes "而不是攻击村庄。";
			mes "如果真是这样，我希望它能把月亮吞掉";
			mes "别管我们了。";
			close;
		}
	} else {
		mes "[受惊的少女]";
		mes "现在村民们都讨厌你了。";
		mes "你一直在说巴科纳瓦的传说";
		mes "这是一个谎言，他们说你更像是一个怪物";
		mes "比巴科纳瓦。";
		close;
	}
}

malaya,272,339,5	script	Old Fortune Teller#bako1	575,{
	if (malaya_hi < 20) {
		mes "- 老算命先生似乎对你很谨慎。 -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[老算命师]";
		mes "你一定不能讨厌巴科纳瓦。";
		mes "对它的仇恨只会助长它的愤怒";
		mes "变得更大。";
		next;
		mes "[老算命师]";
		mes "为了平息死去的女士的愤怒，";
		mes "我们每年都会举行仪式并准备食物。";
		mes "但似乎没有办法平息";
		mes "老太太的怒气越来越大。";
		next;
		mes "[老算命师]";
		mes "这一天已经临近了。我能感觉到。";
		mes "巴科纳瓦很快就会吞噬月亮";
		mes "并前来惩罚村庄。";
		close;
	} else {
		mes "[老算命师]";
		mes "怎么能说传说是骗人的呢！";
		mes "因为你，巴科纳瓦的愤怒";
		mes "变得更大了！";
		mes "如果村子灭亡了";
		mes "都是你的错！";
		close;
	}
}

malaya,285,332,4	script	Old Legend Teller#bako1	574,{
	if (checkweight(1301,3) == 0) {
		mes "您无法开始对话。您携带的物品太多。 -";
		close;
	}
	if (BaseLevel < 120) {
		mes "[古老的传奇出纳员]";
		mes "有件事需要做";
		mes "但你看起来太脆弱了";
		mes "帮我一把。";
		next;
		mes "[古老的传奇出纳员]";
		mes "什么时候回来";
		mes "你的力量变得足够强大";
		mes "来匹配 Incubus。";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona1 == 0) {
		mes "[古老的传奇出纳员]";
		mes "老太太回来了";
		mes "巴科纳瓦的生活。";
		mes "很快她就会来为村子报仇。";
		mes "我们必须让她平静下来";
		mes "如果为了防止进一步的破坏...";
		next;
		switch(select("冷静巴科纳瓦？：进一步破坏？")) {
		case 1:
			mes "[古老的传奇出纳员]";
			mes "老太太面临冤死";
			mes "因为村民的自私。";
			mes "她是一位慈爱的母亲";
			mes "亲爱的儿子。";
			next;
			mes "[古老的传奇出纳员]";
			mes "如果我们追踪到她儿子的下落并举行仪式";
			mes "连同儿子的遗物，";
			mes "她不安的灵魂将会平静下来";
			mes "她将使我们免受毁灭。";
			next;
			mes "[村民]";
			mes "先生没有用！！";
			next;
			mes "[村民]";
			mes "你这样无法阻止怪物！";
			next;
			mes "[古老的传奇出纳员]";
			mes "当然，追踪一个人的行踪并不容易";
			mes "谁已经离开一百年了。";
			mes "...";
			next;
			mes "[古老的传奇出纳员]";
			mes "尽管如此，你不觉得";
			mes "值得一试吗？";
			mes "请帮助我们，将我们从痛苦中拯救出来。";
			next;
			switch(select("没用：我来帮忙。")) {
			case 1:
				mes "[古老的传奇出纳员]";
				mes "是的，你也是对的。";
				mes "你面对的不是人类，";
				mes "但一个怪物。";
				mes "不过我还是相信那个老太太的";
				mes "好心。";
				close;
			case 2:
				mes "[古老的传奇出纳员]";
				mes "你会做吗？";
				mes "据传说，";
				mes "老太太的儿子一瘸一拐的";
				mes "是一位贩卖木偶的旅行商人。";
				next;
				mes "[古老的传奇出纳员]";
				mes "他留下了一块^FF0000石板片^000000。";
				mes "但零件小且破损，";
				mes "很难识别它。";
				next;
				mes "[古老的传奇出纳员]";
				mes "首先，把它带给我。";
				mes "沿着这条路往下走";
				mes "你会在港口附近见到我的孙女。";
				mes "从那里得到石板碎片。";
				set malaya_bakona1,1;
				setquest 1174;
				close;
			}
		case 2:
			mes "[古老的传奇出纳员]";
			mes "对人民的恩怨";
			mes "Bakonawa-我的意思是，死去的老太太。";
			mes "月亮和这个村庄......";
			mes "她会尝试摧毁它。";
			next;
			select("报仇？这么多年过去了？");
			mes "[古老的传奇出纳员]";
			mes "一段时间以来，她";
			mes "责怪月亮并";
			mes "引起了村民们的不满。";
			mes "随着时间的推移，这种感觉越来越强烈。";
			next;
			mes "[古老的传奇出纳员]";
			mes "你认为她为什么会变成这样一个怪物？";
			mes "你认为她脑子里想的是什么";
			mes "多年来？";
			mes "愤怒和复仇。";
			next;
			mes "[古老的传奇出纳员]";
			mes "难忘恩怨";
			mes "她被抛弃了。";
			mes "对着月亮和村庄。";
			mes "所以，这个恩怨必须要化解。";
			close;
		}
	} else if (malaya_bakona1 == 1) {
		mes "[古老的传奇出纳员]";
		mes "请带上^FF0000石板^000000。";
		mes "沿着这条路往下走";
		mes "你会在港口附近见到我的孙女。";
		mes "从那里得到石板碎片。";
		close;
	} else if (malaya_bakona1 == 2) {
		mes "[古老的传奇出纳员]";
		mes "很好，你有石板碎片了。";
		mes "抓住它，不要失去它。";
		mes "这对于追寻传说会有帮助。";
		next;
		mes "[古老的传奇出纳员]";
		mes "听说有一个人独自生活";
		mes "位于林场西北端。";
		mes "我听说有人在那里看到了一个木娃娃。";
		mes "这是一个如此偏远的地方，像我们这样的人";
		mes "根本无法去那里旅行。";
		mes "你能帮我们参观一下那个地方吗？";
		next;
		switch(select("你自己去吧！:你的解释太模糊了。:在路上！")) {
		case 1:
			mes "[古老的传奇出纳员]";
			mes "你扭曲的青春！";
			close;
		case 2:
			mes "[古老的传奇出纳员]";
			mes "你说得有道理，但是";
			mes "这是我目前能做的最好的事情。";
			mes "这个地方位于森林的西北部尽头。";
			mes "过了桥往西走，";
			mes "你会看到一个人。";
			break;
		case 3:
			mes "[古老的传奇出纳员]";
			mes "你是一个心地善良的年轻人！";
			mes "这个地方位于森林的西北部尽头。";
			mes "过了桥往西走，";
			mes "您将看到^0000FF马来亚移民^000000。";
			break;
		}
		mes "祝你好运...为了我们...";
		erasequest 1175;
		setquest 1176;
		set malaya_bakona1,3;
		close;
	} else if (malaya_bakona1 == 3) {
		mes "[古老的传奇出纳员]";
		mes "这个地方位于森林的西北部尽头。";
		mes "过了桥往西走，";
		mes "你会看到一个人。";
		mes "祝你好运...为了我们...";
		close;
	} else if (malaya_bakona1 < 6) {
		mes "[古老的传奇出纳员]";
		mes "老太太儿子的踪迹";
		mes "一直连接到";
		mes "神秘村庄？";
		mes "他有可能不是商人……";
		mes "我真的很好奇他是谁...";
		next;
		mes "[古老的传奇出纳员]";
		mes "你为什么回到这里";
		mes "而不是直接去";
		mes "神秘村庄？";
		close;
	} else if (malaya_bakona1 == 6) {
		mes "[古老的传奇出纳员]";
		mes "这是真的吗？";
		mes "巴科纳瓦变成了老太太";
		mes "并编造传奇……";
		mes "到目前为止，似乎所有村民";
		mes "都被那个可怕的怪物操纵了。";
		next;
		mes "[古老的传奇出纳员]";
		mes "那么就没有理由犹豫了。";
		mes "你必须进入巴科纳瓦的巢穴";
		mes "在它首先攻击之前。";
		mes "我相信我们可以相信你能做到这一点，是吗？";
		next;
		switch(select("嗯...：当然！")) {
		case 1:
			mes "[古老的传奇出纳员]";
			mes "气氛真的很好";
			mes "但突然间一切都毁了。";
			mes "没想到你这么害羞...";
			close;
		case 2:
			mes "[古老的传奇出纳员]";
			mes "我会和";
			mes "你的村长";
			mes "这样你就可以进入巴科纳瓦湖了。";
			mes "请为我们除掉这个怪物。";
			erasequest 1179;
			set malaya_bakona1,7;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6499,5; //Ancient_Grudge
			else
				getitem 6499,3; //Ancient_Grudge
			getexp 500000,200000;
			close;
		}
		close;
	} else if (malaya_bakona1 == 7) {
		if (malaya_bakona2 < 15) {
			mes "[古老的传奇出纳员]";
			mes "如果你不介意的话";
			mes "你能向村长伸出援手吗？";
			mes "没有人再关心彼此";
			mes "因为巴科纳瓦...";
			next;
		}
		mes "[古老的传奇出纳员]";
		mes "传说那";
		mes "我们相信一百年来，";
		mes "所有的谎言......";
		mes "请为我们除掉这个怪物。";
		close;
	}
}

ma_fild02,40,240,4	script	Malaya Immigrant#bako1	578,{
	if (malaya_bakona1 < 3) {
		mes "[马来亚移民]";
		mes "你必须有一颗勇敢的心";
		mes "来到这么偏僻的地方。";
		mes "马来亚港最近怎么样？";
		mes "我听说住在湖边的怪物巴克诺阿瓦";
		mes "正在威胁村民。";
		mes "我对发生的事情一无所知，因为我一直都在这里。";
		close;
	} else if (malaya_bakona1 == 3) {
		mes "[马来亚移民]";
		mes "你必须有一颗勇敢的心";
		mes "来到这么偏僻的地方。";
		mes "马来亚港最近怎么样？";
		mes "我听说住在湖边的怪物巴克诺阿瓦";
		mes "正在威胁村民。";
		mes "我对发生的事情一无所知，因为我一直都在这里。";
		next;
		mes "[马来亚移民]";
		mes "你就是那个以前卖木偶的旅行商人吧？";
		mes "我不知道有哪个旅行商人，但作者是木娃娃";
		mes "（经历事情）你是这个意思吗？";
		mes "我不知道具体情况，但是";
		mes "我想这和我很久以前听到的事情有关。";
		next;
		switch(select("你在这里做什么？：你知道这块石板吗？：请告诉我这个故事。：谁是旅行商人？")) {
		case 1:
			mes "[马来亚移民]";
			mes "我很喜欢这里的环境";
			mes "所以我决定留下来生活。";
			mes "这里没有义务。";
			mes "对我来说，那简直就像天堂一样美好。";
			close;
		case 2:
			mes "[马来亚移民]";
			mes "这是一块非常古老的石板。";
			mes "抱歉，我以前从未见过这个。";
			mes "这里有某种写作";
			mes "但我看不出来。";
			close;
		case 3:
			mes "[马来亚移民]";
			mes "这是一个简单的故事。";
			mes "^0000FF一个我从未见过的伤员^000000";
			mes "^0000FF来到我家寻求帮助。^000000";
			mes "^0000FF痊愈后，他制作了一个木娃娃^000000";
			next;
			mes "[马来亚移民]";
			mes "^0000FF据说可以驱除邪灵^000000";
			mes "^0000FF作为谢意，^000000";
			mes "^0000FF前往Baryo Mahikawa。^000000";
			next;
			select("他去Baryo Mahikawa了吗？");
			mes "[马来亚移民]";
			mes "据我所听到的";
			mes "这是正确的。但故事已经";
			mes "口口相传";
			mes "很久。我不能确定。";
			next;
			mes "来自 Baryo Mahiwaga 村，使用关键字 ^0000FFMalaya^000000，";
			mes "或^0000FF巴科纳瓦^000000，";
			mes "也许我可以查出身份和行踪";
			mes "的旅行商人。";
			erasequest 1176;
			setquest 1177;
			set malaya_bakona1,4;
			close;
		case 4:
			mes "[马来亚移民]";
			mes "嗯，就是缺少信息";
			mes "所以我不能肯定地说但是";
			mes "我怀疑他是否真的是一名商人。";
			mes "来到一个小镇，带着一个";
			mes "重伤似乎太可疑了……";
			next;
			mes "[马来亚移民]";
			mes "渴望一个木娃娃";
			mes "可以被视为具有某种仪式意义。";
			mes "保护一个人免受邪恶力量的侵害...";
			mes "那种事。";
			next;
			mes "旅行商人的身份...";
			mes "貌似还有一个";
			mes "待解之谜。";
			mes "我想一切都会水落石出";
			mes "很快。";
			close;
		}
	} else {
		mes "[马来亚移民]";
		mes "我再慢慢的告诉你";
		mes "流传下来的故事。";
		mes "仔细听并重复...";
		mes "不，我的意思是，你不必重复。";
		next;
		mes "[口传故事]";
		mes "^0000FF一个我从未见过的伤员^000000";
		mes "^0000FF来到我家寻求帮助。^000000";
		mes "^0000FF痊愈后，为了表达谢意，他制作了一个木偶^000000";
		mes "^0000FF据说可以赶走邪恶的灵魂。^000000";
		mes "^0000FF然后他前往Baryo Mahikawa。^000000";
		next;
		mes "来自 Baryo Mahiwaga 村，使用关键字 ^0000FFMalaya^000000，";
		mes "或^0000FF巴科纳瓦^000000，";
		mes "也许我可以查出身份和行踪";
		mes "的旅行商人。";
		close;
	}
}

ma_fild01,165,237,4	script	Malaya Immigrant#bako2	582,{
	if (malaya_bakona1 < 4) {
		mes "[马来亚移民]";
		mes "你去过吗";
		mes "马来亚港？";
		mes "我很想知道";
		mes "那里发生了什么事";
		mes "但我不能旅行，因为到处都是怪物。";
		close;
	} else if (malaya_bakona1 == 4) {
		mes "[马来亚移民]";
		mes "木娃娃？";
		mes "有一个故事与此相关，";
		mes "但你并没有一路走来";
		mes "只是为了听一些民间故事吗？";
		next;
		switch(select("我只是来这里休息一下。：告诉我这个故事。")) {
		case 1:
			mes "[马来亚移民]";
			mes "你手上一定有很多空闲时间！";
			mes "我不是旅行社";
			mes "所以去打扰别人吧！";
			close;
		case 2:
			mes "[马来亚移民]";
			mes "这是胡说八道";
			mes "所以我不太记得细节了。";
			next;
			mes "[民间故事摘要]";
			mes "很久以前，5位剑客战斗";
			mes "对抗怪物巴科纳瓦。";
			mes "四人死亡，一人受重伤";
			mes "给怪物但作为回报";
			mes "他自己的腿也受了重伤。";
			next;
			mes "[民间故事摘要]";
			mes "逃离现场后，巴科纳瓦变身为人类";
			mes "并暗中追击剑客。";
			mes "剑客做了一个木偶，";
			mes "可以阻止怪物靠近。";
			next;
			mes "[马来亚移民]";
			mes "故事到此结束。";
			mes "没有任何结论...";
			next;
			mes "[马来亚移民]";
			mes "听说剑客留下了一份记录";
			mes "但我不明白为什么";
			mes "他会把它留在这么远的地方";
			mes "这里而不是马来亚。";
			next;
			select("我想看看记录。");
			mes "[马来亚移民]";
			mes "记录刻在前面的石头上。";
			mes "然而石头实在是太糟糕了";
			mes "损坏并且一些碎片脱落";
			mes "很难说清楚这些话。";
			next;
			mes "调查前面的石头。";
			erasequest 1177;
			setquest 1178;
			set malaya_bakona1,5;
			close;
		}
	} else if (malaya_bakona1 == 5) {
		mes "[马来亚移民]";
		mes "前面的石头保持着一项记录";
		mes "很久以前的剑客离开了。";
		next;
		switch(select("这个剑客去哪儿了？：再给我讲一下这个故事。")) {
		case 1:
			mes "[马来亚移民]";
			mes "嗯，之后就没有故事了";
			mes "我想没有人会知道发生了什么。";
			close;
		case 2:
			mes "[民间故事摘要]";
			mes "很久以前，5位剑客战斗";
			mes "对抗怪物巴科纳瓦。";
			mes "四人死亡，一人受重伤";
			mes "对怪物但作为回报";
			mes "他自己的腿也受了重伤。";
			next;
			mes "[民间故事摘要]";
			mes "逃离现场后，巴科纳瓦变身为人类";
			mes "并暗中追击剑客。";
			mes "剑客做了一个木偶，";
			mes "可以阻止怪物靠近。";
			close;
		}
	} else {
		mes "[马来亚移民]";
		mes "我想你想再听一遍这个故事吧？";
		mes "没问题！我可以永远讲述这个故事！";
		next;
		mes "[民间故事摘要]";
		mes "很久以前，5位剑客战斗";
		mes "对抗怪物巴科纳瓦。";
		mes "四人死亡，一人受重伤";
		mes "对怪物但作为回报";
		mes "他自己的腿也受了重伤。";
		next;
		mes "[民间故事摘要]";
		mes "逃离现场后，巴科纳瓦变身为人类";
		mes "并暗中追击剑客。";
		mes "剑客做了一个木偶，";
		mes "可以阻止怪物靠近。";
		close;
	}
}

ma_fild01,171,235,0	script	#bako1	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona1 == 5) {
		mes "伤害如此严重";
		mes "该记录无法识别。";
		mes "插入石板片时";
		mes "墙上的一个洞，它就像一块拼图一样完美契合。";
		mes "字迹不清楚，但还是能看懂。";
		next;
		callsub L_Record;
		set malaya_bakona1,6;
		erasequest 1178;
		setquest 1179;
		close;
	} else if (malaya_bakona1 == 6) {
		mes "这是剑客留下的记录";
		mes "从一百年前开始。";
		next;
		switch(select("我不需要读它：再读一遍记录。")) {
		case 1:
			mes "我清楚地记得这个故事。";
			mes "让我们来告诉马来亚的^0000FF古老的传说出纳员^000000";
			mes "关于我的发现。";
			close;
		case 2:
			callsub L_Record;
			close;
		}
	}
	end;

L_Record:
	mes "[一百年前剑客留下的记录]";
	mes "与巴科纳瓦战斗后，我受了重伤";
	mes "并来到了这个地方。";
	mes "我唯一能做的就是";
	mes "将木娃娃放在一处";
	mes "怪物会来的。";
	next;
	mes "[一百年前剑客留下的记录]";
	mes "^0000FF有时会变成小孩，甚至变成老太太，^000000";
	mes "我知道^0000FFBakonawa^000000已经";
	mes "暗中追杀我。";
	mes "由于怪物*受到了严重伤害，";
	next;
	mes "[一百年前剑客留下的记录]";
	mes "** 需要近一百年";
	mes "让巴科纳瓦吸收月亮的力量";
	mes "以完全恢复其力量。";
	mes "当心月亮消失的那一天。";
	next;
	mes "[一百年前剑客留下的记录]";
	mes "巴科纳瓦的那一天终将到来";
	mes "会横行的。";
	mes "但想要完全恢复力量，还需要近百年的时间。";
	mes "总会有人比我更好";
	mes "去打败邪恶的生物。";
	next;
	mes "[一百年前剑客留下的记录]";
	mes "我将信任那个将在多年后取代我的人......";
	next;
	mes "这怎么可能……";
	mes "巴科纳娃变成老太太时说的谎言";
	mes "为了向剑客报仇";
	mes "时隔多年，已然成为传奇。";
	next;
	mes "我发现巴科纳瓦";
	mes "无非是一个嗜血的怪物。";
	mes "我必须把我所知道的告诉^0000FF老传奇出纳员^000000";
	mes "在马来亚。";
	return;
}

malaya,304,100,4	script	Old Man's Granddaughter	576,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona1 == 0) {
		mes "[老人的孙女]";
		mes "爷爷相信";
		mes "巴孔独木舟";
		mes "转好。";
		mes "你认为这可能吗？";
		close;
	} else if (malaya_bakona1 == 1) {
		mes "[老人的孙女]";
		mes "^FF0000石板片^000000？";
		mes "为什么你需要一些东西";
		mes "这是几乎认不出来？";
		mes "如果你想要的话我就给你。";
		next;
		mes "让我们去";
		mes "^FF0000古老的传奇出纳员^000000";
		mes "现在我有了石板碎片。";
		erasequest 1174;
		setquest 1175;
		set malaya_bakona1,2;
		close;
	} else if (malaya_bakona1 == 2) {
		mes "[老人的孙女]";
		mes "请收下这块石板";
		mes "并交给我的爷爷。";
		next;
		mes "让我们去";
		mes "^FF0000古老的传奇出纳员^000000";
		mes "现在我有了石板碎片。";
		close;
	} else {
		mes "[老人的孙女]";
		mes "因为巴科纳瓦，";
		mes "村里总是不平静。";
		close;
	}
}

malaya,286,269,4	script	Angry Man#bako2	578,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	mes "[愤怒的人]";
	mes "凸轮膏由？";
	mes "你知道有多少人已经";
	mes "被巴科纳瓦牺牲了？";
	mes "如果有必要的话，我会独自战斗！";
	close;
}

malaya,276,269,5	script	Calm Woman#bako2	579,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	mes "[冷静的小女孩]";
	mes "对抗太危险了";
	mes "巴科纳瓦。有机会";
	mes "它会变得更加愤怒，让孩子和";
	mes "长辈面临危险。";
	close;
}

malaya,276,262,4	script	Angry Boy#bako2	577,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	mes "[愤怒的男孩]";
	mes "我失去了父亲和朋友";
	mes "到那个巴科纳瓦。";
	mes "我一定会报复他们的！";
	close;
}

malaya,283,265,4	script	Village Chief#bako2	580,{
	if (checkweight(1301,3) == 0) {
		mes "您无法开始对话。您携带的物品太多。 -";
		close;
	}
	if (BaseLevel < 120) {
		mes "[村长]";
		mes "我迫切需要伸出援助之手";
		mes "但你看起来";
		mes "太软弱和脆弱。";
		next;
		mes "[村长]";
		mes "请什么时候回来";
		mes "你变得足够坚强";
		mes "来匹配 Incubus。";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona2 == 0) {
		if (malaya_bakona1 <= 5) {
			mes "[村长]";
			mes "我不知道什么是正确的决定。";
			mes "为了对抗巴科纳瓦，";
			mes "或者通过提供祭品来安抚它。";
		} else {
			mes "[村长]";
			mes "传说全是谎言？";
			mes "到目前为止，似乎所有村民";
			mes "都被那个邪恶的怪物操纵了。";
			next;
			mes "[村长]";
		}
		mes "最近，有越来越多的人";
		mes "被巴科纳瓦伤害。";
		next;
		mes "[村长]";
		mes "还有一些村民失踪";
		mes "但我不知道是否";
		mes "他们只是失踪了，或者如果他们已经失踪了";
		mes "被巴科纳瓦杀死。";
		next;
		mes "[村长]";
		mes "听说失踪者的财物";
		mes "在 Baryo Mahiwaga Field 被发现。";
		mes "请前往那里寻找^0000FF失落物品^000000";
		mes "并将它们交给家人";
		mes "失踪人员";
		mes "无论他们想要多少。";
		next;
		mes "[村长]";
		mes "^0000FF丢失物品^000000";
		mes "据说是由";
		mes "^FF0000Tiyanak^000000 在 Baryo Mahikawa 漫游。";
		next;
		switch(select("你自己做吧：我正在路上。")) {
		case 1:
			mes "[村长]";
			mes "你给了我很多思考。";
			mes "赶紧离开村子。";
			close;
		case 2:
			mes "[村长]";
			mes "那么我们就开始吧。第一的，";
			mes "从 Tiyanak 处取回两件^FF0000丢失物品^000000";
			mes "然后把他们带到^0000FF失踪者的父亲^000000";
			mes "为我。";
			set malaya_bakona2,1;
			setquest 1180;
			close;
		}
	} else if (malaya_bakona2 == 1) {
		mes "[村长]";
		mes "来自漫步在巴约・马希瓦加原野的蒂亚纳克 (Tiyanak)，";
		mes "取回两件^FF0000丢失物品^000000";
		mes "并将它们交给^0000FF失踪者的父亲^000000";
		mes "为我。";
		close;
	} else if (malaya_bakona2 == 2) {
		mes "[村长]";
		mes "从蒂亚纳克取回七件^FF0000丢失的物品^000000";
		mes "并将它们交给^0000FF失踪人员的朋友^000000";
		mes "为我。";
		close;
	} else if (malaya_bakona2 == 3) {
		mes "[村长]";
		mes "从蒂亚纳克取回三件^FF0000丢失的物品^000000";
		mes "并将它们交给^0000FF失踪者的儿子^000000";
		mes "为我。";
		close;
	} else if (malaya_bakona2 == 4) {
		mes "[村长]";
		mes "从蒂亚纳克取回五件^FF0000丢失的物品^000000";
		mes "并将它们交给^0000FF失踪者的母亲^000000";
		mes "为我。";
		close;
	} else if (malaya_bakona2 == 5) {
		mes "[村长]";
		mes "所以很明显所有失踪人员";
		mes "已被巴科纳瓦杀死。";
		next;
		mes "[村民]";
		mes "杀死巴纳瓦哈瓦！";
		mes "让我们自己消灭怪物吧！";
		next;
		mes "[村长]";
		mes "看来我们已经不能再";
		mes "举行仪式来平静巴科纳瓦。";
		next;
		mes "[村长]";
		mes "年轻的算命师正在寻求您的帮助";
		mes "说月亮的能量似乎很奇怪。";
		erasequest 1184;
		setquest 1185;
		set malaya_bakona2,6;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 12700,7; //Insideout_Shirt
		else
			getitem 12700,5; //Insideout_Shirt
		close;
	} else if (malaya_bakona2 == 6) {
		mes "[村长]";
		mes "年轻的算命师正在寻求您的帮助";
		mes "说月亮的能量似乎很奇怪。";
		close;
	} else if (malaya_bakona2 == 7) {
		mes "[村长]";
		mes "我知道可怕的事情发生了";
		mes "很久以前，月亮消失的时候。";
		mes "希望月亮恢复力量";
		mes "用你的奉献精神。";
		close;
	} else if (malaya_bakona2 == 8) {
		mes "[村长]";
		mes "我会告诉";
		mes "年轻的算命师来帮助你。";
		mes "但在此之前，还有";
		mes "你必须立即做的事情。";
		next;
		mes "[村长]";
		mes "我们永远不知道巴科纳瓦何时会进攻";
		mes "村庄所以我们必须在村庄附近设置陷阱";
		mes "入口和洞穴附近。";
		next;
		mes "[村长]";
		mes "如果您帮助我们，我将不胜感激。";
		mes "我已派遣工人";
		mes "靠近设置陷阱的地方，";
		mes "所以你只需要参观大约5个地方。";
		next;
		switch(select("听起来工作量太大了。：当然可以。")) {
		case 1:
			mes "[村长]";
			mes "这次手术对我们来说意味着生死攸关";
			mes "但你却轻易地拒绝了，仿佛";
			mes "这是一件苦差事......";
			next;
			mes "[村长]";
			mes "多么英雄啊！";
			close;
		case 2:
			mes "[村长]";
			mes "第一个陷阱将设置在";
			mes "村庄神秘领域";
			mes "靠近村口。 ^0000FF脾气暴躁的工人^000000";
			mes "会等你的。他会很有帮助的。";
			erasequest 1187;
			setquest 1188;
			set malaya_bakona2,9;
			close;
		}
	} else if (malaya_bakona2 == 9) {
		mes "[村长]";
		mes "第一个陷阱将设置在";
		mes "村庄神秘领域";
		mes "靠近村口。 ^0000FF脾气暴躁的工人^000000";
		mes "会等你的。他会很有帮助的。";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[村长]";
		mes "将设置第二个陷阱";
		mes "靠近连接的地方";
		mes "巴约马希瓦加机场 (Baryo Mahiwaga Field) 至巴科纳瓦湖 (Bakonawa Lake)。";
		mes "^0000FF脾气暴躁的工人^000000";
		mes "会等你的。他会很有帮助的。";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[村长]";
		mes "第三个陷阱将被设置";
		mes "靠近巴科纳瓦湖入口。";
		mes "^0000FF胆怯的工人^000000";
		mes "会等你的。他会很有帮助的。";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[村长]";
		mes "第四个陷阱将被设置";
		mes "也在巴科纳瓦湖入口附近。";
		mes "^0000FF忧郁工人^000000将在等你。";
		mes "他会很有帮助的。";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[村长]";
		mes "将设置第五个陷阱";
		mes "也在巴科纳瓦湖入口附近。";
		mes "^0000FF感性工作者^000000";
		mes "会等你的。他会很有帮助的。";
		close;
	} else if (malaya_bakona2 == 14) {
		mes "[村长]";
		mes "看来陷阱都已经设好了。";
		mes "我们刚刚结束了村民会议";
		mes "关于巴科纳瓦该怎么办。";
		next;
		mes "[村长]";
		mes "我们得出的结论是";
		mes "我们将与巴科纳瓦作战。";
		mes "请通过以下方式帮助我们";
		mes "攻击他的巢穴。";
		erasequest 1193;
		set malaya_bakona2,15;
		getexp 1000000,600000;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 6497,7; //Lesser_Agimat
		else
			getitem 6497,5; //Lesser_Agimat
		close;
	} else if (malaya_bakona2 == 15) {
		mes "[村长]";
		if (malaya_bakona1 < 7) {
			mes "您会访问^0000FF古老的传奇出纳员^000000";
			mes "你什么时候有机会？";
			mes "我认为你能够帮助他。";
			next;
			mes "[村长]";
			mes "谢谢。";
		}
		mes "请想想无数的受害者";
		mes "并击败巴科纳瓦";
		mes "为了他们的缘故。";
		close;
	}
}

malaya,269,267,5	script	Missing Person's Father	582,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona2 == 0) {
		mes "[失踪者的父亲]";
		mes "请找到我们的";
		mes "孩子。";
		mes "巴科纳瓦不会伤害我们的孩子。";
		mes "他一定就在这附近的某个地方。";
		close;
	} else if (malaya_bakona2 == 1) {
		if (countitem(6520) < 2) {
			mes "[失踪者的父亲]";
			mes "您正在寻找他的两件^FF0000失落物品^000000？";
			mes "你有信心吗";
			mes "他已经死了？";
			close;
		}
		mes "[失踪者的父亲]";
		mes "这是...我们孩子的^FF0000丢失物品^000000";
		mes "一定。";
		mes "怪物终于到了他的身边......";
		next;
		mes "男人无法继续说下去，他努力忍住泪水。";
		mes "让我们继续寻找失踪者丢失的财物。";
		mes "让我们从我在巴约・阿加巴场漫游的儿子那里取回它们，";
		mes "七件^FF0000丢失物品^000000";
		mes "并将它们交给^0000FF失踪人员的朋友^000000。";
		delitem 6520,2; //Lost_Belongings
		erasequest 1180;
		setquest 1181;
		set malaya_bakona2,2;
		close;
	} else if (malaya_bakona2 == 2) {
		mes "[失踪者的父亲]";
		mes "我的宝贝……我可怜的宝贝……";
		next;
		mes "男人无法继续说下去，他努力忍住泪水。";
		mes "让我们继续寻找失踪者丢失的财物。";
		mes "从蒂亚纳克取回七件^FF0000丢失的物品^000000";
		mes "并将它们交给^0000FF失踪人员的朋友^000000。";
		close;
	} else {
		mes "[失踪者的父亲]";
		mes "我的宝贝……我可怜的宝贝……";
		close;
	}
}

malaya,265,274,5	script	Missing Person's Friend	577,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona2 < 2) {
		mes "[失踪者的朋友]";
		mes "请查找";
		mes "我的朋友。";
		mes "我们一起打球";
		mes "突然我的朋友消失了。";
		next;
		mes "[失踪者的朋友]";
		mes "我确信他还活着而且活得很好";
		mes "某处。";
		close;
	} else if (malaya_bakona2 == 2) {
		if (countitem(6520) < 7) {
			mes "[失踪者的朋友]";
			mes "您正在寻找七件^FF0000丢失物品^000000";
			mes "我朋友的？";
			mes "我的朋友没有死！";
			close;
		}
		mes "[失踪者的朋友]";
		mes "这些是我给他的弹珠和玩具......";
		mes "这些显然是^FF0000丢失的物品^000000";
		mes "我的朋友...我的朋友在哪里？";
		mes "带他来这里，现在就带他来这里！";
		callsub L_Quest;
		delitem 6520,7; //Lost_Belongings
		erasequest 1181;
		setquest 1182;
		set malaya_bakona2,3;
		close;
	} else {
		mes "[失踪者的朋友]";
		mes "把我的朋友带回来吧！";
		mes "现在就把我的朋友带回来吧！";
		mes "我的朋友还活着，";
		mes "都是骗人的，呜呜~";
		if (malaya_bakona2 == 3)
			callsub L_Quest;
		close;
	}

L_Quest:
	next;
	mes "留下哭泣的男孩，";
	mes "让我们继续寻找失踪者丢失的财物。";
	mes "从蒂亚纳克取回三件^FF0000丢失的物品^000000";
	mes "并将它们交给^0000FF失踪人员的儿子^000000。";
	return;
}

malaya,270,278,4	script	Missing Person's Son	578,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona2 < 3) {
		mes "[失踪者的儿子]";
		mes "巴科纳瓦伤害了我父亲？";
		mes "我简直不敢相信这一点。";
		mes "请找到我的父亲！";
		close;
	} else if (malaya_bakona2 == 3) {
		if (countitem(6520) < 3) {
			mes "[失踪者的儿子]";
			mes "您正在寻找三件^FF0000丢失物品^000000";
			mes "我父亲的？为什么丢了财物而不是我父亲？";
			mes "不，不可能是这样。他还活着在某个地方！";
			close;
		}
		mes "[失踪者的儿子]";
		mes "这分明是他的衣服和鞋子……";
		mes "这些是我父亲的^FF0000失落物品^000000。";
		mes "噢，亲爱的主……父亲！";
		callsub L_Quest;
		delitem 6520,3; //Lost_Belongings
		erasequest 1182;
		setquest 1183;
		set malaya_bakona2,4;
		close;
	} else {
		mes "[失踪者的儿子]";
		mes "为什么会发生这样的事情......";
		if (malaya_bakona2 == 4)
			callsub L_Quest;
		close;
	}

L_Quest:
	next;
	mes "男人痛苦地哭泣。";
	mes "让我们继续寻找失踪者丢失的财物。";
	mes "从蒂亚纳克取回五件^FF0000丢失的物品^000000";
	mes "并将它们交给^0000FF失踪人员的母亲^000000。";
	return;
}

malaya,265,284,4	script	Missing Person's Mother	579,{
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona2 < 4) {
		mes "[失踪者的母亲]";
		mes "请找到我的孩子。";
		mes "我派她出去做家务";
		mes "而她还没回来。";
		close;
	} else if (malaya_bakona2 == 4) {
		if (countitem(6520) < 5) {
			mes "[失踪者的母亲]";
			mes "您正在寻找我孩子的五件^FF0000丢失物品^000000？";
			mes "这意味着什么？";
			mes "你是说我的孩子死了吗？";
			close;
		}
		mes "[失踪者的母亲]";
		mes "这是我孩子的发梳。";
		mes "为什么您有我孩子的五件^FF0000丢失物品^000000？";
		mes "为什么...？她……死了？";
		next;
		mes "[失踪者的母亲]";
		mes "不等等……我想我听到了她的声音。";
		mes "她很快就要回家了。我现在该回家了。";
		mes "我应该为她准备一顿晚餐。她一定是饿坏了。";
		mes "哈哈...";
		next;
		mes "一个已经疯了的母亲……";
		mes "现在我已经找到失踪的人了";
		mes "我应该向村长汇报。";
		delitem 6520,5; //Lost_Belongings
		erasequest 1183;
		setquest 1184;
		set malaya_bakona2,5;
		close;
	} else {
		mes "[失踪者的母亲]";
		mes "哈哈哈...我能听到我孩子的声音，";
		mes "仔细听。";
		mes "你听不到她叫她妈妈吗？";
		mes "哈哈哈...";
		next;
		mes "一个已经疯了的母亲……";
		if (malaya_bakona2 == 5) {
			mes "现在我已经找到失踪的人了";
			mes "我应该向村长汇报。";
		}
		close;
	}
}

malaya,289,364,4	script	Young Fortune Teller	583,{
	if (checkweight(1301,3) == 0) {
		mes "您无法开始对话。您携带的物品太多。 -";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 他看起来对你很谨慎。 -";
		close;
	}
	if (malaya_bakona2 < 6) {
		mes "[年轻算命师]";
		mes "月亮的能量越来越弱。";
		mes "之所以有更多的怪物，";
		mes "以及更多受害者的原因";
		mes "都是因为这个。";
		close;
	} else if (malaya_bakona2 == 6) {
		mes "[年轻算命师]";
		mes "一连几天，月亮的能量都变弱了。";
		mes "之所以有更多的怪物，";
		mes "而受害者之所以更多，也是因为这个。";
		next;
		mes "[年轻算命师]";
		mes "我试图举行一个仪式";
		mes "通过牺牲怪物的血液来恢复月亮的能量，";
		mes "所以我需要你去狩猎十五个^FF0000Tikbalang^000000";
		mes "和巴约・马希瓦加场。";
		next;
		switch(select("这不关我的事：你可以信赖我。")) {
		case 1:
			mes "[年轻算命师]";
			mes "你太自私了！";
			mes "仪式期间，";
			mes "我也会为你祈福。";
			close;
		case 2:
			mes "[年轻算命师]";
			mes "匆忙。";
			mes "如果月亮完全消失";
			mes "将会有一场大灾难。";
			erasequest 1185;
			setquest 1186;
			set malaya_bakona2,7;
			close;
		}
	} else if (malaya_bakona2 == 7) {
		if (checkquest(1186,HUNTING) == 2) {
			mes "[年轻算命师]";
			mes "看来你照顾了^FF0000Tikbalang^000000";
			mes "够好了。";
			mes "我想我现在可以开始仪式了。";
			mes "我们需要一些物品，请前往";
			mes "向村长求助。";
			erasequest 1186;
			setquest 1187;
			set malaya_bakona2,8;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 12699,7; //Tikbalang_Belt
			else
				getitem 12699,5; //Tikbalang_Belt
			close;
		} else {
			mes "[年轻算命师]";
			mes "我需要你去狩猎十五个^FF0000Tikbalang^000000";
			mes "和巴约・马希瓦加场。";
			next;
			mes "[年轻算命师]";
			mes "匆忙。";
			mes "如果月亮完全消失";
			mes "将会有一场大灾难。";
			close;
		}
	} else if (malaya_bakona2 == 8) {
		mes "[年轻算命师]";
		mes "我想我现在可以开始仪式了。";
		mes "我们需要一些物品，请前往";
		mes "向村长求助。";
		close;
	} else {
		mes "[年轻算命师]";
		mes "当月亮完全消失的那一天，";
		mes "龙将攻击村庄。";
		mes "没有人会安全。";
		close;
	}
	end;
}

ma_fild01,54,253,4	script	Gruffy Worker#bako2	582,{
	if (malaya_bakona2 < 9) {
		mes "[脾气暴躁的工人]";
		mes "村长告诉我";
		mes "在这里等你。";
		close;
	} else if (malaya_bakona2 == 9) {
		mes "[脾气暴躁的工人]";
		mes "陷阱将设置在正前方。";
		mes "向前走一点。";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[脾气暴躁的工人]";
		mes "您可以找到";
		mes "脾气暴躁的工人在哪里附近";
		mes "巴贾拉（Barjala）追随马多（Madho），劳迪（Laodhi）最后。";
		mes "一起去设下陷阱吧。";
		close;
	} else {
		mes "[脾气暴躁的工人]";
		mes "你是想打广告吗";
		mes "这里有陷阱吗？退到一边去。";
		close;
	}
	end;
}

ma_fild01,54,244,0	script	#bako2	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 9) {
		mes "我应该设下陷阱";
		mes "就在这里。";
		next;
		mes "[脾气暴躁的工人]";
		mes "使用这样的工具";
		mes "砰砰砰！";
		next;
		mes "砰砰砰！";
		next;
		mes "现在陷阱已设。";
		next;
		mes "[脾气暴躁的工人]";
		mes "您可以找到";
		mes "脾气暴躁的工人在哪里附近";
		mes "巴贾拉（Barjala）追随马多（Madho），劳迪（Laodhi）最后。";
		mes "一起去设下陷阱吧。";
		erasequest 1188;
		setquest 1189;
		set malaya_bakona2,10;
		close;
	} else if (malaya_bakona2 == 10) {
		mes "陷阱已经在这里设置了。";
		next;
		mes "[脾气暴躁的工人]";
		mes "这个陷阱不是为了捕获你，";
		mes "所以移动吧。";
		next;
		mes "[脾气暴躁的工人]";
		mes "您可以找到";
		mes "脾气暴躁的工人在哪里附近";
		mes "巴贾拉（Barjala）追随马多（Madho），劳迪（Laodhi）最后。";
		mes "到他那里去。";
		close;
	}
	end;
}

ma_fild01,236,119,5	script	Grumpy Worker#bako2	577,{
	if (malaya_bakona2 < 10) {
		mes "[脾气暴躁的工人]";
		mes "村长告诉我";
		mes "在这里等你。";
		mes "太无聊了！";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[脾气暴躁的工人]";
		mes "这里需要在前面挖一个洞吗？";
		mes "我也得挖？";
		mes "说谁？";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[脾气暴躁的工人]";
		mes "去找那个胆怯的工人";
		mes "靠近巴科纳瓦湖入口处。";
		mes "来吧，动起来吧！";
		close;
	} else {
		mes "[脾气暴躁的工人]";
		mes "我设下陷阱";
		mes "你正在宣传它就在这里。";
		mes "滚！";
		close;
	}
}

ma_fild01,242,116,0	script	#bako3	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 10) {
		mes "我应该设下陷阱";
		mes "就在这里。";
		next;
		mes "[脾气暴躁的工人]";
		mes "我真的不喜欢这里！";
		mes "...";
		mes "有了这把镐，";
		mes "你你你！";
		next;
		mes "你你你！";
		next;
		mes "现在陷阱已设。";
		next;
		mes "[脾气暴躁的工人]";
		mes "去找那个胆怯的工人";
		mes "靠近巴科纳瓦湖入口处。";
		mes "来吧，动起来吧！";
		erasequest 1189;
		setquest 1190;
		set malaya_bakona2,11;
		close;
	} else if (malaya_bakona2 == 11) {
		mes "陷阱已经在这里设置了。";
		next;
		mes "[脾气暴躁的工人]";
		mes "你想测试吗";
		mes "如果陷阱有效的话，用你的身体？";
		mes "往一边走！";
		next;
		mes "[脾气暴躁的工人]";
		mes "去找那个胆怯的工人";
		mes "靠近巴科纳瓦湖入口处。";
		mes "来吧，动起来吧！";
		close;
	}
	end;
}

ma_scene01,177,89,4	script	Cowardly Worker#bako2	578,{
	if (malaya_bakona2 < 11) {
		mes "[胆怯的工人]";
		mes "村长告诉我";
		mes "在这里等你。";
		mes "为什么是我？我对此有一种不好的预感......";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[胆怯的工人]";
		mes "在这前面设下陷阱？";
		mes "村长说我也得帮忙？";
		mes "请问你可以自己做吗？";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[胆怯的工人]";
		mes "往上走你就会";
		mes "找到忧郁的工人。";
		mes "去！你吓到我了。";
		mes "你看起来像是要打我。";
		close;
	} else {
		mes "[胆怯的工人]";
		mes "离开！";
		mes "如果巴科纳瓦怎么办";
		mes "因你而出现？";
		mes "我吓死了！";
		close;
	}
	end;
}

ma_scene01,179,85,0	script	#bako4	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 11) {
		mes "我应该设下陷阱";
		mes "就在这里。";
		next;
		mes "[胆怯的工人]";
		mes "没有什么奇怪的";
		mes "埋在这里吧？";
		mes "...";
		mes "使用铲子，挖挖挖！";
		next;
		mes "你你你！";
		next;
		mes "现在陷阱已设。";
		next;
		mes "[胆怯的工人]";
		mes "往上走你就会";
		mes "找到忧郁的工人。";
		erasequest 1190;
		setquest 1191;
		set malaya_bakona2,12;
		close;
	} else if (malaya_bakona2 == 12) {
		mes "陷阱已经在这里设置了。";
		next;
		mes "[胆怯的工人]";
		mes "赶紧退到一边去！";
		mes "巴科纳瓦可能会发现这是一个陷阱";
		mes "来找我们吧。";
		next;
		mes "[胆怯的工人]";
		mes "往上走你就会";
		mes "找到忧郁的工人。";
		emotion ET_SWEAT, playerattached();
		close;
	}
	end;
}

ma_scene01,141,118,4	script	Gloomy Worker#bako2	582,{
	if (malaya_bakona2 < 12) {
		mes "[忧郁的工人]";
		mes "村长让我在这里等你。";
		mes "他一定想让我做点什么。";
		mes "呼...";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[忧郁的工人]";
		mes "在左侧设置陷阱？";
		mes "我认为不会有太大用处...";
		mes "呃，我应该搬走或者别的什么......";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[忧郁的工人]";
		mes "无论如何，我们都会死在巴科纳瓦身边。";
		mes "这是毫无意义的。";
		mes "只要沿着小路往上走你就会发现";
		mes "感性的工人。";
		close;
	} else {
		mes "[忧郁的工人]";
		mes "巴科纳瓦无论如何都会攻击我们。";
		mes "什么无意义的工作...";
		close;
	}
	end;
}

ma_scene01,138,122,0	script	#bako5	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 12) {
		mes "我应该设下陷阱";
		mes "就在这里。";
		next;
		mes "[忧郁的工人]";
		mes "只要抓住这张网，";
		mes "扔扔！";
		next;
		mes "扔扔！";
		next;
		mes "现在陷阱已设。";
		next;
		mes "[忧郁的工人]";
		mes "只要沿着小路往上走你就会发现";
		mes "感性的工人。";
		mes "尽管我怀疑这会有很大帮助。";
		erasequest 1191;
		setquest 1192;
		set malaya_bakona2,13;
		close;
	} else if (malaya_bakona2 == 13) {
		mes "陷阱已经在这里设置了。";
		next;
		mes "[忧郁的工人]";
		mes "陷阱毫无意义。";
		mes "看？它甚至不起作用。";
		close;
	}
	end;
}

ma_scene01,175,170,5	script	Sentimental Worker#bako2	578,{
	if (malaya_bakona2 < 13) {
		mes "[感性工作者]";
		mes "村长让我在这里等你。";
		mes "难道有什么意外事件吗？";
		mes "我的心跳得更快了~";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[感性工作者]";
		mes "哇！所以我们要一起努力";
		mes "在这个地方设下陷阱？";
		mes "这太酷了！";
		mes "这是世界上最酷的事情！";
		close;
	} else if (malaya_bakona2 == 14) {
		mes "[感性工作者]";
		mes "既然陷阱已经设下，";
		mes "我们要向村长汇报吗？";
		mes "噢，多么有趣啊！";
		mes "听起来很令人兴奋！";
		close;
	} else {
		mes "[感性工作者]";
		mes "我想得越多，我就越兴奋。";
		mes "我在暗中守着陷阱！";
		mes "我想大声说出来。";
		mes "我面前有陷阱！哈哈哈哈~";
		emotion ET_PROFUSELY_SWEAT, playerattached();
		close;
	}
	end;
}

ma_scene01,171,174,0	script	#bako6	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 13) {
		mes "我应该设下陷阱";
		mes "就在这里。";
		next;
		mes "[感性工作者]";
		mes "哇！这确实是一个完美的地方";
		mes "设置陷阱。";
		mes "我要扔绳子了！";
		mes "绳子来了！";
		next;
		mes "绳子来了！";
		next;
		mes "现在陷阱已设。";
		mes "我们去找村长吧";
		mes "现在陷阱已经设置好了。";
		erasequest 1192;
		setquest 1193;
		set malaya_bakona2,14;
		close;
	} else if (malaya_bakona2 == 14) {
		mes "陷阱就设在这里。";
		next;
		mes "[感性工作者]";
		mes "先试试陷阱吧！";
		mes "我很好奇";
		mes "会发生什么！";
		mes "这将会非常有趣！";
		close;
	}
	end;
}

// Original name: "Bakonawa Introduction Quest Helper#bako1"
sec_in02,10,16,5	script	Bakonawa Intro Helper	543,{
	if (callfunc("F_GM_NPC",1854,0) < 1) {
		mes "海鲜豉汁面！";
		close;
	}
	mes "[方案打火机]";
	mes "就大胆的告诉我吧";
	mes "你想要什么！";
	next;
	switch(select("重置所有任务：第一个任务结束前：重置次要任务：丢失物品的分配：狩猎后")) {
	case 1:
		mes "干得好！";
		set malaya_bakona1,0;
		set malaya_bakona2,0;
		for(set .@i,1174; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	case 2:
		mes "[方案打火机]";
		mes "干得好！";
		set malaya_bakona1,6;
		for(set .@i,1174; .@i<=1178; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		setquest 1179;
		close;
	case 3:
		mes "[方案打火机]";
		mes "干得好！";
		set malaya_bakona2,0;
		for(set .@i,1180; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	case 4:
		mes "[方案打火机]";
		mes "干得好！";
		getitem 6520,17; //Lost_Belongings
		close;
	case 5:
		mes "[方案打火机]";
		mes "干得好！";
		set malaya_bakona2,8;
		setquest 1187;
		for(set .@i,1178; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	}
}

// Nurse in Port Malaya :: malaya_bang
//============================================================
function	script	F_Malaya_Nurse	{
	if (malaya_bang == 30) {
		mes "[拉斯护士]";
		mes "护身符？";
		mes "我认为你应该寻找其他东西。";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0);
	} else if (malaya_bang == 31) {
		mes "[拉斯护士]";
		mes "一个符咒和一个人？";
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "我确实看到了那个护身符，但我没有靠近它，因为我有一种不好的预感。";
		next;
		mes "[拉斯护士]";
		mes "哦！";
		mes "说起符咒，那老太太在村里放了一些，难道不知道吗？";
		mes "我想问问她是个好主意。";
		set malaya_bang,32;
		changequest 11303,11304;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 32) {
		mes "[拉斯护士]";
		mes "哦！";
		mes "说起符咒，那老太太难道不知道吗，她在医院里放了一些符咒？";
		mes "我想问问她是个好主意。";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 33) {
		mes "[拉斯护士]";
		mes "萨满……如果我们能见到她就好了。";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 34) {
		mes "[拉斯护士]";
		mes "哦！";
		mes "你一定见过她。";
		mes "我感觉到有某种强烈的东西...";
		cutin "malaya_nurseA01",2;
		next;
		select("告诉她关于护身符的事。");
		mes "[拉斯护士]";
		mes "是的！";
		mes "我有一个主意。";
		mes "我们把这个贴在我们在二楼门上看到的那个上怎么样？";
		emotion ET_AHA;
		next;
		mes "[拉斯护士]";
		mes "也许它会阻挡它散发出的坏能量。";
		set malaya_bang,35;
		changequest 11306,11307;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 35) {
		mes "[拉斯护士]";
		mes "是的！";
		mes "我有一个主意。";
		mes "我们把这个贴在我们在二楼门上看到的那个上怎么样？";
		emotion ET_AHA;
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "也许它会阻挡它散发出的坏能量。";
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 36) {
		callsub L_Weight;
		mes "[梅恩护士]";
		mes "*叹*...";
		mes "当你站在我身后时我觉得很奇怪......";
		cutin "malaya_nurseB",2;
		next;
		mes "[梅恩护士]";
		mes "我没想到你会做这样的事。";
		emotion ET_THINK;
		next;
		mes "[梅恩护士]";
		mes "我们正要进入Bangungot的房间，就被赶了出去……";
		next;
		switch(select("噩梦？：梅恩护士？")) {
		case 1:
			callsub L_Bangungot;
			select("梅恩护士");
			callsub L_Maenne;
			break;
		case 2:
			callsub L_Maenne;
			select("恶梦");
			callsub L_Bangungot;
			break;
		}
		callsub L_Incomplete;
		set malaya_bang,42;
		changequest 11308,11309;
		callsub L_Reward;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 40) {
		callsub L_Weight;
		if (checkquest(11309,HUNTING) == 2) {
			callsub L_Complete;
			set malaya_bang,41;
			completequest 11309;
			callsub L_Reward;
			callsub L_Warp, getarg(0), 1;
		} else {
			callsub L_Incomplete;
			set malaya_bang,42;
			callsub L_Reward;
			callsub L_Warp, getarg(0);
		}
	} else if (malaya_bang > 40) {
		if (malaya_bang == 42) {
			if (checkquest(11309,HUNTING) == 2) {
				callsub L_Complete;
				set malaya_bang,41;
				completequest 11309;
				callsub L_Warp, getarg(0), 1;
			} else {
				callsub L_Incomplete;
				callsub L_Warp, getarg(0);
			}
		}
		callsub L_Incomplete;
		switch(getarg(0)) {
		case 1:
			next;
			switch(select("进入医院：退出。")) {
			case 1:
				callsub L_Warp, getarg(0);
			case 2:
				mes "[梅恩护士]";
				mes "嗯...";
				close2;
				cutin "",255;
				end;
			}
		case 2:
			callsub L_Warp, getarg(0);
		}
	}
	return;

L_Weight:
	if (checkweight(1201,1) == 0) {
		mes "- 等待 ！！ -";
		mes "- 你的物品太多了。 -";
		mes "- 无法接收物品。 -";
		mes "- 请减轻你的包 -";
		mes "- 然后再试一次。 -";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "- 等待 ！！ -";
		mes "- 你携带的物品太多。 -";
		mes "- 无法接收物品。 -";
		mes "- 请减轻你的包 -";
		mes "- 然后再试一次。 -";
		close;
	}
	return;

L_Warp:
	switch(getarg(0)) {
	case 1:
		close2;
		cutin "",255;
		if (getarg(1,0) == 0)
			warp "ma_dun01",33,110;
		end;
	case 2:
		next;
		switch(select("出去吧：退出。")) {
		case 1:
			close2;
			cutin "",255;
			warp "malaya",58,76;
			end;
		case 2:
			mes "[拉斯护士]";
			mes "啧……";
			close2;
			cutin "",255;
			end;
		}
	}

L_Reward:
	if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE)) {
		getitem 6499,5; //Ancient_Grudge
		getitem 6497,10; //Lesser_Agimat
	} else {
		getitem 6499,3; //Ancient_Grudge
		getitem 6497,5; //Lesser_Agimat
	}
	getitem 617,1; //Old_Violet_Box
	getexp 1000000,0;
	return;

L_Bangungot:
	mes "[梅恩护士]";
	mes "这是一个邪恶的怪物在这家医院里游荡。";
	next;
	mes "[梅恩护士]";
	mes "嗯嗯...";
	mes "完全不是什么怪物啊……";
	mes "更像是一种诅咒或疾病......";
	next;
	mes "[梅恩护士]";
	mes "有一个故事说，它曾经是一位木仙。";
	next;
	mes "[梅恩护士]";
	mes "无论如何，这都改变不了她杀死这家医院的病人，把他们变成怪物的事实。";
	next;
	return;

L_Maenne:
	mes "[梅恩护士]";
	mes "我？";
	mes "如你所见，我是这里的新护士。";
	mes "我是一名护士，专门从事“此类”工作，而不是照顾病人。";
	cutin "malaya_nurseB",2;
	next;
	mes "[梅恩护士]";
	mes "哦！";
	mes "Bangungot 冒充我？";
	next;
	mes "[梅恩护士]";
	mes "可见它给你带来了多大的困扰。";
	mes "这是一个相当聪明的做法。";
	next;
	mes "[梅恩护士]";
	mes "简单地说，我治疗医院周围的不自然现象。";
	next;
	mes "[梅恩护士]";
	mes "世界上发生了很多事情。";
	next;
	return;

L_Complete:
	mes "[梅恩护士]";
	mes "她在这里扎根的程度可能比我想象的还要深。";
	mes "我仍然能感觉到她的存在。";
	cutin "malaya_nurseB",2;
	next;
	mes "[梅恩护士]";
	mes "你杀掉的，是她的一部分……";
	mes "但是，这对她来说是一个很大的帮助，因为你同时困惑并伤害了她。";
	next;
	mes "[梅恩护士]";
	mes "它让事情变得容易多了。";
	mes "谢谢。";
	return;

L_Incomplete:
	mes "[梅恩护士]";
	mes "如果她脱离了身体的话还好办，但是现在她回到了自己的房间，这就有些棘手了。";
	cutin "malaya_nurseB",2;
	next;
	mes "[梅恩护士]";
	mes "当然，你也不敢走开，因为你打扰了我的工作，还把她带到了她的房间。";
	next;
	mes "[梅恩护士]";
	mes "如果你到了二楼门口，我会为你打开一扇通向她房间的小门。";
	mes "从此以后，她就是你的了。";
	return;
}

malaya,55,72,4	script	Nurse#ma_n1	569,{
	if (malaya_hi < 20) {
		mes "[护士]";
		mes "这个镇上的人对外人太警惕了。";
		emotion ET_ANGER;
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士]";
		mes "我确信他们有他们的理由，但我希望他们能告诉我如何接近......";
		close2;
		cutin "",255;
		end;
	}
	if (BaseLevel < 100) {
		mes "医院外面有一名护士拿着一个大袋子。";
		mes "我不认为我能帮助她。";
		close;
	}
	if (malaya_bang == 0) {
		mes "[护士]";
		mes "嘿，等一下。";
		mes "你打算进去吗？";
		cutin "malaya_nurseA01",2;
		next;
		switch(select("是的。：没有。")) {
		case 1:
			mes "[护士]";
			mes "哦~";
			mes "我很高兴！";
			mes "我真的一整天都在等待有人过来。";
			cutin "malaya_nurseA02",2;
			next;
			switch(select("关于医院：拖延我的原因：忽略。")) {
			case 1:
				mes "[护士]";
				mes "这家医院是镇上唯一的一家。";
				mes "这将是我的新工作。";
				cutin "malaya_nurseA03",2;
				next;
				mes "[护士]";
				mes "听说刚建好，但是看起来好吓人......";
				emotion ET_SWEAT;
				next;
				mes "[护士]";
				mes "我来的时候也很惊讶。";
				mes "周围都写着“关闭”！";
				next;
				select("拖延我的理由。");
				mes "[护士]";
				mes "我听说这个镇上需要护士";
				mes "所以我在拒绝了无数的提议之后来到了这里。";
				next;
				mes "[护士]";
				mes "听说他们对外人非常警惕……";
				next;
				mes "[护士]";
				mes "连一个欢迎我的人都没有，更不用说聚会了！";
				mes "令人震惊！";
				emotion ET_CRY;
				next;
				mes "[护士]";
				mes "更重要的是，我迷路后来到了这里，现在我面对的是一家令人毛骨悚然、上锁的医院！";
				next;
				break;
			case 2:
				mes "[护士]";
				mes "我听说这个镇上需要护士";
				mes "所以我在拒绝了无数的提议之后来到了这里。";
				cutin "malaya_nurseA03",2;
				next;
				mes "[护士]";
				mes "听说他们对外人非常警惕……";
				next;
				mes "[护士]";
				mes "连一个欢迎我的人都没有，更不用说聚会了！";
				mes "令人震惊！";
				emotion ET_CRY;
				next;
				mes "[护士]";
				mes "更重要的是，我迷路后来到了这里，现在我面对的是一家令人毛骨悚然、上锁的医院！";
				next;
				select("关于医院");
				mes "[护士]";
				mes "这家医院是镇上唯一的一家。";
				mes "这将是我的新工作。";
				next;
				mes "[护士]";
				mes "听说刚建好，但是看起来好吓人......";
				emotion ET_SWEAT;
				next;
				mes "[护士]";
				mes "我来的时候也很惊讶。";
				mes "周围都写着“关闭”！";
				next;
				break;
			case 3:
				mes "[护士]";
				mes "是的，你一定很忙。";
				mes "那好吧。";
				mes "我会让你上路的。";
				mes "别介意我。 *哭泣*";
				emotion ET_CRY;
				cutin "malaya_nurseA03",2;
				close2;
				cutin "",255;
				end;
			}
			break;
		case 2:
			mes "[护士]";
			mes "我懂了...";
			emotion ET_CRY;
			close2;
			cutin "",255;
			end;
		}
		mes "[护士]";
		mes "既然你这么说了……如果你要进去的话，可以带我一起去吗？";
		cutin "malaya_nurseA04",2;
		next;
		mes "[护士]";
		mes "门锁着！";
		mes "我的包很重！";
		mes "我的腿快要死了。";
		cutin "malaya_nurseA03",2;
		next;
		mes "[护士]";
		mes "如果我知道会发生这种情况，我就会穿急诊室夜班鞋而不是第一天穿的鞋……*嗅一嗅*";
		emotion ET_CRY;
		next;
		switch(select("救命：不救。")) {
		case 1:
			mes "[护士]";
			mes "*哭泣*";
			mes "我想这个世界还是值得活下去的。";
			mes "你太善良了。";
			emotion ET_CRY;
			next;
			mes "[拉斯护士]";
			mes "我是“拉斯”，应该在这家医院工作。";
			mes "不过看样子，我可能会失业……";
			next;
			mes "[拉斯护士]";
			mes "让我们从进入内部开始吧。";
			next;
			mes "[拉斯护士]";
			mes "在那之前....";
			mes "你能拿点东西包住我的脚吗？我不能穿鞋，因为我已经起水泡了。";
			emotion ET_HELP;
			cutin "malaya_nurseA04",2;
			next;
			mes "[拉斯护士]";
			mes "两条腐烂的绷带应该可以包住我的双脚。它们可能看起来很脏，但它们上面有特殊的液体，具有惊人的效果。";
			set malaya_bang,1;
			setquest 11284;
			close2;
			cutin "",255;
			end;
		case 2:
			mes "[护士]";
			mes "是的，你一定很忙。";
			mes "那好吧。";
			mes "我会让你上路的。";
			mes "别介意我。 *哭泣*";
			emotion ET_CRY;
			cutin "malaya_nurseA03",2;
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 1) {
		if (countitem(930) > 1) {
			mes "[拉斯护士]";
			mes "哦......";
			mes "我知道它们很有效，但是……没那么诱人。";
			cutin "malaya_nurseA01",2;
			next;
			mes "[拉斯护士]";
			mes "腐烂的绷带……这个名字很适合形容刚从木乃伊上切下来的东西。";
			next;
			mes "[拉斯护士]";
			mes "我正在重新考虑他们，但因为我要成为一名专业护士！";
			mes "这里什么也没有！！！";
			mes "哎呀！！";
			next;
			mes "[拉斯护士]";
			mes "*压扁*";
			mes "*静噪*";
			delitem 930,2; //Rotten_Bandage
			set malaya_bang,2;
			close2;
			cutin "",255;
			end;
		} else {
			mes "[拉斯护士]";
			mes "在那之前...";
			mes "你能拿点东西包住我的脚吗？我不能穿鞋，因为我已经起水泡了。";
			emotion ET_HELP;
			cutin "malaya_nurseA03",2;
			next;
			mes "[拉斯护士]";
			mes "两条腐烂的绷带应该可以包住我的双脚。它们可能看起来很脏，但它们上面有特殊的液体，具有惊人的效果。";
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 2) {
		mes "[拉斯护士]";
		mes "啊啊啊……";
		mes "我的脚现在感觉好多了，但闻起来很奇怪。";
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "噢……气味……";
		mes "我的新鞋要坏掉了";
		emotion ET_PROFUSELY_SWEAT;
		next;
		mes "[拉斯护士]";
		mes "好的！！！！！！";
		mes "不知道是锁住了还是卡住了，咱们一起推一下吧！";
		set malaya_bang,3;
		changequest 11284,11285;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 3) {
		mes "[拉斯护士]";
		mes "好的！！！！！！";
		mes "不知道是锁住了还是卡住了，咱们一起推一下吧！";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 4) {
		mes "["+strcharinfo(0)+"]";
		mes "我们推拉，但它纹丝不动。";
		emotion ET_PROFUSELY_SWEAT, playerattached();
		next;
		mes "[拉斯护士]";
		mes "奇怪~";
		mes "他们不会把我送到一家关闭的医院。";
		cutin "malaya_nurseA03",2;
		next;
		mes "[拉斯护士]";
		mes "嗯！";
		mes "我再也受不了了！";
		emotion ET_FRET;
		next;
		mes "[拉斯护士]";
		mes "我联系总部时，你能向镇上的居民询问一下医院的情况吗？";
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "嘿，你为什么不从那边那个女孩开始呢？";
		mes "也许她会告诉你一些事情。";
		set malaya_bang,5;
		changequest 11286,11287;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 5) {
		mes "[拉斯护士]";
		mes "我联系总部时，你能向镇上的居民询问一下医院的情况吗？";
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "嘿，你为什么不从那边那个女孩开始呢？";
		mes "也许她会告诉你一些事情。";
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 6) {
		mes "[拉斯护士]";
		mes "她说什么？";
		emotion ET_QUESTION;
		cutin "malaya_nurseA02",2;
		next;
		select("告诉她她说的话。");
		mes "[拉斯护士]";
		mes "奇怪的。";
		mes "总部确认我被分配到这里。";
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "也许那个女孩不知道这个地方？";
		mes "总部不可能把我派到这里并在这件事上撒谎。你能问问城里的其他人吗？";
		next;
		mes "[拉斯护士]";
		mes "我将再次联系总部以获取更多信息。";
		mes "嘿，为什么不问问那边那个人呢？";
		mes "我确信他会知道一些事情。";
		set malaya_bang,7;
		changequest 11288,11289;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 7) {
		mes "[拉斯护士]";
		mes "我将再次联系总部以获取更多信息。";
		mes "嘿，为什么不问问那边那个人呢？";
		mes "我确信他会知道一些事情。";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 8) {
		mes "[拉斯护士]";
		mes "在？";
		mes "好有恩惠啊！";
		mes "如果他们早点告诉我，我就不用在这里站这么久了！";
		emotion ET_HNG;
		cutin "malaya_nurseA01",2;
		next;
		mes "[拉斯护士]";
		mes "嗯……";
		mes "......";
		mes "......";
		next;
		mes "[拉斯护士]";
		mes "嘿...你知道吗...";
		next;
		mes "[拉斯护士]";
		mes "我觉得我的脚已经不能动了。你能帮我去旅馆吗？";
		emotion ET_PROFUSELY_SWEAT;
		cutin "malaya_nurseA03",2;
		next;
		mes "[拉斯护士]";
		mes "我无法随身携带行李，所以我会留在这里，一边护理脚一边照看它们。";
		next;
		mes "[拉斯护士]";
		mes "无论如何，我必须再次回到这里。";
		mes "谢谢。";
		set malaya_bang,9;
		changequest 11290,11291;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 9) {
		mes "[拉斯护士]";
		mes "我觉得我的脚已经不能动了。你能帮我去旅馆吗？";
		emotion ET_PROFUSELY_SWEAT;
		cutin "malaya_nurseA03",2;
		next;
		mes "[拉斯护士]";
		mes "我无法随身携带行李，所以我会留在这里，一边护理脚一边照看它们。";
		next;
		mes "[拉斯护士]";
		mes "无论如何，我必须再次回到这里。";
		mes "谢谢。";
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 10) {
		mes "[拉斯护士]";
		mes "嘿~";
		mes "怎么样？";
		cutin "malaya_nurseA02",2;
		next;
		select("交出钥匙和消息。");
		mes "[拉斯护士]";
		mes "钥匙？";
		mes "嗯，这离我的目标又近了一步！";
		mes "我们现在就开门吧！";
		set malaya_bang,11;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 11) {
		mes "[拉斯护士]";
		mes "钥匙？";
		mes "嗯，这离我的目标又近了一步！";
		mes "我们现在就开门吧！";
		cutin "malaya_nurseA02",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 12) {
		mes "[拉斯护士]";
		mes "那就奇怪了~！";
		mes "门没锁？";
		mes "怎么会这样？？？？";
		mes "????";
		emotion ET_QUESTION;
		emotion ET_QUESTION, playerattached();
		cutin "malaya_nurseA04",2;
		next;
		mes "[拉斯护士]";
		mes "哦不！";
		mes "一切都在崩溃。";
		mes "也许我们应该等待医生来......";
		cutin "malaya_nurseA03",2;
		next;
		mes "[???]";
		mes "...";
		cutin "",255;
		next;
		mes "[???]";
		mes "*暗笑*";
		emotion ET_QUESTION, playerattached();
		emotion ET_QUESTION;
		next;
		mes "[???]";
		mes "嘿"+((Sex == SEX_MALE)?"老兄":"小姐")+",";
		mes "你不能去医院。";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "谁在那里？";
		next;
		mes "[???]";
		mes "*暗笑*";
		next;
		mes "[???]";
		mes "这是一个秘密~";
		mes "如果我妈妈知道我在这里，她会杀了我的！";
		next;
		switch(select("关于入院：关于妈妈。：关于???：退出。")) {
		case 1:
			mes "[???]";
			mes "几天前，住在我们附近的一位老太太在医院周围走动，把一些棍子插在地上。";
			next;
			mes "[???]";
			mes "她一边咕哝着，一边四处张望。";
			next;
			mes "[???]";
			mes "我被很好地隐藏在这里，因为我不应该在这里。";
			next;
			break;
		case 2:
			mes "[???]";
			mes "我妈妈曾经告诉过我。";
			mes "老太太的女儿在这里住院。";
			next;
			mes "[???]";
			mes "然而她始终没有摆脱困境……";
			next;
			mes "[???]";
			mes "她不是唯一一个。医院里发生了很多奇怪的事情。";
			next;
			mes "[???]";
			mes "这就是为什么我妈妈不希望我来这里。";
			next;
			break;
		case 3:
			mes "[???]";
			mes "何塞怎么可能！";
			mes "上次我在这附近被抓到时，我挨了打屁股！";
			next;
			mes "[???]";
			mes "如果再被抓到，打屁股也不会结束……";
			mes "太可怕了。";
			next;
			break;
		case 4:
			mes "[???]";
			mes "哼！！";
			close;
		}
		mes "声音似乎是从医院门口附近的灌木丛中传来的。";
		specialeffect EF_STEAL,AREA,"Bushes#ma";
		set malaya_bang,13;
		changequest 11293,11294;
		close;
	} else if (malaya_bang == 13) {
		mes "声音似乎是从医院门口附近的灌木丛中传来的。";
		mes "让我们检查一下。";
		specialeffect EF_STEAL,AREA,"Bushes#ma";
		close;
	} else if (malaya_bang == 14) {
		mes "[拉斯护士]";
		mes "嗯……我们去医院看看吧。";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 15) {
		mes "[拉斯护士]";
		mes "嘿……嗯……";
		mes "你知道...";
		mes "你能去拜访一下那位老太太吗？";
		cutin "malaya_nurseA04",2;
		next;
		mes "[拉斯护士]";
		mes "哦，我？我会在这里四处看看。";
		next;
		mes "[拉斯护士]";
		mes "如你所知，我的脚很痛...";
		mes "是的？";
		mes "是的？";
		next;
		switch(select("走：别走。")) {
		case 1:
			mes "[拉斯护士]";
			mes "好吧，你走吧。";
			mes "我想她住在城的西边。";
			mes "继续。";
			next;
			mes "[拉斯护士]";
			mes "嘿，在灌木丛里的你，如果你现在不回家，我就告发你！";
			set malaya_bang,16;
			changequest 11296,11297;
			close2;
			cutin "",255;
			end;
		case 2:
			mes "[拉斯护士]";
			mes "为什么！？";
			mes "留在这里解决不了任何问题。";
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 16 || malaya_bang == 17) {
		mes "[拉斯护士]";
		mes "好吧，你走吧。";
		mes "我想她住在城的西边。";
		mes "继续。";
		cutin "malaya_nurseA04",2;
		next;
		mes "[拉斯护士]";
		mes "嘿，在灌木丛里的你，如果你现在不回家，我就告发你！";
		emotion ET_HUK, getnpcid(0, "Bushes#ma");
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 18) {
		mes "[拉斯护士]";
		mes "怎么样？";
		mes "你见过老太太吗？";
		cutin "malaya_nurseA02",2;
		next;
		mes "[拉斯护士]";
		mes "哦，顺便说一下，当["+strcharinfo(0)+"]时，你走了，我尝试了门。";
		mes "果然打开了...";
		next;
		mes "[拉斯护士]";
		mes "但通往二楼的路被堵住了。";
		mes "我以为开门是突破口，但事实证明并非如此。";
		cutin "malaya_nurseA03",2;
		next;
		mes "[拉斯护士]";
		mes "不管怎样，一楼的门开着，我们进去吧。";
		mes "如果二楼的门不打开，一切都毫无意义。";
		emotion ET_CRY;
		set malaya_bang,19;
		changequest 11299,11300;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else if (malaya_bang == 19) {
		mes "[拉斯护士]";
		mes "不管怎样，一楼的门开着，我们进去吧。";
		mes "如果二楼的门不打开，一切都毫无意义。";
		emotion ET_CRY;
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else if (malaya_bang < 30) {
		mes "[拉斯护士]";
		mes "你能再检查一下二楼的门，以防我漏掉了什么吗？";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else {
		callfunc "F_Malaya_Nurse",1;
		end;
	}
	mes "医院外面有一名护士拿着一个大袋子。";
	mes "我不认为我能帮助她。";
	close;
}

ma_dun01,35,108,4	script	Nurse#ma_n2	569,{
	if (malaya_bang < 19) {
		// fall through
	} else if (malaya_bang < 30) {
		if (malaya_bang == 19) {
			mes "正如老太太所说，医院里怪物横行。";
			mes "她怎么能用这样的脚在二楼来回走动……";
			next;
			set malaya_bang,20;
			changequest 11300,11301;
		}
		mes "[拉斯护士]";
		mes "你能再检查一下二楼的门，以防我漏掉了什么吗？";
		cutin "malaya_nurseA01",2;
		next;
		switch(select("出去吧：退出。")) {
		case 1:
			close2;
			cutin "",255;
			warp "malaya",58,76;
			end;
		case 2:
			mes "[拉斯护士]";
			mes "啧……";
			close2;
			cutin "",255;
			end;
		}
	} else {
		callfunc "F_Malaya_Nurse",2;
		end;
	}
	mes "[护士]";
	mes "我想一个人呆着。";
	mes "请离开。";
	close2;
	warp "malaya",58,76;
	end;
}

ma_dun01,152,23,4	script	Suspicious Wooden Stick::MalayaStick0	858,{
	if (malaya_bang == 20) {
		mes "有一个和医院外面的类似的符咒。";
		mes "让我们四处寻找其他东西。";
		set malaya_bang,30;
		changequest 11301,11302;
		close;
	} else if (malaya_bang == 30) {
		mes "有一个和医院外面的类似的符咒。";
		mes "让我们四处寻找其他东西。";
		close;
	} else if (malaya_bang == 35) {
		mes "将护身符贴在另一张上之后，正如拉斯所说，那种阴暗的感觉就消失了。";
		next;
		mes "[拉斯护士]";
		mes "*暗笑*";
		cutin "malaya_nurseA05",2;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "？！";
		cutin "",255;
		next;
		mes "[拉斯护士]";
		mes "是的，是的！";
		cutin "malaya_nurseA05",2;
		next;
		mes "[拉斯护士]";
		mes "烦人的护身符不见了！";
		next;
		mes "[拉斯护士]";
		mes "*傻笑*";
		next;
		mes "[拉斯护士]";
		mes "人类真是太愚蠢了。你向他们展示一种相当无助的表情，他们就会上当。";
		next;
		mes "[拉斯护士]";
		mes "*暗笑*";
		next;
		mes "[拉斯护士]";
		mes "为了你的工作，我带你去我的房间……";
		mes "该死的...";
		next;
		mes "[拉斯护士]";
		mes "......";
		next;
		mes "[拉斯护士]";
		mes "不不不！";
		mes "你还有那些烦人的护身符！！！";
		next;
		mes "[拉斯护士]";
		mes "这是你的幸运日！";
		mes "*暗笑*";
		set malaya_bang,36;
		changequest 11307,11308;
		close2;
		cutin "",255;
		warp "malaya",58,76;
		end;
	} else if (malaya_bang > 35) {
		mes "无法对符咒产生任何邪恶的感觉。";
		mes "只剩下被拉斯愚弄的苦涩滋味了……";
		close;
	} else {
		mes "感觉不到任何力量。";
		close;
	}
}

malaya,48,76,4	script	Hospital Door#ma_n1	844,{
	if (malaya_bang == 3) {
		mes "用力推门，却打不开。";
		mes "它感觉不像是被锁住或卡住的，而是被一层东西包裹着。";
		set malaya_bang,4;
		changequest 11285,11286;
		close;
	} else if (malaya_bang == 4) {
		mes "用力推门，却打不开。";
		mes "它感觉不像是被锁住或卡住的，而是被一层东西包裹着。";
		close;
	} else if (malaya_bang == 11) {
		mes "把钥匙插进医院门的锁里……";
		mes "但它并没有像预期的那样锁定。";
		next;
		mes "那为什么门打不开呢？";
		set malaya_bang,12;
		changequest 11292,11293;
		close;
	} else if (malaya_bang == 12) {
		mes "把钥匙插进医院门的锁里……";
		mes "但它并没有像预期的那样锁定。";
		next;
		mes "那为什么门打不开呢？";
		close;
	} else if (malaya_bang > 18) {
		if(select("进入医院：退出。") == 1)
			warp "ma_dun01",33,110;
		end;
	} else {
		mes "医院的门似乎关着。";
		close;
	}
}

malaya,64,78,4	script	Village Woman#mab	583,{
	if (malaya_hi < 20) {
		mes "[乡村妇女]";
		mes "......";
		next;
		mes "看来对你很谨慎。";
		close;
	}
	if (malaya_bang == 5) {
		mes "[乡村妇女]";
		mes "哦~你是冒险家吗？";
		mes "最近城里好像有很多这样的人。";
		next;
		mes "[乡村妇女]";
		mes "我出生在这里，从未离开过这里，所以当我听到他们带来的故事时，我总是想继续我的冒险。";
		next;
		switch(select("询问医院的情况：结束对话。")) {
		case 1:
			mes "[乡村妇女]";
			mes "医院？";
			mes "它已经关闭了很长一段时间。";
			mes "他们在这里不谈论这件事。";
			next;
			mes "[乡村妇女]";
			mes "我从来不用去医院。";
			mes "我小时候肚子疼的时候去过一次。我记得那个地方很令人毛骨悚然。";
			next;
			mes "[乡村妇女]";
			mes "孩子们从来都不喜欢医院。";
			next;
			select("询问护士的情况。");
			mes "[乡村妇女]";
			mes "新护士？";
			mes "我不知道。";
			mes "我还没有考虑过。";
			mes "一个新护士来到一家关闭的医院是很奇怪的。";
			set malaya_bang,6;
			changequest 11287,11288;
			close;
		case 2:
			mes "[乡村妇女]";
			mes "祝你有美好的一天~";
			close;
		}
	} else if (malaya_bang == 6) {
		mes "[乡村妇女]";
		mes "新护士？";
		mes "我不知道。";
		mes "我还没有考虑过。";
		mes "一个新护士来到一家关闭的医院是很奇怪的。";
		set malaya_bang,6;
		changequest 11287,11288;
		close;
	} else {
		mes "[乡村妇女]";
		mes "哦~你是冒险家吗？";
		mes "最近城里好像有很多这样的人。";
		next;
		mes "[乡村妇女]";
		mes "我出生在这里，从未离开过这里，所以当我听到他们带来的故事时，我总是想继续我的冒险。";
		close;
	}
}

malaya,62,37,4	script	Village Man#mab	582,{
	if (malaya_hi < 20) {
		mes "[村民]";
		mes "嗯！没见过你吗？";
		mes "是什么风把你吹到我们镇来的？";
		next;
		mes "看来对你很谨慎。";
		close;
	}
	if (malaya_bang == 7) {
		mes "[村民]";
		mes "*笑*";
		mes "你是冒险家吗？";
		mes "有时间的话，来我的菠萝园看看吧。";
		next;
		mes "[村民]";
		mes "就一点点吧~";
		mes "离村子远，但你想要的菠萝我都给你，换你一个好故事！";
		next;
		switch(select("询问医院的情况：结束对话。")) {
		case 1:
			mes "[村民]";
			mes "嗯……";
			mes "你说的是那个医院？";
			next;
			mes "[村民]";
			mes "由于一场事故，它被关闭了。";
			mes "但我不会向外人透露细节......";
			mes "我能告诉你的不多。";
			next;
			select("询问护士的情况。");
			mes "[村民]";
			mes "哦！！！";
			mes "你见到护士了吗？！";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "她站在医院门前。";
			mes "哦！";
			mes "她一定是去联系总部了。";
			next;
			mes "[村民]";
			mes "我们请求“护士”，她已经来了！我们得救了！";
			next;
			select("护士？");
			mes "[村民]";
			mes "她被邀请来这里拯救我们的医院。";
			next;
			mes "[村民]";
			mes "现在我必须把这个好消息传播出去！你能带她去市中心的旅馆吗？";
			next;
			mes "[村民]";
			mes "那是医生住的地方。";
			mes "自从医院关闭以来他就一直在那里。";
			set malaya_bang,8;
			changequest 11289,11290;
			close;
		case 2:
			mes "[村民]";
			mes "哎哟！";
			close;
		}
	} else if (malaya_bang == 8) {
		mes "[村民]";
		mes "现在我必须把这个好消息传播出去！你能带她去市中心的旅馆吗？";
		next;
		mes "[村民]";
		mes "那是医生住的地方。";
		mes "自从医院关闭以来他就一直在那里。";
		close;
	} else {
		mes "[村民]";
		mes "哎哟！";
		mes "你是冒险家吗？";
		mes "有时间的话，来我的菠萝园看看吧。";
		next;
		mes "[村民]";
		mes "就一点点吧~";
		mes "离村子远，但你想要的菠萝我都给你，换你一个好故事！";
		close;
	}
}

malaya,210,200,5	script	Dr. Boon#ma	865,{
	if (malaya_hi < 20) {
		mes "[博士。恩恩]";
		mes "......";
		next;
		mes "看来对你很谨慎。";
		close;
	}
	if (malaya_bang == 9) {
		mes "[博士。恩恩]";
		mes "那么~你是新来的护士吗？";
		next;
		switch(select("是的。：没有。")) {
		case 1:
			mes "[博士。恩恩]";
			mes "对于护士来说，没有什么比白色制服更重要的了。";
			mes "去换衣服吧！";
			close;
		case 2:
			mes "[博士。恩恩]";
			mes "哦！对不起。";
			mes "我们正在等待新护士。";
			mes "我的不好。";
			next;
			select("解释一下情况。");
			mes "[博士。恩恩]";
			mes "啊哈~";
			mes "这就是发生的事情。";
			mes "哦亲爱的。我想其中有一个误会。";
			next;
			mes "[博士。恩恩]";
			mes "你看，医院发生事件后我一直在旅馆里治疗病人。";
			next;
			mes "[博士。恩恩]";
			mes "即便如此，我还是必须为让她站在那里这么久而道歉。";
			next;
			mes "[博士。恩恩]";
			mes "我现在不能离开，因为我还有病人要照顾。你为什么不过去交出这把钥匙呢？";
			next;
			mes "[博士。恩恩]";
			mes "并给她一条带有密钥的消息，上面写着“我将由您自行决定”。";
			next;
			mes "[博士。恩恩]";
			mes "我一忙完就赶到那里。";
			mes "祝你好运~";
			set malaya_bang,10;
			changequest 11291,11292;
			close;
		}
	} else if (malaya_bang == 10) {
		mes "[博士。恩恩]";
		mes "我现在不能离开，因为我还有病人要照顾。你为什么不过去交出这把钥匙呢？";
		next;
		mes "[博士。恩恩]";
		mes "并给她一条带有密钥的消息，上面写着“我将由您自行决定”。";
		next;
		mes "[博士。恩恩]";
		mes "我一忙完就赶到那里。";
		mes "祝你好运~";
		close;
	} else {
		mes "[博士。恩恩]";
		mes "*叹*";
		mes "工作……永无止境……";
		mes "我一个人该如何处理这些病人呢？";
		next;
		mes "[博士。恩恩]";
		mes "什么？医生在旅馆里做什么？";
		mes "嗯，为什么不呢？";
		close;
	}
}

malaya,53,68,4	script	Bushes#ma	844,{
	if (malaya_bang < 13) {
		mes "这只是一个灌木丛。";
		mes "摇晃时会散发出淡淡的木头香味。";
		close;
	}
	if (malaya_bang == 13) {
		mes "[???]";
		mes "别再靠近了！";
		mes "老"+((Sex == SEX_MALE)?"男人":"女士")+"！";
		mes "你怎么知道我在这里？";
		emotion ET_HUK;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我还没老。";
		emotion ET_FRET, playerattached();
		next;
		switch(select("关于进入医院。：关于它的妈妈。：关于???。：询问老太太。：询问医院场地。：退出。")) {
		case 1:
			mes "[???]";
			mes "几天前，住在我们附近的一位老太太在医院周围走动，把一些棍子插在地上。";
			next;
			mes "[???]";
			mes "她一边咕哝着，一边四处张望。";
			next;
			mes "[???]";
			mes "我被很好地隐藏在这里，因为我不应该在这里。";
			next;
			break;
		case 2:
			mes "[???]";
			mes "我妈妈曾经告诉过我。";
			mes "老太太的女儿在这里住院。";
			next;
			mes "[???]";
			mes "然而她始终没有摆脱困境……";
			next;
			mes "[???]";
			mes "她不是唯一一个。医院里发生了很多奇怪的事情。";
			next;
			mes "[???]";
			mes "这就是为什么我妈妈不希望我来这里。";
			next;
			break;
		case 3:
			mes "[???]";
			mes "何塞怎么可能！";
			mes "上次我在这附近被抓到时，我挨了打屁股！";
			next;
			mes "[???]";
			mes "如果再被抓到，打屁股也不会结束……";
			mes "太可怕了。";
			next;
			break;
		case 4:
			mes "[???]";
			mes "这是住在我们隔壁的那位女士。";
			next;
			mes "[???]";
			mes "几天前我看到她在医院附近做某事。";
			next;
			mes "[???]";
			mes "我从这里看不到她在做什么，但她离开后我在那里发现了一些棍子。";
			set malaya_bang,14;
			changequest 11294,11295;
			close;
		case 5:
			mes "[???]";
			mes "我不知道。";
			mes "除了棍子之外，没有什么不同。";
			next;
			mes "[???]";
			mes "老太太偶尔回来检查一下木棍。";
			mes "当这种情况发生时，我的心跳加速！";
			next;
			break;
		case 6:
			mes "[???]";
			mes "哼！！";
			emotion ET_HNG;
			close;
		}
		mes "[???]";
		mes "答应我你不会告诉任何人你看到了我！！！";
		mes "承诺？！";
		close;
	} else if (malaya_bang == 14) {
		mes "[???]";
		mes "我从这里看不到她在做什么，但她离开后我在那里发现了一些棍子。";
		close;
	} else if (malaya_bang == 15) {
		mes "[???]";
		mes "别再靠近了！";
		mes "老"+((Sex == SEX_MALE)?"男人":"女士")+"！";
		mes "你怎么知道我在这里？";
		emotion ET_HUK;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我还没老。";
		emotion ET_FRET, playerattached();
		close;
	} else {
		mes "那里有一个小孩子的痕迹。";
		mes "认为孩子现在已经回家了。";
		close;
	}
}

-	script	Suspicious Wooden Stick::MalayaStick	-1,{
	if (checkweight(1201,1) == 0) {
		mes "- 等待 ！！ -";
		mes "- 你的物品太多了。 -";
		mes "- 无法接收物品。 -";
		mes "- 请减轻你的包 -";
		mes "- 然后再试一次。 -";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "- 等待 ！！ -";
		mes "- 你携带的物品太多。 -";
		mes "- 无法接收物品。 -";
		mes "- 请减轻你的包 -";
		mes "- 然后再试一次。 -";
		close;
	}
	if (malaya_bang == 14) {
		mes "地上插着一根奇怪的棍子。";
		mes "可以感受到一股神秘的力量。";
		next;
		switch(select("把它拉出来：留下它。")) {
		case 1:
			if (rand(1,5) == 4) {
				mes "拔出了深深插在里面的棍子。";
				mes "医院里似乎变得更加阴森了。";
				if (rand(2)) {
					set malaya_bang,15;
					changequest 11295,11296;
					getitem 6497,1; //Lesser_Agimat
					donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
					next;
					mes "最好向拉斯展示护身符。";
					close;
				} else {
					getitem 6497,1; //Lesser_Agimat
					donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
					close;
				}
			} else {
				mes "拔出深深扎根的棍子后，一种不安的感觉袭来。";
				donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
				close;
			}
		case 2:
			mes "看起来不祥。最好别管它。";
			close;
		}
	} else {
		mes "有一根看起来很奇怪的棍子。";
		close;
	}
	end;
OnEnable:
	enablenpc strnpcinfo(3); // NPC name is too long for strnpcinfo(0).
	end;
OnDisable:
	disablenpc strnpcinfo(3);
	end;
}
malaya,40,52,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick1	858
malaya,31,42,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick2	858
malaya,34,36,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick3	858
malaya,40,32,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick4	858
malaya,50,85,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick5	858
malaya,46,93,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick6	858
malaya,36,98,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick7	858
malaya,48,79,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick8	858
malaya,50,46,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick9	858
malaya,59,84,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick10	858

-	script	Tent#ma	-1,{ //557
	end;
OnInit:
	disablenpc();
	end;
OnEnable:
	enablenpc();
	initnpctimer;
	end;
OnDisable:
	stopnpctimer;
	disablenpc();
	end;
OnTimer1000:
	donpcevent "MalayaStick"+replacestr(strnpcinfo(1),"Tent","")+"::OnDisable";
	end;
OnTimer30000:
	donpcevent "MalayaStick"+replacestr(strnpcinfo(1),"Tent","")+"::OnEnable";
	donpcevent strnpcinfo(0)+"::OnDisable";
	end;
}
-	duplicate(Tent#ma)	Tent1#ma	-1
-	duplicate(Tent#ma)	Tent2#ma	-1
-	duplicate(Tent#ma)	Tent3#ma	-1
-	duplicate(Tent#ma)	Tent4#ma	-1
-	duplicate(Tent#ma)	Tent5#ma	-1
-	duplicate(Tent#ma)	Tent6#ma	-1
-	duplicate(Tent#ma)	Tent7#ma	-1
-	duplicate(Tent#ma)	Tent8#ma	-1
-	duplicate(Tent#ma)	Tent9#ma	-1
-	duplicate(Tent#ma)	Tent10#ma	-1

malaya,114,183,3	script	Bent Old Lady#ma	575,{
	if (malaya_bang == 16) {
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "女士，对不起，我可以问你一个问题吗？";
		next;
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我有吗";
		next;
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我有吗";
		next;
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "夫人！！！！！！！";
		next;
		mes "[弯腰的老太太]";
		mes "WHO？什么？";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "对不起，我可以问你一件事吗？";
		next;
		mes "[弯腰的老太太]";
		mes "什么？我听不到你说话。";
		mes "说出来！";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我！有！某物！到！问！你！";
		next;
		mes "[弯腰的老太太]";
		mes "噢~是的亲爱的~";
		mes "我会把我知道的都告诉你，亲爱的~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "你对医院有了解吗？";
		next;
		mes "[弯腰的老太太]";
		mes "医院？";
		mes "........";
		next;
		mes "[弯腰的老太太]";
		mes "医院？！？！？！？";
		next;
		mes "[弯腰的老太太]";
		mes "那家医院被诅咒了！";
		mes "那里住着邪恶的东西！";
		next;
		mes "[弯腰的老太太]";
		mes "这东西带走了我可怜的小女儿。";
		next;
		switch(select("询问医院的情况：询问女儿的情况。")) {
		case 1:
			mes "[弯腰的老太太]";
			mes "听说医院要建了，大家都很高兴。";
			next;
			mes "[弯腰的老太太]";
			mes "我们不再需要去其他城镇就医。";
			next;
			mes "[弯腰的老太太]";
			mes "但他们建造的那个效果并不那么好。";
			mes "它不能治愈人。";
			mes "当他们砍倒那棵老树来建造它时，我就知道会发生这种情况。";
			next;
			mes "[弯腰的老太太]";
			mes "但管理员不听。";
			mes "他们非但没有治愈人们，反而开始死亡。";
			mes "我女儿也一样...";
			set malaya_bang,17;
			changequest 11297,11298;
			close;
		case 2:
			mes "[弯腰的老太太]";
			mes "她没有受到任何生命危险。";
			mes "这是...";
			mes "只是感冒了……";
			next;
			mes "[弯腰的老太太]";
			mes "可恶的事……我的女儿……";
			mes "那个医院里有东西。";
			close;
		}
	} else if (malaya_bang == 17) {
		select("给她看那根棍子。");
		mes "[弯腰的老太太]";
		mes "什么？";
		mes "啊哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈";
		emotion ET_HUK;
		next;
		mes "[弯腰的老太太]";
		mes "啊哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈";
		emotion ET_HUK;
		next;
		mes "[弯腰的老太太]";
		mes "啊哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈";
		emotion ET_HUK;
		next;
		mes "[弯腰的老太太]";
		mes "啊啊啊啊啊！！！！！！！！！";
		emotion ET_HUK;
		next;
		mes "[弯腰的老太太]";
		mes "你做了什么！";
		mes "那……那是阻止邪物的符咒！";
		next;
		mes "[弯腰的老太太]";
		mes "如果你把它们拉起来，它又会追人了！";
		next;
		mes "[弯腰的老太太]";
		mes "我看到了！";
		mes "当他们关闭医院并说所有人都死了时我看到了这一点。";
		next;
		mes "[弯腰的老太太]";
		mes "但他们都知道。";
		mes "病人并没有全部死掉。";
		next;
		mes "[弯腰的老太太]";
		mes "被活捉了...";
		mes "就拿我女儿的事而言...";
		next;
		mes "[弯腰的老太太]";
		mes "哦亲爱的。";
		next;
		mes "拉斯护士独自站在医院门前，可能有危险。";
		mes "如果我不快点回来的话...";
		set malaya_bang,18;
		changequest 11298,11299;
		close;
	} else if (malaya_bang == 18) {
		mes "拉斯护士独自站在医院门前，可能有危险。";
		mes "如果我不快点回来的话...";
		close;
	} else if (malaya_bang == 32) {
		mes "[弯腰的老太太]";
		mes "是的？护身符？";
		mes "我请村北的萨满制作它们，";
		next;
		mes "[弯腰的老太太]";
		mes "不出名，但却是一位才华横溢的萨满。";
		set malaya_bang,33;
		changequest 11304,11305;
		close;
	} else {
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "女士，对不起，我可以问你一个问题吗？";
		next;
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我有吗";
		next;
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我有吗";
		next;
		mes "[弯腰的老太太]";
		mes "嗬嗬嗬~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "夫人！！！！！！！";
		next;
		mes "[弯腰的老太太]";
		mes "WHO？什么？";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "对不起，我可以问你一件事吗？";
		next;
		mes "[弯腰的老太太]";
		mes "什么？我听不到你说话。";
		mes "说出来！";
		close;
	}
}

malaya,276,367,4	script	Bent Shaman#ma	782,{
	if (malaya_hi < 20) {
		mes "[弯曲萨满]";
		mes "呃呃呃呃呃呃呃呃";
		next;
		mes "连看都不看一眼...";
		close;
	}
	mes "[弯曲萨满]";
	mes "嗯嗯...";
	mes "我感觉，感觉……";
	next;
	mes "[弯曲萨满]";
	mes "我从你身上感觉到了一些不好的东西...";
	if (malaya_bang == 33) {
		next;
		mes "[弯曲萨满]";
		mes "不不...";
		mes "你什么都不用说！";
		mes "你会需要这个。";
		next;
		mes "[弯曲萨满]";
		mes "没关系。";
		mes "不需要钱。";
		mes "这是这个村庄必须面对的业力……";
		set malaya_bang,34;
		changequest 11305,11306;
	}
	close;
}

// Pintados Festival :: malaya_pintados
//============================================================
/*
Description
-----------
The Pintados Festival begins when players have accumulated 1000 Lesser Agimats,
1000 Silver Crosses, and 300 dyestuffs, and lasts for 7 days. During that time,
players are able to create a tattoo.

Global Variables
----------------
$malaya_pintados_00  - Festival time limit, in 30-minute intervals. (range: 0~344)
$malaya_pintados_01  - Number of Lesser Agimats collected. (range: 0~1000)
$malaya_pintados_02  - Number of Silver Crosses collected. (range: 0~1000)
$malaya_pintados_03  - Number of dyestuffs collected. (range: 0~300)
$malaya_pintados_04$ - Last player to create a tattoo.
*/

ma_fild01,1,1,4	script	Pintados Manager#pin	894,{
	if (callfunc("F_GM_NPC",1854,0) == 1) {
		mes "宾果！";
		next;
	} else {
		mes "发生错误。";
		close;
	}
	mes "大家好，我是 Pintados 音乐节经理。请选择一个项目。";
	mes "时间值：("+$malaya_pintados_00+"/344)";
	mes "较小的 Agimat 值：("+$malaya_pintados_01+"/1,000)";
	mes "交叉值：("+$malaya_pintados_02+"/1,000)";
	mes "染料价值：("+$malaya_pintados_03+"/300)";
	mes "最近的纹身创作者："+$malaya_pintados_04$;
	next;
	switch(select("东方医学按钮？开始和结束：详细按钮？调整值：开始计时器：结束计时器")) {
	case 1:
		mes "这是东医控制按钮。";
		mes "您可以设置节日的开始或结束值。";
		next;
		switch(select("开始 Pindados 节日:结束 Pindados 节日:NPC_ON:NPC_OFF")) {
		case 1:
			set $malaya_pintados_00,1;
			donpcevent "Pintados Manager#pin::OnEnable";
			mes "开始 Pindados 节。";
			close;
		case 2:
			donpcevent "Pintados Manager#pin::OnDisable";
			mes "结束彩绘节。";
			close;
		case 3:
			donpcevent "Pintados Manager#pin::OnEnableNPC";
			mes "添加 NPC。";
			close;
		case 4:
			donpcevent "Pintados Manager#pin::OnDisableNPC";
			mes "移除一个 NPC。";
			close;
		}
	case 2:
		mes "调整全局值。请选择要调整的值。";
		next;
		while(1) {
			switch(select("完成调整：时间（"+$malaya_pintados_00+"）：Lesser Agimat（"+$malaya_pintados_01+"）：银十字（"+$malaya_pintados_02+"）：染料（"+$malaya_pintados_03+")")) {
			case 1:
				mes "完成全局调整。";
				close;
			case 2:
				mes "调整时间[0~344]";
				mes "全局增加 1/30 分钟。";
				mes "1 - 49 -> 第一天";
				mes "50 - 98 -> 第 2 天";
				mes "99 - 147 -> 第三天";
				mes "148 - 196 -> 第 4 天";
				mes "197 - 245 -> 第 5 天";
				mes "246 - 294 -> 第 6 天";
				mes "295 - 343 -> 第 7 天";
				mes "全局 1 = 1 小时。";
				next;
				input .@input;
				if (.@input < 0 || .@input > 344)
					close;
				set $malaya_pintados_00, .@input;
				break;
			case 3:
				mes "调整小Agimat的累积值。";
				mes "值可以在 0 到 1000 之间调整。";
				next;
				input .@input;
				if (.@input < 0 || .@input > 1000)
					close;
				set $malaya_pintados_01, .@input;
				break;
			case 4:
				mes "调整Silver Cross的累计值。";
				mes "值可以在 0 到 1000 之间调整。";
				next;
				input .@input;
				if (.@input < 0 || .@input > 1000)
					close;
				set $malaya_pintados_02, .@input;
				break;
			case 5:
				mes "调整染料的累积值。";
				mes "值可以在 0 到 300 之间调整。";
				next;
				input .@input;
				if (.@input < 0 || .@input > 300)
					close;
				set $malaya_pintados_03, .@input;
				break;
			}
			mes "时间值：("+$malaya_pintados_00+"/344)";
			mes "较小的 Agimat 值：("+$malaya_pintados_01+"/1,000)";
			mes "交叉值：("+$malaya_pintados_02+"/1,000)";
			mes "染料价值：("+$malaya_pintados_03+"/300)";
			mes "这是当前值。你想调整一下吗？";
			next;
		}
	case 3:
		initnpctimer;
		break;
	case 4:
		stopnpctimer;
		break;
	}
	end;

// Moved to individual NPCs for smoother processing.
OnInit:
	if ($malaya_pintados_00 > 0) {
		// donpcevent "Pintados Manager#pin::OnEnableNPC";
		initnpctimer;// unoffical fix
	}
	end;

OnTimer1800000:
	if ($malaya_pintados_00 > 0 && $malaya_pintados_00 < 344) {
		set $malaya_pintados_00,$malaya_pintados_00+1;
		initnpctimer;
	} else {
		set $malaya_pintados_00,0;
		donpcevent "Pintados Manager#pin::OnDisable";
	}
	end;
OnEnable:
	initnpctimer;
	donpcevent "Pintados Manager#pin::OnEnableNPC";
	announce "The 'Pintados Festival' will be held for a week in Baryo Mahiwaga.",bc_all,"0xFB9D04",FW_NORMAL,12;
	end;
OnDisable:
	stopnpctimer;
	set $malaya_pintados_00,0;
	set $malaya_pintados_01,0;
	set $malaya_pintados_02,0;
	set $malaya_pintados_03,0;
	donpcevent "Pintados Manager#pin::OnDisableNPC";
	announce "The 'Pintados Festival' ended with great success.",bc_all,"0xFB9D04",FW_NORMAL,12;
	end;
OnEnableNPC:
	set .@str$, "::OnEnable";
OnDisableNPC:
	if (.@str$ == "")
		set .@str$, "::OnDisable";
	donpcevent "Tourist#pin01"+.@str$;
	donpcevent "Tourist#pin02"+.@str$;
	donpcevent "Tourist#pin03"+.@str$;
	donpcevent "Young Tattooist#pin04"+.@str$;
	donpcevent "Tourist#pin05"+.@str$;
	donpcevent "Drumming Young Man#pin06"+.@str$;
	donpcevent "Drumming Young Man#pin07"+.@str$;
	donpcevent "Drumming Young Man#pin08"+.@str$;
	donpcevent "Beat Catching Boy#pin09"+.@str$;
	donpcevent "Beat Catching Boy#pin10"+.@str$;
	donpcevent "Beat Catching Boy#pin11"+.@str$;
	end;
}

ma_fild01,179,260,2	script	Festival Helper Boy#pin	577,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 1000) {
		mes "无法继续，因为您拥有太多物品。";
		close;
	}
	if ($malaya_pintados_00 == 0) {
		if ($malaya_pintados_01 > 999 && $malaya_pintados_02 > 999 && $malaya_pintados_03 > 299) {
			set $malaya_pintados_00,1;
			donpcevent "Pintados Manager#pin::OnEnable";
			emotion ET_THROB;
			mes "[伊斯科]";
			mes "许多冒险者帮助我找到了节日物品，然后我将它们带回了村庄。";
			next;
			emotion ET_DELIGHT;
			mes "[伊斯科]";
			mes "呵呵...现在可以举办‘^7A96E0Pintados Festival^000000'了。";
			close;
		}
		// fall through
	} else {
		mes "[伊斯科]";
		mes "呵呵……欢乐的“^7A96E0Pintados Festival^000000”正在如火如荼地进行中。";
		next;
		if ($malaya_pintados_00 > 0 && $malaya_pintados_00 < 50) {
			emotion ET_DELIGHT;
			mes "[伊斯科]";
			mes "今天是“^7A96E0Pintados Festival^000000”的第一天。节日为期7天，祝大家玩得开心。";
			close;
		} else if ($malaya_pintados_00 > 49 && $malaya_pintados_00 < 99) {
			mes "[伊斯科]";
			mes "哦！你可知道？";
			mes "乡村纹身师只在“^7A96E0Pintados Festival^000000”期间进行纹身。";
			close;
		} else if ($malaya_pintados_00 > 98 && $malaya_pintados_00 < 148) {
			mes "[伊斯科]";
			mes "今天是“^7A96E0Pintados Festival^000000”的第三天。";
			next;
			mes "[伊斯科]";
			mes "村民们说，有一位名叫"+$malaya_pintados_04$+"在音乐节上纹身了。";
			close;
		} else if ($malaya_pintados_00 > 147 && $malaya_pintados_00 < 197) {
			mes "[伊斯科]";
			mes "村民们说，有一位名叫"+$malaya_pintados_04$+"在音乐节上纹身了。";
			next;
			mes "[伊斯科]";
			mes "纹身师很可怕，不会为任何人画纹身，所以冒险家一定很特别。";
			close;
		} else if ($malaya_pintados_00 > 196 && $malaya_pintados_00 < 246) {
			mes "[伊斯科]";
			mes "一位冒险家名叫"+$malaya_pintados_04$+"在村里很有名。";
			next;
			mes "[伊斯科]";
			mes "你见过^FF8440Bakonawa^000000，那个已知能吞下月亮的怪物吗？他们说他真的很凶猛。";
			close;
		} else if ($malaya_pintados_00 > 245 && $malaya_pintados_00 < 295) {
			emotion ET_CRY;
			mes "[伊斯科]";
			mes "我很伤心。许多冒险者协助举办了“^7A96E0Pintados Festival^000000”，现在只剩下一天了。";
			close;
		} else {
			emotion ET_CRY;
			mes "[伊斯科]";
			mes "天啊！现在已经是“^7A96E0Pintados Festival^000000”的最后一天了。不敢相信不会有更多的庆祝活动。";
			close;
		}
	}
	emotion ET_CONFUSE;
	mes "[伊斯科]";
	mes "哦不。节日即将结束我们该怎么办？";
	next;
	switch(select("它是什么？：你收集了多少？：带回了丢失的物品。")) {
	case 1:
		mes "[伊斯科]";
		mes "自古以来就有一个传统节日";
		mes "在马格瓦加村称为“<<clr0>>pintados 节<<clr1>>”";
		next;
		emotion ET_OTL;
		mes "[伊斯科]";
		mes "我想这次我不会去参加音乐节了。";
		next;
		select("为什么？");
		mes "[伊斯科]";
		mes "我要从马来亚港返回村庄，运送 1000 个小阿吉马特、1000 个银十字勋章和 300 种染料。";
		next;
		mes "[伊斯科]";
		mes "但是“^FF8440Bongisungisu^000000”突然出现并夺走了我的物品。";
		next;
		select("你受伤了吗？");
		emotion ET_OHNO;
		mes "[伊斯科]";
		mes "幸运的是没有。";
		next;
		mes "[伊斯科]";
		mes "但我陷入了深深的麻烦。如果没有这些物品，“^7A96E0Pintados Festival^000000”就无法举行。我应该怎么办。";
		close;
	case 2:
		mes "[伊斯科]";
		mes "许多冒险家正在帮忙，但只是收集......";
		next;
		mes "[伊斯科]";
		mes "小阿吉马特"+$malaya_pintados_01+"、银十字"+$malaya_pintados_02+"、染料"+$malaya_pintados_03+"到目前为止。";
		next;
		emotion ET_OHNO;
		mes "[伊斯科]";
		mes "唉……我们还缺少开始“^7A96E0Pintados Festival^000000”的材料。";
		close;
	case 3:
		set .@str$, (Sex == SEX_MALE)?"Bro":"Sis";
		break;
	}
	emotion ET_THROB;
	mes "[伊斯科]";
	mes "哦~真的吗？哇！";
	mes "谢谢！"+strcharinfo(0)+" "+.@str$+"!!";
	mes "呵呵。你带来了什么？";
	next;
	set .@i, select(
		"Lesser Agimat (^FF0000"+(($malaya_pintados_01 > 999)?"Collection complete":(1000 - $malaya_pintados_01)+" short")+"^000000):"+
		"Silver Cross (^FF0000"+(($malaya_pintados_02 > 999)?"Collection complete":(1000 - $malaya_pintados_02)+" short")+"^000000):"+
		"Dyestuff (^FF0000"+(($malaya_pintados_03 > 299)?"Collection complete":(300 - $malaya_pintados_03)+" short")+"^000000)"
	);
	switch(.@i) {
	case 1:
		set .@item,6497; //Lesser_Agimat
		set .@name$,"Lesser Agimats";
		set .@total,1000;
		break;
	case 2:
		set .@item,6502; //Silver_Cross
		set .@name$,"Silver Crosses";
		set .@total,1000;
		break;
	case 3:
		setarray .@items[0],975,976,978,979,980,981,982,983;
		set .@name$,"Dyestuffs";
		set .@total,300;
		break;
	}
	mes "[伊斯科]";
	mes "哇！ "+.@str$+" 你带来了"+.@name$+"！";
	next;
	mes "[伊斯科]";
	mes "等待。一……二……";
	if (getd("$malaya_pintados_0"+.@i) >= .@total) {
		mes "呃……哦？我已经拥有了所有的"+.@name$+"我需要。"+.@str$+"！但谢谢你的帮助。";
		close;
	}
	if (.@i < 3) {
		mes "我"+(.@total - getd("$malaya_pintados_0"+.@i))+" 还差"+.@name$+"。你带了多少？";
		next;
		switch(select("一？！：输入数量。")) {
		case 1:
			set .@amount,1;
			mes "[伊斯科]";
			mes "呵呵……你带回来一个了。";
			next;
			break;
		case 2:
			mes "[伊斯科]";
			mes "呵呵...我计算速度很慢。超过50我就迷路了。你给我多少？";
			next;
			input .@amount;
			if (.@amount < 1 || .@amount > 50) {
				mes "[伊斯科]";
				mes "唉~我迷路了！我无法计算这些数字是否奇怪。";
				close;
			}
			break;
		}
		if (countitem(.@item) < .@amount) {
			mes "[伊斯科]";
			mes "叹气~"+.@str$+"！哪里是"+getitemname(.@item)+"？";
			close;
		}
	} else {
		mes "我 "+(.@total - getd("$malaya_pintados_0"+.@i))+" 缺少染料。你带了什么染料？";
		next;
		for(set .@j,0; .@j<getarraysize(.@items); set .@j,.@j+1)
			set .@menu$, .@menu$+getitemname(.@items[.@j])+" (^FF0000"+countitem(.@items[.@j])+"^000000):";
		set .@item, .@items[select(.@menu$)-1];
		if (countitem(.@item) == 0) {
			mes "[伊斯科]";
			mes "唉~你没有"+getitemname(.@item)+".";
			close;
		}
		mes "[伊斯科]";
		mes .@str$+"！多少"+ getitemname(.@item) +"你能给我从"+countitem(.@item)+"你有吗？";
		next;
		switch(select("输入数量：全部")) {
		case 1:
			mes "[伊斯科]";
			mes "呵呵...我计算速度很慢。超过50我就迷路了。你给我多少？";
			next;
			input .@amount;
			if (.@amount < 1 || .@amount > 50) {
				mes "[伊斯科]";
				mes "唉~我告诉过你我不擅长数字。";
				close;
			}
			break;
		case 2:
			set .@amount, countitem(.@item);
			break;
		}
		if (countitem(.@item) < .@amount) {
			mes "[伊斯科]";
			mes "叹息...我缺少"+getitemname(.@item)+".";
			close;
		}
	}
	delitem .@item,.@amount;
	setd "$malaya_pintados_0"+.@i, getd("$malaya_pintados_0"+.@i)+.@amount;
	set .@amount_left, .@total - getd("$malaya_pintados_0"+.@i);
	mes "[伊斯科]";
	mes "呵呵...谢谢。"+.@str$+"！";
	if (.@amount_left <= 0)
		mes "哇！我们已经收集了我们需要的所有"+.@name$+"。快乐~！";
	else
		mes "我只需要"+.@amount_left+"更多"+.@name$+".";
	close;
}

ma_fild01,172,223,6	script	Tattooist#pin	574,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 1000) {
		mes "无法继续，因为您拥有太多物品。";
		close;
	}
	emotion ET_QUESTION;
	mes "[纹身师]";
	mes "你为什么想要纹身？";
	next;
	switch(select("什么是纹身？：我很好奇纹身的效果。：我需要纹身。")) {
	case 1:
		mes "[纹身师]";
		mes "据说，强大怪物的纹身可以增加持有者的能力。";
		next;
		select("惊人的。我怎样才能得到一个？");
		mes "[纹身师]";
		mes "绘制纹身是一项非常神圣的任务。";
		next;
		mes "[纹身师]";
		mes "10 古老的恩怨在我画纹身时保护我。";
		next;
		mes "[纹身师]";
		mes "1 个看起来像强大怪物的玩偶。";
		next;
		mes "[纹身师]";
		mes "最后但并非最不重要的一点是，1 个灵魂碎片可将强大怪物的能量注入纹身中。";
		next;
		select("你会画什么样的纹身？");
		mes "[纹身师]";
		mes "我可以画3种纹身。";
		next;
		mes "[纹身师]";
		mes "Bangungot Agimat 纹身是来自马来亚港一棵古老巨树的强大怪物。";
		next;
		mes "[纹身师]";
		mes "Bakonawa Agimat 纹身是一个可以吞下月亮的巨大怪物。";
		next;
		mes "[纹身师]";
		mes "Buwaya Agimat 纹身 一条绑架人的巨型鳄鱼。";
		next;
		select("哪里可以获得灵魂碎片和人偶？");
		mes "[纹身师]";
		mes "你可以从 Buwaya、Bangungot 和 Bakonawa 那里获得这些强大的物品，但这并不是一件容易的事。";
		next;
		mes "[纹身师]";
		mes "这项神圣的任务并不是每天都能完成。纹身仅在“^7A96E0Pintados Festival^000000”期间绘制。";
		close;
	case 2:
		mes "[纹身师]";
		mes "您对哪种纹身效果感到好奇？";
		next;
		while(1) {
			switch (select("噩梦 Agimat 纹身：鳄鱼 Agimat 纹身：Bakonawa Agimat 纹身：我没有问题。")) {
			case 1:
				mes "[纹身师]";
				mes "需要 10 个远古恩怨、1 个班古戈特之魂和 1 个班古戈特娃娃来制作";
				next;
				mes "[纹身师]";
				mes "Bangungot Agimat 纹身拥有马来亚港一棵古老巨树的能量。";
				next;
				mes "[纹身师]";
				mes "治疗他人的效果提高 4%，受到他人治疗的效果提高 7%。";
				next;
				break;
			case 2:
				mes "[纹身师]";
				mes "需要 10 个远古恩怨、1 个布瓦亚之魂、1 个布瓦亚娃娃来制作";
				next;
				mes "[纹身师]";
				mes "Buwaya Agimat 纹身包含来自巨型鳄鱼的能量。";
				next;
				mes "[纹身师]";
				mes "MATK 增加 +7%，固定施法减少 7%。";
				next;
				break;
			case 3:
				mes "[纹身师]";
				mes "需要 10 个远古恩怨、1 个巴科纳瓦灵魂碎片和 1 个巴科纳瓦娃娃来制作";
				next;
				mes "[纹身师]";
				mes "巴科纳瓦・阿吉玛特纹身蕴含着能够吞噬月亮的巨大怪物的能量。";
				next;
				mes "[纹身师]";
				mes "攻击力+7%，攻击速度+10%。";
				next;
				break;
			case 4:
				mes "[纹身师]";
				mes "看来您已经得到了所有答案。希望您旅途愉快。";
				close;
			}
			mes "[纹身师]";
			mes "您对其他纹身效果还有疑问吗？";
			next;
		}
	case 3:
		break;
	}
	if ($malaya_pintados_00 == 0) {
		mes "[纹身师]";
		mes "绘制纹身的神圣任务只能在“^7A96E0Pintados Festival^000000”期间完成。抱歉，看来节日没有举行。";
		close;
	}
	mes "[纹身师]";
	mes "您在“^7A96E0Pintados Festival^000000”期间准时到达。";
	next;
	mes "[纹身师]";
	mes "没有比在神圣的“^7A96E0Pintados Festival^000000”期间画纹身更好的时间了。";
	next;
	mes "[纹身师]";
	mes "节日持续时间不长，我该开始画画了。你需要什么纹身？";
	next;
	switch(select("我会考虑一下。:Bangungot Agimat 纹身:Buwaya Agimat 纹身:Bakonawa Agimat 纹身")) {
	case 1:
		mes "[纹身师]";
		mes "希望您喜欢“^7A96E0Pintados Festival^000000”。";
		close;
	case 2:
		set .@tattoo,2911; //Bangungot_Tattoo
		set .@doll,6517; //Bangungot_Doll
		set .@spirit,6524; //Bangungot_Spirit_Piece
		set .@name$,"Bangungot";
		break;
	case 3:
		set .@tattoo,2907; //Buwaya_Tattoo
		set .@doll,6518; //Buwaya_Doll
		set .@spirit,6525; //Buwaya_Spirit_Piece
		set .@name$,"Buwaya";
		break;
	case 4:
		set .@tattoo,2910; //Bakonawa_Tattoo
		set .@doll,6516; //Bakonawa_Doll
		set .@spirit,6523; //Bakonawa_Spirit_Piece
		set .@name$,"Bakonawa";
		break;
	}
	if (countitem(6499) < 10 || countitem(.@spirit) == 0 || countitem(.@doll) == 0) {
		mes "[纹身师]";
		mes "我觉得你缺材料。";
		mes "需要 10 个远古恩怨、1 个"+.@name$+" 的灵魂和 1 个"+.@name$+" 玩偶来制作^EE1D11"+.@name$+" Agimat Tattoo^000000。";
		close;
	}
	emotion ET_SPARK;
	mes "[纹身师]";
	mes "这些材料充满了神圣的能量。我确信使用这些我们会得到一个很棒的纹身。";
	next;
	mes "[纹身师]";
	mes "如果你想让我画一个神圣的纹身，请不要打扰我。";
	next;
	mes "纹身师将远古恩怨放置在工作场所周围。";
	next;
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#01";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#02";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#03";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#04";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#05";
	mes "远古怨恨亮了起来，工具开始发光。他对着发光的工具和材料满意地笑了。";
	next;
	mes "进而"+.@name$+"他紧紧地盯着这个娃娃，仿佛要把它的每一个细节都记在脑子里。";
	next;
	if(select("还不开始吗？：…………") == 1) {
		emotion ET_FRET;
		delitem 6499,5; //Ancient_Grudge
		mes "[纹身师]";
		mes "哦不，现在你毁了它。";
		mes "我无法为像你这样不懂艺术的人画纹身。剩下的材料你可以拿回来。";
		next;
		mes "收回5个远古恩怨，"+.@name$+"娃娃和碎片"+.@name$+"的精神。";
		close;
	}
	emotion ET_STARE;
	mes "你认为他会用眼睛融化娃娃吗？";
	next;
	specialeffect EF_SONICBLOWHIT;
	mes "他缓缓地闭上眼睛，又睁开眼睛，仿佛要把这个娃娃记在脑子里，然后举起一个发光的工具开始画画。";
	next;
	mes "这"+.@name$+"纹身几乎立刻就完成了。";
	next;
	emotion ET_FRET;
	mes "但他一直在观察图画的每个角落，好像他不喜欢其中的某些细节。";
	next;
	if(select("我觉得不错：…………") == 1) {
		emotion ET_FRET;
		emotion ET_ANGER;
		delitem 6499,5; //Ancient_Grudge
		mes "[纹身师]";
		mes "呃！我告诉过你不要打扰！";
		next;
		mes "纹身师恼怒地把画撕碎了。";
		next;
		mes "[纹身师]";
		mes "我不能再这样下去了。也许下次吧。剩下的材料你可以拿回来。";
		next;
		mes "收回5个远古恩怨，"+.@name$+"娃娃和碎片"+.@name$+"的精神。";
		close;
	}
	mes "他定定地看着这幅画良久，然后满意地微笑着点了点头。";
	next;
	mes "看来他对这件事很满意"+.@name$+"绘画。";
	next;
	emotion ET_HUM;
	mes "但现在他只是盯着天空，没有做任何其他事情。他还在等什么？";
	next;
	if(select("什么时候能完成？：…………") == 1) {
		emotion ET_FRET;
		emotion ET_ANGER;
		delitem 6499,5; //Ancient_Grudge
		mes "[纹身师]";
		mes "呃！我告诉过你不要打扰！";
		next;
		mes "纹身师恼怒地把画撕碎了。";
		next;
		mes "[纹身师]";
		mes "我不能再这样下去了。也许下次吧。剩下的材料你可以拿回来。";
		next;
		mes "收回5个远古恩怨，"+.@name$+"娃娃和碎片"+.@name$+"的精神。";
		close;
	}
	emotion ET_THINK;
	mes "[纹身师]";
	mes ".";
	next;
	mes "[纹身师]";
	mes "。 。";
	next;
	mes "[纹身师]";
	mes "。 。 。";
	next;
	emotion ET_THINK;
	mes "[纹身师]";
	mes "。 。 。 。";
	next;
	mes "[纹身师]";
	mes "。 。 。 。 。";
	next;
	mes "[纹身师]";
	mes "。 。 。 。 。 。";
	next;
	mes "[纹身师]";
	mes "。 。 。 。 。 。 。";
	next;
	emotion ET_SPARK;
	mes "纹身师盯着天空看了一会儿，眼睛开始放光，然后他把那块碎片打碎了。"+.@name$+"双手的灵魂。";
	next;
	specialeffect EF_DETOXICATION;
	mes "的一块"+.@name$+"的神魂被粉碎成粉末。纹身师的手闪闪发光。";
	next;
	if(select("为什么你把碎片弄碎了……：………………") == 1) {
		delitem 6499,5; //Ancient_Grudge
		delitem .@spirit,1;
		emotion ET_FRET;
		emotion ET_ANGER;
		mes "[纹身师]";
		mes "呃！我告诉过你不要打扰！";
		next;
		mes "他手中的光芒渐渐消失。他盯着自己的手看了一会儿，然后烦躁地把画撕了。";
		next;
		mes "[纹身师]";
		mes "我差点就完成了一件精彩的作品，但你毁了它。心情不太好。剩下的材料你可以拿走。";
		next;
		mes "收回5个远古恩怨和人偶。";
		close;
	}
	mes "他双手捧起粉末，然后将其吹到画上。";
	next;
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#01";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#02";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#03";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#04";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#05";
	mes "所有远古恩怨开始燃烧，然后光芒从"+.@name$+"画消失了。";
	next;
	specialeffect EF_LIGHTSPHERE;
	mes "绘图顶部闪烁的灯光。";
	next;
	mes "光线渐渐消失，"+.@name$+"绘画不再是以前那么简单了。";
	next;
	mes ""+.@name$+" 的图画看起来好像……还活着。";
	next;
	mes "纹身师终于满意了，满面笑容。";
	next;
	emotion ET_SMILE;
	mes "[纹身师]";
	mes "哈哈。结果很棒。";
	next;
	delitem 6499,10; //Ancient_Grudge
	delitem .@spirit,1;
	delitem .@doll,1;
	getitem .@tattoo,1;
	set $malaya_pintados_04$, strcharinfo(0);
	mes "[纹身师]";
	mes "很抱歉让您久等了。但这是值得的，因为我已经很长时间没有创作过这种质量的纹身了。";
	next;
	mes "[纹身师]";
	mes "您等待已久的^EE1D11"+.@name$+" Agimat Tattoo^000000现已完成。";
	next;
	mes "[纹身师]";
	mes "希望您喜欢“^7A96E0Pintados Festival^000000”。";
	close;
}

ma_fild01,171,224,0	script	Ancient Grudge#01	139,{ end; }
ma_fild01,173,224,0	duplicate(Ancient Grudge#01)	Ancient Grudge#02	139
ma_fild01,173,223,0	duplicate(Ancient Grudge#01)	Ancient Grudge#03	139
ma_fild01,172,222,0	duplicate(Ancient Grudge#01)	Ancient Grudge#04	139
ma_fild01,171,223,0	duplicate(Ancient Grudge#01)	Ancient Grudge#05	139

ma_fild01,192,200,8	script	Tourist#pin01	58,{
	mes "[游客]";
	mes "我从远方赶来，放下一切，来享受“Pintados Festival”。";
	next;
	mes "[游客]";
	mes "我不后悔来访，但是...";
	next;
	mes "[游客]";
	mes "我不喜欢我经历了那么多之后才得到的纹身。";
	next;
	mes "[游客]";
	mes "我仔细观察了一下，但我认为纹身师犯了一个错误。";
	next;
	mes "[游客]";
	mes "这毁了我的整个访问。";
	next;
	mes "[游客]";
	mes "啧！";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin01";
	end;
OnEnable:
	enablenpc "Tourist#pin01";
	end;
OnDisable:
	disablenpc "Tourist#pin01";
	end;
}

ma_fild01,211,200,6	script	Tourist#pin02	775,{
	mes "[游客]";
	mes "我听说‘品塔多斯节’，特地从昆仑赶来。";
	next;
	mes "[游客]";
	mes "以防万一你可能不这么认为，这是我脸上的面具，而不是纹身。";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin02";
	end;
OnEnable:
	enablenpc "Tourist#pin02";
	end;
OnDisable:
	disablenpc "Tourist#pin02";
	end;
}

ma_fild01,251,205,2	script	Tourist#pin03	824,{
	mes "[游客]";
	mes "嘿，听我说。这不是我想要的纹身。";
	next;
	mes "[游客]";
	mes "我想要一个 Bakonawa 纹身，但我越看越觉得这是 Bangungot。";
	next;
	mes "[纹身师]";
	mes "不...你说过你想要那个。别这么难。";
	next;
	mes "[游客]";
	mes "难道你不知道顾客就是上帝吗？啊？你想要坏名声吗？";
	next;
	mes "[纹身师]";
	mes "呃...不敢相信这一点。";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin03";
	end;
OnEnable:
	enablenpc "Tourist#pin03";
	end;
OnDisable:
	disablenpc "Tourist#pin03";
	end;
}

ma_fild01,249,206,6	script	Young Tattooist#pin04	582,{
	mes "[纹身师]";
	mes "啊……我不能和这样的顾客合作。";
	next;
	mes "[纹身师]";
	mes "我必须告诉你多少次，你说过你想要 Bangungot。";
	next;
	mes "[纹身师]";
	mes "哎呀，我的喉咙……大喊大叫不会有任何结果。";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Young Tattooist#pin04";
	end;
OnEnable:
	enablenpc "Young Tattooist#pin04";
	end;
OnDisable:
	disablenpc "Young Tattooist#pin04";
	end;
}

ma_fild01,162,235,6	script	Tourist#pin05	815,{
	mes "[游客]";
	mes "他们说 Pintados 音乐节只会举办一周。";
	next;
	mes "[游客]";
	mes "我从洛阳来，不知道这个节日。一定是我的幸运日。";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin05";
	end;
OnEnable:
	enablenpc "Tourist#pin05";
	end;
OnDisable:
	disablenpc "Tourist#pin05";
	end;
}

ma_fild01,164,234,6	script	Drumming Young Man#pin06	578,{
	mes "巴哑哑-巴哑哑";
	next;
	mes "[打鼓的年轻人]";
	mes "如果没有鼓手，Pintados 音乐节就不是一个音乐节。";
	next;
	mes "[打鼓的年轻人]";
	mes "你为什么不加入呢？";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Drumming Young Man#pin06";
	end;
OnEnable:
	enablenpc "Drumming Young Man#pin06";
	end;
OnDisable:
	disablenpc "Drumming Young Man#pin06";
	end;
}

ma_fild01,170,231,4	script	Drumming Young Man#pin07	578,{
	mes "巴哑哑-巴哑哑";
	next;
	mes "[打鼓的年轻人]";
	mes "Pintados Festival 中的 Pintados 在我们的语言中意为“绘画”。";
	next;
	mes "[打鼓的年轻人]";
	mes "所以这可能就是为什么我们让人们在节日期间画特殊纹身的原因。";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Drumming Young Man#pin07";
	end;
OnEnable:
	enablenpc "Drumming Young Man#pin07";
	end;
OnDisable:
	disablenpc "Drumming Young Man#pin07";
	end;
}

ma_fild01,164,228,6	script	Drumming Young Man#pin08	578,{
	mes "巴哑哑-巴哑哑";
	next;
	mes "[打鼓的年轻人]";
	mes "我记得不太清楚了，但他们说平塔多斯节是为了庆祝丰收。";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Drumming Young Man#pin08";
	end;
OnEnable:
	enablenpc "Drumming Young Man#pin08";
	end;
OnDisable:
	disablenpc "Drumming Young Man#pin08";
	end;
}

ma_fild01,170,234,4	script	Beat Catching Boy#pin09	577,{
	mes "巴-杜姆-TSH- 巴-杜姆-TSH-";
	next;
	mes "[追赶男孩]";
	mes "当我听到有节奏的鼓声和木棍声时，我总是充满活力。";
	next;
	mes "[追赶男孩]";
	mes "ba-dum-TSH- ba-dum-TSH- 太有趣了！";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Beat Catching Boy#pin09";
	end;
OnEnable:
	enablenpc "Beat Catching Boy#pin09";
	end;
OnDisable:
	disablenpc "Beat Catching Boy#pin09";
	end;
}

ma_fild01,164,231,6	script	Beat Catching Boy#pin10	577,{
	mes "巴-杜姆-TSH- 巴-杜姆-TSH-";
	next;
	mes "[追赶男孩]";
	mes "我现在可能会用棍子来捕捉节拍，但你永远不知道我是否会长到足以打鼓，对吧？";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc();
	end;
OnEnable:
	enablenpc();
	end;
OnDisable:
	disablenpc();
	end;
}
ma_fild01,170,228,4	duplicate(Beat Catching Boy#pin10)	Beat Catching Boy#pin11	577
